HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 21 Apr 2018 14:37:40 GMT
Link: <https://api.github.com/search/issues?q=repo%3Acrystal-lang%2Fcrystal+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Acrystal-lang%2Fcrystal+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D8F8:3706:3A9FC23:7547DCA:5ADB4CB3
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 29
X-Ratelimit-Reset: 1524321520
X-Runtime-Rack: 0.350948
X-Xss-Protection: 1; mode=block

8000
{"total_count":2967,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5953","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5953/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5953/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5953/events","html_url":"https://github.com/crystal-lang/crystal/issues/5953","id":314453712,"number":5953,"title":"File.read fails with big files","user":{"login":"sdogruyol","id":990485,"avatar_url":"https://avatars0.githubusercontent.com/u/990485?v=4","gravatar_id":"","url":"https://api.github.com/users/sdogruyol","html_url":"https://github.com/sdogruyol","followers_url":"https://api.github.com/users/sdogruyol/followers","following_url":"https://api.github.com/users/sdogruyol/following{/other_user}","gists_url":"https://api.github.com/users/sdogruyol/gists{/gist_id}","starred_url":"https://api.github.com/users/sdogruyol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdogruyol/subscriptions","organizations_url":"https://api.github.com/users/sdogruyol/orgs","repos_url":"https://api.github.com/users/sdogruyol/repos","events_url":"https://api.github.com/users/sdogruyol/events{/privacy}","received_events_url":"https://api.github.com/users/sdogruyol/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":20487870,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/status:invalid","name":"status:invalid","color":"e6e6e6","default":false},{"id":253019694,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:stdlib","name":"topic:stdlib","color":"fad8c7","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-04-15T21:27:12Z","updated_at":"2018-04-15T22:23:26Z","closed_at":"2018-04-15T22:13:38Z","author_association":"MEMBER","body":"`File.read` fails with files which are greater than 2Gb (32 bits).\r\n\r\nSteps to reproduce on Crystal master:\r\n\r\n```\r\n$ dd if=/dev/urandom of=large.txt bs=64M count=128\r\n$ crystal eval 'File.read(\"large.txt\")'\r\n```\r\nStacktrace:\r\n```\r\nUsing compiled compiler at `.build/crystal'\r\nUnhandled exception: Negative capacity (ArgumentError)\r\n  from crystal/src/string.cr:0:7 in 'check_capacity_in_bounds'\r\n  from crystal/src/string/builder.cr:12:5 in 'initialize'\r\n  from crystal/src/string/builder.cr:11:3 in 'new'\r\n  from crystal/src/file.cr:26:15 in 'read'\r\n  from crystal/src/file.cr:589:3 in 'read'\r\n  from /eval:1:1 in '__crystal_main'\r\n  from crystal/src/crystal/main.cr:104:5 in 'main_user_code'\r\n  from crystal/src/crystal/main.cr:93:7 in 'main'\r\n  from crystal/src/crystal/main.cr:133:3 in 'main'\r\n  from __libc_start_main\r\n  from _start\r\n  from ???\r\n```\r\n\r\nWe have an old PR but it's a hack https://github.com/crystal-lang/crystal/pull/3218\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5940","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5940/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5940/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5940/events","html_url":"https://github.com/crystal-lang/crystal/issues/5940","id":313139859,"number":5940,"title":"Crystal API docs sidebar bad README indentation","user":{"login":"faustinoaq","id":3067335,"avatar_url":"https://avatars2.githubusercontent.com/u/3067335?v=4","gravatar_id":"","url":"https://api.github.com/users/faustinoaq","html_url":"https://github.com/faustinoaq","followers_url":"https://api.github.com/users/faustinoaq/followers","following_url":"https://api.github.com/users/faustinoaq/following{/other_user}","gists_url":"https://api.github.com/users/faustinoaq/gists{/gist_id}","starred_url":"https://api.github.com/users/faustinoaq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faustinoaq/subscriptions","organizations_url":"https://api.github.com/users/faustinoaq/orgs","repos_url":"https://api.github.com/users/faustinoaq/repos","events_url":"https://api.github.com/users/faustinoaq/events{/privacy}","received_events_url":"https://api.github.com/users/faustinoaq/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":153431357,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:docs","name":"topic:docs","color":"006b75","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/crystal-lang/crystal/milestones/25","html_url":"https://github.com/crystal-lang/crystal/milestone/25","labels_url":"https://api.github.com/repos/crystal-lang/crystal/milestones/25/labels","id":2996248,"number":25,"title":"Next","description":"Probably 0.25.0","creator":{"login":"RX14","id":2788811,"avatar_url":"https://avatars0.githubusercontent.com/u/2788811?v=4","gravatar_id":"","url":"https://api.github.com/users/RX14","html_url":"https://github.com/RX14","followers_url":"https://api.github.com/users/RX14/followers","following_url":"https://api.github.com/users/RX14/following{/other_user}","gists_url":"https://api.github.com/users/RX14/gists{/gist_id}","starred_url":"https://api.github.com/users/RX14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RX14/subscriptions","organizations_url":"https://api.github.com/users/RX14/orgs","repos_url":"https://api.github.com/users/RX14/repos","events_url":"https://api.github.com/users/RX14/events{/privacy}","received_events_url":"https://api.github.com/users/RX14/received_events","type":"User","site_admin":false},"open_issues":2,"closed_issues":247,"state":"open","created_at":"2017-12-24T12:45:08Z","updated_at":"2018-04-20T23:14:35Z","due_on":null,"closed_at":null},"comments":3,"created_at":"2018-04-11T01:10:51Z","updated_at":"2018-04-13T06:57:39Z","closed_at":"2018-04-13T06:56:38Z","author_association":"CONTRIBUTOR","body":"On https://crystal-lang.org/api/0.24.2/index.html\r\n\r\n![screenshot_20180410_200738](https://user-images.githubusercontent.com/3067335/38591131-d2ae2182-3cfa-11e8-9e81-0139b6d1a891.png)\r\n\r\n\r\nVersus master: https://crystal-lang.org/api/master/index.html\r\n\r\n**(See README indentation)**\r\n\r\n![screenshot_20180410_200827](https://user-images.githubusercontent.com/3067335/38591153-efb6d38c-3cfa-11e8-91e3-6c345ded34f2.png)\r\n\r\n/cc @straight-shoota @RX14 @ysbaddaden @oprypin","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5934","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5934/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5934/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5934/events","html_url":"https://github.com/crystal-lang/crystal/issues/5934","id":312716588,"number":5934,"title":"Publish nightly API docs for master","user":{"login":"straight-shoota","id":466378,"avatar_url":"https://avatars0.githubusercontent.com/u/466378?v=4","gravatar_id":"","url":"https://api.github.com/users/straight-shoota","html_url":"https://github.com/straight-shoota","followers_url":"https://api.github.com/users/straight-shoota/followers","following_url":"https://api.github.com/users/straight-shoota/following{/other_user}","gists_url":"https://api.github.com/users/straight-shoota/gists{/gist_id}","starred_url":"https://api.github.com/users/straight-shoota/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/straight-shoota/subscriptions","organizations_url":"https://api.github.com/users/straight-shoota/orgs","repos_url":"https://api.github.com/users/straight-shoota/repos","events_url":"https://api.github.com/users/straight-shoota/events{/privacy}","received_events_url":"https://api.github.com/users/straight-shoota/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-04-09T22:56:45Z","updated_at":"2018-04-11T18:30:16Z","closed_at":"2018-04-11T18:30:15Z","author_association":"CONTRIBUTOR","body":"With the new CI setup, we're getting nightly builds including API docs. But https://crystal-lang.org/api/master/ still lags behind and has not been updated since the release of 0.24.2 a month ago. I'm not sure if that's a bug or simply not implemented yet, but it would be great to have access to the latest API docs.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5926","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5926/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5926/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5926/events","html_url":"https://github.com/crystal-lang/crystal/issues/5926","id":311711241,"number":5926,"title":"segfault when using one parameter as default from another one in initialize","user":{"login":"johndescs","id":1863852,"avatar_url":"https://avatars2.githubusercontent.com/u/1863852?v=4","gravatar_id":"","url":"https://api.github.com/users/johndescs","html_url":"https://github.com/johndescs","followers_url":"https://api.github.com/users/johndescs/followers","following_url":"https://api.github.com/users/johndescs/following{/other_user}","gists_url":"https://api.github.com/users/johndescs/gists{/gist_id}","starred_url":"https://api.github.com/users/johndescs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johndescs/subscriptions","organizations_url":"https://api.github.com/users/johndescs/orgs","repos_url":"https://api.github.com/users/johndescs/repos","events_url":"https://api.github.com/users/johndescs/events{/privacy}","received_events_url":"https://api.github.com/users/johndescs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-05T17:59:38Z","updated_at":"2018-04-05T20:27:29Z","closed_at":"2018-04-05T20:27:29Z","author_association":"NONE","body":"Hi,\r\n\r\nIt seems to segfault when referencing another parameter as default from one parameter in the initialize method.\r\nThis is kind of strange usage, I agree, but I think it should either not compile or work, but runtime segmentation fault is ugly.\r\n\r\n```\r\nclass Foo\r\n  def initialize(@name : String, @id : String = @name)\r\n  end\r\nend\r\n\r\np Foo.new name: \"hello\"\r\n```\r\n\r\nleads to\r\n\r\n```\r\n$ crystal run test.cr \r\nInvalid memory access (signal 11) at address 0x4\r\n[0x559470c77b76] *CallStack::print_backtrace:Int32 +118\r\n[…]\r\n```\r\n\r\nCrystal 0.24.2 [4f9ed8d03] (2018-03-08)\r\nLLVM: 4.0.0\r\nDefault target: x86_64-unknown-linux-gnu\r\nLinux Debian Stretch, Arch, online playground.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5924","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5924/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5924/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5924/events","html_url":"https://github.com/crystal-lang/crystal/issues/5924","id":311652061,"number":5924,"title":"Defining instance variables shouldn't be required in an abstract class","user":{"login":"obskyr","id":4363779,"avatar_url":"https://avatars0.githubusercontent.com/u/4363779?v=4","gravatar_id":"","url":"https://api.github.com/users/obskyr","html_url":"https://github.com/obskyr","followers_url":"https://api.github.com/users/obskyr/followers","following_url":"https://api.github.com/users/obskyr/following{/other_user}","gists_url":"https://api.github.com/users/obskyr/gists{/gist_id}","starred_url":"https://api.github.com/users/obskyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obskyr/subscriptions","organizations_url":"https://api.github.com/users/obskyr/orgs","repos_url":"https://api.github.com/users/obskyr/repos","events_url":"https://api.github.com/users/obskyr/events{/privacy}","received_events_url":"https://api.github.com/users/obskyr/received_events","type":"User","site_admin":false},"labels":[{"id":20487871,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:question","name":"kind:question","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-04-05T15:11:41Z","updated_at":"2018-04-05T23:29:57Z","closed_at":"2018-04-05T15:49:33Z","author_association":"NONE","body":"Consider a case where you're defining an `abstract` base class with instance variables you want all subclasses to initialize in different ways. You might consider doing something like this:\r\n\r\n```crystal\r\nabstract class Base\r\n  @x : Int32\r\n  @y : Int32\r\n\r\n  def print_x\r\n    puts @x\r\n  end\r\nend\r\n\r\nclass Thing < Base\r\n  @x = 123\r\n\r\n  def initialize(@y : Int32)\r\n  end\r\nend\r\n```\r\n\r\nSadly, this doesn't work - instead you get the following error:\r\n\r\n```\r\nError in line 2: instance variable '@x' of Base was not initialized directly in all of \r\nthe 'initialize' methods, rendering it nilable. Indirect initialization is not supported.\r\n```\r\n\r\nWhat you currently have to do is instead something like this:\r\n\r\n```crystal\r\nabstract class Base\r\n  @x : Int32\r\n  @y : Int32\r\n\r\n  def initialize\r\n    @x = 0\r\n    @y = 0\r\n    # Or similar - NotImplementedError isn't in 0.24.2, of course\r\n    raise NotImplementedError.new\r\n  end\r\n\r\n  def print_x\r\n    puts @x\r\n  end\r\nend\r\n\r\nclass Thing < Base\r\n  @x = 123\r\n\r\n  def initialize(@y : Int32)\r\n  end\r\nend\r\n```\r\n\r\nHaving to add boilerplate like that is undesirable, of course - especially seeing as an `abstract` class can't be initialized anyway, so `@x` and `@y` won't actually be nilable. Instead, the onus of initializing `Base`'s unassigned instance variables should here be shifted to `Thing` and any other classes subclasses `Base` might have.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5923","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5923/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5923/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5923/events","html_url":"https://github.com/crystal-lang/crystal/issues/5923","id":311596700,"number":5923,"title":"Compiler bug","user":{"login":"tliff","id":41863,"avatar_url":"https://avatars2.githubusercontent.com/u/41863?v=4","gravatar_id":"","url":"https://api.github.com/users/tliff","html_url":"https://github.com/tliff","followers_url":"https://api.github.com/users/tliff/followers","following_url":"https://api.github.com/users/tliff/following{/other_user}","gists_url":"https://api.github.com/users/tliff/gists{/gist_id}","starred_url":"https://api.github.com/users/tliff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tliff/subscriptions","organizations_url":"https://api.github.com/users/tliff/orgs","repos_url":"https://api.github.com/users/tliff/repos","events_url":"https://api.github.com/users/tliff/events{/privacy}","received_events_url":"https://api.github.com/users/tliff/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":253019637,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:compiler","name":"topic:compiler","color":"fef2c0","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-05T12:50:06Z","updated_at":"2018-04-05T20:28:04Z","closed_at":"2018-04-05T20:28:04Z","author_association":"NONE","body":"I get the following  when trying to run my code:\r\n```\r\ncast from Nil to Crystal::GenericInstanceType+ failed, at /private/tmp/crystal-lang-20180310-76015-tfxflp/crystal-0.24.2/src/compiler/crystal/types.cr:1428:20:1428\r\nCrystal::TypeParameter#solve<Crystal::NonGenericClassType>:Crystal::ASTNode+\r\nCrystal::GenericInstanceType+@Crystal::GenericInstanceType#replace_type_parameters<Crystal::NonGenericClassType>:Crystal::Type+\r\nCrystal::TypeDeclarationProcessor#process_owner_guessed_instance_var_declaration<Crystal::Type+, String, Crystal::TypeDeclarationProcessor::InstanceVarTypeInfo>:(Crystal::MetaTypeVar | Crystal::TypeDeclarationProcessor::Error | Nil)\r\nCrystal::TypeDeclarationProcessor#process_instance_vars_declarations:Nil\r\nCrystal::Program#top_level_semantic<Crystal::ASTNode+>:Tuple(Crystal::ASTNode+, Crystal::TypeDeclarationProcessor)\r\nCrystal::Program#semantic<Crystal::ASTNode+, Bool>:Crystal::ASTNode+\r\nCrystal::Compiler#compile<Array(Crystal::Compiler::Source), String>:Crystal::Compiler::Result\r\nCrystal::Command#run_command<Bool>:Nil\r\nCrystal::Command#run:(Bool | Crystal::Compiler::Result | IO::FileDescriptor | Nil)\r\nmain\r\n```\r\n\r\nMinimal example:\r\n\r\n```crystal\r\nclass Foo\r\n  def initialize()\r\n    @data = Array.new(10){|i| 1}\r\n  end\r\nend\r\n```\r\n\r\nCrystal 0.24.2 (2018-03-10)\r\nLLVM: 5.0.1\r\nDefault target: x86_64-apple-macosx\r\n\r\nOn OSX 10.13.1\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5920","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5920/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5920/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5920/events","html_url":"https://github.com/crystal-lang/crystal/issues/5920","id":311474314,"number":5920,"title":"Include type restriction on getters in JSON/mapping","user":{"login":"Daniel-Worrall","id":21184739,"avatar_url":"https://avatars2.githubusercontent.com/u/21184739?v=4","gravatar_id":"","url":"https://api.github.com/users/Daniel-Worrall","html_url":"https://github.com/Daniel-Worrall","followers_url":"https://api.github.com/users/Daniel-Worrall/followers","following_url":"https://api.github.com/users/Daniel-Worrall/following{/other_user}","gists_url":"https://api.github.com/users/Daniel-Worrall/gists{/gist_id}","starred_url":"https://api.github.com/users/Daniel-Worrall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Daniel-Worrall/subscriptions","organizations_url":"https://api.github.com/users/Daniel-Worrall/orgs","repos_url":"https://api.github.com/users/Daniel-Worrall/repos","events_url":"https://api.github.com/users/Daniel-Worrall/events{/privacy}","received_events_url":"https://api.github.com/users/Daniel-Worrall/received_events","type":"User","site_admin":false},"labels":[{"id":530992188,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/community:to-implement","name":"community:to-implement","color":"e99695","default":false},{"id":20487869,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:feature","name":"kind:feature","color":"84b6eb","default":false},{"id":253019694,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:stdlib","name":"topic:stdlib","color":"fad8c7","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-05T05:08:51Z","updated_at":"2018-04-12T18:51:44Z","closed_at":"2018-04-12T18:51:44Z","author_association":"CONTRIBUTOR","body":"System: Ubuntu WSL, Crystal v0.24.2\r\n\r\nJSON#mapping doesn't specify the restriction on getter methods in the macro.\r\n\r\nThis causes an issue with macros where the Return Type cannot be inferred from a method call.\r\n\r\n[Minimal code to reproduce](https://carc.in/#/r/3toy):\r\n```cr\r\nrequire \"json\"\r\n\r\nmacro method_return(method_name)\r\n  puts \"{{method_name}} {{My_Class.methods.find { |method| method.name == method_name}.return_type}}\"\r\nend\r\n\r\nclass My_Class\r\n  JSON.mapping(mapped: Bool)\r\nend\r\n\r\nmethod_return(:mapped)\r\n```\r\nOutput:\r\n```cr\r\n:mapped \r\n```\r\n\r\nI have a [working solution here ](https://github.com/Daniel-Worrall/crystal/blob/patch-1/src/json/mapping.cr#L83)which just replaces #L83 with\r\n`def {{key.id}} : {{value[:type]}} {{ (value[:nilable] ? \"?\" : \"\").id }`\r\nto include the type. Will just wait for approval before Specs & PR\r\n\r\nThis could also be approached by changing #return_type to be able to infer which would include some more situations as shown below.\r\n\r\n[Extra code that demonstrates current behaviour](https://carc.in/#/r/3toz):\r\n```cr\r\nrequire \"json\"\r\n\r\nmacro method_return(method_name)\r\n  puts \"{{method_name}} {{My_Class.methods.find { |method| method.name == method_name}.return_type}}\"\r\nend\r\n\r\nclass My_Class\r\n  JSON.mapping(mapped: Bool)\r\n  \r\n  def restricted : Int64\r\n  end\r\n  \r\n  def inferrable\r\n    \"string\"\r\n  end\r\n  \r\n  def not_inferrable\r\n  end\r\nend\r\n\r\nmethod_return(:mapped)\r\nmethod_return(:restricted)\r\nmethod_return(:inferrable)\r\nmethod_return(:not_inferrable)\r\n```\r\nOutput: \r\n```cr\r\n:mapped \r\n:restricted Int64\r\n:inferrable \r\n:not_inferrable \r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5919","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5919/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5919/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5919/events","html_url":"https://github.com/crystal-lang/crystal/issues/5919","id":311413772,"number":5919,"title":"Compiler bug when a macro uses run() with spaces in the path","user":{"login":"obskyr","id":4363779,"avatar_url":"https://avatars0.githubusercontent.com/u/4363779?v=4","gravatar_id":"","url":"https://api.github.com/users/obskyr","html_url":"https://github.com/obskyr","followers_url":"https://api.github.com/users/obskyr/followers","following_url":"https://api.github.com/users/obskyr/following{/other_user}","gists_url":"https://api.github.com/users/obskyr/gists{/gist_id}","starred_url":"https://api.github.com/users/obskyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obskyr/subscriptions","organizations_url":"https://api.github.com/users/obskyr/orgs","repos_url":"https://api.github.com/users/obskyr/repos","events_url":"https://api.github.com/users/obskyr/events{/privacy}","received_events_url":"https://api.github.com/users/obskyr/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":253019637,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:compiler","name":"topic:compiler","color":"fef2c0","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-04T22:33:12Z","updated_at":"2018-04-05T21:28:10Z","closed_at":"2018-04-05T21:26:22Z","author_association":"NONE","body":"Try the following examples, lifted more or less straight from [the docs](https://crystal-lang.org/api/0.19.4/Crystal/Macros.html#run%28filename%2C%2Aargs%29%3AMacroId-instance-method):\r\n\r\n`directory with spaces/print_gotten_string.cr`:\r\n```crystal\r\nmacro get_version\r\n    {{ run(\"./get_string\").stringify }}\r\nend\r\n\r\nputs get_version\r\n```\r\n\r\n`directory with spaces/get_string.cr`:\r\n```crystal\r\nputs \"Hi!\"\r\n```\r\n\r\nRunning `crystal run print_gotten_string.cr` errors out with the following message:\r\n```\r\ncan't specify arguments in both, command and args without including \"${@}\" into your command\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n\r\nError: you've found a bug in the Crystal compiler. Please open an issue, including source code that will allow us to reproduce the bug: https://github.com/crystal-lang/crystal/issues\r\n```\r\n\r\nIt looks like [`Process.prepare_argv` is getting the parts of the path as arguments](https://github.com/crystal-lang/crystal/blob/106d44dc8bbf3a0d4f486318e39543d4142fc1ca/src/process.cr#L320) instead of the entire path being passed in as the command.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5907","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5907/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5907/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5907/events","html_url":"https://github.com/crystal-lang/crystal/issues/5907","id":310844354,"number":5907,"title":"Formatter bug","user":{"login":"Sija","id":988,"avatar_url":"https://avatars3.githubusercontent.com/u/988?v=4","gravatar_id":"","url":"https://api.github.com/users/Sija","html_url":"https://github.com/Sija","followers_url":"https://api.github.com/users/Sija/followers","following_url":"https://api.github.com/users/Sija/following{/other_user}","gists_url":"https://api.github.com/users/Sija/gists{/gist_id}","starred_url":"https://api.github.com/users/Sija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sija/subscriptions","organizations_url":"https://api.github.com/users/Sija/orgs","repos_url":"https://api.github.com/users/Sija/repos","events_url":"https://api.github.com/users/Sija/events{/privacy}","received_events_url":"https://api.github.com/users/Sija/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":273087516,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:formatter","name":"topic:formatter","color":"d4c5f9","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-03T13:48:00Z","updated_at":"2018-04-03T17:38:21Z","closed_at":"2018-04-03T17:38:21Z","author_association":"CONTRIBUTOR","body":"Below code\r\n\r\n```cr\r\nwhile (\r\n        1 < 2 && # Negated condition 1\r\n        2 > 1 && # Negated condition 2\r\n        3 > 1 || # buffer{-1} > w_high\r\n        (true || false)\r\n      )\r\n  v = true\r\nend\r\n```\r\n\r\ngets formatted to:\r\n\r\n```cr\r\nwhile (\r\n        1 < 2 && # Negated condition 1\r\n 2 > 1 &&        # Negated condition 2\r\n 3 > 1 ||        # buffer{-1} > w_high\r\n (true || false)\r\n      )\r\n  v = true\r\nend\r\n```\r\n\r\n/cc @MakeNowJust ","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5905","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5905/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5905/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5905/events","html_url":"https://github.com/crystal-lang/crystal/issues/5905","id":310759774,"number":5905,"title":"File.join should handle \"\" separately","user":{"login":"obskyr","id":4363779,"avatar_url":"https://avatars0.githubusercontent.com/u/4363779?v=4","gravatar_id":"","url":"https://api.github.com/users/obskyr","html_url":"https://github.com/obskyr","followers_url":"https://api.github.com/users/obskyr/followers","following_url":"https://api.github.com/users/obskyr/following{/other_user}","gists_url":"https://api.github.com/users/obskyr/gists{/gist_id}","starred_url":"https://api.github.com/users/obskyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obskyr/subscriptions","organizations_url":"https://api.github.com/users/obskyr/orgs","repos_url":"https://api.github.com/users/obskyr/repos","events_url":"https://api.github.com/users/obskyr/events{/privacy}","received_events_url":"https://api.github.com/users/obskyr/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":253019694,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:stdlib","name":"topic:stdlib","color":"fad8c7","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-03T09:28:40Z","updated_at":"2018-04-04T13:59:34Z","closed_at":"2018-04-04T13:59:34Z","author_association":"NONE","body":"When using `File.join` with empty strings, some unexpected results can be seen:\r\n\r\n```crystal\r\nFile.join(\"\", \"file.cr\")\r\nFile.join([\"dir\", \"\", \"file.cr\"])\r\n```\r\n\r\nThese should evaluate to `\"file.cr\"` and `\"dir/file.cr\"` respectively, but instead they evaluate to `\"/file.cr\"` (whoops, absolute path out of nowhere) and `\"dir//file.cr\"`.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5904","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5904/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5904/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5904/events","html_url":"https://github.com/crystal-lang/crystal/issues/5904","id":310755228,"number":5904,"title":"Consider making File.join handle absolute paths","user":{"login":"obskyr","id":4363779,"avatar_url":"https://avatars0.githubusercontent.com/u/4363779?v=4","gravatar_id":"","url":"https://api.github.com/users/obskyr","html_url":"https://github.com/obskyr","followers_url":"https://api.github.com/users/obskyr/followers","following_url":"https://api.github.com/users/obskyr/following{/other_user}","gists_url":"https://api.github.com/users/obskyr/gists{/gist_id}","starred_url":"https://api.github.com/users/obskyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obskyr/subscriptions","organizations_url":"https://api.github.com/users/obskyr/orgs","repos_url":"https://api.github.com/users/obskyr/repos","events_url":"https://api.github.com/users/obskyr/events{/privacy}","received_events_url":"https://api.github.com/users/obskyr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2018-04-03T09:15:07Z","updated_at":"2018-04-03T14:40:15Z","closed_at":"2018-04-03T13:01:01Z","author_association":"NONE","body":"In Crystal 0.24.2, `File.join` doesn't handle absolute paths properly. Take the following example:\r\n\r\n```crystal\r\nFile.join(\"any/path\", \"/absolute/path\")\r\n```\r\n\r\nThat expression currently evaluates to `\"any/path/absolute/path\"`, when the expected value would be `\"/absolute/path\"`.\r\n\r\nOne argument against this is that Ruby's `File.join` also does not handle absolute paths - but every other high-level programming language I've used does (see [Python's behavior](https://docs.python.org/3/library/os.path.html#os.path.join), for example). Ruby's behaviour here is somewhat infamously cumbersome, so I'm certain it'd be an overall positive change to make.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5900","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5900/labels{/name}","comments_url":"http
8000
s://api.github.com/repos/crystal-lang/crystal/issues/5900/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5900/events","html_url":"https://github.com/crystal-lang/crystal/issues/5900","id":310452796,"number":5900,"title":"Proposal: Support true color in Colorize","user":{"login":"r00ster91","id":35064754,"avatar_url":"https://avatars3.githubusercontent.com/u/35064754?v=4","gravatar_id":"","url":"https://api.github.com/users/r00ster91","html_url":"https://github.com/r00ster91","followers_url":"https://api.github.com/users/r00ster91/followers","following_url":"https://api.github.com/users/r00ster91/following{/other_user}","gists_url":"https://api.github.com/users/r00ster91/gists{/gist_id}","starred_url":"https://api.github.com/users/r00ster91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r00ster91/subscriptions","organizations_url":"https://api.github.com/users/r00ster91/orgs","repos_url":"https://api.github.com/users/r00ster91/repos","events_url":"https://api.github.com/users/r00ster91/events{/privacy}","received_events_url":"https://api.github.com/users/r00ster91/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-02T10:36:21Z","updated_at":"2018-04-03T12:00:28Z","closed_at":"2018-04-03T12:00:28Z","author_association":"CONTRIBUTOR","body":"Many terminals today support true color with ANSI escape sequences.\r\n\r\nHere's an example:\r\n```Crystal\r\nputs \"\\e[38;2;100;255;100mI'm green\\e[0m\"\r\n```\r\nThis would colour the text in a nice bright green color:\r\n![I'm green](https://i.imgur.com/lqzjmJH.png)\r\n\r\nAnother example:\r\n```Crystal\r\nputs \"\\e[48;2;100;50;30mMy background is brown like wood\\e[0m\"\r\n```\r\nThis would colour the background brown:\r\n\r\n![My background is brown like wood](https://i.imgur.com/CdRWQIp.png)\r\n\r\nWe can colour our texts in exactly _16777216_ colors!\r\n\r\nHeres a rainbow:\r\n```Crystal\r\nloop do\r\n  print \"\\r\\e[38;2;#{rand(0..255)};#{rand(0..255)};#{rand(0..255)}mI am a rainbow\\e[0m\"\r\n  sleep 0.1\r\nend\r\n```\r\n\r\n![Rainbow](https://media.giphy.com/media/2uw3xo22RlXUoId2ko/giphy.gif)\r\n\r\n\r\n\r\nRight now [Colorize](https://crystal-lang.org/api/0.24.2/Colorize.html) doesn't supports any other colors than these:\r\n```\r\nblack\r\nred\r\ngreen\r\nyellow\r\nblue\r\nmagenta\r\ncyan\r\nlight_gray\r\ndark_gray\r\nlight_red\r\nlight_green\r\nlight_yellow\r\nlight_blue\r\nlight_magenta\r\nlight_cyan\r\nwhite\r\n```\r\nHaving _16777200_ more colors than this would be a good feature I think.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5898","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5898/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5898/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5898/events","html_url":"https://github.com/crystal-lang/crystal/issues/5898","id":310355079,"number":5898,"title":"unterminated tuple error with non-tuple literal case using implicit object methods","user":{"login":"lego","id":1161183,"avatar_url":"https://avatars0.githubusercontent.com/u/1161183?v=4","gravatar_id":"","url":"https://api.github.com/users/lego","html_url":"https://github.com/lego","followers_url":"https://api.github.com/users/lego/followers","following_url":"https://api.github.com/users/lego/following{/other_user}","gists_url":"https://api.github.com/users/lego/gists{/gist_id}","starred_url":"https://api.github.com/users/lego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lego/subscriptions","organizations_url":"https://api.github.com/users/lego/orgs","repos_url":"https://api.github.com/users/lego/repos","events_url":"https://api.github.com/users/lego/events{/privacy}","received_events_url":"https://api.github.com/users/lego/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-01T21:22:00Z","updated_at":"2018-04-02T15:43:26Z","closed_at":"2018-04-02T15:42:53Z","author_association":"NONE","body":"```bash\r\n$ crystal -v\r\nCrystal 0.24.2 (2018-03-10)\r\n\r\nLLVM: 5.0.1\r\nDefault target: x86_64-apple-macosx\r\n```\r\n\r\nThe following code causes a compiler error that isn't clear what is incorrect.\r\n```crystal\r\ncase {1, \"hi\"}\r\n  when {1, .empty?} then \"OK\"\r\nend\r\n\r\nt = {1, \"hi\"}\r\ncase t\r\n  when {1, \"h\"} then \"OK\"\r\nend\r\n\r\ncase t # causes \"unterminated tuple literal\" on the line below\r\n  when {1, .empty?} then \"Welp, this line throws an error\"\r\nend\r\n```\r\nhttps://gist.github.com/lego/3c620476e718585661ea7952206e252e\r\n\r\nAs you can see, if a tuple type is provided in a `case` statement but is not an inlined literal then `\"unterminated tuple literal\"` is thrown, which does not clearly indicate what is happening. This only occurs when implicit-object method calls are used.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5897","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5897/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5897/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5897/events","html_url":"https://github.com/crystal-lang/crystal/issues/5897","id":310353261,"number":5897,"title":"Bug in Sockets?","user":{"login":"bararchy","id":1631073,"avatar_url":"https://avatars3.githubusercontent.com/u/1631073?v=4","gravatar_id":"","url":"https://api.github.com/users/bararchy","html_url":"https://github.com/bararchy","followers_url":"https://api.github.com/users/bararchy/followers","following_url":"https://api.github.com/users/bararchy/following{/other_user}","gists_url":"https://api.github.com/users/bararchy/gists{/gist_id}","starred_url":"https://api.github.com/users/bararchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bararchy/subscriptions","organizations_url":"https://api.github.com/users/bararchy/orgs","repos_url":"https://api.github.com/users/bararchy/repos","events_url":"https://api.github.com/users/bararchy/events{/privacy}","received_events_url":"https://api.github.com/users/bararchy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-01T20:54:08Z","updated_at":"2018-04-02T12:19:03Z","closed_at":"2018-04-02T12:19:03Z","author_association":"CONTRIBUTOR","body":"Trying to create RAW IP socket\r\n\r\n```crystal\r\ns = Socket.new(Socket::Family::INET, Socket::Type::RAW, Socket::Protocol::IP)\r\n```\r\n\r\nIt compiles, but when I run it: \r\n\r\n```crystal\r\nfailed to create socket:: Protocol not supported (Errno)\r\n  from /usr/lib/crystal/socket.cr:0:5 in 'initialize'\r\n  from /usr/lib/crystal/socket.cr:69:3 in 'initialize'\r\n  from Socket::new<Socket::Family, Socket::Type, Socket::Protocol>:Socket\r\n  from raw_socket.cr:14:1 in '__crystal_main'\r\n  from /usr/lib/crystal/crystal/main.cr:11:3 in '_crystal_main'\r\n  from /usr/lib/crystal/crystal/main.cr:112:5 in 'main_user_code'\r\n  from /usr/lib/crystal/crystal/main.cr:101:7 in 'main'\r\n  from /usr/lib/crystal/crystal/main.cr:135:3 in 'main'\r\n  from __libc_start_main\r\n  from _start\r\n  from ???\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5895","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5895/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5895/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5895/events","html_url":"https://github.com/crystal-lang/crystal/issues/5895","id":310325283,"number":5895,"title":"Don't allow begin, end as method arguments","user":{"login":"sdogruyol","id":990485,"avatar_url":"https://avatars0.githubusercontent.com/u/990485?v=4","gravatar_id":"","url":"https://api.github.com/users/sdogruyol","html_url":"https://github.com/sdogruyol","followers_url":"https://api.github.com/users/sdogruyol/followers","following_url":"https://api.github.com/users/sdogruyol/following{/other_user}","gists_url":"https://api.github.com/users/sdogruyol/gists{/gist_id}","starred_url":"https://api.github.com/users/sdogruyol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdogruyol/subscriptions","organizations_url":"https://api.github.com/users/sdogruyol/orgs","repos_url":"https://api.github.com/users/sdogruyol/repos","events_url":"https://api.github.com/users/sdogruyol/events{/privacy}","received_events_url":"https://api.github.com/users/sdogruyol/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-01T13:54:15Z","updated_at":"2018-04-13T12:36:38Z","closed_at":"2018-04-13T12:36:38Z","author_association":"MEMBER","body":"I expect a compile-time error while using reserved `begin`, `end` keywords for method arguments unless they're used as external names. \r\n\r\n```crystal\r\ndef plan(begin, end)\r\n  puts begin\r\n  puts end\r\nend\r\n\r\nplan \"Crystal\", \"External\"\r\n```\r\n\r\nThis just tries to execute the method :neutral_face: ","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5892","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5892/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5892/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5892/events","html_url":"https://github.com/crystal-lang/crystal/issues/5892","id":310289665,"number":5892,"title":"expecting keyword nil, not `SPACE` ","user":{"login":"faustinoaq","id":3067335,"avatar_url":"https://avatars2.githubusercontent.com/u/3067335?v=4","gravatar_id":"","url":"https://api.github.com/users/faustinoaq","html_url":"https://github.com/faustinoaq","followers_url":"https://api.github.com/users/faustinoaq/followers","following_url":"https://api.github.com/users/faustinoaq/following{/other_user}","gists_url":"https://api.github.com/users/faustinoaq/gists{/gist_id}","starred_url":"https://api.github.com/users/faustinoaq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faustinoaq/subscriptions","organizations_url":"https://api.github.com/users/faustinoaq/orgs","repos_url":"https://api.github.com/users/faustinoaq/repos","events_url":"https://api.github.com/users/faustinoaq/events{/privacy}","received_events_url":"https://api.github.com/users/faustinoaq/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-04-01T03:12:20Z","updated_at":"2018-04-02T10:52:56Z","closed_at":"2018-04-01T04:02:26Z","author_association":"CONTRIBUTOR","body":"I was trying to format this code: https://gist.github.com/faustinoaq/c45445b1d549f8c8cc3eab7f286b7053\r\n\r\nand I got this:\r\n\r\n```\r\nError: couldn't format STDIN, please report a bug including the contents of it: https://github.com/crystal-lang/crystal/issues\r\n\r\nexpecting keyword nil, not `SPACE, \r\n         `, at :216:72 (Exception)\r\nError opening file 'crystal' with mode 'r': No such file or directory\r\nError opening file 'crystal' with mode 'r': No such file or directory (Errno)\r\nFailed to raise an exception: END_OF_STACK\r\n[0x55976f4b0fb6] ???\r\n[0x55976ecb3299] __crystal_raise +153\r\n[0x55976ecb4f8c] ???\r\n[0x55976ecc5277] ???\r\n[0x55976ecbe906] ???\r\n[0x55976ecbdc2e] ???\r\n[0x55976ecba9c2] ???\r\n[0x55976ecb7866] main +422\r\n[0x7f1ab0df5f4a] __libc_start_main +234\r\n[0x55976ecb029a] _start +42\r\n[0x0] ???\r\n```\r\n\r\n/cc @MakeNowJust :wink: ","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5889","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5889/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5889/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5889/events","html_url":"https://github.com/crystal-lang/crystal/issues/5889","id":310113075,"number":5889,"title":"@type.all_subclasses does not behave correctly","user":{"login":"colonlc","id":13833431,"avatar_url":"https://avatars1.githubusercontent.com/u/13833431?v=4","gravatar_id":"","url":"https://api.github.com/users/colonlc","html_url":"https://github.com/colonlc","followers_url":"https://api.github.com/users/colonlc/followers","following_url":"https://api.github.com/users/colonlc/following{/other_user}","gists_url":"https://api.github.com/users/colonlc/gists{/gist_id}","starred_url":"https://api.github.com/users/colonlc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colonlc/subscriptions","organizations_url":"https://api.github.com/users/colonlc/orgs","repos_url":"https://api.github.com/users/colonlc/repos","events_url":"https://api.github.com/users/colonlc/events{/privacy}","received_events_url":"https://api.github.com/users/colonlc/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-03-30T16:47:52Z","updated_at":"2018-03-31T22:00:11Z","closed_at":"2018-03-31T22:00:11Z","author_association":"NONE","body":"Crystal 0.24.2 (2018-03-19)\r\n\r\nLLVM: 6.0.0\r\nDefault target: x86_64-pc-linux-gnu\r\n\r\nMy intention was to have a type alias declared which  contains all the subclasses of my class.\r\nHowever, if I use `@type.all_subclasses` or `@type.subclasses` inside a macro or inside `{%begin%}` and `{%end%}`, both are empty.\r\n\r\nExample:\r\n```Crystal\r\nclass A\r\n  {%begin%}\r\n    @@subclasses = {{@type.all_subclasses}}\r\n  {%end%}\r\nend\r\n\r\nclass B < A; end\r\nclass C < A; end\r\n```\r\nThis generates to `@@subclasses = []` instead of `@@subclasses = [B, C]` and raises a  syntax error.\r\n\r\nIf I use it inside a `def`, it behaves correctly:\r\n```Crystal\r\nclass A\r\n  def self.subclasses\r\n    {{@type.all_subclasses}}\r\n  end\r\nend\r\n\r\nclass B < A; end\r\nclass C < A; end\r\n\r\nputs A.subclasses # => [B, C]\r\n```\r\n\r\nAm I misunderstanding the documentation or is this faulty behaviour?","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5888","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5888/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5888/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5888/events","html_url":"https://github.com/crystal-lang/crystal/issues/5888","id":309950523,"number":5888,"title":"spec profile not working with option -p","user":{"login":"kostya","id":95060,"avatar_url":"https://avatars0.githubusercontent.com/u/95060?v=4","gravatar_id":"","url":"https://api.github.com/users/kostya","html_url":"https://github.com/kostya","followers_url":"https://api.github.com/users/kostya/followers","following_url":"https://api.github.com/users/kostya/following{/other_user}","gists_url":"https://api.github.com/users/kostya/gists{/gist_id}","starred_url":"https://api.github.com/users/kostya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kostya/subscriptions","organizations_url":"https://api.github.com/users/kostya/orgs","repos_url":"https://api.github.com/users/kostya/repos","events_url":"https://api.github.com/users/kostya/events{/privacy}","received_events_url":"https://api.github.com/users/kostya/received_events","type":"User","site_admin":false},"labels":[{"id":20487871,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:question","name":"kind:question","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-30T01:25:48Z","updated_at":"2018-04-05T14:42:07Z","closed_at":"2018-04-04T19:53:06Z","author_association":"CONTRIBUTOR","body":"```\r\ncrystal spec spec/some_spec.cr -p\r\n```\r\n\r\nnot print 10 slowest specs:\r\n\r\nin spec code:\r\n```crystal\r\n  opts.on(\"-p\", \"--profile\", \"Print the 10 slowest specs\") do\r\n    Spec.slowest = 10\r\n  end\r\n```\r\n\r\ni think because option `-p` processed by compiler and need to rename it.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5886","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5886/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5886/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5886/events","html_url":"https://github.com/crystal-lang/crystal/issues/5886","id":309649650,"number":5886,"title":"Proposal: merge single-msqueue into master","user":{"login":"bararchy","id":1631073,"avatar_url":"https://avatars3.githubusercontent.com/u/1631073?v=4","gravatar_id":"","url":"https://api.github.com/users/bararchy","html_url":"https://github.com/bararchy","followers_url":"https://api.github.com/users/bararchy/followers","following_url":"https://api.github.com/users/bararchy/following{/other_user}","gists_url":"https://api.github.com/users/bararchy/gists{/gist_id}","starred_url":"https://api.github.com/users/bararchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bararchy/subscriptions","organizations_url":"https://api.github.com/users/bararchy/orgs","repos_url":"https://api.github.com/users/bararchy/repos","events_url":"https://api.github.com/users/bararchy/events{/privacy}","received_events_url":"https://api.github.com/users/bararchy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2018-03-29T07:36:47Z","updated_at":"2018-04-11T18:26:13Z","closed_at":"2018-04-11T18:26:13Z","author_association":"CONTRIBUTOR","body":"This might raise a few eyebrows, but, I believe that merging a \"slow and un-optimized\" version of multi-thread support is much better then having non at all.\r\n\r\nThis will in turn allow for people to actively work and improve it without it being a hidden forgotten branch that sits dead for a year.\r\nHaving more then 4 years Crystal community background I can see this taking more then a year or two (if at all) to finish in the current format, lets be brave about it.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5879","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5879/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5879/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5879/events","html_url":"https://github.com/crystal-lang/crystal/issues/5879","id":309203856,"number":5879,"title":"%w bug","user":{"login":"chenkovsky","id":6762133,"avatar_url":"https://avatars0.githubusercontent.com/u/6762133?v=4","gravatar_id":"","url":"https://api.github.com/users/chenkovsky","html_url":"https://github.com/chenkovsky","followers_url":"https://api.github.com/users/chenkovsky/followers","following_url":"https://api.github.com/users/chenkovsky/following{/other_user}","gists_url":"https://api.github.com/users/chenkovsky/gists{/gist_id}","starred_url":"https://api.github.com/users/chenkovsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenkovsky/subscriptions","organizations_url":"https://api.github.com/users/chenkovsky/orgs","repos_url":"https://api.github.com/users/chenkovsky/repos","events_url":"https://api.github.com/users/chenkovsky/events{/privacy}","received_events_url":"https://api.github.com/users/chenkovsky/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":253019637,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:compiler","name":"topic:compiler","color":"fef2c0","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-28T03:00:00Z","updated_at":"2018-04-13T07:20:17Z","closed_at":"2018-04-13T07:19:54Z","author_association":"NONE","body":"```crystal\r\n%w{… …… , : ; \\! \\? ¿ ؟ ¡ \\( \\) \\[ \\] \\{ \\} < > _ # \\* & 。 ？ ！ ， 、 ； ： ～ · । ، ؛ ٪}\r\n# this is correct in ruby, but cannot be compiled in crystal.\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5877","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5877/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5877/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5877/events","html_url":"https://github.com/crystal-lang/crystal/issues/5877","id":309128829,"number":5877,"title":"HEREDOC error message has bad grammar","user":{"login":"HCLarsen","id":8650607,"avatar_url":"https://avatars0.githubusercontent.com/u/8650607?v=4","gravatar_id":"","url":"https://api.github.com/users/HCLarsen","html_url":"https://github.com/HCLarsen","followers_url":"https://api.github.com/users/HCLarsen/followers","following_url":"https://api.github.com/users/HCLarsen/following{/other_user}","gists_url":"https://api.github.com/users/HCLarsen/gists{/gist_id}","starred_url":"https://api.github.com/users/HCLarsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HCLarsen/subscriptions","organizations_url":"https://api.github.com/users/HCLarsen/orgs","repos_url":"https://api.github.com/users/HCLarsen/repos","events_url":"https://api.github.com/users/HCLarsen/events{/privacy}","received_events_url":"https://api.github.com/users/HCLarsen/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":253019637,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:compiler","name":"topic:compiler","color":"fef2c0","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-03-27T20:50:44Z","updated_at":"2018-03-29T14:17:21Z","closed_at":"2018-03-29T14:17:21Z","author_association":"NONE","body":"I know it's a small issue, but I got an error when I did something wrong with a HEREDOC, and the error message is badly worded. The message I got was this:\r\n\r\n> heredoc line must have an indent greater or equal than 4\r\n\r\nProper grammar would be this:\r\n\r\n> heredoc line must have an indent greater than or equal to 4\r\n\r\nLike I said, small issue, but it's worth making sure that compiler messages look professional.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5875","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5875/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5875/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5875/events","html_url":"https://github.com/crystal-lang/crystal/issues/5875","id":309053106,"number":5875,"title":"Channel#close doesn't invoke senders","user":{"login":"carlhoerberg","id":180046,"avatar_url":"https://avatars3.githubusercontent.com/u/180046?v=4","gravatar_id":"","url":"https://api.github.com/users/carlhoerberg","html_url":"https://github.com/carlhoerberg","followers_url":"https://api.github.com/users/carlhoerberg/followers","following_url":"https://api.github.com/users/carlhoerberg/following{/other_user}","gists_url":"https://api.github.com/users/carlhoerberg/gists{/gist_id}","starred_url":"https://api.github.com/users/carlhoerberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlhoerberg/subscriptions","organizations_url":"https://api.github.com/users/carlhoerberg/orgs","repos_url":"https://api.github.com/users/carlhoerberg/repos","events_url":"https://api.github.com/users/carlhoerberg/events{/privacy}","received_events_url":"https://api.github.com/users/carlhoerberg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-03-27T16:58:53Z","updated_at":"2018-03-30T18:40:31Z","closed_at":"2018-03-30T18:40:31Z","author_association":"CONTRIBUTOR","body":"```\r\nch = Channel(Nil).new\r\nspawn(name: \"Sender\") do\r\n  loop do\r\n    ch.send nil\r\n  end\r\nrescue Channel::ClosedError\r\n  puts \"Sender closed\"\r\nend\r\n\r\nspawn(name: \"Receiver\") do\r\n  loop do\r\n    ch.receive\r\n    Fiber.yield\r\n  end\r\nrescue Channel::ClosedError\r\n  puts \"Receiver closed\"\r\nend\r\n\r\nspawn(name: \"Closer\") do\r\n  sleep 0.1\r\n  puts \"Closing channel\"\r\n  ch.close\r\nend\r\n\r\nsleep\r\n```\r\n\r\nProduces: \r\n\r\n```\r\n$ crystal run test/close_channel.cr \r\nClosing channel\r\nReceiver closed\r\n```\r\nNotably doesn't output `Sender closed` as I would've expected. \r\n\r\nI wild guess is that Channel#close (https://github.com/crystal-lang/crystal/blob/80a975cf0a98a4ce8464d0069145131667becd70/src/concurrent/channel.cr#L31L36) has to include\r\n\r\n```\r\nScheduler.enqueue @senders\r\n@senders.clear\r\n```\r\n\r\n```\r\n$ crystal -v\r\nCrystal 0.24.2 (2018-03-10)\r\nLLVM: 5.0.1\r\nDefault target: x86_64-apple-macosx\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5872","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5872/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5872/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5872/events","html_url":"https://github.com/crystal-lang/crystal/issues/5872","id":308737501,"number":5872,"title":"Exception handling doesn't work with empty blocks","user":{"login":"r00ster91","id":35064754,"avatar_url":"https://avatars3.githubusercontent.com/u/35064754?v=4","gravatar_id":"","url":"https://api.github.com/users/r00ster91","html_url":"https://github.com/r00ster91","followers_url":"https://api.github.com/users/r00ster91/followers","following_url":"https://api.github.com/users/r00ster91/following{/other_user}","gists_url":"https://api.github.com/users/r00ster91/gists{/gist_id}","starred_url":"https://api.github.com/users/r00ster91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r00ster91/subscriptions","organizations_url":"https://api.github.com/users/r00ster91/orgs","repos_url":"https://api.github.com/users/r00ster91/repos","events_url":"https://api.github.com/users/r00ster91/events{/privacy}","received_events_url":"https://api.github.com/users/r00ster91/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":253019637,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:compiler","name":"topic:compiler","color":"fef2c0","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-03-26T21:13:14Z","updated_at":"2018-04-13T12:44:54Z","closed_at":"2018-04-13T12:44:54Z","author_association":"CONTRIBUTOR","body":"When I do this:\r\n```Crystal\r\narray = [123, \"hello\", 16, 1.5, \"bug\"]\r\n\r\narray.each do |values|\r\nrescue\r\n  puts \"hello\"\r\nend\r\n```\r\nthen Crystal says:\r\n```\r\nModule validation failed: inlinable function call in a function with debug info must have a !dbg location\r\n  call void @__crystal_raise(%\"struct.LibUnwind::Exception\"* %111)\r\n\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n\r\nError: you've found a bug in the Crystal compiler. Please open an issue, including source code that will allow us to reproduce the bug: https://github.com/crystal-lang/crystal/issues\r\n```\r\nbut when I do this:\r\n```Crystal\r\narray = [123, \"hello\", 16, 1.5, \"bug\"]\r\n\r\narray.each do |values|\r\n  puts values\r\nrescue\r\n  puts \"hello\"\r\nend\r\n```\r\nthen it works without any errors.\r\n\r\nMy `crystal -v` output:\r\n```\r\nCrystal 0.24.2 [4f9ed8d03] (2018-03-08)\r\n\r\nLLVM: 4.0.0\r\nDefault target: x86_64-unknown-linux-gnu\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5865","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5865/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5865/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5865/events","html_url":"https://github.com/crystal-lang/crystal/issues/5865","id":308380055,"number":5865,"title":"What is the purpose of the end keyword?","user":{"login":"fzzle","id":5962068,"avatar_url":"https://avatars0.githubusercontent.com/u/5962068?v=4","gravatar_id":"","url":"https://api.github.com/users/fzzle","html_url":"https://github.com/fzzle","followers_url":"https://api.github.com/users/fzzle/followers","following_url":"https://api.github.com/users/fzzle/following{/other_user}","gists_url":"https://api.github.com/users/fzzle/gists{/gist_id}","starred_url":"https://api.github.com/users/fzzle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fzzle/subscriptions","organizations_url":"https://api.github.com/users/fzzle/orgs","repos_url":"https://api.github.com/users/fzzle/repos","events_url":"https://api.github.com/users/fzzle/events{/privacy}","received_events_url":"https://api.github.com/users/fzzle/received_events","type":"User","site_admin":false},"labels":[{"id":20487871,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:question","name":"kind:question","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-25T19:56:30Z","updated_at":"2018-03-25T21:42:05Z","closed_at":"2018-03-25T21:26:31Z","author_association":"NONE","body":"Does it have any pratical use or is it just syntactic fluff?","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5854","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5854/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5854/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5854/events","html_url":"https://github.com/crystal-lang/crystal/issues/5854","id":307971259,"number":5854,"title":"Encoding issue while building an XML file","user":{"login":"Monpt7","id":15824682,"avatar_url":"https://avatars2.githubusercontent.com/u/15824682?v=4","gravatar_id":"","url":"https://api.github.com/users/Monpt7","html_url":"https://github.com/Monpt7","followers_url":"https://api.github.com/users/Monpt7/followers","following_url":"https://api.github.com/users/Monpt7/following{/other_user}","gists_url":"https://api.github.com/users/Monpt7/gists{/gist_id}","starred_url":"https://api.github.com/users/Monpt7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Monpt7/subscriptions","organizations_url":"https://api.github.com/users/Monpt7/orgs","repos_url":"https://api.github.com/users/Monpt7/repos","events_url":"https://api.github.com/users/Monpt7/events{/privacy}","received_events_url":"https://api.
3d17
github.com/users/Monpt7/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-23T10:17:32Z","updated_at":"2018-03-23T13:55:20Z","closed_at":"2018-03-23T13:55:06Z","author_association":"NONE","body":"Hi,\r\n\r\nI just noticed a weird thing when I try to build an XML : \r\n\r\n## Reproductible code\r\n```crystal\r\nrequire \"xml\"\r\nstring = XML.build(indent: \"  \", encoding: \"utf-8\") do |xml|\r\n  xml.element(\"person\", id: 1) do\r\n    xml.element(\"firstname\") { xml.text \"Jane\" }\r\n  end\r\nend\r\nputs string\r\n```\r\n\r\n## Result\r\n```XML\r\n<?xml version=\"1.0\" encoding=\"utf-8U\"?>\r\n<person id=\"1\">\r\n  <firstname>Jane</firstname>\r\n  <lastname>Doe</lastname>\r\n</person>\r\n```\r\nThe 'encoding' attribute is `utf-8U` instead of `utf-8`.\r\nWhy an 'U' is appended to the character encoding I specify?\r\n\r\n## Crystal version\r\nCrystal 0.24.1 on Debian 9\r\nThis issue is also reproductible in the crystal playground\r\n","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5853","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5853/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5853/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5853/events","html_url":"https://github.com/crystal-lang/crystal/issues/5853","id":307740685,"number":5853,"title":"Formatter: Trailing comma bug","user":{"login":"GloverDonovan","id":2374245,"avatar_url":"https://avatars1.githubusercontent.com/u/2374245?v=4","gravatar_id":"","url":"https://api.github.com/users/GloverDonovan","html_url":"https://github.com/GloverDonovan","followers_url":"https://api.github.com/users/GloverDonovan/followers","following_url":"https://api.github.com/users/GloverDonovan/following{/other_user}","gists_url":"https://api.github.com/users/GloverDonovan/gists{/gist_id}","starred_url":"https://api.github.com/users/GloverDonovan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GloverDonovan/subscriptions","organizations_url":"https://api.github.com/users/GloverDonovan/orgs","repos_url":"https://api.github.com/users/GloverDonovan/repos","events_url":"https://api.github.com/users/GloverDonovan/events{/privacy}","received_events_url":"https://api.github.com/users/GloverDonovan/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":273087516,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:formatter","name":"topic:formatter","color":"d4c5f9","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-03-22T17:23:34Z","updated_at":"2018-04-05T23:24:26Z","closed_at":"2018-04-05T23:24:26Z","author_association":"CONTRIBUTOR","body":"Found here: [shards/test/integration/update_test.cr](https://github.com/crystal-lang/shards/blob/c365c5b83680d07df86f0372917b5496965bd355/test/integration/update_test.cr#L63-L67)\r\n\r\nWith 0.24.2:\r\n\r\n```shell\r\n$ crystal tool format ./test/integration/update_test.cr --check\r\nError: couldn't format './test/integration/update_test.cr', please report a bug...\r\n```\r\n\r\nReproducible  code:\r\n\r\n```crystal\r\ndef with_shard(metadata, &block)\r\n  yield\r\nend\r\n\r\nwith_shard(\"hello\", ) do\r\n  puts \"world\"\r\nend\r\n```\r\n\r\nWith master (2d93603d4):\r\n\r\n```shell\r\n$ ./bin/crystal tool format a.cr --check\r\nUsing compiled compiler at `.build/crystal'\r\nError: couldn't format 'a.cr', please report a bug...\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5852","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5852/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5852/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5852/events","html_url":"https://github.com/crystal-lang/crystal/issues/5852","id":307569974,"number":5852,"title":"Missing check in HTTP::Content","user":{"login":"bararchy","id":1631073,"avatar_url":"https://avatars3.githubusercontent.com/u/1631073?v=4","gravatar_id":"","url":"https://api.github.com/users/bararchy","html_url":"https://github.com/bararchy","followers_url":"https://api.github.com/users/bararchy/followers","following_url":"https://api.github.com/users/bararchy/following{/other_user}","gists_url":"https://api.github.com/users/bararchy/gists{/gist_id}","starred_url":"https://api.github.com/users/bararchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bararchy/subscriptions","organizations_url":"https://api.github.com/users/bararchy/orgs","repos_url":"https://api.github.com/users/bararchy/repos","events_url":"https://api.github.com/users/bararchy/events{/privacy}","received_events_url":"https://api.github.com/users/bararchy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-03-22T09:46:22Z","updated_at":"2018-04-11T00:04:37Z","closed_at":"2018-04-11T00:04:37Z","author_association":"CONTRIBUTOR","body":"The `.not_nil!` in https://github.com/crystal-lang/crystal/blob/master/src/http/content.cr#L137 is not safe, apparently it can be nil:\r\n\r\n```crystal\r\nException:Nil assertion failed Nil assertion failed (Exception)\r\n  from /usr/lib/crystal/class.cr:66:0 in 'not_nil!'\r\n  from /usr/lib/crystal/http/content.cr:0:26 in 'read_chunk_start'\r\n  from /usr/lib/crystal/http/content.cr:65:9 in 'read'\r\n  from /usr/lib/crystal/io/encoding.cr:74:45 in 'read'\r\n  from /usr/lib/crystal/io.cr:554:11 in 'gets_to_end'\r\n  from /usr/lib/crystal/http/client/response.cr:73:15 in 'consume_body_io'\r\n  from /usr/lib/crystal/http/client/response.cr:97:9 in 'from_io?'\r\n  from /usr/lib/crystal/http/client.cr:502:5 in 'exec_internal_single'\r\n  from /usr/lib/crystal/http/client.cr:486:5 in 'exec_internal'\r\n  from /usr/lib/crystal/http/client.cr:482:5 in 'exec'\r\n  from /usr/lib/crystal/http/client.cr:585:5 in 'exec'\r\n  from ???\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5835","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5835/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5835/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5835/events","html_url":"https://github.com/crystal-lang/crystal/issues/5835","id":306169510,"number":5835,"title":"already initialized constant CSV::DEFAULT_SEPARATOR","user":{"login":"anatol","id":7032,"avatar_url":"https://avatars2.githubusercontent.com/u/7032?v=4","gravatar_id":"","url":"https://api.github.com/users/anatol","html_url":"https://github.com/anatol","followers_url":"https://api.github.com/users/anatol/followers","following_url":"https://api.github.com/users/anatol/following{/other_user}","gists_url":"https://api.github.com/users/anatol/gists{/gist_id}","starred_url":"https://api.github.com/users/anatol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anatol/subscriptions","organizations_url":"https://api.github.com/users/anatol/orgs","repos_url":"https://api.github.com/users/anatol/repos","events_url":"https://api.github.com/users/anatol/events{/privacy}","received_events_url":"https://api.github.com/users/anatol/received_events","type":"User","site_admin":false},"labels":[{"id":20487870,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/status:invalid","name":"status:invalid","color":"e6e6e6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-03-17T16:25:18Z","updated_at":"2018-03-17T18:52:45Z","closed_at":"2018-03-17T16:36:41Z","author_association":"CONTRIBUTOR","body":"I am trying to compile Crystal 0.24.2 at Arch Linux with binary release from https://github.com/crystal-lang/crystal/releases/tag/0.24.2  and it fails:\r\n\r\n```\r\nUsing /usr/bin/llvm-config [version=5.0.1]\r\ng++ -c -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt  -o src/llvm/ext/llvm_ext.o src/llvm/ext/llvm_ext.cc `/usr/bin/llvm-config --cxxflags`\r\ncc -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt -fPIC  -D_FORTIFY_SOURCE=2  -c -o src/ext/sigfault.o src/ext/sigfault.c\r\nar -rcs src/ext/libcrystal.a src/ext/sigfault.o\r\n./bin/crystal build --release --no-debug -D i_know_what_im_doing -o .build/crystal src/compiler/crystal.cr -D without_openssl -D without_zlib\r\nUsing /usr/bin/llvm-config [version=5.0.1]\r\n./bin/crystal docs src/docs_main.cr\r\nError in src/docs_main.cr:8: while requiring \"./csv\"\r\n\r\nrequire \"./csv\"\r\n^\r\n\r\nin src/csv.cr:422: while requiring \"./csv/**\"\r\n\r\nrequire \"./csv/**\"\r\n^\r\n\r\nin src/csv/builder.cr:1: while requiring \"csv\"\r\n\r\nrequire \"csv\"\r\n^\r\n\r\nin share/crystal/src/csv.cr:59: already initialized constant CSV::DEFAULT_SEPARATOR\r\n\r\n  DEFAULT_SEPARATOR  = ','\r\n  ^~~~~~~~~~~~~~~~~\r\n\r\nmake: *** [Makefile:93: docs] Error 1\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5834","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5834/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5834/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5834/events","html_url":"https://github.com/crystal-lang/crystal/issues/5834","id":306126240,"number":5834,"title":"Type inference in if statement is easy to break using OptionParser","user":{"login":"obskyr","id":4363779,"avatar_url":"https://avatars0.githubusercontent.com/u/4363779?v=4","gravatar_id":"","url":"https://api.github.com/users/obskyr","html_url":"https://github.com/obskyr","followers_url":"https://api.github.com/users/obskyr/followers","following_url":"https://api.github.com/users/obskyr/following{/other_user}","gists_url":"https://api.github.com/users/obskyr/gists{/gist_id}","starred_url":"https://api.github.com/users/obskyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obskyr/subscriptions","organizations_url":"https://api.github.com/users/obskyr/orgs","repos_url":"https://api.github.com/users/obskyr/repos","events_url":"https://api.github.com/users/obskyr/events{/privacy}","received_events_url":"https://api.github.com/users/obskyr/received_events","type":"User","site_admin":false},"labels":[{"id":20487871,"url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:question","name":"kind:question","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-03-17T04:05:25Z","updated_at":"2018-03-17T12:05:51Z","closed_at":"2018-03-17T12:01:59Z","author_association":"NONE","body":"In Crystal 0.24.2, the following works just fine:\r\n\r\n```crystal\r\nout_path = nil\r\n\r\nif out_path\r\n    File.open out_path, \"r\"\r\nend\r\n```\r\n\r\nHowever, this doesn't:\r\n\r\n```crystal\r\nrequire \"option_parser\"\r\n\r\nout_path = nil\r\n\r\nOptionParser.parse! do |parser|\r\n    parser.on(\"-o\", \"Output file.\") { |o| out_path = o }\r\nend\r\n\r\nif out_path\r\n    File.open out_path, \"r\"\r\nend\r\n```\r\n\r\nInstead, it fails with the following compiler error:\r\n\r\n```\r\nno overload matches 'File.new' with types (String | Nil), String, Int32, Nil, Nil\r\n```\r\n\r\nThis despite the fact that `out_path` cannot possibly be `nil` in the body of that if statement. Given how easy this is to run into, I feel like this *must* have been reported before, but I couldn't find anything.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/5828","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5828/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5828/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/5828/events","html_url":"https://github.com/crystal-lang/crystal/issues/5828","id":304881471,"number":5828,"title":"Static compile libraries","user":{"login":"Proximyst","id":19861299,"avatar_url":"https://avatars2.githubusercontent.com/u/19861299?v=4","gravatar_id":"","url":"https://api.github.com/users/Proximyst","html_url":"https://github.com/Proximyst","followers_url":"https://api.github.com/users/Proximyst/followers","following_url":"https://api.github.com/users/Proximyst/following{/other_user}","gists_url":"https://api.github.com/users/Proximyst/gists{/gist_id}","starred_url":"https://api.github.com/users/Proximyst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Proximyst/subscriptions","organizations_url":"https://api.github.com/users/Proximyst/orgs","repos_url":"https://api.github.com/users/Proximyst/repos","events_url":"https://api.github.com/users/Proximyst/events{/privacy}","received_events_url":"https://api.github.com/users/Proximyst/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-03-13T18:20:47Z","updated_at":"2018-04-16T12:59:39Z","closed_at":"2018-03-13T19:05:34Z","author_association":"NONE","body":"### Reproducible code:\r\n```crystal\r\n# file: src/test.cr\r\nputs \"aaa this is a test\"\r\n```\r\n### Command to compile:\r\n```bash\r\n$ crystal build src/test.cr --static\r\n```\r\n### Error:\r\n```\r\n/usr/bin/ld: cannot find -lssl\r\n/usr/bin/ld: cannot find -lcrypto\r\n/usr/bin/ld: cannot find -lpcre\r\n/usr/bin/ld: cannot find -lgc\r\n/usr/bin/ld: cannot find -levent\r\ncollect2: error: ld returned 1 exit status\r\n```\r\n### Packages:\r\n```\r\n[proximyst@proximyst:Git/test]$ pacman -Qs gc\r\nlocal/gc 7.6.4-1\r\n    A garbage collector for C and C++\r\n[proximyst@proximyst:Git/test]$ pacman -Qs ssl\r\nlocal/lib32-openssl 1:1.1.0.g-1\r\n    The Open Source toolkit for Secure Sockets Layer and Transport Layer Security (32-bit)\r\nlocal/openssl 1.1.0.g-1\r\n    The Open Source toolkit for Secure Sockets Layer and Transport Layer Security\r\nlocal/openssl-1.0 1.0.2.n-1\r\n    The Open Source toolkit for Secure Sockets Layer and Transport Layer Security\r\n[proximyst@proximyst:Git/test]$ pacman -Qs event\r\nlocal/lib32-libevent 2.1.8-1\r\n    An event notification library (32-bit)\r\nlocal/libevent 2.1.8-1\r\n    An event notification library\r\n[proximyst@proximyst:Git/test]$ pacman -Qs pcre\r\nlocal/lib32-pcre 8.41-1\r\n    A library that implements Perl 5-style regular expressions (32-bit)\r\nlocal/pcre 8.41-1\r\n    A library that implements Perl 5-style regular expressions\r\nlocal/pcre2 10.31-1\r\n    A library that implements Perl 5-style regular expressions. 2nd version\r\n```\r\n### Else:\r\nI do acknowledge I do not have all the libraries, but the ones I have it should mark as existing. I'm quite sure I haven't missed out on anything..","score":1.0}]}
0

