HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 09 Jun 2018 08:12:25 GMT
Link: <https://api.github.com/search/issues?q=repo%3Acrystal-lang%2Fcrystal+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Acrystal-lang%2Fcrystal+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: CEED:57C5:3735A1A:71ACF91:5B1B8BE8
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 29
X-Ratelimit-Reset: 1528532005
X-Runtime-Rack: 0.372157
X-Xss-Protection: 1; mode=block

8000
{"total_count":3064,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6156","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6156/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6156/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6156/events","html_url":"https://github.com/crystal-lang/crystal/issues/6156","id":328800951,"node_id":"MDU6SXNzdWUzMjg4MDA5NTE=","number":6156,"title":"YAML.parse parses key 0: as string instead of Int64","user":{"login":"Blacksmoke16","id":12136995,"node_id":"MDQ6VXNlcjEyMTM2OTk1","avatar_url":"https://avatars1.githubusercontent.com/u/12136995?v=4","gravatar_id":"","url":"https://api.github.com/users/Blacksmoke16","html_url":"https://github.com/Blacksmoke16","followers_url":"https://api.github.com/users/Blacksmoke16/followers","following_url":"https://api.github.com/users/Blacksmoke16/following{/other_user}","gists_url":"https://api.github.com/users/Blacksmoke16/gists{/gist_id}","starred_url":"https://api.github.com/users/Blacksmoke16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blacksmoke16/subscriptions","organizations_url":"https://api.github.com/users/Blacksmoke16/orgs","repos_url":"https://api.github.com/users/Blacksmoke16/repos","events_url":"https://api.github.com/users/Blacksmoke16/events{/privacy}","received_events_url":"https://api.github.com/users/Blacksmoke16/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-03T05:30:31Z","updated_at":"2018-06-04T20:55:11Z","closed_at":"2018-06-03T07:40:49Z","author_association":"NONE","body":"Take the following yaml data:\r\n\r\n```Yaml\r\n\r\nyaml_data = %(\r\n10:\r\n    description:\r\n        de: 'Ein Hauptreihenstern einer Klasse von Himmelskörpern, die sich typischerweise\r\n            durch eine weiße oder weiß-gelbe Färbung auszeichnen. Die Energieerzeugung\r\n            dieser Sterne wird durch Wasserstofffusion angetrieben und sie sind oft\r\n            sehr heiß und hell.'\r\n    graphicID: 21466\r\n    groupID: 6\r\n    mass: 1000000000000000000\r\n    name:\r\n        de: Sun F0 (White)\r\n        en: Sun F0 (White)\r\n        fr: Soleil F0 (blanche)\r\n        ja: 恒星F0（ホワイト）\r\n        ru: Sun F0 (White)\r\n        zh: 恒星F0 (白色)\r\n    portionSize: 1\r\n    published: false\r\n    radius: 10000\r\n    soundID: 20098\r\n    volume: 1\r\n0:\r\n    groupID: 0\r\n    mass: 1.0\r\n    name:\r\n        de: '#System'\r\n        en: '#System'\r\n        fr: '#Système'\r\n        ja: '#システム'\r\n        ru: '#Система'\r\n        zh: '#星系'\r\n    portionSize: 1\r\n    published: false\r\n2:\r\n    groupID: 2\r\n    name:\r\n        de: Corporation\r\n        en: Corporation\r\n        fr: Corporation\r\n        ja: コーポレーション\r\n        ru: Corporation\r\n        zh: 军团\r\n    portionSize: 1\r\n    published: false\r\n3:\r\n    groupID: 3\r\n    name:\r\n        de: Region\r\n        en: Region\r\n        fr: Région\r\n        ja: リージョン\r\n        ru: Region\r\n        zh: 星域\r\n    portionSize: 1\r\n    published: false\r\n    volume: 1.0\r\n)\r\n\r\n```\r\n\r\nWhen doing a `YAML.parse` on the yaml data, all the keys except for 0 are casted as an Int64, while 0 is casted as a string.\r\n\r\nhttps://play.crystal-lang.org/#/r/47be/edit\r\n```Crystal\r\nrequire \"yaml\"  \r\n\r\n  yaml = YAML.parse(yaml_data)\r\n\r\n  p yaml\r\n```\r\n```\r\n{10_i64 =>\r\n  {\"description\" =>\r\n    {\"de\" =>\r\n      \"Ein Hauptreihenstern einer Klasse von Himmelskörpern, die sich typischerweise durch eine weiße oder weiß-gelbe Färbung auszeichnen. Die Energieerzeugung dieser Sterne wird durch Wasserstofffusion angetrieben und sie sind oft sehr heiß und hell.\"},\r\n   \"graphicID\" => 21466_i64,\r\n   \"groupID\" => 6_i64,\r\n   \"mass\" => 1000000000000000000_i64,\r\n   \"name\" =>\r\n    {\"de\" => \"Sun F0 (White)\",\r\n     \"en\" => \"Sun F0 (White)\",\r\n     \"fr\" => \"Soleil F0 (blanche)\",\r\n     \"ja\" => \"恒星F0（ホワイト）\",\r\n     \"ru\" => \"Sun F0 (White)\",\r\n     \"zh\" => \"恒星F0 (白色)\"},\r\n   \"portionSize\" => 1_i64,\r\n   \"published\" => false,\r\n   \"radius\" => 10000_i64,\r\n   \"soundID\" => 20098_i64,\r\n   \"volume\" => 1_i64},\r\n \"0\" =>\r\n  {\"groupID\" => \"0\",\r\n   \"mass\" => 1.0,\r\n   \"name\" =>\r\n    {\"de\" => \"#System\",\r\n     \"en\" => \"#System\",\r\n     \"fr\" => \"#Système\",\r\n     \"ja\" => \"#システム\",\r\n     \"ru\" => \"#Система\",\r\n     \"zh\" => \"#星系\"},\r\n   \"portionSize\" => 1_i64,\r\n   \"published\" => false},\r\n 2_i64 =>\r\n  {\"groupID\" => 2_i64,\r\n   \"name\" =>\r\n    {\"de\" => \"Corporation\",\r\n     \"en\" => \"Corporation\",\r\n     \"fr\" => \"Corporation\",\r\n     \"ja\" => \"コーポレーション\",\r\n     \"ru\" => \"Corporation\",\r\n     \"zh\" => \"军团\"},\r\n   \"portionSize\" => 1_i64,\r\n   \"published\" => false},\r\n 3_i64 =>\r\n  {\"groupID\" => 3_i64,\r\n   \"name\" =>\r\n    {\"de\" => \"Region\",\r\n     \"en\" => \"Region\",\r\n     \"fr\" => \"Région\",\r\n     \"ja\" => \"リージョン\",\r\n     \"ru\" => \"Region\",\r\n     \"zh\" => \"星域\"},\r\n   \"portionSize\" => 1_i64,\r\n   \"published\" => false,\r\n   \"volume\" => 1.0}}\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6153","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6153/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6153/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6153/events","html_url":"https://github.com/crystal-lang/crystal/issues/6153","id":328760397,"node_id":"MDU6SXNzdWUzMjg3NjAzOTc=","number":6153,"title":"Inconsistency in type inference","user":{"login":"v-q","id":39858742,"node_id":"MDQ6VXNlcjM5ODU4NzQy","avatar_url":"https://avatars3.githubusercontent.com/u/39858742?v=4","gravatar_id":"","url":"https://api.github.com/users/v-q","html_url":"https://github.com/v-q","followers_url":"https://api.github.com/users/v-q/followers","following_url":"https://api.github.com/users/v-q/following{/other_user}","gists_url":"https://api.github.com/users/v-q/gists{/gist_id}","starred_url":"https://api.github.com/users/v-q/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/v-q/subscriptions","organizations_url":"https://api.github.com/users/v-q/orgs","repos_url":"https://api.github.com/users/v-q/repos","events_url":"https://api.github.com/users/v-q/events{/privacy}","received_events_url":"https://api.github.com/users/v-q/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-06-02T17:09:23Z","updated_at":"2018-06-04T10:57:11Z","closed_at":"2018-06-02T18:31:10Z","author_association":"NONE","body":"```crystal\r\nx = \"0\"\r\ny = \"0\"\r\n\r\nif x.is_a?(String) # => true\r\n  x = x.to_i{0}\r\n  p typeof(x) # => Int32\r\nend\r\n\r\np typeof(x) # => Int32\r\n```\r\n\r\n```crystal\r\nx = \"0\"\r\ny = \"0\"\r\n\r\nif y.is_a?(String) # => true\r\n  x = x.to_i{0}\r\n  p typeof(x) # => Int32\r\nend\r\n\r\np typeof(x) # => (Int32 | String)\r\n```\r\n\r\nWhy is the second not `String`?","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6151","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6151/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6151/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6151/events","html_url":"https://github.com/crystal-lang/crystal/issues/6151","id":328734359,"node_id":"MDU6SXNzdWUzMjg3MzQzNTk=","number":6151,"title":"Bug in Intrinsics#memset/memmove/memcpy","user":{"login":"r00ster91","id":35064754,"node_id":"MDQ6VXNlcjM1MDY0NzU0","avatar_url":"https://avatars3.githubusercontent.com/u/35064754?v=4","gravatar_id":"","url":"https://api.github.com/users/r00ster91","html_url":"https://github.com/r00ster91","followers_url":"https://api.github.com/users/r00ster91/followers","following_url":"https://api.github.com/users/r00ster91/following{/other_user}","gists_url":"https://api.github.com/users/r00ster91/gists{/gist_id}","starred_url":"https://api.github.com/users/r00ster91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r00ster91/subscriptions","organizations_url":"https://api.github.com/users/r00ster91/orgs","repos_url":"https://api.github.com/users/r00ster91/repos","events_url":"https://api.github.com/users/r00ster91/events{/privacy}","received_events_url":"https://api.github.com/users/r00ster91/received_events","type":"User","site_admin":false},"labels":[{"id":20487870,"node_id":"MDU6TGFiZWwyMDQ4Nzg3MA==","url":"https://api.github.com/repos/crystal-lang/crystal/labels/status:invalid","name":"status:invalid","color":"e6e6e6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-06-02T10:50:48Z","updated_at":"2018-06-02T14:36:04Z","closed_at":"2018-06-02T11:11:28Z","author_association":"CONTRIBUTOR","body":"When you give a value at the `align` argument of [Intrinsics#memset/memmove/memcpy](https://github.com/crystal-lang/crystal/blob/master/src/intrinsics.cr) which is outside of the range `0..2` then it gives you a bug.\r\n\r\nExample of [Intrinsics#memset](https://github.com/crystal-lang/crystal/blob/master/src/intrinsics.cr):\r\n```Crystal\r\nString.new(1) do |buffer|\r\n  Intrinsics.memset(buffer, 1, 1, 10, false)\r\n  {1, 1}\r\nend\r\n```\r\ngives\r\n```\r\nModule validation failed: alignment argument of memory intrinsics must be a power of 2\r\n  call void @llvm.memset.p0i8.i64(i8* %89, i8 1, i64 1, i32 10, i1 false), !dbg !26\r\n\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n\r\nError: you've found a bug in the Crystal compiler. Please open an issue, including source code that will allow us to reproduce the bug: https://github.com/crystal-lang/crystal/issues\r\n```\r\nExample of [Intrinsics#memmove](https://github.com/crystal-lang/crystal/blob/master/src/intrinsics.cr):\r\n```Crystal\r\nString.new(1) do |buffer|\r\n  u8 = 1u8\r\n  Intrinsics.memmove(buffer, pointerof(u8), 1, 50, false)\r\n  {1, 1}\r\nend\r\n```\r\ngives\r\n```\r\nModule validation failed: alignment argument of memory intrinsics must be a power of 2\r\n  call void @llvm.memmove.p0i8.p0i8.i64(i8* %89, i8* %u8, i64 1, i32 50, i1 false), !dbg !26\r\n\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n???\r\n\r\nError: you've found a bug in the Crystal compiler. Please open an issue, including source code that will allow us to reproduce the bug: https://github.com/crystal-lang/crystal/issues\r\n```\r\nBut this for example works:\r\n```Crystal\r\nString.new(1) do |buffer|\r\n  u8 = 1u8\r\n  Intrinsics.memcpy(buffer, pointerof(u8), 1, 2, false)\r\n  {1, 1}\r\nend\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6148","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6148/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6148/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6148/events","html_url":"https://github.com/crystal-lang/crystal/issues/6148","id":328653780,"node_id":"MDU6SXNzdWUzMjg2NTM3ODA=","number":6148,"title":"Consider using Hyperscan for Regex","user":{"login":"Piruzzolo","id":11365978,"node_id":"MDQ6VXNlcjExMzY1OTc4","avatar_url":"https://avatars0.githubusercontent.com/u/11365978?v=4","gravatar_id":"","url":"https://api.github.com/users/Piruzzolo","html_url":"https://github.com/Piruzzolo","followers_url":"https://api.github.com/users/Piruzzolo/followers","following_url":"https://api.github.com/users/Piruzzolo/following{/other_user}","gists_url":"https://api.github.com/users/Piruzzolo/gists{/gist_id}","starred_url":"https://api.github.com/users/Piruzzolo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Piruzzolo/subscriptions","organizations_url":"https://api.github.com/users/Piruzzolo/orgs","repos_url":"https://api.github.com/users/Piruzzolo/repos","events_url":"https://api.github.com/users/Piruzzolo/events{/privacy}","received_events_url":"https://api.github.com/users/Piruzzolo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-01T20:39:45Z","updated_at":"2018-06-02T13:47:20Z","closed_at":"2018-06-02T13:47:20Z","author_association":"NONE","body":"The library is much faster than PCRE (up to 10-13 times, according to Intel's bechmarks).\r\nIt can be found [here](https://github.com/intel/hyperscan)","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6144","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6144/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6144/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6144/events","html_url":"https://github.com/crystal-lang/crystal/issues/6144","id":327540448,"node_id":"MDU6SXNzdWUzMjc1NDA0NDg=","number":6144,"title":"Literal u128 truncated at 64 bits","user":{"login":"chris-huxtable","id":2386387,"node_id":"MDQ6VXNlcjIzODYzODc=","avatar_url":"https://avatars2.githubusercontent.com/u/2386387?v=4","gravatar_id":"","url":"https://api.github.com/users/chris-huxtable","html_url":"https://github.com/chris-huxtable","followers_url":"https://api.github.com/users/chris-huxtable/followers","following_url":"https://api.github.com/users/chris-huxtable/following{/other_user}","gists_url":"https://api.github.com/users/chris-huxtable/gists{/gist_id}","starred_url":"https://api.github.com/users/chris-huxtable/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris-huxtable/subscriptions","organizations_url":"https://api.github.com/users/chris-huxtable/orgs","repos_url":"https://api.github.com/users/chris-huxtable/repos","events_url":"https://api.github.com/users/chris-huxtable/events{/privacy}","received_events_url":"https://api.github.com/users/chris-huxtable/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-30T01:24:49Z","updated_at":"2018-05-30T14:38:22Z","closed_at":"2018-05-30T14:38:22Z","author_association":"CONTRIBUTOR","body":"Literal u128 truncated at 64 bits.\r\n\r\n```crystal \r\nif ( 0xFFFF_FFFF_FFFF_FFFF_u128 == 0xFFFF_FFFF_FFFF_FFFF_FFFF_FFFF_FFFF_FFFF_u128 )\r\n    puts \"BUG!\"\r\nelse\r\n    puts \"NVM. I am wrong.\"\r\nend\r\n```\r\n\r\n[Run it](https://play.crystal-lang.org/#/r/469c)","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6140","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6140/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6140/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6140/events","html_url":"https://github.com/crystal-lang/crystal/issues/6140","id":327004845,"node_id":"MDU6SXNzdWUzMjcwMDQ4NDU=","number":6140,"title":"add dependencies zlib1g-dev libssl1.0-dev for Ubuntu","user":{"login":"BenDietze","id":39699022,"node_id":"MDQ6VXNlcjM5Njk5MDIy","avatar_url":"https://avatars1.githubusercontent.com/u/39699022?v=4","gravatar_id":"","url":"https://api.github.com/users/BenDietze","html_url":"https://github.com/BenDietze","followers_url":"https://api.github.com/users/BenDietze/followers","following_url":"https://api.github.com/users/BenDietze/following{/other_user}","gists_url":"https://api.github.com/users/BenDietze/gists{/gist_id}","starred_url":"https://api.github.com/users/BenDietze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BenDietze/subscriptions","organizations_url":"https://api.github.com/users/BenDietze/orgs","repos_url":"https://api.github.com/users/BenDietze/repos","events_url":"https://api.github.com/users/BenDietze/events{/privacy}","received_events_url":"https://api.github.com/users/BenDietze/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-28T12:09:16Z","updated_at":"2018-05-28T18:42:21Z","closed_at":"2018-05-28T18:42:21Z","author_association":"NONE","body":"Hey guys,\r\n\r\nwhile testing Crystal on _WSL_ and _Ubuntu 18.04_ (clean installs) i have to install **zlib1g-dev**  and **libssl1.0-dev** too to compile src correctly - maybe usefull to put this into your _gitbook_ for installation on Ubuntu and Windows bash (or correct my deps to better).\r\n\r\nhttps://crystal-lang.org/docs/installation/on_debian_and_ubuntu.html\r\nhttps://crystal-lang.org/docs/installation/on_bash_on_ubuntu_on_windows.html\r\n","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6137","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6137/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6137/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6137/events","html_url":"https://github.com/crystal-lang/crystal/issues/6137","id":326814767,"node_id":"MDU6SXNzdWUzMjY4MTQ3Njc=","number":6137,"title":"YAML doesn't correctly handle null types (since 0.24.x)","user":{"login":"fgimian","id":1811813,"node_id":"MDQ6VXNlcjE4MTE4MTM=","avatar_url":"https://avatars0.githubusercontent.com/u/1811813?v=4","gravatar_id":"","url":"https://api.github.com/users/fgimian","html_url":"https://github.com/fgimian","followers_url":"https://api.github.com/users/fgimian/followers","following_url":"https://api.github.com/users/fgimian/following{/other_user}","gists_url":"https://api.github.com/users/fgimian/gists{/gist_id}","starred_url":"https://api.github.com/users/fgimian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fgimian/subscriptions","organizations_url":"https://api.github.com/users/fgimian/orgs","repos_url":"https://api.github.com/users/fgimian/repos","events_url":"https://api.github.com/users/fgimian/events{/privacy}","received_events_url":"https://api.github.com/users/fgimian/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-27T13:02:39Z","updated_at":"2018-05-28T11:52:44Z","closed_at":"2018-05-28T11:52:44Z","author_association":"NONE","body":"Hey there guys, I've noticed a problem that was introduced in 0.24.x (works correctly in 0.23.1):\r\n\r\n```crystal\r\nrequire \"yaml\"\r\ndata = <<-END\r\n         ---\r\n         empty_value: null\r\n         string: \"123\"\r\n         integer: 123\r\n         float: 123.45\r\n         booleans: [yes, true, on, no, false, off]\r\n         END\r\ndata = YAML.parse data\r\nputs data.to_yaml\r\n```\r\n\r\n**Output (0.23.1)**:\r\n\r\n```yaml\r\n---\r\nempty_value: null\r\nstring: 123\r\ninteger: 123\r\nfloat: 123.45\r\nbooleans:\r\n- yes\r\n- true\r\n- on\r\n- no\r\n- false\r\n- off\r\n```\r\n\r\n**Output (0.24.2)**:\r\n\r\n```yaml\r\n---\r\nempty_value: \r\nstring: \"123\"\r\ninteger: 123\r\nfloat: 123.45\r\nbooleans:\r\n- true\r\n- true\r\n- true\r\n- false\r\n- false\r\n- false\r\n```\r\n\r\nNotice the missing `null` in the `empty_value` item.  The booleans have also changed, but I have validated that Python's YAML parser also does this.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6136","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6136/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6136/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6136/events","html_url":"https://github.com/crystal-lang/crystal/issues/6136","id":326807611,"node_id":"MDU6SXNzdWUzMjY4MDc2MTE=","number":6136,"title":"Official Dockerfile uses llvm 3.5 which is not currently supported","user":{"login":"evandrojr","id":939608,"node_id":"MDQ6VXNlcjkzOTYwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/939608?v=4","gravatar_id":"","url":"https://api.github.com/users/evandrojr","html_url":"https://github.com/evandrojr","followers_url":"https://api.github.com/users/evandrojr/followers","following_url":"https://api.github.com/users/evandrojr/following{/other_user}","gists_url":"https://api.github.com/users/evandrojr/gists{/gist_id}","starred_url":"https://api.github.com/users/evandrojr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/evandrojr/subscriptions","organizations_url":"https://api.github.com/users/evandrojr/orgs","repos_url":"https://api.github.com/users/evandrojr/repos","events_url":"https://api.github.com/users/evandrojr/events{/privacy}","received_events_url":"https://api.github.com/users/evandrojr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-27T11:16:02Z","updated_at":"2018-05-28T18:28:42Z","closed_at":"2018-05-28T18:28:42Z","author_association":"NONE","body":"It also is not building crystal\r\n\r\n```\r\n➜  crystal git:(master) sudo docker build -f Dockerfile .\r\nSending build context to Docker daemon  9.773MB\r\nStep 1/10 : FROM crystallang/crystal\r\n ---> 5191492b7f42\r\nStep 2/10 : RUN apt-get update &&     apt-get install -y build-essential curl libevent-dev libssl-dev libxml2-dev libyaml-dev libgmp-dev git &&     apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\r\n ---> Using cache\r\n ---> 5d1b4a734320\r\nStep 3/10 : RUN curl http://crystal-lang.s3.amazonaws.com/llvm/llvm-3.5.0-1-linux-x86_64.tar.gz | tar xz -C /opt\r\n ---> Using cache\r\n ---> 9656d9b555b9\r\nStep 4/10 : ADD . /opt/crystal-head\r\n ---> Using cache\r\n ---> 29050fc17da0\r\nStep 5/10 : WORKDIR /opt/crystal-head\r\n ---> Using cache\r\n ---> 06240744780e\r\nStep 6/10 : ENV CRYSTAL_CONFIG_VERSION HEAD\r\n ---> Using cache\r\n ---> 350f9db307b2\r\nStep 7/10 : ENV CRYSTAL_CONFIG_PATH lib:/opt/crystal-head/src:/opt/crystal-head/libs\r\n ---> Using cache\r\n ---> 5dc361e4cdef\r\nStep 8/10 : ENV LIBRARY_PATH /opt/crystal/embedded/lib\r\n ---> Using cache\r\n ---> 5ff59c896108\r\nStep 9/10 : ENV PATH /opt/crystal-head/bin:/opt/llvm-3.5.0-1/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\r\n ---> Using cache\r\n ---> 12fec7ac3dab\r\nStep 10/10 : RUN make clean crystal release=1\r\n ---> Running in 6984069e32f1\r\nINFO[2018-05-27T08:08:34.326639927-03:00] No non-localhost DNS nameservers are left in resolv.conf. Using default external servers: [nameserver 8.8.8.8 nameserver 8.8.4.4] \r\nINFO[2018-05-27T08:08:34.326693086-03:00] IPv6 enabled; Adding default IPv6 external servers: [nameserver 2001:4860:4860::8888 nameserver 2001:4860:4860::8844] \r\nINFO[1972] shim docker-containerd-shim started           address=\"/containerd-shim/moby/6984069e32f10e8f8821a9f5553521066381e4f041fb47747b895ca295e456ab/shim.sock\" debug=false module=\"containerd/tasks\" pid=18470\r\nUsing /opt/llvm-3.5.0-1/bin/llvm-config [version=3.5.0]\r\nrm -rf .build\r\nrm -rf ./docs\r\nrm -rf src/llvm/ext/llvm_ext.o\r\nrm -rf src/ext/sigfault.o src/ext/libcrystal.a\r\ng++ -c  -o src/llvm/ext/llvm_ext.o src/llvm/ext/llvm_ext.cc -I/opt/llvm-3.5.0-1/include  -DNDEBUG -D_GNU_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -O3 -fomit-frame-pointer -std=c++11 -fvisibility-inlines-hidden -fno-exceptions -fno-rtti -fPIC -Woverloaded-virtual -ffunction-sections -fdata-sections -Wcast-qual\r\nIn file included from /opt/llvm-3.5.0-1/include/llvm/IR/Use.h:30:0,\r\n                 from /opt/llvm-3.5.0-1/include/llvm/IR/Value.h:19,\r\n                 from /opt/llvm-3.5.0-1/include/llvm/IR/Metadata.h:23,\r\n                 from /opt/llvm-3.5.0-1/include/llvm/IR/DebugInfo.h:25,\r\n                 from /opt/llvm-3.5.0-1/include/llvm/IR/DIBuilder.h:20,\r\n                 from src/llvm/ext/llvm_ext.cc:1:\r\nsrc/llvm/ext/llvm_ext.cc:33:33: error: 'Metadata' does not name a type\r\n DEFINE_ISA_CONVERSION_FUNCTIONS(Metadata, LLVMMetadataRef)\r\n                                 ^\r\n/opt/llvm-3.5.0-1/include/llvm/Support/CBindingWrapping.h:20:10: note: in definition of macro 'DEFINE_SIMPLE_CONVERSION_FUNCTIONS'\r\n   inline ty *unwrap(ref P) {                            \\\r\n          ^\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6135","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6135/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6135/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6135/events","html_url":"https://github.com/crystal-lang/crystal/issues/6135","id":326806211,"node_id":"MDU6SXNzdWUzMjY4MDYyMTE=","number":6135,"title":"Can only use named types with NamedTuple","user":{"login":"QueCaudroit","id":25461988,"node_id":"MDQ6VXNlcjI1NDYxOTg4","avatar_url":"https://avatars0.githubusercontent.com/u/25461988?v=4","gravatar_id":"","url":"https://api.github.com/users/QueCaudroit","html_url":"https://github.com/QueCaudroit","followers_url":"https://api.github.com/users/QueCaudroit/followers","following_url":"https://api.github.com/users/QueCaudroit/following{/other_user}","gists_url":"https://api.github.com/users/QueCaudroit/gists{/gist_id}","starred_url":"https://api.github.com/users/QueCaudroit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QueCaudroit/subscriptions","organizations_url":"https://api.github.com/users/QueCaudroit/orgs","repos_url":"https://api.github.com/users/QueCaudroit/repos","events_url":"https://api.github.com/users/QueCaudroit/events{/privacy}","received_events_url":"https://api.github.com/users/QueCaudroit/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2018-05-27T10:54:03Z","updated_at":"2018-05-27T16:39:30Z","closed_at":"2018-05-27T16:27:49Z","author_association":"NONE","body":"I'm trying to implement DataFrames, so i want a class to be able to receive any number of types.\r\n\r\nBasicaly, it should be allowed to do the following:\r\n```\r\nclass DataFrame(**T)\r\n  def initialize(@data : Array(NamedTuple(**T)))\r\n  end\r\nend\r\n\r\ndata = [{x: 1, y: \"yay\"}, {x: 3, y: \"Coucou\"}]\r\ndt = DataFrame(x: Int32, y: String).new data\r\n```\r\nright now this gives the following compile time error:\r\n```\r\nSyntax error in test.cr:1: expecting token 'CONST', not '**'\r\n\r\nclass DataFrame(**T)\r\n```\r\n\r\ncrystal -v outputs this:\r\n```\r\nCrystal 0.24.2 [4f9ed8d03] (2018-03-08)\r\n\r\nLLVM: 4.0.0\r\nDefault target: x86_64-unknown-linux-gnu\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6134","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6134/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6134/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6134/events","html_url":"https://github.com/crystal-lang/crystal/issues/6134","id":326780813,"node_id":"MDU6SXNzdWUzMjY3ODA4MTM=","number":6134,"title":"Error while building crystal from sources: llvm/IR/DIBuilder.h: No such file or directory - that happens using LLVM 3.8 and 7","user":{"login":"evandrojr","id":939608,"node_id":"MDQ6VXNlcjkzOTYwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/939608?v=4","gravatar_id":"","url":"https://api.github.com/users/evandrojr","html_url":"https://github.com/evandrojr","followers_url":"https://api.github.com/users/evandrojr/followers","following_url":"https://api.github.com/users/evandrojr/following{/other_user}","gists_url":"https://api.github.com/users/evandrojr/gists{/gist_id}","starred_url":"https://api.github.com/users/evandrojr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/evandrojr/subscriptions","organizations_url":"https://api.github.com/users/evandrojr/orgs","repos_url":"https://api.github.com/users/evandrojr/repos","events_url":"https://api.github.com/users/evandrojr/events{/privacy}","received_events_url":"https://api.github.com/users/evandrojr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-05-27T01:58:46Z","updated_at":"2018-05-27T13:25:53Z","closed_at":"2018-05-27T12:59:11Z","author_association":"NONE","body":"Hello,\r\n\r\nI've just got the latest master branch as advised in https://crystal-lang.org/docs/installation/from_source_repository.html but I have some compilation errors.\r\n\r\nllvm versions 3.8 and 7\r\n\r\nI also installed the required deps. I am using Linux Mint 18 that is compatible with Ubuntu 16.04\r\n\r\n```\r\n➜  crystal git:(master) ✗ make\r\nUsing /usr/bin/llvm-config-3.8 [version=3.8.0]\r\ng++ -c  -o src/llvm/ext/llvm_ext.o src/llvm/ext/llvm_ext.cc -I/usr/lib/llvm-3.8/include -std=c++0x -fPIC -fvisibility-inlines-hidden -Wall -W -Wno-unused-parameter -Wwrite-strings -Wcast-qual -Wno-missing-field-initializers -pedantic -Wno-long-long -Wno-maybe-uninitialized -Wdelete-non-virtual-dtor -Wno-comment -std=c++11 -ffunction-sections -fdata-sections -O2 -g -DNDEBUG  -fno-exceptions -D_GNU_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS\r\nsrc/llvm/ext/llvm_ext.cc:1:31: fatal error: llvm/IR/DIBuilder.h: No such file or directory\r\ncompilation terminated.\r\nMakefile:123: recipe for target 'src/llvm/ext/llvm_ext.o' failed\r\nmake: *** [src/llvm/ext/llvm_ext.o] Error 1\r\n```\r\n\r\n\r\n```\r\n➜  crystal git:(master) make                                              \r\nUsing /usr/bin/llvm-config [version=7.0.0]\r\ng++ -c  -o src/llvm/ext/llvm_ext.o src/llvm/ext/llvm_ext.cc -I/usr/lib/llvm-7/include -std=c++0x -fuse-ld=gold -Wl,--no-keep-files-mapped -Wl,--no-map-whole-files -fPIC -fvisibility-inlines-hidden -Werror=date-time -std=c++11 -Wall -W -Wno-unused-parameter -Wwrite-strings -Wcast-qual -Wno-missing-field-initializers -pedantic -Wno-long-long -Wno-maybe-uninitialized -Wdelete-non-virtual-dtor -Wno-comment -ffunction-sections -fdata-sections -O2 -DNDEBUG  -fno-exceptions -D_GNU_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS\r\nsrc/llvm/ext/llvm_ext.cc:1:31: fatal error: llvm/IR/DIBuilder.h: No such file or directory\r\ncompilation terminated.\r\nMakefile:123: recipe for target 'src/llvm/ext/llvm_ext.o' failed\r\nmake: *** [src/llvm/ext/llvm_ext.o] Error 1\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6130","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6130/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6130/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6130/events","html_url":"https://github.com/crystal-lang/crystal/issues/6130","id":326629001,"node_id":"MDU6SXNzdWUzMjY2MjkwMDE=","number":6130,"title":"Colorize output not outputting as expected","user":{"login":"naltun","id":7507990,"node_id":"MDQ6VXNlcjc1MDc5OTA=","avatar_url":"https://avatars2.githubusercontent.com/u/7507990?v=4","gravatar_id":"","url":"https://api.github.com/users/naltun","html_url":"https://github.com/naltun","followers_ur
8000
l":"https://api.github.com/users/naltun/followers","following_url":"https://api.github.com/users/naltun/following{/other_user}","gists_url":"https://api.github.com/users/naltun/gists{/gist_id}","starred_url":"https://api.github.com/users/naltun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naltun/subscriptions","organizations_url":"https://api.github.com/users/naltun/orgs","repos_url":"https://api.github.com/users/naltun/repos","events_url":"https://api.github.com/users/naltun/events{/privacy}","received_events_url":"https://api.github.com/users/naltun/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-25T18:52:44Z","updated_at":"2018-05-29T12:55:11Z","closed_at":"2018-05-27T15:51:37Z","author_association":"NONE","body":"Here's what I am working with on my system:\r\n```\r\nCrystal Setup:\r\nCrystal 0.24.2 (2018-03-19)\r\n\r\nLLVM: 6.0.0\r\nDefault target: x86_64-pc-linux-gnu\r\n\r\nOS:\r\nAntergos Linux x86_64\r\n```\r\nI am using the Colorize package, and the output is not outputting as expected. Here's my code:\r\n\r\n```\r\nrequire \"system\"\r\nrequire \"colorize\"\r\n\r\n# Method chaining for brevity\r\ncpu_count = System.cpu_count.colorize.underline\r\nhostname = System.hostname.colorize.underline\r\n\r\nmsg = \"My CPU count is #{cpu_count} and my system hostname is #{hostname}.\"\r\nmsg = msg.colorize.fore(:black).back(:yellow)\r\n\r\nputs msg\r\n```\r\nThe output is:\r\n![image](https://user-images.githubusercontent.com/7507990/40561261-92e8c8a6-602a-11e8-8ff1-291ce229ed61.png)\r\n\r\nI can even use `crystal eval` with\r\n\r\n`crystal eval 'require \"colorize\"; require \"system\"; cpu_count=System.cpu_count; host=System.hostname; puts \"My CPU count is #{cpu_count.colorize.underline} and my system hostname is #{host.colorize.underline}.\".colorize.fore(:black).back(:yellow)'`\r\n\r\nand it produces the same output (notice how I change where I use `colorize`, to show it's tested in different circumstances).\r\n\r\nI expect the entire output to have a yellow background with black font. I think this is potentially a bug.\r\n","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6129","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6129/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6129/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6129/events","html_url":"https://github.com/crystal-lang/crystal/issues/6129","id":326185065,"node_id":"MDU6SXNzdWUzMjYxODUwNjU=","number":6129,"title":"Not able to install crystal on ubuntu 18.04","user":{"login":"gustavomf-cit","id":34476870,"node_id":"MDQ6VXNlcjM0NDc2ODcw","avatar_url":"https://avatars1.githubusercontent.com/u/34476870?v=4","gravatar_id":"","url":"https://api.github.com/users/gustavomf-cit","html_url":"https://github.com/gustavomf-cit","followers_url":"https://api.github.com/users/gustavomf-cit/followers","following_url":"https://api.github.com/users/gustavomf-cit/following{/other_user}","gists_url":"https://api.github.com/users/gustavomf-cit/gists{/gist_id}","starred_url":"https://api.github.com/users/gustavomf-cit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gustavomf-cit/subscriptions","organizations_url":"https://api.github.com/users/gustavomf-cit/orgs","repos_url":"https://api.github.com/users/gustavomf-cit/repos","events_url":"https://api.github.com/users/gustavomf-cit/events{/privacy}","received_events_url":"https://api.github.com/users/gustavomf-cit/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-24T15:53:20Z","updated_at":"2018-05-25T15:08:00Z","closed_at":"2018-05-24T15:56:56Z","author_association":"NONE","body":"# There is something wrong with pgp key\r\n\r\n```\r\nroot@localhost:~# curl https://dist.crystal-lang.org/apt/setup.sh | bash\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100   200  100   200    0     0    187      0  0:00:01  0:00:01 --:--:--   187\r\nExecuting: /tmp/apt-key-gpghome.zqh9KjVlRg/gpg.1.sh --keyserver keys.gnupg.net --recv-keys 09617FD37CC06B54\r\ngpg: keyserver receive failed: Server indicated a failure\r\nHit:1 http://ubuntu.c3sl.ufpr.br/ubuntu bionic InRelease                                                                                     \r\nHit:2 http://ubuntu.c3sl.ufpr.br/ubuntu bionic-updates InRelease                                                                             \r\nHit:3 http://ubuntu.c3sl.ufpr.br/ubuntu bionic-backports InRelease                                                                           \r\nHit:4 http://ubuntu.c3sl.ufpr.br/ubuntu bionic-security InRelease                                                                            \r\nIgn:5 http://dl.google.com/linux/chrome/deb stable InRelease                                                                                 \r\nHit:6 http://dl.google.com/linux/chrome/deb stable Release                                                                                   \r\nHit:9 https://packages.microsoft.com/repos/vscode stable InRelease                                                                           \r\nGet:10 https://dist.crystal-lang.org/apt crystal InRelease [2.478 B]\r\nErr:10 https://dist.crystal-lang.org/apt crystal InRelease\r\n  The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 09617FD37CC06B54\r\nIgn:7 http://packages.erlang-solutions.com/debian bionic InRelease\r\nHit:11 http://packages.erlang-solutions.com/debian bionic Release\r\nReading package lists... Done\r\nW: GPG error: https://dist.crystal-lang.org/apt crystal InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 09617FD37CC06B54\r\nE: The repository 'https://dist.crystal-lang.org/apt crystal InRelease' is not signed.\r\nN: Updating from such a repository can't be done securely, and is therefore disabled by default.\r\nN: See apt-secure(8) manpage for repository creation and user configuration details.\r\nroot@localhost:~# \r\n```\r\n\r\n```\r\napt-key adv --keyserver keys.gnupg.net --recv-keys 09617FD37CC06B54\r\nExecuting: /tmp/apt-key-gpghome.8b8lIFlW2C/gpg.1.sh --keyserver keys.gnupg.net --recv-keys 09617FD37CC06B54\r\ngpg: keyserver receive failed: Server indicated a failure\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6126","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6126/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6126/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6126/events","html_url":"https://github.com/crystal-lang/crystal/issues/6126","id":326013282,"node_id":"MDU6SXNzdWUzMjYwMTMyODI=","number":6126,"title":"Add end_(line|column)_number to loc pragma","user":{"login":"bew","id":9730330,"node_id":"MDQ6VXNlcjk3MzAzMzA=","avatar_url":"https://avatars1.githubusercontent.com/u/9730330?v=4","gravatar_id":"","url":"https://api.github.com/users/bew","html_url":"https://github.com/bew","followers_url":"https://api.github.com/users/bew/followers","following_url":"https://api.github.com/users/bew/following{/other_user}","gists_url":"https://api.github.com/users/bew/gists{/gist_id}","starred_url":"https://api.github.com/users/bew/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bew/subscriptions","organizations_url":"https://api.github.com/users/bew/orgs","repos_url":"https://api.github.com/users/bew/repos","events_url":"https://api.github.com/users/bew/events{/privacy}","received_events_url":"https://api.github.com/users/bew/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-24T08:22:13Z","updated_at":"2018-05-24T09:51:01Z","closed_at":"2018-05-24T08:29:21Z","author_association":"CONTRIBUTOR","body":"Currently the loc pragma allows to set the `filename`, `line_number` and `column_number` of the next token to be read by the lexer.\r\nIts format is: `#<loc:some_filename,line_number,column_number>some_token` surrounded by `#<loc:push>` and `#<loc:pop>`.\r\nSo for example: `#<loc:push>#<loc:\"/tmp/loc.cr\",22,7>SomeConst#<loc:pop>`.\r\n\r\nThe lack of end numbers makes error reporting only show a `^` under the token, instead of a nice `^~~~~~~~` for the whole token.\r\n\r\nMy suggestion is to add 2 (optional?) numbers to the loc pragma to also have `end_line_number` and `end_column_number`.\r\n\r\nI think this would be useful for #6125.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6121","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6121/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6121/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6121/events","html_url":"https://github.com/crystal-lang/crystal/issues/6121","id":325723168,"node_id":"MDU6SXNzdWUzMjU3MjMxNjg=","number":6121,"title":"Formatter issue in heredoc in macros","user":{"login":"bcardiff","id":459923,"node_id":"MDQ6VXNlcjQ1OTkyMw==","avatar_url":"https://avatars1.githubusercontent.com/u/459923?v=4","gravatar_id":"","url":"https://api.github.com/users/bcardiff","html_url":"https://github.com/bcardiff","followers_url":"https://api.github.com/users/bcardiff/followers","following_url":"https://api.github.com/users/bcardiff/following{/other_user}","gists_url":"https://api.github.com/users/bcardiff/gists{/gist_id}","starred_url":"https://api.github.com/users/bcardiff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bcardiff/subscriptions","organizations_url":"https://api.github.com/users/bcardiff/orgs","repos_url":"https://api.github.com/users/bcardiff/repos","events_url":"https://api.github.com/users/bcardiff/events{/privacy}","received_events_url":"https://api.github.com/users/bcardiff/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"node_id":"MDU6TGFiZWwyMDQ4Nzg2Nw==","url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":273087516,"node_id":"MDU6TGFiZWwyNzMwODc1MTY=","url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:formatter","name":"topic:formatter","color":"d4c5f9","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-23T14:08:16Z","updated_at":"2018-05-24T16:45:14Z","closed_at":"2018-05-24T16:45:14Z","author_association":"MEMBER","body":"Since #5578 there is a conflict between heredoc in macros and formatter.\r\n\r\nThe following code parses in 0.24.2, but does not in master (after #5578)\r\n\r\n```crystal\r\ndef foo\r\n  {% raise <<-ERROR\r\n     Long message\r\n  ERROR %}\r\nend\r\n\r\nfoo\r\n```\r\n\r\nIf the user inserts a new lines between `ERROR` and `%}` the formatter will remove it but the code parses in both 0.24.2 and master.\r\n\r\nThe formatter should be changed to stop removing the new line and leave the code as follows:\r\n\r\n```crystal\r\ndef foo\r\n  {% raise <<-ERROR\r\n     Long message\r\n  ERROR \r\n  %}\r\nend\r\n\r\nfoo\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6119","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6119/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6119/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6119/events","html_url":"https://github.com/crystal-lang/crystal/issues/6119","id":325568463,"node_id":"MDU6SXNzdWUzMjU1Njg0NjM=","number":6119,"title":"Error instantiating 'UNIXSocket#receive()'","user":{"login":"ananagame","id":15371828,"node_id":"MDQ6VXNlcjE1MzcxODI4","avatar_url":"https://avatars0.githubusercontent.com/u/15371828?v=4","gravatar_id":"","url":"https://api.github.com/users/ananagame","html_url":"https://github.com/ananagame","followers_url":"https://api.github.com/users/ananagame/followers","following_url":"https://api.github.com/users/ananagame/following{/other_user}","gists_url":"https://api.github.com/users/ananagame/gists{/gist_id}","starred_url":"https://api.github.com/users/ananagame/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ananagame/subscriptions","organizations_url":"https://api.github.com/users/ananagame/orgs","repos_url":"https://api.github.com/users/ananagame/repos","events_url":"https://api.github.com/users/ananagame/events{/privacy}","received_events_url":"https://api.github.com/users/ananagame/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-23T06:42:08Z","updated_at":"2018-05-23T12:24:19Z","closed_at":"2018-05-23T12:24:19Z","author_association":"NONE","body":"Hi, there is a problem with `UNIXSocket#receive()`:\r\nMy Crystal version: (the lastest)\r\n```\r\nCrystal 0.24.2 (2018-03-10)\r\n\r\nLLVM: 5.0.1\r\nDefault target: x86_64-apple-macosx\r\n```\r\n\r\nThe code to reproduce the bug:\r\n```crystal\r\nsock = UNIXSocket.new(\"path to your socket\")\r\nsock.write_bytes(0, IO::ByteFormat::LittleEndian)\r\nputs sock.receive\r\n```\r\n\r\nAnd the error:\r\n```\r\nin path: instantiating 'UNIXSocket#receive()'\r\n\r\n      puts sock.receive\r\n                ^~~~~~~\r\n\r\nin /usr/local/Cellar/crystal-lang/0.24.2_1/src/socket/unix_socket.cr:100: wrong number of arguments for 'UNIXSocket#recvfrom' (given 0, expected 1)\r\nOverloads are:\r\n - Socket#recvfrom(message)\r\n\r\n    bytes_read, sockaddr, addrlen = recvfrom\r\n                                    ^~~~~~~~\r\n```\r\n\r\nThanks","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6116","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6116/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6116/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6116/events","html_url":"https://github.com/crystal-lang/crystal/issues/6116","id":325176399,"node_id":"MDU6SXNzdWUzMjUxNzYzOTk=","number":6116,"title":".Error report in crystal.","user":{"login":"LWFlouisa","id":9245433,"node_id":"MDQ6VXNlcjkyNDU0MzM=","avatar_url":"https://avatars2.githubusercontent.com/u/9245433?v=4","gravatar_id":"","url":"https://api.github.com/users/LWFlouisa","html_url":"https://github.com/LWFlouisa","followers_url":"https://api.github.com/users/LWFlouisa/followers","following_url":"https://api.github.com/users/LWFlouisa/following{/other_user}","gists_url":"https://api.github.com/users/LWFlouisa/gists{/gist_id}","starred_url":"https://api.github.com/users/LWFlouisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LWFlouisa/subscriptions","organizations_url":"https://api.github.com/users/LWFlouisa/orgs","repos_url":"https://api.github.com/users/LWFlouisa/repos","events_url":"https://api.github.com/users/LWFlouisa/events{/privacy}","received_events_url":"https://api.github.com/users/LWFlouisa/received_events","type":"User","site_admin":false},"labels":[{"id":263518879,"node_id":"MDU6TGFiZWwyNjM1MTg4Nzk=","url":"https://api.github.com/repos/crystal-lang/crystal/labels/status:needs-more-info","name":"status:needs-more-info","color":"C53BEB","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-05-22T07:45:46Z","updated_at":"2018-05-24T11:02:41Z","closed_at":"2018-05-24T11:02:41Z","author_association":"NONE","body":"Error: execution of command failed with code: 1: `cc \"${@}\" -o '/home/sarah/.cache/crystal/usr-share-crystal-src-ecr-process.cr/macro_run'  -rdynamic  -lpcre -lgc -lpthread /usr/share/crystal/src/ext/libcrystal.a -levent -lrt -ldl -L/usr/lib -L/usr/local/lib`\r\n\r\nI seem to keep getting this error report no matter which program I run.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6115","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6115/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6115/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6115/events","html_url":"https://github.com/crystal-lang/crystal/issues/6115","id":325093090,"node_id":"MDU6SXNzdWUzMjUwOTMwOTA=","number":6115,"title":"Top-Level should have a module interface.","user":{"login":"BrucePerens","id":1103471,"node_id":"MDQ6VXNlcjExMDM0NzE=","avatar_url":"https://avatars1.githubusercontent.com/u/1103471?v=4","gravatar_id":"","url":"https://api.github.com/users/BrucePerens","html_url":"https://github.com/BrucePerens","followers_url":"https://api.github.com/users/BrucePerens/followers","following_url":"https://api.github.com/users/BrucePerens/following{/other_user}","gists_url":"https://api.github.com/users/BrucePerens/gists{/gist_id}","starred_url":"https://api.github.com/users/BrucePerens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BrucePerens/subscriptions","organizations_url":"https://api.github.com/users/BrucePerens/orgs","repos_url":"https://api.github.com/users/BrucePerens/repos","events_url":"https://api.github.com/users/BrucePerens/events{/privacy}","received_events_url":"https://api.github.com/users/BrucePerens/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-21T23:36:06Z","updated_at":"2018-05-22T15:26:33Z","closed_at":"2018-05-22T15:26:33Z","author_association":"NONE","body":"Top-level should have a Module interface, with a defined name used to access it, and should respond to the entire Module API and of course `self`, `include` and `extend`. As it is now, top-level is a singularity, with rules that apply only to it. Providing a Module interface to top-level would make it possible for programmers to easily solve some of the nested name-space problems that exist today, by including or extending top-level.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6114","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6114/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6114/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6114/events","html_url":"https://github.com/crystal-lang/crystal/issues/6114","id":325017069,"node_id":"MDU6SXNzdWUzMjUwMTcwNjk=","number":6114,"title":"Formatter bug","user":{"login":"Sija","id":988,"node_id":"MDQ6VXNlcjk4OA==","avatar_url":"https://avatars3.githubusercontent.com/u/988?v=4","gravatar_id":"","url":"https://api.github.com/users/Sija","html_url":"https://github.com/Sija","followers_url":"https://api.github.com/users/Sija/followers","following_url":"https://api.github.com/users/Sija/following{/other_user}","gists_url":"https://api.github.com/users/Sija/gists{/gist_id}","starred_url":"https://api.github.com/users/Sija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sija/subscriptions","organizations_url":"https://api.github.com/users/Sija/orgs","repos_url":"https://api.github.com/users/Sija/repos","events_url":"https://api.github.com/users/Sija/events{/privacy}","received_events_url":"https://api.github.com/users/Sija/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-21T18:38:46Z","updated_at":"2018-05-23T11:12:21Z","closed_at":"2018-05-23T09:15:35Z","author_association":"CONTRIBUTOR","body":"Code below:\r\n\r\n```cr\r\nreturn false unless some_very_long_variable_name = %w(foo bar baz).any? do |item|\r\n  item =~ /foo/\r\nend\r\n```\r\n\r\ngets wrongly formatted to:\r\n\r\n```cr\r\nreturn false unless some_very_long_variable_name = %w(foo bar baz).any? do |item|\r\n                      item =~ /foo/\r\n                    end\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6112","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6112/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6112/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6112/events","html_url":"https://github.com/crystal-lang/crystal/issues/6112","id":324732424,"node_id":"MDU6SXNzdWUzMjQ3MzI0MjQ=","number":6112,"title":"I don't know how to read the Crystal docs ","user":{"login":"girng","id":36117592,"node_id":"MDQ6VXNlcjM2MTE3NTky","avatar_url":"https://avatars0.githubusercontent.com/u/36117592?v=4","gravatar_id":"","url":"https://api.github.com/users/girng","html_url":"https://github.com/girng","followers_url":"https://api.github.com/users/girng/followers","following_url":"https://api.github.com/users/girng/following{/other_user}","gists_url":"https://api.github.com/users/girng/gists{/gist_id}","starred_url":"https://api.github.com/users/girng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/girng/subscriptions","organizations_url":"https://api.github.com/users/girng/orgs","repos_url":"https://api.github.com/users/girng/repos","events_url":"https://api.github.com/users/girng/events{/privacy}","received_events_url":"https://api.github.com/users/girng/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-20T18:55:11Z","updated_at":"2018-05-22T12:03:44Z","closed_at":"2018-05-22T12:02:22Z","author_association":"NONE","body":"Crystal Version: **0.24.1**\r\n\r\nBeen stuck on this all day and not sure what to do. Oprypin and I have been back n forth on gitter for hours. I'm pretty sure something internally is going on, or it's  a rare OS edge case. If you have time please take a look. And if you need access to my openVZ VPS, I can give you my SSH key. Just PM me through Gitter.\r\n\r\nTesting this on Debian 8, 64-bit minimal (openVZ container, stock settings)\r\nserver.cr: https://paste.ee/p/C4UV7\r\nsocket.cr: https://paste.ee/p/2PzOT\r\n\r\n###  How to Replicate\r\n - run `ulimit -n 60000`, then `crystal server.cr`\r\n - in another terminal, run: `while sleep 1; do netstat -an | wc -l; done` (shows connected amount)\r\n - run socket.cr for 3-5 seconds, then do `ctrl+c`. do this about 3 times.\r\n - close the `socket.cr` terminal to close all client-side connections \r\n\r\n\r\nThen, gather your attention to the echoing netstat terminal, the connections decrement a tiny amount, **but they will never   get fully released**. They'll stay at around 1039, or a weird number. To further illustrate this, run `netstat -ntu`, and you'll see a ton of  *established*  TCP states. Even after crystal used `socket.close` on them.\r\n\r\n### Reasons to believe it might be because of Crystal's TCPServer:\r\n - This does not happen with a nodejs  tcp server using `socket.destroy()`\r\n - If you change `socket.cr` to port `22`, to just do tcp connections to sshd. You will see  all the connections eventually are free'd. It's not a `socket.cr` issue\r\n - If you stop the `server.cr`, then watch your netstat terminal, you'll see your connections slowly go back down and be free'd. It'll look like [this](https://i.gyazo.com/3b1d9d16482d1a5150ba8f8cb8399019.png)\r\n\r\n\r\n\r\n ","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6103","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6103/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6103/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6103/events","html_url":"https://github.com/crystal-lang/crystal/issues/6103","id":324510017,"node_id":"MDU6SXNzdWUzMjQ1MTAwMTc=","number":6103,"title":"Type check in never-called methods","user":{"login":"xnuk","id":3071003,"node_id":"MDQ6VXNlcjMwNzEwMDM=","avatar_url":"https://avatars1.githubusercontent.com/u/3071003?v=4","gravatar_id":"","url":"https://api.github.com/users/xnuk","html_url":"https://github.com/xnuk","followers_url":"https://api.github.com/users/xnuk/followers","following_url":"https://api.github.com/users/xnuk/following{/other_user}","gists_url":"https://api.github.com/users/xnuk/gists{/gist_id}","starred_url":"https://api.github.com/users/xnuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xnuk/subscriptions","organizations_url":"https://api.github.com/users/xnuk/orgs","repos_url":"https://api.github.com/users/xnuk/repos","events_url":"https://api.github.com/users/xnuk/events{/privacy}","received_events_url":"https://api.github.com/users/xnuk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-18T18:30:50Z","updated_at":"2018-05-19T00:06:36Z","closed_at":"2018-05-18T20:04:51Z","author_association":"NONE","body":"Tested on: Crystal v0.24.2 / Arch Linux x64\r\n\r\n```crystal\r\ndef profit\r\n  i_am_integer = \"actually not\"\r\n  i_am_array = i_am_integer - 100\r\n  i_am_array.each do |value|\r\n    p value\r\n  end\r\nend\r\n\r\n# And never use `profit`\r\n```\r\n\r\nThis code never get errors until `profit` is called, and also no warns about dead code. This is inconvenient; we can't gain type checker's benefit during implementing methods, until real use. Is there a proper option that makes the compiler to check types in dead methods? If so, why isn't it default?","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6102","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6102/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6102/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6102/events","html_url":"https://github.com/crystal-lang/crystal/issues/6102","id":324504663,"node_id":"MDU6SXNzdWUzMjQ1MDQ2NjM=","number":6102,"title":"Empty multi-line array literal of unspecified type 'Nil assertion failed'","user":{"login":"tomjw64","id":1285308,"node_id":"MDQ6VXNlcjEyODUzMDg=","avatar_url":"https://avatars2.githubusercontent.com/u/1285308?v=4","gravatar_id":"","url":"https://api.github.com/users/tomjw64","html_url":"https://github.com/tomjw64","followers_url":"https://api.github.com/users/tomjw64/followers","following_url":"https://api.github.com/users/tomjw64/following{/other_user}","gists_url":"https://api.github.com/users/tomjw64/gists{/gist_id}","starred_url":"https://api.github.com/users/tomjw64/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomjw64/subscriptions","organizations_url":"https://api.github.com/users/tomjw64/orgs","repos_url":"https://api.github.com/users/tomjw64/repos","events_url":"https://api.github.com/users/tomjw64/events{/privacy}","received_events_url":"https://api.github.com/users/tomjw64/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-18T18:12:25Z","updated_at":"2018-05-19T22:46:12Z","closed_at":"2018-05-19T22:26:15Z","author_association":"NONE","body":"✔️ This produces the expected error:\r\n```crystal\r\n[]\r\n```\r\n\r\n✔️ This produces no error:\r\n```crystal\r\n[\r\n] of Int32\r\n```\r\n\r\n❌ But this produces a less than pleasant error:\r\n```crystal\r\n[\r\n]\r\n```\r\n\r\nError message:\r\n```\r\nNil assertion failed\r\n??? (x16)\r\nError: you've found a bug in the Crystal compiler.\r\n```\r\n\r\nSystem info (using WSL):\r\n```\r\n$ crystal -v\r\nCrystal 0.24.2 [4f9ed8d03] (2018-03-08)\r\n\r\nLLVM: 4.0.0\r\nDefault target: x86_64-unknown-linux-gnu\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6101","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6101/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6101/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6101/events","html_url":"https://github.com/crystal-lang/crystal/issues/6101","id":324281634,"node_id":"MDU6SXNzdWUzMjQyODE2MzQ=","number":6101,"title":"Passing parameters to subviews","user":{"login":"ozergul","id":8460954,"node_id":"MDQ6VXNlcjg0NjA5NTQ=","avatar_url":"https://avatars2.githubusercontent.com/u/8460954?v=4","gravatar_id":"","url":"https://api.github.com/users/ozergul","html_url":"https://github.com/ozergul","followers_url":"https://api.github.com/users/ozergul/followers","following_url":"https://api.github.com/users/ozergul/following{/other_user}","gists_url":"https://api.github.com/users/ozergul/gists{/gist_id}","starred_url":"https://api.github.com/users/ozergul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozergul/subscriptions","organizations_url":"https://api.github.com/users/ozergul/orgs","repos_url":"https://api.github.com/users/ozergul/repos","events_url":"https://api.github.com/users/ozergul/events{/privacy}","received_events_url":"https://api.github.com/users/ozergul/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-18T06:07:13Z","updated_at":"2018-05-18T06:49:54Z","closed_at":"2018-05-18T06:49:54Z","author_association":"NONE","body":"Hello\r\nI have template like this:\r\n- Main\r\n- Single\r\n-- Header\r\n-- Footer\r\n\r\nWhen I render main, I cant pass variable to Header.ecr. In ruby we do it with locals. As I see crystal doesnt support it right? Using kemal.\r\n\r\nEdit: Decided to use crinja as template engine.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6099","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6099/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6099/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6099/events","html_url":"https://github.com/crystal-lang/crystal/issues/6099","id":323137429,"node_id":"MDU6SXNzdWUzMjMxMzc0Mjk=","number":6099,"title":"Can not resolve hostname in Kubernetes","user":{"login":"liuyang1204","id":2900425,"node_id":"MDQ6VXNlcjI5MDA0MjU=","avatar_url":"https://avatars0.githubusercontent.com/u/2900425?v=4","gravatar_id":"","url":"https://api.github.com/users/liuyang1204","html_url":"https://github.com/liuyang1204","followers_url":"https://api.github.com/users/liuyang1204/followers","following_url":"https://api.github.com/users/liuyang1204/following{/other_user}","gists_url":"https://api.github.com/users/liuyang1204/gists{/gist_id}","starred_url":"https://api.github.com/users/liuyang1204/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuyang1204/subscriptions","organizations_url":"https://api.github.com/users/liuyang1204/orgs","repos_url":"https://api.github.com/users/liuyang1204/repos","events_url":"https://api.github.com/users/liuyang1204/events{/privacy}","received_events_url":"https://api.github.com/users/liuyang1204/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assi
55e6
gnee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2018-05-15T09:30:47Z","updated_at":"2018-05-17T07:13:36Z","closed_at":"2018-05-16T14:48:19Z","author_association":"NONE","body":"The TCP client can not connect to services in Kubernetes using the service hostname.\r\n\r\nFor example `http://some-service` or `mysql://root@some-service:3306/db`\r\n\r\nThe error is `No address found for some-service:80 over TCP`\r\n\r\nChanging the hostname `some-service` to the cluster IP addr in Kubernetes makes the connections successful.\r\n\r\nThis happens both to HTTP clients and DB clients.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6094","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6094/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6094/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6094/events","html_url":"https://github.com/crystal-lang/crystal/issues/6094","id":322562985,"node_id":"MDU6SXNzdWUzMjI1NjI5ODU=","number":6094,"title":"Annotation failed with require","user":{"login":"kostya","id":95060,"node_id":"MDQ6VXNlcjk1MDYw","avatar_url":"https://avatars0.githubusercontent.com/u/95060?v=4","gravatar_id":"","url":"https://api.github.com/users/kostya","html_url":"https://github.com/kostya","followers_url":"https://api.github.com/users/kostya/followers","following_url":"https://api.github.com/users/kostya/following{/other_user}","gists_url":"https://api.github.com/users/kostya/gists{/gist_id}","starred_url":"https://api.github.com/users/kostya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kostya/subscriptions","organizations_url":"https://api.github.com/users/kostya/orgs","repos_url":"https://api.github.com/users/kostya/repos","events_url":"https://api.github.com/users/kostya/events{/privacy}","received_events_url":"https://api.github.com/users/kostya/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"node_id":"MDU6TGFiZWwyMDQ4Nzg2Nw==","url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":253019637,"node_id":"MDU6TGFiZWwyNTMwMTk2Mzc=","url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:compiler","name":"topic:compiler","color":"fef2c0","default":false}],"state":"closed","locked":false,"assignee":{"login":"asterite","id":209371,"node_id":"MDQ6VXNlcjIwOTM3MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/209371?v=4","gravatar_id":"","url":"https://api.github.com/users/asterite","html_url":"https://github.com/asterite","followers_url":"https://api.github.com/users/asterite/followers","following_url":"https://api.github.com/users/asterite/following{/other_user}","gists_url":"https://api.github.com/users/asterite/gists{/gist_id}","starred_url":"https://api.github.com/users/asterite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asterite/subscriptions","organizations_url":"https://api.github.com/users/asterite/orgs","repos_url":"https://api.github.com/users/asterite/repos","events_url":"https://api.github.com/users/asterite/events{/privacy}","received_events_url":"https://api.github.com/users/asterite/received_events","type":"User","site_admin":false},"assignees":[{"login":"asterite","id":209371,"node_id":"MDQ6VXNlcjIwOTM3MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/209371?v=4","gravatar_id":"","url":"https://api.github.com/users/asterite","html_url":"https://github.com/asterite","followers_url":"https://api.github.com/users/asterite/followers","following_url":"https://api.github.com/users/asterite/following{/other_user}","gists_url":"https://api.github.com/users/asterite/gists{/gist_id}","starred_url":"https://api.github.com/users/asterite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asterite/subscriptions","organizations_url":"https://api.github.com/users/asterite/orgs","repos_url":"https://api.github.com/users/asterite/repos","events_url":"https://api.github.com/users/asterite/events{/privacy}","received_events_url":"https://api.github.com/users/asterite/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2018-05-13T04:18:15Z","updated_at":"2018-05-23T18:43:25Z","closed_at":"2018-05-23T18:43:25Z","author_association":"CONTRIBUTOR","body":"```crystal\r\nannotation Bla\r\nend\r\n\r\nrequire \"bla\"\r\n```\r\n\r\n```\r\nSyntax error in 1.cr:5: can't require inside type declarations\r\n\r\nrequire \"bla\"\r\n^\r\n```\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6093","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6093/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6093/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6093/events","html_url":"https://github.com/crystal-lang/crystal/issues/6093","id":322550283,"node_id":"MDU6SXNzdWUzMjI1NTAyODM=","number":6093,"title":"Time parse error in master","user":{"login":"kostya","id":95060,"node_id":"MDQ6VXNlcjk1MDYw","avatar_url":"https://avatars0.githubusercontent.com/u/95060?v=4","gravatar_id":"","url":"https://api.github.com/users/kostya","html_url":"https://github.com/kostya","followers_url":"https://api.github.com/users/kostya/followers","following_url":"https://api.github.com/users/kostya/following{/other_user}","gists_url":"https://api.github.com/users/kostya/gists{/gist_id}","starred_url":"https://api.github.com/users/kostya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kostya/subscriptions","organizations_url":"https://api.github.com/users/kostya/orgs","repos_url":"https://api.github.com/users/kostya/repos","events_url":"https://api.github.com/users/kostya/events{/privacy}","received_events_url":"https://api.github.com/users/kostya/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-12T23:25:20Z","updated_at":"2018-05-14T15:40:16Z","closed_at":"2018-05-14T15:40:15Z","author_association":"CONTRIBUTOR","body":"this works in 0.24.2 and not work in master:\r\n```crystal\r\np Time.parse(\"2011-08-15 12:00\", \"%Y-%m-%d %H:%M\")\r\n```\r\n\r\n```\r\nUnhandled exception: Time format did not include time zone and no default location provided (Time::Format::Error)\r\n  from src/time/format/parser.cr:362:9 in 'raise'\r\n  from src/time/format/parser.cr:30:9 in 'time'\r\n  from src/time/format.cr:77:5 in 'parse'\r\n  from src/time/format.cr:74:3 in 'parse'\r\n  from src/time.cr:542:5 in 'parse'\r\n  from src/time.cr:541:3 in 'parse'\r\n  from 1.cr:3:3 in '__crystal_main'\r\n  from src/crystal/main.cr:104:5 in 'main_user_code'\r\n  from src/crystal/main.cr:93:7 in 'main'\r\n  from src/crystal/main.cr:133:3 in 'main'\r\n```","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6091","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6091/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6091/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6091/events","html_url":"https://github.com/crystal-lang/crystal/issues/6091","id":322546013,"node_id":"MDU6SXNzdWUzMjI1NDYwMTM=","number":6091,"title":"Compiler crash when autofilled array assigns instance variable in class without type reference","user":{"login":"SlayerShadow","id":8993851,"node_id":"MDQ6VXNlcjg5OTM4NTE=","avatar_url":"https://avatars0.githubusercontent.com/u/8993851?v=4","gravatar_id":"","url":"https://api.github.com/users/SlayerShadow","html_url":"https://github.com/SlayerShadow","followers_url":"https://api.github.com/users/SlayerShadow/followers","following_url":"https://api.github.com/users/SlayerShadow/following{/other_user}","gists_url":"https://api.github.com/users/SlayerShadow/gists{/gist_id}","starred_url":"https://api.github.com/users/SlayerShadow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SlayerShadow/subscriptions","organizations_url":"https://api.github.com/users/SlayerShadow/orgs","repos_url":"https://api.github.com/users/SlayerShadow/repos","events_url":"https://api.github.com/users/SlayerShadow/events{/privacy}","received_events_url":"https://api.github.com/users/SlayerShadow/received_events","type":"User","site_admin":false},"labels":[{"id":20487867,"node_id":"MDU6TGFiZWwyMDQ4Nzg2Nw==","url":"https://api.github.com/repos/crystal-lang/crystal/labels/kind:bug","name":"kind:bug","color":"fc2929","default":false},{"id":253019637,"node_id":"MDU6TGFiZWwyNTMwMTk2Mzc=","url":"https://api.github.com/repos/crystal-lang/crystal/labels/topic:compiler","name":"topic:compiler","color":"fef2c0","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-12T22:00:18Z","updated_at":"2018-05-23T17:18:27Z","closed_at":"2018-05-23T17:18:26Z","author_association":"NONE","body":"Similar to #2665 scope.\r\n\r\n```crystal\r\nclass Foo\r\n  def some_action\r\n    @value = Array.new( 64 ){ 64 }\r\n  end\r\nend\r\n```\r\nRaises compiler error (will be shown below). But other declarations works correctly:\r\n1. `value = Array.new( 64 ){ 64 }` - all ok (out of class or local variable).\r\n2.\r\n    ```crystal\r\n    class Foo\r\n      def some_action\r\n        value = Array.new( 64 ){ 64 }\r\n      end\r\n    end\r\n    ```\r\n    All ok (local variable).\r\n3) \r\n    ```crystal\r\n    class Foo\r\n      def bar\r\n        @value = Array( Int32 ).new( 64 ){ 64 }\r\n      end\r\n    end\r\n    ```\r\n    All ok (type reference).\r\n\r\n```\r\n$ crystal -v\r\nCrystal 0.24.2 [4f9ed8d03] (2018-03-08)\r\n\r\nLLVM: 4.0.0\r\nDefault target: x86_64-unknown-linux-gnu\r\n```\r\n```\r\n$ uname -a\r\nLinux pc 4.16.0-1-amd64 #1 SMP Debian 4.16.5-1 (2018-04-29) x86_64 GNU/Linux\r\n```\r\n\r\nError:\r\n```\r\ncast from Nil to Crystal::GenericInstanceType+ failed, at /crystal/src/compiler/crystal/types.cr:1428:20:1428\r\n???\r\n...\r\n???\r\nError: you've found a bug in the Crystal compiler.\r\n```\r\nBacktrace is filled by \"?\" signs, and nothing helped to display it.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6090","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6090/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6090/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6090/events","html_url":"https://github.com/crystal-lang/crystal/issues/6090","id":322488844,"node_id":"MDU6SXNzdWUzMjI0ODg4NDQ=","number":6090,"title":"tcp stream hiccup when reading data inside a loop","user":{"login":"girng","id":36117592,"node_id":"MDQ6VXNlcjM2MTE3NTky","avatar_url":"https://avatars0.githubusercontent.com/u/36117592?v=4","gravatar_id":"","url":"https://api.github.com/users/girng","html_url":"https://github.com/girng","followers_url":"https://api.github.com/users/girng/followers","following_url":"https://api.github.com/users/girng/following{/other_user}","gists_url":"https://api.github.com/users/girng/gists{/gist_id}","starred_url":"https://api.github.com/users/girng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/girng/subscriptions","organizations_url":"https://api.github.com/users/girng/orgs","repos_url":"https://api.github.com/users/girng/repos","events_url":"https://api.github.com/users/girng/events{/privacy}","received_events_url":"https://api.github.com/users/girng/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-12T06:56:31Z","updated_at":"2018-05-14T04:53:23Z","closed_at":"2018-05-14T04:52:51Z","author_association":"NONE","body":"### crystal version:\r\nCrystal 0.24.1, LLVM: 4.0.0, Windows 10 WSL\r\nDefault target: x86_64-unknown-linux-gnu\r\n\r\nhello my friends. i'll try to reduce this as much as possible,  \r\nserver.cr: https://paste.ee/p/p1zzs\r\nsocket.cr: https://paste.ee/p/fzul4\r\n\r\n### How To Replicate\r\n - run crystal server.cr\r\n - run crystal socket.cr\r\n\r\n## Hiccup In Action\r\n![](https://i.gyazo.com/87bb1f8e3827eace766297714f606a75.gif)\r\n\r\nthe *right* terminal is the **server.cr**. basically, there is a small \"delay\" or \"hiccup\" every other XXms, and i'm not sure what is causing it. if it's too hard to see, you can run the code above in your own terminal. much more clearer.\r\n\r\nif i am doing something wrong with my code, i apologise. but i've been using this code for my master game server development for over a month and everything has been working fine until i started to do the tickrate (for the game server). thank you in advance\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6088","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6088/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6088/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6088/events","html_url":"https://github.com/crystal-lang/crystal/issues/6088","id":322173153,"node_id":"MDU6SXNzdWUzMjIxNzMxNTM=","number":6088,"title":"Ruby-like suggestions?","user":{"login":"KCErb","id":4992244,"node_id":"MDQ6VXNlcjQ5OTIyNDQ=","avatar_url":"https://avatars2.githubusercontent.com/u/4992244?v=4","gravatar_id":"","url":"https://api.github.com/users/KCErb","html_url":"https://github.com/KCErb","followers_url":"https://api.github.com/users/KCErb/followers","following_url":"https://api.github.com/users/KCErb/following{/other_user}","gists_url":"https://api.github.com/users/KCErb/gists{/gist_id}","starred_url":"https://api.github.com/users/KCErb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KCErb/subscriptions","organizations_url":"https://api.github.com/users/KCErb/orgs","repos_url":"https://api.github.com/users/KCErb/repos","events_url":"https://api.github.com/users/KCErb/events{/privacy}","received_events_url":"https://api.github.com/users/KCErb/received_events","type":"User","site_admin":false},"labels":[{"id":514698655,"node_id":"MDU6TGFiZWw1MTQ2OTg2NTU=","url":"https://api.github.com/repos/crystal-lang/crystal/labels/community:shard-idea","name":"community:shard-idea","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2018-05-11T05:35:19Z","updated_at":"2018-05-15T13:35:30Z","closed_at":"2018-05-11T08:15:44Z","author_association":"NONE","body":"Hi there, I'm a long-time Ruby developer new to Crystal and loving my experience!\r\n\r\nOne decision that was made (which I applaud) was to have only one way of doing something. Coming from Ruby this means more than once I've done something like `array.length` or `array.inject` and been puzzled for a few minutes trying to figure out what went wrong.\r\n\r\nWhat would you guys say to adding some ruby-like suggestions (somewhere in crystal/semantic?) so that calling `array.inject` produces `undefined method 'inject' for Array(T) (did you mean 'reduce'?)`\r\n\r\nI don't think we need an exhaustive list of these Ruby changes, but if there was a place in semantics where we could store a JSON of them or something along with some logic, it would add just one more cool feature to an already bursting-at-the-seams-with-cool-features project.","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6086","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6086/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6086/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6086/events","html_url":"https://github.com/crystal-lang/crystal/issues/6086","id":321823853,"node_id":"MDU6SXNzdWUzMjE4MjM4NTM=","number":6086,"title":"Get an error: \"ld: library not found for -lgc\"","user":{"login":"lfwelove","id":554891,"node_id":"MDQ6VXNlcjU1NDg5MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/554891?v=4","gravatar_id":"","url":"https://api.github.com/users/lfwelove","html_url":"https://github.com/lfwelove","followers_url":"https://api.github.com/users/lfwelove/followers","following_url":"https://api.github.com/users/lfwelove/following{/other_user}","gists_url":"https://api.github.com/users/lfwelove/gists{/gist_id}","starred_url":"https://api.github.com/users/lfwelove/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfwelove/subscriptions","organizations_url":"https://api.github.com/users/lfwelove/orgs","repos_url":"https://api.github.com/users/lfwelove/repos","events_url":"https://api.github.com/users/lfwelove/events{/privacy}","received_events_url":"https://api.github.com/users/lfwelove/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-10T06:26:40Z","updated_at":"2018-05-10T10:48:39Z","closed_at":"2018-05-10T09:42:15Z","author_association":"NONE","body":"MacOS High Sierra 10.13.4\r\n\r\nI tried two ways to install Crystal-lang on Mac\r\n1. $brew install crystal-lang\r\n2. $brew install crystal-lang --with-llvm\r\n\r\nmy test.cr content:\r\nputs \"hello\"\r\n\r\ntype \"$ crystal test.cr \"\r\n(then get an error)\r\nld: library not found for -lgc\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\nError: execution of command failed with code: 1: `cc \"${@}\" -o '/Users/chenxi/.cache/crystal/crystal-run-test.tmp'  -rdynamic  -lpcre -lgc -lpthread /usr/local/Cellar/crystal-lang/0.24.2_1/src/ext/libcrystal.a -levent -liconv -ldl -L/usr/lib -L/usr/local/lib`\r\n","score":1.0},{"url":"https://api.github.com/repos/crystal-lang/crystal/issues/6081","repository_url":"https://api.github.com/repos/crystal-lang/crystal","labels_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6081/labels{/name}","comments_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6081/comments","events_url":"https://api.github.com/repos/crystal-lang/crystal/issues/6081/events","html_url":"https://github.com/crystal-lang/crystal/issues/6081","id":321275308,"node_id":"MDU6SXNzdWUzMjEyNzUzMDg=","number":6081,"title":"New Feature: Allow passing TypeDeclarations to regular methods at runtime","user":{"login":"paulcsmith","id":22394,"node_id":"MDQ6VXNlcjIyMzk0","avatar_url":"https://avatars0.githubusercontent.com/u/22394?v=4","gravatar_id":"","url":"https://api.github.com/users/paulcsmith","html_url":"https://github.com/paulcsmith","followers_url":"https://api.github.com/users/paulcsmith/followers","following_url":"https://api.github.com/users/paulcsmith/following{/other_user}","gists_url":"https://api.github.com/users/paulcsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/paulcsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulcsmith/subscriptions","organizations_url":"https://api.github.com/users/paulcsmith/orgs","repos_url":"https://api.github.com/users/paulcsmith/repos","events_url":"https://api.github.com/users/paulcsmith/events{/privacy}","received_events_url":"https://api.github.com/users/paulcsmith/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-05-08T17:23:30Z","updated_at":"2018-05-08T20:30:33Z","closed_at":"2018-05-08T19:56:17Z","author_association":"CONTRIBUTOR","body":"Right now you can pass TypeDeclarations to macros:\r\n\r\nhttps://play.crystal-lang.org/#/r/41a7\r\n```crystal\r\nmacro what_am_i?(declaration)\r\n  {{ p declaration.type }}\r\nend\r\n\r\nwhat_am_i? thing : String # Prints: String\r\n```\r\n\r\nIt would be wonderful to also be able to use a `TypeDeclaration` class at *runtime*:\r\n\r\n```crystal\r\ndef what_am_i?(declaration)\r\n  p declaration.type\r\nend\r\n\r\nwhat_am_i? thing : String # Prints: String\r\n```\r\n\r\n## Example use case:\r\n\r\n\r\nhttps://luckyframework.org/guides/database-migrations/#creating-and-altering-tables\r\n```crystal\r\n# created_at, updated_at, and id are added automatically\r\ncreate :users do\r\n  add name : String # will set the column to NULL FALSE\r\n  add age : Int32? # will allow NULL values because of the nilable type\r\nend\r\n```\r\n\r\nRight now I have to make `add` a macro even though it could easily be done as a method if it were possible to pass a type declaration around at runtime. I imagine it would be a simple struct with the exact same methods as the TypeDeclaration(T) available at compile-time (where T is the type, makes it so you can only allow TypeDeclarations of a certain type, used in this case so that only types that are allowed in the database can be passed to the method)\r\n\r\n```crystal\r\ndef add(declaration : TypeDeclaration(String))\r\n  # add string column using declaration.type, declaration.var and declaration.default\r\nend\r\n```\r\n\r\nI admit I do not know how this is implemented so maybe this is extremely difficult, but my hope is that it is not. I think this will open up APIs that feel wonderful because you're using familiar syntax instead of something like: `add :age, Int32?, default = 1`","score":1.0}]}
0

