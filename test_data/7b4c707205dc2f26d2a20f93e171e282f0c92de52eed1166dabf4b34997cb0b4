HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 09 Jun 2018 08:11:17 GMT
Link: <https://api.github.com/search/issues?q=repo%3Aphalcon%2Fcphalcon+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Aphalcon%2Fcphalcon+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: CE64:57C5:373382E:71A8F07:5B1B8BA4
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 8
X-Ratelimit-Reset: 1528531917
X-Runtime-Rack: 0.461012
X-Xss-Protection: 1; mode=block

8000
{"total_count":3646,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13402","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13402/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13402/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13402/events","html_url":"https://github.com/phalcon/cphalcon/issues/13402","id":329712715,"node_id":"MDU6SXNzdWUzMjk3MTI3MTU=","number":13402,"title":"Add ModelInterface::getModelsMetaData","user":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"labels":[{"id":648645402,"node_id":"MDU6TGFiZWw2NDg2NDU0MDI=","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Breaks%20BC","name":"Breaks BC","color":"d93f0b","default":false},{"id":13573146,"node_id":"MDU6TGFiZWwxMzU3MzE0Ng==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/New%20Feature%20Request","name":"New Feature Request","color":"0052cc","default":false},{"id":418979306,"node_id":"MDU6TGFiZWw0MTg5NzkzMDY=","url":"https://api.github.com/repos/phalcon/cphalcon/labels/RFC","name":"RFC","color":"006b75","default":false}],"state":"closed","locked":false,"assignee":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"assignees":[{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/phalcon/cphalcon/milestones/21","html_url":"https://github.com/phalcon/cphalcon/milestone/21","labels_url":"https://api.github.com/repos/phalcon/cphalcon/milestones/21/labels","id":1912191,"node_id":"MDk6TWlsZXN0b25lMTkxMjE5MQ==","number":21,"title":"4.0.0","description":"","creator":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"open_issues":90,"closed_issues":14,"state":"open","created_at":"2016-07-29T16:36:07Z","updated_at":"2018-06-06T05:13:15Z","due_on":null,"closed_at":null},"comments":1,"created_at":"2018-06-06T05:11:09Z","updated_at":"2018-06-06T05:13:15Z","closed_at":"2018-06-06T05:13:15Z","author_association":"MEMBER","body":"Add `Phalcon\\Mvc\\ModelInterface::getModelsMetaData`.\r\n\r\nThis is important for static analysis as the `ModelInterface` is used as the interface parameter for various plugins and user components.\r\n\r\n----\r\n\r\nRefs: \r\n- https://github.com/phalcon/cphalcon/pull/13070\r\n- https://github.com/phalcon/cphalcon/issues/12676","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13401","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13401/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13401/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13401/events","html_url":"https://github.com/phalcon/cphalcon/issues/13401","id":329366650,"node_id":"MDU6SXNzdWUzMjkzNjY2NTA=","number":13401,"title":"The old undeclared $_default at win10 every redirect...","user":{"login":"6562680","id":26746829,"node_id":"MDQ6VXNlcjI2NzQ2ODI5","avatar_url":"https://avatars3.githubusercontent.com/u/26746829?v=4","gravatar_id":"","url":"https://api.github.com/users/6562680","html_url":"https://github.com/6562680","followers_url":"https://api.github.com/users/6562680/followers","following_url":"https://api.github.com/users/6562680/following{/other_user}","gists_url":"https://api.github.com/users/6562680/gists{/gist_id}","starred_url":"https://api.github.com/users/6562680/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/6562680/subscriptions","organizations_url":"https://api.github.com/users/6562680/orgs","repos_url":"https://api.github.com/users/6562680/repos","events_url":"https://api.github.com/users/6562680/events{/privacy}","received_events_url":"https://api.github.com/users/6562680/received_events","type":"User","site_admin":false},"labels":[{"id":356243820,"node_id":"MDU6TGFiZWwzNTYyNDM4MjA=","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Duplicate","name":"Duplicate","color":"d4c5f9","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-06-05T09:10:46Z","updated_at":"2018-06-06T05:17:18Z","closed_at":"2018-06-06T05:17:09Z","author_association":"NONE","body":"### Expected and Actual Behavior\r\n\r\n> **Describe what you are trying to achieve and what goes wrong.**\r\nTrying to do multi-language redirect like an wordpress.\r\n\r\nsteps:\r\nsite.com/ => site.com/ (saved `en` to cookies)\r\nsite.com/es/ => site.com/es/ (saved `es` to cookies)\r\nsite.com/ => site.com/es/ (got from cookies)\r\nsite.com/en/ => site.com/ (saved `en` to cookies)\r\nsite.com/es/ => site.com/es/ (saved `es` to cookies)\r\nsite.com/fr/ => site.com/fr/ (saved `fr` to cookies)\r\n\r\nFeature:\r\nYou can directly set language in URL but if you didn't set it - it try to remember or select your browser like language.\r\n\r\nWhen going to /en/test/ if `es` was saved - got\r\n```\r\nFatal error: Uncaught Error: Access to undeclared static property: Phalcon\\Di::$_default in D:\\OSPanel\\domains\\phalcon\\app\\application.php\r\n```\r\nSeveral refresh page solving problem but my client will be scared of that.\r\n\r\n> Provide minimal script to reproduce the issue\r\n\r\n```php\r\n// @ routes.php\r\n$url_prefix = '{language:(/[a-z]{2})?}';\r\n$fn_language_convert = function ($v) {\r\n  return preg_match('#[a-z]{2}#', $var = ltrim($v, '/'))\r\n    ? $var\r\n    : ''\r\n  ;\r\n};\r\n\r\n$router->addGet($url_prefix . '/test/', [\r\n  'controller' => 'catalog',\r\n  'action' => 'part',\r\n])\r\n  ->convert('language', $fn_language_convert)\r\n  ->setName('part');\r\n\r\n// @ application.php\r\n$di->setShared('dispatcher', function () {\r\n  $eventsManager = $this->getShared('eventsManager');\r\n  $eventsManager->attach('dispatch:beforeExecuteRoute', function ($e, $di, $exception) {\r\n    $languages = $this->getShared('languages'); // my own module\r\n    $response = $this->getShared('response');\r\n    $view = $this->getShared('view');\r\n    $url = $this->getShared('url');\r\n\r\n    $default_lang = $languages->getDefaultLang(); // from database\r\n    $current_lang = $languages->getLang(); // from cookie/browser/database queued\r\n    $url_lang = $di->getParam('language');\r\n\r\n    // check redirect\r\n    if ($url_lang) {\r\n      $languages->setLang($url_lang); // save to cookie, clear NativeArray\r\n      if ($url_lang !== $default_lang) return;\r\n\r\n      // redirect\r\n      // user is coming to url /en/page having `en` in cookies -> will remove /en from url\r\n      $args = $di->getParams();\r\n      $args['for'] = $di->getActionName();\r\n      $args['language'] = '';\r\n      // unset($args['language']);\r\n\r\n      $response->redirect($url->get(\r\n        $args\r\n        // null,\r\n        // true,\r\n        // rtrim($url->getBaseUri(), '/')\r\n      ))->send();\r\n      exit;\r\n\r\n    } else {\r\n      if ($current_lang === $default_lang) return;\r\n      $languages->setLang($current_lang); // save to cookie, clear NativeArray\r\n\r\n      // redirect\r\n      // user is coming with default language but previously observed in spanish -> will redirect to spanish (need url to be changed)\r\n      $args = $di->getParams();\r\n      $args['for'] = $di->getActionName();\r\n      $args['language'] = $current_lang;\r\n\r\n      $response->redirect($url->get($args))->send();\r\n      exit;\r\n\r\n    }\r\n  });\r\n\r\n  $dispatcher = new Dispatcher();\r\n  $dispatcher->setEventsManager($eventsManager);\r\n\r\n  return $dispatcher;\r\n});\r\n```\r\n\r\n### Details\r\n\r\n* Phalcon version: (`php --ri phalcon`) 3.3.2\r\n* PHP Version: (`php -v`) 7.2 ts\r\n* Operating System: win10\r\n* Installation type: DLL - installing via package manager\r\n* Server: Apache","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13384","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13384/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13384/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13384/events","html_url":"https://github.com/phalcon/cphalcon/issues/13384","id":325351539,"node_id":"MDU6SXNzdWUzMjUzNTE1Mzk=","number":13384,"title":"Model::getChangedFields() mark fields as changed that not really changed","user":{"login":"topotru","id":6192218,"node_id":"MDQ6VXNlcjYxOTIyMTg=","avatar_url":"https://avatars1.githubusercontent.com/u/6192218?v=4","gravatar_id":"","url":"https://api.github.com/users/topotru","html_url":"https://github.com/topotru","followers_url":"https://api.github.com/users/topotru/followers","following_url":"https://api.github.com/users/topotru/following{/other_user}","gists_url":"https://api.github.com/users/topotru/gists{/gist_id}","starred_url":"https://api.github.com/users/topotru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/topotru/subscriptions","organizations_url":"https://api.github.com/users/topotru/orgs","repos_url":"https://api.github.com/users/topotru/repos","events_url":"https://api.github.com/users/topotru/events{/privacy}","received_events_url":"https://api.github.com/users/topotru/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-22T15:37:45Z","updated_at":"2018-05-22T20:04:41Z","closed_at":"2018-05-22T20:04:36Z","author_association":"NONE","body":"> Questions should go to https://forum.phalconphp.com\r\n> Documentation issues should go to https://github.com/phalcon/docs/issues\r\n\r\n### Expected and Actual Behavior\r\n\r\n> **Describe what you are trying to achieve and what goes wrong.**\r\n\r\nSnapshotData holds integer values as strings.\r\nWe can see it on debug dumps in beforeValidationOnUpdate method\r\n\r\n```php\r\n    public function beforeValidationOnUpdate()\r\n    {\r\n        if ($this->hasChanged()) {\r\n            echo 'toArray:<pre>', var_dump($this->toArray()), '</pre>';\r\n            echo 'getChangedFields:<pre>', var_dump($this->getChangedFields()), '</pre>';\r\n            echo 'getSnapshotData:<pre>', var_dump($this->getSnapshotData()), '</pre>';\r\n            $this->setUpdatedAt(new DateTime());\r\n        }\r\n    }\r\n```\r\n\r\nOutput\r\n```php\r\ntoArray:\r\narray(14) {\r\n  [\"id\"]=>\r\n  string(1) \"1\"\r\n  [\"subject_id\"]=>\r\n  int(1)\r\n  [\"status\"]=>\r\n  int(1)\r\n  [\"host\"]=>\r\n  string(10) \"host.example\"\r\n  [\"created_at\"]=>\r\n  string(19) \"2018-02-16 22:02:06\"\r\n  [\"updated_at\"]=>\r\n  string(19) \"2018-05-22 16:54:05\"\r\n}\r\n\r\ngetChangedFields:\r\narray(3) {\r\n  [0]=>\r\n  string(10) \"subject_id\"\r\n  [2]=>\r\n  string(6) \"status\"\r\n}\r\n\r\ngetSnapshotData:\r\narray(14) {\r\n  [\"id\"]=>\r\n  string(1) \"1\"\r\n  [\"subject_id\"]=>\r\n  string(1) \"1\"\r\n  [\"status\"]=>\r\n  string(1) \"1\"\r\n  [\"host\"]=>\r\n  string(10) \"host.example\"\r\n  [\"created_at\"]=>\r\n  string(19) \"2018-02-16 22:02:06\"\r\n  [\"updated_at\"]=>\r\n  string(19) \"2018-05-22 16:54:05\"\r\n}\r\n```\r\n\r\nI think this because  of a strict comparison (Identical) of the values here https://github.com/phalcon/cphalcon/blob/4b37bdfaf277b4493532e5ead1dfc9449fe3ed17/phalcon/mvc/model.zep#L4116\r\n\r\nsolutions is: \r\n1. types cast in SnapshotData depends on ModelsMetaData\r\n2. non-strict (equals) comparsion\r\n\r\n### Details\r\n\r\n* Phalcon version: (`php --ri phalcon`)\r\nWeb framework delivered as a C-extension for PHP\r\nphalcon => enabled\r\nAuthor => Phalcon Team and contributors\r\nVersion => 3.3.2\r\nBuild Date => Mar  7 2018 08:47:22\r\nPowered by Zephir => Version 0.10.7\r\nDirective => Local Value => Master Value\r\nphalcon.db.escape_identifiers => On => On\r\nphalcon.db.force_casting => Off => Off\r\nphalcon.orm.events => On => On\r\nphalcon.orm.virtual_foreign_keys => On => On\r\nphalcon.orm.column_renaming => On => On\r\nphalcon.orm.not_null_validations => On => On\r\nphalcon.orm.exception_on_failed_save => Off => Off\r\nphalcon.orm.enable_literals => On => On\r\nphalcon.orm.late_state_binding => Off => Off\r\nphalcon.orm.enable_implicit_joins => On => On\r\nphalcon.orm.cast_on_hydrate => Off => Off\r\nphalcon.orm.ignore_unknown_columns => Off => Off\r\nphalcon.orm.update_snapshot_on_save => On => On\r\nphalcon.orm.disable_assign_setters => Off => Off\r\n\r\n* PHP Version: (`php -v`)\r\nPHP 7.2.0 (cli) (built: Nov 28 2017 23:48:49) ( ZTS MSVC15 (Visual C++ 2017) x64 )\r\nCopyright (c) 1997-2017 The PHP Group\r\nZend Engine v3.2.0, Copyright (c) 1998-2017 Zend Technologies\r\n\r\n* Operating System: windows 10 pro\r\n* Installation type: dll\r\n* Zephir version (if any): -\r\n* Server: Nginx\r\n* Other related info (Database, table schema): MySQL 5.7\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13380","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13380/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13380/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13380/events","html_url":"https://github.com/phalcon/cphalcon/issues/13380","id":323474082,"node_id":"MDU6SXNzdWUzMjM0NzQwODI=","number":13380,"title":"Add convert method to the Phalcon\\Mvc\\Router\\RouteInterface","user":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"labels":[{"id":648645402,"node_id":"MDU6TGFiZWw2NDg2NDU0MDI=","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Breaks%20BC","name":"Breaks BC","color":"d93f0b","default":false},{"id":13573146,"node_id":"MDU6TGFiZWwxMzU3MzE0Ng==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/New%20Feature%20Request","name":"New Feature Request","color":"0052cc","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/phalcon/cphalcon/milestones/21","html_url":"https://github.com/phalcon/cphalcon/milestone/21","labels_url":"https://api.github.com/repos/phalcon/cphalcon/milestones/21/labels","id":1912191,"node_id":"MDk6TWlsZXN0b25lMTkxMjE5MQ==","number":21,"title":"4.0.0","description":"","creator":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"open_issues":90,"closed_issues":14,"state":"open","created_at":"2016-07-29T16:36:07Z","updated_at":"2018-06-06T05:13:15Z","due_on":null,"closed_at":null},"comments":1,"created_at":"2018-05-16T05:31:08Z","updated_at":"2018-05-31T06:15:24Z","closed_at":"2018-05-31T06:15:24Z","author_association":"MEMBER","body":"The documentation for `Phalcon\\Mvc\\Router\\Group::add` states, that `add()` on a group would return an instance of `RouteInterface` but it really returns an instance of `Route`.\r\n\r\nAfter calling `add` we shouldn't call `convert` because `convert` is a `Route` member but not `RouteInterface`.\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13379","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13379/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13379/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13379/events","html_url":"https://github.com/phalcon/cphalcon/issues/13379","id":323465669,"node_id":"MDU6SXNzdWUzMjM0NjU2Njk=","number":13379,"title":"Why does not Crypt check hmac?","user":{"login":"yejune","id":3735511,"node_id":"MDQ6VXNlcjM3MzU1MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/3735511?v=4","gravatar_id":"","url":"https://api.github.com/users/yejune","html_url":"https://github.com/yejune","followers_url":"https://api.github.com/users/yejune/followers","following_url":"https://api.github.com/users/yejune/following{/other_user}","gists_url":"https://api.github.com/users/yejune/gists{/gist_id}","starred_url":"https://api.github.com/users/yejune/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yejune/subscriptions","organizations_url":"https://api.github.com/users/yejune/orgs","repos_url":"https://api.github.com/users/yejune/repos","events_url":"https://api.github.com/users/yejune/events{/privacy}","received_events_url":"https://api.github.com/users/yejune/received_events","type":"User","site_admin":false},"labels":[{"id":13573114,"node_id":"MDU6TGFiZWwxMzU3MzExNA==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Bug%20-%20Low","name":"Bug - Low","color":"e102d8","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/phalcon/cphalcon/milestones/31","html_url":"https://github.com/phalcon/cphalcon/milestone/31","labels_url":"https://api.github.com/repos/phalcon/cphalcon/milestones/31/labels","id":3214274,"node_id":"MDk6TWlsZXN0b25lMzIxNDI3NA==","number":31,"title":"3.4.x","description":"","creator":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":22,"state":"closed","created_at":"2018-03-24T15:58:59Z","updated_at":"2018-06-01T06:29:32Z","due_on":null,"closed_at":"2018-06-01T06:29:32Z"},"comments":3,"created_at":"2018-05-16T04:33:28Z","updated_at":"2018-05-28T05:53:36Z","closed_at":"2018-05-28T05:53:36Z","author_association":"NONE","body":"Why does not Crypt check hmac?\r\n\r\nWhen decrypting an encrypted character, entering a different key will return an incorrect decryption character.\r\n\r\n```php\r\n $text = 'This is a secret text';\r\n\r\n $key       = 'le password';\r\n $encrypted = $crypt->encrypt($text, $key);\r\n\r\n $key       = 'le password2';\r\n echo $crypt->decrypt($encrypted, $key);\r\n```\r\n\r\nresult:\r\n```\r\n���0�Pz�@��/x��\u0003'�t��\r\n```\r\n\r\nIf hmac is checked and is not valid, an empty string must be returned.\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13377","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13377/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13377/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13377/events","html_url":"https://github.com/phalcon/cphalcon/issues/13377","id":323037802,"node_id":"MDU6SXNzdWUzMjMwMzc4MDI=","number":13377,"title":"php 5.4 not longer supported,but the version of php is 7 in my centos 7.","user":{"login":"kg-web","id":20922287,"node_id":"MDQ6VXNlcjIwOTIyMjg3","avatar_url":"https://avatars2.githubusercontent.com/u/20922287?v=4","gravatar_id":"","url":"https://api.github.com/users/kg-web","html_url":"https://github.com/kg-web","followers_url":"https://api.github.com/users/kg-web/followers","following_url":"https://api.github.com/users/kg-web/following{/other_user}","gists_url":"https://api.github.com/users/kg-web/gists{/gist_id}","starred_url":"https://api.github.com/users/kg-web/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kg-web/subscriptions","organizations_url":"https://api.github.com/users/kg-web/orgs","repos_url":"https://api.github.com/users/kg-web/repos","events_url":"https://api.github.com/users/kg-web/events{/privacy}","received_events_url":"https://api.github.com/users/kg-web/received_events","type":"User","site_admin":false},"labels":[{"id":27846498,"node_id":"MDU6TGFiZWwyNzg0NjQ5OA==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Not%20a%20bug","name":"Not a bug","color":"02e10c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-15T01:44:35Z","updated_at":"2018-05-23T05:09:36Z","closed_at":"2018-05-23T05:09:28Z","author_association":"NONE","body":"php 5.4 not longer supported,but the version of php is 7 in my centos 7.","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13376","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13376/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13376/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13376/events","html_url":"https://github.com/phalcon/cphalcon/issues/13376","id":322437557,"node_id":"MDU6SXNzdWUzMjI0Mzc1NTc=","number":13376,"title":"Phalcon can only be compiled with zephir build on Ubuntu 18.04","user":{"login":"dschissler","id":3968727,"node_id":"MDQ6VXNlcjM5Njg3Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/3968727?v=4","gravatar_id":"","url":"https://api.github.com/users/dschissler","html_url":"https://github.com/dschissler","followers_url":"https://api.github.com/users/dschissler/followers","following_url":"https://api.github.com/users/dschissler/following{/other_user}","gists_url":"https://api.github.com/users/dschissler/gists{/gist_id}","starred_url":"https://api.github.com/users/dschissler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dschissler/subscriptions","organizations_url":"https://api.github.com/users/dschissler/orgs","repos_url":"https://api.github.com/users/dschissler/repos","events_url":"https://api.github.com/users/dschissler/events{/privacy}","received_events_url":"https://api.github.com/users/dschissler/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-11T21:17:50Z","updated_at":"2018-05-24T22:04:52Z","closed_at":"2018-05-24T22:04:52Z","author_association":"CONTRIBUTOR","body":"Installation hangs on Ubuntu 18.04 when compiling from tarball using the `./install` method.  However it does compile with `zephir builid` using latest zephir.  I tested that `Phalcon\\Version::get()` works.\r\n\r\nUbuntu 18.04 uses PHP 7.2 and GCC 7.3.0.","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13375","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13375/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13375/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13375/events","html_url":"https://github.com/phalcon/cphalcon/issues/13375","id":322393148,"node_id":"MDU6SXNzdWUzMjIzOTMxNDg=","number":13375,"title":"Phalcon Cache\\Backend\\Redis SADD does not use \"_PHCR\" Prefix","user":{"login":"chriskyndrid","id":34988129,"node_id":"MDQ6VXNlcjM0OTg4MTI5","avatar_url":"https://avatars3.githubusercontent.com/u/34988129?v=4","gravatar_id":"","url":"https://api.github.com/users/chriskyndrid","html_url":"https://github.com/chriskyndrid","followers_url":"https://api.github.com/users/chriskyndrid/followers","following_url":"https://api.github.com/users/chriskyndrid/following{/other_user}","gists_url":"https://api.github.com/users/chriskyndrid/gists{/gist_id}","starred_url":"https://api.github.com/users/chriskyndrid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chriskyndrid/subscriptions","organizations_url":"https://api.github.com/users/chriskyndrid/orgs","repos_url":"https://api.github.com/users/chriskyndrid/repos","events_url":"https://api.github.com/users/chriskyndrid/events{/privacy}","received_events_url":"https://api.github.com/users/chriskyndrid/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-11T18:32:30Z","updated_at":"2018-05-11T19:23:13Z","closed_at":"2018-05-11T19:21:35Z","author_association":"NONE","body":"### Expected and Actual Behavior\r\n\r\nWhen utilizing a statsKey, Phalcon will automatically issue an \"SADD\" to add member to a given set defined by the value configured in 'statsKey'. The given member references a storage key in Redis for a given SET request. However, the SADD transaction lacks Phalcon's automatically assigned prefix '_PHCR'. When issuing a queryKeys() request, Phalcon will correctly return a list of associated keys. However, because the SADD request lacked the \"_PHCR\" prefix, the keys are returned improperly and taking followup action on those(such as removing form cache) keys, requires the manual assignment of the \"_PHCR\" prefix. \r\n\r\nGiven that \"_PHCR\" appears to be an immutable value, I would propose that you automatically assign the \"_PHCR\" prefix to the SADD request. \r\n\r\n### Details\r\n\r\nWeb framework delivered as a C-extension for PHP\r\nphalcon => enabled\r\nAuthor => Phalcon Team and contributors\r\nVersion => 3.3.1\r\nBuild Date => Jan 10 2018 00:23:47\r\nPowered by Zephir => Version 0.10.7-2917ebe8ae\r\n\r\nDirective => Local Value => Master Value\r\nphalcon.db.escape_identifiers => On => On\r\nphalcon.db.force_casting => Off => Off\r\nphalcon.orm.events => On => On\r\nphalcon.orm.virtual_foreign_keys => On => On\r\nphalcon.orm.column_renaming => On => On\r\nphalcon.orm.not_null_validations => On => On\r\nphalcon.orm.exception_on_failed_save => Off => Off\r\nphalcon.orm.enable_literals => On => On\r\nphalcon.orm.late_state_binding => Off => Off\r\nphalcon.orm.enable_implicit_joins => On => On\r\nphalcon.orm.cast_on_hydrate => Off => Off\r\nphalcon.orm.ignore_unknown_columns => Off => Off\r\nphalcon.orm.update_snapshot_on_save => On => On\r\nphalcon.orm.disable_assign_setters => Off => Off\r\n\r\nPHP 7.1.13 (cli) (built: Jan  4 2018 15:22:08) ( NTS )\r\nCopyright (c) 1997-2017 The PHP Group\r\nZend Engine v3.1.0, Copyright (c) 1998-2017 Zend Technologies\r\n    with the ionCube PHP Loader (enabled) + Intrusion Protection from ioncube24.com (unconfigured) v10.1.0, Copyright (c) 2002-2017, by ionCube Ltd.\r\n    with Zend OPcache v7.1.13, Copyright (c) 1999-2017, by Zend Technologies\r\n    with Xdebug v2.5.5, Copyright (c) 2002-2017, by Derick Rethans","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13374","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13374/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13374/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13374/events","html_url":"https://github.co
8000
m/phalcon/cphalcon/issues/13374","id":322225945,"node_id":"MDU6SXNzdWUzMjIyMjU5NDU=","number":13374,"title":"PHP gets segfault error when loading phalcon.so in  fpm-pool.conf","user":{"login":"zishon","id":9378469,"node_id":"MDQ6VXNlcjkzNzg0Njk=","avatar_url":"https://avatars2.githubusercontent.com/u/9378469?v=4","gravatar_id":"","url":"https://api.github.com/users/zishon","html_url":"https://github.com/zishon","followers_url":"https://api.github.com/users/zishon/followers","following_url":"https://api.github.com/users/zishon/following{/other_user}","gists_url":"https://api.github.com/users/zishon/gists{/gist_id}","starred_url":"https://api.github.com/users/zishon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zishon/subscriptions","organizations_url":"https://api.github.com/users/zishon/orgs","repos_url":"https://api.github.com/users/zishon/repos","events_url":"https://api.github.com/users/zishon/events{/privacy}","received_events_url":"https://api.github.com/users/zishon/received_events","type":"User","site_admin":false},"labels":[{"id":19592025,"node_id":"MDU6TGFiZWwxOTU5MjAyNQ==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Need%20information","name":"Need information","color":"ededed","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-11T09:15:51Z","updated_at":"2018-05-30T06:08:23Z","closed_at":"2018-05-30T06:08:22Z","author_association":"NONE","body":"> Questions should go to https://forum.phalconphp.com\r\n> Documentation issues should go to https://github.com/phalcon/docs/issues\r\n\r\n### Expected and Actual Behavior\r\n\r\n> **Describe what you are trying to achieve and what goes wrong.**\r\n\r\nWhat I want was:\r\nDefined several fpm pool，and load phalcon.so in fpm-{pool}.conf , such as:\r\n\r\n```ini\r\n[test_project]\r\nuser = nobody\r\ngroup = nobody\r\n\r\n;listen = /tmp/fpm.$pool.sock\r\nlisten = 127.0.0.1:9000\r\n\r\n;pm = static\r\npm = dynamic\r\npm.max_children = 8\r\npm.start_servers = 4\r\npm.min_spare_servers = 4\r\npm.max_spare_servers = 8\r\npm.max_requests = 100\r\nslowlog = /logs/php/$pool.log.slow\r\nrequest_slowlog_timeout = 3\r\nrequest_terminate_timeout = 120\r\nphp_admin_value[error_log] = /logs/php/fpm-php.$pool.log\r\nphp_admin_flag[log_errors] = on\r\nphp_admin_value[open_basedir] = /srv/www/test_project/:/tmp/\r\nphp_admin_value[extension] = \"phalcon.so\"\r\n```\r\n\r\nafter configured, I wrote a simple testAction()  which echo \"hello,world!\".\r\nThen I request the action from browser,  when I request it five times, for the fifth request, I got an 502 from nginx.\r\nSame time, an system error occured just like below：\r\n\r\n> Provide output if related. Provide coredump if any. Use https://github.com/phalcon/cphalcon/wiki/Generating-a-backtrace as reference\r\n\r\nsystem occured error ：   php-fpm[471]: segfault at 20600000001 ip 0000020600000001 sp 00007ffd54d3cd28 error 14 in phalcon.so[7fe51493a000+481000]\r\n\r\n```php\r\n// paste output here\r\n```\r\n> Provide minimal script to reproduce the issue\r\n\r\n```php\r\n// paste code\r\n```\r\n### Details\r\n\r\n* Phalcon version: 3.3.2\r\n* PHP Version: 7.1.6\r\n* Operating System: Centos7\r\n* Installation type: Compiling from source\r\n* Zephir version (if any):\r\n* Server: Nginx\r\n* Other related info (Database, table schema):  none\r\n\r\nIf necessary, I would like to provide the fully source code of the test project.\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13373","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13373/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13373/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13373/events","html_url":"https://github.com/phalcon/cphalcon/issues/13373","id":322205423,"node_id":"MDU6SXNzdWUzMjIyMDU0MjM=","number":13373,"title":"Uncaught Error: Access to undeclared static property: Phalcon\\Di::$_default","user":{"login":"leslie5803","id":9336471,"node_id":"MDQ6VXNlcjkzMzY0NzE=","avatar_url":"https://avatars0.githubusercontent.com/u/9336471?v=4","gravatar_id":"","url":"https://api.github.com/users/leslie5803","html_url":"https://github.com/leslie5803","followers_url":"https://api.github.com/users/leslie5803/followers","following_url":"https://api.github.com/users/leslie5803/following{/other_user}","gists_url":"https://api.github.com/users/leslie5803/gists{/gist_id}","starred_url":"https://api.github.com/users/leslie5803/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leslie5803/subscriptions","organizations_url":"https://api.github.com/users/leslie5803/orgs","repos_url":"https://api.github.com/users/leslie5803/repos","events_url":"https://api.github.com/users/leslie5803/events{/privacy}","received_events_url":"https://api.github.com/users/leslie5803/received_events","type":"User","site_admin":false},"labels":[{"id":356243820,"node_id":"MDU6TGFiZWwzNTYyNDM4MjA=","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Duplicate","name":"Duplicate","color":"d4c5f9","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-11T08:03:23Z","updated_at":"2018-05-11T08:12:50Z","closed_at":"2018-05-11T08:12:50Z","author_association":"NONE","body":"there was an ajax took a long time because php executed allowed memory size exhausted, bofore allowed memory size exhausted throwed refresh the web page, and u'll get the follow error every time:\r\n\r\n```\r\nFatal error: Uncaught Error: Access to undeclared static property: Phalcon\\Di::$_default \r\nin E:\\sites\\audi\\config\\services.php:19\r\nStack trace:\r\n#0 [internal function]: Phalcon\\Di->__construct() \r\n#1 E:\\sites\\audi\\config\\services.php(19): Phalcon\\Di\\FactoryDefault->__construct() \r\n#2 E:\\sites\\audi\\public\\index.php(26): require('E:\\\\sites\\\\audi\\\\c...') \r\n#3 {main} \r\n\r\nNext Error: Access to undeclared static property: Phalcon\\Di::$_default \r\nin E:\\sites\\audi\\config\\services.php:19 \r\nStack trace: \r\n#0 [internal function]: Phalcon\\Di->__construct() \r\n#1 E:\\sites\\audi\\config\\services.php(19): Phalcon\\Di\\FactoryDefault->__construct() \r\n#2 E:\\sites\\audi\\public\\index.php(26): require('E:\\\\sites\\\\audi\\\\c...') \r\n#3 {main} thrown in E:\\sites\\audi\\config\\services.php on line 19\r\n```\r\n\r\nmy enviroment is wampserver, wamp version is 3.1.3 64bit","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13372","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13372/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13372/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13372/events","html_url":"https://github.com/phalcon/cphalcon/issues/13372","id":321871495,"node_id":"MDU6SXNzdWUzMjE4NzE0OTU=","number":13372,"title":"before middleware can't stop route","user":{"login":"ChristopherWalz","id":962334,"node_id":"MDQ6VXNlcjk2MjMzNA==","avatar_url":"https://avatars1.githubusercontent.com/u/962334?v=4","gravatar_id":"","url":"https://api.github.com/users/ChristopherWalz","html_url":"https://github.com/ChristopherWalz","followers_url":"https://api.github.com/users/ChristopherWalz/followers","following_url":"https://api.github.com/users/ChristopherWalz/following{/other_user}","gists_url":"https://api.github.com/users/ChristopherWalz/gists{/gist_id}","starred_url":"https://api.github.com/users/ChristopherWalz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChristopherWalz/subscriptions","organizations_url":"https://api.github.com/users/ChristopherWalz/orgs","repos_url":"https://api.github.com/users/ChristopherWalz/repos","events_url":"https://api.github.com/users/ChristopherWalz/events{/privacy}","received_events_url":"https://api.github.com/users/ChristopherWalz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-10T09:43:03Z","updated_at":"2018-05-28T22:18:47Z","closed_at":"2018-05-28T22:18:47Z","author_association":"NONE","body":"The middleware is not stopping the execution of the route, as expected.\r\n\r\n```\r\n<?php\r\nuse App\\Middleware\\AuthMiddleware;\r\nuse App\\Models\\Games;\r\nuse Phalcon\\Http\\Response;\r\n\r\nrequire_once 'bootstrap.php';\r\n\r\n$app->before(new AuthMiddleware());\r\n\r\n$app->get('/games', function () use ($app) {\r\n\treturn $app->response->setJsonContent(Games::find()->toArray());\r\n});\r\n```\r\n\r\n**bootstrap.php**\r\n```\r\n<?php\r\nuse Phalcon\\Di\\FactoryDefault;\r\nuse Phalcon\\Mvc\\Micro;\r\nuse Phalcon\\Db\\Adapter\\Pdo\\Mysql;\r\n\r\n// register namespace for models\r\n$loader = new \\Phalcon\\Loader();\r\n$loader->registerNamespaces(\r\n\tarray(\r\n       'App\\Models' => __DIR__.'/models',\r\n       'App\\Middleware' => __DIR__.'/middleware',\r\n    )\r\n)->register();\r\n\r\n$di = new FactoryDefault();\r\n\r\n// Set up the database service\r\n$di->set(\r\n    'db',\r\n    function () {\r\n        return new Mysql(\r\n            [\r\n                'host'     => 'x',\r\n                'username' => 'x',\r\n                'password' => 'x',\r\n                'dbname'   => 'x'\r\n            ]\r\n        );\r\n    }\r\n);\r\n\r\n$app = new Micro($di);\r\n```\r\n\r\n```\r\n<?php\r\nnamespace App\\Middleware;\r\nuse Phalcon\\Mvc\\Micro\\MiddlewareInterface;\r\n\r\nclass AuthMiddleware implements MiddlewareInterface{\r\n\tpublic function call(\\Phalcon\\Mvc\\Micro $app) {\r\n\t\t// this should stop the routes\r\n\t\treturn false;\r\n\t}\r\n}\r\n```\r\n\r\n### Details\r\n\r\n* Phalcon version: (`php --ri phalcon`) 3.3.2\r\n* PHP Version: (`php -v`) PHP 7.0.28-0ubuntu0.16.04.1 (cli) ( NTS )\r\n* Operating System: Ubuntu 16\r\n* Installation type: installing via package manager\r\n* Server: Nginx","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13371","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13371/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13371/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13371/events","html_url":"https://github.com/phalcon/cphalcon/issues/13371","id":321610994,"node_id":"MDU6SXNzdWUzMjE2MTA5OTQ=","number":13371,"title":"toArray() not called on models from Phalcon\\Mvc\\Model\\Resultset\\Simple","user":{"login":"five07","id":612469,"node_id":"MDQ6VXNlcjYxMjQ2OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/612469?v=4","gravatar_id":"","url":"https://api.github.com/users/five07","html_url":"https://github.com/five07","followers_url":"https://api.github.com/users/five07/followers","following_url":"https://api.github.com/users/five07/following{/other_user}","gists_url":"https://api.github.com/users/five07/gists{/gist_id}","starred_url":"https://api.github.com/users/five07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/five07/subscriptions","organizations_url":"https://api.github.com/users/five07/orgs","repos_url":"https://api.github.com/users/five07/repos","events_url":"https://api.github.com/users/five07/events{/privacy}","received_events_url":"https://api.github.com/users/five07/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-09T15:10:48Z","updated_at":"2018-05-09T15:32:47Z","closed_at":"2018-05-09T15:29:44Z","author_association":"NONE","body":"### Expected and Actual Behavior\r\n\r\nWhen fetching a Resultset\\Simple using Model::find(), calling toArray() on the resultset does not call the toArray() method on the instances.\r\n\r\nExample:\r\n\r\n```php\r\n\r\nclass Test {\r\n  public $foo;\r\n\r\n  public function toArray($columns = null) {\r\n    $data = parent::toArray($columns);\r\n    // transform some data\r\n    $data['foo'] = strtolower($data['foo']);\r\n    return $data;\r\n  }\r\n}\r\n\r\n// When we iterate in our code:\r\n\r\n$items = Test::find(); // $items is typeof Resultset\\Simple\r\nforeach ($items as $item) {\r\n  // $item is typeof \\Test\r\n  $output[] = $item->toArray(); // the Test::toArray() method is called.\r\n}\r\n\r\n// When we ask Resultset\\Simple to iterate\r\n\r\n$items = Test::find(); // $items is typeof Resultset\\Simple\r\n$output = $items->toArray();  // the Test::toArray() method is NOT called on each instance.\r\n```\r\n\r\n### Details\r\n\r\n* Phalcon version: 3.3.0\r\n* PHP Version: 7.2.2\r\n* Operating System: all\r\n* Installation type: Compiled from source\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13360","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13360/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13360/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13360/events","html_url":"https://github.com/phalcon/cphalcon/issues/13360","id":318680563,"node_id":"MDU6SXNzdWUzMTg2ODA1NjM=","number":13360,"title":"[NFR] Improve Phalcon\\Autoloader speed","user":{"login":"dugwood","id":5517743,"node_id":"MDQ6VXNlcjU1MTc3NDM=","avatar_url":"https://avatars3.githubusercontent.com/u/5517743?v=4","gravatar_id":"","url":"https://api.github.com/users/dugwood","html_url":"https://github.com/dugwood","followers_url":"https://api.github.com/users/dugwood/followers","following_url":"https://api.github.com/users/dugwood/following{/other_user}","gists_url":"https://api.github.com/users/dugwood/gists{/gist_id}","starred_url":"https://api.github.com/users/dugwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dugwood/subscriptions","organizations_url":"https://api.github.com/users/dugwood/orgs","repos_url":"https://api.github.com/users/dugwood/repos","events_url":"https://api.github.com/users/dugwood/events{/privacy}","received_events_url":"https://api.github.com/users/dugwood/received_events","type":"User","site_admin":false},"labels":[{"id":13573146,"node_id":"MDU6TGFiZWwxMzU3MzE0Ng==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/New%20Feature%20Request","name":"New Feature Request","color":"0052cc","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/phalcon/cphalcon/milestones/31","html_url":"https://github.com/phalcon/cphalcon/milestone/31","labels_url":"https://api.github.com/repos/phalcon/cphalcon/milestones/31/labels","id":3214274,"node_id":"MDk6TWlsZXN0b25lMzIxNDI3NA==","number":31,"title":"3.4.x","description":"","creator":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":22,"state":"closed","created_at":"2018-03-24T15:58:59Z","updated_at":"2018-06-01T06:29:32Z","due_on":null,"closed_at":"2018-06-01T06:29:32Z"},"comments":2,"created_at":"2018-04-29T00:56:52Z","updated_at":"2018-04-30T08:17:10Z","closed_at":"2018-04-30T08:17:10Z","author_association":"CONTRIBUTOR","body":"### Expected and Actual Behavior\r\n\r\nPhalcon\\Autoloader is slow because the `is_file()` test is slow. With a lot of files, this can add a serious amount of time, especially if the whole PHP run is small.\r\n\r\nSee #10472 for instance, and specifically comment: https://github.com/phalcon/cphalcon/issues/10472#issuecomment-384090810\r\n\r\nReproduce script:\r\n```php\r\n$time = -1 * microtime(true);\r\ninclude __DIR__.'/../library/ModelParameters.php';\r\ninclude __DIR__.'/../models/Model.php';\r\ninclude __DIR__.'/../models/Promotion.php';\r\n$files = 3;\r\nforeach (glob(__DIR__.'/../models/*.php') as $file)\r\n{\r\n\t$class = 'MyNamespace\\\\Models\\\\'.substr(basename($file), 0, -4);\r\n\tif ($class === 'MyNamespace\\\\Models\\\\Model' || $class === 'MyNamespace\\\\Models\\\\Promotion')\r\n\t{\r\n\t\tcontinue;\r\n\t}\r\n\tinclude $file;\r\n\t$files++;\r\n}\r\necho ($time + microtime(true)) * 1000, ' - files: '.$files;\r\n```\r\n=> for 120 files\r\n=> first load: about 120ms\r\n=> next loads: **4-8ms** (opcache must play a part here)\r\n\r\n```php\r\n$time = -1 * microtime(true);\r\n$loader = new Loader();\r\n$loader->registerNamespaces([\r\n\t'MyNamespace\\Controllers' => __DIR__.'/controllers/',\r\n\t'MyNamespace\\Backend\\Controllers' => __DIR__.'/../backend/controllers/',\r\n\t'MyNamespace\\Frontend\\Controllers' => __DIR__.'/../frontend/controllers/',\r\n\t'MyNamespace\\Models' => __DIR__.'/../models/',\r\n\t'MyNamespace\\Library' => __DIR__.'/../library/',\r\n\t'MyNamespace\\Plugins' => __DIR__.'/../plugins/',\r\n]);\r\n$loader->register();\r\necho ($time + microtime(true)) * 1000;\r\n```\r\n=> takes less than a millisecond as expected\r\n\r\n```php\r\n$time = -1 * microtime(true);\r\n$files = 2;\r\nforeach (glob(__DIR__.'/../models/*.php') as $file)\r\n{\r\n\t$class = 'MyNamespace\\\\Models\\\\'.substr(basename($file), 0, -4);\r\n\tclass_exists($class);\r\n\t$files++;\r\n}\r\necho ($time + microtime(true)) * 1000, ' - files: '.$files;\r\n```\r\n=> for 121 files\r\n=> first load: 250ms\r\n=> next loads: **100-150ms** (about 1ms per loaded class)\r\n\r\nThe culprit is the `is_file()` test before including the class: https://github.com/phalcon/cphalcon/blob/v3.3.2/phalcon/loader.zep#L368\r\n\r\n### Proposed fix\r\nAdd a parameter, either as a new function (`setFileChecking`) or as a third parameter in `registerNamespaces()` (see https://github.com/phalcon/cphalcon/blob/v3.3.2/phalcon/loader.zep#L109), for example `$this->fileChecking`:\r\n - default => `is_file()`\r\n - stream => `stream_resolve_include_path()` (as it seems to be really faster than `is_file()`, but implies some issues if the file is removed from the filesystem)\r\n - none => no file check (you should always have a class file if you load one class, don't you? It's true only if you don't use multiple directories for the same namespace)\r\n\r\n### Details\r\n\r\n* Phalcon version: 3.3.2\r\n* PHP Version: 7.0.27\r\n* Operating System: Linux Debian stable\r\n* Installation type: installing via package manager\r\n* Zephir version (if any): (from package) 0.10.7\r\n* Server: Lighttpd\r\n* Other related info: none","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13355","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13355/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13355/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13355/events","html_url":"https://github.com/phalcon/cphalcon/issues/13355","id":317316544,"node_id":"MDU6SXNzdWUzMTczMTY1NDQ=","number":13355,"title":"Mysterious losing spaces at binding form to model","user":{"login":"MrMaxie","id":3857836,"node_id":"MDQ6VXNlcjM4NTc4MzY=","avatar_url":"https://avatars1.githubusercontent.com/u/3857836?v=4","gravatar_id":"","url":"https://api.github.com/users/MrMaxie","html_url":"https://github.com/MrMaxie","followers_url":"https://api.github.com/users/MrMaxie/followers","following_url":"https://api.github.com/users/MrMaxie/following{/other_user}","gists_url":"https://api.github.com/users/MrMaxie/gists{/gist_id}","starred_url":"https://api.github.com/users/MrMaxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrMaxie/subscriptions","organizations_url":"https://api.github.com/users/MrMaxie/orgs","repos_url":"https://api.github.com/users/MrMaxie/repos","events_url":"https://api.github.com/users/MrMaxie/events{/privacy}","received_events_url":"https://api.github.com/users/MrMaxie/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-24T17:07:38Z","updated_at":"2018-04-24T18:59:26Z","closed_at":"2018-04-24T18:56:54Z","author_association":"NONE","body":"### Expected and Actual Behavior\r\n\r\nI tried to simply save validated form into model. But I have problems with missing spaces in strings. I found out that spaces lost at using `Form::bind();`. To show you my problem I'll use cut source code that (well, doesn't) works. **To be clear: I don't modifying given data, don't use any kind of filters et cetera.**\r\n\r\nFor example I have simplest possible User model, and some action which using some form to validate and save post data into model. I try to set `username` with spaces e.g. my nick `Mr Maxie`. After binding I got `MrMaxie` (without space) in database, after manual adding (using model only) I got valid name `Mr Maxie` (with space).\r\n\r\n```php\r\nclass SomeForm extends Form {\r\n  function initialize() {\r\n    $username = new Text('username');\r\n    // place for validating etc...\r\n    $this->add($username);\r\n  }\r\n}\r\nclass Users extends Model {\r\n  public $id;\r\n  public $username;\r\n  function setUsername($x) {\r\n    var_dump($x);\r\n    // with form binding I got here 'MrMaxie'\r\n    // with manual way I got here 'Mr Maxie'\r\n    $this->username = $x; // just for mimic setting without setter\r\n  }\r\n}\r\nclass SomeController extends Controller {\r\n  function someAction() {\r\n    $form = new SomeForm;\r\n    if($this->request->isPost()) {\r\n      $post = $this->request->getPost();\r\n      $user = new Users;\r\n      $form->bind($post, $user);\r\n      var_dump(\r\n        $post['username'], // valid e.g. 'Mr Maxie'\r\n        $user->username, // invalid e.g. 'MrMaxie'\r\n        $form->getValue('username') // here still valid e.g. 'Mr Maxie'\r\n      );\r\n      $user->save(); // I got in database string without spaces e.g. 'MrMaxie'\r\n    }\r\n  }\r\n  function otherAction() {\r\n    // Manual and working way\r\n    $user = new Users;\r\n    $user->username = 'Mr Maxie';\r\n    $user->save(); // Good value will be saved, with spaces\r\n  }\r\n}\r\n```\r\n\r\nOther place where I got string with lost spaces is Validation process. I tried for example test it using Regex validator from Phalcon:\r\n\r\n```php\r\nclass SomeForm extends Form {\r\n  function initialize() {\r\n    $username = new Text('username');\r\n    $username->addValidators(\r\n      new Regex([\r\n        'pattern' => '/^[^ ]*?([ ][^ ]*?)?$/',\r\n        'message' => 'Invalid username - too many spaces',\r\n      ])\r\n    );\r\n    $this->add($username);\r\n  }\r\n}\r\n```\r\n\r\nAnd well, I can't reach that error (regular expression is valid, I tested it). So I tried to write validator by myself:\r\n\r\n```php\r\nclass RegexValidator extends Validator {\r\n  function validate(Validation $validator, $attribute) {\r\n    // Recommended way to get values:\r\n    // $validator->getValue($attribute); returns string WITHOUT spaces again\r\n    $data = $validator->getData();\r\n    $value = array_key_exists($attribute, $data) ? $data[$attribute] : ''; // here we got valid string...\r\n  }\r\n}\r\n```\r\n\r\nI missed something? I did something wrong or it's really bug? I tried to check code of Phalcon near **Form::bind();** and code looks there death simple and... well.. logic, without any places where that can be happend.\r\n\r\n### Details\r\n\r\n* Phalcon version: 3.3.2\r\n* PHP Version: 5.6.35\r\n* Operating System: Windows\r\n* Installation type: Manual copy/paste and adding line in php.ini\r\n* Server: Nginx","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13346","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13346/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13346/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13346/events","html_url":"https://github.com/phalcon/cphalcon/issues/13346","id":314108394,"node_id":"MDU6SXNzdWUzMTQxMDgzOTQ=","number":13346,"title":"Call to undefined method \u0001::registerautoloaders()","user":{"login":"Niko9911","id":4658966,"node_id":"MDQ6VXNlcjQ2NTg5NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4658966?v=4","gravatar_id":"","url":"https://api.github.com/users/Niko9911","html_url":"https://github.com/Niko9911","followers_url":"https://api.github.com/users/Niko9911/followers","following_url":"https://api.github.com/users/Niko9911/following{/other_user}","gists_url":"https://api.github.com/users/Niko9911/gists{/gist_id}","starred_url":"https://api.github.com/users/Niko9911/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Niko9911/subscriptions","organizations_url":"https://api.github.com/users/Niko9911/orgs","repos_url":"https://api.github.com/users/Niko9911/repos","events_url":"https://api.github.com/users/Niko9911/events{/privacy}","received_events_url":"https://api.github.com/users/Niko9911/received_events","type":"User","site_admin":false},"labels":[{"id":27846498,"node_id":"MDU6TGFiZWwyNzg0NjQ5OA==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Not%20a%20bug","name":"Not a bug","color":"02e10c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-04-13T13:31:27Z","updated_at":"2018-04-17T09:01:24Z","closed_at":"2018-04-17T05:08:27Z","author_association":"CONTRIBUTOR","body":"```\r\n  | Call to undefined method \u0001::registerautoloaders()<br>#0 /home/betapori/public_html/public/index.php(73): Phalcon\\Mvc\\Application-&gt;handle()<br />\r\n-- | --\r\n  | #1 {main}\r\n```\r\n\r\n\r\n```php\r\ntry {\r\n\r\n    // Setup Dependency Injector.\r\n    $di = new Phalcon\\DI\\FactoryDefault();\r\n\r\n    // Include autoloader.\r\n    require STARTUP.DS.'loader.php';\r\n\r\n    // Get configuration.\r\n    /** @noinspection PhpUndefinedMethodInspection */\r\n    $config = $di->getConfig();\r\n\r\n    // Initialize ACL\r\n    \\Purs\\Libs\\Acl::init();\r\n\r\n    // Handle request.\r\n    $application = new Phalcon\\Mvc\\Application($di);\r\n    $application->registerModules(\r\n        [\r\n            'front' => [\r\n                'className' => FrontModule::class,\r\n                'path'      => MODULES.DS.'FrontModule.php',\r\n            ],\r\n            'cms' => [\r\n                'className' => CmsModule::class,\r\n                'path'      => MODULES.DS.'CmsModule.php',\r\n            ],\r\n            'intra' => [\r\n                'className' => IntraModule::class,\r\n                'path'      => MODULES.DS.'IntraModule.php',\r\n            ],\r\n            'api'  => [\r\n                'className' => ApiModule::class,\r\n                'path'      => MODULES.DS.'ApiModule.php',\r\n            ]\r\n        ]\r\n    );\r\n\r\n    echo $application->handle()\r\n        ->getContent();\r\n\r\n} catch (Exception $e) {\r\n\techo $e->getMessage(), '<br>';\r\n\techo nl2br(htmlentities($e->getTraceAsString()));\r\n}\r\n```\r\n\r\n\r\n### Details\r\n\r\n* Phalcon version: 3.3.2\r\n* PHP Version: 7.2.4\r\n* Operating System: CentOS\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13345","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13345/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13345/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13345/events","html_url":"https://github.com/phalcon/cphalcon/issues/13345","id":314078050,"node_id":"MDU6SXNzdWUzMTQwNzgwNTA=","number":13345,"title":"Properties not updating on model events","user":{"login":"marvasDE","id":12934302,"node_id":"MDQ6VXNlcjEyOTM0MzAy","avatar_url":"https://avatars2.githubusercontent.com/u/12934302?v=4","gravatar_id":"","url":"https://api.github.com/users/marvasDE","html_url":"https://github.com/marvasDE","followers_url":"https://api.github.com/users/marvasDE/followers","following_url":"https://api.github.com/users/marvasDE/following{/other_user}","gists_url":"https://api.github.com/users/marvasDE/gists{/gist_id}","starred_url":"https://api.github.com/users/marvasDE/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marvasDE/subscriptions","organizations_url":"https://api.github.com/users/marvasDE/orgs","repos_url":"https://api.github.com/users/marvasDE/repos","events_url":"https://api.github.com/users/marvasDE/events{/privacy}","received_events_url":"https://api.github.com/users/marvasDE/received_events","type":"User","site_admin":false},"labels":[{"id":27846498,"node_id":"MDU6TGFiZWwyNzg0NjQ5OA==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Not%20a%20bug","name":"Not a bug","color":"02e10c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-04-13T11:54:14Z","updated_at":"2018-04-13T16:21:15Z","closed_at":"2018-04-13T14:51:09Z","author_association":"NONE","body":"### Expected and Actual Behavior\r\n\r\nAt first, all I want was saving some boolean properties in my MySQL table with tinyint column types. It was already discussed (but not realy solved) in #11258.\r\n\r\nTherefore I tried to change the type of my property in an event (like beforeValidation or beforeSave) and was wondering, why it didn't work.\r\n\r\n```php\r\npublic function beforeSave()\r\n{\r\n    $this->isNew = (int) $this->isNew;\r\n}\r\n```\r\n\r\nI figured out, that the value was updated in the database, but not in getChangedFields, which is saved in another table of my software. So I tried:\r\n\r\n```php\r\npublic function beforeSave()\r\n{\r\n    $this->isNew = 100;\r\n}\r\n```\r\n\r\nAfter this the table of the model update the value to 100, but the value in getChangedFields (which is called in my save method) was still the old boolean value.\r\n\r\n### Details\r\n\r\n* Phalcon version: 3.3.2\r\n* PHP Version: 7.1.16\r\n* Operating System: Ubuntu 14.04\r\n* Installation type: installing via package manager\r\n* Zephir version (if any): 0.10.7-2917ebe8ae\r\n* Server: Nginx","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13338","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13338/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13338/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13338/events","html_url":"https://github.com/phalcon/cphalcon/issues/13338","id":310089338,"node_id":"MDU6SXNzdWUzMTAwODkzMzg=","number":13338,"title":"Debian package doesn't trigger a reload on install/upgrade","user":{"login":"billux","id":222395,"node_id":"MDQ6VXNlcjIyMjM5NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/222395?v=4","gravatar_id":"","url":"https://api.github.com/users/billux","html_url":"https://github.com/billux","followers_url":"https://api.github.com/users/billux/followers","following_url":"https://api.github.com/users/billux/following{/other_user}","gists_url":"https://api.github.com/users/billux/gists{/gist_id}","starred_url":"https://api.github.com/users/billux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/billux/subscriptions","organizations_url":"https://api.github.com/users/billux/orgs","repos_url":"https://api.github.com/users/billux/repos","events_url":"https://api.github.com/users/billux/events{/privacy}","received_events_url":"https://api.github.com/users/b
8000
illux/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-03-30T15:07:29Z","updated_at":"2018-04-03T22:24:16Z","closed_at":"2018-04-03T22:24:16Z","author_association":"NONE","body":"### Expected and Actual Behavior\r\n\r\nAfter installing or upgrading php7.0-phalcon Debian package, the package should trigger the reload of php-fpm or Apache (if mod_php is used) as others PHP packages do.\r\n\r\nI'm not an expert in Debian packaging so I compared the php7.0-phalcon package with another PHP extention package (php7.0-intl) and I noticed that the `debian/triggers` ([related manpage](https://manpages.debian.org/stretch/dpkg-dev/deb-triggers.5.en.html)) file is missing in php7.0-phalcon.\r\n\r\nHere is  with the content of the file from php7.0-intl package :\r\n```\r\nactivate-noawait /etc/php/7.0/apache2/conf.d\r\nactivate-noawait /etc/php/7.0/apache2filter/conf.d\r\nactivate-noawait /etc/php/7.0/fpm/conf.d\r\n```\r\n\r\n### Details\r\n\r\n* Phalcon version: (`php --ri phalcon`)\r\n```\r\n# php --ri phalcon\r\n\r\nphalcon\r\n\r\n\r\nWeb framework delivered as a C-extension for PHP\r\nphalcon => enabled\r\nAuthor => Phalcon Team and contributors\r\nVersion => 3.3.2\r\nBuild Date => Mar 10 2018 14:43:15\r\nPowered by Zephir => Version 0.10.7-2917ebe8ae\r\n\r\nDirective => Local Value => Master Value\r\nphalcon.db.escape_identifiers => On => On\r\nphalcon.db.force_casting => Off => Off\r\nphalcon.orm.cast_on_hydrate => Off => Off\r\nphalcon.orm.column_renaming => On => On\r\nphalcon.orm.disable_assign_setters => Off => Off\r\nphalcon.orm.enable_implicit_joins => On => On\r\nphalcon.orm.enable_literals => On => On\r\nphalcon.orm.events => On => On\r\nphalcon.orm.exception_on_failed_save => Off => Off\r\nphalcon.orm.ignore_unknown_columns => Off => Off\r\nphalcon.orm.late_state_binding => Off => Off\r\nphalcon.orm.not_null_validations => On => On\r\nphalcon.orm.update_snapshot_on_save => On => On\r\nphalcon.orm.virtual_foreign_keys => On => On\r\n```\r\n* PHP Version: (`php -v`)\r\n```\r\n# php -v\r\nPHP 7.0.28-1~dotdeb+8.1 (cli) ( NTS )\r\nCopyright (c) 1997-2017 The PHP Group\r\nZend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies\r\n    with Zend OPcache v7.0.28-1~dotdeb+8.1, Copyright (c) 1999-2017, by Zend Technologies\r\n```\r\n* Operating System: Debian jessie\r\n* Installation type: installing via package manager\r\n* Server: Nginx + php-fpm\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13335","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13335/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13335/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13335/events","html_url":"https://github.com/phalcon/cphalcon/issues/13335","id":308928986,"node_id":"MDU6SXNzdWUzMDg5Mjg5ODY=","number":13335,"title":"ORM Model bug","user":{"login":"quartd","id":7030273,"node_id":"MDQ6VXNlcjcwMzAyNzM=","avatar_url":"https://avatars0.githubusercontent.com/u/7030273?v=4","gravatar_id":"","url":"https://api.github.com/users/quartd","html_url":"https://github.com/quartd","followers_url":"https://api.github.com/users/quartd/followers","following_url":"https://api.github.com/users/quartd/following{/other_user}","gists_url":"https://api.github.com/users/quartd/gists{/gist_id}","starred_url":"https://api.github.com/users/quartd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quartd/subscriptions","organizations_url":"https://api.github.com/users/quartd/orgs","repos_url":"https://api.github.com/users/quartd/repos","events_url":"https://api.github.com/users/quartd/events{/privacy}","received_events_url":"https://api.github.com/users/quartd/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-27T11:28:24Z","updated_at":"2018-03-28T21:45:12Z","closed_at":"2018-03-28T21:45:11Z","author_association":"NONE","body":"I've created a model using phalcon-devtools, later I've removed some fields from the model. I'm using that model under a controller to insert some data. In the insertion part I didn't remove that fields which I removed from the model. I'm setting value for it. When I'm creating it actually inserting the data without showing any errors or warning even that field is not in the model. Is this a normal behaviour?","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13329","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13329/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13329/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13329/events","html_url":"https://github.com/phalcon/cphalcon/issues/13329","id":306757542,"node_id":"MDU6SXNzdWUzMDY3NTc1NDI=","number":13329,"title":"php 7.2.3 fpm start with segment fault","user":{"login":"ideamean","id":824662,"node_id":"MDQ6VXNlcjgyNDY2Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/824662?v=4","gravatar_id":"","url":"https://api.github.com/users/ideamean","html_url":"https://github.com/ideamean","followers_url":"https://api.github.com/users/ideamean/followers","following_url":"https://api.github.com/users/ideamean/following{/other_user}","gists_url":"https://api.github.com/users/ideamean/gists{/gist_id}","starred_url":"https://api.github.com/users/ideamean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ideamean/subscriptions","organizations_url":"https://api.github.com/users/ideamean/orgs","repos_url":"https://api.github.com/users/ideamean/repos","events_url":"https://api.github.com/users/ideamean/events{/privacy}","received_events_url":"https://api.github.com/users/ideamean/received_events","type":"User","site_admin":false},"labels":[{"id":19592025,"node_id":"MDU6TGFiZWwxOTU5MjAyNQ==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Need%20information","name":"Need information","color":"ededed","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-03-20T07:40:09Z","updated_at":"2018-03-28T21:41:21Z","closed_at":"2018-03-28T21:41:21Z","author_association":"NONE","body":"php version:\r\n=======================================================\r\nPHP 7.2.3 (cli) (built: Mar 19 2018 16:13:47) ( NTS )\r\nCopyright (c) 1997-2018 The PHP Group\r\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\r\n    with Zend OPcache v7.2.3, Copyright (c) 1999-2018, by Zend Technologies\r\n\r\nbin/php --ri phalcon\r\n============================\r\nphalcon\r\nWeb framework delivered as a C-extension for PHP\r\nphalcon => enabled\r\nAuthor => Phalcon Team and contributors\r\nVersion => 3.2.4\r\nBuild Date => Mar 20 2018 15:13:44\r\nPowered by Zephir => Version 0.10.4-11e39849b0\r\n\r\nDirective => Local Value => Master Value\r\nphalcon.db.escape_identifiers => On => On\r\nphalcon.db.force_casting => Off => Off\r\nphalcon.orm.events => On => On\r\nphalcon.orm.virtual_foreign_keys => On => On\r\nphalcon.orm.column_renaming => On => On\r\nphalcon.orm.not_null_validations => On => On\r\nphalcon.orm.exception_on_failed_save => Off => Off\r\nphalcon.orm.enable_literals => On => On\r\nphalcon.orm.late_state_binding => Off => Off\r\nphalcon.orm.enable_implicit_joins => On => On\r\nphalcon.orm.cast_on_hydrate => Off => Off\r\nphalcon.orm.ignore_unknown_columns => Off => Off\r\nphalcon.orm.update_snapshot_on_save => On => On\r\nphalcon.orm.disable_assign_setters => Off => Off\r\n\r\n**when start php-fpm there is error:**\r\n================================\r\nservice php-fpm start\r\nStarting php-fpm /etc/init.d/php-fpm: line 53:  8211 Segmentation fault      $php_fpm_BIN --daemonize $php_opts\r\n failed\r\n\r\ngdb php-fpm\r\n==================================\r\n\r\n[Thread debugging using libthread_db enabled]\r\nDetaching after fork from child process 7210.\r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\nzend_hash_destroy (ht=0x1777c30) at /root/soft/php-7.2.3/Zend/zend_hash.c:1247\r\n1247\t\t\t\t\t\t\tzend_string_release(p->key);\r\nMissing separate debuginfos, use: debuginfo-install GeoIP-1.6.5-1.el6.x86_64 boost-system-1.41.0-28.el6.x86_64 bzip2-libs-1.0.5-7.el6_0.x86_64 cyrus-sasl-gssapi-2.1.23-15.el6_6.2.x86_64 cyrus-sasl-lib-2.1.23-15.el6_6.2.x86_64 cyrus-sasl-plain-2.1.23-15.el6_6.2.x86_64 db4-4.7.25-22.el6.x86_64 freetype-2.3.11-17.el6.x86_64 glibc-2.12-1.209.el6_9.2.x86_64 gmp-4.3.1-12.el6.x86_64 keyutils-libs-1.4-5.el6.x86_64 krb5-libs-1.10.3-65.el6.x86_64 libcom_err-1.41.12-23.el6.x86_64 libcurl-7.19.7-53.el6_9.x86_64 libgcc-4.4.7-18.el6.x86_64 libgcrypt-1.4.5-12.el6_8.x86_64 libgearman-1.1.8-2.el6.x86_64 libgpg-error-1.7-4.el6.x86_64 libidn-1.18-2.el6.x86_64 libjpeg-turbo-1.2.1-3.el6_5.x86_64 libpng-1.2.49-2.el6_7.x86_64 libselinux-2.0.94-7.el6.x86_64 libssh2-1.4.2-2.el6_7.1.x86_64 libstdc++-4.4.7-18.el6.x86_64 libuuid-2.17.2-12.28.el6_9.2.x86_64 libxml2-2.7.6-21.el6_8.1.x86_64 libxslt-1.1.26-2.el6_3.1.x86_64 ncurses-libs-5.7-4.20090207.el6.x86_64 net-snmp-libs-5.5-60.el6.x86_64 nspr-4.13.1-1.el6.x86_64 nss-3.28.4-3.el6_9.x86_64 nss-softokn-freebl-3.14.3-23.3.el6_8.x86_64 nss-util-3.28.4-1.el6_9.x86_64 openldap-2.4.40-16.el6.x86_64 openssl-1.0.1e-57.el6.x86_64 readline-6.0-4.el6.x86_64 zlib-1.2.3-29.el6.x86_64","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13326","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13326/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13326/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13326/events","html_url":"https://github.com/phalcon/cphalcon/issues/13326","id":306160646,"node_id":"MDU6SXNzdWUzMDYxNjA2NDY=","number":13326,"title":"Proposal: ability to add Route object directly into Router","user":{"login":"webmasterlv","id":2886170,"node_id":"MDQ6VXNlcjI4ODYxNzA=","avatar_url":"https://avatars1.githubusercontent.com/u/2886170?v=4","gravatar_id":"","url":"https://api.github.com/users/webmasterlv","html_url":"https://github.com/webmasterlv","followers_url":"https://api.github.com/users/webmasterlv/followers","following_url":"https://api.github.com/users/webmasterlv/following{/other_user}","gists_url":"https://api.github.com/users/webmasterlv/gists{/gist_id}","starred_url":"https://api.github.com/users/webmasterlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/webmasterlv/subscriptions","organizations_url":"https://api.github.com/users/webmasterlv/orgs","repos_url":"https://api.github.com/users/webmasterlv/repos","events_url":"https://api.github.com/users/webmasterlv/events{/privacy}","received_events_url":"https://api.github.com/users/webmasterlv/received_events","type":"User","site_admin":false},"labels":[{"id":13573146,"node_id":"MDU6TGFiZWwxMzU3MzE0Ng==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/New%20Feature%20Request","name":"New Feature Request","color":"0052cc","default":false}],"state":"closed","locked":false,"assignee":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"assignees":[{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/phalcon/cphalcon/milestones/31","html_url":"https://github.com/phalcon/cphalcon/milestone/31","labels_url":"https://api.github.com/repos/phalcon/cphalcon/milestones/31/labels","id":3214274,"node_id":"MDk6TWlsZXN0b25lMzIxNDI3NA==","number":31,"title":"3.4.x","description":"","creator":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":22,"state":"closed","created_at":"2018-03-24T15:58:59Z","updated_at":"2018-06-01T06:29:32Z","due_on":null,"closed_at":"2018-06-01T06:29:32Z"},"comments":1,"created_at":"2018-03-17T14:27:54Z","updated_at":"2018-03-24T17:58:13Z","closed_at":"2018-03-24T17:58:13Z","author_association":"NONE","body":"First of all, thank you for work you've done, this is outstanding framework.\r\nWhile developing my application routing structure, one particular feature would be useful - if i could pass Route object directly into Router instance. This way by extending Route object it is would be possible to attach some additional data to object and use it somewhere else in application.\r\nAs i understand, this shouldn't break BC, because internally Router stores them as Route objects already.\r\nThis could be like:\r\n\r\n```\r\nclass CustomRoute extends Phalcon\\Mvc\\Router\\Route {\r\n\r\n}\r\n\r\n$route = new CustomRoute();\r\n\r\n$router = new Phalcon\\Mvc\\Router();\r\n$router -> add($route);\r\n```\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13319","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13319/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13319/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13319/events","html_url":"https://github.com/phalcon/cphalcon/issues/13319","id":304203562,"node_id":"MDU6SXNzdWUzMDQyMDM1NjI=","number":13319,"title":"Query Builder - MySQL Group Concat with order by fails","user":{"login":"HACKHERS","id":2204282,"node_id":"MDQ6VXNlcjIyMDQyODI=","avatar_url":"https://avatars1.githubusercontent.com/u/2204282?v=4","gravatar_id":"","url":"https://api.github.com/users/HACKHERS","html_url":"https://github.com/HACKHERS","followers_url":"https://api.github.com/users/HACKHERS/followers","following_url":"https://api.github.com/users/HACKHERS/following{/other_user}","gists_url":"https://api.github.com/users/HACKHERS/gists{/gist_id}","starred_url":"https://api.github.com/users/HACKHERS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HACKHERS/subscriptions","organizations_url":"https://api.github.com/users/HACKHERS/orgs","repos_url":"https://api.github.com/users/HACKHERS/repos","events_url":"https://api.github.com/users/HACKHERS/events{/privacy}","received_events_url":"https://api.github.com/users/HACKHERS/received_events","type":"User","site_admin":false},"labels":[{"id":356243820,"node_id":"MDU6TGFiZWwzNTYyNDM4MjA=","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Duplicate","name":"Duplicate","color":"d4c5f9","default":false},{"id":27846498,"node_id":"MDU6TGFiZWwyNzg0NjQ5OA==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Not%20a%20bug","name":"Not a bug","color":"02e10c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-03-11T23:05:45Z","updated_at":"2018-03-28T21:57:58Z","closed_at":"2018-03-28T21:57:45Z","author_association":"NONE","body":"### Expected and Actual Behavior\r\nWhen trying to use query builder with `group_concat(field order by asc)` it fails because of order token.\r\n\r\n```\r\nSyntax error, unexpected token ORDER, near to \r\n' BY PriceHistory.date ASC) AS [histo] FROM [Aylog\\Models\\Coins] AS [Coins] LEFT JOIN \r\n[Aylog\\Models\\PriceHistory] AS [PriceHistory] ON Coins.id = PriceHistory.coin_id GROUP BY\r\nCoins.id ORDER BY Coins.market_cap DESC LIMIT :APL0: OFFSET :APL1:', when parsing:\r\nSELECT GROUP_CONCAT(PriceHistory.price ORDER BY PriceHistory.date ASC) AS [histo]\r\nFROM [Aylog\\Models\\Coins] AS [Coins] LEFT JOIN [Aylog\\Models\\PriceHistory] AS\r\n[PriceHistory] ON Coins.id = PriceHistory.coin_id GROUP BY Coins.id ORDER BY\r\nCoins.market_cap DESC LIMIT :APL0: OFFSET :APL1: (285)\r\n```\r\n\r\n```php\r\n$coins = $this->modelsManager->createBuilder()\r\n    ->columns([\r\n        \"histo\" => \"GROUP_CONCAT(PriceHistory.price ORDER BY PriceHistory.date ASC)\"\r\n    ])\r\n    ->from([\r\n        \"Coins\" => \"Aylog\\Models\\Coins\"\r\n    ])\r\n    ->leftJoin(\"Aylog\\Models\\PriceHistory\", 'Coins.id = PriceHistory.coin_id', 'PriceHistory')\r\n    ->groupBy(\"Coins.id\")\r\n    ->orderBy(\"Coins.market_cap DESC\")\r\n    ->limit(50, 0)\r\n    ->getQuery()\r\n    ->execute();\r\n```\r\n\r\nYou can use any type of `group_concat(field order by asc)` to reprocedure the issue.\r\n\r\n### Details\r\n\r\n* Phalcon version:  3.3.2\r\n* PHP Version: 7.2.2\r\n* Operating System: Windows 10\r\n* Installation type: DLL\r\n* Zephir version (if any): 0.10.7-2917ebe8ae\r\n* Server: Apache\r\n* Other related info (Database, table schema):  MySQL\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13318","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13318/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13318/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13318/events","html_url":"https://github.com/phalcon/cphalcon/issues/13318","id":303949576,"node_id":"MDU6SXNzdWUzMDM5NDk1NzY=","number":13318,"title":"no dll in release archive  phalcon_x64_vc15_php7.2.0_.zip","user":{"login":"alexandrufulop","id":589095,"node_id":"MDQ6VXNlcjU4OTA5NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/589095?v=4","gravatar_id":"","url":"https://api.github.com/users/alexandrufulop","html_url":"https://github.com/alexandrufulop","followers_url":"https://api.github.com/users/alexandrufulop/followers","following_url":"https://api.github.com/users/alexandrufulop/following{/other_user}","gists_url":"https://api.github.com/users/alexandrufulop/gists{/gist_id}","starred_url":"https://api.github.com/users/alexandrufulop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexandrufulop/subscriptions","organizations_url":"https://api.github.com/users/alexandrufulop/orgs","repos_url":"https://api.github.com/users/alexandrufulop/repos","events_url":"https://api.github.com/users/alexandrufulop/events{/privacy}","received_events_url":"https://api.github.com/users/alexandrufulop/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-03-09T19:13:53Z","updated_at":"2018-03-11T11:57:23Z","closed_at":"2018-03-10T21:40:15Z","author_association":"NONE","body":"### Expected and Actual Behavior\r\n\r\n> Expecting to find the php_phalcon.dll file in the phalcon_x64_vc15_php7.2.0_.zip archive.\r\n\r\n> There is no other file besides the README in the phalcon_x64_vc15_php7.2.0_.zip archive.\r\n\r\n[https://github.com/phalcon/cphalcon/releases/tag/v3.3.2](https://github.com/phalcon/cphalcon/releases/tag/v3.3.2)\r\n\r\n\r\n### Details\r\n\r\nI could not find any dll extensions in https://github.com/phalcon/cphalcon/releases/download/v3.3.2/phalcon_x64_vc15_php7.2.0_.zip\r\n\r\nThank you!\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13317","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13317/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13317/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13317/events","html_url":"https://github.com/phalcon/cphalcon/issues/13317","id":303496272,"node_id":"MDU6SXNzdWUzMDM0OTYyNzI=","number":13317,"title":"Cannot compile phalcon-2.0.0 on Centos 6.9","user":{"login":"sirber","id":3911428,"node_id":"MDQ6VXNlcjM5MTE0Mjg=","avatar_url":"https://avatars0.githubusercontent.com/u/3911428?v=4","gravatar_id":"","url":"https://api.github.com/users/sirber","html_url":"https://github.com/sirber","followers_url":"https://api.github.com/users/sirber/followers","following_url":"https://api.github.com/users/sirber/following{/other_user}","gists_url":"https://api.github.com/users/sirber/gists{/gist_id}","starred_url":"https://api.github.com/users/sirber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sirber/subscriptions","organizations_url":"https://api.github.com/users/sirber/orgs","repos_url":"https://api.github.com/users/sirber/repos","events_url":"https://api.github.com/users/sirber/events{/privacy}","received_events_url":"https://api.github.com/users/sirber/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-03-08T14:22:15Z","updated_at":"2018-03-08T14:25:56Z","closed_at":"2018-03-08T14:25:55Z","author_association":"NONE","body":"I'm trying to replicate an old dev server into a new vagrant machine. It's using php 5.3.3 and phalcon-2.0.0.\r\nInstalled packages: httpd php php-mysql php-devel git gcc make re2c libtool pcre-devel unzip\r\n\r\n[vagrant@localhost build]$ ./install\r\nfind . -name \\*.gcno -o -name \\*.gcda | xargs rm -f\r\nfind . -name \\*.lo -o -name \\*.o | xargs rm -f\r\nfind . -name \\*.la -o -name \\*.a | xargs rm -f\r\nfind . -name \\*.so | xargs rm -f\r\nfind . -name .libs -a -type d|xargs rm -rf\r\nrm -f libphp.la   modules/* libs/*\r\nCleaning..\r\nConfiguring for:\r\nPHP Api Version:         20090626\r\nZend Module Api No:      20090626\r\nZend Extension Api No:   220090626\r\nchecking for grep that handles long lines and -e... /bin/grep\r\nchecking for egrep... /bin/grep -E\r\nchecking for a sed that does not truncate output... /bin/sed\r\nchecking for C compiler default output file name... a.out\r\nchecking whether the C compiler works... yes\r\nchecking whether we are cross compiling... no\r\nchecking for suffix of executables...\r\nchecking for suffix of object files... o\r\nchecking whether we are using the GNU C compiler... yes\r\nchecking whether gcc accepts -g... yes\r\nchecking for gcc option to accept ISO C89... none needed\r\nchecking how to run the C preprocessor... gcc -E\r\nchecking for icc... no\r\nchecking for suncc... no\r\nchecking whether gcc and cc understand -c and -o together... yes\r\nchecking for system library directory... lib\r\nchecking if compiler supports -R... no\r\nchecking if compiler supports -Wl,-rpath,... yes\r\nchecking build system type... x86_64-unknown-linux-gnu\r\nchecking host system type... x86_64-unknown-linux-gnu\r\nchecking target system type... x86_64-unknown-linux-gnu\r\nchecking for PHP prefix... /usr\r\nchecking for PHP includes... -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib\r\nchecking for PHP extension directory... /usr/lib64/php/modules\r\nchecking for PHP installed headers prefix... /usr/include/php\r\nchecking if debug is enabled... no\r\nchecking if zts is enabled... no\r\nchecking for re2c... re2c\r\nchecking for re2c version... 0.13.5 (ok)\r\nchecking for gawk... gawk\r\nchecking whether to enable phalcon... yes, shared\r\nchecking whether HAVE_BUNDLED_PCRE is declared... no\r\nchecking whether HAVE_JSON is declared... yes\r\nchecking for ext/json/php_json.h... yes\r\nchecking for a sed that does not truncate output... (cached) /bin/sed\r\nchecking for fgrep... /bin/grep -F\r\nchecking for ld used by gcc... /usr/bin/ld\r\nchecking if the linker (/usr/bin/ld) is GNU ld... yes\r\nchecking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B\r\nchecking the name lister (/usr/bin/nm -B) interface... BSD nm\r\nchecking whether ln -s works... yes\r\nchecking the maximum length of command line arguments... 1966080\r\nchecking whether the shell understands some XSI constructs... yes\r\nchecking whether the shell understands \"+=\"... yes\r\nchecking for /usr/bin/ld option to reload object files... -r\r\nchecking for objdump... objdump\r\nchecking how to recognize dependent libraries... pass_all\r\nchecking for ar... ar\r\nchecking for strip... strip\r\nchecking for ranlib... ranlib\r\nchecking command to parse /usr/bin/nm -B output from gcc object... ok\r\nchecking for ANSI C header files... yes\r\nchecking for sys/types.h... yes\r\nchecking for sys/stat.h... yes\r\nchecking for stdlib.h... yes\r\nchecking for string.h... yes\r\nchecking for memory.h... yes\r\nchecking for strings.h... yes\r\nchecking for inttypes.h... yes\r\nchecking for stdint.h... yes\r\nchecking for unistd.h... yes\r\nchecking for dlfcn.h... yes\r\nchecking for objdir... .libs\r\nchecking if gcc supports -fno-rtti -fno-exceptions... no\r\nchecking for gcc option to produce PIC... -fPIC -DPIC\r\nchecking if gcc PIC flag -fPIC -DPIC works... yes\r\nchecking if gcc static flag -static works... no\r\nchecking if gcc supports -c -o file.o... yes\r\nchecking if gcc supports -c -o file.o... (cached) yes\r\nchecking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes\r\nchecking whether -lc should be explicitly linked in... no\r\nchecking dynamic linker characteristics... GNU/Linux ld.so\r\nchecking how to hardcode library paths into programs... immediate\r\nchecking whether stripping libraries is possible... yes\r\nchecking if libtool supports shared libraries... yes\r\nchecking whether to build shared libraries... yes\r\nchecking whether to build static libraries... no\r\nconfigure: creating ./config.status\r\nconfig.status: creating config.h\r\nconfig.status: executing libtool commands\r\n/bin/sh /home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/libtool --mode=compile gcc  -I. -I/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits -DPHP_ATOM_INC -I/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/include -I/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/main -I/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib  -DPHALCON_RELEASE -DHAVE_CONFIG_H  -march=native -mtune=native -O2 -finline-functions -fomit-frame-pointer -fvisibility=hidden   -c /home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/phalcon.zep.c -o phalcon.lo\r\nlibtool: compile:  gcc -I. -I/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits -DPHP_ATOM_INC -I/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/include -I/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/main -I/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib -DPHALCON_RELEASE -DHAVE_CONFIG_H -march=native -mtune=native -O2 -finline-functions -fomit-frame-pointer -fvisibility=hidden -c /home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/phalcon.zep.c  -fPIC -DPIC -o .libs/phalcon.o\r\n/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/phalcon.zep.c: In function ‘zephir_fetch_static_property_ce’:\r\n/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/phalcon.zep.c:6559: warning: passing argument 2 of ‘zend_read_static_property’ discards qualifiers from pointer target type\r\n/usr/include/php/Zend/zend_API.h:321: note: expected ‘char *’ but argument is of type ‘const char *’\r\n/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/phalcon.zep.c: In function ‘zephir_update_static_property_ex’:\r\n/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/phalcon.zep.c:6669: warning: passing argument 2 of ‘zend_std_get_static_property’ discards qualifiers from pointer target type\r\n/usr/include/php/Zend/zend_object_handlers.h:147: note: expected ‘char *’ but argument is of type ‘const char *’\r\n/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/phalcon.zep.c: At top level:\r\n/home/vagrant/cphalcon-phalcon-v2.0.0/build/64bits/phalcon.zep.c:126687: error: ‘ZEND_FE_END’ undeclared here (not in a function)\r\nmake: *** [phalcon.lo] Error 1\r\n\r\nI also had no luck with 2.0.12 and 2.0.13.","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13315","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13315/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13315/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13315/events","html_url":"https://github.com/phalcon/cphalcon/issues/13315","id":303313019,"node_id":"MDU6SXNzdWUzMDMzMTMwMTk=","number":13315,"title":"The detailed mode for Phalcon/Debug is not work","user":{"login":"limingxinleo","id":16648551,"node_id":"MDQ6VXNlcjE2NjQ4NTUx","avatar_url":"https://avatars2.githubusercontent.com/u/16648551?v=4","gravatar_id":"","url":"https://api.github.com/users/limingxinleo","html_url":"https://github.com/limingxinleo","followers_url":"https://api.github.com/users/limingxinleo/followers","following_url":"https://api.github.com/users/limingxinleo/following{/other_user}","gists_url":"https://api.github.com/users/limingxinleo/gists{/gist_id}","starred_url":"https://api.github.com/users/limingxinleo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/limingxinleo/subscriptions","organizations_url":"https://api.github.com/users/limingxinleo/orgs","repos_url":"https://api.github.com/users/limingxinleo/repos","events_url":"https://api.github.com/users/limingxinleo/events{/privacy}","received_events_url":"https://api.github.com/users/limingxinleo/received_events","type":"User","site_admin":false},"labels":[{"id":13573059,"node_id":"MDU6TGFiZWwxMzU3MzA1OQ==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Bug%20-%20Medium","name":"Bug - Medium","color":"d7e102","default":false}],"state":"closed","locked":false,"assignee":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.gith
64d1
ub.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"assignees":[{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/phalcon/cphalcon/milestones/31","html_url":"https://github.com/phalcon/cphalcon/milestone/31","labels_url":"https://api.github.com/repos/phalcon/cphalcon/milestones/31/labels","id":3214274,"node_id":"MDk6TWlsZXN0b25lMzIxNDI3NA==","number":31,"title":"3.4.x","description":"","creator":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars2.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":22,"state":"closed","created_at":"2018-03-24T15:58:59Z","updated_at":"2018-06-01T06:29:32Z","due_on":null,"closed_at":"2018-06-01T06:29:32Z"},"comments":2,"created_at":"2018-03-08T00:37:45Z","updated_at":"2018-03-26T19:38:19Z","closed_at":"2018-03-26T19:38:19Z","author_association":"CONTRIBUTOR","body":"> **When I use Phalcon/Debug detailed mode,The result is not expected.**\r\n\r\n```php\r\n<?php\r\n        $obj = new \\stdClass();\r\n        $obj->aaa = 111;\r\n\r\n        array_map(function ($x) {\r\n            $string = (new \\Phalcon\\Debug\\Dump(null, true))->variable($x);\r\n\r\n            echo(PHP_SAPI == 'cli' ? strip_tags($string) . PHP_EOL : $string);\r\n\r\n        }, [$obj]);\r\n```\r\n> The Result\r\n\r\n```\r\nThe argument is not initialized or iterable() code:0 in phalcon/debug/dump.zep line 215\r\n#0 [internal function]: Phalcon\\Debug\\Dump->output(Object(stdClass), '')\r\n#1 /Users/limx/Applications/limingxinleo/basic-phalcon/app/Tasks/TestTask.php(16): Phalcon\\Debug\\Dump->variable(Object(stdClass))\r\n#2 [internal function]: App\\Tasks\\TestTask->App\\Tasks\\{closure}(Object(stdClass))\r\n#3 /Users/limx/Applications/limingxinleo/basic-phalcon/app/Tasks/TestTask.php(20): array_map(Object(Closure), Array)\r\n#4 [internal function]: App\\Tasks\\TestTask->mainAction(Array, Array)\r\n#5 [internal function]: Phalcon\\Cli\\Dispatcher->callActionMethod(Object(App\\Tasks\\TestTask), 'mainAction', Array)\r\n#6 [internal function]: Phalcon\\Dispatcher->dispatch()\r\n#7 /Users/limx/Applications/limingxinleo/basic-phalcon/vendor/limingxinleo/x-phalcon-console/src/Cli/XConsole.php(36): Phalcon\\Cli\\Console->handle(Array)\r\n#8 /Users/limx/Applications/limingxinleo/basic-phalcon/run(47): Xin\\Phalcon\\Cli\\XConsole->handle(Array)\r\n#9 {main}%\r\n```\r\n\r\nI find the source code for Phalcon/Debug/Dump, using `for` instead of `each`, `for` is not support object, so it throw a exception, but `each` is deprecated for php7.2.\r\n\r\n### Details\r\n\r\n* Phalcon version: (`3.3.2`)\r\n* PHP Version: (`7.1.14`)\r\n* Operating System: MAC\r\n* Installation type: Compiling from source || installing via package manager\r\n* Zephir version (if any):\r\n* Server: Nginx | Apache | Other\r\n* Other related info (Database, table schema): \r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13309","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13309/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13309/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13309/events","html_url":"https://github.com/phalcon/cphalcon/issues/13309","id":300728442,"node_id":"MDU6SXNzdWUzMDA3Mjg0NDI=","number":13309,"title":"Request filter not filtering (int) properly","user":{"login":"quasipickle","id":1377105,"node_id":"MDQ6VXNlcjEzNzcxMDU=","avatar_url":"https://avatars0.githubusercontent.com/u/1377105?v=4","gravatar_id":"","url":"https://api.github.com/users/quasipickle","html_url":"https://github.com/quasipickle","followers_url":"https://api.github.com/users/quasipickle/followers","following_url":"https://api.github.com/users/quasipickle/following{/other_user}","gists_url":"https://api.github.com/users/quasipickle/gists{/gist_id}","starred_url":"https://api.github.com/users/quasipickle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quasipickle/subscriptions","organizations_url":"https://api.github.com/users/quasipickle/orgs","repos_url":"https://api.github.com/users/quasipickle/repos","events_url":"https://api.github.com/users/quasipickle/events{/privacy}","received_events_url":"https://api.github.com/users/quasipickle/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-02-27T17:43:55Z","updated_at":"2018-03-27T08:53:07Z","closed_at":"2018-03-27T08:53:07Z","author_association":"CONTRIBUTOR","body":"This isn't a bug, but an issue with the documented and actual behaviour.\r\n\r\nWhen filtering a request variable:\r\n\r\n```php\r\n$this->request->getPost('barcode','int');\r\n```\r\none would expect the result of that to be an integer, or at least an integer-like string.  Casting to (int) would do the trick, but the filter just strips out non-integer characters.\r\n\r\nSo a POSTed variable of `-------234---34-888833--------------` would pass through.  That is clearly not an integer.\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13306","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13306/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13306/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13306/events","html_url":"https://github.com/phalcon/cphalcon/issues/13306","id":299908520,"node_id":"MDU6SXNzdWUyOTk5MDg1MjA=","number":13306,"title":"When I use SoftDelete and columnMap and useDynamicUpdate, The result is not expected!","user":{"login":"limingxinleo","id":16648551,"node_id":"MDQ6VXNlcjE2NjQ4NTUx","avatar_url":"https://avatars2.githubusercontent.com/u/16648551?v=4","gravatar_id":"","url":"https://api.github.com/users/limingxinleo","html_url":"https://github.com/limingxinleo","followers_url":"https://api.github.com/users/limingxinleo/followers","following_url":"https://api.github.com/users/limingxinleo/following{/other_user}","gists_url":"https://api.github.com/users/limingxinleo/gists{/gist_id}","starred_url":"https://api.github.com/users/limingxinleo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/limingxinleo/subscriptions","organizations_url":"https://api.github.com/users/limingxinleo/orgs","repos_url":"https://api.github.com/users/limingxinleo/repos","events_url":"https://api.github.com/users/limingxinleo/events{/privacy}","received_events_url":"https://api.github.com/users/limingxinleo/received_events","type":"User","site_admin":false},"labels":[{"id":13573059,"node_id":"MDU6TGFiZWwxMzU3MzA1OQ==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Bug%20-%20Medium","name":"Bug - Medium","color":"d7e102","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-02-24T03:48:47Z","updated_at":"2018-03-10T21:32:52Z","closed_at":"2018-03-10T21:32:52Z","author_association":"CONTRIBUTOR","body":"## When I use SoftDelete and columnMap and useDynamicUpdate, The result is not expected!\r\n\r\n### The Code\r\n```php\r\n<?php\r\nuse Phalcon\\Di\\FactoryDefault;\r\nuse Phalcon\\Mvc\\Model;\r\n\r\n$di = new FactoryDefault();\r\n\r\n$di->setShared('db', function () {\r\n    $db = new \\Phalcon\\Db\\Adapter\\Pdo\\Mysql(\r\n        [\r\n            'host' => '127.0.0.1',\r\n            'username' => 'root',\r\n            'dbname' => 'dtm',\r\n            'charset' => 'utf8',\r\n            'options' => [\r\n                PDO::ATTR_CASE => PDO::CASE_NATURAL,\r\n                PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\r\n                PDO::ATTR_ORACLE_NULLS => PDO::NULL_NATURAL,\r\n                PDO::ATTR_STRINGIFY_FETCHES => false,\r\n                PDO::ATTR_EMULATE_PREPARES => false,\r\n            ],\r\n        ]\r\n    );\r\n    return $db;\r\n});\r\n\r\n$di->setShared('modelsMetadata', function () {\r\n\r\n    $modelsMetadata = new Phalcon\\Mvc\\Model\\Metadata\\Files(\r\n        [\r\n            'metaDataDir' => './runtime/',\r\n        ]\r\n    );\r\n\r\n    return $modelsMetadata;\r\n});\r\n\r\nclass Group extends Model\r\n{\r\n\r\n    /**\r\n     *\r\n     * @var integer\r\n     * @Primary\r\n     * @Identity\r\n     * @Column(column=\"id\", type=\"integer\", length=20, nullable=false)\r\n     */\r\n    public $id;\r\n\r\n    /**\r\n     *\r\n     * @var integer\r\n     * @Column(column=\"user_id\", type=\"integer\", length=20, nullable=false)\r\n     */\r\n    public $userId;\r\n\r\n    /**\r\n     *\r\n     * @var string\r\n     * @Column(column=\"name\", type=\"string\", length=32, nullable=false)\r\n     */\r\n    public $name;\r\n\r\n    /**\r\n     *\r\n     * @var integer\r\n     * @Column(column=\"is_deleted\", type=\"integer\", length=3, nullable=false)\r\n     */\r\n    public $isDeleted;\r\n\r\n    /**\r\n     *\r\n     * @var string\r\n     * @Column(column=\"created_at\", type=\"string\", nullable=true)\r\n     */\r\n    public $createdAt;\r\n\r\n    /**\r\n     *\r\n     * @var string\r\n     * @Column(column=\"updated_at\", type=\"string\", nullable=true)\r\n     */\r\n    public $updatedAt;\r\n\r\n    /**\r\n     * Initialize method for model.\r\n     */\r\n    public function initialize()\r\n    {\r\n        $this->setSchema(\"dtm\");\r\n        $this->setSource(\"group\");\r\n        $this->addBehavior(\r\n            new Model\\Behavior\\SoftDelete(\r\n                [\r\n                    'field' => 'isDeleted',\r\n                    'value' => 1,\r\n                ]\r\n            )\r\n        );\r\n\r\n        $this->useDynamicUpdate(true);\r\n    }\r\n\r\n    /**\r\n     * Allows to query a set of records that match the specified conditions\r\n     *\r\n     * @param mixed $parameters\r\n     * @return Group[]|Group|\\Phalcon\\Mvc\\Model\\ResultSetInterface\r\n     */\r\n    public static function find($parameters = null)\r\n    {\r\n        return parent::find($parameters);\r\n    }\r\n\r\n    /**\r\n     * Allows to query the first record that match the specified conditions\r\n     *\r\n     * @param mixed $parameters\r\n     * @return Group|\\Phalcon\\Mvc\\Model\\ResultInterface\r\n     */\r\n    public static function findFirst($parameters = null)\r\n    {\r\n        return parent::findFirst($parameters);\r\n    }\r\n\r\n    /**\r\n     * Returns table name mapped in the model.\r\n     *\r\n     * @return string\r\n     */\r\n    public function getSource()\r\n    {\r\n        return 'group';\r\n    }\r\n\r\n    /**\r\n     * Independent Column Mapping.\r\n     * Keys are the real names in the table and the values their names in the application\r\n     *\r\n     * @return array\r\n     */\r\n    public function columnMap()\r\n    {\r\n        return [\r\n            'id' => 'id',\r\n            'user_id' => 'userId',\r\n            'name' => 'name',\r\n            'is_deleted' => 'isDeleted',\r\n            'created_at' => 'createdAt',\r\n            'updated_at' => 'updatedAt'\r\n        ];\r\n    }\r\n}\r\n\r\n$group = new Group();\r\n$group->userId = 1;\r\n$group->name = 'xxx';\r\n$group->save();\r\n\r\ntry {\r\n    $group->delete();\r\n} catch (Exception $ex) {\r\n    $msg = $ex->getMessage() . ' code:' . $ex->getCode() . ' in ' . $ex->getFile() . ' line ' . $ex->getLine() . PHP_EOL . $ex->getTraceAsString();\r\n    echo $msg;\r\n}\r\n\r\n```\r\n### Schema\r\n```\r\nCREATE TABLE `group` (\r\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\r\n  `user_id` bigint(20) unsigned NOT NULL COMMENT '用户ID',\r\n  `name` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '组名',\r\n  `is_deleted` tinyint(3) unsigned NOT NULL DEFAULT '0',\r\n  `created_at` datetime DEFAULT NULL,\r\n  `updated_at` datetime DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  KEY `INDEX_USER_ID` (`user_id`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='任务组';\r\n```\r\n### Details\r\n```\r\nColumn 'userId' doesn't make part of the column map code:0 in /Users/limx/Applications/limingxinleo/bugs/softDeleteWhenColumnMap.php line 166\r\n#0 [internal function]: Phalcon\\Mvc\\Model->setSnapshotData(Array, Array)\r\n#1 [internal function]: Phalcon\\Mvc\\Model\\Behavior\\SoftDelete->notify('beforeDelete', Object(Group))\r\n#2 [internal function]: Phalcon\\Mvc\\Model\\Manager->notifyEvent('beforeDelete', Object(Group))\r\n#3 [internal function]: Phalcon\\Mvc\\Model->fireEventCancel('beforeDelete')\r\n#4 /Users/limx/Applications/limingxinleo/bugs/softDeleteWhenColumnMap.php(166): Phalcon\\Mvc\\Model->delete()\r\n#5 {main}\r\n```\r\n\r\n* Phalcon version: (`3.3.0`)\r\n* PHP Version: (`7.1.14`)\r\n* Operating System:\r\n* Installation type: Compiling from source || installing via package manager\r\n* Zephir version (if any):\r\n* Server: Nginx\r\n* Other related info (Database, table schema): msyql\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13302","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13302/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13302/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13302/events","html_url":"https://github.com/phalcon/cphalcon/issues/13302","id":298365007,"node_id":"MDU6SXNzdWUyOTgzNjUwMDc=","number":13302,"title":"Delete Model with SoftDelete Behavior Breaks with Mapped Properties and Snapshots","user":{"login":"virgofx","id":739719,"node_id":"MDQ6VXNlcjczOTcxOQ==","avatar_url":"https://avatars2.githubusercontent.com/u/739719?v=4","gravatar_id":"","url":"https://api.github.com/users/virgofx","html_url":"https://github.com/virgofx","followers_url":"https://api.github.com/users/virgofx/followers","following_url":"https://api.github.com/users/virgofx/following{/other_user}","gists_url":"https://api.github.com/users/virgofx/gists{/gist_id}","starred_url":"https://api.github.com/users/virgofx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/virgofx/subscriptions","organizations_url":"https://api.github.com/users/virgofx/orgs","repos_url":"https://api.github.com/users/virgofx/repos","events_url":"https://api.github.com/users/virgofx/events{/privacy}","received_events_url":"https://api.github.com/users/virgofx/received_events","type":"User","site_admin":false},"labels":[{"id":13573059,"node_id":"MDU6TGFiZWwxMzU3MzA1OQ==","url":"https://api.github.com/repos/phalcon/cphalcon/labels/Bug%20-%20Medium","name":"Bug - Medium","color":"d7e102","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-02-19T18:18:38Z","updated_at":"2018-03-10T21:32:16Z","closed_at":"2018-03-10T21:32:16Z","author_association":"MEMBER","body":"Deleting a model that is using the SoftDelete trait with snapshots results in an error:\r\n\r\n`Column 'firstCamelCasedColumn' doesn't make part of the column map`\r\n\r\nThe problem is with the `columnMap` parameters passed into the setSnapshotData() and setOldSnapshotData().\r\n\r\nhttps://github.com/phalcon/cphalcon/blob/master/phalcon/mvc/model/behavior/softdelete.zep#L102-L103\r\n```\r\nmodel->setSnapshotData(updateModel->getSnapshotData(), columnMap);\r\nmodel->setOldSnapshotData(updateModel->getOldSnapshotData(), columnMap);\r\n```\r\n\r\nRemoving the columnMap from the second parameter fixes the issue. That would be the expected behavior as there is no need to re-translate keys after getting old data and then resetting. Otherwise, there is an issue somewhere in the setting of snapshots with column maps.\r\n\r\n/cc @Jurigag \r\n\r\n### Details\r\n\r\n* Phalcon version: 3.3.1\r\n* PHP Version: PHP 7.1.14\r\n* Operating System: Ubuntu 16.04\r\n* Installation type: Package Manager\r\n* Server: Nginx\r\n","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13301","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13301/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13301/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13301/events","html_url":"https://github.com/phalcon/cphalcon/issues/13301","id":298210993,"node_id":"MDU6SXNzdWUyOTgyMTA5OTM=","number":13301,"title":"[NFR] Websockets","user":{"login":"oscarmolinadev","id":6513086,"node_id":"MDQ6VXNlcjY1MTMwODY=","avatar_url":"https://avatars1.githubusercontent.com/u/6513086?v=4","gravatar_id":"","url":"https://api.github.com/users/oscarmolinadev","html_url":"https://github.com/oscarmolinadev","followers_url":"https://api.github.com/users/oscarmolinadev/followers","following_url":"https://api.github.com/users/oscarmolinadev/following{/other_user}","gists_url":"https://api.github.com/users/oscarmolinadev/gists{/gist_id}","starred_url":"https://api.github.com/users/oscarmolinadev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscarmolinadev/subscriptions","organizations_url":"https://api.github.com/users/oscarmolinadev/orgs","repos_url":"https://api.github.com/users/oscarmolinadev/repos","events_url":"https://api.github.com/users/oscarmolinadev/events{/privacy}","received_events_url":"https://api.github.com/users/oscarmolinadev/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-02-19T09:38:23Z","updated_at":"2018-03-11T21:07:43Z","closed_at":"2018-03-11T21:07:43Z","author_association":"NONE","body":"Add support for create websocket server/client. I don't know if it is better create a wrapper for ReactPHP (temporary) like Beanstalkd or create from scratch without dependencies and take advandtage of performance of c-exstension.","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13298","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13298/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13298/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13298/events","html_url":"https://github.com/phalcon/cphalcon/issues/13298","id":296077193,"node_id":"MDU6SXNzdWUyOTYwNzcxOTM=","number":13298,"title":"Add return this in beanstalk->choose method","user":{"login":"Albertao","id":10139257,"node_id":"MDQ6VXNlcjEwMTM5MjU3","avatar_url":"https://avatars1.githubusercontent.com/u/10139257?v=4","gravatar_id":"","url":"https://api.github.com/users/Albertao","html_url":"https://github.com/Albertao","followers_url":"https://api.github.com/users/Albertao/followers","following_url":"https://api.github.com/users/Albertao/following{/other_user}","gists_url":"https://api.github.com/users/Albertao/gists{/gist_id}","starred_url":"https://api.github.com/users/Albertao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Albertao/subscriptions","organizations_url":"https://api.github.com/users/Albertao/orgs","repos_url":"https://api.github.com/users/Albertao/repos","events_url":"https://api.github.com/users/Albertao/events{/privacy}","received_events_url":"https://api.github.com/users/Albertao/received_events","type":"User","site_admin":false},"labels":[{"id":903580634,"node_id":"MDU6TGFiZWw5MDM1ODA2MzQ=","url":"https://api.github.com/repos/phalcon/cphalcon/labels/stale","name":"stale","color":"ffffff","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-02-10T06:04:06Z","updated_at":"2018-05-12T07:15:14Z","closed_at":"2018-05-12T07:15:14Z","author_association":"NONE","body":"I found that in `phalcon/queue/beanstalk.zep`, the choose method goes like this:\r\n```\r\nlet response = this->readStatus();\r\n    if response[0] != \"USING\" {\r\n\treturn false;\r\n    }\r\n\r\n    return response[1];\r\n```\r\nI think it's unnecessary to set this return value in case of normal return. Instead, we can use this to provide chain calls for the follow-up actions:\r\n```\r\nreturn this;\r\n```\r\n\r\nBTW,I dont'see the choose method and some other queue methods' usage in [doc](https://docs.phalconphp.com/en/3.2/queue), what's the problem of this?","score":1.0},{"url":"https://api.github.com/repos/phalcon/cphalcon/issues/13296","repository_url":"https://api.github.com/repos/phalcon/cphalcon","labels_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13296/labels{/name}","comments_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13296/comments","events_url":"https://api.github.com/repos/phalcon/cphalcon/issues/13296/events","html_url":"https://github.com/phalcon/cphalcon/issues/13296","id":295069387,"node_id":"MDU6SXNzdWUyOTUwNjkzODc=","number":13296,"title":"redirect to another url after delete a record from db, it thrown 502","user":{"login":"hisune","id":7941669,"node_id":"MDQ6VXNlcjc5NDE2Njk=","avatar_url":"https://avatars2.githubusercontent.com/u/7941669?v=4","gravatar_id":"","url":"https://api.github.com/users/hisune","html_url":"https://github.com/hisune","followers_url":"https://api.github.com/users/hisune/followers","following_url":"https://api.github.com/users/hisune/following{/other_user}","gists_url":"https://api.github.com/users/hisune/gists{/gist_id}","starred_url":"https://api.github.com/users/hisune/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hisune/subscriptions","organizations_url":"https://api.github.com/users/hisune/orgs","repos_url":"https://api.github.com/users/hisune/repos","events_url":"https://api.github.com/users/hisune/events{/privacy}","received_events_url":"https://api.github.com/users/hisune/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-02-07T09:46:36Z","updated_at":"2018-02-07T10:13:47Z","closed_at":"2018-02-07T10:13:46Z","author_association":"NONE","body":"```php\r\npublic function deleteAction($id)\r\n    {\r\n        $sys = Sys::findFirstByid($id);\r\n        if (!$sys) {\r\n            $this->flashSession->error(\"sys was not found\");\r\n            return $this->response->back();\r\n        }\r\n        $sys->delete();\r\n\r\n        $this->response->redirect('/sys/search');\r\n    }\r\n```\r\n\r\nthe record is deleted successfully, but after redirect, it thrown 502\r\n\r\nwhen i deleted `$sys->delete()` this line, it redirect normal.\r\n\r\n### my nginx error log\r\n```\r\n2018/02/07 17:52:14 [error] 45732#0: *2379 kevent() reported about an closed connection (54: Connection reset by peer) while reading response header from upstream, client: 127.0.0.1, server: bm.com, request: \"GET /sys/delete/16 HTTP/1.1\", upstream: \"fastcgi://127.0.0.1:9000\", host: \"localhost\", referrer: \"http://bm.com/sys/search\"\r\n```\r\n\r\n### Details\r\n\r\n* Phalcon version: 3.3.0 , 3.3.1 has the same problem\r\n* PHP Version: 7.1.13\r\n* Operating System: macos , centos has the same problem\r\n* Installation type: Compiling from source\r\n* Zephir version (if any):\r\n* Server: Nginx\r\n* Other related info (Database, table schema):  mysql 5.7\r\n","score":1.0}]}
0

