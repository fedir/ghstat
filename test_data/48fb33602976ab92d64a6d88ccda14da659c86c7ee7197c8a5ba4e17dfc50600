HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sun, 17 Jun 2018 23:59:22 GMT
Link: <https://api.github.com/search/issues?q=repo%3Abalderdashy%2Fsails+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Abalderdashy%2Fsails+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D4E1:7163:3CD3913:7C7321E:5B26F5D9
X-Ratelimit-Limit: 10
X-Ratelimit-Remaining: 9
X-Ratelimit-Reset: 1529280022
X-Runtime-Rack: 0.373037
X-Xss-Protection: 1; mode=block

8000
{"total_count":3543,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/balderdashy/sails/issues/4442","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4442/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4442/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4442/events","html_url":"https://github.com/balderdashy/sails/issues/4442","id":329989458,"node_id":"MDU6SXNzdWUzMjk5ODk0NTg=","number":4442,"title":"Sails error when adding a new model","user":{"login":"Hodor9898","id":7680436,"node_id":"MDQ6VXNlcjc2ODA0MzY=","avatar_url":"https://avatars2.githubusercontent.com/u/7680436?v=4","gravatar_id":"","url":"https://api.github.com/users/Hodor9898","html_url":"https://github.com/Hodor9898","followers_url":"https://api.github.com/users/Hodor9898/followers","following_url":"https://api.github.com/users/Hodor9898/following{/other_user}","gists_url":"https://api.github.com/users/Hodor9898/gists{/gist_id}","starred_url":"https://api.github.com/users/Hodor9898/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hodor9898/subscriptions","organizations_url":"https://api.github.com/users/Hodor9898/orgs","repos_url":"https://api.github.com/users/Hodor9898/repos","events_url":"https://api.github.com/users/Hodor9898/events{/privacy}","received_events_url":"https://api.github.com/users/Hodor9898/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-06-06T18:51:29Z","updated_at":"2018-06-07T10:41:04Z","closed_at":"2018-06-07T10:41:04Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: 1.0\r\n**Node version**: 8.10.0\r\n**NPM version**:  5.0.4\r\n**DB adapter name**:  postgres\r\n**DB adapter version**:  latest\r\n**Operating system**: windows\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [X] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [X] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [X] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [X] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [X] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [X] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n\r\nI migrated from sails 0.12 to 1.0, after i got everything to work i ran sails generate api <model> and then ran sails lift and i got the following error: \r\n\r\nI'm trying to run `sails lift` and I'm getting this error : \r\n\r\n\r\n```\r\nerror: A hook (`orm`) failed to load!\r\nerror: Could not tear down the ORM hook.  Error details: Error: Invalid data store identity. No data store exist with that identity.\r\n    at Object.teardown (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\helpers\\teardown.js:60:26)\r\n    at wrapper (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3275:19)\r\n    at Deferred._handleExec (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\node_modules\\machine\\lib\\private\\help-build-machine.js:1076:19)\r\n    at Deferred.exec (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\node_modules\\parley\\lib\\private\\Deferred.js:286:10)\r\n    at Deferred.switch (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\node_modules\\machine\\lib\\private\\help-build-machine.js:1469:16)\r\n    at teardownDatastore (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\lib\\adapter.js:96:18)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\node_modules\\async\\dist\\async.js:3047:20\r\n    at replenish (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\node_modules\\async\\dist\\async.js:884:21)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\node_modules\\async\\dist\\async.js:888:13\r\n    at eachLimit$1 (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\node_modules\\async\\dist\\async.js:3136:26)\r\n    at Object.<anonymous> (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\node_modules\\async\\dist\\async.js:920:20)\r\n    at Object.teardown (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-postgresql\\lib\\adapter.js:91:13)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline\\lib\\waterline.js:758:27\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline\\node_modules\\async\\dist\\async.js:3047:20\r\n    at eachOfArrayLike (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline\\node_modules\\async\\dist\\async.js:1002:13)\r\n    at eachOf (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline\\node_modules\\async\\dist\\async.js:1052:9)\r\n    at Object.eachLimit (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline\\node_modules\\async\\dist\\async.js:3111:7)\r\n    at Object.teardown (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline\\lib\\waterline.js:742:11)\r\n    at Hook.teardown (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\index.js:246:30)\r\n    at Sails.wrapper (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3275:19)\r\n    at Object.onceWrapper (events.js:313:30)\r\n    at emitNone (events.js:106:13)\r\n    at Sails.emit (events.js:208:7)\r\n    at Sails.emitter.emit (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\lib\\app\\private\\after.js:56:26)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\lib\\app\\lower.js:67:11\r\n    at beforeShutdown (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\lib\\app\\lower.js:45:12)\r\n    at Sails.lower (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\lib\\app\\lower.js:49:3)\r\n    at Sails.wrapper [as lower] (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3275:19)\r\n    at whenSailsIsReady (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\lib\\app\\lift.js:68:13)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\node_modules\\async\\dist\\async.js:3861:9\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\node_modules\\async\\dist\\async.js:421:16\r\n    at iterateeCallback (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\node_modules\\async\\dist\\async.js:924:17)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\node_modules\\async\\dist\\async.js:906:16\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails\\node_modules\\async\\dist\\async.js:3858:13\r\nerror: \r\nerror: TypeError: Cannot read property 'schema' of undefined\r\n    at lookForThroughProperty (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline-schema\\lib\\waterline-schema\\helpers\\flag-through-table.js:42:47)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3253:15\r\n    at baseForOwn (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:2223:14)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3223:18\r\n    at Function.<anonymous> (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3526:13)\r\n    at flagThroughTable (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline-schema\\lib\\waterline-schema\\helpers\\flag-through-table.js:26:5)\r\n    at parseCollectionAttributes (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline-schema\\lib\\waterline-schema\\joinTables.js:152:5)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3253:15\r\n    at baseForOwn (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:2223:14)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3223:18\r\n    at Function.<anonymous> (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\@sailshq\\lodash\\lib\\index.js:3526:13)\r\n    at buildJoinTables (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline-schema\\lib\\waterline-schema\\joinTables.js:34:5)\r\n    at new WaterlineSchema (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline-schema\\lib\\waterline-schema.js:42:3)\r\n    at Object.initialize (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\waterline\\lib\\waterline.js:581:26)\r\n    at buildOntologyAndRunAutoMigrations (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\lib\\build-ontology-and-run-auto-migrations.js:55:7)\r\n    at async.auto._buildOntology (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\lib\\initialize.js:456:7)\r\n    at runTask (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1660:17)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1602:17\r\n    at processQueue (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1612:17)\r\n    at taskComplete (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1630:13)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1653:21\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:339:31\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:847:20\r\n    at async.auto._checkAdapterCompatibility (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\lib\\initialize.js:428:14)\r\n    at runTask (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1660:17)\r\n    at C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1602:17\r\n    at processQueue (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1612:17)\r\n    at taskComplete (C:\\Users\\Admin\\WebstormProjects\\cheers-api\\node_modules\\sails-hook-orm\\node_modules\\async\\dist\\async.js:1630:13)\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4438","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4438/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4438/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4438/events","html_url":"https://github.com/balderdashy/sails/issues/4438","id":329321438,"node_id":"MDU6SXNzdWUzMjkzMjE0Mzg=","number":4438,"title":"How to handle MaxListener","user":{"login":"bibudha","id":4208874,"node_id":"MDQ6VXNlcjQyMDg4NzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/4208874?v=4","gravatar_id":"","url":"https://api.github.com/users/bibudha","html_url":"https://github.com/bibudha","followers_url":"https://api.github.com/users/bibudha/followers","following_url":"https://api.github.com/users/bibudha/following{/other_user}","gists_url":"https://api.github.com/users/bibudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bibudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bibudha/subscriptions","organizations_url":"https://api.github.com/users/bibudha/orgs","repos_url":"https://api.github.com/users/bibudha/repos","events_url":"https://api.github.com/users/bibudha/events{/privacy}","received_events_url":"https://api.github.com/users/bibudha/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-05T06:44:42Z","updated_at":"2018-06-11T06:01:34Z","closed_at":"2018-06-11T06:01:34Z","author_association":"NONE","body":"Sails version: 0.12.11\r\nNode version: 4.1.2\r\nNPM version: 7.6.0\r\nDB adapter name: mysql\r\nDB adapter version: N/A\r\nOperating system: Ubuntu\r\n----------------------------------\r\nHi I got this error in my sails project\r\n\r\nMaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 change listeners added. Use emitter.setMaxListeners() to increase limit\r\n\r\nHow to resolve this ?","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4432","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4432/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4432/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4432/events","html_url":"https://github.com/balderdashy/sails/issues/4432","id":328083763,"node_id":"MDU6SXNzdWUzMjgwODM3NjM=","number":4432,"title":"Sails watch","user":{"login":"Sjoerrdd","id":19862992,"node_id":"MDQ6VXNlcjE5ODYyOTky","avatar_url":"https://avatars2.githubusercontent.com/u/19862992?v=4","gravatar_id":"","url":"https://api.github.com/users/Sjoerrdd","html_url":"https://github.com/Sjoerrdd","followers_url":"https://api.github.com/users/Sjoerrdd/followers","following_url":"https://api.github.com/users/Sjoerrdd/following{/other_user}","gists_url":"https://api.github.com/users/Sjoerrdd/gists{/gist_id}","starred_url":"https://api.github.com/users/Sjoerrdd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sjoerrdd/subscriptions","organizations_url":"https://api.github.com/users/Sjoerrdd/orgs","repos_url":"https://api.github.com/users/Sjoerrdd/repos","events_url":"https://api.github.com/users/Sjoerrdd/events{/privacy}","received_events_url":"https://api.github.com/users/Sjoerrdd/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-31T10:29:26Z","updated_at":"2018-06-12T08:35:48Z","closed_at":"2018-06-12T08:35:48Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: Latest\r\n**Node version**: Node 10\r\n**NPM version**: 6.0.1\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**: Windows 10\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\nHello,\r\nIt would be nice to have a \"watch\" mode, for development. (So that I do not have to manually restart the server.)\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4431","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4431/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4431/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4431/events","html_url":"https://github.com/balderdashy/sails/issues/4431","id":327899754,"node_id":"MDU6SXNzdWUzMjc4OTk3NTQ=","number":4431,"title":"Error: Failed to serialize user into session  ","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-30T21:07:49Z","updated_at":"2018-05-30T22:04:01Z","closed_at":"2018-05-30T22:03:54Z","author_association":"NONE","body":"my passportjs file : \r\n\r\nwhat the henk is this ? someone here.! \r\n\r\n\r\n```\r\nconst passport = require('passport'),\r\n      LocalStrategy = require('passport-local').Strategy,\r\n\r\n      GitHubStrategy = require('passport-github2').Strategy,\r\n      TwitterStrategy = require('passport-twitter').Strategy,\r\n      FacebookStrategy = require('passport-facebook').Strategy,\r\n\r\n      shortid = require('shortid');\r\n      generatePassword = require('password-generator');\r\n\r\n\r\n      bcrypt = require('bcrypt');\r\n\r\n\r\n      /*\r\n      passport.serializeUser(function(user, done) {\r\n        done(null, user);\r\n      });\r\n      \r\n      passport.deserializeUser(function(user, done) {\r\n        done(null, user);\r\n      });\r\n*/\r\n\r\n      passport.serializeUser(function(user, done) {\r\n        done(null, user.id);\r\n    });\r\n   \r\n    passport.deserializeUser(function(id, done) {\r\n        User.findOneById(id).done(function (err, user) {\r\n            done(err, user);\r\n        });\r\n    });\r\n   \r\n      \r\n\r\npassport.use(new LocalStrategy({\r\n    usernameField: 'email',\r\n    passwordField: 'password'\r\n  },\r\n  function(email, password, done) {\r\n    \r\n    User.findOne({ email: email }, function (err, user) {\r\n      if (err) { return done(err); }\r\n      if (!user) {\r\n        return done(null, false, { message: 'Incorrect email.' });\r\n      }\r\n     \r\n      bcrypt.compare(password, user.password, function (err, res) {\r\n          if (!res)\r\n            return done(null, false, {\r\n              message: 'Invalid Password'\r\n            });\r\n          var returnUser = {\r\n            username: user.username,\r\n            createdAt: user.createdAt,\r\n            id: user.id\r\n          };\r\n          return done(null, returnUser, {\r\n            message: 'Logged In Successfully'\r\n          });\r\n        });\r\n    });\r\n  }\r\n));\r\n\r\n\r\n\r\n\r\n\r\npassport.use(new FacebookStrategy({\r\n  clientID: '169553873736123',\r\n  clientSecret: '3dfef9e57f803b5879700a27d9ff81c3',\r\n  callbackURL: \"http://localhost:1337/auth/facebook/callback\"\r\n},\r\nfunction(token, tokenSecret, profile, done) {\r\n  \r\n  User.findOne({ uid: profile.id, provider: profile.provider }, function(err, user) {\r\n  \r\n    if (user) {\r\n      return done(null, user);\r\n    } else {\r\n\r\n      var data = {\r\n        provider: profile.provider,\r\n        uid: profile.id,\r\n        username: profile.username\r\n      };\r\n\r\n      var shortid = require('shortid'),\r\n          generatePassword = require('password-generator');\r\n\r\n      //Let's generate a fake email and a fake password to match the User model attributes    \r\n      var fakeEmail = 'fake_' + new Date().getTime() + '_' + shortid.generate() + '@fake.com';\r\n          data.email = fakeEmail;\r\n\r\n      var password = generatePassword(12, false); \r\n          data.password = password;         \r\n\r\n          User.find(data, function(err, user) {\r\n            if (err) { return done(err); }\r\n            return done(null, user, {\r\n              message: 'Logged In Successfully'\r\n            });\r\n      });\r\n    }\r\n  });\r\n}\r\n));\r\n```\r\n\r\n\r\n\r\nmy terminal : \r\n\r\n```\r\n\r\n info: Starting app...\r\n\r\n info: ·• Auto-migrating...  (alter)\r\n info:    Hold tight, this could take a moment.\r\n info:  ✓ Auto-migration complete.\r\n\r\n info: \r\n info:                .-..-.\r\n info: \r\n info:    Sails              <|    .-..-.\r\n info:    v1.0.1              |\\\r\n info:                       /|.\\\r\n info:                      / || \\\r\n info:                    ,'  |'  \\\r\n info:                 .-'.-==|/_--'\r\n info:                 `--'-------' \r\n info:    __---___--___---___--___---___--___\r\n info:  ____---___--___---___--___---___--___-__\r\n info: \r\n info: Server lifted in `/Users/jh/Desktop/new/oauthy Kopie`\r\n info: To shut down Sails, press <CTRL> + C at any time.\r\n info: Read more at https://sailsjs.com/support.\r\n\r\ndebug: -------------------------------------------------------\r\ndebug: :: Wed May 30 2018 22:51:12 GMT+0200 (CEST)\r\n\r\ndebug: Environment : development\r\ndebug: Port        : 1337\r\ndebug: -------------------------------------------------------\r\nError: Failed to serialize user into session\r\n    at pass (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:281:19)\r\n    at serialized (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:286:7)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/config/passport.js:26:9\r\n    at pass (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:294:9)\r\n    at Authenticator.serializeUser (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:299:5)\r\n    at SessionManager.logIn (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/sessionmanager.js:14:8)\r\n    at IncomingMessage.req.login.req.logIn (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/http/request.js:50:33)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/api/controllers/AuthController.js:94:9\r\n    at Strategy.strategy.success (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/middleware/authenticate.js:214:18)\r\n    at verified (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport-oauth2/lib/strategy.js:177:20)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/config/passport.js:102:20\r\n    at _afterPotentiallyRunningAfterLC (/Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/methods/find.js:288:20)\r\n    at _maybeRunAfterLC (/Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/methods/find.js:282:20)\r\n    at _afterFetchingRecords (/Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/methods/find.js:284:13)\r\n    at _afterGettingPopulatedPhysicalRecords (/Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/utils/query/help-find.js:754:12)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/utils/query/help-find.js:151:16\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/lib/private/do-with-connection.js:239:16\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/lib/private/do-with-connection.js:123:18\r\n    at Object.success (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/lib/private/build-std-adapter-method.js:61:47)\r\n    at afterMaybeArtificiallyWaiting (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/machine/lib/private/intercept-exit-callbacks.js:406:21)\r\n    at maybeArtificiallyWait (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/machine/lib/private/intercept-exit-callbacks.js:220:20)\r\n    at afterPotentiallyCaching (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/machine/lib/private/intercept-exit-callbacks.js:240:11)\r\n\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4430","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4430/labels{/name}","comments_url":"https://api.github.com/repos/bal
8000
derdashy/sails/issues/4430/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4430/events","html_url":"https://github.com/balderdashy/sails/issues/4430","id":327863210,"node_id":"MDU6SXNzdWUzMjc4NjMyMTA=","number":4430,"title":"wtf???!!!!","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-30T19:14:26Z","updated_at":"2018-05-30T22:03:45Z","closed_at":"2018-05-30T22:03:41Z","author_association":"NONE","body":"Hello Everybody, \r\n\r\nI'm working on a sailsjs app, and i'm stuck here a little bit, with the property ID which is undefined, in my passport.js file. \r\n\r\nlike here a part of my <code>passport.js</code> file:\r\n\r\n\r\n```\r\n      passport.serializeUser(function(user, cb) {\r\n        cb(null, user.id);\r\n      });\r\n      passport.deserializeUser(function(id, cb){\r\n        User.findOne({id}, function(err, user) {\r\n          cb(err, users);\r\n        });\r\n      });\r\n```\r\n\r\nthis is allready my <code> passport.js</code> file : \r\n\r\n\r\n```\r\n\r\nconst passport = require('passport'),\r\n      LocalStrategy = require('passport-local').Strategy,\r\n\r\n      GitHubStrategy = require('passport-github2').Strategy,\r\n      TwitterStrategy = require('passport-twitter').Strategy,\r\n      FacebookStrategy = require('passport-facebook').Strategy,\r\n\r\n      shortid = require('shortid');\r\n      generatePassword = require('password-generator');\r\n\r\n\r\n      bcrypt = require('bcrypt');\r\n\r\n\r\n\r\n\r\n      passport.serializeUser(function(user, cb) {\r\n        cb(null, user.id);\r\n      });\r\n      passport.deserializeUser(function(id, cb){\r\n        User.findOne({id}, function(err, user) {\r\n          cb(err, users);\r\n        });\r\n      });\r\n      \r\n\r\npassport.use(new LocalStrategy({\r\n    usernameField: 'email',\r\n    passwordField: 'password'\r\n  },\r\n  function(email, password, done) {\r\n    \r\n    User.findOne({ email: email }, function (err, user) {\r\n      if (err) { return done(err); }\r\n      if (!user) {\r\n        return done(null, false, { message: 'Incorrect email.' });\r\n      }\r\n     \r\n      bcrypt.compare(password, user.password, function (err, res) {\r\n          if (!res)\r\n            return done(null, false, {\r\n              message: 'Invalid Password'\r\n            });\r\n          var returnUser = {\r\n            username: user.username,\r\n            createdAt: user.createdAt,\r\n            id: user.id\r\n          };\r\n          return done(null, returnUser, {\r\n            message: 'Logged In Successfully'\r\n          });\r\n        });\r\n    });\r\n  }\r\n));\r\n\r\n\r\n\r\n\r\n\r\npassport.use(new FacebookStrategy({\r\n  clientID: '169553873736123',\r\n  clientSecret: '3dfef9e57f803b5879700a27d9ff81c3',\r\n  callbackURL: \"http://localhost:1337/auth/facebook/callback\"\r\n},\r\nfunction(token, tokenSecret, profile, done) {\r\n  \r\n  User.findById({ uid: profile.id, provider: profile.provider }, function(err, user) {\r\n  \r\n    if (user) {\r\n      return done(null, user);\r\n    } else {\r\n\r\n      var data = {\r\n        provider: profile.provider,\r\n        uid: profile.id,\r\n        username: profile.username\r\n      };\r\n\r\n      var shortid = require('shortid'),\r\n          generatePassword = require('password-generator');\r\n\r\n      //Let's generate a fake email and a fake password to match the User model attributes    \r\n      var fakeEmail = 'fake_' + new Date().getTime() + '_' + shortid.generate() + '@fake.com';\r\n          data.email = fakeEmail;\r\n\r\n      var password = generatePassword(12, false); \r\n          data.password = password;         \r\n\r\n          User.create(data, function(err, user) {\r\n            return done(err, user);\r\n      });\r\n    }\r\n  });\r\n}\r\n));\r\n\r\n\r\n```\r\n\r\nthis is my terminal details which give me the error output : \r\n\r\n\r\n```\r\n info: Starting app...\r\n\r\n info: ·• Auto-migrating...  (alter)\r\n info:    Hold tight, this could take a moment.\r\n info:  ✓ Auto-migration complete.\r\n\r\n info: \r\n info:                .-..-.\r\n info: \r\n info:    Sails              <|    .-..-.\r\n info:    v1.0.1              |\\\r\n info:                       /|.\\\r\n info:                      / || \\\r\n info:                    ,'  |'  \\\r\n info:                 .-'.-==|/_--'\r\n info:                 `--'-------' \r\n info:    __---___--___---___--___---___--___\r\n info:  ____---___--___---___--___---___--___-__\r\n info: \r\n info: Server lifted in `/Users/jh/Desktop/new/oauthy Kopie`\r\n info: To shut down Sails, press <CTRL> + C at any time.\r\n info: Read more at https://sailsjs.com/support.\r\n\r\ndebug: -------------------------------------------------------\r\ndebug: :: Wed May 30 2018 18:09:26 GMT+0200 (CEST)\r\n\r\ndebug: Environment : development\r\ndebug: Port        : 1337\r\ndebug: -------------------------------------------------------\r\nTypeError: Cannot read property 'id' of undefined\r\n    at /Users/jh/Desktop/new/oauthy Kopie/config/passport.js:18:23\r\n    at pass (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:294:9)\r\n    at Authenticator.serializeUser (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:299:5)\r\n    at SessionManager.logIn (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/sessionmanager.js:14:8)\r\n    at IncomingMessage.req.login.req.logIn (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/http/request.js:50:33)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/api/controllers/AuthController.js:94:9\r\n    at Strategy.strategy.error (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/middleware/authenticate.js:353:18)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/passport-oauth2/lib/strategy.js:197:27\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/passport-facebook/lib/strategy.js:181:5\r\n    at passBackControl (/Users/jh/Desktop/new/oauthy Kopie/node_modules/oauth/lib/oauth2.js:134:9)\r\n    at IncomingMessage.<anonymous> (/Users/jh/Desktop/new/oauthy Kopie/node_modules/oauth/lib/oauth2.js:157:7)\r\n    at emitNone (events.js:111:20)\r\n    at IncomingMessage.emit (events.js:208:7)\r\n    at endReadableNT (_stream_readable.js:1064:12)\r\n    at _combinedTickCallback (internal/process/next_tick.js:138:11)\r\n    at process._tickDomainCallback (internal/process/next_tick.js:218:9)\r\n\r\n\r\n```\r\n\r\n\r\nthis is my <code>AuthController.js</code> file \r\n\r\n\r\n\r\n```\r\n// oAuth beginning here \r\n\r\nfacebook: function(req, res){\r\n\r\n  passport.authenticate('facebook')(req,res);\r\n\r\n},\r\n\r\nfacebookCallback: function(req, res){\r\n  \r\n   passport.authenticate('facebook', { failureRedirect: '/login' }, function(err, user) {\r\n    req.logIn(user, function(err) {\r\n\r\n      if (err) {\r\n        console.log(err);\r\n      res.view('500',  /*{layout: 'layouts/layout.ejs'}*/);\r\n        return;\r\n      }\r\n\r\n\r\n      res.redirect('/');\r\n      return;\r\n    });\r\n  })(req, res);\r\n\r\n},\r\n\r\n\r\n};\r\n\r\n```\r\n\r\n\r\nand this is my <code>User.js</code> file for the MongoDB etc. \r\n\r\n\r\n```\r\n/**\r\n * User.js\r\n *\r\n * @description :: A model definition.  Represents a database table/collection/etc.\r\n * @docs        :: https://sailsjs.com/docs/concepts/models-and-orm/models\r\n */\r\nconst bcrypt = require('bcrypt-nodejs');\r\n\r\nmodule.exports = {\r\n\r\n\r\n  datastores: 'mongodb',\r\n\r\n  attributes: {\r\n      email: {\r\n        type: 'string',\r\n        isEmail: true,\r\n      },\r\n    username: {\r\n      type: 'string',\r\n      required: true,\r\n      unique: true\r\n    },\r\n    password: {\r\n      type: 'string',\r\n      required: true\r\n    },\r\n    state: {\r\n      type: 'string',\r\n      isIn: ['pending', 'approved', 'denied'],\r\n      defaultsTo: 'pending'\r\n    },\r\n    provider: {\r\n      type: 'string',\r\n      isIn: ['local', 'github', 'twitter', 'facebook'],\r\n      defaultsTo: 'local'\r\n    },\r\n    uid: {\r\n      type: 'string'\r\n    },\r\n    // One-to-Many -> Add a reference to Posts \r\n \r\n    },\r\n  customToJSON: function() {\r\n     return _.omit(this, ['password'])\r\n  },\r\n  beforeCreate: function(user, cb){\r\n    bcrypt.genSalt(10, function(err, salt){\r\n      bcrypt.hash(user.password, salt, null, function(err, hash){\r\n        if(err) return cb(err);\r\n        user.password = hash;\r\n        return cb();\r\n      });\r\n    });\r\n  }\r\n};\r\n\r\n```\r\n\r\nthis is my url : which give a 500 error on sails.js -\r\n\r\n`http://localhost:1337/auth/facebook/callback?code=AQAsLIz2zQd2LiGvcYSOFmDhBlj4iqu4bq5aFVn3srYGDVsi5lBNMecn_XZYUg7FXatvAg-LMD_elb1CvX5QjkLOseer6_DNh93tnu2becGAOwIGmgZ98IYlHUqE-uzdfFvvXhOGaoAPzoZaK7S-fko-ci-GQJQ4fxoipFov6uM2nVdIwjrRW8T1jAu_F3LHD-MOpLztMwv_OKtJzezVNDTFL13OIVvI7_v0UEaOxjejRZfyinyQCFUtLvzOuGyqMeAkDEi1zP-nfmVP8txYPWyFYpX4CGsmWi-h9HRA_4ExCDw5SxhQX0bVgqFwb_DDhFSRZZ7hKMYgRcvt0BxcRUJo#_=_\r\n`\r\n\r\n\r\nwould be great when some can give me a tip or fixes! \r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4429","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4429/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4429/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4429/events","html_url":"https://github.com/balderdashy/sails/issues/4429","id":327802104,"node_id":"MDU6SXNzdWUzMjc4MDIxMDQ=","number":4429,"title":"TypeError: Cannot read property 'id' of undefined /config/passport.js:18:23 #244","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-30T16:15:42Z","updated_at":"2018-05-30T22:04:24Z","closed_at":"2018-05-30T22:04:16Z","author_association":"NONE","body":"Hello Everybody, \r\n\r\nI'm working on a sailsjs app, and i'm stuck here a little bit, with the property ID which is undefined, in my passport.js file. \r\n\r\nlike here a part of my <code>passport.js</code> file:\r\n\r\n\r\n```\r\n      passport.serializeUser(function(user, cb) {\r\n        cb(null, user.id);\r\n      });\r\n      passport.deserializeUser(function(id, cb){\r\n        User.findOne({id}, function(err, user) {\r\n          cb(err, users);\r\n        });\r\n      });\r\n```\r\n\r\nthis is allready my <code> passport.js</code> file : \r\n\r\n\r\n```\r\n\r\nconst passport = require('passport'),\r\n      LocalStrategy = require('passport-local').Strategy,\r\n\r\n      GitHubStrategy = require('passport-github2').Strategy,\r\n      TwitterStrategy = require('passport-twitter').Strategy,\r\n      FacebookStrategy = require('passport-facebook').Strategy,\r\n\r\n      shortid = require('shortid');\r\n      generatePassword = require('password-generator');\r\n\r\n\r\n      bcrypt = require('bcrypt');\r\n\r\n\r\n\r\n\r\n      passport.serializeUser(function(user, cb) {\r\n        cb(null, user.id);\r\n      });\r\n      passport.deserializeUser(function(id, cb){\r\n        User.findOne({id}, function(err, user) {\r\n          cb(err, users);\r\n        });\r\n      });\r\n      \r\n\r\npassport.use(new LocalStrategy({\r\n    usernameField: 'email',\r\n    passwordField: 'password'\r\n  },\r\n  function(email, password, done) {\r\n    \r\n    User.findOne({ email: email }, function (err, user) {\r\n      if (err) { return done(err); }\r\n      if (!user) {\r\n        return done(null, false, { message: 'Incorrect email.' });\r\n      }\r\n     \r\n      bcrypt.compare(password, user.password, function (err, res) {\r\n          if (!res)\r\n            return done(null, false, {\r\n              message: 'Invalid Password'\r\n            });\r\n          var returnUser = {\r\n            username: user.username,\r\n            createdAt: user.createdAt,\r\n            id: user.id\r\n          };\r\n          return done(null, returnUser, {\r\n            message: 'Logged In Successfully'\r\n          });\r\n        });\r\n    });\r\n  }\r\n));\r\n\r\n\r\n\r\n\r\n\r\npassport.use(new FacebookStrategy({\r\n  clientID: '169553873736123',\r\n  clientSecret: '3dfef9e57f803b5879700a27d9ff81c3',\r\n  callbackURL: \"http://localhost:1337/auth/facebook/callback\"\r\n},\r\nfunction(token, tokenSecret, profile, done) {\r\n  \r\n  User.findById({ uid: profile.id, provider: profile.provider }, function(err, user) {\r\n  \r\n    if (user) {\r\n      return done(null, user);\r\n    } else {\r\n\r\n      var data = {\r\n        provider: profile.provider,\r\n        uid: profile.id,\r\n        username: profile.username\r\n      };\r\n\r\n      var shortid = require('shortid'),\r\n          generatePassword = require('password-generator');\r\n\r\n      //Let's generate a fake email and a fake password to match the User model attributes    \r\n      var fakeEmail = 'fake_' + new Date().getTime() + '_' + shortid.generate() + '@fake.com';\r\n          data.email = fakeEmail;\r\n\r\n      var password = generatePassword(12, false); \r\n          data.password = password;         \r\n\r\n          User.create(data, function(err, user) {\r\n            return done(err, user);\r\n      });\r\n    }\r\n  });\r\n}\r\n));\r\n\r\n\r\n```\r\n\r\nthis is my terminal details which give me the error output : \r\n\r\n\r\n```\r\n info: Starting app...\r\n\r\n info: ·• Auto-migrating...  (alter)\r\n info:    Hold tight, this could take a moment.\r\n info:  ✓ Auto-migration complete.\r\n\r\n info: \r\n info:                .-..-.\r\n info: \r\n info:    Sails              <|    .-..-.\r\n info:    v1.0.1              |\\\r\n info:                       /|.\\\r\n info:                      / || \\\r\n info:                    ,'  |'  \\\r\n info:                 .-'.-==|/_--'\r\n info:                 `--'-------' \r\n info:    __---___--___---___--___---___--___\r\n info:  ____---___--___---___--___---___--___-__\r\n info: \r\n info: Server lifted in `/Users/jh/Desktop/new/oauthy Kopie`\r\n info: To shut down Sails, press <CTRL> + C at any time.\r\n info: Read more at https://sailsjs.com/support.\r\n\r\ndebug: -------------------------------------------------------\r\ndebug: :: Wed May 30 2018 18:09:26 GMT+0200 (CEST)\r\n\r\ndebug: Environment : development\r\ndebug: Port        : 1337\r\ndebug: -------------------------------------------------------\r\nTypeError: Cannot read property 'id' of undefined\r\n    at /Users/jh/Desktop/new/oauthy Kopie/config/passport.js:18:23\r\n    at pass (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:294:9)\r\n    at Authenticator.serializeUser (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:299:5)\r\n    at SessionManager.logIn (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/sessionmanager.js:14:8)\r\n    at IncomingMessage.req.login.req.logIn (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/http/request.js:50:33)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/api/controllers/AuthController.js:94:9\r\n    at Strategy.strategy.error (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/middleware/authenticate.js:353:18)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/passport-oauth2/lib/strategy.js:197:27\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/passport-facebook/lib/strategy.js:181:5\r\n    at passBackControl (/Users/jh/Desktop/new/oauthy Kopie/node_modules/oauth/lib/oauth2.js:134:9)\r\n    at IncomingMessage.<anonymous> (/Users/jh/Desktop/new/oauthy Kopie/node_modules/oauth/lib/oauth2.js:157:7)\r\n    at emitNone (events.js:111:20)\r\n    at IncomingMessage.emit (events.js:208:7)\r\n    at endReadableNT (_stream_readable.js:1064:12)\r\n    at _combinedTickCallback (internal/process/next_tick.js:138:11)\r\n    at process._tickDomainCallback (internal/process/next_tick.js:218:9)\r\n\r\n\r\n```\r\n\r\n\r\nthis is my <code>AuthController.js</code> file \r\n\r\n\r\n\r\n```\r\n// oAuth beginning here \r\n\r\nfacebook: function(req, res){\r\n\r\n  passport.authenticate('facebook')(req,res);\r\n\r\n},\r\n\r\nfacebookCallback: function(req, res){\r\n  \r\n   passport.authenticate('facebook', { failureRedirect: '/login' }, function(err, user) {\r\n    req.logIn(user, function(err) {\r\n\r\n      if (err) {\r\n        console.log(err);\r\n      res.view('500',  /*{layout: 'layouts/layout.ejs'}*/);\r\n        return;\r\n      }\r\n\r\n\r\n      res.redirect('/');\r\n      return;\r\n    });\r\n  })(req, res);\r\n\r\n},\r\n\r\n\r\n};\r\n\r\n```\r\n\r\n\r\nand this is my <code>User.js</code> file for the MongoDB etc. \r\n\r\n\r\n```\r\n/**\r\n * User.js\r\n *\r\n * @description :: A model definition.  Represents a database table/collection/etc.\r\n * @docs        :: https://sailsjs.com/docs/concepts/models-and-orm/models\r\n */\r\nconst bcrypt = require('bcrypt-nodejs');\r\n\r\nmodule.exports = {\r\n\r\n\r\n  datastores: 'mongodb',\r\n\r\n  attributes: {\r\n      email: {\r\n        type: 'string',\r\n        isEmail: true,\r\n      },\r\n    username: {\r\n      type: 'string',\r\n      required: true,\r\n      unique: true\r\n    },\r\n    password: {\r\n      type: 'string',\r\n      required: true\r\n    },\r\n    state: {\r\n      type: 'string',\r\n      isIn: ['pending', 'approved', 'denied'],\r\n      defaultsTo: 'pending'\r\n    },\r\n    provider: {\r\n      type: 'string',\r\n      isIn: ['local', 'github', 'twitter', 'facebook'],\r\n      defaultsTo: 'local'\r\n    },\r\n    uid: {\r\n      type: 'string'\r\n    },\r\n    // One-to-Many -> Add a reference to Posts \r\n \r\n    },\r\n  customToJSON: function() {\r\n     return _.omit(this, ['password'])\r\n  },\r\n  beforeCreate: function(user, cb){\r\n    bcrypt.genSalt(10, function(err, salt){\r\n      bcrypt.hash(user.password, salt, null, function(err, hash){\r\n        if(err) return cb(err);\r\n        user.password = hash;\r\n        return cb();\r\n      });\r\n    });\r\n  }\r\n};\r\n\r\n```\r\n\r\nthis is my url : which give a 500 error on sails.js -\r\n\r\n`http://localhost:1337/auth/facebook/callback?code=AQAsLIz2zQd2LiGvcYSOFmDhBlj4iqu4bq5aFVn3srYGDVsi5lBNMecn_XZYUg7FXatvAg-LMD_elb1CvX5QjkLOseer6_DNh93tnu2becGAOwIGmgZ98IYlHUqE-uzdfFvvXhOGaoAPzoZaK7S-fko-ci-GQJQ4fxoipFov6uM2nVdIwjrRW8T1jAu_F3LHD-MOpLztMwv_OKtJzezVNDTFL13OIVvI7_v0UEaOxjejRZfyinyQCFUtLvzOuGyqMeAkDEi1zP-nfmVP8txYPWyFYpX4CGsmWi-h9HRA_4ExCDw5SxhQX0bVgqFwb_DDhFSRZZ7hKMYgRcvt0BxcRUJo#_=_\r\n`\r\n\r\n\r\nwould be great when some can give me a tip or fixes! \r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4426","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4426/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4426/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4426/events","html_url":"https://github.com/balderdashy/sails/issues/4426","id":327197835,"node_id":"MDU6SXNzdWUzMjcxOTc4MzU=","number":4426,"title":"\"message\": \"Could not render view \\\"\\\".  Tried locating view file @ \\\"","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-29T07:21:56Z","updated_at":"2018-05-29T17:07:12Z","closed_at":"2018-05-29T17:07:11Z","author_association":"NONE","body":"Hello SailsJS World.\r\n\r\nI got this error back after acceptance the oauth for facebook, when i want callback to the homepage or startpage! would be great to get fit with it. here is my stackoverflow!! [https://stackoverflow.com/questions/50589084/sailsjs-message-could-not-render-view-e-view-failed-status-500](https://stackoverflow.com/questions/50589084/sailsjs-message-could-not-render-view-e-view-failed-status-500)\r\n\r\n```\r\n{\r\n  \"message\": \"Could not render view \\\"\\\".  Tried locating view file @ \\\"/Users/jh/Desktop/new/oauthy Kopie/views\\\". Layout configured as \\\"layout\\\", so tried using layout @ \\\"/Users/jh/Desktop/new/oauthy Kopie/views/layout\\\")\",\r\n  \"code\": \"E_VIEW_FAILED\",\r\n  \"status\": 500,\r\n  \"view\": {\r\n    \"defaultEngine\": \"ejs\",\r\n    \"ext\": \".ejs\",\r\n    \"name\": \"\",\r\n    \"root\": \"/Users/jh/Desktop/new/oauthy Kopie/views\"\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nand this is my AuthController.js file \r\n\r\n\r\n```\r\n\r\n// oAuth beginning here \r\n\r\nfacebook: function(req, res){\r\n\r\n  passport.authenticate('facebook')(req,res);\r\n\r\n},\r\n\r\nfacebookCallback: function(req, res){\r\n  \r\n   passport.authenticate('facebook', { failureRedirect: '/login' }, function(err, user) {\r\n    req.logIn(user, function(err) {\r\n\r\n      if (err) {\r\n        console.log(err);\r\n        res.view('/');\r\n        return;\r\n      }\r\n\r\n\r\n      res.redirect('/');\r\n      return;\r\n    });\r\n  })(req, res);\r\n\r\n},\r\n\r\n\r\n};\r\n\r\n```\r\n\r\nin this case when i remove this part \r\n\r\n```\r\n      if (err) {\r\n        console.log(err);\r\n        res.view('/');\r\n        return;\r\n      }\r\n\r\n```\r\n\r\ndoes it work, but this isn't the right way, where i have to include the view files? and which view files are missing there? \r\n\r\nin my sailsjs app , the structure are like this\r\n\r\n`Views=>Pages=>homepage.ejs`\r\n\r\nand the layouts like below \r\n\r\n`Views=>layouts=>layout.ejs`\r\n\r\nand this also my terminal\r\n\r\n```\r\ncodes-Mac-mini:oauthy Kopie jh$ sails lift\r\n\r\n info: Starting app...\r\n\r\n info: ·• Auto-migrating...  (alter)\r\n info:    Hold tight, this could take a moment.\r\n info:  ✓ Auto-migration complete.\r\n\r\n info: \r\n info:                .-..-.\r\n info: \r\n info:    Sails              <|    .-..-.\r\n info:    v1.0.1              |\\\r\n info:                       /|.\\\r\n info:                      / || \\\r\n info:                    ,'  |'  \\\r\n info:                 .-'.-==|/_--'\r\n info:                 `--'-------' \r\n info:    __---___--___---___--___---___--___\r\n info:  ____---___--___---___--___---___--___-__\r\n info: \r\n info: Server lifted in `/Users/jh/Desktop/new/oauthy Kopie`\r\n info: To shut down Sails, press <CTRL> + C at any time.\r\n info: Read more at https://sailsjs.com/support.\r\n\r\ndebug: -------------------------------------------------------\r\ndebug: :: Tue May 29 2018 18:00:30 GMT+0200 (CEST)\r\n\r\ndebug: Environment : development\r\ndebug: Port        : 1337\r\ndebug: -------------------------------------------------------\r\nTypeError: Cannot read property 'id' of undefined\r\n    at /Users/jh/Desktop/new/oauthy Kopie/config/passport.js:17:17\r\n    at pass (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:294:9)\r\n    at Authenticator.serializeUser (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/authenticator.js:299:5)\r\n    at SessionManager.logIn (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/sessionmanager.js:14:8)\r\n    at IncomingMessage.req.login.req.logIn (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/http/request.js:50:33)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/api/controllers/AuthController.js:94:9\r\n    at Strategy.strategy.error (/Users/jh/Desktop/new/oauthy Kopie/node_modules/passport/lib/middleware/authenticate.js:353:18)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/passport-oauth2/lib/strategy.js:197:27\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/passport-facebook/lib/strategy.js:181:5\r\n    at passBackControl (/Users/jh/Desktop/new/oauthy Kopie/node_modules/oauth/lib/oauth2.js:134:9)\r\n    at IncomingMessage.<anonymous> (/Users/jh/Desktop/new/oauthy Kopie/node_modules/oauth/lib/oauth2.js:157:7)\r\n    at emitNone (events.js:111:20)\r\n    at IncomingMessage.emit (events.js:208:7)\r\n    at endReadableNT (_stream_readable.js:1064:12)\r\n    at _combinedTickCallback (internal/process/next_tick.js:138:11)\r\n    at process._tickDomainCallback (internal/process/next_tick.js:218:9)\r\nerror: Sending 500 (\"Server Error\") response: \r\n Could not render view \"\".  Tried locating view file @ \"/Users/jh/Desktop/new/oauthy Kopie/views\". Layout configured as \"layout\", so tried using layout @ \"/Users/jh/Desktop/new/oauthy Kopie/views/layout\")\r\ndebug: ***********************************************************************************\r\ndebug: `res.jsonx()` is deprecated in Sails v1.0 and will be removed in a future release.\r\ndebug: Any files in `api/responses/` that haven't been customized can simply be removed.\r\ndebug: Otherwise see http://sailsjs.com/upgrading for options to replace `res.jsonx()`.\r\ndebug: (jsonx was called from `serverError`)\r\ndebug: ***********************************************************************************\r\n\r\n\r\n```\r\n\r\nand here is my views.js file!!!!!!\r\n\r\n```\r\n\r\n/**\r\n * View Engine Configuration\r\n * (sails.config.views)\r\n *\r\n * Server-sent views are a secure and effective way to get your app up\r\n * and running. Views are normally served from actions.  Below, you can\r\n * configure your templating language/framework of choice and configure\r\n * Sails' layout support.\r\n *\r\n * For details on available options for configuring server-side views, check out:\r\n * https://sailsjs.com/config/views\r\n *\r\n * For more background information on views and partials in Sails, check out:\r\n * https://sailsjs.com/docs/concepts/views\r\n */\r\n\r\nmodule.exports.views = {\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * Extension to use for your views. When calling `res.view()` in an action, *\r\n  * you can leave this extension off. For example, calling                   *\r\n  * `res.view('homepage')` will (using default settings) look for a          *\r\n  * `views/homepage.ejs` file.                                               *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\n  extension: 'ejs',\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * The path (relative to the views directory, and without extension) to     *\r\n  * the default layout file to use, or `false` to disable layouts entirely.  *\r\n  *                                                                          *\r\n  * Note that layouts only work with the built-in EJS view engine!           *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\n  layout: 'layout'\r\n\r\n};\r\n\r\n\r\n```\r\n\r\n\r\n**Sails version*1.0.1*:\r\n**Node version*v8.10.0*:\r\n**NPM version*6.0.0*:\r\n**DB adapter name*sails-mongo*: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4425","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4425/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4425/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4425/events","html_url":"https://github.com/balderdashy/sails/issues/4425","id":326804195,"node_id":"MDU6SXNzdWUzMjY4MDQxOTU=","number":4425,"title":"Attempting to tear down a datastore (`production`) which is not currently registered with this adapter","user":{"login":"garritfra","id":32395585,"node_id":"MDQ6VXNlcjMyMzk1NTg1","avatar_url":"https://avatars3.githubusercontent.com/u/32395585?v=4","gravatar_id":"","url":"https://api.github.com/users/garritfra","html_url":"https://github.com/garritfra","followers_url":"https://api.github.com/users/garritfra/followers","following_url":"https://api.github.com/users/garritfra/following{/other_user}","gists_url":"https://api.github.com/users/garritfra/gists{/gist_id}","starred_url":"https://api.github.com/users/garritfra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garritfra/subscriptions","organizations_url":"https://api.github.com/users/garritfra/orgs","repos_url":"https://api.github.com/users/garritfra/repos","events_url":"https://api.github.com/users/garritfra/events{/privacy}","received_events_url":"https://api.github.com/users/garritfra/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2018-05-27T10:18:16Z","updated_at":"2018-05-30T13:42:34Z","closed_at":"2018-05-30T13:42:33Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\npartic
8000
ularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: 1.0.2\r\n**Node version**: v8.9.4\r\n**NPM version**: 6.1.0\r\n**DB adapter name**: sails-mongo\r\n**DB adapter version**: 1.0.1\r\n**Operating system**: Mac OSX High Sierra\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ x ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ x ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ x ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ x ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ x ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ x ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n\r\n\r\n<details>\r\n<summary>I'm getting this stack trace</summary>\r\nCould not tear down the ORM hook.  Error details: Error: Consistency violation: Attempting to tear down a datastore (`production`) which is not currently registered with this adapter.  This is usually due to a race condition in userland code (e.g. attempting to tear down the same ORM instance more than once), or it could be due to a bug in this adapter.  (If you get stumped, reach out at http://sailsjs.com/support.)\r\n    at Object.teardown (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/sails-mongo/lib/index.js:390:19)\r\n    at /Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/waterline/lib/waterline.js:758:27\r\n    at /Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/async/dist/async.js:3047:20\r\n    at eachOfArrayLike (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/async/dist/async.js:1002:13)\r\n    at eachOf (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/async/dist/async.js:1052:9)\r\n    at Object.eachLimit (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/async/dist/async.js:3111:7)\r\n    at Object.teardown (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/waterline/lib/waterline.js:742:11)\r\n    at Hook.teardown (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/sails-hook-orm/index.js:246:30)\r\n    at Sails.wrapper (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/@sailshq/lodash/lib/index.js:3275:19)\r\n    at Object.onceWrapper (events.js:313:30)\r\n    at emitNone (events.js:106:13)\r\n    at Sails.emit (events.js:208:7)\r\n    at Sails.emitter.emit (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/sails/lib/app/private/after.js:56:26)\r\n    at /Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/sails/lib/app/lower.js:67:11\r\n    at beforeShutdown (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/sails/lib/app/lower.js:45:12)\r\n    at Sails.lower (/Users/garritfra/Documents/dev/GitHub/sailsBackend/node_modules/sails/lib/app/lower.js:49:3)\r\n</details>\r\n\r\n<details>\r\n<summary>My datastore config</summary>\r\n\r\n```js\r\n\r\n/**\r\n * Datastores\r\n * (sails.config.datastores)\r\n *\r\n * A set of datastore configurations which tell Sails where to fetch or save\r\n * data when you execute built-in model methods like `.find()` and `.create()`.\r\n *\r\n *  > This file is mainly useful for configuring your development database,\r\n *  > as well as any additional one-off databases used by individual models.\r\n *  > Ready to go live?  Head towards `config/env/production.js`.\r\n *\r\n * For more information on configuring datastores, check out:\r\n * https://sailsjs.com/config/datastores\r\n */\r\n\r\nmodule.exports.datastores = {\r\n  /***************************************************************************\r\n   *                                                                          *\r\n   * Your app's default datastore.                                            *\r\n   *                                                                          *\r\n   * Sails apps read and write to local disk by default, using a built-in     *\r\n   * database adapter called `sails-disk`.  This feature is purely for        *\r\n   * convenience during development; since `sails-disk` is not designed for   *\r\n   * use in a production environment.                                         *\r\n   *                                                                          *\r\n   * To use a different db _in development_, follow the directions below.     *\r\n   * Otherwise, just leave the default datastore as-is, with no `adapter`.    *\r\n   *                                                                          *\r\n   * (For production configuration, see `config/env/production.js`.)          *\r\n   *                                                                          *\r\n   ***************************************************************************/\r\n\r\n    production: {\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * Want to use a different database during development?                     *\r\n     *                                                                          *\r\n     * 1. Choose an adapter:                                                    *\r\n     *    https://sailsjs.com/plugins/databases                                 *\r\n     *                                                                          *\r\n     * 2. Install it as a dependency of your Sails app.                         *\r\n     *    (For example:  npm install sails-mysql --save)                        *\r\n     *                                                                          *\r\n     * 3. Then pass it in, along with a connection URL.                         *\r\n     *    (See https://sailsjs.com/config/datastores for help.)                 *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    adapter: 'sails-mongo',\r\n    url: 'mongodb://schulenberg:schulenberg@garrit-franke.de:27017/schulenberg',\r\n  },\r\n  default: {\r\n    adapter: 'sails-disk',\r\n  },\r\n};\r\n\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>env/production config</summary>\r\n\r\n```js\r\n\r\n/**\r\n * Production environment settings\r\n * (sails.config.*)\r\n *\r\n * What you see below is a quick outline of the built-in settings you need\r\n * to configure your Sails app for production.  The configuration in this file\r\n * is only used in your production environment, i.e. when you lift your app using:\r\n *\r\n * ```\r\n * NODE_ENV=production node app\r\n * ```\r\n *\r\n * > If you're using git as a version control solution for your Sails app,\r\n * > this file WILL BE COMMITTED to your repository by default, unless you add\r\n * > it to your .gitignore file.  If your repository will be publicly viewable,\r\n * > don't add private/sensitive data (like API secrets / db passwords) to this file!\r\n *\r\n * For more best practices and tips, see:\r\n * https://sailsjs.com/docs/concepts/deployment\r\n */\r\n\r\nmodule.exports = {\r\n  /**************************************************************************\r\n   *                                                                         *\r\n   * Tell Sails what database(s) it should use in production.                *\r\n   *                                                                         *\r\n   * (https://sailsjs.com/config/datastores)                                 *\r\n   *                                                                         *\r\n   **************************************************************************/\r\n  datastores: {\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * Configure your default production database.                              *\r\n     *                                                                          *\r\n     * 1. Choose an adapter:                                                    *\r\n     *    https://sailsjs.com/plugins/databases                                 *\r\n     *                                                                          *\r\n     * 2. Install it as a dependency of your Sails app.                         *\r\n     *    (For example:  npm install sails-mysql --save)                        *\r\n     *                                                                          *\r\n     * 3. Then set it here (`adapter`), along with a connection URL (`url`)     *\r\n     *    and any other, adapter-specific customizations.                       *\r\n     *    (See https://sailsjs.com/config/datastores for help.)                 *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    default: 'production',\r\n\r\n    //--------------------------------------------------------------------------\r\n    //  /\\   To avoid checking it in to version control, you might opt to set\r\n    //  ||   sensitive credentials like `url` using an environment variable.\r\n    //\r\n    //  For example:\r\n    //  ```\r\n    //  :sails_datastores__default__url=mysql://admin:myc00lpAssw2D@db.example.com:3306/my_prod_db\r\n    //  ```\r\n    //--------------------------------------------------------------------------\r\n\r\n    /****************************************************************************\r\n     *                                                                           *\r\n     * More adapter-specific options                                             *\r\n     *                                                                           *\r\n     * > For example, for some hosted PostgreSQL providers (like Heroku), the    *\r\n     * > extra `ssl: true` option is mandatory and must be provided.             *\r\n     *                                                                           *\r\n     * More info:                                                                *\r\n     * https://sailsjs.com/config/datastores                                     *\r\n     *                                                                           *\r\n     ****************************************************************************/\r\n    // ssl: true,\r\n  },\r\n\r\n  models: {\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * To help avoid accidents, Sails automatically sets the automigration      *\r\n     * strategy to \"safe\" when your app lifts in production mode.               *\r\n     * (This is just here as a reminder.)                                       *\r\n     *                                                                          *\r\n     * More info:                                                               *\r\n     * https://sailsjs.com/docs/concepts/models-and-orm/model-settings#?migrate *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    migrate: 'safe',\r\n\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * If, in production, this app has access to physical-layer CASCADE         *\r\n     * constraints (e.g. PostgreSQL or MySQL), then set those up in the         *\r\n     * database and uncomment this to disable Waterline's `cascadeOnDestroy`    *\r\n     * polyfill.  (Otherwise, if you are using a databse like Mongo, you might  *\r\n     * choose to keep this enabled.)                                            *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    // cascadeOnDestroy: false,\r\n  },\r\n\r\n  /**************************************************************************\r\n   *                                                                         *\r\n   * Always disable \"shortcut\" blueprint routes.                             *\r\n   *                                                                         *\r\n   * > You'll also want to disable any other blueprint routes if you are not *\r\n   * > actually using them (e.g. \"actions\" and \"rest\") -- but you can do     *\r\n   * > that in `config/blueprints.js`, since you'll want to disable them in  *\r\n   * > all environments (not just in production.)                            *\r\n   *                                                                         *\r\n   ***************************************************************************/\r\n  blueprints: {\r\n    shortcuts: false,\r\n  },\r\n\r\n  /***************************************************************************\r\n   *                                                                          *\r\n   * Configure your security settings for production.                         *\r\n   *                                                                          *\r\n   * IMPORTANT:                                                               *\r\n   * If web browsers will be communicating with your app, be sure that        *\r\n   * you have CSRF protection enabled.  To do that, set `csrf: true` over     *\r\n   * in the `config/security.js` file (not here), so that CSRF app can be     *\r\n   * tested with CSRF protection turned on in development mode too.           *\r\n   *                                                                          *\r\n   ***************************************************************************/\r\n  security: {\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * If this app has CORS enabled (see `config/security.js`) with the         *\r\n     * `allowCredentials` setting enabled, then you should uncomment the        *\r\n     * `allowOrigins` whitelist below.  This sets which \"origins\" are allowed   *\r\n     * to send cross-domain (CORS) requests to your Sails app.                  *\r\n     *                                                                          *\r\n     * > Replace \"https://example.com\" with the URL of your production server.  *\r\n     * > Be sure to use the right protocol!  (\"http://\" vs. \"https://\")         *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    cors: {\r\n      // allowOrigins: [\r\n      //   'https://example.com',\r\n      // ]\r\n    },\r\n  },\r\n\r\n  /***************************************************************************\r\n   *                                                                          *\r\n   * Configure how your app handles sessions in production.                   *\r\n   *                                                                          *\r\n   * (https://sailsjs.com/config/session)                                     *\r\n   *                                                                          *\r\n   * > If you have disabled the \"session\" hook, then you can safely remove    *\r\n   * > this section from your `config/env/production.js` file.                *\r\n   *                                                                          *\r\n   ***************************************************************************/\r\n  session: {\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * Production session store configuration.                                  *\r\n     *                                                                          *\r\n     * Uncomment the following lines to finish setting up a package called      *\r\n     * \"@sailshq/connect-redis\" that will use Redis to handle session data.     *\r\n     * This makes your app more scalable by allowing you to share sessions      *\r\n     * across a cluster of multiple Sails/Node.js servers and/or processes.     *\r\n     * (See http://bit.ly/redis-session-config for more info.)                  *\r\n     *                                                                          *\r\n     * > While @sailshq/connect-redis is a popular choice for Sails apps, many  *\r\n     * > other compatible packages (like \"connect-mongo\") are available on NPM. *\r\n     * > (For a full list, see https://sailsjs.com/plugins/sessions)            *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    // adapter: '@sailshq/connect-redis',\r\n    // url: 'redis://user:password@localhost:6379/databasenumber',\r\n    //--------------------------------------------------------------------------\r\n    // /\\   OR, to avoid checking it in to version control, you might opt to\r\n    // ||   set sensitive credentials like this using an environment variable.\r\n    //\r\n    // For example:\r\n    // ```\r\n    // sails_session__url=redis://admin:myc00lpAssw2D@bigsquid.redistogo.com:9562/0\r\n    // ```\r\n    //\r\n    //--------------------------------------------------------------------------\r\n\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * Production configuration for the session ID cookie.                      *\r\n     *                                                                          *\r\n     * Tell browsers (or other user agents) to ensure that session ID cookies   *\r\n     * are always transmitted via HTTPS, and that they expire 24 hours after    *\r\n     * they are set.                                                            *\r\n     *                                                                          *\r\n     * Note that with `secure: true` set, session cookies will _not_ be         *\r\n     * transmitted over unsecured (HTTP) connections. Also, for apps behind     *\r\n     * proxies (like Heroku), the `trustProxy` setting under `http` must be     *\r\n     * configured in order for `secure: true` to work.                          *\r\n     *                                                                          *\r\n     * > While you might want to increase or decrease the `maxAge` or provide   *\r\n     * > other options, you should always set `secure: true` in production      *\r\n     * > if the app is being served over HTTPS.                                 *\r\n     *                                                                          *\r\n     * Read more:                                                               *\r\n     * https://sailsjs.com/config/session#?the-session-id-cookie                *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    cookie: {\r\n      // secure: true,\r\n      maxAge: 24 * 60 * 60 * 1000, // 24 hours\r\n    },\r\n  },\r\n\r\n  /**************************************************************************\r\n   *                                                                          *\r\n   * Set up Socket.io for your production environment.                        *\r\n   *                                                                          *\r\n   * (https://sailsjs.com/config/sockets)                                     *\r\n   *                                                                          *\r\n   * > If you have disabled the \"sockets\" hook, then you can safely remove    *\r\n   * > this section from your `config/env/production.js` file.                *\r\n   *                                                                          *\r\n   ***************************************************************************/\r\n  sockets: {\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * Uncomment the `onlyAllowOrigins` whitelist below to configure which      *\r\n     * \"origins\" are allowed to open socket connections to your Sails app.      *\r\n     *                                                                          *\r\n     * > Replace \"https://example.com\" etc. with the URL(s) of your app.        *\r\n     * > Be sure to use the right protocol!  (\"http://\" vs. \"https://\")         *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    // onlyAllowOrigins: [\r\n    //   'https://example.com',\r\n    //   'https://staging.example.com',\r\n    // ],\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * If you are deploying a cluster of multiple servers and/or processes,     *\r\n     * then uncomment the following lines.  This tells Socket.io about a Redis  *\r\n     * server it can use to help it deliver broadcasted socket messages.        *\r\n     *                                                                          *\r\n     * > Be sure a compatible version of @sailshq/socket.io-redis is installed! *\r\n     * > (See https://sailsjs.com/config/sockets for the latest version info)   *\r\n     *                                                                          *\r\n     * (https://sailsjs.com/docs/concepts/deployment/scaling)                   *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    // adapter: '@sailshq/socket.io-redis',\r\n    // url: 'redis://user:password@bigsquid.redistogo.com:9562/databasenumber',\r\n    //--------------------------------------------------------------------------\r\n    // /\\   OR, to avoid checking it in to version control, you might opt to\r\n    // ||   set sensitive credentials like this using an environment variable.\r\n    //\r\n    // For example:\r\n    // ```\r\n    // sails_sockets__url=redis://admin:myc00lpAssw2D@bigsquid.redistogo.com:9562/0\r\n    // ```\r\n    //--------------------------------------------------------------------------\r\n  },\r\n\r\n  /**************************************************************************\r\n   *                                                                         *\r\n   * Set the production log level.                                           *\r\n   *                                                                         *\r\n   * (https://sailsjs.com/config/log)                                        *\r\n   *                                                                         *\r\n   ***************************************************************************/\r\n  log: {\r\n    level: 'debug',\r\n  },\r\n\r\n  http: {\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * The number of milliseconds to cache static assets in production.         *\r\n     * (the \"max-age\" to include in the \"Cache-Control\" response header)        *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    cache: 365.25 * 24 * 60 * 60 * 1000, // One year\r\n\r\n    /***************************************************************************\r\n     *                                                                          *\r\n     * Proxy settings                                                           *\r\n     *                                                                          *\r\n     * If your app will be deployed behind a proxy/load balancer - for example, *\r\n     * on a PaaS like Heroku - then uncomment the `trustProxy` setting below.   *\r\n     * This tells Sails/Express how to interpret X-Forwarded headers.           *\r\n     *                                                                          *\r\n     * This setting is especially important if you are using secure cookies     *\r\n     * (see the `cookies: secure` setting under `session` above) or if your app *\r\n     * relies on knowing the original IP address that a request came from.      *\r\n     *                                                                          *\r\n     * (https://sailsjs.com/config/http)                                        *\r\n     *                                                                          *\r\n     ***************************************************************************/\r\n    // trustProxy: true,\r\n  },\r\n\r\n  /**************************************************************************\r\n   *                                                                         *\r\n   * Lift the server on port 80.                                             *\r\n   * (if deploying behind a proxy, or to a PaaS like Heroku or Deis, you     *\r\n   * probably don't need to set a port here, because it is oftentimes        *\r\n   * handled for you automatically.  If you are not sure if you need to set  *\r\n   * this, just try deploying without setting it and see if it works.)       *\r\n   *                                                                         *\r\n   ***************************************************************************/\r\n  // port: 80,\r\n\r\n  /**************************************************************************\r\n   *                                                                         *\r\n   * Configure an SSL certificate                                            *\r\n   *                                                                         *\r\n   * For the safety of your users' data, you should use SSL in production.   *\r\n   * ...But in many cases, you may not actually want to set it up _here_.    *\r\n   *                                                                         *\r\n   * Normally, this setting is only relevant when running a single-process   *\r\n   * deployment, with no proxy/load balancer in the mix.  But if, on the     *\r\n   * other hand, you are using a PaaS like Heroku, you'll want to set up     *\r\n   * SSL in your load balancer settings (usually somewhere in your hosting   *\r\n   * provider's dashboard-- not here.)                                       *\r\n   *                                                                         *\r\n   * > For more information about configuring SSL in Sails, see:             *\r\n   * > https://sailsjs.com/config/*#?sailsconfigssl                          *\r\n   *                                                                         *\r\n   **************************************************************************/\r\n  // ssl: undefined,\r\n\r\n  /**************************************************************************\r\n   *                                                                         *\r\n   * Production overrides for any custom settings specific to your app.      *\r\n   * (for example, production credentials for 3rd party APIs like Stripe)    *\r\n   *                                                                         *\r\n   * > See config/custom.js for more info on how to configure these options. *\r\n   *                                                                         *\r\n   ***************************************************************************/\r\n  custom: {\r\n    baseUrl: 'https://example.com',\r\n    internalEmailAddress: 'support@example.com',\r\n\r\n    // mailgunDomain: 'mg.example.com',\r\n    // mailgunSecret: 'key-prod_fake_bd32301385130a0bafe030c',\r\n    // stripeSecret: 'sk_prod__fake_Nfgh82401348jaDa3lkZ0d9Hm',\r\n    //--------------------------------------------------------------------------\r\n    // /\\   OR, to avoid checking them in to version control, you might opt to\r\n    // ||   set sensitive credentials like these using environment variables.\r\n    //\r\n    // For example:\r\n    // ```\r\n    // sails_custom__mailgunDomain=mg.example.com\r\n    // sails_custom__mailgunSecret=key-prod_fake_bd32301385130a0bafe030c\r\n    // sails_custom__stripeSecret=sk_prod__fake_Nfgh82401348jaDa3lkZ0d9Hm\r\n    // ```\r\n    //--------------------------------------------------------------------------\r\n  },\r\n};\r\n\r\n```\r\n\r\n</details>\r\n\r\nMy ~~lack o
8000
f~~ knowledge about ORM doesn't get me far. When trying to lift, the app crashes as it is trying to connect to the database. Any solutions? in #4069 there seemed to be a similar problem, But I'm confused on how to fix the error.\r\n\r\nThanks in advance!\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4421","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4421/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4421/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4421/events","html_url":"https://github.com/balderdashy/sails/issues/4421","id":325949258,"node_id":"MDU6SXNzdWUzMjU5NDkyNTg=","number":4421,"title":"sails-disk update() error: Invalid primary key value.","user":{"login":"Lovinity","id":11471458,"node_id":"MDQ6VXNlcjExNDcxNDU4","avatar_url":"https://avatars3.githubusercontent.com/u/11471458?v=4","gravatar_id":"","url":"https://api.github.com/users/Lovinity","html_url":"https://github.com/Lovinity","followers_url":"https://api.github.com/users/Lovinity/followers","following_url":"https://api.github.com/users/Lovinity/following{/other_user}","gists_url":"https://api.github.com/users/Lovinity/gists{/gist_id}","starred_url":"https://api.github.com/users/Lovinity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lovinity/subscriptions","organizations_url":"https://api.github.com/users/Lovinity/orgs","repos_url":"https://api.github.com/users/Lovinity/repos","events_url":"https://api.github.com/users/Lovinity/events{/privacy}","received_events_url":"https://api.github.com/users/Lovinity/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-24T03:16:57Z","updated_at":"2018-05-29T18:21:03Z","closed_at":"2018-05-29T18:21:03Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: 1.0.1\r\n**Node version**: 8.4.0 x64\r\n**NPM version**: 5.7.1\r\n**DB adapter name**: sails-disk\r\n**DB adapter version**: 1.0.1\r\n**Operating system**: Windows 7\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [X ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [X ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [X ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [X ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [X ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [X ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n\r\nWhen attempting to call Model.update() on a sails-disk model, an error is thrown. UsageError: Cannot perform update with the provided values.\r\nDetails:\r\nCould not use specified `ID`. Invalid primary key value. Instead of a number (expected pk type), got: null\r\n\r\n**config/model.js:**\r\nprimaryKey: 'ID'\r\n\r\n**Example Model attributes of one of the models affected:**\r\n```\r\n    datastore: 'memory',\r\n    attributes: {\r\n        ID: {\r\n            type: 'number',\r\n            autoIncrement: true,\r\n        },\r\n\r\n        name: {\r\n            type: 'string'\r\n        },\r\n\r\n        label: {\r\n            type: 'string'\r\n        },\r\n\r\n        status: {\r\n            type: 'number',\r\n            min: 1,\r\n            max: 5,\r\n            defaultsTo: 4\r\n        },\r\n\r\n        // websocket API note: Do not use time in client code; changes to time will not be pushed in sockets to avoid unnecessary data transfer.\r\n        time: {\r\n            type: 'ref',\r\n            columnType: 'datetime'\r\n        }\r\n    },\r\n```\r\n**One of the calls**\r\n```\r\nawait Status.update({name: status.name}, criteria)\r\n                                    .intercept((err) => {\r\n                                        return reject(err);\r\n                                    });\r\n```\r\n(the criteria object does not contain an ID property).\r\n\r\n**What I have tried**\r\n\r\n- Suggested config for the id column of MongoDB... eg. ID: { type: 'string', columnName: '_id' }. Fails... required either an autoIncrement, required, or unique property (this is a separate doc issue you may wish to look into).\r\n-  ID: { type: 'number', autoIncrement: true, columnName: '_id'}. No change to the issue.\r\n\r\n**Notes**\r\n- This may or may not be a bug; it may be bad usage on my end. But I am having trouble finding correct use.\r\n- create() and destroy() work fine; this only happens with update().\r\n- A github repository is up for this WIP app; you can check it out at https://github.com/Lovinity/wwsu . The code examples come from api/models/Status.js changeStatus function. I did not, however, commit config/models.js due to the encryption key present in that file.\r\n- I cannot make ID required; code does not know what the ID is for the record needing updating. And that would require unnecessary find() calls.","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4420","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4420/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4420/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4420/events","html_url":"https://github.com/balderdashy/sails/issues/4420","id":325528142,"node_id":"MDU6SXNzdWUzMjU1MjgxNDI=","number":4420,"title":"Sails `res.redirect` get `??` when the url param contains chinese char.","user":{"login":"freestyle21","id":3271828,"node_id":"MDQ6VXNlcjMyNzE4Mjg=","avatar_url":"https://avatars1.githubusercontent.com/u/3271828?v=4","gravatar_id":"","url":"https://api.github.com/users/freestyle21","html_url":"https://github.com/freestyle21","followers_url":"https://api.github.com/users/freestyle21/followers","following_url":"https://api.github.com/users/freestyle21/following{/other_user}","gists_url":"https://api.github.com/users/freestyle21/gists{/gist_id}","starred_url":"https://api.github.com/users/freestyle21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freestyle21/subscriptions","organizations_url":"https://api.github.com/users/freestyle21/orgs","repos_url":"https://api.github.com/users/freestyle21/repos","events_url":"https://api.github.com/users/freestyle21/events{/privacy}","received_events_url":"https://api.github.com/users/freestyle21/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-23T02:37:28Z","updated_at":"2018-05-30T22:14:17Z","closed_at":"2018-05-30T22:14:17Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: v0.11.5\r\n**Node version**: v8.9.0\r\n**NPM version**: 5.6.0\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**: mac os 10.11.6\r\n**Chrome version**: 66.0.3359.139\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n\r\n\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n\r\n\r\n ### Issue Description\r\nHello, When I used sails `res.redirect` api，get some trouble.\r\n\r\nMy Code:\r\n\r\n```\r\nres.redirect('/audit?status=3000&step=/info&failreason=%E9%A9%BE%E9%BE%84%E4%B8%8D%E7%AC%A6%E5%90%88%E8%A6%81%E6%B1%82%EF%BC%88%E5%AE%9E%E9%99%85%E9%A9%BE%E9%BE%841%E5%B9%B4%E4%BB%A5%E4%B8%8A%EF%BC%89%EF%BC%9B');\r\n\r\n```\r\n\r\nBut，the unexpected result in chrome：\r\n\r\n![image](https://user-images.githubusercontent.com/3271828/40360197-db56bf4c-5df7-11e8-91a5-4f9bb975df4f.png)\r\n\r\nthe url param contains chinese word，It's ok when changed to normal character (a-Z)\r\n\r\n\r\nLook forward to your reply，Thx!","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4418","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4418/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4418/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4418/events","html_url":"https://github.com/balderdashy/sails/issues/4418","id":325254004,"node_id":"MDU6SXNzdWUzMjUyNTQwMDQ=","number":4418,"title":"Sails `res.redirect` get `??` when the","user":{"login":"freestyle21","id":3271828,"node_id":"MDQ6VXNlcjMyNzE4Mjg=","avatar_url":"https://avatars1.githubusercontent.com/u/3271828?v=4","gravatar_id":"","url":"https://api.github.com/users/freestyle21","html_url":"https://github.com/freestyle21","followers_url":"https://api.github.com/users/freestyle21/followers","following_url":"https://api.github.com/users/freestyle21/following{/other_user}","gists_url":"https://api.github.com/users/freestyle21/gists{/gist_id}","starred_url":"https://api.github.com/users/freestyle21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freestyle21/subscriptions","organizations_url":"https://api.github.com/users/freestyle21/orgs","repos_url":"https://api.github.com/users/freestyle21/repos","events_url":"https://api.github.com/users/freestyle21/events{/privacy}","received_events_url":"https://api.github.com/users/freestyle21/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-22T11:34:19Z","updated_at":"2018-05-22T11:34:42Z","closed_at":"2018-05-22T11:34:42Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**:\r\n**Node version**:\r\n**NPM version**:\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4417","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4417/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4417/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4417/events","html_url":"https://github.com/balderdashy/sails/issues/4417","id":325106781,"node_id":"MDU6SXNzdWUzMjUxMDY3ODE=","number":4417,"title":"My issue is thanks","user":{"login":"lukeheath","id":2495927,"node_id":"MDQ6VXNlcjI0OTU5Mjc=","avatar_url":"https://avatars3.githubusercontent.com/u/2495927?v=4","gravatar_id":"","url":"https://api.github.com/users/lukeheath","html_url":"https://github.com/lukeheath","followers_url":"https://api.github.com/users/lukeheath/followers","following_url":"https://api.github.com/users/lukeheath/following{/other_user}","gists_url":"https://api.github.com/users/lukeheath/gists{/gist_id}","starred_url":"https://api.github.com/users/lukeheath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukeheath/subscriptions","organizations_url":"https://api.github.com/users/lukeheath/orgs","repos_url":"https://api.github.com/users/lukeheath/repos","events_url":"https://api.github.com/users/lukeheath/events{/privacy}","received_events_url":"https://api.github.com/users/lukeheath/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-22T01:03:57Z","updated_at":"2018-05-30T23:08:37Z","closed_at":"2018-05-30T22:21:23Z","author_association":"NONE","body":"@GitCash please send 5000 bits to @mikermcneil to say thanks for the awesome framework.","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4416","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4416/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4416/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4416/events","html_url":"https://github.com/balderdashy/sails/issues/4416","id":324978259,"node_id":"MDU6SXNzdWUzMjQ5NzgyNTk=","number":4416,"title":"62 vulnerabilities found in a new sails project ","user":{"login":"suskind","id":195567,"node_id":"MDQ6VXNlcjE5NTU2Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/195567?v=4","gravatar_id":"","url":"https://api.github.com/users/suskind","html_url":"https://github.com/suskind","followers_url":"https://api.github.com/users/suskind/followers","following_url":"https://api.github.com/users/suskind/following{/other_user}","gists_url":"https://api.github.com/users/suskind/gists{/gist_id}","starred_url":"https://api.github.com/users/suskind/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suskind/subscriptions","organizations_url":"https://api.github.com/users/suskind/orgs","repos_url":"https://api.github.com/users/suskind/repos","events_url":"https://api.github.com/users/suskind/events{/privacy}","received_events_url":"https://api.github.com/users/suskind/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-21T16:26:50Z","updated_at":"2018-05-30T22:18:39Z","closed_at":"2018-05-30T22:18:39Z","author_association":"NONE","body":"\r\nHi, \r\n\r\nduring last week I've been trying sails for the first time in a new project. \r\n\r\nWith node `8.6.0`, npm `6.0.1` and sails `1.0.2`, creating a new fresh project with `sails new project_name`   and  running `npm audit` got this surprised result\r\n\r\n```\r\n[!] 62 vulnerabilities found - Packages audited: 3891 (220 dev, 76 optional)\r\n    Severity: 58 Low | 1 Moderate | 1 High | 2 Critical\r\n\r\n```\r\n\r\nTried to follow the instructions given by `npm audit` but it does not solve the problem. \r\n\r\nI'm really afraid in put this in production \r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4412","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4412/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4412/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4412/events","html_url":"https://github.com/balderdashy/sails/issues/4412","id":324345548,"node_id":"MDU6SXNzdWUzMjQzNDU1NDg=","number":4412,"title":"redis password include ':' will be split","user":{"login":"chestermax01","id":6769787,"node_id":"MDQ6VXNlcjY3Njk3ODc=","avatar_url":"https://avatars3.githubusercontent.com/u/6769787?v=4","gravatar_id":"","url":"https://api.github.com/users/chestermax01","html_url":"https://github.com/chestermax01","followers_url":"https://api.github.com/users/chestermax01/followers","following_url":"https://api.github.com/users/chestermax01/following{/other_user}","gists_url":"https://api.github.com/users/chestermax01/gists{/gist_id}","starred_url":"https://api.github.com/users/chestermax01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chestermax01/subscriptions","organizations_url":"https://api.github.com/users/chestermax01/orgs","repos_url":"https://api.github.com/users/chestermax01/repos","events_url":"https://api.github.com/users/chestermax01/events{/privacy}","received_events_url":"https://api.github.com/users/chestermax01/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-18T09:56:57Z","updated_at":"2018-05-21T04:25:20Z","closed_at":"2018-05-21T04:25:20Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**:1.0.2\r\n**Node version**:8.9.4\r\n**NPM version**:5.6.0\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:ubuntu\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\nIf your redis auth password include ':' like 'test:myhost.com' ,it will be change to 'test', then connect redis show error : The password supplied to the Redis server was incorrect.","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4410","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4410/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4410/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4410/events","html_url":"https://github.com/balderdashy/sails/issues/4410","id":323834787,"node_id":"MDU6SXNzdWUzMjM4MzQ3ODc=","number":4410,"title":"[1.0] New installation fails","user":{"login":"vcastrejont","id":780576,"node_id":"MDQ6VXNlcjc4MDU3Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/780576?v=4","gravatar_id":"","url":"https://api.github.com/users/vcastrejont","html_url":"https://github.com/vcastrejont","followers_url":"https://api.github.com/users/vcastrejont/followers","following_url":"https://api.github.com/users/vcastrejont/following{/other_user}","gists_url":"https://api.github.com/users/vcastrejont/gists{/gist_id}","starred_url":"https://api.github.com/users/vcastrejont/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcastrejont/subscriptions","organizations_url":"https://api.github.com/users/vcastrejont/orgs","repos_url":"https://api.github.com/users/vcastrejont/repos","events_url":"https://api.github.com/users/vcastrejont/events{/privacy}","received_events_url":"https://api.github.com/users/vcastrejont/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-17T00:45:35Z","updated_at":"2018-05-17T14:43:39Z","closed_at":"2018-05-17T14:43:39Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-techni
8000
cal nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n**Sails version**: 1.0.2\r\n**Node version**: 8.11.1\r\n**NPM version**: 6.0.1\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**: MacOs\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [x] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [x] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [x] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [x] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [x] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [x] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\nFirst time Sails user here\r\nI used:\r\n\r\n```\r\nnpm install sails -g\r\nsails new test-project\r\n1. Web App\r\ncd test-project\r\nsails lift\r\n```\r\n\r\nResponse:\r\n\r\n> error: A hook (`userconfig`) failed to load!\r\n> error:\r\n> error: As of Sails v1, `sails.config.globals._` must be either `false` or a locally-installed version of Lodash (typically `require('lodash')`).  For more info, see http://sailsjs.com/config/globals\r\n\r\nI have edited the` congif/globals/js` uncomment and swtich everything to false and now I get a grunt error\r\n\r\n> Error: Attempted to `require('/Users/vcastrejon/www/web/sails/tasks/config/watch.js')`, but an error occurred:\r\n>> --\r\n>> /Users/vcastrejon/www/web/sails/tasks/config/watch.js:24\r\n>> \t\t\ttasks: ['syncAssets' , &#39;linkAssets&#39;]\r\n>> \t\t\t                       ^\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4407","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4407/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4407/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4407/events","html_url":"https://github.com/balderdashy/sails/issues/4407","id":323497381,"node_id":"MDU6SXNzdWUzMjM0OTczODE=","number":4407,"title":"A hook (`session`) failed to load! password was incorrect, but I'm sure it's correct","user":{"login":"chestermax01","id":6769787,"node_id":"MDQ6VXNlcjY3Njk3ODc=","avatar_url":"https://avatars3.githubusercontent.com/u/6769787?v=4","gravatar_id":"","url":"https://api.github.com/users/chestermax01","html_url":"https://github.com/chestermax01","followers_url":"https://api.github.com/users/chestermax01/followers","following_url":"https://api.github.com/users/chestermax01/following{/other_user}","gists_url":"https://api.github.com/users/chestermax01/gists{/gist_id}","starred_url":"https://api.github.com/users/chestermax01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chestermax01/subscriptions","organizations_url":"https://api.github.com/users/chestermax01/orgs","repos_url":"https://api.github.com/users/chestermax01/repos","events_url":"https://api.github.com/users/chestermax01/events{/privacy}","received_events_url":"https://api.github.com/users/chestermax01/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-16T07:22:04Z","updated_at":"2018-05-16T09:49:29Z","closed_at":"2018-05-16T09:49:29Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**:1.0.2\r\n**Node version**:v8.9.4\r\n**NPM version**:5.6.0\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:UBUNTU\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\nredis password is correct.\r\n\r\nmy session.js:\r\n<pre>\r\nmodule.exports.session = {\r\n  secret: 'secret string',\r\n\r\n  adapter: '@sailshq/connect-redis',\r\n\r\n  host: 'my redis host',\r\n  port: 6379,\r\n  // ttl: 3600,\r\n  db: 0,\r\n  pass: 'redis password',\r\n  prefix: 'sess:',\r\n};\r\n</pre>\r\nWhen I run node app.js, it can't work.\r\n<pre>\r\nerror: A hook (`session`) failed to load!\r\nerror: Failed to lift app: { Error: The password supplied to the Redis server was incorrect.\r\n    at RedisClient.onPreConnectionError (/home/developer/projects/Gemini/env/G1.2/node_modules/machinepack-redis/machines/get-connection.js:135:46)\r\n    at emitOne (events.js:116:13)\r\n    at RedisClient.emit (events.js:211:7)\r\n    at Object.callbackOrEmit [as callback_or_emit] (/home/developer/projects/Gemini/env/G1.2/node_modules/machinepack-redis/node_modules/redis/lib/utils.js:91:14)\r\n    at /home/developer/projects/Gemini/env/G1.2/node_modules/machinepack-redis/node_modules/redis/lib/individualCommands.js:199:15\r\n    at Object.callbackOrEmit [as callback_or_emit] (/home/developer/projects/Gemini/env/G1.2/node_modules/machinepack-redis/node_modules/redis/lib/utils.js:89:9)\r\n    at RedisClient.return_error (/home/developer/projects/Gemini/env/G1.2/node_modules/machinepack-redis/node_modules/redis/index.js:694:11)\r\n    at JavascriptRedisParser.returnError (/home/developer/projects/Gemini/env/G1.2/node_modules/machinepack-redis/node_modules/redis/index.js:192:18)\r\n    at JavascriptRedisParser.execute (/home/developer/projects/Gemini/env/G1.2/node_modules/redis-parser/lib/parser.js:572:12)\r\n    at Socket.<anonymous> (/home/developer/projects/Gemini/env/G1.2/node_modules/machinepack-redis/node_modules/redis/index.js:267:27)\r\n    at emitOne (events.js:116:13)\r\n    at Socket.emit (events.js:211:7)\r\n    at addChunk (_stream_readable.js:263:12)\r\n    at readableAddChunk (_stream_readable.js:250:11)\r\n    at Socket.Readable.push (_stream_readable.js:208:10)\r\n    at TCP.onread (net.js:594:20)\r\n code: 'ERR_BAD_PASSWORD' }\r\n</pre>","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4406","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4406/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4406/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4406/events","html_url":"https://github.com/balderdashy/sails/issues/4406","id":322833575,"node_id":"MDU6SXNzdWUzMjI4MzM1NzU=","number":4406,"title":"Row is empty","user":{"login":"Sjoerrdd","id":19862992,"node_id":"MDQ6VXNlcjE5ODYyOTky","avatar_url":"https://avatars2.githubusercontent.com/u/19862992?v=4","gravatar_id":"","url":"https://api.github.com/users/Sjoerrdd","html_url":"https://github.com/Sjoerrdd","followers_url":"https://api.github.com/users/Sjoerrdd/followers","following_url":"https://api.github.com/users/Sjoerrdd/following{/other_user}","gists_url":"https://api.github.com/users/Sjoerrdd/gists{/gist_id}","starred_url":"https://api.github.com/users/Sjoerrdd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sjoerrdd/subscriptions","organizations_url":"https://api.github.com/users/Sjoerrdd/orgs","repos_url":"https://api.github.com/users/Sjoerrdd/repos","events_url":"https://api.github.com/users/Sjoerrdd/events{/privacy}","received_events_url":"https://api.github.com/users/Sjoerrdd/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-14T14:09:48Z","updated_at":"2018-05-18T15:03:16Z","closed_at":"2018-05-18T15:02:55Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: 1.0\r\n**Node version**: 8.9\r\n**NPM version**: 6.0.1\r\n**DB adapter name**: mysql\r\n**DB adapter version**: latest\r\n**Operating system**: Windows 10\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n\r\nI try to insert a row into the database, but it creates an empty row.\r\n\r\nCode:\r\n\r\n```     \r\nvar param = {author: req.ip, poll_id: req.param('poll_id')} // this returns { author: '::1', poll_id: '1' }\r\nconsole.log(param)\r\nawait Vote.findOrCreate(param).exec(async(err, poll, wasCreated) => {\r\n  // Other stuff\r\n}\r\n```\r\n\r\nDatabase:\r\n![](https://i.gyazo.com/51478ce3b5c5a4de166b13047cd721fa.png)","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4404","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4404/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4404/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4404/events","html_url":"https://github.com/balderdashy/sails/issues/4404","id":322757231,"node_id":"MDU6SXNzdWUzMjI3NTcyMzE=","number":4404,"title":"process.nextTick(function() { throw err; });  ReferenceError: users is not defined","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-14T10:24:36Z","updated_at":"2018-05-14T22:03:41Z","closed_at":"2018-05-14T22:03:41Z","author_association":"NONE","body":"Hello, I'm back here. want to start my small app. got this. : whats that mean with ?\r\n\r\n```\r\n    process.nextTick(function() { throw err; });\r\n                                  ^\r\nReferenceError: users is not defined\r\n```\r\n\r\nhere is my  sails lift : \r\n\r\n\r\n```\r\ncodes-Mac-mini:oauthy Kopie jh$ sails lift\r\n\r\n info: Starting app...\r\n\r\ndebug: In attribute `state` of  model `user`:\r\ndebug:   The `enum` validation rule is now `isIn` (changing it for you this time).\r\n\r\ndebug: In attribute `provider` of  model `user`:\r\ndebug:   The `enum` validation rule is now `isIn` (changing it for you this time).\r\n\r\n info: ·• Auto-migrating...  (alter)\r\n info:    Hold tight, this could take a moment.\r\n info:  ✓ Auto-migration complete.\r\n\r\n info: \r\n info:                .-..-.\r\n info: \r\n info:    Sails              <|    .-..-.\r\n info:    v1.0.1              |\\\r\n info:                       /|.\\\r\n info:                      / || \\\r\n info:                    ,'  |'  \\\r\n info:                 .-'.-==|/_--'\r\n info:                 `--'-------' \r\n info:    __---___--___---___--___---___--___\r\n info:  ____---___--___---___--___---___--___-__\r\n info: \r\n info: Server lifted in `/Users/jh/Desktop/new/oauthy Kopie`\r\n info: To shut down Sails, press <CTRL> + C at any time.\r\n info: Read more at https://sailsjs.com/support.\r\n\r\ndebug: -------------------------------------------------------\r\ndebug: :: Mon May 14 2018 12:16:42 GMT+0200 (CEST)\r\n\r\ndebug: Environment : development\r\ndebug: Port        : 1337\r\ndebug: -------------------------------------------------------\r\n/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/mongodb/lib/utils.js:123\r\n    process.nextTick(function() { throw err; });\r\n                                  ^\r\n\r\nReferenceError: users is not defined\r\n    at /Users/jh/Desktop/new/oauthy Kopie/config/passport.js:17:13\r\n    at _afterPotentiallyRunningAfterLC (/Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/methods/find-one.js:328:20)\r\n    at _maybeRunAfterLC (/Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/methods/find-one.js:322:20)\r\n    at _afterFetchingRecords (/Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/methods/find-one.js:324:13)\r\n    at _afterGettingPopulatedPhysicalRecords (/Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/utils/query/help-find.js:754:12)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/waterline/lib/waterline/utils/query/help-find.js:151:16\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/lib/private/do-with-connection.js:239:16\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/lib/private/do-with-connection.js:123:18\r\n    at Object.success (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/lib/private/build-std-adapter-method.js:61:47)\r\n    at afterMaybeArtificiallyWaiting (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/machine/lib/private/intercept-exit-callbacks.js:406:21)\r\n    at maybeArtificiallyWait (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/machine/lib/private/intercept-exit-callbacks.js:220:20)\r\n    at afterPotentiallyCaching (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/machine/lib/private/intercept-exit-callbacks.js:240:11)\r\n    at _cacheIfAppropriate (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/machine/lib/private/intercept-exit-callbacks.js:98:18)\r\n    at Function._interceptExit [as success] (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/machine/lib/private/intercept-exit-callbacks.js:111:9)\r\n    at findCb (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/lib/private/machines/find-records.js:138:20)\r\n    at handleCallback (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/mongodb/lib/utils.js:120:56)\r\n    at /Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/mongodb/lib/cursor.js:860:16\r\n    at handleCallback (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/mongodb-core/lib/cursor.js:171:5)\r\n    at setCursorDeadAndNotified (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/mongodb-core/lib/cursor.js:505:3)\r\n    at nextFunction (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/mongodb-core/lib/cursor.js:651:7)\r\n    at Cursor.next [as _next] (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/mongodb-core/lib/cursor.js:692:3)\r\n    at fetchDocs (/Users/jh/Desktop/new/oauthy Kopie/node_modules/sails-mongo/node_modules/mongodb/lib/cursor.js:856:10)\r\ncodes-Mac-mini:oauthy Kopie jh$ \r\n```\r\n\r\nhere is my package.json file : \r\n\r\n\r\n```\r\n{\r\n  \"name\": \"oauthy\",\r\n  \"private\": true,\r\n  \"version\": \"0.0.0\",\r\n  \"description\": \"a Sails application\",\r\n  \"keywords\": [],\r\n  \"dependencies\": {\r\n    \"@sailshq/connect-redis\": \"^3.2.1\",\r\n    \"@sailshq/lodash\": \"^3.10.3\",\r\n    \"@sailshq/socket.io-redis\": \"^5.2.0\",\r\n    \"async\": \"2.0.1\",\r\n    \"bcrypt\": \"^2.0.1\",\r\n    \"bcrypt-nodejs\": \"0.0.3\",\r\n    \"grunt\": \"1.0.1\",\r\n    \"jsonwebtoken\": \"^8.2.1\",\r\n    \"mongodb\": \"^3.0.7\",\r\n    \"passport\": \"^0.4.0\",\r\n    \"passport-github2\": \"^0.1.11\",\r\n    \"passport-local\": \"^1.0.0\",\r\n    \"passport-twitter\": \"^1.0.4\",\r\n    \"sails\": \"^1.0.1\",\r\n    \"sails-hook-grunt\": \"^3.0.2\",\r\n    \"sails-hook-orm\": \"^2.0.0-16\",\r\n    \"sails-hook-sockets\": \"^1.4.0\",\r\n    \"sails-mongo\": \"^1.0.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@sailshq/eslint\": \"^4.19.3\"\r\n  },\r\n  \"scripts\": {\r\n    \"start\": \"NODE_ENV=production node app.js\",\r\n    \"test\": \"npm run lint && npm run custom-tests && echo 'Done.'\",\r\n    \"lint\": \"eslint . --max-warnings=0 --report-unused-disable-directives && echo '✔  Your .js files look good.'\",\r\n    \"custom-tests\": \"echo \\\"(No other custom tests yet.)\\\" && echo\"\r\n  },\r\n  \"main\": \"app.js\",\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"git://github.com/jh/oauthy.git\"\r\n  },\r\n  \"author\": \"jh\",\r\n  \"license\": \"\",\r\n  \"engines\": {\r\n    \"node\": \">=8.10\"\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Sails version*1.0.1*:\r\n**Node version*v8.10.0*:\r\n**NPM version*6.0.0*:\r\n**DB adapter name*sails-mongo*: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4397","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4397/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4397/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4397/events","html_url":"https://github.com/balderdashy/sails/issues/4397","id":321804828,"node_id":"MDU6SXNzdWUzMjE4MDQ4Mjg=","number":4397,"title":"Postgresql Adapter - Config Validation Assumes all 'number' Attributes contain `autoMigrations` property","user":{"login":"andezzat","id":1734293,"node_id":"MDQ6VXNlcjE3MzQyOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/1734293?v=4","gravatar_id":"","url":"https://api.github.com/users/andezzat","html_url":"https://github.com/andezzat","followers_url":"https://api.github.com/users/andezzat/followers","following_url":"https://api.github.com/users/andezzat/following{/other_user}","gists_url":"https://api.github.com/users/andezzat/gists{/gist_id}","starred_url":"https://api.github.com/users/andezzat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andezzat/subscriptions","organizations_url":"https://api.github.com/users/andezzat/orgs","repos_url":"https://api.github.com/users/andezzat/repos","events_url":"https://api.github.com/users/andezzat/events{/privacy}","received_events_url":"https://api.github.com/users/andezzat/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-10T04:21:25Z","updated_at":"2018-05-10T16:27:35Z","closed_at":"2018-05-10T16:27:35Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: none\r\n**Node version**: 8.11.1\r\n**NPM version**: 6.0.0\r\n**DB adapter name**: sails-postgresql\r\n**DB adapter version**: 1.0.1\r\n**Operating system**: macOS High Sierra v10.13.4\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [x] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [x] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [x] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [x] My issue title is concise, on-topic and 
8000
polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [x] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [x] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n\r\n## Description\r\n### Issue\r\n`sails-postegresql` throws an error as it cannot find property `columnType` of undefined.\r\nThis is simply because it's checking for that property on the attribute's `autoMigrations`, but some attributes do not necessarily have it, hence it is undefined.\r\n\r\n### Where\r\n`helpers/register-data-store.js : line 119`\r\n\r\n## Suggested fix\r\nInclude a simple check to make sure `autoMigrations` is defined, otherwise, short-circuit and don't bother checking if the `columnType` is `bigint` etc.","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4392","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4392/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4392/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4392/events","html_url":"https://github.com/balderdashy/sails/issues/4392","id":320493385,"node_id":"MDU6SXNzdWUzMjA0OTMzODU=","number":4392,"title":"issue on package.json file ","user":{"login":"Aakarshak1","id":16081512,"node_id":"MDQ6VXNlcjE2MDgxNTEy","avatar_url":"https://avatars0.githubusercontent.com/u/16081512?v=4","gravatar_id":"","url":"https://api.github.com/users/Aakarshak1","html_url":"https://github.com/Aakarshak1","followers_url":"https://api.github.com/users/Aakarshak1/followers","following_url":"https://api.github.com/users/Aakarshak1/following{/other_user}","gists_url":"https://api.github.com/users/Aakarshak1/gists{/gist_id}","starred_url":"https://api.github.com/users/Aakarshak1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aakarshak1/subscriptions","organizations_url":"https://api.github.com/users/Aakarshak1/orgs","repos_url":"https://api.github.com/users/Aakarshak1/repos","events_url":"https://api.github.com/users/Aakarshak1/events{/privacy}","received_events_url":"https://api.github.com/users/Aakarshak1/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-05T09:11:31Z","updated_at":"2018-05-06T20:58:54Z","closed_at":"2018-05-06T20:58:54Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: 1.0.1\r\n**Node version**:  8.11.1\r\n**NPM version**:  6.0.0\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**: ubuntu linux 16.04\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\nplz change \"coffee-script\": \"1.12.7\" to \"coffescript\": \"1.12.7\" (no hyphen) on package.json\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4391","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4391/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4391/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4391/events","html_url":"https://github.com/balderdashy/sails/issues/4391","id":320490738,"node_id":"MDU6SXNzdWUzMjA0OTA3Mzg=","number":4391,"title":"error: The attribute `email` on the `user` model uses an invalid type - `email`.","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-05T08:25:54Z","updated_at":"2018-05-05T08:41:06Z","closed_at":"2018-05-05T08:41:05Z","author_association":"NONE","body":"\r\n\r\nHallo, the Internet cant find out some with this problem, because the commity is to small, what im think about a new framework to use.!\r\n\r\nreally, help me please with the last steps... \r\n\r\n\r\n\r\n\r\nerror: The attribute `email` on the `user` model uses an invalid type - `email`.\r\n\r\n\r\nand my last issue !\r\n\r\ni dont have time to wast. im try to fix these steps since 24 hours ago, and anoym me to work more with \"sails\"... \r\n\r\n\r\n**Sails version**:\r\n**Node version**:\r\n**NPM version**:\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4390","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4390/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4390/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4390/events","html_url":"https://github.com/balderdashy/sails/issues/4390","id":320490107,"node_id":"MDU6SXNzdWUzMjA0OTAxMDc=","number":4390,"title":"debug: In attribute `state` of  model `user`: debug:   The `enum` validation rule is now `isIn` (changing it for you this time).","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-05T08:14:58Z","updated_at":"2018-05-05T08:41:51Z","closed_at":"2018-05-05T08:41:50Z","author_association":"NONE","body":"Anybody any idea.? \r\n\r\n```\r\n info: Starting app...\r\n\r\ndebug: In attribute `state` of  model `user`:\r\ndebug:   The `enum` validation rule is now `isIn` (changing it for you this time).\r\n\r\ndebug: In attribute `provider` of  model `user`:\r\ndebug:   The `enum` validation rule is now `isIn` (changing it for you this time).\r\n\r\n```\r\n\r\n\r\n**Sails version**:\r\n**Node version**:\r\n**NPM version**:\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4389","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4389/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4389/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4389/events","html_url":"https://github.com/balderdashy/sails/issues/4389","id":320489999,"node_id":"MDU6SXNzdWUzMjA0ODk5OTk=","number":4389,"title":"  info: ·• Auto-migrating...  (drop) error: A hook (`orm`) failed to load! error:  error: The attribute `email` on the `user` model uses an invalid type - `email`.","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-05T08:12:49Z","updated_at":"2018-05-05T08:41:25Z","closed_at":"2018-05-05T08:41:24Z","author_association":"NONE","body":"Hello, i get this and need this to reslove finally. \r\ni dont get it, pelase help !\r\n\r\n\r\n```\r\n\r\n\r\n info: Starting app...\r\n\r\ndebug: In attribute `state` of  model `user`:\r\ndebug:   The `enum` validation rule is now `isIn` (changing it for you this time).\r\n\r\ndebug: In attribute `provider` of  model `user`:\r\ndebug:   The `enum` validation rule is now `isIn` (changing it for you this time).\r\n\r\n--------------------------------------------------------------------------------\r\n Excuse my interruption, but it looks like this app\r\n does not have a \"migrate\" setting configured yet.\r\n (perhaps this is the first time you're lifting it with models?)\r\n\r\n Tired of seeing this prompt?  Edit config/models.js.\r\n\r\n In a production environment (NODE_ENV=production) Sails always uses\r\n migrate:'safe' to protect against inadvertent deletion of your data.\r\n But during development, you have a few different options:\r\n\r\n 1. FOR DEV:      alter   wipe/drop and try to re-insert ALL my data (recommended)\r\n 2. FOR TESTS:    drop    wipe/drop ALL my data every time I lift Sails\r\n 3. FOR STAGING:  safe    don't auto-migrate my data. I will do it myself\r\n\r\n Read more: sailsjs.com/docs/concepts/models-and-orm/model-settings#?migrate\r\n--------------------------------------------------------------------------------\r\n\r\nWhat would you like Sails to do this time?\r\n ** NEVER CHOOSE \"alter\" or \"drop\" IF YOU ARE WORKING WITH PRODUCTION DATA **\r\n\r\nprompt: ?:  2\r\n--------------------------------------------------------------------------------\r\n OK!  Temporarily using migrate:'drop'...\r\n To skip this prompt in the future, edit config/models.js.\r\n--------------------------------------------------------------------------------\r\n\r\n info: ·• Auto-migrating...  (drop)\r\nerror: A hook (`orm`) failed to load!\r\nerror: \r\nerror: The attribute `email` on the `user` model uses an invalid type - `email`.\r\n\r\nerror: Could not load Sails app.\r\nerror: \r\nerror: Tips:\r\nerror:  • First, take a look at the error message above.\r\nerror:  • Make sure you've installed dependencies with `npm install`.\r\nerror:  • Check that this app was built for a compatible version of Sails.\r\nerror:  • Have a question or need help?  (http://sailsjs.com/support)\r\ncodes-Mac-mini:oauthy jh$ \r\n\r\n\r\n```\r\n\r\nmy model User.js \r\n\r\n```\r\nvar bcrypt = require('bcrypt');\r\nmodule.exports = {\r\nattributes: {\r\n    email: {\r\n      type: 'email',\r\n      required: true,\r\n      unique: true\r\n    },\r\n    username: {\r\n      type: 'string',\r\n      required: true,\r\n      unique: true\r\n    },\r\n    password: {\r\n      type: 'string',\r\n      required: true\r\n    }\r\n  },\r\n  customToJSON: function() {\r\n     return _.omit(this, ['password'])\r\n  },\r\n  beforeCreate: function(user, cb){\r\n    bcrypt.genSalt(10, function(err, salt){\r\n      bcrypt.hash(user.password, salt, null, function(err, hash){\r\n        if(err) return cb(err);\r\n        user.password = hash;\r\n        return cb();\r\n      });\r\n    });\r\n  }\r\n};\r\n```\r\n\r\nmy package.json\r\n\r\n```\r\n{\r\n  \"name\": \"oauthy\",\r\n  \"private\": true,\r\n  \"version\": \"0.0.0\",\r\n  \"description\": \"a Sails application\",\r\n  \"keywords\": [],\r\n  \"dependencies\": {\r\n    \"@sailshq/connect-redis\": \"^3.2.1\",\r\n    \"@sailshq/lodash\": \"^3.10.3\",\r\n    \"@sailshq/socket.io-redis\": \"^5.2.0\",\r\n    \"async\": \"2.0.1\",\r\n    \"bcrypt\": \"^2.0.1\",\r\n    \"bcrypt-nodejs\": \"0.0.3\",\r\n    \"grunt\": \"1.0.1\",\r\n    \"jsonwebtoken\": \"^8.2.1\",\r\n    \"mongodb\": \"^3.0.7\",\r\n    \"passport\": \"^0.4.0\",\r\n    \"passport-local\": \"^1.0.0\",\r\n    \"sails\": \"^1.0.1\",\r\n    \"sails-hook-grunt\": \"^3.0.2\",\r\n    \"sails-hook-orm\": \"^2.0.0-16\",\r\n    \"sails-hook-sockets\": \"^1.4.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@sailshq/eslint\": \"^4.19.3\"\r\n  },\r\n  \"scripts\": {\r\n    \"start\": \"NODE_ENV=production node app.js\",\r\n    \"test\": \"npm run lint && npm run custom-tests && echo 'Done.'\",\r\n    \"lint\": \"eslint . --max-warnings=0 --report-unused-disable-directives && echo '✔  Your .js files look good.'\",\r\n    \"custom-tests\": \"echo \\\"(No other custom tests yet.)\\\" && echo\"\r\n  },\r\n  \"main\": \"app.js\",\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"git://github.com/jh/oauthy.git\"\r\n  },\r\n  \"author\": \"jh\",\r\n  \"license\": \"\",\r\n  \"engines\": {\r\n    \"node\": \">=8.10\"\r\n  }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n**Sails version*1.0.1*:\r\n**Node version**:\r\n**NPM version**:\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4388","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4388/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4388/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4388/events","html_url":"https://github.com/balderdashy/sails/issues/4388","id":320471567,"node_id":"MDU6SXNzdWUzMjA0NzE1Njc=","number":4388,"title":"error: The attribute `email` on the `user` model uses an invalid type - `email`.","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-05T02:12:46Z","updated_at":"2018-05-05T08:41:34Z","closed_at":"2018-05-05T08:41:33Z","author_association":"NONE","body":"Hello, i get this and need this to reslove finally. \r\ni dont get it, pelase help !\r\n\r\n\r\n```\r\n\r\n\r\n info: Starting app...\r\n\r\ndebug: In attribute `state` of  model `user`:\r\ndebug:   The `enum` validation rule is now `isIn` (changing it for you this time).\r\n\r\ndebug: In attribute `provider` of  model `user`:\r\ndebug:   The `enum` validation rule is now `isIn` (changing it for you this time).\r\n\r\n--------------------------------------------------------------------------------\r\n Excuse my interruption, but it looks like this app\r\n does not have a \"migrate\" setting configured yet.\r\n (perhaps this is the first time you're lifting it with models?)\r\n\r\n Tired of seeing this prompt?  Edit config/models.js.\r\n\r\n In a production environment (NODE_ENV=production) Sails always uses\r\n migrate:'safe' to protect against inadvertent deletion of your data.\r\n But during development, you have a few different options:\r\n\r\n 1. FOR DEV:      alter   wipe/drop and try to re-insert ALL my data (recommended)\r\n 2. FOR TESTS:    drop    wipe/drop ALL my data every time I lift Sails\r\n 3. FOR STAGING:  safe    don't auto-migrate my data. I will do it myself\r\n\r\n Read more: sailsjs.com/docs/concepts/models-and-orm/model-settings#?migrate\r\n--------------------------------------------------------------------------------\r\n\r\nWhat would you like Sails to do this time?\r\n ** NEVER CHOOSE \"alter\" or \"drop\" IF YOU ARE WORKING WITH PRODUCTION DATA **\r\n\r\nprompt: ?:  2\r\n--------------------------------------------------------------------------------\r\n OK!  Temporarily using migrate:'drop'...\r\n To skip this prompt in the future, edit config/models.js.\r\n--------------------------------------------------------------------------------\r\n\r\n info: ·• Auto-migrating...  (drop)\r\nerror: A hook (`orm`) failed to load!\r\nerror: \r\nerror: The attribute `email` on the `user` model uses an invalid type - `email`.\r\n\r\nerror: Could not load Sails app.\r\nerror: \r\nerror: Tips:\r\nerror:  • First, take a look at the error message above.\r\nerror:  • Make sure you've installed dependencies with `npm install`.\r\nerror:  • Check that this app was built for a compatible version of Sails.\r\nerror:  • Have a question or need help?  (http://sailsjs.com/support)\r\ncodes-Mac-mini:oauthy jh$ \r\n\r\n\r\n```\r\n\r\nmy model User.js \r\n\r\n```\r\nvar bcrypt = require('bcrypt');\r\nmodule.exports = {\r\nattributes: {\r\n    email: {\r\n      type: 'email',\r\n      required: true,\r\n      unique: true\r\n    },\r\n    username: {\r\n      type: 'string',\r\n      required: true,\r\n      unique: true\r\n    },\r\n    password: {\r\n      type: 'string',\r\n      required: true\r\n    }\r\n  },\r\n  customToJSON: function() {\r\n     return _.omit(this, ['password'])\r\n  },\r\n  beforeCreate: function(user, cb){\r\n    bcrypt.genSalt(10, function(err, salt){\r\n      bcrypt.hash(user.password, salt, null, function(err, hash){\r\n        if(err) return cb(err);\r\n        user.password = hash;\r\n        return cb();\r\n      });\r\n    });\r\n  }\r\n};\r\n```\r\n\r\nmy package.json\r\n\r\n```\r\n{\r\n  \"name\": \"oauthy\",\r\n  \"private\": true,\r\n  \"version\": \"0.0.0\",\r\n  \"description\": \"a S
8000
ails application\",\r\n  \"keywords\": [],\r\n  \"dependencies\": {\r\n    \"@sailshq/connect-redis\": \"^3.2.1\",\r\n    \"@sailshq/lodash\": \"^3.10.3\",\r\n    \"@sailshq/socket.io-redis\": \"^5.2.0\",\r\n    \"async\": \"2.0.1\",\r\n    \"bcrypt\": \"^2.0.1\",\r\n    \"bcrypt-nodejs\": \"0.0.3\",\r\n    \"grunt\": \"1.0.1\",\r\n    \"jsonwebtoken\": \"^8.2.1\",\r\n    \"mongodb\": \"^3.0.7\",\r\n    \"passport\": \"^0.4.0\",\r\n    \"passport-local\": \"^1.0.0\",\r\n    \"sails\": \"^1.0.1\",\r\n    \"sails-hook-grunt\": \"^3.0.2\",\r\n    \"sails-hook-orm\": \"^2.0.0-16\",\r\n    \"sails-hook-sockets\": \"^1.4.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@sailshq/eslint\": \"^4.19.3\"\r\n  },\r\n  \"scripts\": {\r\n    \"start\": \"NODE_ENV=production node app.js\",\r\n    \"test\": \"npm run lint && npm run custom-tests && echo 'Done.'\",\r\n    \"lint\": \"eslint . --max-warnings=0 --report-unused-disable-directives && echo '✔  Your .js files look good.'\",\r\n    \"custom-tests\": \"echo \\\"(No other custom tests yet.)\\\" && echo\"\r\n  },\r\n  \"main\": \"app.js\",\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"git://github.com/jh/oauthy.git\"\r\n  },\r\n  \"author\": \"jh\",\r\n  \"license\": \"\",\r\n  \"engines\": {\r\n    \"node\": \">=8.10\"\r\n  }\r\n}\r\n\r\n\r\n```\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4386","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4386/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4386/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4386/events","html_url":"https://github.com/balderdashy/sails/issues/4386","id":320234233,"node_id":"MDU6SXNzdWUzMjAyMzQyMzM=","number":4386,"title":"Detected an entry for `myRequestLogger` in `sails.config.http.middleware.order`, but `sails.config.http.middleware['myRequestLogger']` is undefined or not a function. Please provide a custom `req, res, next` middleware function for `myRequestLogger`, or remove it from the order. See http://sailsjs.com/docs/concepts/middleware for more info.","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-04T11:02:34Z","updated_at":"2018-05-04T11:18:01Z","closed_at":"2018-05-04T11:18:00Z","author_association":"NONE","body":"Now i get it, the part with the config files. \r\n\r\nnow, my question is, whats that mean.?  does anybody have an idea? \r\n\r\n\r\n\r\n\r\n```\r\n info: Starting app...\r\n\r\nerror: \r\nerror: \r\n-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-\r\nDetected an entry for `myRequestLogger` in `sails.config.http.middleware.order`,\r\nbut `sails.config.http.middleware['myRequestLogger']` is undefined or not a function.\r\nPlease provide a custom `req, res, next` middleware function for `myRequestLogger`,\r\nor remove it from the order. See http://sailsjs.com/docs/concepts/middleware for more info.\r\n-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-\r\n\r\n\r\nerror: Could not load Sails app.\r\nerror: \r\nerror: Tips:\r\nerror:  • First, take a look at the error message above.\r\nerror:  • Make sure you've installed dependencies with `npm install`.\r\nerror:  • Check that this app was built for a compatible version of Sails.\r\nerror:  • Have a question or need help?  (http://sailsjs.com/support)\r\ncodes-Mac-mini:gitlist Kopie 2 jh$ \r\n```\r\n--this mean, i have to change something in the http.js ? \r\n\r\n**Please provide a custom `req, res, next` middleware function for `myRequestLogger`,\r\nor remove it from the order. See http://sailsjs.com/docs/concepts/middleware for more info.**\r\n\r\nhow.? my is this : \r\n\r\n```\r\n/**\r\n * HTTP Server Settings\r\n * (sails.config.http)\r\n *\r\n * Configuration for the underlying HTTP server in Sails.\r\n * Only applies to HTTP requests (not WebSockets)\r\n *\r\n * For more information on configuration, check out:\r\n * http://sailsjs.org/#/documentation/reference/sails.config/sails.config.http.html\r\n */\r\n \r\n\r\nmodule.exports.http = {\r\n\r\n  /****************************************************************************\r\n  *                                                                           *\r\n  * Express middleware to use for every Sails request. To add custom          *\r\n  * middleware to the mix, add a function to the middleware config object and *\r\n  * add its key to the \"order\" array. The $custom key is reserved for         *\r\n  * backwards-compatibility with Sails v0.9.x apps that use the               *\r\n  * `customMiddleware` config option.                                         *\r\n  *                                                                           *\r\n  ****************************************************************************/\r\n\r\n   middleware: {\r\n\r\n  \tpassportInit    : require('passport').initialize(),\r\n    passportSession : require('passport').session(),\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * The order in which middleware should be run for HTTP request. (the Sails *\r\n  * router is invoked by the \"router\" middleware below.)                     *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\n     order: [\r\n\t\t\t'startRequestTimer',\r\n\t\t\t'cookieParser',\r\n\t\t\t'session',\r\n\t\t\t'passportInit',            // <==== passport HTTP middleware should run after \"session\"\r\n\t\t\t'passportSession',         // <==== (see https://github.com/jaredhanson/passport#middleware)\r\n\t\t\t'myRequestLogger',\r\n\t\t\t'bodyParser',\r\n\t\t\t'handleBodyParserError',\r\n\t\t\t'compress',\r\n\t\t\t'methodOverride',\r\n\t\t\t'poweredBy',\r\n\t\t\t//   '$custom',\r\n\t\t\t'router',\r\n\t\t\t'www',\r\n\t\t\t'favicon',\r\n\t\t\t'404',\r\n\t\t\t'500'\r\n     ],\r\n\r\n  /****************************************************************************\r\n  *                                                                           *\r\n  * Example custom middleware; logs each request to the console.              *\r\n  *                                                                           *\r\n  ****************************************************************************/\r\n\r\n    // myRequestLogger: function (req, res, next) {\r\n    //     console.log(\"Requested :: \", req.method, req.url);\r\n    //     return next();\r\n    // }\r\n\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * The body parser that will handle incoming multipart HTTP requests. By    *\r\n  * default as of v0.10, Sails uses                                          *\r\n  * [skipper](http://github.com/balderdashy/skipper). See                    *\r\n  * http://www.senchalabs.org/connect/multipart.html for other options.      *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\n    // bodyParser: require('skipper')\r\n\r\n   },\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * The number of seconds to cache flat files on disk being served by        *\r\n  * Express static middleware (by default, these files are in `.tmp/public`) *\r\n  *                                                                          *\r\n  * The HTTP static cache is only active in a 'production' environment,      *\r\n  * since that's the only time Express will cache flat-files.                *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\n  // cache: 31557600000\r\n};\r\n\r\n\r\n```\r\n\r\n\r\n**Sails version*^1.0.1*:\r\n**Node version*v8.10.0*:\r\n**NPM version*6.0.0*:\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4385","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4385/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4385/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4385/events","html_url":"https://github.com/balderdashy/sails/issues/4385","id":320220300,"node_id":"MDU6SXNzdWUzMjAyMjAzMDA=","number":4385,"title":"debug: The `config.views.engine` config has been deprecated.","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-04T10:11:22Z","updated_at":"2018-05-04T11:17:44Z","closed_at":"2018-05-04T11:17:42Z","author_association":"NONE","body":"Hello!\r\n\r\nI'm try, to update all my scripts from the old version of   \"sails\": \"~0.10.5\", to the new one .-  \r\n0.1.0 holy shit, so many changes.?! really. i dont know whats that mean below in the terminal.. ! Need help please. ! -\r\n\r\nCan somebody tell me, what the henk does this mean.?. - or what i have to change.. i dont get this `  `use `config.views.extension`` and so one...` `sails.config.cors``\r\n\r\n\r\nhow to change, what i have to change at all.? i dont get it. \r\nThanks all.\r\n\r\n\r\n```\r\n info: Starting app...\r\n\r\ndebug: The `config.views.engine` config has been deprecated.\r\ndebug: In Sails 1.x, use `config.views.extension` to choose your view\r\ndebug: extension (defaults to \".ejs\"), and use `config.views.getRenderFn`\r\ndebug: to configure your template engine or leave it undefined to use\r\ndebug: the built-in EJS template support.\r\n\r\ndebug: The `sails.config.cors` config has been deprecated.\r\ndebug: Please use `sails.config.security.cors` instead.\r\ndebug: (we'll use your `sails.config.cors` settings for now).\r\n\r\ndebug: Deprecation warning: Support for `sails.config.sockets.onConnect` will be removed in an upcoming release. See the v0.11 migration guide for more information and alternate options.\r\ndebug: Deprecation warning: `sails.config.sockets.onDisconnect` is now `sails.config.sockets.afterDisconnect`\r\nSetting it for you this time, but note that the new `afterDisconnect` now receives an additional final argument (a callback).\r\nMore info: http://sailsjs.org/#!/documentation/reference/sails.config/sails.config.sockets.html\r\nerror: \r\nerror: \r\n-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-\r\nDetected an entry for `myRequestLogger` in `sails.config.http.middleware.order`,\r\nbut `sails.config.http.middleware['myRequestLogger']` is undefined or not a function.\r\nPlease provide a custom `req, res, next` middleware function for `myRequestLogger`,\r\nor remove it from the order. See http://sailsjs.com/docs/concepts/middleware for more info.\r\n-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-\r\n\r\n\r\nerror: Could not load Sails app.\r\nerror: \r\nerror: Tips:\r\nerror:  • First, take a look at the error message above.\r\nerror:  • Make sure you've installed dependencies with `npm install`.\r\nerror:  • Check that this app was built for a compatible version of Sails.\r\nerror:  • Have a question or need help?  (http://sailsjs.com/support)\r\ncodes-Mac-mini:gitlist Kopie 2 jh$ \r\n```\r\n\r\n\r\nThis is my package.json file \r\n\r\n```\r\n\r\n{\r\n  \"name\": \"oauthx\",\r\n  \"private\": true,\r\n  \"version\": \"0.0.0\",\r\n  \"description\": \"a Sails application\",\r\n  \"keywords\": [],\r\n  \"dependencies\": {\r\n    \"@sailshq/upgrade\": \"^1.0.9\",\r\n    \"async\": \"2.1.4\",\r\n    \"bcrypt\": \"~0.8.0\",\r\n    \"ejs\": \"~0.8.4\",\r\n    \"express\": \"^4.16.3\",\r\n    \"grunt\": \"0.4.2\",\r\n    \"grunt-sync\": \"0.0.8\",\r\n    \"include-all\": \"~0.1.3\",\r\n    \"lodash\": \"3.10.1\",\r\n    \"mongodb\": \"^3.0.5\",\r\n    \"passport\": \"~0.2.1\",\r\n    \"passport-github\": \"^1.1.0\",\r\n    \"passport-github2\": \"^0.1.11\",\r\n    \"passport-local\": \"~1.0.0\",\r\n    \"passport-twitter\": \"~1.0.2\",\r\n    \"password-generator\": \"^0.2.3\",\r\n    \"rc\": \"~0.5.0\",\r\n    \"sails\": \"^1.0.1\",\r\n    \"sails-disk\": \"~0.10.0\",\r\n    \"sails-hook-grunt\": \"^1.0.8\",\r\n    \"sails-hook-orm\": \"^2.0.0\",\r\n    \"sails-hook-sockets\": \"^1.5.2\",\r\n    \"sails-mysql\": \"^1.0.0\",\r\n    \"shortid\": \"~2.1.3\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"grunt-contrib-clean\": \"^0.5.0\",\r\n    \"grunt-contrib-coffee\": \"^0.10.1\",\r\n    \"grunt-contrib-concat\": \"^0.3.0\",\r\n    \"grunt-contrib-copy\": \"^0.5.0\",\r\n    \"grunt-contrib-cssmin\": \"^0.9.0\",\r\n    \"grunt-contrib-jst\": \"^0.6.0\",\r\n    \"grunt-contrib-less\": \"^0.11.1\",\r\n    \"grunt-contrib-uglify\": \"^0.4.1\",\r\n    \"grunt-contrib-watch\": \"^0.5.3\",\r\n    \"grunt-sails-linker\": \"^0.9.6\"\r\n  },\r\n  \"scripts\": {\r\n    \"start\": \"node app.js\",\r\n    \"debug\": \"node debug app.js\"\r\n  },\r\n  \"main\": \"app.js\",\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"git://github.com/spaceg/oauthx\"\r\n  },\r\n  \"author\": \"lucas\",\r\n  \"license\": \"\"\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n**Sails version*^0.12.14*:\r\n**Node version*v8.10.0*:\r\n**NPM version*6.0.0*:\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n\r\n<!--\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4384","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4384/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4384/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4384/events","html_url":"https://github.com/balderdashy/sails/issues/4384","id":319465317,"node_id":"MDU6SXNzdWUzMTk0NjUzMTc=","number":4384,"title":"Cannot upload photo which larger than 100kb?","user":{"login":"trungducng","id":21218718,"node_id":"MDQ6VXNlcjIxMjE4NzE4","avatar_url":"https://avatars2.githubusercontent.com/u/21218718?v=4","gravatar_id":"","url":"https://api.github.com/users/trungducng","html_url":"https://github.com/trungducng","followers_url":"https://api.github.com/users/trungducng/followers","following_url":"https://api.github.com/users/trungducng/following{/other_user}","gists_url":"https://api.github.com/users/trungducng/gists{/gist_id}","starred_url":"https://api.github.com/users/trungducng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trungducng/subscriptions","organizations_url":"https://api.github.com/users/trungducng/orgs","repos_url":"https://api.github.com/users/trungducng/repos","events_url":"https://api.github.com/users/trungducng/events{/privacy}","received_events_url":"https://api.github.com/users/trungducng/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-02T08:48:19Z","updated_at":"2018-05-02T10:30:41Z","closed_at":"2018-05-02T10:30:41Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**:  0.12.14\r\n**Node version**: v8.11.1\r\n**NPM version**: 5.6.0\r\n**DB adapter name**: sails-mysql\r\n**DB adapter version**: 1.0.0\r\n**Operating system**: Ubuntu 16.04\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n\r\nDespite using `maxBytes` option in `upload` function but it still cannot upload file which large than 100kb.\r\nAny solution please?\r\n skipper@0.7.6 and skipper-disk@0.5.10\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4383","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4383/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4383/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4383/events","html_url":"https://github.com/balderdashy/sails/issues/4383","id":319366869,"node_id":"MDU6SXNzdWUzMTkzNjY4Njk=","number":4383,"title":"connections.js vs. datastore.js ? - connections to MongoDB. What else?! ","user":{"login":"SpaceG","id":3528165,"node_id":"MDQ6VXNlcjM1MjgxNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3528165?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceG","html_url":"https://github.com/SpaceG","followers_url":"https://api.github.com/users/SpaceG/followers","following_url":"https://api.github.com/users/SpaceG/following{/other_user}","gists_url":"https://api.github.com/users/SpaceG/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceG/subscriptions","organizations_url":"https://api.github.com/users/SpaceG/orgs","repos_url":"https://api.github.com/users/SpaceG/repos","events_url":"https://api.github.com/users/SpaceG/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceG/received_events","type":"User","site_admin":false},"labels":[{"id":335017164,"node_id":"MDU6TGFiZWwzMzUwMTcxNjQ=","url":"https://api.github.com/repos/balderdashy/sails/labels/Needs%20cleanup","name":"Needs cleanup","color":"c2e0c6","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-01T23:56:26Z","updated_at":"2018-05-02T01:07:55Z","closed_at":"2018-05-02T01:02:59Z","author_association":"NONE","body":"Hello! \r\n\r\nNow in the sails.js 1.0.1 there are new changes with the connections.js file to datastore.js how to understand this now.? i have read now the Docs. ![https://sailsjs.com/documentation/upgrading/to-v-1-0#?changes-to-database-configuration]( https://sailsjs.com/documentation/upgrading/to-v-1-0#?changes-to-database-configuration)\r\n\r\nbut, but now, its gonna not work at the same way  like before. \r\nhow it mean that with the datastore? do have create the datastore.js insteat and delete that connections.js file.? \r\n\r\nin the **datastore.js** is  \r\n```\r\n  /**\r\n * Datastores\r\n * (sails.config.datastores)\r\n *\r\n * A set of datastore configurations which tell Sails where to fetch or save\r\n * data when you execute built-in model methods like `.find()` and `.create()`.\r\n *\r\n *  > This file is mainly useful for configuring your development database,\r\n *  > as well as any additional one-off databases used by individual models.\r\n *  > Ready to go live?  Head towards `config/env/production.js`.\r\n *\r\n * For more information on configuring datastores, check out:\r\n * https://sailsjs.com/config/datastores\r\n */\r\n\r\nmodule.exports.datastores = {\r\n\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * Your app's default datastore.                                            *\r\n  *                                                                          *\r\n  * Sails apps read and write to local disk by default, using a built-in     *\r\n  * database adapter called `sails-disk`.  This feature is purely for        *\r\n  * convenience during development; since `sails-disk` is not designed for   *\r\n  * use in a production environment.                                         *\r\n  *                                                                          *\r\n  * To use a different db _in development_, follow the directions below.     *\r\n  * Otherwise, just leave the default datastore as-is, with no `adapter`.    *\r\n  *                                                                          *\r\n  * (For production configuration, see `config/env/production.js`.)          *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\n  default: {\r\n\r\n    /***************************************************************************\r\n    *                                                                          *\r\n    * Want to use a different database during development?                     *\r\n    *                                                                          *\r\n    * 1. Choose an adapter:                                                    *\r\n    *    https://sailsjs.com/plugins/databases                                 *\r\n    *                                                                          *\r\n    * 2. Install it as a dependency of your Sails app.                         *\r\n    *    (For example:  npm install sails-mysql --save)                        *\r\n    *                                                                          *\r\n    * 3. Then pass it in, along with a connection URL.                         *\r\n    *    (See https://sailsjs.com/config/datastores for help.)                 *\r\n    *                                                                          *\r\n    ***************************************************************************/\r\n   mongodb: {\r\n    adapter: 'sails-mongo',\r\n    host: 'localhost',\r\n    port: 27017,\r\n    user: '',\r\n    password: '',\r\n    database: 'gitlist'\r\n  },\r\n\r\n\r\n  },\r\n\r\n\r\n};\r\n```\r\n\r\n\r\nand in the models.js file, i have but in : connection: 'mongodb', \r\nbut it does not work anymore like before. how fix this.? \r\n\r\n```\r\n\r\n/**\r\n * Default model settings\r\n * (sails.config.models)\r\n *\r\n * Your default, project-wide model settings. Can also be overridden on a\r\n * per-model basis by setting a top-level properties in the model definition.\r\n *\r\n * For details about all available model settings, see:\r\n * https://sailsjs.com/config/models\r\n *\r\n * For more general background on Sails model settings, and how to configure\r\n * them on a project-wide or per-model basis, see:\r\n * https://sailsjs.com/docs/concepts/models-and-orm/model-settings\r\n */\r\n\r\nmodule.exports.models = {\r\n\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * Whether the `.create()` and `.update()` model methods should ignore      *\r\n  * (and refuse to persist) unrecognized data-- i.e. properties other than   *\r\n  * those explicitly defined by attributes in the model definition.          *\r\n  *                                                                          *\r\n  * To ease future maintenance of your code base, it is usually a good idea  *\r\n  * to set this to `true`.                                                   *\r\n  *                                                                          *\r\n  * > Note that `schema: false` is not supported by every database.          *\r\n  * > For example, if you are using a SQL database, then relevant models     *\r\n  * > are always effectively `schema: true`.  And if no `schema` setting is  *\r\n  * > provided whatsoever, the behavior is left up to the database adapter.  *\r\n  * >                                                                        *\r\n  * > For more info, see:                                                    *\r\n  * > https://sailsjs.com/docs/concepts/orm/model-settings#?schema           *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\nconnection: 'mongodb', \r\n  // schema: true,\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * How and whether Sails will attempt to automatically rebuild the          *\r\n  * tables/collections/etc. in your schema.                                  *\r\n  *                                                                          *\r\n  * > Note that, when running in a production environment, this will be      *\r\n  * > automatically set to `migrate: 'safe'`, no matter what you configure   *\r\n  * > here.  This is a failsafe to prevent Sails from accidentally running   *\r\n  * > auto-migrations on your production database.                           *\r\n  * >                                                                        *\r\n  * > For more info, see:                                                    *\r\n  * > https://sailsjs.com/docs/concepts/orm/model-settings#?migrate          *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\n\r\n      // ------>>>>>>>> Chanegs / not standart\r\n   migrate: 'alter',\r\n\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * Base attributes that are included in all of your models by default.      *\r\n  * By convention, this is your primary key attribute (`id`), as well as two *\r\n  * other timestamp attributes for tracking when records were last created   *\r\n  * or updated.                                                              *\r\n  *                                                                          *\r\n  * > For more info, see:                                                    *\r\n  * > https://sailsjs.com/docs/concepts/orm/model-settings#?attributes       *\r\n  *                                                              
5ea5
            *\r\n  ***************************************************************************/\r\n\r\n  attributes: {\r\n    createdAt: { type: 'number', autoCreatedAt: true, },\r\n    updatedAt: { type: 'number', autoUpdatedAt: true, },\r\n    id: { type: 'number', autoIncrement: true, },\r\n    //--------------------------------------------------------------------------\r\n    //  /\\   Using MongoDB?\r\n    //  ||   Replace `id` above with this instead:\r\n    //\r\n    // ```\r\n    // id: { type: 'string', columnName: '_id' },\r\n    // ```\r\n    //--------------------------------------------------------------------------\r\n  },\r\n\r\n\r\n  /******************************************************************************\r\n  *                                                                             *\r\n  * The set of DEKs (data encryption keys) for at-rest encryption.              *\r\n  * i.e. when encrypting/decrypting data for attributes with `encrypt: true`.   *\r\n  *                                                                             *\r\n  * > The `default` DEK is used for all new encryptions, but multiple DEKs      *\r\n  * > can be configured to allow for key rotation.  In production, be sure to   *\r\n  * > manage these keys like you would any other sensitive credential.          *\r\n  *                                                                             *\r\n  * > For more info, see:                                                       *\r\n  * > https://sailsjs.com/docs/concepts/orm/model-settings#?dataEncryptionKeys  *\r\n  *                                                                             *\r\n  ******************************************************************************/\r\n\r\n  dataEncryptionKeys: {\r\n    default: '/94Dd0RlLrmEUKExyD56W0mHkOcMSUYDFepye4vs8oM='\r\n  },\r\n\r\n\r\n  /***************************************************************************\r\n  *                                                                          *\r\n  * Whether or not implicit records for associations should be cleaned up    *\r\n  * automatically using the built-in polyfill.  This is especially useful    *\r\n  * during development with sails-disk.                                      *\r\n  *                                                                          *\r\n  * Depending on which databases you're using, you may want to disable this  *\r\n  * polyfill in your production environment.                                 *\r\n  *                                                                          *\r\n  * (For production configuration, see `config/env/production.js`.)          *\r\n  *                                                                          *\r\n  ***************************************************************************/\r\n\r\n  cascadeOnDestroy: true\r\n\r\n\r\n};\r\n```\r\n\r\ni get this error back: \r\n\r\n```\r\n info: Starting app...\r\n\r\ndebug: The `sails.config.models.connection` setting is deprecated.  Please use `sails.config.models.datastore` instead.\r\ndebug: For more info, see http://sailsjs.com/documentation/upgrading/to-v-1-0/#?changes-to-database-configuration\r\n\r\nerror: A hook (`orm`) failed to load!\r\nerror: \r\nerror: Error: A model (`post`) references a datastore which cannot be found (`mongodb`).  If this model definition has an explicit `datastore` property, check that it is spelled correctly.  If not, check your default `datastore` (usually located in `config/models.js`).  Finally, check that this datastore (`mongodb`) is valid as per http://sailsjs.com/config/datastores.\r\n    at validateModelDef (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/sails-hook-orm/lib/validate-model-def.js:588:11)\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/sails-hook-orm/lib/initialize.js:223:36\r\n    at arrayEach (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/@sailshq/lodash/lib/index.js:1463:13)\r\n    at Function.<anonymous> (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/@sailshq/lodash/lib/index.js:3525:13)\r\n    at async.auto._normalizeModelDefs (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/sails-hook-orm/lib/initialize.js:222:11)\r\n    at runTask (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1660:17)\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1602:17\r\n    at processQueue (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1612:17)\r\n    at taskComplete (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1630:13)\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1653:21\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:339:31\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:847:20\r\n    at async.auto._checkForGlobalMongoSettings (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/sails-hook-orm/lib/initialize.js:213:14)\r\n    at runTask (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1660:17)\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1602:17\r\n    at processQueue (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1612:17)\r\n    at taskComplete (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1630:13)\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1653:21\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:339:31\r\n    at /Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:847:20\r\n    at async.auto._validateDatastoreConfigsAndBuildAccessors (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/sails-hook-orm/lib/initialize.js:165:14)\r\n    at runTask (/Users/jh/Desktop/getPost-in-sailsjs/getpostbase/node_modules/async/dist/async.js:1660:17)\r\n\r\nerror: Could not load Sails app.\r\nerror: \r\nerror: Tips:\r\nerror:  • First, take a look at the error message above.\r\nerror:  • Make sure you've installed dependencies with `npm install`.\r\nerror:  • Check that this app was built for a compatible version of Sails.\r\nerror:  • Have a question or need help?  (http://sailsjs.com/support)\r\ncodes-Mac-mini:getpostbase jh$ \r\n```\r\n\r\n\r\n\r\n\r\n**Sails version*1.0.1*:\r\n**Node version**:\r\n**NPM version**:\r\n**DB adapter name**: N/A\r\n**DB adapter version**: N/A\r\n**Operating system**:\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ ] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ ] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [ ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [ ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [ ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [ ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4380","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4380/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4380/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4380/events","html_url":"https://github.com/balderdashy/sails/issues/4380","id":318831326,"node_id":"MDU6SXNzdWUzMTg4MzEzMjY=","number":4380,"title":"Possible Memory Leak on sails-mongo","user":{"login":"xbassols","id":6406144,"node_id":"MDQ6VXNlcjY0MDYxNDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/6406144?v=4","gravatar_id":"","url":"https://api.github.com/users/xbassols","html_url":"https://github.com/xbassols","followers_url":"https://api.github.com/users/xbassols/followers","following_url":"https://api.github.com/users/xbassols/following{/other_user}","gists_url":"https://api.github.com/users/xbassols/gists{/gist_id}","starred_url":"https://api.github.com/users/xbassols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xbassols/subscriptions","organizations_url":"https://api.github.com/users/xbassols/orgs","repos_url":"https://api.github.com/users/xbassols/repos","events_url":"https://api.github.com/users/xbassols/events{/privacy}","received_events_url":"https://api.github.com/users/xbassols/received_events","type":"User","site_admin":false},"labels":[{"id":268131262,"node_id":"MDU6TGFiZWwyNjgxMzEyNjI=","url":"https://api.github.com/repos/balderdashy/sails/labels/performance","name":"performance","color":"C08040","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-04-30T09:28:08Z","updated_at":"2018-05-08T15:50:20Z","closed_at":"2018-05-08T15:50:20Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: 1.0.0\r\n**Node version**: 8.11.1\r\n**NPM version**: 6.0.0\r\n**DB adapter name**: sails-mongo\r\n**DB adapter version**: 1.0.0\r\n**Operating system**: Ubuntu 16.04 and Mac OS 10.13.4\r\n\r\nHi there,\r\n\r\nIs it possible that I'm running into [this](https://github.com/balderdashy/sails/issues/4264) same problem but with sails-mongo? My heap snapshots seems to be full of debug() and the memory increases every time I get a call.\r\n\r\nThe GC is not clearing the memory. I have --expose-gc setup as well.\r\n\r\nI tried with setting the NODE_ENV=production and --prod with the same output.\r\n\r\nMy only solution now is to restart the service every few hours or it slows down to the unusable point.\r\n\r\nAny ideas on what I can try?\r\n\r\nThanks\r\n\r\n<img width=\"1213\" alt=\"screen shot 2018-04-30 at 10 56 02\" src=\"https://user-images.githubusercontent.com/6406144/39421430-4a666d10-4c69-11e8-9b24-39ec8da23436.png\">\r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [X] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [X] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [X] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [X] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [X] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [X] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\n","score":1.0},{"url":"https://api.github.com/repos/balderdashy/sails/issues/4378","repository_url":"https://api.github.com/repos/balderdashy/sails","labels_url":"https://api.github.com/repos/balderdashy/sails/issues/4378/labels{/name}","comments_url":"https://api.github.com/repos/balderdashy/sails/issues/4378/comments","events_url":"https://api.github.com/repos/balderdashy/sails/issues/4378/events","html_url":"https://github.com/balderdashy/sails/issues/4378","id":318305248,"node_id":"MDU6SXNzdWUzMTgzMDUyNDg=","number":4378,"title":"\"default primary key attribute (`id`) is not set up correctly\" message on console","user":{"login":"assiomatica","id":2242177,"node_id":"MDQ6VXNlcjIyNDIxNzc=","avatar_url":"https://avatars2.githubusercontent.com/u/2242177?v=4","gravatar_id":"","url":"https://api.github.com/users/assiomatica","html_url":"https://github.com/assiomatica","followers_url":"https://api.github.com/users/assiomatica/followers","following_url":"https://api.github.com/users/assiomatica/following{/other_user}","gists_url":"https://api.github.com/users/assiomatica/gists{/gist_id}","starred_url":"https://api.github.com/users/assiomatica/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/assiomatica/subscriptions","organizations_url":"https://api.github.com/users/assiomatica/orgs","repos_url":"https://api.github.com/users/assiomatica/repos","events_url":"https://api.github.com/users/assiomatica/events{/privacy}","received_events_url":"https://api.github.com/users/assiomatica/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-04-27T07:27:37Z","updated_at":"2018-05-06T21:17:46Z","closed_at":"2018-05-06T21:17:36Z","author_association":"NONE","body":"<!--\r\n======================================================\r\nHELLO, and welcome to the (experimental) Sailsbot\r\nissue-submission system.  If you encounter any\r\nproblems with this system, please contact us directly\r\nat http://sailsjs.com/contact.\r\n\r\nFIRST THINGS FIRST: before posting, please carefully\r\nread the contribution guide (http://bit.ly/sails-issue-guide),\r\nparticularly if this is a security issue or an issue of a\r\nnon-technical nature (Github org issues, code of conduct\r\nissues, etc.).  Those should be sent directly at\r\nhttp://sailsjs.com/contact.\r\n\r\nNOW THEN: please fill out the following info\r\n(Don't change text between **)\r\n======================================================\r\n### BEGIN VERSION INFO ###\r\n-->\r\n\r\n**Sails version**: v1.0.1\r\n**Node version**: v8.9.4\r\n**NPM version**: 5.6.0\r\n**DB adapter name**: sails-mongo\r\n**DB adapter version**: 1.0.0\r\n**Operating system**: Mac \r\n\r\n<!--\r\n### END VERSION INFO ###\r\n======================================================\r\nGREAT! - Now read carefully\r\n(Sailsbot will know if you don't)!\r\n======================================================\r\n\r\nBefore you submit an issue for Sails, please make sure you have read the issue contribution guide (http://bit.ly/sails-issue-guide) carefully, and then verify the following by typing an X in between each set of [ ] brackets below (don't make any other changes to the text!):\r\n\r\n### BEGIN PLEDGE ###\r\n- [ x] I am experiencing a concrete technical issue (aka a bug) with Sails (ideas and feature proposals should follow the guide for proposing features and enhancements (http://bit.ly/sails-feature-guide), which involves making a pull request).  If you're not 100% certain whether it's a bug or not, that's okay--you may continue.  The worst that can happen is that the issue will be closed and we'll point you in the right direction.\r\n\r\n- [ x] I am not asking a question about how to use Sails or about whether or not Sails has a certain feature (please refer to the documentation(http://sailsjs.com), or post on http://stackoverflow.com, our Google Group (http://bit.ly/sails-google-group) or our live chat (https://gitter.im/balderdashy/sails).\r\n\r\n- [x ] I have already searched for related issues, and found none open (if you found a related _closed_ issue, please link to it in your post).\r\n\r\n- [x ] My issue title is concise, on-topic and polite (\"jst.js being removed from layout.ejs on lift\" is good; \"templates dont work\" or \"why is sails dumb\" are not so good).\r\n\r\n- [x ] I have tried all the following (if relevant) and my issue remains:\r\n  - Make sure you have the right app lifted.\r\n  - Make sure you've killed the Sails server with CTRL+C and started it again.\r\n  - Make sure you closed any open browser tabs pointed at localhost before starting Sails.\r\n  - Make sure you do not have any other Sails apps running in other terminal windows.\r\n  - Make sure the app you are using to reproduce the issue has a clean node_modules/ directory, meaning:\r\n    * no dependencies are linked (e.g. you haven't run npm link foo)\r\n    * that you haven't made any inline changes to files in the node_modules/ folder\r\n    * that you don't have any weird global dependency loops. The easiest way to double-check any of the above, if you aren't sure, is to run: rm -rf node_modules && npm cache clear && npm install.\r\n\r\nand finally...\r\n- [x ] **I can provide steps to reproduce this issue that others can follow.**\r\n\r\nIdeally, this involves creating a new repo that demonstrates the problem (see instructions at http://bit.ly/sails-issue-repro).  Even though your issue may seem so simple to reproduce that a new repo is unnecessary, you'd be surprised how many solutions present themselves when you start from `sails new` and attempt to recreate your issue from scratch in a new app.  This ensures that the real issue isn't in your user code (a forgotten policy file, perhaps?) or in a third-party module.  If you're absolutely _convinced_ that a new repo is unnecessary, provide clear, concise and _specific_ steps to reproduce the problem in your post (not \"create a model then do blueprint create\").\r\n### END PLEDGE ###\r\n\r\nOKAY--THANKS FOR READING!  Continue posting details of your issue below. -->\r\n<hr/>\r\nHi \r\nSails version: v1.0.1 \r\n\r\nat start i see this on console:\r\n\r\ndebug: It looks like the default datastore for this app is `sails-mongo`,\r\ndebug: but the default primary key attribute (`id`) is not set up correctly.\r\ndebug: When using `sails-mongo`, primary keys MUST have `columnName: '_id'`,\r\ndebug: and must _not_ have `autoIncrement: true`.\r\ndebug: Also, if `dontUseObjectIds` is not set to `true` for the model,\r\ndebug: then the `type` of the primary key must be `string`.\r\ndebug: \r\ndebug: We'll set this up for you this time...\r\ndebug: \r\n info: ·• Auto-migrating...  (alter)\r\n info:    Hold tight, this could take a moment.\r\n info:  ✓ Auto-migration complete.\r\n\r\nThe app is working but this message is annoying \r\n\r\nHow to avoid this?\r\n\r\nThanks","score":1.0}]}
0

