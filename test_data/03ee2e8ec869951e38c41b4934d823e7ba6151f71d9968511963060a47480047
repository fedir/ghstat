HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Mon, 09 Apr 2018 00:31:30 GMT
Link: <https://api.github.com/search/issues?q=repo%3Asinatra%2Fsinatra+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Asinatra%2Fsinatra+type%3Aissue+state%3Aclosed&page=21>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D945:54B6:5B64F4:EA850A:5ACAB462
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 25
X-Ratelimit-Reset: 1523233950
X-Runtime-Rack: 0.328639
X-Xss-Protection: 1; mode=block

8000
{"total_count":603,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1415","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1415/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1415/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1415/events","html_url":"https://github.com/sinatra/sinatra/issues/1415","id":311905132,"number":1415,"title":"GET routes not being matched in a production environment","user":{"login":"arnoldmarunda","id":18683650,"avatar_url":"https://avatars3.githubusercontent.com/u/18683650?v=4","gravatar_id":"","url":"https://api.github.com/users/arnoldmarunda","html_url":"https://github.com/arnoldmarunda","followers_url":"https://api.github.com/users/arnoldmarunda/followers","following_url":"https://api.github.com/users/arnoldmarunda/following{/other_user}","gists_url":"https://api.github.com/users/arnoldmarunda/gists{/gist_id}","starred_url":"https://api.github.com/users/arnoldmarunda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arnoldmarunda/subscriptions","organizations_url":"https://api.github.com/users/arnoldmarunda/orgs","repos_url":"https://api.github.com/users/arnoldmarunda/repos","events_url":"https://api.github.com/users/arnoldmarunda/events{/privacy}","received_events_url":"https://api.github.com/users/arnoldmarunda/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-04-06T09:19:46Z","updated_at":"2018-04-06T14:36:37Z","closed_at":"2018-04-06T14:36:37Z","author_association":"NONE","body":"I have a Sinatra+Thin app that is not matching routes in a production environment on AWS EC2(Ubuntu) + Apache2 and giving a 'not found/404' error. But the same app in a development environment on MacOS without Apache2 all routes are matched. There are no custom route matchers in use.\r\n\r\n**config.ru**\r\n\r\n```\r\nrequire './app.rb'\r\n\r\nuse Rack::Static,\r\n :urls => [\"/css\", \"/fonts\", \"/img\", \"/js\"],\r\n :root => \"public\"\r\n\r\nset :server, %w[thin webrick]\r\nset :bind, 'ip.ad.dr.ess'\r\nset :port, 9292\r\nset :static_cache_control, [:public, :max_age => 31536000]\r\n\r\nrun Sinatra::Application\r\n```\r\n\r\n**app.rb**\r\n```\r\nget \"/:base/:tour/:lang/:id\" do\r\nif ['Tours','tours'].include?(params[:base])\r\n cache_control :public, :must_revalidate, :max_age => 36000\r\n\r\n doing something....\r\n\r\nelse\r\n pass\r\nend \r\nend\r\n```","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1409","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1409/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1409/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1409/events","html_url":"https://github.com/sinatra/sinatra/issues/1409","id":303601186,"number":1409,"title":"Sinatra::Namespace breaks route with named parameters ?","user":{"login":"scalp42","id":1475276,"avatar_url":"https://avatars1.githubusercontent.com/u/1475276?v=4","gravatar_id":"","url":"https://api.github.com/users/scalp42","html_url":"https://github.com/scalp42","followers_url":"https://api.github.com/users/scalp42/followers","following_url":"https://api.github.com/users/scalp42/following{/other_user}","gists_url":"https://api.github.com/users/scalp42/gists{/gist_id}","starred_url":"https://api.github.com/users/scalp42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scalp42/subscriptions","organizations_url":"https://api.github.com/users/scalp42/orgs","repos_url":"https://api.github.com/users/scalp42/repos","events_url":"https://api.github.com/users/scalp42/events{/privacy}","received_events_url":"https://api.github.com/users/scalp42/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"assignees":[{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/21","html_url":"https://github.com/sinatra/sinatra/milestone/21","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/21/labels","id":3093137,"number":21,"title":"v2.0.2","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":23,"closed_issues":25,"state":"open","created_at":"2018-02-06T15:34:21Z","updated_at":"2018-04-08T11:03:58Z","due_on":null,"closed_at":null},"comments":5,"created_at":"2018-03-08T19:26:51Z","updated_at":"2018-03-12T23:46:37Z","closed_at":"2018-03-12T23:42:46Z","author_association":"NONE","body":"Hi folks,\r\n\r\nRunning into an issue upgrading to Sinatra 2.\r\n\r\nThis route works fine without `Sinatra::Namespace`:\r\n\r\n```ruby\r\nclass TestController < MainController\r\n  get '/i/love/:framework.?:format?' do\r\n    params.to_json\r\n  end\r\nend\r\n```\r\n\r\n```\r\n$> http --body localhost:9393/v1/i/love/sinatra\r\n\r\n{\r\n    \"captures\": [],\r\n    \"format\": null,\r\n    \"framework\": \"sinatra\"\r\n}\r\n\r\n$> http --body localhost:9393/v1/i/love/sinatra.json\r\n\r\n{\r\n    \"captures\": [],\r\n    \"format\": \"json\",\r\n    \"framework\": \"sinatra\"\r\n}\r\n```\r\n\r\nIf I try to namespace the same route with `Sinatra::Namespace`:\r\n\r\n```ruby\r\nclass TestController < MainController\r\n  register Sinatra::Namespace\r\n\r\n  namespace '/hey' do\r\n    get '/i/love/:framework.?:format?' do\r\n      params.to_json\r\n    end\r\n  end\r\nend\r\n```\r\n\r\nIt won't start:\r\n\r\n```\r\n$> bundle exec puma --port=9393 config.ru\r\n\r\nPuma starting in single mode...\r\n* Version 3.11.3 (ruby 2.5.0-p0), codename: Love Song\r\n* Min threads: 2, max threads: 10\r\n* Environment: development\r\n\r\n! Unable to load application: Mustermann::Error: #<Class:0x00007fb6e10c22a0>: Cannot translate Mustermann::AST::Node::WithLookAhead\r\n```\r\n\r\nHere is the full trace: https://gist.github.com/scalp42/e627e470c6169e3f4be380cea327b697\r\n\r\nAny ideas? ðŸ¤”\r\n\r\nThanks in advance for the help! ","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1408","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1408/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1408/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1408/events","html_url":"https://github.com/sinatra/sinatra/issues/1408","id":303325695,"number":1408,"title":"Security Vulnerability in sinatra/rack-protection?","user":{"login":"CodingAnarchy","id":5926159,"avatar_url":"https://avatars0.githubusercontent.com/u/5926159?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingAnarchy","html_url":"https://github.com/CodingAnarchy","followers_url":"https://api.github.com/users/CodingAnarchy/followers","following_url":"https://api.github.com/users/CodingAnarchy/following{/other_user}","gists_url":"https://api.github.com/users/CodingAnarchy/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingAnarchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingAnarchy/subscriptions","organizations_url":"https://api.github.com/users/CodingAnarchy/orgs","repos_url":"https://api.github.com/users/CodingAnarchy/repos","events_url":"https://api.github.com/users/CodingAnarchy/events{/privacy}","received_events_url":"https://api.github.com/users/CodingAnarchy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-03-08T01:45:07Z","updated_at":"2018-03-12T18:39:33Z","closed_at":"2018-03-11T18:24:10Z","author_association":"NONE","body":"<img width=\"712\" alt=\"screenshot 2018-03-07 20 41 14\" src=\"https://user-images.githubusercontent.com/5926159/37128397-005f5e0c-2248-11e8-9518-2fec4794501a.png\">\r\n\r\nI'm getting this warning from Github starting today, and I've tried updating but it appears that I can't solve this without going to Sinatra 2.0, which I can't do without going to Rails 5 in the main app.  As that's a major upgrade, I wanted to check to see if a patch would be forthcoming for the `1.4.x` release of Sinatra.\r\n\r\n(Sinatra appears to be a dependency for `resque` in my application.)","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1397","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1397/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1397/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1397/events","html_url":"https://github.com/sinatra/sinatra/issues/1397","id":298718563,"number":1397,"title":"status code 205 allows response body?","user":{"login":"iguchi1124","id":6443461,"avatar_url":"https://avatars3.githubusercontent.com/u/6443461?v=4","gravatar_id":"","url":"https://api.github.com/users/iguchi1124","html_url":"https://github.com/iguchi1124","followers_url":"https://api.github.com/users/iguchi1124/followers","following_url":"https://api.github.com/users/iguchi1124/following{/other_user}","gists_url":"https://api.github.com/users/iguchi1124/gists{/gist_id}","starred_url":"https://api.github.com/users/iguchi1124/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iguchi1124/subscriptions","organizations_url":"https://api.github.com/users/iguchi1124/orgs","repos_url":"https://api.github.com/users/iguchi1124/repos","events_url":"https://api.github.com/users/iguchi1124/events{/privacy}","received_events_url":"https://api.github.com/users/iguchi1124/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/21","html_url":"https://github.com/sinatra/sinatra/milestone/21","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/21/labels","id":3093137,"number":21,"title":"v2.0.2","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":23,"closed_issues":25,"state":"open","created_at":"2018-02-06T15:34:21Z","updated_at":"2018-04-08T11:03:58Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2018-02-20T19:28:09Z","updated_at":"2018-02-21T16:33:23Z","closed_at":"2018-02-21T16:33:23Z","author_association":"CONTRIBUTOR","body":"I referenced this commits https://github.com/rack/rack/commit/bcf2698bcc90f346b145538e53d0d61bcceb2e48\r\n\r\nCurrently, sinatra drops response body when status code is 205. but, I think it should be able to choice (b).\r\n\r\n>b)\r\nindicate a zero-length payload for the response by including a\r\nTransfer-Encoding header field with a value of chunked and a message\r\nbody consisting of a single chunk of zero-length\r\n\r\nOlder RFC 2616 text is published at 1990, RFC7231 is published at 2014, so this implementation references RFC2616 probably, I propose 205 remove from `DROP_BODY_RESPONSES` constants.\r\n\r\nwhat do you think?","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1388","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1388/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1388/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1388/events","html_url":"https://github.com/sinatra/sinatra/issues/1388","id":297396420,"number":1388,"title":"Before filter adds empty captures to params","user":{"login":"alexedwards","id":228149,"avatar_url":"https://avatars2.githubusercontent.com/u/228149?v=4","gravatar_id":"","url":"https://api.github.com/users/alexedwards","html_url":"https://github.com/alexedwards","followers_url":"https://api.github.com/users/alexedwards/followers","following_url":"https://api.github.com/users/alexedwards/following{/other_user}","gists_url":"https://api.github.com/users/alexedwards/gists{/gist_id}","starred_url":"https://api.github.com/users/alexedwards/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexedwards/subscriptions","organizations_url":"https://api.github.com/users/alexedwards/orgs","repos_url":"https://api.github.com/users/alexedwards/repos","events_url":"https://api.github.com/users/alexedwards/events{/privacy}","received_events_url":"https://api.github.com/users/alexedwards/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/21","html_url":"https://github.com/sinatra/sinatra/milestone/21","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/21/labels","id":3093137,"number":21,"title":"v2.0.2","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":23,"closed_issues":25,"state":"open","created_at":"2018-02-06T15:34:21Z","updated_at":"2018-04-08T11:03:58Z","due_on":null,"closed_at":null},"comments":3,"created_at":"2018-02-15T10:32:48Z","updated_at":"2018-02-22T08:38:45Z","closed_at":"2018-02-21T14:29:24Z","author_association":"NONE","body":"Using a before filter with no pattern adds an empty `captures` attribute to `params`. This is unexpected behaviour when your application doesn't contain any regexp patterns with captures, and can cause problems for applications which are mapping `params` directly to another object.\r\n\r\nA minimal case: \r\n\r\n```ruby\r\nrequire 'sinatra'\r\n\r\nbefore do\r\nend\r\n\r\nget '/' do\r\n  params.to_s\r\nend\r\n```\r\n\r\n```sh\r\n$ curl -i localhost:9292\r\nHTTP/1.1 200 OK \r\nContent-Type: text/html;charset=utf-8\r\nContent-Length: 16\r\nX-Xss-Protection: 1; mode=block\r\nX-Content-Type-Options: nosniff\r\nX-Frame-Options: SAMEORIGIN\r\nVary: Accept-Encoding\r\nServer: WEBrick/1.3.1 (Ruby/2.3.3/2016-11-21)\r\nDate: Thu, 15 Feb 2018 10:20:14 GMT\r\nConnection: Keep-Alive\r\n\r\n{\"captures\"=>[]}\r\n```\r\n I suspect this might also be the cause of issue https://github.com/sinatra/sinatra/issues/1380. \r\n\r\nI think it's happening due to this [line of code](https://github.com/sinatra/sinatra/blob/62fb8ad8c6a42a2e1b755a9cbc419b78ea5f10ea/lib/sinatra/base.rb#L1346), which defaults the before filter pattern to the regexp `/.*/`:\r\n\r\n```ruby\r\ndef before(path = /.*/, **options, &block)\r\n        add_filter(:before, path, options, &block)\r\nend\r\n```","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1384","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1384/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1384/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1384/events","html_url":"https://github.com/sinatra/sinatra/issues/1384","id":293287673,"number":1384,"title":"error.log reporting non-errors","user":{"login":"daBee","id":6465532,"avatar_url":"https://avatars1.githubusercontent.com/u/6465532?v=4","gravatar_id":"","url":"https://api.github.com/users/daBee","html_url":"https://github.com/daBee","followers_url":"https://api.github.com/users/daBee/followers","following_url":"https://api.github.com/users/daBee/following{/other_user}","gists_url":"https://api.github.com/users/daBee/gists{/gist_id}","starred_url":"https://api.github.com/users/daBee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daBee/subscriptions","organizations_url":"https://api.github.com/users/daBee/orgs","repos_url":"https://api.github.com/users/daBee/repos","events_url":"https://api.github.com/users/daBee/events{/privacy}","received_events_url":"https://api.github.com/users/daBee/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-31T19:46:24Z","updated_at":"2018-02-06T02:47:23Z","closed_at":"2018-02-06T02:47:23Z","author_association":"NONE","body":"Not clear as to `sinatra` or `nginx`.  My error.log is reporting non-errors.  \r\n\r\n    App 67842 stdout: \r\n    App 67913 stdout: \r\n    App 67842 stderr: 127.0.0.1 - - [31/Jan/2018:14:40:46 -0500] \"GET /faq HTTP/1.1\" 200 10201 0.0241\r\n\r\nFirst two items are indeed blank.  I'm assuming this is from `sinatra`.  These result in a refresh of a page that has no errors.  Not sure what else to say on this one.  ","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1383","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1383/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1383/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1383/events","html_url":"https://github.com/sinatra/sinatra/issues/1383","id":293028865,"number":1383,"title":"When using Sequel gem, information isn't being updated","user":{"login":"maxiedaniels","id":195294,"avatar_url":"https://avatars3.githubusercontent.com/u/195294?v=4","gravatar_id":"","url":"https://api.github.com/users/maxiedaniels","html_url":"https://github.com/maxiedaniels","followers_url":"https://api.github.com/users/maxiedaniels/followers","following_url":"https://api.github.com/users/maxiedaniels/following{/other_user}","gists_url":"https://api.github.com/users/maxiedaniels/gists{/gist_id}","starred_url":"https://api.github.com/users/maxiedaniels/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxiedaniels/subscriptions","organizations_url":"https://api.github.com/users/maxiedaniels/orgs","repos_url":"https://api.github.com/users/maxiedaniels/repos","events_url":"https://api.github.com/users/maxiedaniels/events{/privacy}","received_events_url":"https://api.github.com/users/maxiedaniels/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-01-31T04:38:31Z","updated_at":"2018-01-31T16:39:09Z","closed_at":"2018-01-31T16:35:37Z","author_association":"NONE","body":"I'm using Sinatra with Sequel, and my pages with database queries aren't updating. Example code:\r\n\r\n```\r\nget '/test' do\r\n  testing = MySequelModel.map(:created_at).uniq\r\n  \"#{Time.at(testing.last).strftime(\"%b %e, %l:%M %p\")}\"\r\nend\r\n```\r\n\r\nThe first time I load the page, it will show the latest item in the database's creation time (items are created by a separate script every minute). However, I'll wait a few minutes and refresh the page, and the time is stuck at that initial time. The only way to get the page to actually get the latest time is to restart the Sinatra server.\r\n\r\nI've tried disabling caching, and it didn't have an effect. I can only think this may be a weird bug?","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1380","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1380/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1380/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1380/events","html_url":"https://github.com/sinatra/sinatra/issues/1380","id":289433711,"number":1380,"title":"params Hash Contains Persistent 'captures' Key","user":{"login":"daBee","id":6465532,"avatar_url":"https://avatars1.githubusercontent.com/u/6465532?v=4","gravatar_id":"","url":"https://api.github.com/users/daBee","html_url":"https://github.com/daBee","followers_url":"https://api.github.com/users/daBee/followers","following_url":"https://api.github.com/users/daBee/following{/other_user}","gists_url":"https://api.github.com/users/daBee/gists{/gist_id}","starred_url":"https://api.github.com/users/daBee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daBee/subscriptions","organizations_url":"https://api.github.com/users/daBee/orgs","repos_url":"https://api.github.com/users/daBee/repos","events_url":"https://api.github.com/users/daBee/events{/privacy}","received_events_url":"https://api.github.com/users/daBee/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-01-17T22:17:18Z","updated_at":"2018-01-18T03:41:26Z","closed_at":"2018-01-18T03:41:26Z","author_association":"NONE","body":"I'm finding with `Sinatra 2.0.0` that a form submission has `params` that contain an obscure key/value pair with the key being `captures`, value being `[]`.  I am trying to take this out in a method using:\r\n\r\n    incoming.delete('captures')\r\n\r\nThis doesn't work.  I continue to get values from the params hash, and is giving me an error:\r\n\r\n    App 30407 stderr: 2018-01-17 17:09:15 - NoMethodError - undefined method `values' for []:Array\r\n\r\nAll of this is confusing as when I test in another test script, it works just fine as expected, just deleting the key/value pair in the hash:\r\n\r\n    c = {\"u\"=>\"Alpha\", \"s\"=>\"zulu\", \"captures\"=>[]}\r\n    c.delete('captures')\r\n    puts c.class      # => hash\r\n\r\nIs there an alternative way of getting rid of this obscure entry in my `params` hash, or can I pass params to a method to take it out somehow?  I need to do things with the normal `params` hash that I am expecting.  Apparently `Sinatra 2.0.0` introduced this new `params` entry.  ","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1376","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1376/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1376/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1376/events","html_url":"https://github.com/sinatra/sinatra/issues/1376","id":285478759,"number":1376,"title":"NoMethodError bad_request? when Rack app mounted along with Sinatra","user":{"login":"jkowens","id":585943,"avatar_url":"https://avatars2.githubusercontent.com/u/585943?v=4","gravatar_id":"","url":"https://api.github.com/users/jkowens","html_url":"https://github.com/jkowens","followers_url":"https://api.github.com/users/jkowens/followers","following_url":"https://api.github.com/users/jkowens/following{/other_user}","gists_url":"https://api.github.com/users/jkowens/gists{/gist_id}","starred_url":"https://api.github.com/users/jkowens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkowens/subscriptions","organizations_url":"https://api.github.com/users/jkowens/orgs","repos_url":"https://api.github.com/users/jkowens/repos","events_url":"https://api.github.com/users/jkowens/events{/privacy}","received_events_url":"https://api.github.com/users/jkowens/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/20","html_url":"https://github.com/sinatra/sinatra/milestone/20","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/20/labels","id":3091658,"number":20,"title":"v2.0.1","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2018-02-06T02:12:33Z","updated_at":"2018-02-19T01:06:09Z","due_on":null,"closed_at":"2018-02-19T01:06:09Z"},"comments":3,"created_at":"2018-01-02T16:47:43Z","updated_at":"2018-02-06T15:23:53Z","closed_at":"2018-02-06T15:23:53Z","author_association":"MEMBER","body":"Sinatra is currently setting the value for constant `Rack::ShowExceptions::TEMPLATE` with the value `Sinatra::ShowExceptions::TEMPLATE`. The problem is that the new template references a method that only exists in `Sinatra::ShowExceptions`. When other Rack based apps like Grape are used alongside Sinatra an error is raised when attempting to display the error page.\r\n\r\nlib/sinatra/show_exceptions.rb\r\n```\r\n...\r\n\r\nRack::ShowExceptions.send :remove_const, \"TEMPLATE\"\r\nRack::ShowExceptions.const_set \"TEMPLATE\", Sinatra::ShowExceptions::TEMPLATE\r\n```\r\n\r\nIn commit https://github.com/sinatra/sinatra/commit/57c2ebb854379fd28def61340ad0b35a8edea792 @kgrz mentioned an alternate solution would be override the `pretty` method. Maybe that would be the right path forward?\r\n\r\nSee: \r\n\r\nruby-grape/grape/issues/1669\r\n\r\n  ","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1374","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1374/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1374/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1374/events","html_url":"https://github.com/sinatra/sinatra/issues/1374","id":283164730,"number":1374,"title":"undefined method `stop' for nil:NilClass when running example code (and other code as well)","user":{"login":"elisaado","id":14182500,"avatar_url":"https://avatars1.githubusercontent.com/u/14182500?v=4","gravatar_id":"","url":"https://api.github.com/users/elisaado","html_url":"https://github.com/elisaado","followers_url":"https://api.github.com/users/elisaado/followers","following_url":"https://api.github.com/users/elisaado/following{/other_user}","gists_url":"https://api.github.com/users/elisaado/gists{/gist_id}","starred_url":"https://api.github.com/users/elisaado/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elisaado/subscriptions","organizations_url":"https://api.github.com/users/elisaado/orgs","repos_url":"https://api.github.com/users/elisaado/repos","events_url":"https://api.github.com/users/elisaado/events{/privacy}","received_events_url":"https://api.github.com/users/elisaado/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-12-19T09:51:34Z","updated_at":"2017-12-21T18:30:26Z","closed_at":"2017-12-19T10:06:23Z","author_association":"NONE","body":"Hi,\r\nWhen I tried running my code, it failed with this error:\r\n```\r\n/home/eli/.gem/ruby/2.4.0/gems/puma-3.11.0/lib/puma/single.rb:18:in `stop': undefined method `stop' for nil:NilClass (NoMethodError)\r\n\tfrom /home/eli/.gem/ruby/2.4.0/gems/puma-3.11.0/lib/puma/launcher.rb:146:in `stop'\r\n\tfrom /home/eli/.gem/ruby/2.4.0/gems/sinatra-2.0.0/lib/sinatra/base.rb:1436:in `quit!'\r\n\tfrom /home/eli/.gem/ruby/2.4.0/gems/sinatra-2.0.0/lib/sinatra/base.rb:1461:in `ensure in run!'\r\n\tfrom /home/eli/.gem/ruby/2.4.0/gems/sinatra-2.0.0/lib/sinatra/base.rb:1461:in `run!'\r\n\tfrom /home/eli/.gem/ruby/2.4.0/gems/sinatra-2.0.0/lib/sinatra/main.rb:26:in `block in <module:Sinatra>'\r\n/home/eli/.gem/ruby/2.4.0/gems/puma-3.11.0/lib/puma/single.rb:18:in `stop': undefined method `stop' for nil:NilClass (NoMethodError)\r\n\tfrom /home/eli/.gem/ruby/2.4.0/gems/puma-3.11.0/lib/puma/launcher.rb:146:in `stop'\r\n\tfrom /home/eli/.gem/ruby/2.4.0/gems/sinatra-2.0.0/lib/sinatra/base.rb:1436:in `quit!'\r\n\tfrom /home/eli
8000
/.gem/ruby/2.4.0/gems/sinatra-2.0.0/lib/sinatra/base.rb:1542:in `block in setup_traps'\r\n```\r\nThe same error occurs when I run the example code. The sinatra gem and all it's dependencies are installed.\r\n\r\nGeneral info:\r\nOS: Arch linux\r\nRuby version: `ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-linux]`\r\n","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1368","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1368/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1368/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1368/events","html_url":"https://github.com/sinatra/sinatra/issues/1368","id":276517621,"number":1368,"title":"question about .html.haml vs .haml","user":{"login":"gartha1","id":12636021,"avatar_url":"https://avatars0.githubusercontent.com/u/12636021?v=4","gravatar_id":"","url":"https://api.github.com/users/gartha1","html_url":"https://github.com/gartha1","followers_url":"https://api.github.com/users/gartha1/followers","following_url":"https://api.github.com/users/gartha1/following{/other_user}","gists_url":"https://api.github.com/users/gartha1/gists{/gist_id}","starred_url":"https://api.github.com/users/gartha1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gartha1/subscriptions","organizations_url":"https://api.github.com/users/gartha1/orgs","repos_url":"https://api.github.com/users/gartha1/repos","events_url":"https://api.github.com/users/gartha1/events{/privacy}","received_events_url":"https://api.github.com/users/gartha1/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-11-24T05:27:05Z","updated_at":"2017-11-24T18:33:39Z","closed_at":"2017-11-24T18:33:39Z","author_association":"NONE","body":"I see that with sinatra, doing  haml :index   it looks for views/index.haml    I know a guy that used sinatra once and thought it was index.html.haml  Has sinatra changed like was it ever index.html.haml?\r\n\r\nthanks","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1367","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1367/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1367/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1367/events","html_url":"https://github.com/sinatra/sinatra/issues/1367","id":276343355,"number":1367,"title":"Undefined method 'downcase' for nil:NilClass when Sinatra under high load","user":{"login":"heavydawson","id":2285843,"avatar_url":"https://avatars2.githubusercontent.com/u/2285843?v=4","gravatar_id":"","url":"https://api.github.com/users/heavydawson","html_url":"https://github.com/heavydawson","followers_url":"https://api.github.com/users/heavydawson/followers","following_url":"https://api.github.com/users/heavydawson/following{/other_user}","gists_url":"https://api.github.com/users/heavydawson/gists{/gist_id}","starred_url":"https://api.github.com/users/heavydawson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heavydawson/subscriptions","organizations_url":"https://api.github.com/users/heavydawson/orgs","repos_url":"https://api.github.com/users/heavydawson/repos","events_url":"https://api.github.com/users/heavydawson/events{/privacy}","received_events_url":"https://api.github.com/users/heavydawson/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-11-23T11:33:25Z","updated_at":"2017-11-23T19:32:05Z","closed_at":"2017-11-23T19:32:05Z","author_association":"NONE","body":"While load testing my Sinatra application with JMeter, I found an issue whereby hitting the exact same URL over and over would cause the following error to appear in small percentage of requests. The URL being touched didn't change between requests and > 99% of requests succeed without issue:\r\n\r\n```\r\nUnexpected error while processing request: undefined method `downcase' for nil:NilClass\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1854:in `block (2 levels) in <class:Base>'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1632:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1632:in `block in compile!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1037:in `block in process_route'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1035:in `catch'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1035:in `process_route'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1148:in `block in error_block!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1145:in `reverse_each'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1145:in `error_block!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1134:in `handle_exception!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1097:in `block in dispatch!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1073:in `block in invoke'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1073:in `catch'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1073:in `invoke'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1097:in `rescue in dispatch!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1104:in `dispatch!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:923:in `block in call!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1073:in `block in invoke'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1073:in `catch'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1073:in `invoke'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:923:in `call!'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:913:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-protection-2.0.0/lib/rack/protection/xss_header.rb:18:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-protection-2.0.0/lib/rack/protection/path_traversal.rb:16:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-protection-2.0.0/lib/rack/protection/json_csrf.rb:26:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-protection-2.0.0/lib/rack/protection/base.rb:50:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-protection-2.0.0/lib/rack/protection/base.rb:50:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-protection-2.0.0/lib/rack/protection/frame_options.rb:31:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-2.0.3/lib/rack/logger.rb:15:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-2.0.3/lib/rack/common_logger.rb:33:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:231:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:224:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-2.0.3/lib/rack/head.rb:12:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/rack-2.0.3/lib/rack/method_override.rb:22:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:194:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1955:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1499:in `block in call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1726:in `synchronize'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/sinatra-2.0.0/lib/sinatra/base.rb:1499:in `call'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/thin-1.7.2/lib/thin/connection.rb:86:in `block in pre_process'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/thin-1.7.2/lib/thin/connection.rb:84:in `catch'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/thin-1.7.2/lib/thin/connection.rb:84:in `pre_process'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/thin-1.7.2/lib/thin/connection.rb:50:in `block in process'\r\n\t/UserDir/.rvm/gems/ruby-2.4.2@hansel/gems/eventmachine-1.2.5/lib/eventmachine.rb:1076:in `block in spawn_threadpool'\r\n```\r\nMy Sinatra instance is configured to use Thin as the backing HTTP server\r\nIt was only under load that this behaviour appeared. The load tester was configured to hit a single endpoint. The matching Sinatra route was:\r\n\r\n```\r\nget \"/api/#{API_VER}/:type/:ids\" do\r\nend\r\n```\r\nIt appears that under heavy load there are circumstances where the request object isn't properly populated. I can't tell if this is a Sinatra or Thin issue.","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1365","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1365/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1365/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1365/events","html_url":"https://github.com/sinatra/sinatra/issues/1365","id":274689170,"number":1365,"title":"Documentation site is down","user":{"login":"fullofcaffeine","id":81248,"avatar_url":"https://avatars2.githubusercontent.com/u/81248?v=4","gravatar_id":"","url":"https://api.github.com/users/fullofcaffeine","html_url":"https://github.com/fullofcaffeine","followers_url":"https://api.github.com/users/fullofcaffeine/followers","following_url":"https://api.github.com/users/fullofcaffeine/following{/other_user}","gists_url":"https://api.github.com/users/fullofcaffeine/gists{/gist_id}","starred_url":"https://api.github.com/users/fullofcaffeine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fullofcaffeine/subscriptions","organizations_url":"https://api.github.com/users/fullofcaffeine/orgs","repos_url":"https://api.github.com/users/fullofcaffeine/repos","events_url":"https://api.github.com/users/fullofcaffeine/events{/privacy}","received_events_url":"https://api.github.com/users/fullofcaffeine/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2017-11-16T22:38:56Z","updated_at":"2017-11-20T18:28:57Z","closed_at":"2017-11-20T18:28:57Z","author_association":"NONE","body":"At the time of this writing, trying to access the docs but can't, seems there's an infinite redirect loop:\r\n\r\nhttp://www.sinatrarb.com/documentation.html","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1364","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1364/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1364/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1364/events","html_url":"https://github.com/sinatra/sinatra/issues/1364","id":273970875,"number":1364,"title":"Project website is down","user":{"login":"zerowaitstate","id":5885867,"avatar_url":"https://avatars3.githubusercontent.com/u/5885867?v=4","gravatar_id":"","url":"https://api.github.com/users/zerowaitstate","html_url":"https://github.com/zerowaitstate","followers_url":"https://api.github.com/users/zerowaitstate/followers","following_url":"https://api.github.com/users/zerowaitstate/following{/other_user}","gists_url":"https://api.github.com/users/zerowaitstate/gists{/gist_id}","starred_url":"https://api.github.com/users/zerowaitstate/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zerowaitstate/subscriptions","organizations_url":"https://api.github.com/users/zerowaitstate/orgs","repos_url":"https://api.github.com/users/zerowaitstate/repos","events_url":"https://api.github.com/users/zerowaitstate/events{/privacy}","received_events_url":"https://api.github.com/users/zerowaitstate/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-11-14T22:45:25Z","updated_at":"2017-11-16T17:03:31Z","closed_at":"2017-11-15T05:06:05Z","author_association":"NONE","body":"Looks like http://www.sinatrarb.com is down.  Getting infinite 302 redirects.  It sort of looks like the domain is in a parked status (port 80 pointed at secureserver.net), but I can't tell from the WHOIS.","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1362","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1362/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1362/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1362/events","html_url":"https://github.com/sinatra/sinatra/issues/1362","id":272443059,"number":1362,"title":"Why are route parameters encoded as \"ASCII-8BIT\"?","user":{"login":"sinclairtarget","id":6401947,"avatar_url":"https://avatars1.githubusercontent.com/u/6401947?v=4","gravatar_id":"","url":"https://api.github.com/users/sinclairtarget","html_url":"https://github.com/sinclairtarget","followers_url":"https://api.github.com/users/sinclairtarget/followers","following_url":"https://api.github.com/users/sinclairtarget/following{/other_user}","gists_url":"https://api.github.com/users/sinclairtarget/gists{/gist_id}","starred_url":"https://api.github.com/users/sinclairtarget/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sinclairtarget/subscriptions","organizations_url":"https://api.github.com/users/sinclairtarget/orgs","repos_url":"https://api.github.com/users/sinclairtarget/repos","events_url":"https://api.github.com/users/sinclairtarget/events{/privacy}","received_events_url":"https://api.github.com/users/sinclairtarget/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/21","html_url":"https://github.com/sinatra/sinatra/milestone/21","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/21/labels","id":3093137,"number":21,"title":"v2.0.2","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":23,"closed_issues":25,"state":"open","created_at":"2018-02-06T15:34:21Z","updated_at":"2018-04-08T11:03:58Z","due_on":null,"closed_at":null},"comments":6,"created_at":"2017-11-09T05:14:51Z","updated_at":"2018-04-01T22:35:03Z","closed_at":"2018-04-01T22:35:03Z","author_association":"NONE","body":"Using Ruby 2.4.1 and Sinatra 2.0.0.\r\n\r\nUsing the following `get` invocation:\r\n```\r\nget '/entries/:slug' do |slug|\r\n  logger.info slug.encoding\r\nend\r\n```\r\n\r\nMaking a GET request to `/entries/foo` will log the encoding as `ASCII-8BIT`.\r\n\r\nWhy is the encoding not UTF-8? This plays havoc with sqlite3 at the very least, which [interprets `ASCII-8BIT` strings as `BLOB` data](https://github.com/sparklemotion/sqlite3-ruby/issues/45#issuecomment-1895378) instead of string data.","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1361","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1361/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1361/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1361/events","html_url":"https://github.com/sinatra/sinatra/issues/1361","id":271742982,"number":1361,"title":"Nested namespace with optional url parts do not work in sinatra => 2.0","user":{"login":"lvonk","id":104943,"avatar_url":"https://avatars2.githubusercontent.com/u/104943?v=4","gravatar_id":"","url":"https://api.github.com/users/lvonk","html_url":"https://github.com/lvonk","followers_url":"https://api.github.com/users/lvonk/followers","following_url":"https://api.github.com/users/lvonk/following{/other_user}","gists_url":"https://api.github.com/users/lvonk/gists{/gist_id}","starred_url":"https://api.github.com/users/lvonk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lvonk/subscriptions","organizations_url":"https://api.github.com/users/lvonk/orgs","repos_url":"https://api.github.com/users/lvonk/repos","events_url":"https://api.github.com/users/lvonk/events{/privacy}","received_events_url":"https://api.github.com/users/lvonk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2017-11-07T08:13:29Z","updated_at":"2018-02-19T15:21:52Z","closed_at":"2018-02-16T15:25:31Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\nI have the following app (which worked in sinatra < 2.0):\r\n\r\n```ruby\r\nclass App < Sinatra::Base\r\n  register Sinatra::Namespace\r\n\r\n  namespace '/foo/:year/?:period?' do\r\n    get '/status' do\r\n      status 200\r\n    end\r\n\r\n    namespace '/nested' do\r\n      get '/1' do\r\n        this_method_does_not_exist('hello')\r\n        status 200\r\n      end\r\n\r\n      helpers do\r\n        def this_method_does_not_exist(msg)\r\n          puts \"hello #{msg}\"\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n```\r\n\r\nWhen I call `/foo/2018/2/nested/1` all works as expected. When I call `/foo/2018/nested/1` it results in a\r\n\r\n```\r\nNoMethodError: undefined method `this_method_does_not_exist`\r\n```\r\n\r\nDuplicating the outer namespace \"resolves\" the issue:\r\n\r\n```ruby\r\nclass App < Sinatra::Base\r\n  register Sinatra::Namespace\r\n\r\n  namespace '/foo/:year/?:period?' do\r\n    get '/status' do\r\n      status 200\r\n    end\r\n  end\r\n  \r\n  namespace '/foo/:year/?:period?/nested' do\r\n    get '/1' do\r\n      this_method_does_not_exist('hello')\r\n      status 200\r\n    end\r\n\r\n    helpers do\r\n      def this_method_does_not_exist(msg)\r\n        puts \"hello #{msg}\"\r\n      end\r\n    end\r\n  end\r\n\r\nend\r\n```\r\n\r\nFull test case can be found here: https://github.com/lvonk/sinatra-namespaces-issue","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1357","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1357/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1357/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1357/events","html_url":"https://github.com/sinatra/sinatra/issues/1357","id":269372238,"number":1357,"title":"Add label guide to CONTRIBUTING.md","user":{"login":"zzak","id":277819,"avatar_url":"https://avatars1.githubusercontent.com/u/277819?v=4","gravatar_id":"","url":"https://api.github.com/users/zzak","html_url":"https://github.com/zzak","followers_url":"https://api.github.com/users/zzak/followers","following_url":"https://api.github.com/users/zzak/following{/other_user}","gists_url":"https://api.github.com/users/zzak/gists{/gist_id}","starred_url":"https://api.github.com/users/zzak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzak/subscriptions","organizations_url":"https://api.github.com/users/zzak/orgs","repos_url":"https://api.github.com/users/zzak/repos","events_url":"https://api.github.com/users/zzak/events{/privacy}","received_events_url":"https://api.github.com/users/zzak/received_events","type":"User","site_admin":false},"labels":[{"id":49430,"url":"https://api.github.com/repos/sinatra/sinatra/labels/docs","name":"docs","color":"3ec300","default":false},{"id":279248507,"url":"https://api.github.com/repos/sinatra/sinatra/labels/good%20first%20issue","name":"good first issue","color":"d4c5f9","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-10-29T05:18:04Z","updated_at":"2017-11-29T23:31:47Z","closed_at":"2017-11-29T23:31:47Z","author_association":"OWNER","body":"We should add the labels mentioned in #1349 to our docs","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1354","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1354/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1354/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1354/events","html_url":"https://github.com/sinatra/sinatra/issues/1354","id":265313627,"number":1354,"title":"Documentation Page there is an unaccessible link","user":{"login":"superoo7","id":15358452,"avatar_url":"https://avatars0.githubusercontent.com/u/15358452?v=4","gravatar_id":"","url":"https://api.github.com/users/superoo7","html_url":"https://github.com/superoo7","followers_url":"https://api.github.com/users/superoo7/followers","following_url":"https://api.github.com/users/superoo7/following{/other_user}","gists_url":"https://api.github.com/users/superoo7/gists{/gist_id}","starred_url":"https://api.github.com/users/superoo7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/superoo7/subscriptions","organizations_url":"https://api.github.com/users/superoo7/orgs","repos_url":"https://api.github.com/users/superoo7/repos","events_url":"https://api.github.com/users/superoo7/events{/privacy}","received_events_url":"https://api.github.com/users/superoo7/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-10-13T14:42:21Z","updated_at":"2018-02-06T15:39:25Z","closed_at":"2018-02-06T15:39:25Z","author_association":"NONE","body":"On [document page](http://www.sinatrarb.com/documentation.html), there is an unaccessible link with title `RubyConf 08: Lightweight Web Services` in `Screencasts and Presentations` sections.\r\n\r\nThe unaccessible link is [http://rubyconf2008.confreaks.com/lightweight-web-services.html](http://rubyconf2008.confreaks.com/lightweight-web-services.html)\r\n\r\nPlease update the docs. Thanks\r\n","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1353","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1353/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1353/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1353/events","html_url":"https://github.com/sinatra/sinatra/issues/1353","id":264731374,"number":1353,"title":"not able to specify params placeholder in 2nd nesting level for namespaces","user":{"login":"foxxx0","id":3109156,"avatar_url":"https://avatars0.githubusercontent.com/u/3109156?v=4","gravatar_id":"","url":"https://api.github.com/users/foxxx0","html_url":"https://github.com/foxxx0","followers_url":"https://api.github.com/users/foxxx0/followers","following_url":"https://api.github.com/users/foxxx0/following{/other_user}","gists_url":"https://api.github.com/users/foxxx0/gists{/gist_id}","starred_url":"https://api.github.com/users/foxxx0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foxxx0/subscriptions","organizations_url":"https://api.github.com/users/foxxx0/orgs","repos_url":"https://api.github.com/users/foxxx0/repos","events_url":"https://api.github.com/users/foxxx0/events{/privacy}","received_events_url":"https://api.github.com/users/foxxx0/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-11T20:50:02Z","updated_at":"2017-10-12T09:03:04Z","closed_at":"2017-10-12T09:03:04Z","author_association":"NONE","body":"Hey,\r\n\r\nI've noticed a strange behavior in 2.0.0 with nested namespaces, that used to work in 1.4.x.\r\n\r\nIt seems that using `/:foo` placeholder is only possible up to the first level of nesting for namespace paths.\r\n\r\nI have created a minimal example showcasing this issue at: https://github.com/foxxx0/sinatra-2.0-namespace-nesting-issue\r\n\r\nwhich boils down to:\r\n\r\n```ruby\r\n# nesting namespaces seems to work just fine...\r\nnamespace '/working' do\r\n  namespace '/:id' do\r\n    # this works just fine\r\n    get { params.inspect }\r\n  end\r\nend\r\n\r\n# ... until it doesn't\r\nnamespace '/broken' do\r\n  namespace '/foo' do\r\n    namespace '/:id' do\r\n      # for some reason this triggers Sinatra::NotFound, resulting in a 404\r\n      get { params.inspect }\r\n    end\r\n  end\r\nend\r\n```\r\n\r\nI was not able to find anything related in the 2.0.0 changelog, so I'm not sure if this intended behavior or a bug.\r\n\r\n\r\nCheers,\r\nThore","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1352","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1352/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1352/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1352/events","html_url":"https://github.com/sinatra/sinatra/issues/1352","id":264701389,"number":1352,"title":"Module Method \"Redirect\" method not defined","user":{"login":"daBee","id":6465532,"avatar_url":"https://avatars1.githubusercontent.com/u/6465532?v=4","gravatar_id":"","url":"https://api.github.com/users/daBee","html_url":"https://github.com/daBee","followers_url":"https://api.github.com/users/daBee/followers","following_url":"https://api.github.com/users/daBee/following{/other_user}","gists_url":"https://api.github.com/users/daBee/gists{/gist_id}","starred_url":"https://api.github.com/users/daBee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daBee/subscriptions","organizations_url":"https://api.github.com/users/daBee/orgs","repos_url":"https://api.github.com/users/daBee/repos","events_url":"https://api.github.com/users/daBee/events{/privacy}","received_events_url":"https://api.github.com/users/daBee/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-10-11T19:09:05Z","updated_at":"2017-10-11T22:42:56Z","closed_at":"2017-10-11T22:42:56Z","author_association":"NONE","body":"I've written a module that's loading fine.  As a test, I've set a method to redirect to a parameter url, which I'm using 'http://www.google.ca' as an easy test.  So I expect the method to completely bounce out of the app to google.  \r\n\r\n    def Mymodule.validate_alpha(bounceURL)\r\n        redirect bounceURL\r\n    end\r\n\r\nI am getting an error on this method:\r\n\r\n    undefined method `redirect' for Mymodule:Module\r\n\r\nI'm a little confused between `redirect` and `redirect to` in Sinatra, so maybe that's it, but in the meantime I'm confused that this sort of error would come up as it's still a defined method.  \r\n\r\nAny insight appreciated.  Cheers","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1350","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1350/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1350/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1350/events","html_url":"https://github.com/sinatra/sinatra/issues/1350","id":260704224,"number":1350,"title":"non utf-8 encoding issue with error handlers","user":{"login":"eguzki","id":881529,"avatar_url":"https://avatars0.githubusercontent.com/u/881529?v=4","gravatar_id":"","url":"https://api.github.com/users/eguzki","html_url":"https://github.com/eguzki","followers_url":"https://api.github.com/users/eguzki/followers","following_url":"https://api.github.com/users/eguzki/following{/other_user}","gists_url":"https://api.github.com/users/eguzki/gists{/gist_id}","starred_url":"https://api.github.com/users/eguzki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eguzki/subscriptions","organizations_url":"https://api.github.com/users/eguzki/orgs","repos_url":"https://api.github.com/users/eguzki/repos","events_url":"https://api.github.com/users/eguzki/events{/privacy}","received_events_url":"https://api.github.com/users/eguzki/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/20","html_url":"https://github.com/sinatra/sinatra/milestone/20","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/20/labels","id":3091658,"number":20,"title":"v2.0.1","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2018-02-06T02:12:33Z","updated_at":"2018-02-19T01:06:09Z","due_on":null,"closed_at":"2018-02-19T01:06:09Z"},"comments":5,"created_at":"2017-09-26T17:20:48Z","updated_at":"2018-02-06T17:35:40Z","closed_at":"2018-02-06T17:35:40Z","author_association":"NONE","body":"Sinatra 2.0.0\r\n\r\nWhen post request has a json body with non utf-8 encoding characters in keys, Sinatra middleware returns 400 with the following body:\r\n> Invalid query parameters: invalid byte sequence in UTF-8\r\n\r\nRequest body example:\r\n`\r\n{                                          \r\n  \"\\xf0\\x90\\x28\\xbc\": 3\r\n}\r\n`\r\n\r\nOur Sinatra app has been configured to enable raise_errors and disable show_exceptions \r\n```\r\nenable :raise_errors\r\ndisable :show_exceptions\r\n```\r\n\r\nWe would like to customize error message, so we registered a BadRequest error handler:\r\n\r\n```\r\nerror Sinatra::BadRequest do\r\n  [400, {}, ['some error message']]               \r\nend \r\n```\r\n\r\n\r\nThis error handling causes Sinatra app to raise exception internally. After a bit of debugging, crash happens @ https://github.com/sinatra/sinatra/blob/5de64980e0f0fe146d8b60ca3b009f183113e68b/lib/sinatra/base.rb#L1030\r\n\r\nI guess \"@params\" is nil because due to encoding issue \"@params\" was not properly initialized @ https://github.com/sinatra/sinatra/blob/5de64980e0f0fe146d8b
8000
60ca3b009f183113e68b/lib/sinatra/base.rb#L1089\r\n\r\nCalling \"params\" method of request object raises exception which is handled but \"@params\" is left uninitialized.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1349","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1349/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1349/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1349/events","html_url":"https://github.com/sinatra/sinatra/issues/1349","id":258988622,"number":1349,"title":"Help Wanted && Good First Issue && Wishlist","user":{"login":"zzak","id":277819,"avatar_url":"https://avatars1.githubusercontent.com/u/277819?v=4","gravatar_id":"","url":"https://api.github.com/users/zzak","html_url":"https://github.com/zzak","followers_url":"https://api.github.com/users/zzak/followers","following_url":"https://api.github.com/users/zzak/following{/other_user}","gists_url":"https://api.github.com/users/zzak/gists{/gist_id}","starred_url":"https://api.github.com/users/zzak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzak/subscriptions","organizations_url":"https://api.github.com/users/zzak/orgs","repos_url":"https://api.github.com/users/zzak/repos","events_url":"https://api.github.com/users/zzak/events{/privacy}","received_events_url":"https://api.github.com/users/zzak/received_events","type":"User","site_admin":false},"labels":[{"id":697295036,"url":"https://api.github.com/repos/sinatra/sinatra/labels/Maintainer","name":"Maintainer","color":"e99695","default":false}],"state":"closed","locked":false,"assignee":{"login":"zzak","id":277819,"avatar_url":"https://avatars1.githubusercontent.com/u/277819?v=4","gravatar_id":"","url":"https://api.github.com/users/zzak","html_url":"https://github.com/zzak","followers_url":"https://api.github.com/users/zzak/followers","following_url":"https://api.github.com/users/zzak/following{/other_user}","gists_url":"https://api.github.com/users/zzak/gists{/gist_id}","starred_url":"https://api.github.com/users/zzak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzak/subscriptions","organizations_url":"https://api.github.com/users/zzak/orgs","repos_url":"https://api.github.com/users/zzak/repos","events_url":"https://api.github.com/users/zzak/events{/privacy}","received_events_url":"https://api.github.com/users/zzak/received_events","type":"User","site_admin":false},"assignees":[{"login":"zzak","id":277819,"avatar_url":"https://avatars1.githubusercontent.com/u/277819?v=4","gravatar_id":"","url":"https://api.github.com/users/zzak","html_url":"https://github.com/zzak","followers_url":"https://api.github.com/users/zzak/followers","following_url":"https://api.github.com/users/zzak/following{/other_user}","gists_url":"https://api.github.com/users/zzak/gists{/gist_id}","starred_url":"https://api.github.com/users/zzak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzak/subscriptions","organizations_url":"https://api.github.com/users/zzak/orgs","repos_url":"https://api.github.com/users/zzak/repos","events_url":"https://api.github.com/users/zzak/events{/privacy}","received_events_url":"https://api.github.com/users/zzak/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2017-09-19T22:53:00Z","updated_at":"2017-11-30T19:17:56Z","closed_at":"2017-11-30T19:17:56Z","author_association":"OWNER","body":"* [\"Help Wanted\"](https://github.com/sinatra/sinatra/labels/help%20wanted): Anyone willing to pitch in is open to contribute to this ticket as they see fit (will try to add context / summarize or ask for requirements)\r\n\r\n* [\"Good First Issue\"](https://github.com/sinatra/sinatra/labels/good%20first%20issue): Potential first time contributors should start here\r\n\r\n* [\"Wishlist\"](https://github.com/sinatra/sinatra/labels/Wishlist): All the things I wish we had but have no time for","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1348","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1348/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1348/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1348/events","html_url":"https://github.com/sinatra/sinatra/issues/1348","id":258665856,"number":1348,"title":"How do I specify more fine grained before filters","user":{"login":"timuckun","id":101559,"avatar_url":"https://avatars2.githubusercontent.com/u/101559?v=4","gravatar_id":"","url":"https://api.github.com/users/timuckun","html_url":"https://github.com/timuckun","followers_url":"https://api.github.com/users/timuckun/followers","following_url":"https://api.github.com/users/timuckun/following{/other_user}","gists_url":"https://api.github.com/users/timuckun/gists{/gist_id}","starred_url":"https://api.github.com/users/timuckun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timuckun/subscriptions","organizations_url":"https://api.github.com/users/timuckun/orgs","repos_url":"https://api.github.com/users/timuckun/repos","events_url":"https://api.github.com/users/timuckun/events{/privacy}","received_events_url":"https://api.github.com/users/timuckun/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/21","html_url":"https://github.com/sinatra/sinatra/milestone/21","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/21/labels","id":3093137,"number":21,"title":"v2.0.2","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":23,"closed_issues":25,"state":"open","created_at":"2018-02-06T15:34:21Z","updated_at":"2018-04-08T11:03:58Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2017-09-19T01:14:18Z","updated_at":"2018-04-08T11:03:58Z","closed_at":"2018-04-08T11:03:58Z","author_association":"NONE","body":"I want to do something like this\r\n\r\nbefore POST or PUT when content type is JSON do\r\n    for only put and post\r\nend\r\n\r\nbefore content type is JSON do \r\n   this would apply to all other verbs?\r\nend\r\n\r\nI have scoured the documentation and don't see anything. I saw this in one github project but it fails so it must be changed since then.\r\n\r\n```ruby\r\n #Before POST and PUT requests\r\n before :accepted_verbs => [\"POST\", \"PUT\"] do\r\n\r\n   # Parse JSON\r\n   begin\r\n     @Params = MultiJson.load(request.body.read , :symbolize_keys => true)\r\n   rescue Exception => e\r\n     halt 400, output(\"custom: #{e}\")\r\n   end\r\n\r\n end\r\n```","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1339","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1339/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1339/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1339/events","html_url":"https://github.com/sinatra/sinatra/issues/1339","id":253072887,"number":1339,"title":"v2.0.1","user":{"login":"zzak","id":277819,"avatar_url":"https://avatars1.githubusercontent.com/u/277819?v=4","gravatar_id":"","url":"https://api.github.com/users/zzak","html_url":"https://github.com/zzak","followers_url":"https://api.github.com/users/zzak/followers","following_url":"https://api.github.com/users/zzak/following{/other_user}","gists_url":"https://api.github.com/users/zzak/gists{/gist_id}","starred_url":"https://api.github.com/users/zzak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzak/subscriptions","organizations_url":"https://api.github.com/users/zzak/orgs","repos_url":"https://api.github.com/users/zzak/repos","events_url":"https://api.github.com/users/zzak/events{/privacy}","received_events_url":"https://api.github.com/users/zzak/received_events","type":"User","site_admin":false},"labels":[{"id":99139,"url":"https://api.github.com/repos/sinatra/sinatra/labels/release","name":"release","color":"fffc31","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/20","html_url":"https://github.com/sinatra/sinatra/milestone/20","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/20/labels","id":3091658,"number":20,"title":"v2.0.1","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2018-02-06T02:12:33Z","updated_at":"2018-02-19T01:06:09Z","due_on":null,"closed_at":"2018-02-19T01:06:09Z"},"comments":10,"created_at":"2017-08-26T07:58:12Z","updated_at":"2018-02-17T17:31:45Z","closed_at":"2018-02-17T17:31:45Z","author_association":"OWNER","body":"Prepare for next patch level release","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1335","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1335/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1335/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1335/events","html_url":"https://github.com/sinatra/sinatra/issues/1335","id":250958871,"number":1335,"title":"CHANGELOG could have a section on v1.4.8","user":{"login":"olleolleolle","id":211,"avatar_url":"https://avatars0.githubusercontent.com/u/211?v=4","gravatar_id":"","url":"https://api.github.com/users/olleolleolle","html_url":"https://github.com/olleolleolle","followers_url":"https://api.github.com/users/olleolleolle/followers","following_url":"https://api.github.com/users/olleolleolle/following{/other_user}","gists_url":"https://api.github.com/users/olleolleolle/gists{/gist_id}","starred_url":"https://api.github.com/users/olleolleolle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olleolleolle/subscriptions","organizations_url":"https://api.github.com/users/olleolleolle/orgs","repos_url":"https://api.github.com/users/olleolleolle/repos","events_url":"https://api.github.com/users/olleolleolle/events{/privacy}","received_events_url":"https://api.github.com/users/olleolleolle/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-08-17T14:15:04Z","updated_at":"2017-08-27T00:37:42Z","closed_at":"2017-08-26T11:19:25Z","author_association":"CONTRIBUTOR","body":"Issue: `CHANGELOG.md` does not mention v1.4.8.\r\n\r\n## TODO\r\n\r\n- [ ] Summarize the changes in this compare view: https://github.com/sinatra/sinatra/compare/v1.4.7...v1.4.8\r\n- [x] Mention release date: January 30, 2017 (source: https://rubygems.org/gems/sinatra/versions/1.4.8)\r\n","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1334","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1334/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1334/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1334/events","html_url":"https://github.com/sinatra/sinatra/issues/1334","id":250517286,"number":1334,"title":"examples/chat.rb doesn't work on Heroku anymore","user":{"login":"rajsahae","id":394822,"avatar_url":"https://avatars1.githubusercontent.com/u/394822?v=4","gravatar_id":"","url":"https://api.github.com/users/rajsahae","html_url":"https://github.com/rajsahae","followers_url":"https://api.github.com/users/rajsahae/followers","following_url":"https://api.github.com/users/rajsahae/following{/other_user}","gists_url":"https://api.github.com/users/rajsahae/gists{/gist_id}","starred_url":"https://api.github.com/users/rajsahae/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajsahae/subscriptions","organizations_url":"https://api.github.com/users/rajsahae/orgs","repos_url":"https://api.github.com/users/rajsahae/repos","events_url":"https://api.github.com/users/rajsahae/events{/privacy}","received_events_url":"https://api.github.com/users/rajsahae/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-08-16T05:46:34Z","updated_at":"2017-08-18T06:10:18Z","closed_at":"2017-08-18T06:10:18Z","author_association":"NONE","body":"I think it once worked, I see in the origin gist (https://gist.github.com/rkh/1476463) heroku working is specifically mentioned.\r\n\r\nI based a small project on this and uploaded it to heroku recently and things weren't working. I reverted to the original version and it still doesn't work. When you attempt to submit text, it takes you back to the login page. Any ideas?\r\n\r\nHere is a sample app: https://eug-markov-bot.herokuapp.com/","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1332","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1332/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1332/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1332/events","html_url":"https://github.com/sinatra/sinatra/issues/1332","id":250103083,"number":1332,"title":"ArgumentError with regexp route with optional capture group","user":{"login":"dometto","id":147111,"avatar_url":"https://avatars1.githubusercontent.com/u/147111?v=4","gravatar_id":"","url":"https://api.github.com/users/dometto","html_url":"https://github.com/dometto","followers_url":"https://api.github.com/users/dometto/followers","following_url":"https://api.github.com/users/dometto/following{/other_user}","gists_url":"https://api.github.com/users/dometto/gists{/gist_id}","starred_url":"https://api.github.com/users/dometto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dometto/subscriptions","organizations_url":"https://api.github.com/users/dometto/orgs","repos_url":"https://api.github.com/users/dometto/repos","events_url":"https://api.github.com/users/dometto/events{/privacy}","received_events_url":"https://api.github.com/users/dometto/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sinatra/sinatra/milestones/20","html_url":"https://github.com/sinatra/sinatra/milestone/20","labels_url":"https://api.github.com/repos/sinatra/sinatra/milestones/20/labels","id":3091658,"number":20,"title":"v2.0.1","description":"","creator":{"login":"namusyaka","id":309329,"avatar_url":"https://avatars0.githubusercontent.com/u/309329?v=4","gravatar_id":"","url":"https://api.github.com/users/namusyaka","html_url":"https://github.com/namusyaka","followers_url":"https://api.github.com/users/namusyaka/followers","following_url":"https://api.github.com/users/namusyaka/following{/other_user}","gists_url":"https://api.github.com/users/namusyaka/gists{/gist_id}","starred_url":"https://api.github.com/users/namusyaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namusyaka/subscriptions","organizations_url":"https://api.github.com/users/namusyaka/orgs","repos_url":"https://api.github.com/users/namusyaka/repos","events_url":"https://api.github.com/users/namusyaka/events{/privacy}","received_events_url":"https://api.github.com/users/namusyaka/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2018-02-06T02:12:33Z","updated_at":"2018-02-19T01:06:09Z","due_on":null,"closed_at":"2018-02-19T01:06:09Z"},"comments":4,"created_at":"2017-08-14T17:46:56Z","updated_at":"2018-02-06T15:26:50Z","closed_at":"2018-02-06T15:26:50Z","author_association":"CONTRIBUTOR","body":"I have the following route definition:\r\n```ruby\r\nget %r{/pages(?:/(.+))?} do |path|\r\n...\r\nend\r\n```\r\nThe regexp allows for an optional capture group. In `sinatra v1.4`, this would work as expected. At present, I am getting an `ArgumentError: wrong number of arguments (given 0, expected 1)`. Backtrace:\r\n\r\n```\r\n /gollum/lib/gollum/app.rb in block (2 levels) in <class:App>\r\n\r\n          get %r{/pages(?:/(.+))?} do |path|\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in call\r\n\r\n              proc { |a, p| unbound_method.bind(a).call(*p) } :\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block in compile!\r\n\r\n              proc { |a, p| unbound_method.bind(a).call(*p) } :\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block (3 levels) in route!\r\n\r\n                route_eval { block[*args] }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in route_eval\r\n\r\n          throw :halt, yield\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block (2 levels) in route!\r\n\r\n                route_eval { block[*args] }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block in process_route\r\n\r\n            block ? block[self, values] : yield(self, values)\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in catch\r\n\r\n          catch(:pass) do\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in process_route\r\n\r\n          catch(:pass) do\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block in route!\r\n\r\n              returned_pass_block = process_route(pattern, conditions) do |*args|\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in each\r\n\r\n            routes.each do |pattern, conditions, block|\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in route!\r\n\r\n            routes.each do |pattern, conditions, block|\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block in dispatch!\r\n\r\n            route!\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block in invoke\r\n\r\n          res = catch(:halt) { yield }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in catch\r\n\r\n          res = catch(:halt) { yield }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in invoke\r\n\r\n          res = catch(:halt) { yield }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in dispatch!\r\n\r\n          invoke do\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block in call!\r\n\r\n          invoke { dispatch! }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in block in invoke\r\n\r\n          res = catch(:halt) { yield }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in catch\r\n\r\n          res = catch(:halt) { yield }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in invoke\r\n\r\n          res = catch(:halt) { yield }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in call!\r\n\r\n          invoke { dispatch! }\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/sinatra-2.0.0/lib/sinatra/base.rb in call\r\n\r\n          dup.call!(env)\r\n\r\n.rvm/gems/ruby-2.4.1@gollum/gems/rack-protection-2.0.0/lib/rack/protection/xss_header.rb in call\r\n\r\n            status, headers, body = @app.call(env)\r\n```","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1327","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1327/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1327/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1327/events","html_url":"https://github.com/sinatra/sinatra/issues/1327","id":243371013,"number":1327,"title":"Sinatra 2.0.0 - system overloads on large uploads","user":{"login":"Kanshiroron","id":5125105,"avatar_url":"https://avatars1.githubusercontent.com/u/5125105?v=4","gravatar_id":"","url":"https://api.github.com/users/Kanshiroron","html_url":"https://github.com/Kanshiroron","followers_url":"https://api.github.com/users/Kanshiroron/followers","following_url":"https://api.github.com/users/Kanshiroron/following{/other_user}","gists_url":"https://api.github.com/users/Kanshiroron/gists{/gist_id}","starred_url":"https://api.github.com/users/Kanshiroron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kanshiroron/subscriptions","organizations_url":"https://api.github.com/users/Kanshiroron/orgs","repos_url":"https://api.github.com/users/Kanshiroron/repos","events_url":"https://api.github.com/users/Kanshiroron/events{/privacy}","received_events_url":"https://api.github.com/users/Kanshiroron/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2017-07-17T11:52:36Z","updated_at":"2017-08-08T08:55:52Z","closed_at":"2017-08-08T08:51:19Z","author_association":"NONE","body":"Hello,\r\nI have a small web service that basically have a single endpoint to upload large files (docker tar images ~800MB)\r\nHowever, I just upgraded Sinatra to version 2.0.0 (from 1.4.7), and my uploads now takes forever (over 10min (timed out) from the very same server that hosts the web service -> via loopback), compared to a few seconds before.\r\nAlso, the CPU is now at 100% (on a single thread -> 25% on a quad core), compared to 5-10% with the old version.\r\n\r\nHere is my webserver:\r\n```ruby\r\npost '/create' do\r\n\t# checking if the CSS has been sent\r\n\tunless params[:css] && params[:css][:tempfile]\r\n\t\treturn [400, \"No css file sent\"]\r\n\tend\r\n\r\n\t# saving upload file\r\n\ttar_file = \"#{$docker_dir}/#{UUIDTools::UUID.random_create}.tar\"\r\n\tFile.open(tar_file, \"wb\") do |f|\r\n\t\tf.write(params[:css][:tempfile].read)\r\n\tend\r\nend\r\n```\r\n\r\nAnd here is my upload client (with Gem RestClient):\r\n\r\n```ruby\r\n#!/usr/bin/env ruby\r\n\r\nrequire 'rest-client'\r\n\r\n# defines\r\n$css_tar = \"../../css/css.tar\"\r\n$base_url = \"http://my-server:8080\"\r\n$http_timeout = 600\r\n\r\n# checking if the css.tar is there\r\nraise \"Couldn't find css tar archive at: #{$css_tar}\" unless File.exists? $css_tar\r\n\r\nputs \"INFO :: uploading css.tar archive\"\r\n\r\n# creating and sending request to upload archive\r\nanswer = RestClient::Request.execute(method: :post, url: \"#{$base_url}/create\", timeout: $http_timeout, payload: {:css => File.new($css_tar, 'rb')})\r\n\r\nraise \"ERROR :: Couldn't create infra from css.tar archive: #{answer.body}\" unless answer.code == 200\r\n```\r\n\r\nThanks for your help and support,\r\nBest regards\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1318","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1318/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1318/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1318/events","html_url":"https://github.com/sinatra/sinatra/issues/1318","id":239955716,"number":1318,"title":"Sinatra won't work for me.  ","user":{"login":"stuartambient","id":1694926,"avatar_url":"https://avatars1.githubusercontent.com/u/1694926?v=4","gravatar_id":"","url":"https://api.github.com/users/stuartambient","html_url":"https://github.com/stuartambient","followers_url":"https://api.github.com/users/stuartambient/followers","following_url":"https://api.github.com/users/stuartambient/following{/other_user}","gists_url":"https://api.github.com/users/stuartambient/gists{/gist_id}","starred_url":"https://api.github.com/users/stuartambient/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stuartambient/subscriptions","organizations_url":"https://api.github.com/users/stuartambient/orgs","repos_url":"https://api.github.com/users/stuartambient/repos","events_url":"https://api.github.com/users/stuartambient/events{/privacy}","received_events_url":"https://api.github.com/users/stuartambient/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-07-01T15:30:40Z","updated_at":"2017-07-01T17:19:55Z","closed_at":"2017-07-01T17:19:55Z","author_association":"NONE","body":"I have tried a few different things here, first the simple \"hello world\" in the readme. And more recently\r\n\r\n```\r\n#config.ru\r\nrequire './app'\r\nrun HiSinatra\r\n\r\n#app.rb\r\nrequire 'sinatra'\r\n\r\nclass HiSinatra < Sinatra::Base\r\n  get '/' do \r\n    \"Hey Sinatra\"    \r\n  end\r\nend\r\n```\r\n\r\nRunning rackup with debug I got these errors - \r\n```\r\nvagrant@vagrant:/vagrant/TestRails/hello-sinatra$ rackup -o 127.0.0.1 -p 3000 --debug\r\nnil\r\nException `LoadError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55 - cannot load\r\nsuch file -- sinatra\r\nUsing Ext extension for JSON.\r\nException `LoadError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55 - cannot load\r\nsuch file -- rack/handler/puma\r\n#<Rack::ContentLength:0x00000001829960\r\n @app=\r\n  #<Rack::Chunked:0x000000018299b0\r\n   @app=\r\n    #<Rack::CommonLogger:0x00000001829a00\r\n     @app=\r\n      #<Rack::ShowExceptions:0x00000001869358\r\n       @app=\r\n        #<Rack::Lint:0x000000018693a8\r\n         @app=#<Rack::TempfileReaper:0x000000018693f8 @app=HiSinatra>,\r\n         @content_length=nil>>,\r\n     @logger=#<IO:<STDERR>>>>>\r\nHiSinatra\r\nPuma starting in single mode...\r\n* Version 3.9.1 (ruby 2.4.1-p111), codename: Private Caller\r\n* Min threads: 0, max threads: 16\r\n* Environment: development\r\n* Listening on tcp://127.0.0.1:3000\r\nUse Ctrl-C to stop\r\n```\r\n\r\nAnd with ruby -debug \r\n```\r\n-e:1:in `<main>': undefined local variable or method `bug' for main:Object (NameError)\r\nvagrant@vagrant:/vagrant/TestRails/hello-sinatra$ ruby -d app.rb -o 0.0.0.0 -p 3000\r\nException `LoadError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems.rb:1346 - cannot load such file -- rubygems/\r\ndefaults/operating_system\r\nException `LoadError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems.rb:1355 - cannot load such file -- rubygems/\r\ndefaults/ruby\r\nException `LoadError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55 - cannot load\r\nsuch file -- sinatra\r\nUsing Ext extension for JSON.\r\nException `LoadError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55 - cannot load\r\nsuch file -- thin\r\nException `LoadError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/resolv.rb:171 - LoadError\r\nException `SyntaxError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/forwardable/impl.rb:6 - <compiled>: syntax error, unexpected\r\nend-of-input\r\n().timeout=\r\n           ^\r\nException `SyntaxError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/forwardable/impl.rb:6 - <compiled>: syntax error, unexpected\r\nend-of-input\r\n().maximum_connections=\r\n                       ^\r\nException `SyntaxError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/forwardable/impl.rb:6 - <compiled>: syntax error, unexpected\r\nend-of-input\r\naximum_persistent_connections=\r\n                              ^\r\nException `SyntaxError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/forwardable/impl.rb:6 - <compiled>: syntax error, unexpected\r\nend-of-input\r\n().threaded=\r\n            ^\r\nException `SyntaxError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/forwardable/impl.rb:6 - <compiled>: syntax error, unexpected\r\nend-of-input\r\n().threadpool_size=\r\n                   ^\r\nException `SyntaxError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/forwardable/impl.rb:6 - <compiled>: syntax error, unexpected\r\nend-of-input\r\n().ssl=\r\n       ^\r\nException `SyntaxError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/forwardable/impl.rb:6 - <compiled>: syntax error, unexpected\r\nend-of-input\r\n().ssl_options=\r\n               ^\r\nException `SyntaxError' at /home/vagrant/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/forwardable/impl.rb:6 - <compiled>: syntax error, unexpected\r\nend-of-input\r\n().no_epoll=\r\n            ^\r\n== Sinatra (v2.0.0) has taken the stage on 3000 for development with backup from Thin\r\nThin web server (v1.7.1 codename Muffin Mode)\r\nMaximum connections set to 1024\r\nListening on 0.0.0.0:3000, CTRL+C to stop\r\n```\r\nThe version of Ruby I run (via RVM) is 2.4.1 , it looks like \"maybe\" Sinatra is looking for 2.4.0?  \r\n\r\nThis is my gem environment.  \r\n\r\n```\r\nRubyGems Environment:\r\n  - RUBYGEMS VERSION: 2.6.12\r\n  - RUBY VERSION: 2.4.1 (2017-03-22 patchlevel 111) [x86_64-linux]\r\n  - INSTALLATION DIRECTORY: /home/vagrant/.rvm/gems/ruby-2.4.1\r\n  - USER INSTALLATION DIRECTORY: /home/vagrant/.gem/ruby/2.4.0\r\n  - RUBY EXECUTABLE: /home/vagrant/.rvm/rubies/ruby-2.4.1/bin/ruby\r\n  - EXECUTABLE DIRECTORY: /home/vagrant/.rvm/gems/ruby-2.4.1/bin\r\n  - SPEC CACHE DIRECTORY: /home/vagrant/.gem/specs\r\n  - SYSTEM CONFIGURATION DIRECTORY: /etc\r\n  - RUBYGEMS PLATFORMS:\r\n    - ruby\r\n    - x86_64-linux\r\n  - GEM PATHS:\r\n     - /home/vagrant/.rvm/gems/ruby-2.4.1\r\n     - /home/vagrant/.rvm/gems/ruby-2.4.1@global\r\n  - GEM CONFIGURATION:\r\n     - :update_sources => true\r\n     - :verbose => true\r\n     - :backtrace => false\r\n     - :bulk_threshold => 1000\r\n  - REMOTE SOURCES:\r\n     - https://rubygems.org/\r\n  - SHELL PATH:\r\n     - /home/vagrant/.rvm/gems/ruby-2.4.1/bin\r\n     - /home/vagrant/.rvm/gems/ruby-2.4.1@global/bin\r\n     - /home/vagrant/.rvm/rubies/ruby-2.4.1/bin\r\n     - /home/vagrant/bin\r\n     - /home/vagrant/.local/bin\r\n     - /usr/local/sbin\r\n     - /usr/local/bin\r\n     - /usr/sbin\r\n     - /usr/bin\r\n     - /sbin\r\n     - /bin\r\n     - /usr/games\r\n     - /usr/local/games\r\n     - /snap/bin\r\n     - /home/vagrant/.rvm/bin\r\n     - /home/vagrant/.rvm/bin\r\nvagrant@vagrant:/vagrant/TestRails/hello-sinatra$\r\n```\r\nGem list\r\n*** LOCAL GEMS ***\r\n\r\n```\r\nactioncable (5.1.1, 5.0.1)\r\nactionmailer (5.1.1, 5.0.1)\r\nactionpack (5.1.1, 5.0.1)\r\
18fe
nactionview (5.1.1, 5.0.1)\r\nactivejob (5.1.1, 5.0.1)\r\nactivemodel (5.1.1, 5.0.1)\r\nactiverecord (5.1.1, 5.0.1)\r\nactivesupport (5.1.1, 5.0.1)\r\naddressable (2.5.1)\r\narel (8.0.0, 7.1.4)\r\nautoprefixer-rails (7.1.1.2)\r\naws-sdk (2.10.3)\r\naws-sdk-core (2.10.3)\r\naws-sdk-resources (2.10.3)\r\naws-sigv4 (1.0.0)\r\nbackports (3.8.0)\r\nbcrypt (3.1.11)\r\nbigdecimal (1.3.2, default: 1.3.0)\r\nbindex (0.5.0)\r\nbuilder (3.2.3, 3.2.2)\r\nbundler (1.15.1, 1.15.0)\r\nbundler-unload (1.0.2)\r\nbyebug (9.0.6)\r\ncapybara (2.14.3, 2.14.2, 2.14.0)\r\ncarrierwave (1.1.0)\r\ncarrierwave-aws (1.1.0)\r\nchildprocess (0.7.0)\r\ncoderay (1.1.1)\r\ncoffee-rails (4.2.2, 4.2.1)\r\ncoffee-script (2.4.1)\r\ncoffee-script-source (1.12.2)\r\nconcurrent-ruby (1.0.5, 1.0.4)\r\ndaemons (1.2.4)\r\ndebug_inspector (0.0.2)\r\ndecisiontree (0.5.0)\r\ndevise (4.3.0, 4.2.0)\r\ndid_you_mean (1.1.2, 1.1.0)\r\ndish (0.0.6)\r\ndotenv (2.2.1)\r\ndotenv-rails (2.2.1)\r\nerubi (1.6.0)\r\nerubis (2.7.0)\r\neventmachine (1.2.3)\r\nexecjs (2.7.0)\r\nexecutable-hooks (1.3.2)\r\nffi (1.9.18, 1.9.17, 1.9.14)\r\nfont-awesome-rails (4.7.0.2)\r\nfriendly_id (5.1.0)\r\ngem-wrappers (1.2.7)\r\nglobalid (0.4.0, 0.3.7)\r\nhansi (0.2.0)\r\nhttparty (0.15.5)\r\nhumanize (1.4.0)\r\ni18n (0.8.4, 0.8.1, 0.7.0)\r\nio-console (default: 0.4.6)\r\njbuilder (2.7.0, 2.6.4, 2.6.1)\r\njmespath (1.3.1)\r\njquery-rails (4.2.2, 4.2.1)\r\njquery-ui-rails (6.0.1)\r\njson (2.1.0, default: 2.0.2)\r\nkaminari (1.0.1)\r\nkaminari-actionview (1.0.1)\r\nkaminari-activerecord (1.0.1)\r\nkaminari-core (1.0.1)\r\nlisten (3.1.5, 3.0.8)\r\nloofah (2.0.3)\r\nmail (2.6.6, 2.6.5, 2.6.4)\r\nmathn (0.1.0)\r\nmethod_source (0.8.2)\r\nmime-types (3.1)\r\nmime-types-data (3.2016.0521)\r\nmini_magick (4.7.2)\r\nmini_portile2 (2.2.0, 2.1.0)\r\nminitest (5.10.2, 5.10.1)\r\nmulti_json (1.12.1)\r\nmulti_xml (0.6.0)\r\nmustermann (1.0.0)\r\nmustermann-contrib (1.0.0)\r\nnet-telnet (0.1.1)\r\nnio4r (2.1.0, 1.2.1)\r\nnokogiri (1.8.0, 1.7.2, 1.7.0.1, 1.7.0)\r\nopenssl (default: 2.0.3)\r\norm_adapter (0.5.0)\r\npetergate (1.7.5)\r\npg (0.20.0, 0.19.0)\r\npopper_js (1.9.9)\r\npower_assert (1.0.2, 0.4.1)\r\nprime (0.0.1)\r\npry (0.10.4)\r\npry-byebug (3.4.2)\r\npsych (2.2.4, default: 2.2.2)\r\npublic_suffix (2.0.5)\r\npuma (3.9.1, 3.9.0, 3.8.2, 3.6.2)\r\nrack (2.0.3, 2.0.1)\r\nrack-protection (2.0.0)\r\nrack-test (0.6.3)\r\nrails (5.1.1, 5.0.1)\r\nrails-dom-testing (2.0.3, 2.0.2)\r\nrails-html-sanitizer (1.0.3)\r\nrailties (5.1.1, 5.0.1)\r\nrake (12.0.0, 10.5.0)\r\nrb-fsevent (0.9.8)\r\nrb-inotify (0.9.10, 0.9.8, 0.9.7)\r\nrdoc (5.1.0, default: 5.0.0)\r\nresponders (2.4.0, 2.3.0)\r\nruby_dep (1.5.0)\r\nrubygems-bundler (1.4.4)\r\nrubygems-update (2.6.12)\r\nrubyzip (1.2.1)\r\nrvm (1.11.3.9)\r\nsass (3.4.24, 3.4.23)\r\nsass-rails (5.0.6)\r\nselenium-webdriver (3.4.3, 3.4.1, 3.4.0)\r\nsinatra (2.0.0)\r\nsinatra-contrib (2.0.0)\r\nslop (3.6.0)\r\nspring (2.0.2, 2.0.1, 2.0.0)\r\nspring-watcher-listen (2.0.1)\r\nsprockets (3.7.1)\r\nsprockets-rails (3.2.0)\r\nsqlite3 (1.3.13)\r\nstuartambient_view_tool (0.1.0)\r\ntest-unit (3.2.4, 3.2.3)\r\nthin (1.7.1)\r\nthor (0.19.4)\r\nthread_safe (0.3.6, 0.3.5)\r\ntilt (2.0.7, 2.0.5)\r\nturbolinks (5.0.1)\r\nturbolinks-source (5.0.3, 5.0.0)\r\ntzinfo (1.2.3, 1.2.2)\r\nuglifier (3.2.0, 3.0.4)\r\nwarden (1.2.7, 1.2.6)\r\nweb-console (3.5.1, 3.4.0)\r\nwebsocket (1.2.4)\r\nwebsocket-driver (0.6.5, 0.6.4)\r\nwebsocket-extensions (0.1.2)\r\nxmlrpc (0.3.0, 0.2.1)\r\nxpath (2.1.0)\r\n```\r\nvagrant@vagrant:/vagrant/TestRails/hello-sinatra$","score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1316","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1316/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1316/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1316/events","html_url":"https://github.com/sinatra/sinatra/issues/1316","id":238358576,"number":1316,"title":"NoMethodError: undefined method `join' for #<String:0x00000002c88ca8>","user":{"login":"ijunaid8989","id":13561999,"avatar_url":"https://avatars0.githubusercontent.com/u/13561999?v=4","gravatar_id":"","url":"https://api.github.com/users/ijunaid8989","html_url":"https://github.com/ijunaid8989","followers_url":"https://api.github.com/users/ijunaid8989/followers","following_url":"https://api.github.com/users/ijunaid8989/following{/other_user}","gists_url":"https://api.github.com/users/ijunaid8989/gists{/gist_id}","starred_url":"https://api.github.com/users/ijunaid8989/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijunaid8989/subscriptions","organizations_url":"https://api.github.com/users/ijunaid8989/orgs","repos_url":"https://api.github.com/users/ijunaid8989/repos","events_url":"https://api.github.com/users/ijunaid8989/events{/privacy}","received_events_url":"https://api.github.com/users/ijunaid8989/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-06-25T04:07:38Z","updated_at":"2017-06-25T08:38:52Z","closed_at":"2017-06-25T08:38:52Z","author_association":"NONE","body":"Gemfile\r\n\r\n```\r\nsource \"https://rubygems.org\"\r\n\r\ngem \"sinatra\"\r\ngem \"mongoid\"\r\ngem \"rake\"\r\ngem \"haml\"\r\ngem \"time_ago_in_words\"\r\ngem \"shotgun\"\r\ngem \"pry\"\r\ngem \"sinatra-flash\"\r\ngem \"sinatra-partial\"\r\n\r\ngroup :test do\r\n  gem \"minitest\", require: \"minitest/autorun\"\r\n  gem \"rack-test\", require: \"rack/test\"\r\nend\r\n```\r\n\r\nand my test file\r\n\r\n```\r\nrequire \"test_helper\"\r\nrequire \"app\"\r\n\r\nclass AppTest < MiniTest::Test\r\n  include Rack::Test::Methods\r\n\r\n  def app\r\n    App\r\n  end\r\n\r\n  def test_retrieves_issues\r\n    get \"/issues\"\r\n    assert_equal last_response.body, \"Issue\"\r\n  end\r\nend\r\n```\r\n\r\nand app file \r\n```\r\nclass App < Sinatra::Base\r\n  get \"/\" do\r\n    \"hello\"\r\n  end\r\n\r\n  get \"/issues\" do\r\n    @issues = Issue.all\r\n    @issues\r\n  end\r\nend\r\n```\r\n\r\n\r\nThis as simple as it is but I am getting error.\r\n\r\nI have tried to update Sinatra to the master branch directly, But I found the errors for \r\n```\r\ngem \"sinatra-flash\"\r\ngem \"sinatra-partial\"\r\n```","score":1.0}]}
0

