HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sun, 13 May 2018 13:15:48 GMT
Link: <https://api.github.com/search/issues?q=repo%3Alaravel%2Fframework+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Alaravel%2Fframework+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D253:4F41:35AC587:753CCC8:5AF83A83
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 6
X-Ratelimit-Reset: 1526217397
X-Runtime-Rack: 0.511145
X-Xss-Protection: 1; mode=block

8000
{"total_count":10392,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/laravel/framework/issues/24195","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24195/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24195/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24195/events","html_url":"https://github.com/laravel/framework/issues/24195","id":322573008,"number":24195,"title":"No application encryption key has been specified. Error on key generation","user":{"login":"darron1217","id":8064923,"avatar_url":"https://avatars2.githubusercontent.com/u/8064923?v=4","gravatar_id":"","url":"https://api.github.com/users/darron1217","html_url":"https://github.com/darron1217","followers_url":"https://api.github.com/users/darron1217/followers","following_url":"https://api.github.com/users/darron1217/following{/other_user}","gists_url":"https://api.github.com/users/darron1217/gists{/gist_id}","starred_url":"https://api.github.com/users/darron1217/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darron1217/subscriptions","organizations_url":"https://api.github.com/users/darron1217/orgs","repos_url":"https://api.github.com/users/darron1217/repos","events_url":"https://api.github.com/users/darron1217/events{/privacy}","received_events_url":"https://api.github.com/users/darron1217/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-13T07:56:32Z","updated_at":"2018-05-13T11:13:48Z","closed_at":"2018-05-13T11:13:48Z","author_association":"NONE","body":"- Laravel Version: 5.5.*\r\n- PHP Version: 7.1.17\r\n- Database Driver & Version: mysql 5.6\r\n\r\n### Description:\r\nI installed fresh laravel and ran command below\r\n```\r\nphp artisan key:generate\r\n```\r\nThen got error...\r\n```\r\nIn EncryptionServiceProvider.php line 42:\r\n\r\n  No application encryption key has been specified.\r\n```\r\n![image](https://user-images.githubusercontent.com/8064923/39965118-4386cd04-56ce-11e8-8103-dae51c8e486c.png)\r\n\r\n\r\n### Steps To Reproduce:\r\nI'm currently using AsgardCMS https://github.com/AsgardCms/Platform\r\nI was attempting to install it by `php artisan asgard:install` command.\r\n(Laravel fresh install)\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24182","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24182/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24182/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24182/events","html_url":"https://github.com/laravel/framework/issues/24182","id":322343510,"number":24182,"title":"Validation - Conditional Sometimes Rule","user":{"login":"Braunson","id":577273,"avatar_url":"https://avatars2.githubusercontent.com/u/577273?v=4","gravatar_id":"","url":"https://api.github.com/users/Braunson","html_url":"https://github.com/Braunson","followers_url":"https://api.github.com/users/Braunson/followers","following_url":"https://api.github.com/users/Braunson/following{/other_user}","gists_url":"https://api.github.com/users/Braunson/gists{/gist_id}","starred_url":"https://api.github.com/users/Braunson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Braunson/subscriptions","organizations_url":"https://api.github.com/users/Braunson/orgs","repos_url":"https://api.github.com/users/Braunson/repos","events_url":"https://api.github.com/users/Braunson/events{/privacy}","received_events_url":"https://api.github.com/users/Braunson/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-05-11T15:41:58Z","updated_at":"2018-05-13T00:02:48Z","closed_at":"2018-05-11T19:33:48Z","author_association":"NONE","body":"- Laravel Version: 5.5.40\r\n- PHP Version: 7.1.10\r\n- Database Driver & Version: MySQL v14.14\r\n\r\n### Description:\r\nValidation returns both false for `passes()` and `fails()` when there is a failedRule and message in the error bag.\r\n\r\n### Steps To Reproduce:\r\n\r\nPut this custom sometimes conditional rule in your `AppServiceProvider.php` `boot()` method.\r\n\r\n```php\r\nValidator::extend('conditionalSometimes', function ($attribute, $value, $parameters, $validator) {\r\n\t$type = $parameters[0];\r\n\t$referenceColumn = $parameters[1];\r\n\t$referenceValue  = $parameters[2];\r\n\r\n\treturn $validator->sometimes($attribute, $type, function($requestData) use ($referenceColumn, $referenceValue) {\r\n\t\treturn $requestData->{$referenceColumn} == $referenceValue;\r\n\t});\r\n}, 'The :attribute is not valid');\r\n```\r\n\r\nPut this in a route or a controller method for quick testing.\r\n\r\n```php\r\n$rules = [\r\n   'spoke_to' => 'required|boolean',\r\n   'lead_score' => 'required_if:spoke_to,1|nullable|conditionalSometimes:integer,spoke_to,1'\r\n];\r\n\r\n$data = [\r\n   'spoke_to' => 1,\r\n   // 'lead_score' => 1, // With this enabled it should pass\r\n   'lead_score' => 'THIS IS WRONG', // With this enabled it should fail\r\n];\r\n\r\n$request->merge($data);\r\n\r\n$validator = Validator::make($request->all(), $rules);\r\n\r\ndump('Fails: ' . ($validator->fails() ? 'Yes' : 'No'));\r\ndump('Passes: ' . ($validator->passes() ? 'Yes' : 'No'));\r\ndd($validator);\r\n```\r\n\r\nThe anticipated behavior of the rules should be this:\r\n- if `spoke_to` is set to `1` then `lead_score` is `required`, and must be an `integer`\r\n- if `spoke_to` is set to `0` then `lead_score` is not `required`\r\n\r\nResults when run:\r\n![Validation results](https://goo.gl/zjRYtW)","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24180","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24180/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24180/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24180/events","html_url":"https://github.com/laravel/framework/issues/24180","id":322184243,"number":24180,"title":"Failed to run tests/Filesystem component.","user":{"login":"xuanquynh","id":16967350,"avatar_url":"https://avatars3.githubusercontent.com/u/16967350?v=4","gravatar_id":"","url":"https://api.github.com/users/xuanquynh","html_url":"https://github.com/xuanquynh","followers_url":"https://api.github.com/users/xuanquynh/followers","following_url":"https://api.github.com/users/xuanquynh/following{/other_user}","gists_url":"https://api.github.com/users/xuanquynh/gists{/gist_id}","starred_url":"https://api.github.com/users/xuanquynh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuanquynh/subscriptions","organizations_url":"https://api.github.com/users/xuanquynh/orgs","repos_url":"https://api.github.com/users/xuanquynh/repos","events_url":"https://api.github.com/users/xuanquynh/events{/privacy}","received_events_url":"https://api.github.com/users/xuanquynh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-11T06:37:18Z","updated_at":"2018-05-11T15:27:56Z","closed_at":"2018-05-11T15:27:56Z","author_association":"CONTRIBUTOR","body":"- Laravel Version: 5.7-dev\r\n- PHP Version: 5.2.5\r\n\r\n### Description:\r\nI try to use php-fpm with docker-compose to run tests/Filesystem but I get some error messages.\r\n- The docker-compose.yml file:\r\n```\r\nversion: \"3\"\r\n\r\nservices:\r\n  php-fpm:\r\n    build:\r\n      context: ./\r\n      dockerfile: php-fpm.dockerfile\r\n    volumes:\r\n      - ./:/var/www/html\r\n    ports:\r\n      - 9000:9000\r\n```\r\n\r\n- The php-fpm.dockerfile file:\r\n```\r\nFROM php:7.2-fpm\r\n\r\nRUN apt-get update && apt-get install -y libmcrypt-dev \\\r\n    mysql-client libmagickwand-dev --no-install-recommends \\\r\n    && docker-php-ext-install pcntl\r\n```\r\n### Steps To Reproduce:\r\n- After running **docker-compose up --build**, I ran the following command:\r\n```\r\n$ docker-compose exec --user $(id -u):$(id -g) php-fpm vendor/bin/phpunit tests/Filesystem/\r\n```\r\n- Finally, I got the results below:\r\n```\r\nPHPUnit 6.5.5 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 7.2.5\r\nConfiguration: /var/www/html/phpunit.xml\r\n\r\nFF............................................................    62 / 62 (100%)\r\n\r\nTime: 294 ms, Memory: 11.72MB\r\n\r\nThere were 2 failures:\r\n\r\n1) Illuminate\\Tests\\Filesystem\\FilesystemAdapterTest::testResponse\r\nFailed asserting that two strings are equal.\r\n--- Expected\r\n+++ Actual\r\n@@ @@\r\n-'inline; filename=file.txt'\r\n+'inline; filename=\"file.txt\"'\r\n\r\n/var/www/html/tests/Filesystem/FilesystemAdapterTest.php:42\r\n\r\n2) Illuminate\\Tests\\Filesystem\\FilesystemAdapterTest::testDownload\r\nFailed asserting that two strings are equal.\r\n--- Expected\r\n+++ Actual\r\n@@ @@\r\n-'attachment; filename=hello.txt'\r\n+'attachment; filename=\"hello.txt\"'\r\n\r\n/var/www/html/tests/Filesystem/FilesystemAdapterTest.php:51\r\n\r\nFAILURES!\r\nTests: 62, Assertions: 114, Failures: 2.\r\n```\r\n\r\nThey are not errors such as missing requirements. They are failures. Did I forgot anything?\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24179","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24179/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24179/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24179/events","html_url":"https://github.com/laravel/framework/issues/24179","id":322148005,"number":24179,"title":"artisan migrate:rollback error when have same class in another day","user":{"login":"LindolfoJunior","id":38046370,"avatar_url":"https://avatars3.githubusercontent.com/u/38046370?v=4","gravatar_id":"","url":"https://api.github.com/users/LindolfoJunior","html_url":"https://github.com/LindolfoJunior","followers_url":"https://api.github.com/users/LindolfoJunior/followers","following_url":"https://api.github.com/users/LindolfoJunior/following{/other_user}","gists_url":"https://api.github.com/users/LindolfoJunior/gists{/gist_id}","starred_url":"https://api.github.com/users/LindolfoJunior/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LindolfoJunior/subscriptions","organizations_url":"https://api.github.com/users/LindolfoJunior/orgs","repos_url":"https://api.github.com/users/LindolfoJunior/repos","events_url":"https://api.github.com/users/LindolfoJunior/events{/privacy}","received_events_url":"https://api.github.com/users/LindolfoJunior/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-11T02:38:57Z","updated_at":"2018-05-12T02:48:14Z","closed_at":"2018-05-11T14:50:47Z","author_association":"NONE","body":"- Laravel Version: 5.5.40\r\n- PHP Version: 7.2\r\n- Database Driver & Version: MySQL\r\n\r\n### Description:\r\nDuring the process of using rollback of migrations it informs that the class is being used in cases where I am changing a certain table.\r\n\r\n### Steps To Reproduce:\r\n1 - Create a model with migrate => php artisan make:model costumers -m\r\n2 - Create a alter migration => php artisan make:migration alter_costumers --table=costumers\r\n3 - Alter this table inserting a new collum for exemple name in up() and drop this Column on down()\r\n4 - Execute migrate => php artisan migrate\r\n5 - Create a new alter migration => php artisan make:migration alter_costumers --table=costumers\r\n6 - Insert a new collum for exemple \"email\" in up() and drop this Column on down()74 - Execute migrate => php artisan migrate\r\n7 - Execute migrate => php artisan migrate\r\n8 - Execute Rollback => php artisan migrate:rollback\r\n\r\n### The erro is:\r\nPHP Fatal error:  Cannot declare class AlterGpsMarkers, because the name is already in use in C:\\wamp\\www\\site\\database\\migrations\\yyyy_mm_dd_hhiiss_alter_costumers.php on line 36\r\n\r\nIn yyyy_mm_dd_hhiiss_alter_costumers.php line 36:\r\n\r\nCannot declare class AlterCostumers, because the name is already in use\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24177","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24177/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24177/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24177/events","html_url":"https://github.com/laravel/framework/issues/24177","id":321973729,"number":24177,"title":"All the sessions are getting logged out/wiped out frequently and automatically even when sessions are not idle","user":{"login":"avinashs24","id":13647377,"avatar_url":"https://avatars1.githubusercontent.com/u/13647377?v=4","gravatar_id":"","url":"https://api.github.com/users/avinashs24","html_url":"https://github.com/avinashs24","followers_url":"https://api.github.com/users/avinashs24/followers","following_url":"https://api.github.com/users/avinashs24/following{/other_user}","gists_url":"https://api.github.com/users/avinashs24/gists{/gist_id}","starred_url":"https://api.github.com/users/avinashs24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avinashs24/subscriptions","organizations_url":"https://api.github.com/users/avinashs24/orgs","repos_url":"https://api.github.com/users/avinashs24/repos","events_url":"https://api.github.com/users/avinashs24/events{/privacy}","received_events_url":"https://api.github.com/users/avinashs24/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-10T15:27:13Z","updated_at":"2018-05-10T19:08:30Z","closed_at":"2018-05-10T15:39:03Z","author_association":"NONE","body":"<!--\r\nPlease use this issue tracker only for reporting Laravel bugs.\r\n\r\nIf you need support, please use the forums:\r\n\r\n- https://laracasts.com/discuss \r\n- https://laravel.io/forum\r\n\r\nAlternatively, you may use Slack (https://larachat.co/) or Stack Overflow (http://stackoverflow.com/questions/tagged/laravel).\r\n\r\nIf you would like to propose new Laravel features, please make a pull request, or open an issue at https://github.com/laravel/ideas/issues.\r\n-->\r\n\r\n- Laravel Version: 5.5.13\r\n- PHP Version: 7.1.9\r\n- Database Driver & Version: MySQL 5.7.19\r\n\r\n### Description:\r\n\r\nAll the users are getting logged out automatically after a few period of time while using our application. Session is not idle however. We have included a constant pinging with the server for every 10 seconds from the client. Our single app is being load balanced by 3 server instances. Currently we are using redis as session driver. Our redis server's CPU usage is very low. It doesn't seem to have a problem we guess. The same issue happened while using file as the session driver. We suspect there might be something happening in the laravel framework.\r\n\r\n\r\n### Steps To Reproduce:\r\nWe could not reproduce it at required times. It happens very randomly.\r\n\r\n1. Login multiple users to the application\r\n\r\n2. Keep using the app without being idle.\r\n\r\n3. Suddenly all the users get logged out.","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24176","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24176/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24176/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24176/events","html_url":"https://github.com/laravel/framework/issues/24176","id":321964747,"number":24176,"title":"[5.6] Cannot switch back to application frames in whoops screen","user":{"login":"hubertnnn","id":1189576,"avatar_url":"https://avatars1.githubusercontent.com/u/1189576?v=4","gravatar_id":"","url":"https://api.github.com/users/hubertnnn","html_url":"https://github.com/hubertnnn","followers_url":"https://api.github.com/users/hubertnnn/followers","following_url":"https://api.github.com/users/hubertnnn/following{/other_user}","gists_url":"https://api.github.com/users/hubertnnn/gists{/gist_id}","starred_url":"https://api.github.com/users/hubertnnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hubertnnn/subscriptions","organizations_url":"https://api.github.com/users/hubertnnn/orgs","repos_url":"https://api.github.com/users/hubertnnn/repos","events_url":"https://api.github.com/users/hubertnnn/events{/privacy}","received_events_url":"https://api.github.com/users/hubertnnn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-10T15:02:22Z","updated_at":"2018-05-10T15:31:58Z","closed_at":"2018-05-10T15:31:58Z","author_association":"NONE","body":"- Laravel Version: v5.6.20\r\n- PHP Version: 7.1.16-1+ubuntu16.04.1+deb.sury.org+1\r\n- Whoops version: 2.1.14\r\n\r\n### Description:\r\nAfter switching stacktrace to \"All frames\" its impossible to switch back\r\n\r\n### Steps To Reproduce:\r\n1. Enable debug mode\r\n2. Throw an exception\r\n3. In whoops window click on \"All frames\" to show full stacktrace\r\n4. Click on \"Application frames\" [nothing happens]","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24175","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24175/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24175/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24175/events","html_url":"https://github.com/laravel/framework/issues/24175","id":321957413,"number":24175,"title":"updateOrCreate() fails to respect manaully set primary key","user":{"login":"gregrobson","id":1911321,"avatar_url":"https://avatars2.githubusercontent.com/u/1911321?v=4","gravatar_id":"","url":"https://api.github.com/users/gregrobson","html_url":"https://github.com/gregrobson","followers_url":"https://api.github.com/users/gregrobson/followers","following_url":"https://api.github.com/users/gregrobson/following{/other_user}","gists_url":"https://api.github.com/users/gregrobson/gists{/gist_id}","starred_url":"https://api.github.com/users/gregrobson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gregrobson/subscriptions","organizations_url":"https://api.github.com/users/gregrobson/orgs","repos_url":"https://api.github.com/users/gregrobson/repos","events_url":"https://api.github.com/users/gregrobson/events{/privacy}","received_events_url":"https://api.github.com/users/gregrobson/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-10T14:43:07Z","updated_at":"2018-05-11T11:52:55Z","closed_at":"2018-05-11T11:52:55Z","author_association":"NONE","body":"<!--\r\nPlease use this issue tracker only for reporting Laravel bugs.\r\n\r\nIf you need support, please use the forums:\r\n\r\n- https://laracasts.com/discuss \r\n- https://laravel.io/forum\r\n\r\nAlternatively, you may use Slack (https://larachat.co/) or Stack Overflow (http://stackoverflow.com/questions/tagged/laravel).\r\n\r\nIf you would like to propose new Laravel features, please make a pull request, or open an issue at https://github.com/laravel/ideas/issues.\r\n-->\r\n\r\n- Laravel Version: 5.6.12 – 5.6.21 (possibly existed earlier than this)\r\n- PHP Version: 7.1 (although I imagine any 5.6 compatible versions will be affected)\r\n- Database Driver & Version: PostgreSQL 10\r\n\r\n### Description:\r\nIf you use `updateOrCreate()` on a model that uses a different primary key than is the model default the insert statement tries to return the primary key by using Laravel's assumed primary key name.\r\n\r\n### Steps To Reproduce:\r\n\r\nWith a simple model\r\n\r\n```php\r\nclass SatisfactionRating extends Model\r\n{\r\n    protected $table = 'freshdesk_satisfaction_rating'; // Custom table name\r\n    protected $primaryKey = 'rating_id'; // Custom primary key\r\n\r\n    protected $casts = ['rating' => 'array'];\r\n}\r\n```\r\n\r\nAttempt an `updateOrCreate()`...\r\n\r\n```php\r\nSatisfactionRating::updateOrCreate(\r\n    ['satisfaction_rating_id' => 42],\r\n    ['rating' => []]\r\n);\r\n```\r\n\r\n**Resulting error (abbreviated)**\r\n(SQL: insert into \"freshdesk_satisfaction_rating\" (\"rating_id\", \"rating\") values (...) **returning \"satisfaction_rating_id\"**) {\"exception\":\"[object] (Illuminate\\\\Database\\\\QueryException(code: 42703): SQLSTATE[42703]: Undefined column: 7 ERROR:  column \"satisfaction_rating_id\" does not exist\r\n15639 LINE 1: ..., ) values ($1, $2) returning \"satisfact...\r\n\r\nNote section in bold. The query is assuming the returning column is `satisfaction_rating_id` not `rating_id` as specified in the model.","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24169","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24169/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24169/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24169/events","html_url":"https://github.com/laravel/framework/issues/24169","id":321817246,"number":24169,"title":"Getting relation subquery","user":{"login":"Asxer","id":6561224,"avatar_url":"https://avatars2.githubusercontent.com/u/6561224?v=4","gravatar_id":"","url":"https://api.github.com/users/Asxer","html_url":"https://github.com/Asxer","followers_url":"https://api.github.com/users/Asxer/followers","following_url":"https://api.github.com/users/Asxer/following{/other_user}","gists_url":"https://api.github.com/users/Asxer/gists{/gist_id}","starred_url":"https://api.github.com/users/Asxer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Asxer/subscriptions","organizations_url":"https://api.github.com/users/Asxer/orgs","repos_url":"https://api.github.com/users/Asxer/repos","events_url":"https://api.github.com/users/Asxer/events{/privacy}","received_events_url":"https://api.github.com/users/Asxer/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-10T05:48:48Z","updated_at":"2018-05-10T14:42:21Z","closed_at":"2018-05-10T14:42:21Z","author_association":"NONE","body":"Hello! There is some problem with ordering eloquent query results by field from related table. Every solutions which I can find suggest me to make joins to it. I don't think it is good way. In my company we have many projects on laravel and for any case of ordering be related field we need to write it again and result doesn't looks cute. \r\nI'm trying to make some universal solution but I see strange behavior:\r\n\r\nHere is model:\r\n```php\r\n<?php\r\n\r\nnamespace App\\Models;\r\n\r\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\r\n\r\nclass Category extends Model\r\n{\r\n    use SoftDeletes;\r\n\r\n    ....\r\n\r\n    public function translation() {\r\n        $lang = session('lang', 'en');\r\n\r\n        return $this->hasOne(CategoryTranslation::class)->where('locale', $lang);\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd when I'm trying to make scope for ordering: \r\n```php\r\n    public function scopeOrderByRelated($query, $orderField, $desc = 'DESC')\r\n    {\r\n        $entities = explode('.', $orderField);\r\n\r\n        $fieldName = array_pop($entities);\r\n        // do not pay attention to it, in the future I'm going to do here a recursive nesting in order to have support for complex relationships, but now I'm just taking the nearest relation\r\n        $relationName = array_shift($entities);\r\n\r\n        $relation = $this->__callStatic($relationName, []);\r\n\r\n        $subQuery = $relation->getQuery()->toSql();\r\n        $subQuery = str_replace('*', $fieldName, $subQuery);\r\n\r\n        $query->selectSub($subQuery, 'orderedField')\r\n            ->addSelect(\"{$this->getTable()}.*\")\r\n            ->orderBy('orderedField', $desc);\r\n    }\r\n```\r\nThe problem is that this `$relation->getQuery()->toSql()` returns following sql\r\n```sql\r\nselect title from \"category_translations\" where \"category_translations\".\"category_id\" is null and \"category_translations\".\"category_id\" is not null and \"locale\" = ?\r\n```\r\n\r\nThis part of sql looks strange. \r\n**\"category_translations\".\"category_id\" is null and \"category_translations\".\"category_id\" is not null**\r\n\r\nExpected behavior: \r\n        $subQuery = $relation->getQuery()->toSql();\r\nshould return\r\n```sql\r\nselect title from \"category_translations\" where category_translations.category_id = categories.id and \"locale\" = ?\r\n```\r\nif I get this result, then without any problems I can implement the sorting on the connected table. Or may be Сan you suggest the best way to get a subquery of relation?\r\n\r\nLaravel version: 5.6\r\nPhp version: 7.1\r\nSql: PostgreSql 9.6.4","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24165","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24165/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24165/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24165/events","html_url":"https://github.com/laravel/framework/issues/24165","id":321744360,"number":24165,"title":"Running no schedule:run artisan command yet actually run commands defined in schedule","user":{"login":"gmartinez","id":122444,"avatar_url":"https://avatars3.githubusercontent.com/u/122444?v=4","gravatar_id":"","url":"https://api.github.com/users/gmartinez","html_url":"https://github.com/gmartinez","followers_url":"https://api.github.com/users/gmartinez/followers","following_url":"https://api.github.com/users/gmartinez/following{/other_user}","gists_url":"https://api.github.com/users/gmartinez/gists{/gist_id}","starred_url":"https://api.github.com/users/gmartinez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmartinez/subscriptions","organizations_url":"https://api.github.com/users/gmartinez/orgs","repos_url":"https://api.github.com/users/gmartinez/repos","events_url":"https://api.github.com/users/gmartinez/events{/privacy}","received_events_url":"https://api.github.com/users/gmartinez/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2018-05-09T22:12:52Z","updated_at":"2018-05-10T02:11:02Z","closed_at":"2018-05-10T02:11:02Z","author_association":"NONE","body":"<!--\r\nPlease use this issue tracker only for reporting Laravel bugs.\r\n\r\nIf you need support, please use the forums:\r\n\r\n- https://laracasts.com/discuss \r\n- https://laravel.io/forum\r\n\r\nAlternatively, you may use Slack (https://larachat.co/) or Stack Overflow (http://stackoverflow.com/questions/tagged/laravel).\r\n\r\nIf you would like to propose new Laravel features, please make a pull request, or open an issue at https://github.com/laravel/ideas/issues.\r\n-->\r\n\r\n- Laravel Version: 5.6.21\r\n- PHP Version: 7.1.14\r\n- Database Driver & Version: MySql 5.x\r\n\r\n### Description:\r\nRunning any combination of artisan executes logic within \"protected function schedule(Schedule $schedule)\" at app\\Console\\Kernel.php\r\n\r\nFound this after adding a command entry there and then run an artisan migrate.\r\n\r\nEven running \"php artisan --version\" executes that logic before running the intended artisan command.\r\n\r\n### Steps To Reproduce:\r\n\r\n1. Add line \"print 'WTF!';\" inside \"protected function schedule(Schedule $schedule)\" at app\\Console\\Kernel.php\r\n2. From command line run : php artisan --version","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24162","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24162/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24162/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24162/events","html_url":"https://github.com/laravel/framework/issues/24162","id":321676662,"number":24162,"title":"Argon and Bcrypt hasher classes do not verify hashing algorithm","user":{"login":"ioluas","id":681498,"avatar_url":"https://avatars0.githubusercontent.com/u/681498?v=4","gravatar_id":"","url":"https://api.github.com/users/ioluas","html_url":"https://github.com/ioluas","followers_url":"https://api.github.com/users/ioluas/followers","following_url":"https://api.github.com/users/ioluas/following{/other_user}","gists_url":"https://api.github.com/users/ioluas/gists{/gist_id}","starred_url":"https://api.github.com/users/ioluas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ioluas/subscriptions","organizations_url":"https://api.github.com/users/ioluas/orgs","repos_url":"https://api.github.com/users/ioluas/repos","events_url":"https://api.github.com/users/ioluas/events{/privacy}","received_events_url":"https://api.github.com/users/ioluas/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-09T18:26:12Z","updated_at":"2018-05-11T14:49:15Z","closed_at":"2018-05-11T14:49:15Z","author_association":"NONE","body":"- Laravel Version: 5.6.20\r\n- PHP Version: 7.2.4\r\n- Database Driver & Version: MySQL 5.7.22\r\n\r\n### Description:\r\n`check` method in both `ArgonHasher` & `BcryptHasher` do not verify hashing algorithm. The method only verifies that `$hashedValue` is not an empty string and then proceed to call native php function `password_verify`. Now, since the algorithm and salt are contained in `$hashedValue`, the return value from `password_verify` will not fail if the algorithm used is different than the one intended in the class. \r\nI had used `bcrypt` function in User model factory in a Laravel project, since the application is still under development; when I upgraded to 5.6, I switched hash driver to argon but forgot to update the factory and later realised I was still able to login with users credentials created with 'broken' factory.\r\n\r\n### Steps To Reproduce:\r\nTest method to clarify what I mean:\r\n```php\r\npublic function testBasicVerification()\r\n{\r\n    $argonHasher = new \\Illuminate\\Hashing\\ArgonHasher;\r\n    $bcryptHasher = new \\Illuminate\\Hashing\\BcryptHasher;\r\n    $argonHashed = $argonHasher->make('password');\r\n    $bcryptHashed = $bcryptHasher->make('password');\r\n    $this->assertFalse($bcryptHasher->check('password', $argonHashed));\r\n    $this->assertFalse($argonHasher->check('password', $bcryptHashed));\r\n}\r\n```\r\nI'm not sure if you would agree this is a bug and I'm not sure I can think of a 'normal' scenario where this could happen. If I didn't forget to update the factory, I would have never looked at this twice, but on a second thought I think since the method exists in both classes, it makes sense for ArgonHasher to return false when asked to verify a Bcrypt hashed value and vice versa. \r\n\r\nThis is a straight forward fix of adding an additional check on `password_get_info($hashedValue)['algo']` value in both methods.","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24161","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24161/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24161/comments","events_url":"htt
8000
ps://api.github.com/repos/laravel/framework/issues/24161/events","html_url":"https://github.com/laravel/framework/issues/24161","id":321675817,"number":24161,"title":"When a Mailable is added on the queue collection loses order. ","user":{"login":"truthuntold","id":1406584,"avatar_url":"https://avatars0.githubusercontent.com/u/1406584?v=4","gravatar_id":"","url":"https://api.github.com/users/truthuntold","html_url":"https://github.com/truthuntold","followers_url":"https://api.github.com/users/truthuntold/followers","following_url":"https://api.github.com/users/truthuntold/following{/other_user}","gists_url":"https://api.github.com/users/truthuntold/gists{/gist_id}","starred_url":"https://api.github.com/users/truthuntold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/truthuntold/subscriptions","organizations_url":"https://api.github.com/users/truthuntold/orgs","repos_url":"https://api.github.com/users/truthuntold/repos","events_url":"https://api.github.com/users/truthuntold/events{/privacy}","received_events_url":"https://api.github.com/users/truthuntold/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-09T18:23:36Z","updated_at":"2018-05-10T15:40:53Z","closed_at":"2018-05-10T15:40:53Z","author_association":"NONE","body":"<!--\r\nPlease use this issue tracker only for reporting Laravel bugs.\r\n\r\nIf you need support, please use the forums:\r\n\r\n- https://laracasts.com/discuss \r\n- https://laravel.io/forum\r\n\r\nAlternatively, you may use Slack (https://larachat.co/) or Stack Overflow (http://stackoverflow.com/questions/tagged/laravel).\r\n\r\nIf you would like to propose new Laravel features, please make a pull request, or open an issue at https://github.com/laravel/ideas/issues.\r\n-->\r\n\r\n- Laravel Version: 5.5.40\r\n- PHP Version: 7.0.29 \r\n- Database Driver & Version:\r\nMySql-InnoDB 5.6.34\r\n### Description:\r\nWhen a Mailable is added on the queue collection loses order. \r\n\r\nI added the email to the queue then returned the email view. The dates when returned via the view are in desc order. The email version seems random. \r\n\r\n```\r\n        $mail = new UpcomingMatches($user, $registered, $following, $previous, 'daily', $notifications);\r\n        Mail::to($user->email)->queue($mail);\r\n\r\n        return $mail;\r\n```\r\nEmail Version\r\n<img width=\"927\" alt=\"screenshot 2018-05-09 12 06 42\" src=\"https://user-images.githubusercontent.com/1406584/39832008-4f3ce758-5383-11e8-8398-554dd4adb119.png\">\r\n\r\nView Version\r\n<img width=\"881\" alt=\"screenshot 2018-05-09 12 06 35\" src=\"https://user-images.githubusercontent.com/1406584/39832031-607026a2-5383-11e8-9cc7-410ce19ad582.png\">\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24160","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24160/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24160/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24160/events","html_url":"https://github.com/laravel/framework/issues/24160","id":321607029,"number":24160,"title":"RefreshDatabase Trait and Expected Exceptions","user":{"login":"hettiger","id":4583871,"avatar_url":"https://avatars1.githubusercontent.com/u/4583871?v=4","gravatar_id":"","url":"https://api.github.com/users/hettiger","html_url":"https://github.com/hettiger","followers_url":"https://api.github.com/users/hettiger/followers","following_url":"https://api.github.com/users/hettiger/following{/other_user}","gists_url":"https://api.github.com/users/hettiger/gists{/gist_id}","starred_url":"https://api.github.com/users/hettiger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hettiger/subscriptions","organizations_url":"https://api.github.com/users/hettiger/orgs","repos_url":"https://api.github.com/users/hettiger/repos","events_url":"https://api.github.com/users/hettiger/events{/privacy}","received_events_url":"https://api.github.com/users/hettiger/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-09T15:00:57Z","updated_at":"2018-05-10T05:39:02Z","closed_at":"2018-05-10T02:59:53Z","author_association":"CONTRIBUTOR","body":"<!--\r\nPlease use this issue tracker only for reporting Laravel bugs.\r\n\r\nIf you need support, please use the forums:\r\n\r\n- https://laracasts.com/discuss \r\n- https://laravel.io/forum\r\n\r\nAlternatively, you may use Slack (https://larachat.co/) or Stack Overflow (http://stackoverflow.com/questions/tagged/laravel).\r\n\r\nIf you would like to propose new Laravel features, please make a pull request, or open an issue at https://github.com/laravel/ideas/issues.\r\n-->\r\n\r\n- Laravel Version: v5.6.20\r\n- PHP Version: 7.1.7\r\n- Database Driver & Version: MySQL 5.7.15\r\n\r\n### Description:\r\n\r\n`RefreshDatabase` Trait fails to refresh the database on a test that expects an exception to be thrown.\r\nConsequent tests fail due to this.\r\n\r\n### Steps To Reproduce:\r\n\r\nHere's the initial version of the method:\r\n\r\n```php\r\npublic function testThrowsIntegrityMismatchException()\r\n{\r\n    $this->expectException(IntegrityMismatchException::class);\r\n\r\n    $alterStatement = <<<SQL\r\nALTER TABLE `replication`\r\nMODIFY `title` VARCHAR(200);\r\nSQL;\r\n\r\n    DB::statement($alterStatement);\r\n    Artisan::call('example:check-integrity');\r\n}\r\n```\r\n\r\nThe `Artisan::call('example:check-integrity');` call will throw a `IntegrityMismatchException` because of the modified column.\r\n\r\nUnfortunately the `RefreshDatabase` Trait silently fails to refresh the database after this test and consequent tests fail.\r\n\r\nNow I've found a workaround:\r\n\r\n```php\r\npublic function testThrowsIntegrityMismatchException()\r\n{\r\n    $this->expectException(IntegrityMismatchException::class);\r\n\r\n    $alterStatement = <<<SQL\r\nALTER TABLE `replication`\r\nMODIFY `title` VARCHAR(200);\r\nSQL;\r\n\r\n    DB::statement($alterStatement);\r\n\r\n    try {\r\n        Artisan::call(example:check-integrity');\r\n    } catch (Exception $exception) {\r\n        Artisan::call('migrate:fresh');\r\n\r\n        /** @noinspection PhpUnhandledExceptionInspection */\r\n        throw $exception;\r\n    }\r\n}\r\n```\r\n\r\nAnyways I'm not too happy about it because now I'm no longer benefitting from the optimized Trait. Also I think this `try`& `catch` stuff should not be necessary.\r\n\r\nI also tried to use `$this->refreshDatabase()` instead of `Artisan::call('migrate:fresh');` but it did throw the following error:\r\n\r\n`Doctrine\\DBAL\\Driver\\PDOException : SQLSTATE[42000]: Syntax error or access violation: 1305 SAVEPOINT trans2 does not exist`\r\n\r\nI think that's the reason why the `RefreshDatabase` Trait is unable to refresh correctly behind the scenes. Also this should not fail silently?","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24159","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24159/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24159/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24159/events","html_url":"https://github.com/laravel/framework/issues/24159","id":321594850,"number":24159,"title":"Local dev routes interfere with production version","user":{"login":"superDuperCyberTechno","id":6486383,"avatar_url":"https://avatars1.githubusercontent.com/u/6486383?v=4","gravatar_id":"","url":"https://api.github.com/users/superDuperCyberTechno","html_url":"https://github.com/superDuperCyberTechno","followers_url":"https://api.github.com/users/superDuperCyberTechno/followers","following_url":"https://api.github.com/users/superDuperCyberTechno/following{/other_user}","gists_url":"https://api.github.com/users/superDuperCyberTechno/gists{/gist_id}","starred_url":"https://api.github.com/users/superDuperCyberTechno/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/superDuperCyberTechno/subscriptions","organizations_url":"https://api.github.com/users/superDuperCyberTechno/orgs","repos_url":"https://api.github.com/users/superDuperCyberTechno/repos","events_url":"https://api.github.com/users/superDuperCyberTechno/events{/privacy}","received_events_url":"https://api.github.com/users/superDuperCyberTechno/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-09T14:31:15Z","updated_at":"2018-05-09T17:04:58Z","closed_at":"2018-05-09T17:04:58Z","author_association":"NONE","body":"My local development version is set up to run on  the _dev._ subdomain on my production domain. \r\nThe subdomain is configured to be hosted on 127.0.0.1, so this subdomain does not exist publicly.\r\n\r\nBecause I need to serve multiple domains with different content, have set up my `web.php` routing so that I can change what routes is served on what domains:\r\n\r\n```\r\n$dev_domain_1_routes = function(){\r\n    //routes here\r\n}\r\n\r\n$dev_domain_2_routes = function(){\r\n    //routes here\r\n}\r\n\r\n$production_domain_1_routes = function(){\r\n    //routes here\r\n}\r\n\r\n$production_domain_2_routes = function(){\r\n    //routes here\r\n}\r\n\r\n\r\nRoute::group(['domain' => 'domain_1'], $production_domain_1_routes]);\r\nRoute::group(['domain' => 'domain_2'], $production_domain_2_routes]);\r\nRoute::group(['domain' => 'dev_domain_1'], $dev_domain_1_routes]);\r\nRoute::group(['domain' => 'dev_domain_2'], $dev_domain_2_routes]);\r\n```\r\nThis works pretty well until users start to log out of the production version. When they do so, they get redirected to the login page for the development version, which - as mentioned earlier - doesn't exist publicly, so that's pretty bad. \r\n\r\nThey can still log in using the original login page if they go there.","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24158","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24158/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24158/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24158/events","html_url":"https://github.com/laravel/framework/issues/24158","id":321586205,"number":24158,"title":"I am facing issue while upgrading Laravel 5.4 from 5.3","user":{"login":"piyush-azova","id":19776378,"avatar_url":"https://avatars1.githubusercontent.com/u/19776378?v=4","gravatar_id":"","url":"https://api.github.com/users/piyush-azova","html_url":"https://github.com/piyush-azova","followers_url":"https://api.github.com/users/piyush-azova/followers","following_url":"https://api.github.com/users/piyush-azova/following{/other_user}","gists_url":"https://api.github.com/users/piyush-azova/gists{/gist_id}","starred_url":"https://api.github.com/users/piyush-azova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyush-azova/subscriptions","organizations_url":"https://api.github.com/users/piyush-azova/orgs","repos_url":"https://api.github.com/users/piyush-azova/repos","events_url":"https://api.github.com/users/piyush-azova/events{/privacy}","received_events_url":"https://api.github.com/users/piyush-azova/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-09T14:09:24Z","updated_at":"2018-05-09T14:15:56Z","closed_at":"2018-05-09T14:15:56Z","author_association":"NONE","body":"Recently i have upgraded laravel 5.4 from 5.3 and i have gone through the upgrade guide. I face below issue, Please help me out.\r\n\r\n[2018-05-09 13:16:07] production.ERROR: ErrorException: Illegal offset type in unset in /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Container/Container.php:1035\r\n\r\nStack trace:\r\n\r\n#0/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Container/Container.php(1035): Illuminate\\Foundation\\Bootstrap\\HandleExceptions->handleError(2, 'Illegal offset ...', '/opt/lampp/htdo...', 1035, Array)\r\n\r\n#1/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Container/Container.php(205): Illuminate\\Container\\Container->dropStaleInstances(Object(Closure))\r\n\r\n#2/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Container/Container.php(311): Illuminate\\Container\\Container->bind(Object(Closure), NULL, true)\r\n\r\n#3 /opt/lampp/htdocs/MYPROJ/vendor/lucasromanojf/laravel5-pdf/src/Ignited/Pdf/PdfServiceProvider.php(38): Illuminate\\Container\\Container->singleton(Object(Closure))\r\n\r\n#4/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(574): Ignited\\Pdf\\PdfServiceProvider->register()\r\n\r\n#5/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/ProviderRepository.php(75): Illuminate\\Foundation\\Application->register(Object(Ignited\\Pdf\\PdfServiceProvider))\r\n\r\n#6/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(549): Illuminate\\Foundation\\ProviderRepository->load(Array)\r\n\r\n#7/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Bootstrap/RegisterProviders.php(17): Illuminate\\Foundation\\Application->registerConfiguredProviders()\r\n\r\n#8/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(208): Illuminate\\Foundation\\Bootstrap\\RegisterProviders->bootstrap(Object(Illuminate\\Foundation\\Application))\r\n\r\n#9/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(162): Illuminate\\Foundation\\Application->bootstrapWith(Array)\r\n\r\n#10/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(146): Illuminate\\Foundation\\Http\\Kernel->bootstrap()\r\n\r\n#11/opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))\r\n\r\n#12/opt/lampp/htdocs/MYPROJ/public/index.php(52): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))\r\n\r\n#13{main}","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24157","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24157/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24157/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24157/events","html_url":"https://github.com/laravel/framework/issues/24157","id":321583323,"number":24157,"title":"Blade array declaration","user":{"login":"avitruk","id":29397174,"avatar_url":"https://avatars3.githubusercontent.com/u/29397174?v=4","gravatar_id":"","url":"https://api.github.com/users/avitruk","html_url":"https://github.com/avitruk","followers_url":"https://api.github.com/users/avitruk/followers","following_url":"https://api.github.com/users/avitruk/following{/other_user}","gists_url":"https://api.github.com/users/avitruk/gists{/gist_id}","starred_url":"https://api.github.com/users/avitruk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avitruk/subscriptions","organizations_url":"https://api.github.com/users/avitruk/orgs","repos_url":"https://api.github.com/users/avitruk/repos","events_url":"https://api.github.com/users/avitruk/events{/privacy}","received_events_url":"https://api.github.com/users/avitruk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-09T14:01:58Z","updated_at":"2018-05-10T03:03:26Z","closed_at":"2018-05-10T03:03:26Z","author_association":"NONE","body":"- Laravel Version: 5.6\r\n- PHP Version: 7.1\r\n\r\n### Description:\r\nI'm using laravel envoy and I figured with some array declaration issue.\r\nI have multiple server in \"@servers\". If my servers written in several lines then envoy can't find any server and returns error. But it works fine when I'm using one-line declaration.\r\nI'm assuming that something wrong with blade compiler.\r\n\r\n### Steps To Reproduce:\r\n```php\r\n@servers(['web-1' => '192.168.1.1', 'web-2' => '192.168.1.2']) //works fine\r\n```\r\n\r\nand\r\n\r\n```php\r\n@servers([\r\n      'web-1' => '192.168.1.1',\r\n      'web-2' => '192.168.1.2'\r\n]) //return error\r\n```","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24155","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24155/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24155/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24155/events","html_url":"https://github.com/laravel/framework/issues/24155","id":321454572,"number":24155,"title":"multi-request towards the same route in one method failed in testing","user":{"login":"cloudsthere","id":16861325,"avatar_url":"https://avatars2.githubusercontent.com/u/16861325?v=4","gravatar_id":"","url":"https://api.github.com/users/cloudsthere","html_url":"https://github.com/cloudsthere","followers_url":"https://api.github.com/users/cloudsthere/followers","following_url":"https://api.github.com/users/cloudsthere/following{/other_user}","gists_url":"https://api.github.com/users/cloudsthere/gists{/gist_id}","starred_url":"https://api.github.com/users/cloudsthere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cloudsthere/subscriptions","organizations_url":"https://api.github.com/users/cloudsthere/orgs","repos_url":"https://api.github.com/users/cloudsthere/repos","events_url":"https://api.github.com/users/cloudsthere/events{/privacy}","received_events_url":"https://api.github.com/users/cloudsthere/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-09T07:06:33Z","updated_at":"2018-05-10T03:03:49Z","closed_at":"2018-05-10T03:03:49Z","author_association":"NONE","body":"I make two requests towards the same route in one method, like \r\n```\r\npublic function testDeleteObject()\r\n{\r\n    $response = $this->json('delete', route('object.delete', ['object_id' => 1]));\r\n    $response = $this->json('delete', route('object.delete', ['object_id' => 2]));\r\n}\r\n```\r\nThe first success and the second fails. There is nothing to do with the `object_id`, because when I comment out any of them, the other will success. So, the situation is that two requests towards one route are sent in one method.\r\n\r\nThe key point is in the controller's constructor, some code like this:\r\n```\r\nfunction __constructor(Request $request)\r\n{\r\n    $request->api_type = 'object';\r\n}\r\n```\r\nwhen `api_type`  save to database in an event listener later on,  it fails with sql error because `$request->api_type` is `null`.\r\n\r\nI digged and found this:\r\n\r\nIn `vendor/laravel/framework/src/Illuminate/Routing/Route.php`:\r\n```\r\n    public function getController()\r\n    {\r\n        if (! $this->controller) {\r\n            $class = $this->parseControllerCallback()[0];\r\n\r\n            $this->controller = $this->container->make(ltrim($class, '\\\\'));\r\n        }\r\n\r\n        return $this->controller;\r\n    }\r\n\r\n```\r\n\r\nLaravel will not create a new controller object for the second request, since the `controller` property already exists. So the constructor will only be called once. However, the request object is always a new one.\r\n\r\n\r\nI found a solution, but I believe there must be some elegant way.\r\n```\r\npublic function testDeleteObject()\r\n{\r\n    $response = $this->json('delete', route('object.delete', ['object_id' => 1]));\r\n    unset(app()['router']->getCurrentRoute()->controller);\r\n    $response = $this->json('delete', route('object.delete', ['object_id' => 2]));\r\n}\r\n```\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24154","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24154/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24154/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24154/events","html_url":"https://github.com/laravel/framework/issues/24154","id":321425411,"number":24154,"title":"how to use no wait or skip locked in postgresql","user":{"login":"cevin","id":338110,"avatar_url":"https://avatars1.githubusercontent.com/u/338110?v=4","gravatar_id":"","url":"https://api.github.com/users/cevin","html_url":"https://github.com/cevin","followers_url":"https://api.github.com/users/cevin/followers","following_url":"https://api.github.com/users/cevin/following{/other_user}","gists_url":"https://api.github.com/users/cevin/gists{/gist_id}","starred_url":"https://api.github.com/users/cevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cevin/subscriptions","organizations_url":"https://api.github.com/users/cevin/orgs","repos_url":"https://api.github.com/users/cevin/repos","events_url":"https://api.github.com/users/cevin/events{/privacy}","received_events_url":"https://api.github.com/users/cevin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-09T04:19:37Z","updated_at":"2018-05-09T14:14:08Z","closed_at":"2018-05-09T14:14:08Z","author_association":"NONE","body":"\r\n\r\n- Laravel Version: 5.6.20\r\n- PHP Version:7.2\r\n- Database Driver & Version: postgresql 10.3\r\n\r\n### Description:\r\nsql example:\r\n```sql\r\nselect * from test where pk = 1 for update nowait\r\nselect * from test where pk = 1 for update skip locked\r\n```\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24148","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24148/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24148/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24148/events","html_url":"https://github.com/laravel/framework/issues/24148","id":321209965,"number":24148,"title":"[5.6] Slack log handler failing when no webhook is provided","user":{"login":"hubertnnn","id":1189576,"avatar_url":"https://avatars1.githubusercontent.com/u/1189576?v=4","gravatar_id":"","url":"https://api.github.com/users/hubertnnn","html_url":"https://github.com/hubertnnn","followers_url":"https://api.github.com/users/hubertnnn/followers","following_url":"https://api.github.com/users/hubertnnn/following{/other_user}","gists_url":"https://api.github.com/users/hubertnnn/gists{/gist_id}","starred_url":"https://api.github.com/users/hubertnnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hubertnnn/subscriptions","organizations_url":"https://api.github.com/users/hubertnnn/orgs","repos_url":"https://api.github.com/users/hubertnnn/repos","events_url":"https://api.github.com/users/hubertnnn/events{/privacy}","received_events_url":"https://api.github.com/users/hubertnnn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-08T14:26:32Z","updated_at":"2018-05-09T15:02:21Z","closed_at":"2018-05-08T14:58:14Z","author_association":"NONE","body":"- Laravel Version: v5.6.20\r\n- PHP Version: 7.1.16-1+ubuntu16.04.1+deb.sury.org+1\r\n\r\n### Description:\r\nSlack log handler failing when no webhook is provided\r\n\r\n### Steps To Reproduce:\r\n\r\n1. Use the default logger slack handler configuration\r\n2. Don't set LOG_SLACK_WEBHOOK_URL in your .env file\r\n3. Call `Log::channel('slack')->error('test');`\r\n4. You will get an exception saying \"Curl error (code 3): <url> malformed\"\r\n\r\n### Expected behavior:\r\n\r\nWhen webhook is not provided or is set to null, slack driver should ignore messages.\r\nUsed to disable unused loggers in local and staging environments using env variables.\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24145","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24145/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24145/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24145/events","html_url":"https://github.com/laravel/framework/issues/24145","id":321075540,"number":24145,"title":"I am facing issue while upgrading Laravel 5.3 from 5.2.","user":{"login":"piyush-azova","id":19776378,"avatar_url":"https://avatars1.githubusercontent.com/u/19776378?v=4","gravatar_id":"","url":"https://api.github.com/users/piyush-azova","html_url":"https://github.com/piyush-azova","followers_url":"https://api.github.com/users/piyush-azova/followers","following_url":"https://api.github.com/users/piyush-azova/following{/other_user}","gists_url":"https://api.github.com/users/piyush-azova/gists{/gist_id}","starred_url":"https://api.github.com/users/piyush-azova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyush-azova/subscriptions","organizations_url":"https://api.github.com/users/piyush-azova/orgs","repos_url":"https://api.github.com/users/piyush-azova/repos","events_url":"https://api.github.com/users/piyush-azova/events{/privacy}","received_events_url":"https://api.github.com/users/piyush-azova/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-08T07:37:53Z","updated_at":"2018-05-08T13:12:57Z","closed_at":"2018-05-08T13:12:57Z","author_association":"NONE","body":"ReflectionException: Class does not exist in /MYPROJECT/vendor/laravel/framework/src/Illuminate/Container/Container.php:749\r\n\r\n[2018-05-08 07:14:18] production.ERROR: ReflectionException: Class  does not exist in /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Container/Container.php:749\r\nStack trace:\r\n#0 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Container/Container.php(749): ReflectionClass->__construct('')\r\n#1 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Container/Container.php(644): Illuminate\\Container\\Container->build('', Array)\r\n#2 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(709): Illuminate\\Container\\Container->make('', Array)\r\n#3 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(127): Illuminate\\Foundation\\Application->make('')\r\n#4 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\r\n#5 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\r\n#6 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Router.php(655): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))\r\n#7 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Router.php(629): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))\r\n#8 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Router.php(607): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))\r\n#9 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(268): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))\r\n#10 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))\r\n#11 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(65): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\r\n#12 /opt/lampp/htdocs/MYPROJ/app/Http/Middleware/VerifyCsrfToken.php(26): Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken->handle(Object(Illuminate\\Http\\Request), Object(Closure))\r\n#13 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): App\\Http\\Middleware\\VerifyCsrfToken->handle(Object(Illuminate\\Http\\Request), Object(Closure))\r\n#14 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\r\n#15 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(49): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\r\n#16 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\\View\\Middleware\\ShareErrorsFromSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))\r\n#17 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\r\n#18 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(64): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\r\n#19 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\\Session\\Middleware\\StartSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))\r\n#20 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\r\n#21 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(37): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\r\n#22 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse->handle(Object(Illuminate\\Http\\Request), Object(Closure))\r\n#23 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\r\n#24 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(59): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))\r\n#25 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\\Cookie\\Middleware\\EncryptCookies->handle(Object(Illuminate\\Http\\Request), Object(Closure))\r\n#26 /opt/lampp/htdocs/MYPROJ/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))\r\n\r\nAny help will be appreciated. Thanks in advance","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24143","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24143/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24143/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24143/events","html_url":"https://github.com/laravel/framework/issues/24143","id":321032909,"number":24143,"title":"S
8000
3 Upload issue (PHP Error:  Call to a member function hashName() on string )","user":{"login":"zeroiszero","id":20971727,"avatar_url":"https://avatars3.githubusercontent.com/u/20971727?v=4","gravatar_id":"","url":"https://api.github.com/users/zeroiszero","html_url":"https://github.com/zeroiszero","followers_url":"https://api.github.com/users/zeroiszero/followers","following_url":"https://api.github.com/users/zeroiszero/following{/other_user}","gists_url":"https://api.github.com/users/zeroiszero/gists{/gist_id}","starred_url":"https://api.github.com/users/zeroiszero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeroiszero/subscriptions","organizations_url":"https://api.github.com/users/zeroiszero/orgs","repos_url":"https://api.github.com/users/zeroiszero/repos","events_url":"https://api.github.com/users/zeroiszero/events{/privacy}","received_events_url":"https://api.github.com/users/zeroiszero/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-08T03:47:08Z","updated_at":"2018-05-08T09:51:56Z","closed_at":"2018-05-08T09:51:56Z","author_association":"NONE","body":"<!--\r\nPlease use this issue tracker only for reporting Laravel bugs.\r\n\r\nIf you need support, please use the forums:\r\n\r\n- https://laracasts.com/discuss \r\n- https://laravel.io/forum\r\n\r\nAlternatively, you may use Slack (https://larachat.co/) or Stack Overflow (http://stackoverflow.com/questions/tagged/laravel).\r\n\r\nIf you would like to propose new Laravel features, please make a pull request, or open an issue at https://github.com/laravel/ideas/issues.\r\n-->\r\n\r\n- Laravel Version: 5.6\r\n- PHP Version: 7.2\r\n\r\n### Description:\r\nI am trying to upload file to AWS S3 putFile method that will generate a unique ID to serve as the file name.\r\nDoc: https://laravel.com/docs/5.6/filesystem#storing-files\r\n\r\nBut its showing this error:\r\n\r\n> PHP Error:  Call to a member function hashName() on string in /vendor/laravel/framework/src/Illuminate/Filesystem/FilesystemAdapter.php on line 193\r\n\r\n\r\n### Steps To Reproduce:\r\nStorage::disk('s3')->putFile(\"exampleFolder\", file_get_contents('exampleFile.jpg'), 'public');","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24136","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24136/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24136/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24136/events","html_url":"https://github.com/laravel/framework/issues/24136","id":320830664,"number":24136,"title":"If an error occurs, the table still gets created","user":{"login":"lucasjkr","id":4703516,"avatar_url":"https://avatars1.githubusercontent.com/u/4703516?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasjkr","html_url":"https://github.com/lucasjkr","followers_url":"https://api.github.com/users/lucasjkr/followers","following_url":"https://api.github.com/users/lucasjkr/following{/other_user}","gists_url":"https://api.github.com/users/lucasjkr/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasjkr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasjkr/subscriptions","organizations_url":"https://api.github.com/users/lucasjkr/orgs","repos_url":"https://api.github.com/users/lucasjkr/repos","events_url":"https://api.github.com/users/lucasjkr/events{/privacy}","received_events_url":"https://api.github.com/users/lucasjkr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-07T14:40:27Z","updated_at":"2018-05-07T17:53:43Z","closed_at":"2018-05-07T17:53:43Z","author_association":"NONE","body":"It was my mistake for faulty syntax, but still got an unexpected result, that artisan reports an error, the table gets created, but the migration is not reported as having occurred in the migrations table, and so doesn't get rolled back.\r\n\r\nMigration code:\r\n\r\n    public function up()\r\n    {\r\n        //\r\n\r\n        Schema::create('test_table', function (Blueprint $table) {\r\n            $table->bigIncrements('id');\r\n            $table->primary('id');\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Reverse the migrations.\r\n     *\r\n     * @return void\r\n     */\r\n    public function down()\r\n    {\r\n        //\r\n        Schema::dropIfExists('test_table');\r\n\r\n    }\r\n    }\r\n\r\nRun the migration. Get error. Rollback. Table still there.\r\n\r\nI understand, I did it wrong, but still suggest changing the process. Understanding that different DB drivers have different limitations as far as transactions go. But if a Migration causes an error and doesn't get inserted into the migrations table, perhaps that table should be dropped outside of the `down()` method.\r\n\r\n- Laravel Version: 5.6.18\r\n- PHP Version: 7.1.14\r\n- Database Driver & Version: MariaDB 5.7 (wow! I need to upgrade....)\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24133","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24133/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24133/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24133/events","html_url":"https://github.com/laravel/framework/issues/24133","id":320777441,"number":24133,"title":"[5.6] Framework does not use a latest version of the Carbon","user":{"login":"andrey-helldar","id":10347617,"avatar_url":"https://avatars2.githubusercontent.com/u/10347617?v=4","gravatar_id":"","url":"https://api.github.com/users/andrey-helldar","html_url":"https://github.com/andrey-helldar","followers_url":"https://api.github.com/users/andrey-helldar/followers","following_url":"https://api.github.com/users/andrey-helldar/following{/other_user}","gists_url":"https://api.github.com/users/andrey-helldar/gists{/gist_id}","starred_url":"https://api.github.com/users/andrey-helldar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrey-helldar/subscriptions","organizations_url":"https://api.github.com/users/andrey-helldar/orgs","repos_url":"https://api.github.com/users/andrey-helldar/repos","events_url":"https://api.github.com/users/andrey-helldar/events{/privacy}","received_events_url":"https://api.github.com/users/andrey-helldar/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-07T11:59:28Z","updated_at":"2018-05-07T13:26:11Z","closed_at":"2018-05-07T12:32:28Z","author_association":"CONTRIBUTOR","body":"In the dependencies of the framework, the version of the package [nesbot/carbon 1.25.*](https://github.com/laravel/framework/blob/805f67b1f36c1aa747138c81067cb6d56ef21ed5/composer.json#L26) is required. While the latest version is [1.27.0](https://github.com/briannesbitt/Carbon/releases)","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24131","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24131/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24131/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24131/events","html_url":"https://github.com/laravel/framework/issues/24131","id":320704405,"number":24131,"title":"custom extensions when testing","user":{"login":"agoalofalife","id":15719824,"avatar_url":"https://avatars0.githubusercontent.com/u/15719824?v=4","gravatar_id":"","url":"https://api.github.com/users/agoalofalife","html_url":"https://github.com/agoalofalife","followers_url":"https://api.github.com/users/agoalofalife/followers","following_url":"https://api.github.com/users/agoalofalife/following{/other_user}","gists_url":"https://api.github.com/users/agoalofalife/gists{/gist_id}","starred_url":"https://api.github.com/users/agoalofalife/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agoalofalife/subscriptions","organizations_url":"https://api.github.com/users/agoalofalife/orgs","repos_url":"https://api.github.com/users/agoalofalife/repos","events_url":"https://api.github.com/users/agoalofalife/events{/privacy}","received_events_url":"https://api.github.com/users/agoalofalife/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-07T07:39:38Z","updated_at":"2018-05-07T11:55:29Z","closed_at":"2018-05-07T11:55:29Z","author_association":"NONE","body":"Method `setUpTraits` return uses array.\r\nhttps://github.com/laravel/framework/blob/805f67b1f36c1aa747138c81067cb6d56ef21ed5/src/Illuminate/Foundation/Testing/TestCase.php#L71\r\n\r\nI want to create a (custom)trait for the extension.\r\nIt would be convenient to do so..\r\n\r\n```php\r\n$this->uses = $this->setUpTraits();\r\n```\r\n\r\n```php\r\n// custom trait\r\ntrait Custom\r\n{\r\npublic function customMethod()\r\n{\r\n // ....\r\n}\r\n}\r\n```\r\n```php\r\nabstract class TestCase extends BaseTestCase\r\n{\r\n protected function setUp()\r\n {\r\n   parent::setUp();\r\n\r\n   if (isset($uses[Custom::class])) {\r\n            $this->customMethod();\r\n        }\r\n }\r\n}\r\n```\r\n\r\nIn the current version you need to override the method `setUp` or to violate the principle `DRY`\r\n@taylorotwell What do you think about this?","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24129","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24129/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24129/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24129/events","html_url":"https://github.com/laravel/framework/issues/24129","id":320622171,"number":24129,"title":"Guzzle doesn't work with Laravel commands when visiting a https websites","user":{"login":"filtration","id":23369596,"avatar_url":"https://avatars3.githubusercontent.com/u/23369596?v=4","gravatar_id":"","url":"https://api.github.com/users/filtration","html_url":"https://github.com/filtration","followers_url":"https://api.github.com/users/filtration/followers","following_url":"https://api.github.com/users/filtration/following{/other_user}","gists_url":"https://api.github.com/users/filtration/gists{/gist_id}","starred_url":"https://api.github.com/users/filtration/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filtration/subscriptions","organizations_url":"https://api.github.com/users/filtration/orgs","repos_url":"https://api.github.com/users/filtration/repos","events_url":"https://api.github.com/users/filtration/events{/privacy}","received_events_url":"https://api.github.com/users/filtration/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-06T19:42:28Z","updated_at":"2018-05-07T01:13:49Z","closed_at":"2018-05-07T01:13:49Z","author_association":"NONE","body":"- Laravel Version: 5.6\r\n- PHP Version: 7.2\r\n- Database Driver & Version: Mysql\r\n\r\n### Description:\r\n\r\nUsing guzzle via a command doesn't use an ssl certificate, but works when using guzzle via a controller or route.\r\n\r\n### Steps To Reproduce:\r\n\r\nDownload Guzzle:\r\n\r\nphp composer.phar require guzzlehttp/guzzle\r\n\r\n\r\nCreate a route in web.php:\r\n\r\n```\r\nRoute::get('/', function() {\r\n    $client = new \\GuzzleHttp\\Client(); \r\n    $res = $client->request('GET', 'https://google.com/');\r\n\r\n    dd($res);\r\n});\r\n```\r\n\r\nWhich will work fine, but now create a command php artisan make:command TestCommand\r\n\r\nand and the code to the construct:\r\n\r\n```\r\npublic function __construct()\r\n{\r\n    $client = new \\GuzzleHttp\\Client(); \r\n    $res = $client->request('GET', 'https://google.com/');\r\n\r\n    dd($res);\r\n}\r\n```\r\n\r\n\r\nThis will throw a ssl error, even though the certs are all working fine, as you can see via the route closure code.\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24127","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24127/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24127/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24127/events","html_url":"https://github.com/laravel/framework/issues/24127","id":320558494,"number":24127,"title":"Laravel does not serialize private data members?","user":{"login":"archfrog","id":1729893,"avatar_url":"https://avatars0.githubusercontent.com/u/1729893?v=4","gravatar_id":"","url":"https://api.github.com/users/archfrog","html_url":"https://github.com/archfrog","followers_url":"https://api.github.com/users/archfrog/followers","following_url":"https://api.github.com/users/archfrog/following{/other_user}","gists_url":"https://api.github.com/users/archfrog/gists{/gist_id}","starred_url":"https://api.github.com/users/archfrog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/archfrog/subscriptions","organizations_url":"https://api.github.com/users/archfrog/orgs","repos_url":"https://api.github.com/users/archfrog/repos","events_url":"https://api.github.com/users/archfrog/events{/privacy}","received_events_url":"https://api.github.com/users/archfrog/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-06T03:04:59Z","updated_at":"2018-05-06T03:48:41Z","closed_at":"2018-05-06T03:48:41Z","author_association":"NONE","body":"### Tools\r\n- Laravel Version: 5.6.*\r\n- PHP Version: 7.2\r\n- Database Driver & Version: Percona 5.7 (MySQL compatible)\r\n\r\n### Description:\r\nWhy doesn't Laravel serialize `private` data members?  Is there a technical reason for this or is it a bug?\r\n\r\nI had code like this:\r\n\r\n    abstract class Importer implements ShouldQueue\r\n    {\r\n        use InteractsWithQueue, Queueable, SerializesModels;\r\n\r\n        /** The handle of the duty (background task) that this class implements. */\r\n        private $duty_id;\r\n\r\n        ...\r\n    }\r\n\r\nAnd it kept failing because the value of `$duty_id` was lost between the initialization in the constructor and the actual use in the `handle()` method.  Having done a few Laravel jobs, I recognized this as a sign of my variable not being serialized.  However, it took me a long while to figure out that I had to change `private` into `protected` for it to work, something that baffles me yet.\r\n\r\nDoes PHP not serialize `private` members or is it a missing flag or check in Laravel itself that causes this behavior?\r\n\r\nP.S. I resorted to the Laravel issue list only after nobody answered my post in the Laravel forums.\r\n\r\n### Steps To Reproduce:\r\nChange any `protected` data member in a queue job to `private` and you'll discover that its value is not persisted between the call to the constructor and the `handle()` method.","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24125","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24125/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24125/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24125/events","html_url":"https://github.com/laravel/framework/issues/24125","id":320551122,"number":24125,"title":"Make:listener and make:event don't check if file allready exists.","user":{"login":"JamesAnelay","id":7728332,"avatar_url":"https://avatars1.githubusercontent.com/u/7728332?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesAnelay","html_url":"https://github.com/JamesAnelay","followers_url":"https://api.github.com/users/JamesAnelay/followers","following_url":"https://api.github.com/users/JamesAnelay/following{/other_user}","gists_url":"https://api.github.com/users/JamesAnelay/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesAnelay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesAnelay/subscriptions","organizations_url":"https://api.github.com/users/JamesAnelay/orgs","repos_url":"https://api.github.com/users/JamesAnelay/repos","events_url":"https://api.github.com/users/JamesAnelay/events{/privacy}","received_events_url":"https://api.github.com/users/JamesAnelay/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-06T00:10:25Z","updated_at":"2018-05-06T02:45:28Z","closed_at":"2018-05-06T02:45:28Z","author_association":"NONE","body":"- Laravel Version: Current.\r\n- PHP Version: PHP 7.1.15, but I believe true in all versions\r\n\r\n### Description:\r\nBoth make:listener and make:event don't check to see if the file already exists. This is particularly frustrating when like me you hit \"up arrow > enter\" in the command to run what is usually the phpunit command only to accidentally rewrite the file you just edited by running the make: command again.\r\n\r\nI did a bit of digging and saw that in commit  307917505bbc1ef9f8e3b9442c92bbbf79cafa45 @taylorotwell implemented a fix to already exists \"prevents the framework from generating listeners for listeners\r\nthat are defined in packages outside of the App namespace\" that fix causes this at least for the Listener class because class_exists don't have the full path in currently, so it always returns false.\r\n\r\nI would suggest an update like this below as getDefaultNamespace is defined to the correct Directory for each descendant:\r\n\r\n```\r\n    protected function alreadyExists($rawName)\r\n    {\r\n        return class_exists($this->getDefaultNamespace().'\\\\'.$rawName);\r\n    }\r\n```\r\n\r\nIdeally this would just be applied to the GeneratorCommand class and the overwrites on listener, event and exceptions removed for easier maintainence.\r\n\r\nHowever, this means that anything that GeneratorCommand will only be able to create classes in the Laravel Root namespace (usually App). I'm not sure if this is desired, which is why it didn't create it yet at the moment, for example, I can create a file in the root of the project by running \"php artisan make:model ../testing\r\n\" and if permission allows even outside of the project directory.\r\n\r\nNote: I'm keep to contribute the solution myselt as my first propper opensource contribution, however I am just not 100% sure if any of the make: commands that use GeneratorCommand should be able to create files outside of App. Or if we can change it at this point given other users may have overridden it themselves.\r\n\r\n### Steps To Reproduce:\r\nRun \r\n`php artisan make:listener Testing` twice expected output on the second run should be \"File allready exists error\" however it simply recreates it.\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24121","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24121/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24121/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24121/events","html_url":"https://github.com/laravel/framework/issues/24121","id":320517935,"number":24121,"title":"Eloquent: Nested Lazy Eager Loading will erase relations from Nested Eager Loading","user":{"login":"SeparateReality","id":13707244,"avatar_url":"https://avatars1.githubusercontent.com/u/13707244?v=4","gravatar_id":"","url":"https://api.github.com/users/SeparateReality","html_url":"https://github.com/SeparateReality","followers_url":"https://api.github.com/users/SeparateReality/followers","following_url":"https://api.github.com/users/SeparateReality/following{/other_user}","gists_url":"https://api.github.com/users/SeparateReality/gists{/gist_id}","starred_url":"https://api.github.com/users/SeparateReality/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SeparateReality/subscriptions","organizations_url":"https://api.github.com/users/SeparateReality/orgs","repos_url":"https://api.github.com/users/SeparateReality/repos","events_url":"https://api.github.com/users/SeparateReality/events{/privacy}","received_events_url":"https://api.github.com/users/SeparateReality/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2018-05-05T15:28:46Z","updated_at":"2018-05-10T00:05:16Z","closed_at":"2018-05-05T17:35:56Z","author_association":"NONE","body":"- Laravel Version:  slim/slim 3.10.0\r\n- Eloquent: illuminate/database v5.6.20 \r\n- PHP Version:  7.2.4\r\n- Database Driver & Version: MariaDB 10.3.6\r\n\r\n### Description:\r\n\r\nWhen first using Nested Eager Loading, like\r\n **(1)** `$categories = Category::with(['products.adjunctProducts'])->get();` \r\nand put a Nested Lazy Eager Loading on top of it, like\r\n**(2)**  `$categories->load(['products.subscriptionModel']);`\r\nthen\r\n\r\nafter (1) you will get a Collection with 'products.adjunctProducts' relation, as expected.\r\n\r\nBut after (2) you will get a Collection with 'products.subscriptionModel' relation (again as expected),\r\n**but you will not find the relation 'products.adjunctProducts' anymore.**\r\n\r\n**Remarks:**\r\n- This does not happen with non-nested Eager Loads (e.g. `$categories = Category::with('products')->get();`\r\n- One could ask 'Why not just put the nested load directly in the first `with()`'.\r\nThe described case here is simplified as much as possible. Our Eager Loaded collection normally can be changed by different modules using an event. So if a modules needs further relations it would just use `load()`\r\n- Our temporary solution is to not use `get()` (until after the event) but work with the Builder-Object and concatenate several `with()`s. Not sure if that's the best solution!?\r\n\r\n\r\n### Steps To Reproduce:\r\n\r\nTake a model with different relations on a first relation and reproduce with the description above.\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24117","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24117/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24117/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24117/events","html_url":"https://github.com/laravel/framework/issues/24117","id":320497297,"number":24117,"title":"Incorrect encoding on laravel errors","user":{"login":"fkeloks","id":16477784,"avatar_url":"https://avatars1.githubusercontent.com/u/16477784?v=4","gravatar_id":"","url":"https://api.github.com/users/fkeloks","html_url":"https://github.com/fkeloks","followers_url":"https://api.github.com/users/fkeloks/followers","following_url":"https://api.github.com/users/fkeloks/following{/other_user}","gists_url":"https://api.github.com/users/fkeloks/gists{/gist_id}","starred_url":"https://api.github.com/users/fkeloks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkeloks/subscriptions","organizations_url":"https://api.github.com/users/fkeloks/orgs","repos_url":"https://api.github.com/users/fkeloks/repos","events_url":"https://api.github.com/users/fkeloks/events{/privacy}","received_events_url":"https://api.github.com/users/fkeloks/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-05T10:11:25Z","updated_at":"2018-05-10T15:41:49Z","closed_at":"2018-05-10T15:41:49Z","author_association":"NONE","body":"<!--\r\nPlease use this issue tracker only for reporting Laravel bugs.\r\n\r\nIf you need support, please use the forums:\r\n\r\n- https://laracasts.com/discuss \r\n- https://laravel.io/forum\r\n\r\nAlternatively, you may use Slack (https://larachat.co/) or Stack Overflow (http://stackoverflow.com/questions/tagged/laravel).\r\n\r\nIf you would like to propose new Laravel features, please make a pull request, or open an issue at https://github.com/laravel/ideas/issues.\r\n-->\r\n\r\n- Laravel Version: 5.6.3\r\n- Whoops Version: 2.1.14\r\n- PHP Version: 7.1.7\r\n\r\n### Description:\r\n\r\nWhile trying to launch the web server with the `php artisan serve` command without having mysql ready, I realized that the error generated did not support the special characters, sign of a bad encoding.\r\n\r\nEnvironment: dev\r\n\r\n### Steps To Reproduce:\r\n\r\nLaunch the web server without a database launched, with the translation into French.\r\n\r\n### Screen\r\n\r\n![image](https://user-images.githubusercontent.com/16477784/39662122-53c6a74c-505d-11e8-86b2-6b090a015d9a.png)\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24114","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24114/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24114/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24114/events","html_url":"https://github.com/laravel/framework/issues/24114","id":320430402,"number":24114,"title":"Migrations ignores Schema::connection()","user":{"login":"im-andresgs","id":29309543,"avatar_url":"https://avatars3.githubusercontent.com/u/29309543?v=4","gravatar_id":"","url":"https://api.github.com/users/im-andresgs","html_url":"https://github.com/im-andresgs","followers_url":"https://api.github.com/users/im-andresgs/followers","following_url":"https://api.github.com/users/im-andresgs/following{/other_user}","gists_url":"https://api.github.com/users/im-andresgs/gists{/gist_id}","starred_url":"https://api.github.com/users/im-andresgs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/im-andresgs/subscriptions","organizations_url":"https://api.github.com/users/im-andresgs/orgs","repos_url":"https://api.github.com/users/im-andresgs/repos","events_url":"https://api.github.com/users/im-andresgs/events{/privacy}","received_events_url":"https://api.github.com/users/im-andresgs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-04T21:06:40Z","updated_at":"2018-05-04T22:02:41Z","closed_at":"2018-05-04T22:02:41Z","author_association":"NONE","body":"- Laravel Version: 5.5.*\r\n- PHP Version:7.1.10\r\n- Database Driver & Version: mysql \r\n\r\nDescription:\r\nIf you uses two or more connections, set in config/database.php and you run the php artisan command migrate:fresh, it use the default connection, ignoring if you set a explicit connection like 'Schema::connection('*connection*')->create('*table*', function(Blueprint $table) { ...'; the documentation set it. In same way it ignores in both methods: 'up' and 'down'. It always use the default connection.\r\n\r\nI read a lot, and other way is use the command: 'php artisan migrate:fresh --database=*connection*' and it works BUT, if the migrations set different connections, it doesn't work. Because the database flag in the command try only in that database.\r\n\r\nConclusion: it ignores this: 'Schema::connection(...' when it should not to be like this. If you set a connection() in UP and DOWN methods it should works.\r\n\r\nhttps://laravel.com/docs/5.5/migrations\r\nDatabase Connection & Table Options\r\nIf you want to perform a schema operation on a database connection that is not your default connection, use the connection method:\r\nSchema::connection('foo')->create('users', function (Blueprint $table) {\r\n\r\nSteps To Reproduce:\r\n1 - Create two or more connections to different databases (different to the default connection)\r\n2 - Create two or more migrations that point to different connections\r\n3 - Run 'php artisan migrate:fresh' command\r\n4 - Run 'php artisan migrate:fresh --database=*whatever connection*' command\r\n","score":1.0},{"url":"https://api.github.com/repos/laravel/framework/issues/24112","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/24112/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/24112/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/24112/events","html_url":"https://github.com/laravel/framework/issues/24112","id":320344003,"number":24112,"title":"[5.5] Fill a eloquent date with an ISO8601 string causes \"Unexpected data found. Trailing data\"","user":{"login":"iget-master","id":9434959,"avatar_url":"https://avatars2.githubusercontent.com/u/9434959?v=4","gravatar_id":"","url":"https://api.github.com/users/iget-master","html_url":"https://github.com/iget-master","followers_url":"https://api.github.com/users/iget-master/followers","following_url":"https://api.github.com/users/iget-master/following{/other_user}","gists_url":"https://api.github.com/users/iget-master/gists{/gist_id}","starred_url":"https://api.github.com/users/iget-master/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iget-master/subscriptions","organizations_url":"https://api.github.com/users/iget-master/orgs","repos_url":"https://api.github.com/users/iget-master/repos","events_url":"https://api.github.com/users/iget-master/events{/privacy}","received_events_url":"https://api.github.com/users/iget-master/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-05-04T16:40:30Z","updated_at":"2018-05-08T22:13:54Z","closed_at":"2018-05-05T04:08:45Z","author_association":"NONE","body":"<!--\r\nPlease use this issue tracker only for reporting Laravel bugs.\r\n\r\nIf you need support, please use the forums:\r\n\r\n- https://laracasts.com/discuss \r\n- https://laravel.io/forum\r\n\r\nAlternatively, you may use Slack (https://larachat.co/) or Stack Overflow (http://stackoverflow.com/questions/tagged/laravel).\r\n\r\nIf you would like to propose new Laravel features, please make a pull request, or open an issue at https://github.com/laravel/ideas/issues.\r\n-->\r\n\r\n- Laravel Version: 5.5.40 (but should also affect 5.6.x)\r\n- PHP Version: PHP 7.2.2-3+ubuntu16.04.1+deb.sury.org+1\r\n- Database Driver & Version: -irrelevant-\r\n\r\n### Description:\r\n\r\nFilling a model date attribute with an ISO8601 string causes a carbon exception: `Unexpected data found. Trailing data`\r\n\r\nThe problem is the `asDateTime()` function on `HasAttributes` trait. Note that it checks the following situations: \r\n\r\n- The value is a Carbon\r\n- The value is a DateTime\r\n- The value is a timestamp\r\n- The value is \"Standard Date Format (Y-m-d)\r\n- The value is formatted as the default database connection format\r\n\r\nThis is a issue, since ISO8601 is the standard for javascript dates for example, and also handles timezone.\r\n\r\nIMO, before the last check, we should check if it's an ISO8601 string, otherwise I'm unable to do\r\n\r\n    MyModel::create($request->all());\r\n\r\nforcing me to always parse de date manually into a carbon instance, and that's a pain!\r\n\r\nhttps://github.com/laravel/framework/blob/ac963a0dc8bc0e06591ee704cf279f2bff3d66ce/src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php#L679-L717\r\n\r\n### Steps To Reproduce:\r\n\r\n1. Create a Model with `some_date_field` and add it to `$dates` property.\r\n2. Try to fill the `some_date_field` with an ISO8601 string, eg: `2018-05-04T16:04Z`\r\n3. You'll get the following error:\r\n\r\n        \"message\": \"Unexpected data found.\\nTrailing data\",\r\n        \"exception\": \"InvalidArgumentException\",\
7f
r\n        \"file\": \"/var/www/vendor/nesbot/carbon/src/Carbon/Carbon.php\",\r\n        \"line\": 836,\r\n\r\n","score":1.0}]}
0

