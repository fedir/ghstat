HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Tue, 03 Jul 2018 02:33:23 GMT
Link: <https://api.github.com/search/issues?q=repo%3Adgraph-io%2Fdgraph+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Adgraph-io%2Fdgraph+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: C1A2:77E4:291D0B1:5BE1A7E:5B3AE072
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 27
X-Ratelimit-Reset: 1530585262
X-Runtime-Rack: 0.380571
X-Xss-Protection: 1; mode=block

8000
{"total_count":1080,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2462","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2462/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2462/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2462/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2462","id":336566604,"node_id":"MDU6SXNzdWUzMzY1NjY2MDQ=","number":2462,"title":"bring a big convenience by using 128bit integer for uid? how expensive is it?","user":{"login":"xinstein","id":10842079,"node_id":"MDQ6VXNlcjEwODQyMDc5","avatar_url":"https://avatars3.githubusercontent.com/u/10842079?v=4","gravatar_id":"","url":"https://api.github.com/users/xinstein","html_url":"https://github.com/xinstein","followers_url":"https://api.github.com/users/xinstein/followers","following_url":"https://api.github.com/users/xinstein/following{/other_user}","gists_url":"https://api.github.com/users/xinstein/gists{/gist_id}","starred_url":"https://api.github.com/users/xinstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinstein/subscriptions","organizations_url":"https://api.github.com/users/xinstein/orgs","repos_url":"https://api.github.com/users/xinstein/repos","events_url":"https://api.github.com/users/xinstein/events{/privacy}","received_events_url":"https://api.github.com/users/xinstein/received_events","type":"User","site_admin":false},"labels":[{"id":575130195,"node_id":"MDU6TGFiZWw1NzUxMzAxOTU=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/question","name":"question","color":"bfd4f2","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-06-28T10:37:21Z","updated_at":"2018-06-29T22:11:36Z","closed_at":"2018-06-29T22:05:23Z","author_association":"NONE","body":"the current uid is a 64bit int, if I have 10B nodes, and I choose to use hash for generating uid from xid, there's a high probability of hash collision ( of the order 10B^2 / 2^64 ~ 5).\r\n\r\nBut with a 128bit uid, 10B nodes would give a collision probability of 10B^2 / 2^128 ~  2e-19, I suppose this would suffice for all practical needs. Then mapping xid to uid would be a simple hash, obviating the need for serving a map table.\r\n\r\nThis would be a huge convenience.\r\n\r\nIf you judge that 128bit is too expensive, you could determine a fair uid size using the hash collision prob estimate formula (n^2 / N), just like I did in the above.\r\n\r\nIf the 64bit choice has sth to do with the current market cpu architect. Then I guess bad luck for me.","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2461","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2461/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2461/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2461/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2461","id":336564453,"node_id":"MDU6SXNzdWUzMzY1NjQ0NTM=","number":2461,"title":"Can't delete literal values via API/Mutation/NQuads","user":{"login":"cajus","id":722353,"node_id":"MDQ6VXNlcjcyMjM1Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/722353?v=4","gravatar_id":"","url":"https://api.github.com/users/cajus","html_url":"https://github.com/cajus","followers_url":"https://api.github.com/users/cajus/followers","following_url":"https://api.github.com/users/cajus/following{/other_user}","gists_url":"https://api.github.com/users/cajus/gists{/gist_id}","starred_url":"https://api.github.com/users/cajus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cajus/subscriptions","organizations_url":"https://api.github.com/users/cajus/orgs","repos_url":"https://api.github.com/users/cajus/repos","events_url":"https://api.github.com/users/cajus/events{/privacy}","received_events_url":"https://api.github.com/users/cajus/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-28T10:30:15Z","updated_at":"2018-06-29T06:41:06Z","closed_at":"2018-06-29T06:41:06Z","author_association":"NONE","body":"- What version of Dgraph are you using?\r\nv1.0.6\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n\r\nI'm using the _dgraph API_ via *dgo* to apply a list of mutations to the graph. The code collects the changes in form of _NQuads_ proto objects and applies it to .Set/.Del of a mutation object.\r\n\r\nNow I've some bool predicate like\r\n\r\n```\r\n locked: bool .\r\n <0x1234> locked true .\r\n```\r\n\r\nsaved to the graph - which I want to remove now. It's not clear to me how this needs to be done, because\r\n\r\n```golang\r\n\t\tnq := api.NQuad{\r\n\t\t\tSubject:   \"0x1234\",\r\n\t\t\tPredicate: \"locked\",\r\n                        ObjectValue: &api.Value_BoolVal{BoolVal: def.Object.(bool)},\r\n                        //ObjectValue: &api.Value_StrVal{StrVal: \"*\"},\r\n                        //ObjectValue: &api.Value_StrVal{StrVal: \"_STAR_ALL\"},\r\n\t\t}\r\n```\r\nruns into\r\n\r\n```\r\nrpc error: code = Unknown desc = Please use * with delete operation for non-list type: [locked]\r\nrpc error: code = Unknown desc = Please use * with delete operation for non-list type: [locked]\r\nrpc error: code = Unknown desc = strconv.ParseBool: parsing \"_STAR_ALL\": invalid syntax\r\n```\r\nin order of the comments above.\r\n\r\nWhat does dgraph expect me to put in there to delete that node?","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2459","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2459/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2459/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2459/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2459","id":336087285,"node_id":"MDU6SXNzdWUzMzYwODcyODU=","number":2459,"title":"Mutation not supporting","user":{"login":"Akshay-15mca1098","id":29207885,"node_id":"MDQ6VXNlcjI5MjA3ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/29207885?v=4","gravatar_id":"","url":"https://api.github.com/users/Akshay-15mca1098","html_url":"https://github.com/Akshay-15mca1098","followers_url":"https://api.github.com/users/Akshay-15mca1098/followers","following_url":"https://api.github.com/users/Akshay-15mca1098/following{/other_user}","gists_url":"https://api.github.com/users/Akshay-15mca1098/gists{/gist_id}","starred_url":"https://api.github.com/users/Akshay-15mca1098/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Akshay-15mca1098/subscriptions","organizations_url":"https://api.github.com/users/Akshay-15mca1098/orgs","repos_url":"https://api.github.com/users/Akshay-15mca1098/repos","events_url":"https://api.github.com/users/Akshay-15mca1098/events{/privacy}","received_events_url":"https://api.github.com/users/Akshay-15mca1098/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-06-27T06:00:36Z","updated_at":"2018-06-27T06:14:50Z","closed_at":"2018-06-27T06:14:50Z","author_association":"NONE","body":"I installed `dgraph 1.0.5` version. followed the documentation and till the server start `localhost:8000` I have done also data successfully stored in the graph. After this step, I am trying to `Adding indexes` but not getting success. Also, find some video but all are working on the older version.\r\n\r\nFor better understanding i have added an image\r\n\r\n![screenshot from 2018-06-27 10-04-03](https://user-images.githubusercontent.com/29207885/41955362-62fec130-79fd-11e8-8593-deead6a82ad1.png)\r\n\r\n\r\n ","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2452","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2452/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2452/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2452/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2452","id":334204964,"node_id":"MDU6SXNzdWUzMzQyMDQ5NjQ=","number":2452,"title":"godoc DeleteEdges example","user":{"login":"cloudmode","id":7798755,"node_id":"MDQ6VXNlcjc3OTg3NTU=","avatar_url":"https://avatars2.githubusercontent.com/u/7798755?v=4","gravatar_id":"","url":"https://api.github.com/users/cloudmode","html_url":"https://github.com/cloudmode","followers_url":"https://api.github.com/users/cloudmode/followers","following_url":"https://api.github.com/users/cloudmode/following{/other_user}","gists_url":"https://api.github.com/users/cloudmode/gists{/gist_id}","starred_url":"https://api.github.com/users/cloudmode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cloudmode/subscriptions","organizations_url":"https://api.github.com/users/cloudmode/orgs","repos_url":"https://api.github.com/users/cloudmode/repos","events_url":"https://api.github.com/users/cloudmode/events{/privacy}","received_events_url":"https://api.github.com/users/cloudmode/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"paulftw","id":769142,"node_id":"MDQ6VXNlcjc2OTE0Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/769142?v=4","gravatar_id":"","url":"https://api.github.com/users/paulftw","html_url":"https://github.com/paulftw","followers_url":"https://api.github.com/users/paulftw/followers","following_url":"https://api.github.com/users/paulftw/following{/other_user}","gists_url":"https://api.github.com/users/paulftw/gists{/gist_id}","starred_url":"https://api.github.com/users/paulftw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulftw/subscriptions","organizations_url":"https://api.github.com/users/paulftw/orgs","repos_url":"https://api.github.com/users/paulftw/repos","events_url":"https://api.github.com/users/paulftw/events{/privacy}","received_events_url":"https://api.github.com/users/paulftw/received_events","type":"User","site_admin":false},"assignees":[{"login":"paulftw","id":769142,"node_id":"MDQ6VXNlcjc2OTE0Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/769142?v=4","gravatar_id":"","url":"https://api.github.com/users/paulftw","html_url":"https://github.com/paulftw","followers_url":"https://api.github.com/users/paulftw/followers","following_url":"https://api.github.com/users/paulftw/following{/other_user}","gists_url":"https://api.github.com/users/paulftw/gists{/gist_id}","starred_url":"https://api.github.com/users/paulftw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulftw/subscriptions","organizations_url":"https://api.github.com/users/paulftw/orgs","repos_url":"https://api.github.com/users/paulftw/repos","events_url":"https://api.github.com/users/paulftw/events{/privacy}","received_events_url":"https://api.github.com/users/paulftw/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-06-20T18:48:14Z","updated_at":"2018-06-21T19:03:35Z","closed_at":"2018-06-21T19:03:34Z","author_association":"NONE","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\nDgraph version   : v1.0.5\r\nCommit SHA-1     : 82787414\r\nCommit timestamp : 2018-04-20 15:50:53 +1000\r\nBranch           : HEAD\r\n\r\n- Have you tried reproducing the issue with latest release?\r\nIt's latest, downloaded yesterday\r\n\r\n- What is the hardware spec (RAM, OS)?\r\nMacOSX, 32GB\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\nhttps://godoc.org/github.com/dgraph-io/dgo#example-DeleteEdges\r\n\r\n\r\n\r\n- Expected behaviour and actual result.\r\nFails with error:2018/06/20 11:41:52 rpc error: code = Unknown desc = Error while unmarshalling: [Riley Street] as geojson: invalid character 'R' looking for beginning of value\r\n\r\n- Solution\r\n\t\tLocation string    `json:\"loc,omitempty\"`\r\nit appears that the 'loc' field expects it to be geojson value, not string\r\nfix: change to:\r\n\t\tLocation string    `json:\"location,omitempty\"`\r\nRuns without error there\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2451","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2451/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2451/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2451/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2451","id":334171212,"node_id":"MDU6SXNzdWUzMzQxNzEyMTI=","number":2451,"title":"Dgraph Client for delete operation","user":{"login":"priyank-shah-1105","id":29821304,"node_id":"MDQ6VXNlcjI5ODIxMzA0","avatar_url":"https://avatars3.githubusercontent.com/u/29821304?v=4","gravatar_id":"","url":"https://api.github.com/users/priyank-shah-1105","html_url":"https://github.com/priyank-shah-1105","followers_url":"https://api.github.com/users/priyank-shah-1105/followers","following_url":"https://api.github.com/users/priyank-shah-1105/following{/other_user}","gists_url":"https://api.github.com/users/priyank-shah-1105/gists{/gist_id}","starred_url":"https://api.github.com/users/priyank-shah-1105/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priyank-shah-1105/subscriptions","organizations_url":"https://api.github.com/users/priyank-shah-1105/orgs","repos_url":"https://api.github.com/users/priyank-shah-1105/repos","events_url":"https://api.github.com/users/priyank-shah-1105/events{/privacy}","received_events_url":"https://api.github.com/users/priyank-shah-1105/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-20T17:07:52Z","updated_at":"2018-06-20T18:44:09Z","closed_at":"2018-06-20T18:44:08Z","author_association":"NONE","body":"I am not able to find how to use S P * and S P * * in dgraph client for deleting an edge from a node.\r\nCan you please help me with that?","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2450","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2450/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2450/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2450/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2450","id":334060795,"node_id":"MDU6SXNzdWUzMzQwNjA3OTU=","number":2450,"title":"can we assign Uid to the predicates that already exist using go client... ?","user":{"login":"mettuaditya","id":28786000,"node_id":"MDQ6VXNlcjI4Nzg2MDAw","avatar_url":"https://avatars0.githubusercontent.com/u/28786000?v=4","gravatar_id":"","url":"https://api.github.com/users/mettuaditya","html_url":"https://github.com/mettuaditya","followers_url":"https://api.github.com/users/mettuaditya/followers","following_url":"https://api.github.com/users/mettuaditya/following{/other_user}","gists_url":"https://api.github.com/users/mettuaditya/gists{/gist_id}","starred_url":"https://api.github.com/users/mettuaditya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mettuaditya/subscriptions","organizations_url":"https://api.github.com/users/mettuaditya/orgs","repos_url":"https://api.github.com/users/mettuaditya/repos","events_url":"https://api.github.com/users/mettuaditya/events{/privacy}","received_events_url":"https://api.github.com/users/mettuaditya/received_events","type":"User","site_admin":false},"labels":[{"id":522272601,"node_id":"MDU6TGFiZWw1MjIyNzI2MDE=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/move_to_discuss.dgraph.io","name":"move_to_discuss.dgraph.io","color":"e99695","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-20T12:46:25Z","updated_at":"2018-06-20T20:19:23Z","closed_at":"2018-06-20T15:03:31Z","author_association":"NONE","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\n\r\n\r\n- Have you tried reproducing the issue with latest release?\r\n\r\n\r\n- What is the hardware spec (RAM, OS)?\r\n\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n\r\n\r\n- Expected behaviour and actual result.\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2441","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2441/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2441/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2441/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2441","id":332145148,"node_id":"MDU6SXNzdWUzMzIxNDUxNDg=","number":2441,"title":"Question about docker-Compose","user":{"login":"choubiket","id":34597341,"node_id":"MDQ6VXNlcjM0NTk3MzQx","avatar_url":"https://avatars3.githubusercontent.com/u/34597341?v=4","gravatar_id":"","url":"https://api.github.com/users/choubiket","html_url":"https://github.com/choubiket","followers_url":"https://api.github.com/users/choubiket/followers","following_url":"https://api.github.com/users/choubiket/following{/other_user}","gists_url":"https://api.github.com/users/choubiket/gists{/gist_id}","starred_url":"https://api.github.com/users/choubiket/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choubiket/subscriptions","organizations_url":"https://api.github.com/users/choubiket/orgs","repos_url":"https://api.github.com/users/choubiket/repos","events_url":"https://api.github.com/users/choubiket/events{/privacy}","received_events_url":"https://api.github.com/users/choubiket/received_events","type":"User","site_admin":false},"labels":[{"id":575130195,"node_id":"MDU6TGFiZWw1NzUxMzAxOTU=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/question","name":"question","color":"bfd4f2","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-13T20:09:52Z","updated_at":"2018-06-14T01:39:28Z","closed_at":"2018-06-14T01:39:28Z","author_association":"NONE","body":"When using Dgraph 1.0.5 with docker compose in a single server, I strat Zero, Ratel and Server. \r\nFact is I can ping container from one another testing with docker exec for example and using the Alias in docker compose (zero, ratel and server),\r\nBut I Can't connect to server from Ratel in the Web interface using the same alias. I need to use 127.0.0.1 IP OR the docker generated IP i get with docker inspect (172.18.0.X for example)\r\n\r\nCan you tell me why ratel can't use DNS alias docker compose creates while loading ?\r\n\r\nPS : I have the same stuff with Prometheus container I add in the docker-compose file : Prometheus will need a Config file with IP and will not support DNS aliases like server:8080, zero:6080, etc..\r\n\r\nThanks\r\n \r\n- What version of Dgraph are you using?\r\n1.0.5\r\n\r\n- Have you tried reproducing the issue with latest release?\r\nYes\r\n\r\n- What is the hardware spec (RAM, OS)?\r\n8gb ram, UBUNTU 16.04, Docker 18.03 and docker-compose 1.20.1\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\nJust run the docker-compose up with the standard configuration I get on your website (Install / Single Host Setup / Docker-Compose)\r\n\r\n- Expected behaviour and actual result.\r\nI would like to be able to use DNS aliases as in every other docker container\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2439","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2439/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2439/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2439/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2439","id":331473549,"node_id":"MDU6SXNzdWUzMzE0NzM1NDk=","number":2439,"title":"Do you have plans for gpu-accelerated dgraph-ratel UI?","user":{"login":"xinstein","id":10842079,"node_id":"MDQ6VXNlcjEwODQyMDc5","avatar_url":"https://avatars3.githubusercontent.com/u/10842079?v=4","gravatar_id":"","url":"https://api.github.com/users/xinstein","html_url":"https://github.com/xinstein","followers_url":"https://api.github.com/users/xinstein/followers","following_url":"https://api.github.com/users/xinstein/following{/other_user}","gists_url":"https://api.github.com/users/xinstein/gists{/gist_id}","starred_url":"https://api.github.com/users/xinstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinstein/subscriptions","organizations_url":"https://api.github.com/users/xinstein/orgs","repos_url":"https://api.github.com/users/xinstein/repos","events_url":"https://api.github.com/users/xinstein/events{/privacy}","received_events_url":"https://api.github.com/users/xinstein/received_events","type":"User","site_admin":false},"labels":[{"id":575130195,"node_id":"MDU6TGFiZWw1NzUxMzAxOTU=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/question","name":"question","color":"bfd4f2","default":true},{"id":802227954,"node_id":"MDU6TGFiZWw4MDIyMjc5NTQ=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/ratel","name":"ratel","color":"0e8a16","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-12T07:43:52Z","updated_at":"2018-06-12T19:07:44Z","closed_at":"2018-06-12T19:07:24Z","author_association":"NONE","body":"The speed of dgraph-ratel suffers heavily from the increase of graph size,\r\nI've been searching the net for gpu-accelerated graph visualization and learned that there are some works in progress in this direction.\r\nDo you have plans for this?","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2437","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2437/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2437/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2437/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2437","id":331416782,"node_id":"MDU6SXNzdWUzMzE0MTY3ODI=","number":2437,"title":"some query conditiones on Facets","user":{"login":"shanghai-Jerry","id":12420699,"node_id":"MDQ6VXNlcjEyNDIwNjk5","avatar_url":"https://avatars1.githubusercontent.com/u/12420699?v=4","gravatar_id":"","url":"https://api.github.com/users/shanghai-Jerry","html_url":"https://github.com/shanghai-Jerry","followers_url":"https://api.github.com/users/shanghai-Jerry/followers","following_url":"https://api.github.com/users/shanghai-Jerry/following{/other_user}","gists_url":"https://api.github.com/users/shanghai-Jerry/gists{/gist_id}","starred_url":"https://api.github.com/users/shanghai-Jerry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shanghai-Jerry/subscriptions","organizations_url":"https://api.github.com/users/shanghai-Jerry/orgs","repos_url":"https://api.github.com/users/shanghai-Jerry/repos","events_url":"https://api.github.com/users/shanghai-Jerry/events{/privacy}","received_events_url":"https://api.github.com/users/shanghai-Jerry/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-12T02:41:12Z","updated_at":"2018-06-13T01:35:55Z","closed_at":"2018-06-12T19:49:42Z","author_association":"NONE","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\n latest v1.0.5\r\n\r\n- Have you tried reproducing the issue with latest release?\r\n   no\r\n\r\n- What is the hardware spec (RAM, OS)?\r\n    128G\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n  nohup dgraph zero -w zw5 --replicas 1 > info1 &\r\n  nohup dgraph server -p p5 -w w5 --lru_mb 20000 --zero localhost:5080 > info2 &\r\n  nohup dgraph-ratel > info3 &\r\n\r\n- Expected behaviour and actual result.\r\n   i added some edge attributes on some predicates like friend_type, friend_type is a enum, values: 0, 1 , 2 , 3, 4 etc  and i want to know the number in each friend_type, is there any operations like groupby can be used in facets? glad to get your reply.\r\n\r\nthanks\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2436","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2436/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2436/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2436/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2436","id":331005680,"node_id":"MDU6SXNzdWUzMzEwMDU2ODA=","number":2436,"title":"duplicate data available on 000000.vlog for \"updated records\"","user":{"login":"rebootcode","id":9850427,"node_id":"MDQ6VXNlcjk4NTA0Mjc=","avatar_url":"https://avatars1.githubusercontent.com/u/9850427?v=4","gravatar_id":"","url":"https://api.github.com/users/rebootcode","html_url":"https://github.com/rebootcode","followers_url":"https://api.github.com/users/rebootcode/followers","following_url":"https://api.github.com/users/rebootcode/following{/other_user}","gists_url":"https://api.github.com/users/rebootcode/gists{/gist_id}","starred_url":"https://api.github.com/users/rebootcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rebootcode/subscriptions","organizations_url":"https://api.github.com/users/rebootcode/orgs","repos_url":"https://api.github.com/users/rebootcode/repos","events_url":"https://api.github.com/users/rebootcode/events{/privacy}","received_events_url":"https://api.github.com/users/rebootcode/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-10T21:52:04Z","updated_at":"2018-06-11T01:40:44Z","closed_at":"2018-06-11T01:40:30Z","author_association":"NONE","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\n1.0.5\r\n\r\n- Have you tried reproducing the issue with latest release?\r\nyes\r\n\r\n- What is the hardware spec (RAM, OS)?\r\n8GM Ram, MacOS\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\nCreate a data and Update the data value\r\n\r\n- Expected behaviour and actual result.\r\nNo duplicate content and old data\r\n\r\nI have found lots of \"duplicate content\" on 000000.vlog while, I checked the size and content inside it.\r\n\r\nI created a `post` using dgraph client and updated the content of it's one of the predicate. While looking at content inside the `000000.vlog` file, I found, each update \"I\" do is stored inside `vlog` file with out removing the old data - making the file size bigger and bigger.\r\n\r\nAt below screenshot you can see, I had some value for my predicate `tags`\r\n\r\n`artificial-intelligence api machine-learning tensor-flow` and than I updated it to `artificial-intelligence api machine-learning` and `vlog` file has both data stored in it.\r\n\r\nFirst, it should not be there, old data should have been gone or replaced with new value, when update was made.\r\n\r\nSecond, If dgraph keeps/stores the old data, than why it is not available for fetch? ( if it's there, it should be available to retrieve back )\r\n\r\n![dgraph issue](http://prublem.com/files/yo3wmlzb2az.png)","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2434","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2434/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2434/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2434/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2434","id":330565107,"node_id":"MDU6SXNzdWUzMzA1NjUxMDc=","number":2434,"title":"dgraph live: Error while mutating While proposing to RAFT group, err: context deadline exceeded","user":{"login":"QianchaoLiu","id":6898722,"node_id":"MDQ6VXNlcjY4OTg3MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/6898722?v=4","gravatar_id":"","url":"https://api.github.com/users/QianchaoLiu","html_url":"https://github.com/QianchaoLiu","followers_url":"https://api.github.com/users/QianchaoLiu/followers","following_url":"https://api.github.com/users/QianchaoLiu/following{/other_user}","gists_url":"https://api.github.com/users/QianchaoLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/QianchaoLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QianchaoLiu/subscriptions","organizations_url":"https://api.github.com/users/QianchaoLiu/orgs","repos_url":"https://api.github.com/users/QianchaoLiu/repos","events_url":"https://api.github.com/users/QianchaoLiu/events{/privacy}","received_events_url":"https://api.github.com/users/QianchaoLiu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-08T08:25:33Z","updated_at":"2018-06-12T20:16:09Z","closed_at":"2018-06-12T20:15:51Z","author_association":"NONE","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\n\r\nDgraph version   : v1.0.5\r\nCommit SHA-1     : 82787414\r\nCommit timestamp : 2018-04-20 15:50:53 +1000\r\nBranch           : HEAD\r\n\r\n- Have you tried reproducing the issue with latest release?\r\n\r\n\r\n- What is the hardware spec (RAM, OS)?\r\nUbuntu 17, RAM 128G\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n\r\n`dgraph live -r relationship.rdf --zero localhost:5080`\r\n\r\n- Expected behaviour and actual result.\r\n\r\n```\r\nTotal Txns done:       38 RDFs per second:      43 Time Elapsed: 14m36s, Aborts: 176\r\n2018/06/08 16:23:56 batch.go:125: Error while mutating While proposing to RAFT group, err: context deadline exceeded\r\n2018/06/08 16:23:56 batch.go:125: Error while mutating While proposing to RAFT group, err: context deadline exceeded\r\nTotal Txns done:       38 RDFs per second:      43 Time Elapsed: 14m38s, Aborts: 178\r\n2018/06/08 16:23:57 batch.go:125: Error while mutating While proposing to RAFT group, err: context deadline exceeded\r\nTotal Txns done:       38 RDFs per second:      43 Time Elapsed: 14m40s, Aborts: 179\r\nTotal Txns done:       38 RDFs per second:      43 Time Elapsed: 14m42s, Aborts: 179\r\n```\r\n\r\nError raised as `Error while mutating While proposing to RAFT group, err: context deadline exceeded` during batch mutation using `dgraph live`. \r\n\r\n### My questions\r\n- what does this error mean? \r\n- what dose the term `aborts` mean?","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2432","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2432/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2432/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2432/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2432","id":330418296,"node_id":"MDU6SXNzdWUzMzA0MTgyOTY=","number":2432,"title":" bulk import error: too many open files","user":{"login":"jsihota","id":2893686,"node_id":"MDQ6VXNlcjI4OTM2ODY=","avatar_url":"https://avatars1.githubusercontent.com/u/2893686?v=4","gravatar_id":"","url":"https://api.github.com/users/jsihota","html_url":"https://github.com/jsihota","followers_url":"https://api.github.com/users/jsihota/followers"
8000
,"following_url":"https://api.github.com/users/jsihota/following{/other_user}","gists_url":"https://api.github.com/users/jsihota/gists{/gist_id}","starred_url":"https://api.github.com/users/jsihota/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsihota/subscriptions","organizations_url":"https://api.github.com/users/jsihota/orgs","repos_url":"https://api.github.com/users/jsihota/repos","events_url":"https://api.github.com/users/jsihota/events{/privacy}","received_events_url":"https://api.github.com/users/jsihota/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-06-07T20:10:30Z","updated_at":"2018-06-15T21:03:57Z","closed_at":"2018-06-14T02:06:08Z","author_association":"NONE","body":"How to bulk import when setup dgraph using following kubernetes yaml https://github.com/dgraph-io/dgraph/blob/master/contrib/config/kubernetes/dgraph-multi.yaml\r\n\r\n1. Do I need to stop the 3 servers then copy mapped file to each server?\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2431","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2431/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2431/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2431/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2431","id":330152167,"node_id":"MDU6SXNzdWUzMzAxNTIxNjc=","number":2431,"title":"uid variable behaviour unexpected","user":{"login":"xinstein","id":10842079,"node_id":"MDQ6VXNlcjEwODQyMDc5","avatar_url":"https://avatars3.githubusercontent.com/u/10842079?v=4","gravatar_id":"","url":"https://api.github.com/users/xinstein","html_url":"https://github.com/xinstein","followers_url":"https://api.github.com/users/xinstein/followers","following_url":"https://api.github.com/users/xinstein/following{/other_user}","gists_url":"https://api.github.com/users/xinstein/gists{/gist_id}","starred_url":"https://api.github.com/users/xinstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinstein/subscriptions","organizations_url":"https://api.github.com/users/xinstein/orgs","repos_url":"https://api.github.com/users/xinstein/repos","events_url":"https://api.github.com/users/xinstein/events{/privacy}","received_events_url":"https://api.github.com/users/xinstein/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-07T07:37:15Z","updated_at":"2018-06-12T19:22:58Z","closed_at":"2018-06-12T19:21:31Z","author_association":"NONE","body":"I have 3 kinds of nodes: miid node, dev node and login node. \r\n2 kinds of edges: miid <miid.login> login; dev <dev.login> login. BOTH have reverse edges.\r\n \r\nin fact it is in essence simply miid <login> dev. Making login as nodes facilitates indexing on the login properties.\r\n\r\nNow starting with a set of miids, I want to find the subset of miids which have a common logged-in device with at least another miid on the starting set, along with the devices that connects them.\r\n{\r\n  startingset as var(func: has(miid.ovd_level.3))\r\n    \r\n  quer(func: uid(startingset))  @ignorereflex @cascade{\r\n    miid.login{\r\n       ~dev.login @filter(lt(count(dev.login), 100) ){\r\n           dev.login{\r\n                ~miid.login @filter(uid(startingset)){\r\n                      destmiids as miid: miid.miid\r\n    \t\t      ovdmd: miid.ovd_max_days\r\n                 }\r\n            }\r\n         }\r\n      }\r\n  }\r\n    \r\n    ctt(func: uid(destmiids)){\r\n      count(uid)\r\n    }\r\n}\r\n\r\nThe return graph of this query well fits my need, but I can't understand the result of the count(uid) in  ctt, which is much bigger than the number of returned nodes yet a bit smaller than the total number of miids in the starting set.","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2425","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2425/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2425/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2425/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2425","id":328707688,"node_id":"MDU6SXNzdWUzMjg3MDc2ODg=","number":2425,"title":"Does it make sense to run multiple servers on a single host?","user":{"login":"xinstein","id":10842079,"node_id":"MDQ6VXNlcjEwODQyMDc5","avatar_url":"https://avatars3.githubusercontent.com/u/10842079?v=4","gravatar_id":"","url":"https://api.github.com/users/xinstein","html_url":"https://github.com/xinstein","followers_url":"https://api.github.com/users/xinstein/followers","following_url":"https://api.github.com/users/xinstein/following{/other_user}","gists_url":"https://api.github.com/users/xinstein/gists{/gist_id}","starred_url":"https://api.github.com/users/xinstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinstein/subscriptions","organizations_url":"https://api.github.com/users/xinstein/orgs","repos_url":"https://api.github.com/users/xinstein/repos","events_url":"https://api.github.com/users/xinstein/events{/privacy}","received_events_url":"https://api.github.com/users/xinstein/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-02T03:05:00Z","updated_at":"2018-06-04T16:13:22Z","closed_at":"2018-06-04T16:13:22Z","author_association":"NONE","body":"I currently run one zero and one server on one host,\r\nI can see that most of the time this server instance doesn't consume much cpu power, I'm wondering if increasing the number of server instances could help make more use of available cpu.\r\n\r\nTo be specific which one is more performant: a single server instance with 32GB lru ? or two server instances with 16GB lru each, no replicas.","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2424","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2424/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2424/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2424/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2424","id":328621548,"node_id":"MDU6SXNzdWUzMjg2MjE1NDg=","number":2424,"title":"During replication server consumes all RAM and crashes","user":{"login":"selmeci","id":224795,"node_id":"MDQ6VXNlcjIyNDc5NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/224795?v=4","gravatar_id":"","url":"https://api.github.com/users/selmeci","html_url":"https://github.com/selmeci","followers_url":"https://api.github.com/users/selmeci/followers","following_url":"https://api.github.com/users/selmeci/following{/other_user}","gists_url":"https://api.github.com/users/selmeci/gists{/gist_id}","starred_url":"https://api.github.com/users/selmeci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/selmeci/subscriptions","organizations_url":"https://api.github.com/users/selmeci/orgs","repos_url":"https://api.github.com/users/selmeci/repos","events_url":"https://api.github.com/users/selmeci/events{/privacy}","received_events_url":"https://api.github.com/users/selmeci/received_events","type":"User","site_admin":false},"labels":[{"id":252336064,"node_id":"MDU6TGFiZWwyNTIzMzYwNjQ=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/bug","name":"bug","color":"fc2929","default":true},{"id":935537601,"node_id":"MDU6TGFiZWw5MzU1Mzc2MDE=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/verify-fix","name":"verify-fix","color":"aafc9c","default":false}],"state":"closed","locked":false,"assignee":{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false},"assignees":[{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false}],"milestone":null,"comments":35,"created_at":"2018-06-01T18:41:37Z","updated_at":"2018-06-20T19:58:03Z","closed_at":"2018-06-19T23:21:39Z","author_association":"NONE","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\ndocker dgraph/dgraph:v1.0.5\r\n\r\n\r\n- Have you tried reproducing the issue with latest release?\r\nYes, I tried it on dgraph/dgraph:master\r\n\r\n\r\n- What is the hardware spec (RAM, OS)?\r\nI run kubernetes cluster on AWS. Instance is m5.xlarge with 16 GB of RAM and 250 SSD HD\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n1. Start kubernetes cluster with configuration:\r\n```yaml\r\n# There are 4 public services exposed, users can use:\r\n#       dgraph-zero-public - To load data using Live & Bulk Loaders\r\n#       dgraph-server-public - To connect clients and for HTTP APIs\r\n#       dgraph-ratel-public - For Dgraph UI\r\n#       dgraph-server-x-http-public - Use for debugging & profiling\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: dgraph-zero-public\r\n  labels:\r\n    app: dgraph-zero\r\nspec:\r\n  type: LoadBalancer\r\n  ports:\r\n  - port: 5080\r\n    targetPort: 5080\r\n    name: zero-grpc\r\n  - port: 6080\r\n    targetPort: 6080\r\n    name: zero-http\r\n  selector:\r\n    app: dgraph-zero\r\n---\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: dgraph-server-public\r\n  labels:\r\n    app: dgraph-server\r\nspec:\r\n  type: LoadBalancer\r\n  ports:\r\n  - port: 8080\r\n    targetPort: 8080\r\n    name: server-http\r\n  - port: 9080\r\n    targetPort: 9080\r\n    name: server-grpc\r\n  selector:\r\n    app: dgraph-server\r\n---\r\n# This service is created in-order to debug & profile a specific server.\r\n# You can create one for each server that you need to profile.\r\n# For a more general HTTP APIs use the above service instead.\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: dgraph-ratel-public\r\n  labels:\r\n    app: dgraph-ratel\r\nspec:\r\n  type: NodePort\r\n  ports:\r\n  - port: 8000\r\n    targetPort: 8000\r\n    name: ratel-http\r\n  selector:\r\n    app: dgraph-ratel\r\n---\r\n# This is a headless service which is neccessary for discovery for a dgraph-zero StatefulSet.\r\n# https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/#creating-a-statefulset\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: dgraph-zero\r\n  labels:\r\n    app: dgraph-zero\r\nspec:\r\n  ports:\r\n  - port: 5080\r\n    targetPort: 5080\r\n    name: zero-grpc\r\n  clusterIP: None\r\n  selector:\r\n    app: dgraph-zero\r\n---\r\n# This is a headless service which is neccessary for discovery for a dgraph-server StatefulSet.\r\n# https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/#creating-a-statefulset\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: dgraph-server\r\n  labels:\r\n    app: dgraph-server\r\nspec:\r\n  ports:\r\n  - port: 7080\r\n    targetPort: 7080\r\n    name: server-grpc-int\r\n  clusterIP: None\r\n  selector:\r\n    app: dgraph-server\r\n---\r\n# This StatefulSet runs 3 Dgraph Zero.\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: dgraph-zero\r\nspec:\r\n  serviceName: \"dgraph-zero\"\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: dgraph-zero\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: dgraph-zero\r\n    spec:\r\n      affinity:\r\n        podAntiAffinity:\r\n          preferredDuringSchedulingIgnoredDuringExecution:\r\n          - weight: 100\r\n            podAffinityTerm:\r\n              labelSelector:\r\n                matchExpressions:\r\n                - key: app\r\n                  operator: In\r\n                  values:\r\n                  - dgraph-zero\r\n              topologyKey: kubernetes.io/hostname\r\n      containers:\r\n      - name: zero\r\n        image: dgraph/dgraph:latest\r\n        imagePullPolicy: IfNotPresent\r\n        ports:\r\n        - containerPort: 5080\r\n          name: zero-grpc\r\n        - containerPort: 6080\r\n          name: zero-http\r\n        volumeMounts:\r\n        - name: datadir\r\n          mountPath: /dgraph\r\n        command:\r\n          - bash\r\n          - \"-c\"\r\n          - |\r\n            set -ex\r\n            [[ `hostname` =~ -([0-9]+)$ ]] || exit 1\r\n            ordinal=${BASH_REMATCH[1]}\r\n            idx=$(($ordinal + 1))\r\n            if [[ $ordinal -eq 0 ]]; then\r\n              dgraph zero --my=$(hostname -f):5080 --idx $idx --replicas 3\r\n            else\r\n              dgraph zero --my=$(hostname -f):5080 --peer dgraph-zero-0.dgraph-zero.default.svc.cluster.local:5080 --idx $idx --replicas 3\r\n            fi\r\n      terminationGracePeriodSeconds: 60\r\n      volumes:\r\n      - name: datadir\r\n        persistentVolumeClaim:\r\n          claimName: datadir\r\n  updateStrategy:\r\n    type: RollingUpdate\r\n  volumeClaimTemplates:\r\n  - metadata:\r\n      name: datadir\r\n      annotations:\r\n        volume.alpha.kubernetes.io/storage-class: anything\r\n    spec:\r\n      accessModes:\r\n        - \"ReadWriteOnce\"\r\n      resources:\r\n        requests:\r\n          storage: 5Gi\r\n---\r\n# This StatefulSet runs 6 Dgraph Server forming two server groups, 3 servers in each group.\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: dgraph-server\r\nspec:\r\n  serviceName: \"dgraph-server\"\r\n  replicas: 0\r\n  selector:\r\n    matchLabels:\r\n      app: dgraph-server\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: dgraph-server\r\n    spec:\r\n      affinity:\r\n        podAntiAffinity:\r\n          preferredDuringSchedulingIgnoredDuringExecution:\r\n          - weight: 100\r\n            podAffinityTerm:\r\n              labelSelector:\r\n                matchExpressions:\r\n                - key: app\r\n                  operator: In\r\n                  values:\r\n                  - dgraph-server\r\n              topologyKey: kubernetes.io/hostname\r\n      containers:\r\n      - name: server\r\n        image: dgraph/dgraph:latest\r\n        imagePullPolicy: IfNotPresent\r\n        ports:\r\n        - containerPort: 7080\r\n          name: server-grpc-int\r\n        - containerPort: 8080\r\n          name: server-http\r\n        - containerPort: 9080\r\n          name: server-grpc\r\n        volumeMounts:\r\n        - name: datadir\r\n          mountPath: /dgraph\r\n        command:\r\n          - bash\r\n          - \"-c\"\r\n          - |\r\n            set -ex\r\n            dgraph server --my=$(hostname -f):7080 --lru_mb 4096 --zero dgraph-zero-0.dgraph-zero.default.svc.cluster.local:5080\r\n      terminationGracePeriodSeconds: 60\r\n      volumes:\r\n      - name: datadir\r\n        persistentVolumeClaim:\r\n          claimName: datadir\r\n  updateStrategy:\r\n    type: RollingUpdate\r\n  volumeClaimTemplates:\r\n  - metadata:\r\n      name: datadir\r\n      annotations:\r\n        volume.alpha.kubernetes.io/storage-class: anything\r\n    spec:\r\n      accessModes:\r\n        - \"ReadWriteOnce\"\r\n      resources:\r\n        requests:\r\n          storage: 250Gi\r\n---\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: dgraph-ratel\r\n  labels:\r\n    app: dgraph-ratel\r\nspec:\r\n  selector:\r\n    matchLabels:\r\n      app: dgraph-ratel\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: dgraph-ratel\r\n    spec:\r\n      containers:\r\n      - name: ratel\r\n        image: dgraph/dgraph:latest\r\n        ports:\r\n        - containerPort: 8000\r\n        command:\r\n          - dgraph-ratel\r\n```\r\n\r\n2. When cluster is ready, I start `dgraph bulk` on separate machine with 32 GB of RAM.\r\nBulk process is connected to k8s zero server and finish with\r\n```\r\nMAP 01h34m47s rdf_count:465.1M rdf_speed:81.77k/sec edge_count:1.560G edge_speed:274.4k/sec\r\n...\r\nREDUCE 03h11m37s [100.00%] edge_count:1.560G edge_speed:268.7k/sec plist_count:641.3M plist_speed:110.4k/sec\r\n```\r\nIt produce about 111 GB.\r\n\r\n3. I create k8s PVC SSD HDD (250 GB) for dgraph server 0 and copy bulk data on it.\r\n4. Setup replication count for dgraph server to 1.\r\n5. Wait for boot on.\r\n```\r\nkubectl logs -f dgraph-server-0\r\n++ hostname -f\r\n+ dgraph server --my=dgraph-server-0.dgraph-server.default.svc.cluster.local:7080 --lru_mb 4096 --zero dgraph-zero-0.dgraph-zero.default.svc.cluster.local:5080\r\n2018/06/01 13:28:24 worker.go:89: Worker listening at address: [::]:7080\r\n2018/06/01 13:28:24 gRPC server started.  Listening on port 9080\r\n2018/06/01 13:28:24 HTTP server started.  Listening on port 8080\r\n2018/06/01 13:28:24 groups.go:78: Current Raft Id: 0\r\n2018/06/01 13:28:25 pool.go:108: == CONNECT ==> Setting dgraph-zero-0.dgraph-zero.default.svc.cluster.local:5080\r\n2018/06/01 13:28:25 groups.go:105: Connected to group zero. Assigned group: 1\r\n2018/06/01 13:28:25 draft.go:170: Node ID: 1 with GroupID: 1\r\n2018/06/01 13:28:25 node.go:240: Group 1 found 0 entries\r\n2018/06/01 13:28:25 draft.go:937: New Node for group: 1\r\n2018/06/01 13:28:25 raft.go:567: INFO: 1 became follower at term 0\r\n2018/06/01 13:28:25 raft.go:315: INFO: newRaft 1 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]\r\n2018/06/01 13:28:25 raft.go:567: INFO: 1 became follower at term 1\r\n2018/06/01 13:28:25 node.go:118: Setting conf state to nodes:1 \r\n2018/06/01 13:28:25 raft.go:749: INFO: 1 is starting a new election at term 1\r\n2018/06/01 13:28:25 groups.go:346: Serving tablet for: _predicate_\r\n2018/06/01 13:28:25 raft.go:580: INFO: 1 became candidate at term 2\r\n2018/06/01 13:28:25 raft.go:664: INFO: 1 received MsgVoteResp from 1 at term 2\r\n2018/06/01 13:28:25 raft.go:621: INFO: 1 became leader at term 2\r\n2018/06/01 13:28:25 node.go:301: INFO: raft.node: 1 elected leader 1 at term 2\r\n2018/06/01 13:28:25 groups.go:346: Serving tablet for: at\r\n2018/06/01 13:28:25 mutation.go:181: Done schema update predicate:\"_predicate_\" value_type:STRING list:true \r\n2018/06/01 13:28:25 groups.go:346: Serving tablet for: in\r\n2018/06/01 13:28:25 groups.go:346: Serving tablet for: count\r\n...\r\nhundred of predicates\r\n...\r\n2018/06/01 13:35:07 groups.go:346: Serving tablet for: user.selected.organization\r\n2018/06/01 13:35:07 groups.go:346: Serving tablet for: user.preferred.organization\r\n2018/06/01 13:35:07 groups.go:346: Serving tablet for: notification.occurrence.date\r\n2018/06/01 13:35:07 groups.go:346: Serving tablet for: dummy\r\n```\r\n\r\nServer is responding and everything looks good.\r\n\r\n6. Replicas count do dgraph server is set on 2. Snapshot is sending:\r\n```\r\n2018/06/01 15:12:45 raft.go:749: INFO: 1 is starting a new election at term 2\r\n2018/06/01 15:12:45 raft.go:580: INFO: 1 became candidate at term 3\r\n2018/06/01 15:12:45 raft.go:664: INFO: 1 received MsgVoteResp from 1 at term 3\r\n2018/06/01 15:12:45 raft.go:621: INFO: 1 became leader at term 3\r\n2018/06/01 15:12:45 node.go:301: INFO: raft.node: 1 elected leader 1 at term 3\r\n2018/06/01 17:45:11 pool.go:158: Echo error from dgraph-server-1.dgraph-server.default.svc.cluster.local:7080. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure\r\n2018/06/01 17:45:11 pool.go:108: == CONNECT ==> Setting dgraph-server-1.dgraph-server.default.svc.cluster.local:7080\r\n2018/06/01 17:45:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05s, bytes sent: 22 MB, bytes/sec 4393253\r\n2018/06/01 17:45:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10s, bytes sent: 44 MB, bytes/sec 4449208\r\n2018/06/01 17:45:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15s, bytes sent: 66 MB, bytes/sec 4404129\r\n2018/06/01 17:45:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20s, bytes sent: 88 MB, bytes/sec 4381694\r\n2018/06/01 17:45:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25s, bytes sent: 110 MB, bytes/sec 4391688\r\n2018/06/01 17:45:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30s, bytes sent: 131 MB, bytes/sec 4377680\r\n2018/06/01 17:45:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 35s, bytes sent: 152 MB, bytes/sec 4347668\r\n2018/06/01 17:45:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 40s, bytes sent: 174 MB, bytes/sec 4358675\r\n2018/06/01 17:45:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 45s, bytes sent: 194 MB, bytes/sec 4318528\r\n2018/06/01 17:46:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 50s, bytes sent: 216 MB, bytes/sec 4320323\r\n2018/06/01 17:46:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 55s, bytes sent: 237 MB, bytes/sec 4301221\r\n2018/06/01 17:46:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m00s, bytes sent: 257 MB, bytes/sec 4282766\r\n2018/06/01 17:46:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m05s, bytes sent: 279 MB, bytes/sec 4288907\r\n2018/06/01 17:46:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m10s, bytes sent: 299 MB, bytes/sec 4266223\r\n2018/06/01 17:46:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m15s, bytes sent: 321 MB, bytes/sec 4276578\r\n2018/06/01 17:46:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m20s, bytes sent: 340 MB, bytes/sec 4255449\r\n2018/06/01 17:46:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m25s, bytes sent: 362 MB, bytes/sec 4253578\r\n2018/06/01 17:46:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m30s, bytes sent: 383 MB, bytes/sec 4251331\r\n2018/06/01 17:46:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m35s, bytes sent: 402 MB, bytes/sec 4229044\r\n2018/06/01 17:46:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m40s, bytes sent: 423 MB, bytes/sec 4234240\r\n2018/06/01 17:46:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m45s, bytes sent: 445 MB, bytes/sec 4235367\r\n2018/06/01 17:47:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m50s, bytes sent: 463 MB, bytes/sec 4208357\r\n2018/06/01 17:47:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m55s, bytes sent: 484 MB, bytes/sec 4205258\r\n2018/06/01 17:47:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m00s, bytes sent: 505 MB, bytes/sec 4208297\r\n2018/06/01 17:47:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m05s, bytes sent: 524 MB, bytes/sec 4193215\r\n2018/06/01 17:47:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m10s, bytes sent: 543 MB, bytes/sec 4179465\r\n2018/06/01 17:47:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m15s, bytes sent: 564 MB, bytes/sec 4177842\r\n2018/06/01 17:47:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m20s, bytes sent: 584 MB, bytes/sec 4169674\r\n2018/06/01 17:47:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m25s, bytes sent: 604 MB, bytes/sec 4162970\r\n2018/06/01 17:47:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m30s, bytes sent: 622 MB, bytes/sec 4143588\r\n2018/06/01 17:47:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m35s, bytes sent: 642 MB, bytes/sec 4140368\r\n2018/06/01 17:47:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m40s, bytes sent: 661 MB, bytes/sec 4133150\r\n2018/06/01 17:47:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m45s, bytes sent: 681 MB, bytes/sec 4124900\r\n2018/06/01 17:48:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m50s, bytes sent: 701 MB, bytes/sec 4121609\r\n2018/06/01 17:48:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m55s, bytes sent: 717 MB, bytes/sec 4097400\r\n2018/06/01 17:48:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m00s, bytes sent: 736 MB, bytes/sec 4088239\r\n2018/06/01 17:48:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m05s, bytes sent: 756 MB, bytes/sec 4084180\r\n2018/06/01 17:48:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m10s, bytes sent: 774 MB, bytes/sec 4072266\r\n2018/06/01 17:48:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m15s, bytes sent: 791 MB, bytes/sec 4055813\r\n2018/06/01 17:48:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m19s, bytes sent: 811 MB, bytes/sec 4073739\r\n2018/06/01 17:48:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m25s, bytes sent: 830 MB, bytes/sec 4050333\r\n2018/06/01 17:48:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m30s, bytes sent: 850 MB, bytes/sec 4046088\r\n2018/06/01 17:48:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m35s, bytes sent: 869 MB, bytes/sec 4043575\r\n2018/06/01 17:48:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m40s, bytes sent: 886 MB, bytes/sec 4025607\r\n2018/06/01 17:48:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m45s, bytes sent: 902 MB, bytes/sec 4011002\r\n2018/06/01 17:49:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m50s, bytes sent: 921 MB, bytes/sec 4004382\r\n2018/06/01 17:49:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m55s, bytes sent: 939 MB, bytes/sec 3997608\r\n2018/06/01 17:49:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m00s, bytes sent: 958 MB, bytes/sec 3991401\r\n2018/06/01 17:49:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m05s, bytes sent: 977 MB, bytes/sec 3986740\r\n2018/06/01 17:49:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m10s, bytes sent: 996 MB, bytes/sec 3982052\r\n2018/06/01 17:49:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m15s, bytes sent: 1.0 GB, bytes/sec 3977189\r\n2018/06/01 17:49:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m20s, bytes sent: 1.0 GB, bytes/sec 3973324\r\n2018/06/01 17:49:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m25s, bytes sent: 1.1 GB, bytes/sec 3970729\r\n2018/06/01 17:49:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m30s, bytes sent: 1.1 GB, bytes/sec 3968236\r\n2018/06/01 17:49:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m35s, bytes sent: 1.1 GB, bytes/sec 3965634\r\n2018/06/01 17:49:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m40s, bytes sent: 1.1 GB, bytes/sec 3962986\r\n2018/06/01 17:49:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m45s, bytes sent: 1.1 GB, bytes/sec 3950007\r\n2018/06/01 17:50:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m50s, bytes sent: 1.1 GB, bytes/sec 3949570\r\n2018/06/01 17:50:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m55s, bytes sent: 1.2 GB, bytes/sec 3948760\r\n2018/06/01 17:50:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m00s, bytes sent: 1.2 GB, bytes/sec 3943994\r\n2018/06/01 17:50:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m05s, bytes sent: 1.2 GB, bytes/sec 3938128\r\n2018/06/01 17:50:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m10s, bytes sent: 1.2 GB, bytes/sec 3931558\r\n2018/06/01 17:50:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m15s, bytes sent: 1.2 GB, bytes/sec 3927464\r\n2018/06/01 17:50:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m20s, bytes sent: 1.3 GB, bytes/sec 3924201\r\n2018/06/01 17:50:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m25s, bytes sent: 1.3 GB, bytes/sec 3919021\r\n2018/06/01 17:50:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m30s, bytes sent: 1.3 GB, bytes/sec 3913088\r\n2018/06/01 17:50:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m35s, bytes sent: 1.3 GB, bytes/sec 3908579\r\n2018/06/01 17:50:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m40s, bytes sent: 1.3 GB, bytes/sec 3901949\r\n2018/06/01 17:50:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m45s, bytes sent: 1.3 GB, bytes/sec 3895386\r\n2018/06/01 17:51:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m50s, bytes sent: 1.4 GB, bytes/sec 3890055\r\n2018/06/01 17:51:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m55s, bytes sent: 1.4 GB, bytes/sec 3890257\r\n2018/06/01 17:51:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m00s, bytes sent: 1.4 GB, bytes/sec 3881119\r\n2018/06/01 17:51:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m05s, bytes sent: 1.4 GB, bytes/sec 3883889\r\n2018/06/01 17:51:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m10s, bytes sent: 1.4 GB, bytes/sec 3878649\r\n2018/06/01 17:51:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m15s, bytes sent: 1.4 GB, bytes/sec 3862716\r\n2018/06/01 17:51:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m20s, bytes sent: 1.5 GB, bytes/sec 3857627\r\n2018/06/01 17:51:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m25s, bytes sent: 1.5 GB, bytes/sec 3850813\r\n2018/06/01 17:51:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m30s, bytes sent: 1.5 GB, bytes/sec 3848179\r\n2018/06/01 17:51:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m35s, bytes sent: 1.5 GB, bytes/sec 3852186\r\n2018/06/01 17:51:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m40s, bytes sent: 1.5 GB, bytes/sec 3847207\r\n2018/06/01 17:51:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m45s, bytes sent: 1.6 GB, bytes/sec 3839918\r\n2018/06/01 17:52:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m50s, bytes sent: 1.6 GB, bytes/sec 3830104\r\n2018/06/01 17:52:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 06m55s, bytes sent: 1.6 GB, bytes/sec 3824781\r\n2018/06/01 17:52:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m00s, bytes sent: 1.6 GB, bytes/sec 3827268\r\n2018/06/01 17:52:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m05s, bytes sent: 1.6 GB, bytes/sec 3823951\r\n2018/06/01 17:52:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m10s, bytes sent: 1.6 GB, bytes/sec 3814258\r\n2018/06/01 17:52:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m15s, bytes sent: 1.7 GB, bytes/sec 3807813\r\n2018/06/01 17:52:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m20s, bytes sent: 1.7 GB, bytes/sec 3796504\r\n2018/06/01 17:52:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m25s, bytes sent: 1.7 GB, bytes/sec 3801479\r\n2018/06/01 17:52:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m30s, bytes sent: 1.7 GB, bytes/sec 3797149\r\n2018/06/01 17:52:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m35s, bytes sent: 1.7 GB, bytes/sec 3784648\r\n2018/06/01 17:52:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m40s, bytes sent: 1.7 GB, bytes/sec 3776229\r\n2018/06/01 17:52:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m45s, bytes sent: 1.8 GB, bytes/sec 3770879\r\n2018/06/01 17:53:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m50s, bytes sent: 1.8 GB, bytes/sec 3775632\r\n2018/06/01 17:53:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 07m55s, bytes sent: 1.8 GB, bytes/sec 3767350\r\n2018/06/01 17:53:11 predicate.go:250: Sending SNA
8000
PSHOT: Time elapsed: 08m00s, bytes sent: 1.8 GB, bytes/sec 3758027\r\n2018/06/01 17:53:19 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m07s, bytes sent: 1.8 GB, bytes/sec 3744498\r\n2018/06/01 17:53:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m10s, bytes sent: 1.8 GB, bytes/sec 3721572\r\n2018/06/01 17:53:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m15s, bytes sent: 1.9 GB, bytes/sec 3780391\r\n2018/06/01 17:53:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m19s, bytes sent: 1.9 GB, bytes/sec 3861983\r\n2018/06/01 17:53:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m25s, bytes sent: 1.9 GB, bytes/sec 3860727\r\n2018/06/01 17:53:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m30s, bytes sent: 2.0 GB, bytes/sec 3855591\r\n2018/06/01 17:53:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m35s, bytes sent: 2.0 GB, bytes/sec 3848487\r\n2018/06/01 17:53:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m40s, bytes sent: 2.0 GB, bytes/sec 3841572\r\n2018/06/01 17:53:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m45s, bytes sent: 2.0 GB, bytes/sec 3847627\r\n2018/06/01 17:54:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m50s, bytes sent: 2.0 GB, bytes/sec 3841937\r\n2018/06/01 17:54:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 08m55s, bytes sent: 2.1 GB, bytes/sec 3835490\r\n2018/06/01 17:54:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m00s, bytes sent: 2.1 GB, bytes/sec 3838153\r\n2018/06/01 17:54:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m05s, bytes sent: 2.1 GB, bytes/sec 3836492\r\n2018/06/01 17:54:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m10s, bytes sent: 2.1 GB, bytes/sec 3829414\r\n2018/06/01 17:54:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m15s, bytes sent: 2.1 GB, bytes/sec 3822346\r\n2018/06/01 17:54:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m20s, bytes sent: 2.1 GB, bytes/sec 3828629\r\n2018/06/01 17:54:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m25s, bytes sent: 2.2 GB, bytes/sec 3820716\r\n2018/06/01 17:54:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m30s, bytes sent: 2.2 GB, bytes/sec 3812062\r\n2018/06/01 17:54:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m35s, bytes sent: 2.2 GB, bytes/sec 3817085\r\n2018/06/01 17:54:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m40s, bytes sent: 2.2 GB, bytes/sec 3812566\r\n2018/06/01 17:54:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m45s, bytes sent: 2.2 GB, bytes/sec 3804485\r\n2018/06/01 17:55:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m50s, bytes sent: 2.2 GB, bytes/sec 3803759\r\n2018/06/01 17:55:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m55s, bytes sent: 2.3 GB, bytes/sec 3804736\r\n2018/06/01 17:55:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 09m59s, bytes sent: 2.3 GB, bytes/sec 3797506\r\n2018/06/01 17:55:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m05s, bytes sent: 2.3 GB, bytes/sec 3783498\r\n2018/06/01 17:55:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m10s, bytes sent: 2.3 GB, bytes/sec 3790308\r\n2018/06/01 17:55:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m15s, bytes sent: 2.3 GB, bytes/sec 3781984\r\n2018/06/01 17:55:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m20s, bytes sent: 2.3 GB, bytes/sec 3774783\r\n2018/06/01 17:55:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m25s, bytes sent: 2.4 GB, bytes/sec 3777479\r\n2018/06/01 17:55:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m30s, bytes sent: 2.4 GB, bytes/sec 3769624\r\n2018/06/01 17:55:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m35s, bytes sent: 2.4 GB, bytes/sec 3767215\r\n2018/06/01 17:55:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m40s, bytes sent: 2.4 GB, bytes/sec 3770315\r\n2018/06/01 17:55:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m45s, bytes sent: 2.4 GB, bytes/sec 3762009\r\n2018/06/01 17:56:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m50s, bytes sent: 2.4 GB, bytes/sec 3762667\r\n2018/06/01 17:56:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10m55s, bytes sent: 2.5 GB, bytes/sec 3761090\r\n2018/06/01 17:56:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m00s, bytes sent: 2.5 GB, bytes/sec 3751960\r\n2018/06/01 17:56:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m05s, bytes sent: 2.5 GB, bytes/sec 3757080\r\n2018/06/01 17:56:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m10s, bytes sent: 2.5 GB, bytes/sec 3751188\r\n2018/06/01 17:56:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m15s, bytes sent: 2.5 GB, bytes/sec 3743468\r\n2018/06/01 17:56:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m20s, bytes sent: 2.6 GB, bytes/sec 3750871\r\n2018/06/01 17:56:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m25s, bytes sent: 2.6 GB, bytes/sec 3742799\r\n2018/06/01 17:56:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m30s, bytes sent: 2.6 GB, bytes/sec 3738491\r\n2018/06/01 17:56:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m35s, bytes sent: 2.6 GB, bytes/sec 3738602\r\n2018/06/01 17:56:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m40s, bytes sent: 2.6 GB, bytes/sec 3730983\r\n2018/06/01 17:56:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m45s, bytes sent: 2.6 GB, bytes/sec 3735215\r\n2018/06/01 17:57:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m50s, bytes sent: 2.6 GB, bytes/sec 3730017\r\n2018/06/01 17:57:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 11m55s, bytes sent: 2.7 GB, bytes/sec 3721870\r\n2018/06/01 17:57:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m00s, bytes sent: 2.7 GB, bytes/sec 3728146\r\n2018/06/01 17:57:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m05s, bytes sent: 2.7 GB, bytes/sec 3720046\r\n2018/06/01 17:57:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m10s, bytes sent: 2.7 GB, bytes/sec 3715153\r\n2018/06/01 17:57:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m15s, bytes sent: 2.7 GB, bytes/sec 3715948\r\n2018/06/01 17:57:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m20s, bytes sent: 2.7 GB, bytes/sec 3707757\r\n2018/06/01 17:57:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m25s, bytes sent: 2.8 GB, bytes/sec 3711457\r\n2018/06/01 17:57:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m30s, bytes sent: 2.8 GB, bytes/sec 3706027\r\n2018/06/01 17:57:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m35s, bytes sent: 2.8 GB, bytes/sec 3699451\r\n2018/06/01 17:57:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m40s, bytes sent: 2.8 GB, bytes/sec 3703611\r\n2018/06/01 17:57:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m45s, bytes sent: 2.8 GB, bytes/sec 3694715\r\n2018/06/01 17:58:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m50s, bytes sent: 2.8 GB, bytes/sec 3689339\r\n2018/06/01 17:58:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 12m55s, bytes sent: 2.9 GB, bytes/sec 3687580\r\n2018/06/01 17:58:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m00s, bytes sent: 2.9 GB, bytes/sec 3679697\r\n2018/06/01 17:58:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m05s, bytes sent: 2.9 GB, bytes/sec 3685320\r\n2018/06/01 17:58:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m10s, bytes sent: 2.9 GB, bytes/sec 3677117\r\n2018/06/01 17:58:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m15s, bytes sent: 2.9 GB, bytes/sec 3684752\r\n2018/06/01 17:58:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m20s, bytes sent: 2.9 GB, bytes/sec 3676421\r\n2018/06/01 17:58:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m25s, bytes sent: 3.0 GB, bytes/sec 3676760\r\n2018/06/01 17:58:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m30s, bytes sent: 3.0 GB, bytes/sec 3674590\r\n2018/06/01 17:58:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m35s, bytes sent: 3.0 GB, bytes/sec 3668357\r\n2018/06/01 17:58:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m40s, bytes sent: 3.0 GB, bytes/sec 3673005\r\n2018/06/01 17:58:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m45s, bytes sent: 3.0 GB, bytes/sec 3664252\r\n2018/06/01 17:59:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m50s, bytes sent: 3.0 GB, bytes/sec 3670518\r\n2018/06/01 17:59:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 13m55s, bytes sent: 3.1 GB, bytes/sec 3662421\r\n2018/06/01 17:59:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m00s, bytes sent: 3.1 GB, bytes/sec 3666432\r\n2018/06/01 17:59:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m05s, bytes sent: 3.1 GB, bytes/sec 3660437\r\n2018/06/01 17:59:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m10s, bytes sent: 3.1 GB, bytes/sec 3659825\r\n2018/06/01 17:59:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m15s, bytes sent: 3.1 GB, bytes/sec 3657310\r\n2018/06/01 17:59:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m20s, bytes sent: 3.1 GB, bytes/sec 3652183\r\n2018/06/01 17:59:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m25s, bytes sent: 3.2 GB, bytes/sec 3653679\r\n2018/06/01 17:59:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m30s, bytes sent: 3.2 GB, bytes/sec 3645780\r\n2018/06/01 17:59:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m35s, bytes sent: 3.2 GB, bytes/sec 3651923\r\n2018/06/01 17:59:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m40s, bytes sent: 3.2 GB, bytes/sec 3643520\r\n2018/06/01 17:59:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m45s, bytes sent: 3.2 GB, bytes/sec 3650083\r\n2018/06/01 18:00:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m50s, bytes sent: 3.2 GB, bytes/sec 3641529\r\n2018/06/01 18:00:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14m55s, bytes sent: 3.3 GB, bytes/sec 3643243\r\n2018/06/01 18:00:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m00s, bytes sent: 3.3 GB, bytes/sec 3638431\r\n2018/06/01 18:00:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m05s, bytes sent: 3.3 GB, bytes/sec 3636386\r\n2018/06/01 18:00:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m10s, bytes sent: 3.3 GB, bytes/sec 3635220\r\n2018/06/01 18:00:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m15s, bytes sent: 3.3 GB, bytes/sec 3629649\r\n2018/06/01 18:00:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m20s, bytes sent: 3.3 GB, bytes/sec 3632656\r\n2018/06/01 18:00:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m25s, bytes sent: 3.4 GB, bytes/sec 3624341\r\n2018/06/01 18:00:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m30s, bytes sent: 3.4 GB, bytes/sec 3628998\r\n2018/06/01 18:00:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m35s, bytes sent: 3.4 GB, bytes/sec 3619894\r\n2018/06/01 18:00:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m40s, bytes sent: 3.4 GB, bytes/sec 3624584\r\n2018/06/01 18:00:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m45s, bytes sent: 3.4 GB, bytes/sec 3616038\r\n2018/06/01 18:01:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m50s, bytes sent: 3.4 GB, bytes/sec 3621920\r\n2018/06/01 18:01:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 15m55s, bytes sent: 3.5 GB, bytes/sec 3612809\r\n2018/06/01 18:01:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m00s, bytes sent: 3.5 GB, bytes/sec 3615435\r\n2018/06/01 18:01:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m05s, bytes sent: 3.5 GB, bytes/sec 3609578\r\n2018/06/01 18:01:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m10s, bytes sent: 3.5 GB, bytes/sec 3612228\r\n2018/06/01 18:01:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m15s, bytes sent: 3.5 GB, bytes/sec 3606000\r\n2018/06/01 18:01:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m20s, bytes sent: 3.5 GB, bytes/sec 3598348\r\n2018/06/01 18:01:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m25s, bytes sent: 3.5 GB, bytes/sec 3599619\r\n2018/06/01 18:01:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m30s, bytes sent: 3.6 GB, bytes/sec 3595854\r\n2018/06/01 18:01:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m34s, bytes sent: 3.6 GB, bytes/sec 3599083\r\n2018/06/01 18:01:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m40s, bytes sent: 3.6 GB, bytes/sec 3591672\r\n2018/06/01 18:01:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m45s, bytes sent: 3.6 GB, bytes/sec 3592740\r\n2018/06/01 18:02:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m50s, bytes sent: 3.6 GB, bytes/sec 3587499\r\n2018/06/01 18:02:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 16m55s, bytes sent: 3.6 GB, bytes/sec 3589162\r\n2018/06/01 18:02:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m00s, bytes sent: 3.7 GB, bytes/sec 3584319\r\n2018/06/01 18:02:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m05s, bytes sent: 3.7 GB, bytes/sec 3579268\r\n2018/06/01 18:02:24 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m13s, bytes sent: 3.7 GB, bytes/sec 3596038\r\n2018/06/01 18:02:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m15s, bytes sent: 3.8 GB, bytes/sec 3637856\r\n2018/06/01 18:02:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m20s, bytes sent: 3.8 GB, bytes/sec 3631768\r\n2018/06/01 18:02:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m25s, bytes sent: 3.8 GB, bytes/sec 3642069\r\n2018/06/01 18:02:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m30s, bytes sent: 3.8 GB, bytes/sec 3638064\r\n2018/06/01 18:02:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m35s, bytes sent: 3.8 GB, bytes/sec 3640471\r\n2018/06/01 18:02:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m40s, bytes sent: 3.9 GB, bytes/sec 3645572\r\n2018/06/01 18:02:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m45s, bytes sent: 3.9 GB, bytes/sec 3641293\r\n2018/06/01 18:03:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m50s, bytes sent: 3.9 GB, bytes/sec 3650106\r\n2018/06/01 18:03:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 17m55s, bytes sent: 3.9 GB, bytes/sec 3642771\r\n2018/06/01 18:03:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m00s, bytes sent: 3.9 GB, bytes/sec 3650795\r\n2018/06/01 18:03:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m05s, bytes sent: 4.0 GB, bytes/sec 3651665\r\n2018/06/01 18:03:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m10s, bytes sent: 4.0 GB, bytes/sec 3652878\r\n2018/06/01 18:03:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m15s, bytes sent: 4.0 GB, bytes/sec 3656737\r\n2018/06/01 18:03:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m20s, bytes sent: 4.0 GB, bytes/sec 3650280\r\n2018/06/01 18:03:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m25s, bytes sent: 4.0 GB, bytes/sec 3659106\r\n2018/06/01 18:03:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m30s, bytes sent: 4.1 GB, bytes/sec 3652469\r\n2018/06/01 18:03:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m35s, bytes sent: 4.1 GB, bytes/sec 3660269\r\n2018/06/01 18:03:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m40s, bytes sent: 4.1 GB, bytes/sec 3662390\r\n2018/06/01 18:03:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m45s, bytes sent: 4.1 GB, bytes/sec 3662130\r\n2018/06/01 18:04:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m50s, bytes sent: 4.1 GB, bytes/sec 3670620\r\n2018/06/01 18:04:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 18m55s, bytes sent: 4.2 GB, bytes/sec 3662772\r\n2018/06/01 18:04:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m00s, bytes sent: 4.2 GB, bytes/sec 3672566\r\n2018/06/01 18:04:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m05s, bytes sent: 4.2 GB, bytes/sec 3672128\r\n2018/06/01 18:04:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m10s, bytes sent: 4.2 GB, bytes/sec 3673396\r\n2018/06/01 18:04:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m15s, bytes sent: 4.3 GB, bytes/sec 3682707\r\n2018/06/01 18:04:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m20s, bytes sent: 4.3 GB, bytes/sec 3674007\r\n2018/06/01 18:04:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m25s, bytes sent: 4.3 GB, bytes/sec 3678505\r\n2018/06/01 18:04:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m30s, bytes sent: 4.3 GB, bytes/sec 3682463\r\n2018/06/01 18:04:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m35s, bytes sent: 4.3 GB, bytes/sec 3679502\r\n2018/06/01 18:04:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m40s, bytes sent: 4.4 GB, bytes/sec 3687799\r\n2018/06/01 18:04:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m45s, bytes sent: 4.4 GB, bytes/sec 3682375\r\n2018/06/01 18:05:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m50s, bytes sent: 4.4 GB, bytes/sec 3688005\r\n2018/06/01 18:05:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 19m55s, bytes sent: 4.4 GB, bytes/sec 3695026\r\n2018/06/01 18:05:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m00s, bytes sent: 4.4 GB, bytes/sec 3686564\r\n2018/06/01 18:05:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m05s, bytes sent: 4.4 GB, bytes/sec 3691981\r\n2018/06/01 18:05:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m10s, bytes sent: 4.5 GB, bytes/sec 3690294\r\n2018/06/01 18:05:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m15s, bytes sent: 4.5 GB, bytes/sec 3689841\r\n2018/06/01 18:05:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m20s, bytes sent: 4.5 GB, bytes/sec 3694863\r\n2018/06/01 18:05:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m25s, bytes sent: 4.5 GB, bytes/sec 3687340\r\n2018/06/01 18:05:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m30s, bytes sent: 4.5 GB, bytes/sec 3695152\r\n2018/06/01 18:05:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m35s, bytes sent: 4.6 GB, bytes/sec 3699043\r\n2018/06/01 18:05:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m40s, bytes sent: 4.6 GB, bytes/sec 3696077\r\n2018/06/01 18:05:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m45s, bytes sent: 4.6 GB, bytes/sec 3704682\r\n2018/06/01 18:06:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m50s, bytes sent: 4.6 GB, bytes/sec 3697894\r\n2018/06/01 18:06:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20m55s, bytes sent: 4.6 GB, bytes/sec 3700931\r\n2018/06/01 18:06:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m00s, bytes sent: 4.7 GB, bytes/sec 3703253\r\n2018/06/01 18:06:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m05s, bytes sent: 4.7 GB, bytes/sec 3695026\r\n2018/06/01 18:06:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m10s, bytes sent: 4.7 GB, bytes/sec 3701953\r\n2018/06/01 18:06:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m15s, bytes sent: 4.7 GB, bytes/sec 3703324\r\n2018/06/01 18:06:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m20s, bytes sent: 4.7 GB, bytes/sec 3702260\r\n2018/06/01 18:06:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m25s, bytes sent: 4.8 GB, bytes/sec 3710631\r\n2018/06/01 18:06:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m30s, bytes sent: 4.8 GB, bytes/sec 3703069\r\n2018/06/01 18:06:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m35s, bytes sent: 4.8 GB, bytes/sec 3709731\r\n2018/06/01 18:06:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m40s, bytes sent: 4.8 GB, bytes/sec 3713884\r\n2018/06/01 18:06:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m45s, bytes sent: 4.8 GB, bytes/sec 3710874\r\n2018/06/01 18:07:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m50s, bytes sent: 4.9 GB, bytes/sec 3714888\r\n2018/06/01 18:07:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 21m55s, bytes sent: 4.9 GB, bytes/sec 3711779\r\n2018/06/01 18:07:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m00s, bytes sent: 4.9 GB, bytes/sec 3710852\r\n2018/06/01 18:07:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m05s, bytes sent: 4.9 GB, bytes/sec 3718597\r\n2018/06/01 18:07:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m10s, bytes sent: 4.9 GB, bytes/sec 3710743\r\n2018/06/01 18:07:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m15s, bytes sent: 5.0 GB, bytes/sec 3718391\r\n2018/06/01 18:07:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m20s, bytes sent: 5.0 GB, bytes/sec 3720274\r\n2018/06/01 18:07:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m25s, bytes sent: 5.0 GB, bytes/sec 3713716\r\n2018/06/01 18:07:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m30s, bytes sent: 5.0 GB, bytes/sec 3716661\r\n2018/06/01 18:07:57 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m35s, bytes sent: 5.0 GB, bytes/sec 3713399\r\n2018/06/01 18:07:57 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m45s, bytes sent: 5.0 GB, bytes/sec 3686194\r\n2018/06/01 18:07:57 node.go:400: WARN: A tick missed to fire. Node blocks too long!\r\n2018/06/01 18:08:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m50s, bytes sent: 5.0 GB, bytes/sec 3680665\r\n2018/06/01 18:08:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 22m55s, bytes sent: 5.1 GB, bytes/sec 3686765\r\n2018/06/01 18:08:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m00s, bytes sent: 5.1 GB, bytes/sec 3688270\r\n2018/06/01 18:08:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m05s, bytes sent: 5.1 GB, bytes/sec 3681854\r\n2018/06/01 18:08:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m10s, bytes sent: 5.1 GB, bytes/sec 3687864\r\n2018/06/01 18:08:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m15s, bytes sent: 5.1 GB, bytes/sec 3688813\r\n2018/06/01 18:08:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m20s, bytes sent: 5.2 GB, bytes/sec 3685633\r\n2018/06/01 18:08:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m25s, bytes sent: 5.2 GB, bytes/sec 3692948\r\n2018/06/01 18:08:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m30s, bytes sent: 5.2 GB, bytes/sec 3689993\r\n2018/06/01 18:08:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m35s, bytes sent: 5.2 GB, bytes/sec 3691985\r\n2018/06/01 18:08:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m40s, bytes sent: 5.3 GB, bytes/sec 3697662\r\n2018/06/01 18:08:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m45s, bytes sent: 5.3 GB, bytes/sec 3691618\r\n2018/06/01 18:09:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m50s, bytes sent: 5.3 GB, bytes/sec 3696240\r\n2018/06/01 18:09:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 23m55s, bytes sent: 5.3 GB, bytes/sec 3703435\r\n2018/06/01 18:09:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m00s, bytes sent: 5.3 GB, bytes/sec 3694984\r\n2018/06/01 18:09:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m05s, bytes sent: 5.3 GB, bytes/sec 3702277\r\n2018/06/01 18:09:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m10s, bytes sent: 5.4 GB, bytes/sec 3707766\r\n2018/06/01 18:09:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m15s, bytes sent: 5.4 GB, bytes/sec 3701348\r\n2018/06/01 18:09:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m20s, bytes sent: 5.4 GB, bytes/sec 3708834\r\n2018/06/01 18:09:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m25s, bytes sent: 5.4 GB, bytes/sec 3710369\r\n2018/06/01 18:09:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m30s, bytes sent: 5.5 GB, bytes/sec 3708364\r\n2018/06/01 18:09:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m35s, bytes sent: 5.5 GB, bytes/sec 3711508\r\n2018/06/01 18:09:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m40s, bytes sent: 5.5 GB, bytes/sec 3709659\r\n2018/06/01 18:09:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m45s, bytes sent: 5.5 GB, bytes/sec 3709562\r\n2018/06/01 18:10:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m50s, bytes sent: 5.5 GB, bytes/sec 3715472\r\n2018/06/01 18:10:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 24m55s, bytes sent: 5.5 GB, bytes/sec 3709425\r\n2018/06/01 18:10:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m00s, bytes sent: 5.6 GB, bytes/sec 3713845\r\n2018/06/01 18:10:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m05s, bytes sent: 5.6 GB, bytes/sec 3717552\r\n2018/06/01 18:10:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m10s, bytes sent: 5.6 GB, bytes/sec 3709310\r\n2018/06/01 18:10:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m15s, bytes sent: 5.6 GB, bytes/sec 3715326\r\n2018/06/01 18:10:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m20s, bytes sent: 5.7 GB, bytes/sec 3721215\r\n2018/06/01 18:10:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m25s, bytes sent: 5.7 GB, bytes/sec 3713876\r\n2018/06/01 18:10:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m30s, bytes sent: 5.7 GB, bytes/sec 3720092\r\n2018/06/01 18:10:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m35s, bytes sent: 5.7 GB, bytes/sec 3721989\r\n2018/06/01 18:10:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m40s, bytes sent: 5.7 GB, bytes/sec 3718912\r\n2018/06/01 18:10:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m45s, bytes sent: 5.8 GB, bytes/sec 3724028\r\n2018/06/01 18:11:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m50s, bytes sent: 5.8 GB, bytes/sec 3721840\r\n2018/06/01 18:11:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25m55s, bytes sent: 5.8 GB, bytes/sec 3720416\r\n2018/06/01 18:11:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m00s, bytes sent: 5.8 GB, bytes/sec 3727138\r\n2018/06/01 18:11:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m05s, bytes sent: 5.8 GB, bytes/sec 3724077\r\n2018/06/01 18:11:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m10s, bytes sent: 5.8 GB, bytes/sec 3724611\r\n2018/06/01 18:11:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m15s, bytes sent: 5.9 GB, bytes/sec 3731143\r\n2018/06/01 18:11:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m20s, bytes sent: 5.9 GB, bytes/sec 3725705\r\n2018/06/01 18:11:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m25s, bytes sent: 5.9 GB, bytes/sec 3729426\r\n2018/06/01 18:11:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m30s, bytes sent: 5.9 GB, bytes/sec 3730807\r\n2018/06/01 18:11:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m35s, bytes sent: 5.9 GB, bytes/sec 3724076\r\n2018/06/01 18:11:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m40s, bytes sent: 6.0 GB, bytes/sec 3726924\r\n2018/06/01 18:11:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m45s, bytes sent: 6.0 GB, bytes/sec 3729892\r\n2018/06/01 18:12:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m50s, bytes sent: 6.0 GB, bytes/sec 3723104\r\n2018/06/01 18:12:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 26m55s, bytes sent: 6.0 GB, bytes/sec 3727931\r\n2018/06/01 18:12:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m00s, bytes sent: 6.0 GB, bytes/sec 3734131\r\n2018/06/01 18:12:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m05s, bytes sent: 6.1 GB, bytes/sec 3727231\r\n2018/06/01 18:12:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m10s, bytes sent: 6.1 GB, bytes/sec 3731079\r\n2018/06/01 18:12:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m15s, bytes sent: 6.1 GB, bytes/sec 3734923\r\n2018/06/01 18:12:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m20s, bytes sent: 6.1 GB, bytes/sec 3729985\r\n2018/06/01 18:12:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m25s, bytes sent: 6.1 GB, bytes/sec 3731835\r\n2018/06/01 18:12:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m30s, bytes sent: 6.2 GB, bytes/sec 3738031\r\n2018/06/01 18:12:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m35s, bytes sent: 6.2 GB, bytes/sec 3731600\r\n2018/06/01 18:12:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m40s, bytes sent: 6.2 GB, bytes/sec 3731866\r\n2018/06/01 18:12:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m45s, bytes sent: 6.2 GB, bytes/sec 3738084\r\n2018/06/01 18:13:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m50s, bytes sent: 6.2 GB, bytes/sec 3734261\r\n2018/06/01 18:13:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 27m55s, bytes sent: 6.3 GB, bytes/sec 3735015\r\n2018/06/01 18:13:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m00s, bytes sent: 6.3 GB, bytes/sec 3734983\r\n2018/06/01 18:13:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m05s, bytes sent: 6.3 GB, bytes/sec 3734066\r\n2018/06/01 18:13:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m10s, bytes sent: 6.3 GB, bytes/sec 3731217\r\n2018/06/01 18:13:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m15s, bytes sent: 6.3 GB, bytes/sec 3736654\r\n2018/06/01 18:13:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m20s, bytes sent: 6.4 GB, bytes/sec 3736024\r\n2018/06/01 18:13:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m25s, bytes sent: 6.4 GB, bytes/sec 3733827\r\n2018/06/01 18:13:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m30s, bytes sent: 6.4 GB, bytes/sec 3735442\r\n2018/06/01 18:13:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m35s, bytes sent: 6.4 GB, bytes/sec 3736446\r\n2018/06/01 18:13:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m40s, bytes sent: 6.4 GB, bytes/sec 3730353\r\n2018/06/01 18:13:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m45s, bytes sent: 6.4 GB, bytes/sec 3736661\r\n2018/06/01 18:14:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m50s, bytes sent: 6.5 GB, bytes/sec 3739884\r\n2018/06/01 18:14:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 28m55s, bytes sent: 6.5 GB, bytes/sec 3733970\r\n2018/06/01 18:14:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m00s, bytes sent: 6.5 GB, bytes/sec 3737049\r\n2018/06/01 18:14:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m05s, bytes sent: 6.5 GB, bytes/sec 3742519\r\n2018/06/01 18:14:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m10s, bytes sent: 6.5 GB, bytes/sec 3734867\r\n2018/06/01 18:14:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m15s, bytes sent: 6.6 GB, bytes/sec 3741173\r\n2018/06/01 18:14:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m20s, bytes sent: 6.6 GB, bytes/sec 3745944\r\n2018/06/01 18:14:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m25s, bytes sent: 6.6 GB, bytes/sec 3738840\r\n2018/06/01 18:14:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m30s, bytes sent: 6.6 GB, bytes/sec 3744760\r\n2018/06/01 18:14:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m35s, bytes sent: 6.7 GB, bytes/sec 3749055\r\n2018/06/01 18:14:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m40s, bytes sent: 6.7 GB, bytes/sec 3743877\r\n2018/06/01 18:14:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m45s, bytes sent: 6.7 GB, bytes/sec 3750013\r\n2018/06/01 18:15:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m50s, bytes sent: 6.7 GB, bytes/sec 3754006\r\n2018/06/01 18:15:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 29m55s, bytes sent: 6.7 GB, bytes/sec 3746860\r\n2018/06/01 18:15:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m00s, bytes sent: 6.8 GB, bytes/sec 3751817\r\n2018/06/01 18:15:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m05s, bytes sent: 6.8 GB, bytes/sec 3757730\r\n2018/06/01 18:15:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m10s, bytes sent: 6.8 GB, bytes/sec 3749419\r\n2018/06/01 18:15:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m15s, bytes sent: 6.8 GB, bytes/sec 3755456\r\n2018/06/01 18:15:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m20s, bytes sent: 6.8 GB, bytes/sec 3761676\r\n2018/06/01 18:15:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m25s, bytes sent: 6.8 GB, bytes/sec 3753418\r\n2018/06/01 18:15:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m30s, bytes sent: 6.9 GB, bytes/sec 3759134\r\n2018/06/01 18:15:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m35s, bytes sent: 6.9 GB, bytes/sec 3765156\r\n2018/06/01 18:15:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m40s, bytes sent: 6.9 GB, bytes/sec 3758325\r\n2018/06/01 18:15:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m45s, bytes sent: 6.9 GB, bytes/sec 3764308\r\n2018/06/01 18:16:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m49s, bytes sent: 7.0 GB, bytes/sec 3772195\r\n2018/06/01 18:16:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30m55s, bytes sent: 7.0 GB, bytes/sec 3762407\r\n2018/
8000
06/01 18:16:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 31m00s, bytes sent: 7.0 GB, bytes/sec 3767278\r\n2018/06/01 18:16:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 31m05s, bytes sent: 7.0 GB, bytes/sec 3773062\r\n```\r\n\r\nOn second terminal I control memory usage with `htop` and RAM is constantly consumed and when all memory is used service crashes. After restart 0 bytes of snapshot is send:\r\n```\r\n++ hostname -f\r\n+ dgraph server --my=dgraph-server-0.dgraph-server.default.svc.cluster.local:7080 --lru_mb 4096 --zero dgraph-zero-0.dgraph-zero.default.svc.cluster.local:5080\r\n2018/06/01 18:18:59 gRPC server started.  Listening on port 9080\r\n2018/06/01 18:18:59 HTTP server started.  Listening on port 8080\r\n2018/06/01 18:18:59 worker.go:89: Worker listening at address: [::]:7080\r\n2018/06/01 18:18:59 groups.go:78: Current Raft Id: 1\r\n2018/06/01 18:18:59 pool.go:108: == CONNECT ==> Setting dgraph-zero-0.dgraph-zero.default.svc.cluster.local:5080\r\n2018/06/01 18:18:59 groups.go:105: Connected to group zero. Assigned group: 0\r\n2018/06/01 18:18:59 pool.go:108: == CONNECT ==> Setting dgraph-server-1.dgraph-server.default.svc.cluster.local:7080\r\n2018/06/01 18:18:59 draft.go:170: Node ID: 1 with GroupID: 1\r\n2018/06/01 18:18:59 node.go:228: Found hardstate: {Term:3 Vote:1 Commit:7 XXX_unrecognized:[]}\r\n2018/06/01 18:18:59 node.go:240: Group 1 found 7 entries\r\n2018/06/01 18:18:59 draft.go:926: Restarting node for group: 1\r\n2018/06/01 18:18:59 raft.go:567: INFO: 1 became follower at term 3\r\n2018/06/01 18:18:59 raft.go:315: INFO: newRaft 1 [peers: [], term: 3, commit: 7, applied: 0, lastindex: 7, lastterm: 3]\r\n2018/06/01 18:18:59 node.go:118: Setting conf state to nodes:1 \r\n2018/06/01 18:18:59 mutation.go:181: Done schema update predicate:\"_predicate_\" value_type:STRING list:true \r\n2018/06/01 18:18:59 mutation.go:181: Done schema update predicate:\"element.type.in\" value_type:UID directive:REVERSE \r\n2018/06/01 18:18:59 mutation.go:181: Done schema update predicate:\"element.type.in\" value_type:UID directive:REVERSE \r\n2018/06/01 18:18:59 mutation.go:181: Done schema update predicate:\"_share_hash_\" value_type:STRING directive:INDEX tokenizer:\"exact\" \r\n2018/06/01 18:19:03 raft.go:749: INFO: 1 is starting a new election at term 3\r\n2018/06/01 18:19:03 raft.go:580: INFO: 1 became candidate at term 4\r\n2018/06/01 18:19:03 raft.go:664: INFO: 1 received MsgVoteResp from 1 at term 4\r\n2018/06/01 18:19:03 raft.go:621: INFO: 1 became leader at term 4\r\n2018/06/01 18:19:03 node.go:301: INFO: raft.node: 1 elected leader 1 at term 4\r\n2018/06/01 18:19:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:19:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 10s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:19:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 14s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:19:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 20s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:19:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 25s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:19:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 30s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:19:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 35s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:19:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 40s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:19:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 44s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 50s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 55s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 59s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m05s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m10s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m15s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m20s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m25s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m30s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m35s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m40s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:20:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m45s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m50s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m55s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 01m59s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m05s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m10s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m15s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m20s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m25s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m30s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m35s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m40s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:21:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m45s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m50s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 02m55s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m00s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m05s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m10s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m15s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m20s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m25s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m30s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m35s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m40s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:22:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m45s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m50s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 03m55s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m00s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m04s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m10s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m15s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m20s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m24s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m30s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:46 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m35s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:51 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m40s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:23:56 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m45s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:01 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m50s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:06 predicate.go:250: Sending SNAPSHOT: Time elapsed: 04m55s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:11 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m00s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:16 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m05s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:21 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m10s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:26 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m15s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:31 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m20s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:36 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m25s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:41 predicate.go:250: Sending SNAPSHOT: Time elapsed: 05m30s, bytes sent: 0 B, bytes/sec 0\r\n2018/06/01 18:24:43 node.go:118: Setting conf state to nodes:1 nodes:2 \r\n```\r\n\r\nAfter that, server is sometimes returns correct results and sometimes return nothing. \r\n\r\n\r\n- Expected behaviour and actual result.\r\n\r\nReplication is finished and server returns correct results always\r\n","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2422","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2422/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2422/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2422/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2422","id":327727816,"node_id":"MDU6SXNzdWUzMjc3Mjc4MTY=","number":2422,"title":"runtime error: invalid memory address or nil pointer dereference","user":{"login":"aditya-pr","id":31738814,"node_id":"MDQ6VXNlcjMxNzM4ODE0","avatar_url":"https://avatars3.githubusercontent.com/u/31738814?v=4","gravatar_id":"","url":"https://api.github.com/users/aditya-pr","html_url":"https://github.com/aditya-pr","followers_url":"https://api.github.com/users/aditya-pr/followers","following_url":"https://api.github.com/users/aditya-pr/following{/other_user}","gists_url":"https://api.github.com/users/aditya-pr/gists{/gist_id}","starred_url":"https://api.github.com/users/aditya-pr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aditya-pr/subscriptions","organizations_url":"https://api.github.com/users/aditya-pr/orgs","repos_url":"https://api.github.com/users/aditya-pr/repos","events_url":"https://api.github.com/users/aditya-pr/events{/privacy}","received_events_url":"https://api.github.com/users/aditya-pr/received_events","type":"User","site_admin":false},"labels":[{"id":252336064,"node_id":"MDU6TGFiZWwyNTIzMzYwNjQ=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/bug","name":"bug","color":"fc2929","default":true},{"id":578476312,"node_id":"MDU6TGFiZWw1Nzg0NzYzMTI=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/not_reproducible","name":"not_reproducible","color":"c5def5","default":false},{"id":935537601,"node_id":"MDU6TGFiZWw5MzU1Mzc2MDE=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/verify-fix","name":"verify-fix","color":"aafc9c","default":false}],"state":"closed","locked":false,"assignee":{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false},"assignees":[{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2018-05-30T13:20:39Z","updated_at":"2018-06-19T23:22:50Z","closed_at":"2018-06-19T23:22:50Z","author_association":"NONE","body":"- What version of Dgraph are you using?\r\n1.0.5\r\n\r\n- Have you tried reproducing the issue with latest release?\r\nusing latest\r\n\r\n- What is the hardware spec (RAM, OS)?\r\nubuntu 16.04\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n`dgraph zero --my=<host-ip>:5080 --bindall`\r\n`dgraph server --my=<host-ip>:7080 --lru_mb 2048 --zero <host-ip>:5080`\r\n\r\n- Expected behaviour and actual result.\r\ndgraph keeps crashing with this stacktrace:\r\n```\r\n2018/05/30 13:06:37 node.go:301: INFO: raft.node: 1 elected leader 1 at term 668\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x1020e48]\r\n\r\ngoroutine 428845 [running]:\r\ngithub.com/dgraph-io/dgraph/posting.(*List).Value(0x0, 0xe3a82f, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/posting/list.go:935 +0x58\r\ngithub.com/dgraph-io/dgraph/worker.handleCompareFunction.func1(0x1c2ed1e2eed6f546, 0x79, 0xc46e54e000)\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/worker/task.go:911 +0x31f\r\ngithub.com/dgraph-io/dgraph/algo.ApplyFilter(0xc4707a9c20, 0xc468755838)\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/algo/uidlist.go:24 +0xb3\r\ngithub.com/dgraph-io/dgraph/worker.handleCompareFunction(0x1a95440, 0xc47160c000, 0xc4716b2c80, 0x1, 0xc467012160, 0xc470742090, 0xe3a82f, 0x0)\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/worker/task.go:888 +0x4d2\r\ngithub.com/dgraph-io/dgraph/worker.helpProcessTask(0x1a95440, 0xc47160c000, 0xc4716b2c80, 0x1, 0x0, 0x0, 0x13adae8)\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/worker/task.go:715 +0x429\r\ngithub.com/dgraph-io/dgraph/worker.processTask(0x1a95440, 0xc47160c000, 0xc4716b2c80, 0x1, 0xc47ff48000, 0xc4716b2c80, 0xc45e178b48)\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/worker/task.go:626 +0x1be\r\ngithub.com/dgraph-io/dgraph/worker.ProcessTaskOverNetwork(0x1a95440, 0xc47160c000, 0xc4716b2c80, 0x0, 0xffffffffffffffff, 0x994243)\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/worker/task.go:149 +0x546\r\ngithub.com/dgraph-io/dgraph/query.ProcessGraph(0x1a95440, 0xc47160c000, 0xc420350580, 0x0, 0xc468e801e0)\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/query/query.go:1885 +0x1cbd\r\ncreated by github.com/dgraph-io/dgraph/query.(*QueryRequest).ProcessQuery\r\n\t/home/aditya/go/src/github.com/dgraph-io/dgraph/query/query.go:2518 +0x964\r\n```\r\ndgraphzero\r\n```\r\n2018/05/30 13:05:42 zero.go:336: Got connection request: id:1 addr:\"<host-ip>:7080\" \r\n2018/05/30 13:05:42 zero.go:445: Connected\r\n2018/05/30 13:05:45 oracle.go:386: No healthy connection found to leader of group 1\r\n2018/05/30 13:05:45 pool.go:158: Echo error from <host-ip>:7080. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp <host-ip>:7080: getsockopt: connection refused\"\r\n2018/05/30 13:05:55 oracle.go:386: No healthy connection found to leader of group 1\r\n2018/05/30 13:06:05 oracle.go:75: purging below ts:14919230, len(o.commits):19, len(o.aborts):43, len(o.rowCommit):25\r\n2018/05/30 13:06:15 oracle.go:75: purging below ts:14919312, len(o.commits):19, len(o.aborts):43, len(o.rowCommit):22\r\n2018/05/30 13:06:25 oracle.go:392: Error while fetching minTs from group 1, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp <host-ip>:7080: getsockopt: connection refused\"\r\n2018/05/30 13:06:25 pool.go:158: Echo error from <host-ip>:7080. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp <host-ip>:7080: getsockopt: connection refused\"\r\n2018/05/30 13:06:33 zero.go:336: Got connection request: id:1 addr:\"<host-ip>:7080\" \r\n2018/05/30 13:06:33 zero.go:445: Connected\r\n2018/05/30 13:06:35 oracle.go:386: No healthy connection found to leader of group 1\r\n2018/05/30 13:06:35 pool.go:158: Echo error from <host-ip>:7080. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp <host-ip>:7080: getsockopt: connection refused\"\r\n2018/05/30 13:06:45 oracle.go:386: No healthy connection found to leader of group 1\r\n2018/05/30 13:06:55 oracle.go:75: purging below ts:14919401, len(o.commits):174, len(o.aborts):4, len(o.rowCommit):175\r\n2018/05/30 13:07:05 oracle.go:392: Error while fetching minTs from group 1, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp <host-ip>:7080: getsockopt: connection refused\"\r\n2018/05/30 13:07:05 pool.go:158: Echo error from <host-ip>:7080. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp <host-ip>:7080: getsockopt: connection refused\"\r\n2018/05/30 13:07:10 zero.go:336: Got connection request: id:1 addr:\"<host-ip>:7080\" \r\n2018/05/30 13:07:10 zero.go:445: Connected\r\n2018/05/30 13:07:15 oracle.go:386: No healthy connection found to leader of group 1\r\n2018/05/30 13:07:15 pool.go:158: Echo error from <host-ip>:7080. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp <host-ip>:7080: getsockopt: connection refused\"\r\n2018/05/30 13:07:25 oracle.go:386: No healthy connection found to leader of group 1\r\n```","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2421","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2421/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2421/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2421/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2421","id":327608179,"node_id":"MDU6SXNzdWUzMjc2MDgxNzk=","number":2421,"title":"advice needed concerning enum values.","user":{"login":"xinstein","id":10842079,"node_id":"MDQ6VXNlcjEwODQyMDc5","avatar_url":"https://avatars3.githubusercontent.com/u/10842079?v=4","gravatar_id":"","url":"https://api.github.com/users/xinstein","html_url":"https://github.com/xinstein","followers_url":"https://api.github.com/users/xinstein/followers","following_url":"https://api.github.com/users/xinstein/following{/other_user}","gists_url":"https://api.github.com/users/xinstein/gists{/gist_id}","starred_url":"https://api.github.com/users/xinstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinstein/subscriptions","organizations_url":"https://api.github.com/users/xinstein/orgs","repos_url":"https://api.github.com/users/xinstein/repos","events_url":"https://api.github.com/users/xinstein/events{/privacy}","received_events_url":"https://api.github.com/users/xinstein/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-30T07:34:35Z","updated_at":"2018-05-31T17:52:18Z","closed_at":"2018-05-31T17:52:18Z","author_association":"NONE","body":"My nodes have a property `user.status` which is an enum (0,1,2,3).\r\nI have thought of the following ways to store it in dgraph:\r\n1. schema { \r\n            user.status: int @index(int) .\r\n        }\r\n     and store the 0,1,2,3 as an int64, indexing is necessary because I would want to retrieve users according to their status\r\n2. schema{ \r\n            user.status.0: bool .\r\n            user.status.1: bool .\r\n            user.status.2: bool .\r\n            user.status.3: bool .\r\n        }\r\n     and assign predicate user.status.x only to users with status x.\r\n\r\nWhich one is more performant and which one is more space efficient in dgraph?","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2418","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2418/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2418/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2418/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2418","id":327290843,"node_id":"MDU6SXNzdWUzMjcyOTA4NDM=","number":2418,"title":"Wrong link to api.proto","user":{"login":"Revisor","id":550341,"node_id":"MDQ6VXNlcjU1MDM0MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/550341?v=4","gravatar_id":"","url":"https://api.github.com/users/Revisor","html_url":"https://github.com/Revisor","followers_url":"https://api.github.com/users/Revisor/followers","following_url":"https://api.github.com/users/Revisor/following{/other_user}","gists_url":"https://api.github.com/users/Revisor/gists{/gist_id}","starred_url":"https://api.github.com/users/Revisor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Revisor/subscriptions","organizations_url":"https://api.github.com/users/Revisor/orgs","repos_url":"https://api.github.com/users/Revisor/repos","events_url":"https://api.github.com/users/Revisor/events{/privacy}","received_events_url":"https://api.github.com/users/Revisor/received_events","type":"User","site_admin":false},"labels":[{"id":401191467,"node_id":"MDU6TGFiZWw0MDExOTE0Njc=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/documentation","name":"documentation","color":"fbca04","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-29T12:04:50Z","updated_at":"2018-06-28T22:33:20Z","closed_at":"2018-06-28T22:33:20Z","author_association":"NONE","body":"* Doc page: [clients/index.md](https://docs.dgraph.io/clients/)\r\n* Doc version: `release/v1.0.5`\r\n\r\nHello, the link to `api.proto` at the top of the page doesn't work.","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2417","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2417/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2417/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2417/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2417","id":327132028,"node_id":"MDU6SXNzdWUzMjcxMzIwMjg=","number":2417,"title":"Remove MemoryStorage from Raft Node","user":{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false},"labels":[{"id":296751739,"node_id":"MDU6TGFiZWwyOTY3NTE3Mzk=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/cleanup","name":"cleanup","color":"006b75","default":false}],"state":"closed","locked":false,"assignee":{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false},"assignees":[{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-05-28T23:25:12Z","updated_at":"2018-06-08T01:59:23Z","closed_at":"2018-06-08T01:59:23Z","author_association":"MEMBER","body":"Badger can power the Storage interface, we should swap out the MemoryStorage, which is used in addition to Badger WAL store. This would decrease the RAM consumption of Dgraph.","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2416","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2416/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2416/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2416/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2416","id":327112031,"node_id":"MDU6SXNzdWUzMjcxMTIwMzE=","number":2416,"title":"The license isn't really the Apache license","user":{"login":"tdunning","id":250490,"node_id":"MDQ6VXNlcjI1MDQ5MA==","avatar_url":"https://avatars2.githubusercontent.com/u/250490?v=4","gravatar_id":"","url":"https://api.github.com/users/tdunning","html_url":"https://github.com/tdunning","followers_url":"https://api.github.com/users/tdunning/followers","following_url":"https://api.github.com/users/tdunning/following{/other_user}","gists_url":"https://api.github.com/users/tdunning/gists{/gist_id}","starred_url":"https://api.github.com/users/tdunning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tdunning/subscriptions","organizations_url":"https://api.github.com/users/tdunning/orgs","repos_url":"https://api.github.com/users/tdunning/repos","events_url":"https://api.github.com/users/tdunning/events{/privacy}","received_events_url":"https://api.github.com/users/tdunning/received_events","type":"User","site_admin":false},"labels":[{"id":575130195,"node_id":"MDU6TGFiZWw1NzUxMzAxOTU=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/question","name":"question","color":"bfd4f2","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-05-28T20:29:40Z","updated_at":"2018-05-30T22:13:32Z","closed_at":"2018-05-30T18:46:15Z","author_association":"NONE","body":"By adding the no-resale clause, you have changed the license on your software no longer be the Apache license.\r\n\r\nYou should signal that by changing the text of your license to make it clear that you are not really using the Apache license at all and that your code is not open source as defined by the OSI.\r\n\r\nThere is nothing wrong with restricting your licensing, it is just better to be up front about it. Claiming to use the Apache license in one breath and then not using it is likely to confuse people.","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2415","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2415/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2415/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2415/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2415","id":326870516,"node_id":"MDU6SXNzdWUzMjY4NzA1MTY=","number":2415,"title":"live indexing is much more space consuming than bulk indexing","user":{"login":"xinstein","id":10842079,"node_id":"MDQ6VXNlcjEwODQyMDc5","avatar_url":"https://avatars3.githubusercontent.com/u/10842079?v=4","gravatar_id":"","url":"https://api.github.com/users/xinstein","html_url":"https://github.com/xinstein","followers_url":"https://api.github.com/users/xinstein/followers","following_url":"https://api.github.com/users/xinstein/following{/other_user}","gists_url":"https://api.github.com/users/xinstein/gists{/gist_id}","starred_url":"https://api.github.com/users/xinstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinstein/subscriptions","organizations_url":"https://api.github.com/users/xinstein/orgs","repos_url":"https://api.github.com/users/xinstein/repos","events_url":"https://api.github.com/users/xinstein/events{/privacy}","received_events_url":"https://api.github.com/users/xinstein/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-28T01:36:16Z","updated_at":"2018-05-30T20:16:46Z",
8000
"closed_at":"2018-05-30T20:16:46Z","author_association":"NONE","body":"if I provide schema with indexing when bulk loading, the bulk loaded data consumes around 500GB disk space; \r\nOn the other hand if I omit indexing directive in bulk loader schema, and do the schema indexing alteration (identical to the one I would have provided for bulk loading) after the server is up and running, the server will work for several days creating the index until finally it consumes all of my disk space (3.2TB), and becomes unavailable and unfixable. \r\n\r\nThis is possibly a performance issue, not very important since I can bypass it by doing indexing during bulk load. I'm just curious if you are aware of this issue","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2411","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2411/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2411/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2411/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2411","id":326068109,"node_id":"MDU6SXNzdWUzMjYwNjgxMDk=","number":2411,"title":"dgraph-ratel UI stops responding after clicking `expand`","user":{"login":"xinstein","id":10842079,"node_id":"MDQ6VXNlcjEwODQyMDc5","avatar_url":"https://avatars3.githubusercontent.com/u/10842079?v=4","gravatar_id":"","url":"https://api.github.com/users/xinstein","html_url":"https://github.com/xinstein","followers_url":"https://api.github.com/users/xinstein/followers","following_url":"https://api.github.com/users/xinstein/following{/other_user}","gists_url":"https://api.github.com/users/xinstein/gists{/gist_id}","starred_url":"https://api.github.com/users/xinstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinstein/subscriptions","organizations_url":"https://api.github.com/users/xinstein/orgs","repos_url":"https://api.github.com/users/xinstein/repos","events_url":"https://api.github.com/users/xinstein/events{/privacy}","received_events_url":"https://api.github.com/users/xinstein/received_events","type":"User","site_admin":false},"labels":[{"id":522272601,"node_id":"MDU6TGFiZWw1MjIyNzI2MDE=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/move_to_discuss.dgraph.io","name":"move_to_discuss.dgraph.io","color":"e99695","default":false}],"state":"closed","locked":false,"assignee":{"login":"MichelDiz","id":6570955,"node_id":"MDQ6VXNlcjY1NzA5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/6570955?v=4","gravatar_id":"","url":"https://api.github.com/users/MichelDiz","html_url":"https://github.com/MichelDiz","followers_url":"https://api.github.com/users/MichelDiz/followers","following_url":"https://api.github.com/users/MichelDiz/following{/other_user}","gists_url":"https://api.github.com/users/MichelDiz/gists{/gist_id}","starred_url":"https://api.github.com/users/MichelDiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MichelDiz/subscriptions","organizations_url":"https://api.github.com/users/MichelDiz/orgs","repos_url":"https://api.github.com/users/MichelDiz/repos","events_url":"https://api.github.com/users/MichelDiz/events{/privacy}","received_events_url":"https://api.github.com/users/MichelDiz/received_events","type":"User","site_admin":false},"assignees":[{"login":"MichelDiz","id":6570955,"node_id":"MDQ6VXNlcjY1NzA5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/6570955?v=4","gravatar_id":"","url":"https://api.github.com/users/MichelDiz","html_url":"https://github.com/MichelDiz","followers_url":"https://api.github.com/users/MichelDiz/followers","following_url":"https://api.github.com/users/MichelDiz/following{/other_user}","gists_url":"https://api.github.com/users/MichelDiz/gists{/gist_id}","starred_url":"https://api.github.com/users/MichelDiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MichelDiz/subscriptions","organizations_url":"https://api.github.com/users/MichelDiz/orgs","repos_url":"https://api.github.com/users/MichelDiz/repos","events_url":"https://api.github.com/users/MichelDiz/events{/privacy}","received_events_url":"https://api.github.com/users/MichelDiz/received_events","type":"User","site_admin":false}],"milestone":null,"comments":12,"created_at":"2018-05-24T10:54:35Z","updated_at":"2018-06-30T15:10:03Z","closed_at":"2018-06-30T15:09:53Z","author_association":"NONE","body":"in almost all use cases, the link `Expand 500 nodes` crashes the webpage.\r\nMy env:\r\nsystem: macOS sierra 10.12.6\r\nbrowser: Chrome 66.0.3359.181","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2410","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2410/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2410/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2410/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2410","id":325640878,"node_id":"MDU6SXNzdWUzMjU2NDA4Nzg=","number":2410,"title":"dgraph servers crashing after removing then re-adding a node","user":{"login":"0intro","id":6043744,"node_id":"MDQ6VXNlcjYwNDM3NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/6043744?v=4","gravatar_id":"","url":"https://api.github.com/users/0intro","html_url":"https://github.com/0intro","followers_url":"https://api.github.com/users/0intro/followers","following_url":"https://api.github.com/users/0intro/following{/other_user}","gists_url":"https://api.github.com/users/0intro/gists{/gist_id}","starred_url":"https://api.github.com/users/0intro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0intro/subscriptions","organizations_url":"https://api.github.com/users/0intro/orgs","repos_url":"https://api.github.com/users/0intro/repos","events_url":"https://api.github.com/users/0intro/events{/privacy}","received_events_url":"https://api.github.com/users/0intro/received_events","type":"User","site_admin":false},"labels":[{"id":252336064,"node_id":"MDU6TGFiZWwyNTIzMzYwNjQ=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/bug","name":"bug","color":"fc2929","default":true},{"id":633145183,"node_id":"MDU6TGFiZWw2MzMxNDUxODM=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/investigate","name":"investigate","color":"e99695","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-23T10:17:56Z","updated_at":"2018-06-13T02:24:11Z","closed_at":"2018-06-13T02:22:49Z","author_association":"CONTRIBUTOR","body":"We're experiencing crashes of dgraph instances when removing and re-adding a dgraph node in a dgraph cluster.\r\n\r\n- What version of Dgraph are you using?\r\n\r\ndgraph master from 2018-05-23 (changeset [d907674edd](https://github.com/dgraph-io/dgraph/commit/d907674eddb325592e941815d8e91c21a38314ff))\r\n\r\n- Have you tried reproducing the issue with latest release?\r\n\r\nThis issue can be reproduced with dgraph 1.0.5 as well.\r\n\r\n- What is the hardware spec (RAM, OS)?\r\n\r\nCentOS 7.3, Intel Xeon 2.30 GHz, 4 cores, 26 GB of RAM.\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n\r\nThe issue can easily be reproduced with a dgraph cluster containing one dgraph zero instance and three dgraph server instances and using the example [dataset](https://github.com/dgraph-io/tutorial/blob/master/resources/1million.rdf.gz) from the tutorial.\r\n\r\nAfter removing then re-adding a node at least one of the other dgraph servers will crash. In the following example, the two other dgraph servers will crash.\r\n\r\n## Step 1 : startup\r\n\r\nWe start one instance of `dgraph zero` and three instances of `dgraph server`:\r\n\r\n* dgraph zero\r\n\r\n```\r\n$ dgraph zero --bindall=false -o 1 --my=localhost:5081 -w=wz --replicas 3\r\nSetting up grpc listener at: localhost:5081\r\nSetting up http listener at: localhost:6081\r\n2018/05/23 08:28:25 node.go:240: Group 0 found 0 entries\r\n2018/05/23 08:28:25 raft.go:567: INFO: 1 became follower at term 0\r\n2018/05/23 08:28:25 raft.go:316: INFO: newRaft 1 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]\r\n2018/05/23 08:28:25 raft.go:567: INFO: 1 became follower at term 1\r\nRunning Dgraph zero...\r\n2018/05/23 08:28:25 node.go:118: Setting conf state to nodes:1 \r\n2018/05/23 08:28:27 raft.go:749: INFO: 1 is starting a new election at term 1\r\n2018/05/23 08:28:27 raft.go:580: INFO: 1 became candidate at term 2\r\n2018/05/23 08:28:27 raft.go:664: INFO: 1 received MsgVoteResp from 1 at term 2\r\n2018/05/23 08:28:27 raft.go:621: INFO: 1 became leader at term 2\r\n2018/05/23 08:28:27 node.go:301: INFO: raft.node: 1 elected leader 1 at term 2\r\n2018/05/23 08:28:31 zero.go:336: Got connection request: addr:\"localhost:7081\" \r\n2018/05/23 08:28:31 pool.go:108: == CONNECT ==> Setting localhost:7081\r\n2018/05/23 08:28:31 zero.go:445: Connected\r\n2018/05/23 08:28:36 zero.go:336: Got connection request: addr:\"localhost:7082\" \r\n2018/05/23 08:28:36 pool.go:108: == CONNECT ==> Setting localhost:7082\r\n2018/05/23 08:28:36 zero.go:445: Connected\r\n2018/05/23 08:28:41 zero.go:336: Got connection request: addr:\"localhost:7083\" \r\n2018/05/23 08:28:41 pool.go:108: == CONNECT ==> Setting localhost:7083\r\n2018/05/23 08:28:41 zero.go:445: Connected\r\n```\r\n\r\n* dgraph 1\r\n\r\n```\r\n$ dgraph server --bindall=false -o 1 --lru_mb 2048 --zero=localhost:5081 --my=localhost:7081 --posting_tables memorymap\r\n2018/05/23 08:28:31 groups.go:65: --my flag is provided without bindall, Did you forget to specify bindall?\r\n2018/05/23 08:28:31 groups.go:78: Current Raft Id: 0\r\n2018/05/23 08:28:31 worker.go:89: Worker listening at address: 127.0.0.1:7081\r\n2018/05/23 08:28:31 gRPC server started.  Listening on port 9081\r\n2018/05/23 08:28:31 HTTP server started.  Listening on port 8081\r\n2018/05/23 08:28:31 pool.go:108: == CONNECT ==> Setting localhost:5081\r\n2018/05/23 08:28:31 groups.go:105: Connected to group zero. Assigned group: 1\r\n2018/05/23 08:28:31 draft.go:170: Node ID: 1 with GroupID: 1\r\n2018/05/23 08:28:31 node.go:240: Group 1 found 0 entries\r\n2018/05/23 08:28:31 draft.go:907: New Node for group: 1\r\n2018/05/23 08:28:31 raft.go:567: INFO: 1 became follower at term 0\r\n2018/05/23 08:28:31 raft.go:316: INFO: newRaft 1 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]\r\n2018/05/23 08:28:31 raft.go:567: INFO: 1 became follower at term 1\r\n2018/05/23 08:28:31 node.go:118: Setting conf state to nodes:1 \r\n2018/05/23 08:28:31 raft.go:749: INFO: 1 is starting a new election at term 1\r\n2018/05/23 08:28:31 raft.go:580: INFO: 1 became candidate at term 2\r\n2018/05/23 08:28:31 raft.go:664: INFO: 1 received MsgVoteResp from 1 at term 2\r\n2018/05/23 08:28:31 raft.go:621: INFO: 1 became leader at term 2\r\n2018/05/23 08:28:31 node.go:301: INFO: raft.node: 1 elected leader 1 at term 2\r\n2018/05/23 08:28:31 groups.go:354: Serving tablet for: _predicate_\r\n2018/05/23 08:28:31 mutation.go:147: Done schema update predicate:\"_predicate_\" value_type:STRING list:true \r\n2018/05/23 08:28:36 pool.go:108: == CONNECT ==> Setting localhost:7082\r\n2018/05/23 08:28:36 node.go:118: Setting conf state to nodes:1 nodes:2 \r\n2018/05/23 08:28:41 pool.go:108: == CONNECT ==> Setting localhost:7083\r\n2018/05/23 08:28:41 node.go:118: Setting conf state to nodes:1 nodes:2 nodes:3 \r\n```\r\n\r\n* dgraph 2\r\n\r\n```\r\n$ dgraph server --bindall=false -o 2 --lru_mb 2048 --zero=localhost:5081 --my=localhost:7082 --posting_tables memorymap\r\n2018/05/23 08:28:36 groups.go:65: --my flag is provided without bindall, Did you forget to specify bindall?\r\n2018/05/23 08:28:36 groups.go:78: Current Raft Id: 0\r\n2018/05/23 08:28:36 worker.go:89: Worker listening at address: 127.0.0.1:7082\r\n2018/05/23 08:28:36 gRPC server started.  Listening on port 9082\r\n2018/05/23 08:28:36 HTTP server started.  Listening on port 8082\r\n2018/05/23 08:28:36 pool.go:108: == CONNECT ==> Setting localhost:5081\r\n2018/05/23 08:28:36 groups.go:105: Connected to group zero. Assigned group: 1\r\n2018/05/23 08:28:36 pool.go:108: == CONNECT ==> Setting localhost:7081\r\n2018/05/23 08:28:36 draft.go:170: Node ID: 2 with GroupID: 1\r\n2018/05/23 08:28:36 node.go:240: Group 1 found 0 entries\r\n2018/05/23 08:28:36 draft.go:855: Calling IsPeer\r\n2018/05/23 08:28:36 draft.go:860: Done with IsPeer call\r\n2018/05/23 08:28:36 draft.go:907: New Node for group: 1\r\n2018/05/23 08:28:36 draft.go:912: Retrieving snapshot from peer: 1\r\n2018/05/23 08:28:36 draft.go:915: Trying to join peers.\r\n2018/05/23 08:28:36 draft.go:838: Calling JoinCluster via leader: localhost:7081\r\n2018/05/23 08:28:36 draft.go:842: Done with JoinCluster call\r\n2018/05/23 08:28:36 raft.go:567: INFO: 2 became follower at term 0\r\n2018/05/23 08:28:36 raft.go:316: INFO: newRaft 2 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]\r\n2018/05/23 08:28:36 raft.go:567: INFO: 2 became follower at term 1\r\n2018/05/23 08:28:36 raft.go:709: INFO: 2 [term: 1] received a MsgHeartbeat message with higher term from 1 [term: 2]\r\n2018/05/23 08:28:36 raft.go:567: INFO: 2 became follower at term 2\r\n2018/05/23 08:28:36 node.go:301: INFO: raft.node: 2 elected leader 1 at term 2\r\n2018/05/23 08:28:36 node.go:118: Setting conf state to nodes:1 \r\n2018/05/23 08:28:36 node.go:118: Setting conf state to nodes:1 nodes:2 \r\n2018/05/23 08:28:36 mutation.go:147: Done schema update predicate:\"_predicate_\" value_type:STRING list:true \r\n2018/05/23 08:28:41 pool.go:108: == CONNECT ==> Setting localhost:7083\r\n2018/05/23 08:28:41 node.go:118: Setting conf state to nodes:1 nodes:2 nodes:3 \r\n```\r\n\r\n* dgraph 3\r\n\r\n```\r\n$ dgraph server --bindall=false -o 3 --lru_mb 2048 --zero=localhost:5081 --my=localhost:7083 --posting_tables memorymap\r\n2018/05/23 08:28:41 groups.go:65: --my flag is provided without bindall, Did you forget to specify bindall?\r\n2018/05/23 08:28:41 groups.go:78: Current Raft Id: 0\r\n2018/05/23 08:28:41 worker.go:89: Worker listening at address: 127.0.0.1:7083\r\n2018/05/23 08:28:41 gRPC server started.  Listening on port 9083\r\n2018/05/23 08:28:41 HTTP server started.  Listening on port 8083\r\n2018/05/23 08:28:41 pool.go:108: == CONNECT ==> Setting localhost:5081\r\n2018/05/23 08:28:41 groups.go:105: Connected to group zero. Assigned group: 1\r\n2018/05/23 08:28:41 pool.go:108: == CONNECT ==> Setting localhost:7081\r\n2018/05/23 08:28:41 pool.go:108: == CONNECT ==> Setting localhost:7082\r\n2018/05/23 08:28:41 draft.go:170: Node ID: 3 with GroupID: 1\r\n2018/05/23 08:28:41 node.go:240: Group 1 found 0 entries\r\n2018/05/23 08:28:41 draft.go:855: Calling IsPeer\r\n2018/05/23 08:28:41 draft.go:860: Done with IsPeer call\r\n2018/05/23 08:28:41 draft.go:907: New Node for group: 1\r\n2018/05/23 08:28:41 draft.go:912: Retrieving snapshot from peer: 1\r\n2018/05/23 08:28:41 draft.go:915: Trying to join peers.\r\n2018/05/23 08:28:41 draft.go:838: Calling JoinCluster via leader: localhost:7081\r\n2018/05/23 08:28:41 draft.go:842: Done with JoinCluster call\r\n2018/05/23 08:28:41 raft.go:567: INFO: 3 became follower at term 0\r\n2018/05/23 08:28:41 raft.go:316: INFO: newRaft 3 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]\r\n2018/05/23 08:28:41 raft.go:567: INFO: 3 became follower at term 1\r\n2018/05/23 08:28:41 raft.go:709: INFO: 3 [term: 1] received a MsgHeartbeat message with higher term from 1 [term: 2]\r\n2018/05/23 08:28:41 raft.go:567: INFO: 3 became follower at term 2\r\n2018/05/23 08:28:41 node.go:301: INFO: raft.node: 3 elected leader 1 at term 2\r\n2018/05/23 08:28:41 node.go:118: Setting conf state to nodes:1 \r\n2018/05/23 08:28:41 node.go:118: Setting conf state to nodes:1 nodes:2 \r\n2018/05/23 08:28:41 node.go:118: Setting conf state to nodes:1 nodes:2 nodes:3 \r\n2018/05/23 08:28:41 mutation.go:147: Done schema update predicate:\"_predicate_\" value_type:STRING list:true \r\n```\r\n\r\n## Step 2: import data\r\n\r\nWe download the example [dataset](https://github.com/dgraph-io/tutorial/blob/master/resources/1million.rdf.gz) from the tutorial, containing 1 million RDFs:\r\n\r\n```\r\n$ wget 'https://github.com/dgraph-io/tutorial/blob/master/resources/1million.rdf.gz?raw=true' -O 1million.rdf.gz -q\r\n```\r\n\r\nWe import the dataset with `dgraph live`:\r\n\r\n```\r\n$ dgraph live -d localhost:9081 -z localhost:5081 -r 1million.rdf.gz -c 1\r\n2018/05/23 08:28:55 run.go:337: Creating temp client directory at /tmp/x312946550\r\n\r\nProcessing 1million.rdf.gz\r\nTotal Txns done:       20 RDFs per second:    9927 Time Elapsed: 2s, Aborts: 0\r\nTotal Txns done:       36 RDFs per second:    8999 Time Elapsed: 4s, Aborts: 0\r\nTotal Txns done:       52 RDFs per second:    8666 Time Elapsed: 6s, Aborts: 0\r\nTotal Txns done:       68 RDFs per second:    8500 Time Elapsed: 8s, Aborts: 0\r\nTotal Txns done:       84 RDFs per second:    8386 Time Elapsed: 10s, Aborts: 0\r\nTotal Txns done:      106 RDFs per second:    8828 Time Elapsed: 12s, Aborts: 0\r\nTotal Txns done:      124 RDFs per second:    8855 Time Elapsed: 14s, Aborts: 0\r\nTotal Txns done:      137 RDFs per second:    8562 Time Elapsed: 16s, Aborts: 0\r\nTotal Txns done:      157 RDFs per second:    8719 Time Elapsed: 18s, Aborts: 0\r\nTotal Txns done:      177 RDFs per second:    8849 Time Elapsed: 20s, Aborts: 0\r\nTotal Txns done:      193 RDFs per second:    8772 Time Elapsed: 22s, Aborts: 0\r\nTotal Txns done:      205 RDFs per second:    8538 Time Elapsed: 24s, Aborts: 0\r\nTotal Txns done:      226 RDFs per second:    8691 Time Elapsed: 26s, Aborts: 0\r\nTotal Txns done:      242 RDFs per second:    8643 Time Elapsed: 28s, Aborts: 0\r\nTotal Txns done:      263 RDFs per second:    8767 Time Elapsed: 30s, Aborts: 0\r\nTotal Txns done:      282 RDFs per second:    8811 Time Elapsed: 32s, Aborts: 0\r\nTotal Txns done:      290 RDFs per second:    8529 Time Elapsed: 34s, Aborts: 0\r\nTotal Txns done:      310 RDFs per second:    8608 Time Elapsed: 36s, Aborts: 0\r\nTotal Txns done:      323 RDFs per second:    8496 Time Elapsed: 38s, Aborts: 0\r\nTotal Txns done:      340 RDFs per second:    8500 Time Elapsed: 40s, Aborts: 0\r\nTotal Txns done:      359 RDFs per second:    8547 Time Elapsed: 42s, Aborts: 0\r\nTotal Txns done:      369 RDFs per second:    8386 Time Elapsed: 44s, Aborts: 0\r\nTotal Txns done:      377 RDFs per second:    8195 Time Elapsed: 46s, Aborts: 0\r\nTotal Txns done:      387 RDFs per second:    8062 Time Elapsed: 48s, Aborts: 0\r\nTotal Txns done:      400 RDFs per second:    8000 Time Elapsed: 50s, Aborts: 0\r\nTotal Txns done:      420 RDFs per second:    8075 Time Elapsed: 52s, Aborts: 0\r\nTotal Txns done:      440 RDFs per second:    8148 Time Elapsed: 54s, Aborts: 0\r\nTotal Txns done:      461 RDFs per second:    8232 Time Elapsed: 56s, Aborts: 0\r\nTotal Txns done:      479 RDFs per second:    8259 Time Elapsed: 58s, Aborts: 0\r\nTotal Txns done:      488 RDFs per second:    8133 Time Elapsed: 1m0s, Aborts: 0\r\nTotal Txns done:      505 RDFs per second:    8144 Time Elapsed: 1m2s, Aborts: 0\r\nTotal Txns done:      510 RDFs per second:    7969 Time Elapsed: 1m4s, Aborts: 0\r\nTotal Txns done:      521 RDFs per second:    7893 Time Elapsed: 1m6s, Aborts: 0\r\nTotal Txns done:      535 RDFs per second:    7867 Time Elapsed: 1m8s, Aborts: 0\r\nTotal Txns done:      554 RDFs per second:    7913 Time Elapsed: 1m10s, Aborts: 0\r\nTotal Txns done:      571 RDFs per second:    7931 Time Elapsed: 1m12s, Aborts: 0\r\nTotal Txns done:      590 RDFs per second:    7971 Time Elapsed: 1m14s, Aborts: 0\r\nTotal Txns done:      598 RDFs per second:    7867 Time Elapsed: 1m16s, Aborts: 0\r\nTotal Txns done:      616 RDFs per second:    7897 Time Elapsed: 1m18s, Aborts: 0\r\nTotal Txns done:      622 RDFs per second:    7775 Time Elapsed: 1m20s, Aborts: 0\r\nTotal Txns done:      629 RDFs per second:    7671 Time Elapsed: 1m22s, Aborts: 0\r\nTotal Txns done:      637 RDFs per second:    7583 Time Elapsed: 1m24s, Aborts: 0\r\nTotal Txns done:      650 RDFs per second:    7557 Time Elapsed: 1m26s, Aborts: 0\r\nTotal Txns done:      655 RDFs per second:    7443 Time Elapsed: 1m28s, Aborts: 0\r\nTotal Txns done:      664 RDFs per second:    7377 Time Elapsed: 1m30s, Aborts: 0\r\nTotal Txns done:      677 RDFs per second:    7359 Time Elapsed: 1m32s, Aborts: 0\r\nTotal Txns done:      689 RDFs per second:    7329 Time Elapsed: 1m34s, Aborts: 0\r\nTotal Txns done:      702 RDFs per second:    7312 Time Elapsed: 1m36s, Aborts: 0\r\nTotal Txns done:      715 RDFs per second:    7295 Time Elapsed: 1m38s, Aborts: 0\r\nTotal Txns done:      728 RDFs per second:    7279 Time Elapsed: 1m40s, Aborts: 0\r\nTotal Txns done:      731 RDFs per second:    7166 Time Elapsed: 1m42s, Aborts: 0\r\nTotal Txns done:      742 RDFs per second:    7135 Time Elapsed: 1m44s, Aborts: 0\r\nTotal Txns done:      748 RDFs per second:    7055 Time Elapsed: 1m46s, Aborts: 0\r\nTotal Txns done:      755 RDFs per second:    6990 Time Elapsed: 1m48s, Aborts: 0\r\nTotal Txns done:      764 RDFs per second:    6945 Time Elapsed: 1m50s, Aborts: 0\r\nTotal Txns done:      772 RDFs per second:    6893 Time Elapsed: 1m52s, Aborts: 0\r\nTotal Txns done:      775 RDFs per second:    6798 Time Elapsed: 1m54s, Aborts: 0\r\nTotal Txns done:      782 RDFs per second:    6741 Time Elapsed: 1m56s, Aborts: 0\r\nTotal Txns done:      791 RDFs per second:    6703 Time Elapsed: 1m58s, Aborts: 0\r\nTotal Txns done:      801 RDFs per second:    6675 Time Elapsed: 2m0s, Aborts: 0\r\nTotal Txns done:      806 RDFs per second:    6606 Time Elapsed: 2m2s, Aborts: 0\r\nTotal Txns done:      813 RDFs per second:    6556 Time Elapsed: 2m4s, Aborts: 0\r\nTotal Txns done:      823 RDFs per second:    6532 Time Elapsed: 2m6s, Aborts: 0\r\nTotal Txns done:      833 RDFs per second:    6507 Time Elapsed: 2m8s, Aborts: 0\r\nTotal Txns done:      834 RDFs per second:    6415 Time Elapsed: 2m10s, Aborts: 0\r\nNumber of TXs run         : 845                                                                     \r\nNumber of RDFs processed  : 844056\r\nTime spent                : 2m11.452254437s\r\nRDFs processed per second : 6443\r\nTotal Txns done:      845 RDFs per second:    6394 Time Elapsed: 2m12s, Aborts: 0\r\nTotal Txns done:      845 RDFs per second:    6299 Time Elapsed: 2m14s, Aborts: 0\r\n```\r\n\r\nHere are the log output:\r\n\r\n* dgraph zero\r\n\r\n```\r\n2018/05/23 08:29:05 oracle.go:78: purging below ts:171, len(o.commits):86, len(o.aborts):0, len(o.rowCommit):83065\r\n2018/05/23 08:29:15 oracle.go:78: purging below ts:357, len(o.commits):94, len(o.aborts):0, len(o.rowCommit):74221\r\n2018/05/23 08:29:25 oracle.go:78: purging below ts:527, len(o.commits):86, len(o.aborts):0, len(o.rowCommit):67883\r\n2018/05/23 08:29:35 oracle.go:78: purging below ts:683, len(o.commits):79, len(o.aborts):0, len(o.rowCommit):62418\r\n2018/05/23 08:29:45 oracle.go:78: purging below ts:805, len(o.commits):61, len(o.aborts):0, len(o.rowCommit):48434\r\n2018/05/23 08:29:55 oracle.go:78: purging below ts:979, len(o.commits):88, len(o.aborts):0, len(o.rowCommit):69300\r\n2018/05/23 08:30:05 oracle.go:78: purging below ts:1109, len(o.commits):66, len(o.aborts):0, len(o.rowCommit):52427\r\n2018/05/23 08:30:15 oracle.go:78: purging below ts:1245, len(o.commits):69, len(o.aborts):0, len(o.rowCommit):54660\r\n2018/05/23 08:30:25 oracle.go:78: purging below ts:1331, len(o.commits):43, len(o.aborts):0, len(o.rowCommit):34475\r\n2018/05/23 08:30:35 oracle.go:78: purging below ts:1455, len(o.commits):63, len(o.aborts):0, len(o.rowCommit):50168\r\n2018/05/23 08:30:45 oracle.go:78: purging below ts:1529, len(o.commits):38, len(o.aborts):0, len(o.rowCommit):30462\r\n2018/05/23 08:30:55 oracle.go:78: purging below ts:1605, len(o.commits):38, len(o.aborts):0, len(o.rowCommit):30452\r\n2018/05/23 08:31:05 oracle.go:78: purging below ts:1673, len(o.commits):35, len(o.aborts):0, len(o.rowCommit):28233\r\n2018/05/23 08:31:15 oracle.go:78: purging below ts:1689, len(o.commits):9, len(o.aborts):0, len(o.rowCommit):6520\r\n\r\n```\r\n\r\n* dgraph 1\r\n\r\n```\r\n2018/05/23 08:28:55 groups.go:354: Serving tablet for: name\r\n2018/05/23 08:29:01 draft.go:826: Writing snapshot at index: 91, applied mark: 102\r\n2018/05/23 08:29:04 groups.go:354: Serving tablet for: director.film\r\n2018/05/23 08:29:04 groups.go:354: Serving tablet for: genre\r\n2018/05/23 08:29:04 groups.go:354: Serving tablet for: initial_release_date\r\n2018/05/23 08:29:04 groups.go:354: Serving tablet for: starring\r\n2018/05/23 08:29:04 groups.go:354: Serving tablet for: performance.film\r\n2018/05/23 08:29:04 groups.go:354: Serving tablet for: performance.actor\r\n2018/05/23 08:29:04 groups.go:354: Serving tablet for: actor.film\r\n2018/05/23 08:29:04 groups.go:354: Serving tablet for: performance.character\r\n2018/05/23 08:29:31 draft.go:826: Writing snapshot at index: 605, applied mark: 616\r\n2018/05/23 08:30:01 draft.go:826: Writing snapshot at index: 1036, applied mark: 1047\r\n2018/05/23 08:30:31 draft.go:826: Writing snapshot at index: 1394, applied mark: 1405\r\n2018/05/23 08:31:01 draft.go:826: Writing snapshot at index: 1643, applied mark: 1653\r\n2018/05/23 08:31:31 draft.go:826: Writing snapshot at index: 1687, applied mark: 1697\r\n\r\n```\r\n\r\n* dgraph 2\r\n\r\n```\r\n2018/05/23 08:29:06 draft.go:826: Writing snapshot at index: 177, applied mark: 188\r\n2018/05/23 08:29:36 draft.go:826: Writing snapshot at index: 688, applied mark: 699\r\n2018/05/23 08:30:06 draft.go:826: Writing snapshot at index: 1114, applied mark: 1125\r\n2018/05/23 08:30:36 draft.go:826: Writing snapshot at index: 1453, applied mark: 1464\r\n2018/05/23 08:31:06 draft.go:826: Writing snapshot at index: 1611, applied mark: 1621\r\n2018/05/23 08:31:36 draft.go:826: Writing snapshot at index: 1687, applied mark: 1697\r\n```\r\n\r\n* dgraph 3\r\n\r\n```\r\n2018/05/23 08:29:11 draft.go:826: Writing snapshot at index: 273, applied mark: 286\r\n2018/05/23 08:29:42 draft.go:826: Writing snapshot at index: 754, applied mark: 765\r\n2018/05/23 08:30:11 draft.go:826: Writing snapshot at index: 1196, applied mark: 1207\r\n2018/05/23 08:30:41 draft.go:826: Writing snapshot at index: 1493, applied mark: 1504\r\n2018/05/23 08:31:11 draft.go:826: Writing snapshot at index: 1687, applied mark: 1697\r\n\r\n```\r\n\r\n## Step 3: terminate dgraph 3\r\n\r\nWe terminate dgraph 3 by pressing Ctrl-C three times.\r\n\r\nHere are the log output:\r\n\r\n* dgraph zero\r\n\r\n```\r\n2018/05/23 08:31:51 pool.go:158: Echo error from localhost:7083. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:32:06 zero.go:336: Got connection request: addr:\"localhost:7083\" \r\n2018/05/23 08:32:06 pool.go:108: == CONNECT ==> Setting localhost:7083\r\n2018/05/23 08:32:06 zero.go:445: Connected\r\n2018/05/23 08:33:35 oracle.go:427: Error while fetching minTs from group 1, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:33:36 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:33:41 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:33:46 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:33:51 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:33:56 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:01 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:34:06 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:11 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:34:16 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:21 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n```\r\n\r\n* dgraph 1\r\n\r\n```\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = transport is closing\r\n2018/05/23 08:31:50 node.go:325: Err
8000
or while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:50 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:325: Error while sending message to node with addr: localhost:7083, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 pool.go:158: Echo error from localhost:7083. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:51 node.go:297: No healthy connection found to node Id: 3, err: Unhealthy connection\r\n2018/05/23 08:31:52 node.go:118: Setting conf state to nodes:1 nodes:2 \r\n```\r\n\r\n* dgraph 2\r\n\r\n```\r\n2018/05/23 08:31:51 pool.go:158: Echo error from localhost:7083. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7083: getsockopt: connection refused\"\r\n2018/05/23 08:31:52 node.go:118: Setting conf state to nodes:1 nodes:2 \r\n```\r\n\r\n* dgraph 3\r\n\r\n```\r\n^C\r\n2018/05/23 08:31:49 run.go:342: Caught Ctrl-C. Terminating now (this may take a few seconds)...\r\n2018/05/23 08:31:49 admin.go:52: Got clean exit request\r\n2018/05/23 08:31:49 Stopped taking more http(s) requests. Err: accept tcp 127.0.0.1:8083: use of closed network connection\r\n2018/05/23 08:31:49 All http(s) requests finished.\r\n2018/05/23 08:31:49 gRpc server stopped : accept tcp 127.0.0.1:9083: use of closed network connection\r\n^C\r\n2018/05/23 08:31:49 run.go:342: Caught Ctrl-C. Terminating now (this may take a few seconds)...\r\n^C\r\n2018/05/23 08:31:49 run.go:342: Caught Ctrl-C. Terminating now (this may take a few seconds)...\r\n2018/05/23 08:31:49 run.go:346: Signaled thrice. Aborting!\r\n```\r\n\r\nWe remove dgraph 3 node from the dgraph cluster:\r\n\r\n```\r\n$ http GET 'http://localhost:6081/removeNode?id=3&group=1'\r\nHTTP/1.1 200 OK\r\nAccess-Control-Allow-Credentials: true\r\nAccess-Control-Allow-Headers: Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, X-Auth-Token, Cache-Control, X-Requested-With, X-Dgraph-CommitNow, X-Dgraph-LinRead, X-Dgraph-VarsX-Dgraph-IgnoreIndexConflict\r\nAccess-Control-Allow-Methods: POST, OPTIONS\r\nAccess-Control-Allow-Origin: *\r\nConnection: close\r\nContent-Length: 34\r\nContent-Type: text/plain; charset=utf-8\r\nDate: Wed, 23 May 2018 08:31:52 GMT\r\n\r\nRemoved node with group: 1, idx: 3\r\n```\r\n\r\n## Step 4: start dgraph 3\r\n\r\nWe remove dgraph 3 data, then restart a new instance of dgraph 3.\r\n\r\nHere are the log output:\r\n\r\n* dgraph-zero\r\n\r\n```\r\n2018/05/23 08:34:21 zero.go:336: Got connection request: id:1 addr:\"localhost:7081\" \r\n2018/05/23 08:34:21 zero.go:445: Connected\r\n2018/05/23 08:34:25 zero.go:336: Got connection request: id:2 addr:\"localhost:7082\" \r\n2018/05/23 08:34:25 zero.go:445: Connected\r\n2018/05/23 08:34:26 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:31 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:34:36 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:41 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n```\r\n\r\n* dgraph 1\r\n\r\n```\r\n2018/05/23 08:32:06 pool.go:108: == CONNECT ==> Setting localhost:7083\r\n2018/05/23 08:32:11 predicate.go:251: Sending SNAPSHOT: Time elapsed: 05s, bytes sent: 30 MB, bytes/sec 6029920\r\n2018/05/23 08:32:16 predicate.go:251: Sending SNAPSHOT: Time elapsed: 09s, bytes sent: 76 MB, bytes/sec 8487711\r\n2018/05/23 08:32:21 predicate.go:251: Sending SNAPSHOT: Time elapsed: 15s, bytes sent: 101 MB, bytes/sec 6706558\r\n2018/05/23 08:33:33 pool.go:108: == CONNECT ==> Setting localhost:7083\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x8caca2]\r\n\r\ngoroutine 174 [running]:\r\ntime.(*Ticker).Stop(0x0)\r\n        /usr/local/go/src/time/tick.go:46 +0x22\r\ngithub.com/dgraph-io/dgraph/conn.(*Pool).close(0xc44bd1be00)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/conn/pool.go:139 +0x2f\r\ngithub.com/dgraph-io/dgraph/conn.(*Pools).Remove(0xc4201e5f60, 0xc4507ce470, 0xe)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/conn/pool.go:84 +0xd1\r\ngithub.com/dgraph-io/dgraph/worker.(*groupi).applyState(0xc420112080, 0xc49f913450)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/groups.go:261 +0x13d\r\ngithub.com/dgraph-io/dgraph/worker.(*groupi).periodicMembershipUpdate.func1(0x1aa1620, 0xc4201382b0, 0x7f18c8a0b040, 0xc420176400, 0xc4201380b0, 0xc420112080)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/groups.go:514 +0x61\r\ncreated by github.com/dgraph-io/dgraph/worker.(*groupi).periodicMembershipUpdate\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/groups.go:516 +0x274\r\n```\r\n\r\n* dgraph 2\r\n\r\n```\r\n2018/05/23 08:32:06 pool.go:108: == CON
8000
NECT ==> Setting localhost:7083\r\n2018/05/23 08:33:33 pool.go:108: == CONNECT ==> Setting localhost:7083\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x8caca2]\r\n\r\ngoroutine 217 [running]:\r\ntime.(*Ticker).Stop(0x0)\r\n        /usr/local/go/src/time/tick.go:46 +0x22\r\ngithub.com/dgraph-io/dgraph/conn.(*Pool).close(0xc48722d950)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/conn/pool.go:139 +0x2f\r\ngithub.com/dgraph-io/dgraph/conn.(*Pools).Remove(0xc420239cc0, 0xc44b696460, 0xe)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/conn/pool.go:84 +0xd1\r\ngithub.com/dgraph-io/dgraph/worker.(*groupi).applyState(0xc420146000, 0xc498113450)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/groups.go:261 +0x13d\r\ngithub.com/dgraph-io/dgraph/worker.(*groupi).periodicMembershipUpdate.func1(0x1aa1620, 0xc420348170, 0x7fad29d99c00, 0xc42046e0c0, 0xc420348110, 0xc420146000)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/groups.go:514 +0x61\r\ncreated by github.com/dgraph-io/dgraph/worker.(*groupi).periodicMembershipUpdate\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/groups.go:516 +0x274\r\n```\r\n\r\n* dgraph 3\r\n\r\n```\r\n$ dgraph server --bindall=false -o 3 --lru_mb 2048 --zero=localhost:5081 --my=localhost:7083 --posting_tables memorymap\r\n2018/05/23 08:32:06 groups.go:65: --my flag is provided without bindall, Did you forget to specify bindall?\r\n2018/05/23 08:32:06 groups.go:78: Current Raft Id: 0\r\n2018/05/23 08:32:06 worker.go:89: Worker listening at address: 127.0.0.1:7083\r\n2018/05/23 08:32:06 gRPC server started.  Listening on port 9083\r\n2018/05/23 08:32:06 HTTP server started.  Listening on port 8083\r\n2018/05/23 08:32:06 pool.go:108: == CONNECT ==> Setting localhost:5081\r\n2018/05/23 08:32:06 groups.go:105: Connected to group zero. Assigned group: 1\r\n2018/05/23 08:32:06 pool.go:108: == CONNECT ==> Setting localhost:7081\r\n2018/05/23 08:32:06 pool.go:108: == CONNECT ==> Setting localhost:7082\r\n2018/05/23 08:32:06 draft.go:170: Node ID: 4 with GroupID: 1\r\n2018/05/23 08:32:06 node.go:240: Group 1 found 0 entries\r\n2018/05/23 08:32:06 draft.go:855: Calling IsPeer\r\n2018/05/23 08:32:06 draft.go:860: Done with IsPeer call\r\n2018/05/23 08:32:06 draft.go:907: New Node for group: 1\r\n2018/05/23 08:32:06 draft.go:912: Retrieving snapshot from peer: 1\r\n2018/05/23 08:32:11 predicate.go:43: Getting SNAPSHOT: Time elapsed: 05s, bytes written: 29 MB, bytes/sec 5755576\r\n2018/05/23 08:32:16 predicate.go:43: Getting SNAPSHOT: Time elapsed: 10s, bytes written: 76 MB, bytes/sec 7550221\r\n2018/05/23 08:32:21 predicate.go:43: Getting SNAPSHOT: Time elapsed: 15s, bytes written: 97 MB, bytes/sec 6452434\r\n2018/05/23 08:32:26 predicate.go:43: Getting SNAPSHOT: Time elapsed: 20s, bytes written: 101 MB, bytes/sec 5029919\r\n2018/05/23 08:32:31 predicate.go:43: Getting SNAPSHOT: Time elapsed: 25s, bytes written: 101 MB, bytes/sec 4023935\r\n2018/05/23 08:32:36 predicate.go:43: Getting SNAPSHOT: Time elapsed: 30s, bytes written: 101 MB, bytes/sec 3353279\r\n2018/05/23 08:32:41 predicate.go:43: Getting SNAPSHOT: Time elapsed: 35s, bytes written: 101 MB, bytes/sec 2874239\r\n2018/05/23 08:32:46 predicate.go:43: Getting SNAPSHOT: Time elapsed: 40s, bytes written: 101 MB, bytes/sec 2514959\r\n2018/05/23 08:32:51 predicate.go:43: Getting SNAPSHOT: Time elapsed: 45s, bytes written: 101 MB, bytes/sec 2235519\r\n2018/05/23 08:32:56 predicate.go:43: Getting SNAPSHOT: Time elapsed: 50s, bytes written: 101 MB, bytes/sec 2011967\r\n2018/05/23 08:33:01 predicate.go:43: Getting SNAPSHOT: Time elapsed: 55s, bytes written: 101 MB, bytes/sec 1829061\r\n2018/05/23 08:33:06 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m00s, bytes written: 101 MB, bytes/sec 1676639\r\n2018/05/23 08:33:11 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m05s, bytes written: 101 MB, bytes/sec 1547667\r\n2018/05/23 08:33:16 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m10s, bytes written: 101 MB, bytes/sec 1437119\r\n2018/05/23 08:33:21 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m15s, bytes written: 101 MB, bytes/sec 1341311\r\n2018/05/23 08:33:26 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m20s, bytes written: 101 MB, bytes/sec 1257479\r\n2018/05/23 08:33:31 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m25s, bytes written: 101 MB, bytes/sec 1183510\r\n2018/05/23 08:33:36 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:33:36 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:33:36 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m30s, bytes written: 101 MB, bytes/sec 1117759\r\n2018/05/23 08:33:41 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m35s, bytes written: 101 MB, bytes/sec 1058930\r\n2018/05/23 08:33:46 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:33:46 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:33:46 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m40s, bytes written: 101 MB, bytes/sec 1005983\r\n2018/05/23 08:33:51 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m45s, bytes written: 101 MB, bytes/sec 958079\r\n2018/05/23 08:33:56 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:33:56 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:33:56 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m50s, bytes written: 101 MB, bytes/sec 914530\r\n2018/05/23 08:34:01 predicate.go:43: Getting SNAPSHOT: Time elapsed: 01m55s, bytes written: 101 MB, bytes/sec 874768\r\n2018/05/23 08:34:06 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:34:06 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:06 predicate.go:43: Getting SNAPSHOT: Time elapsed: 02m00s, bytes written: 101 MB, bytes/sec 838319\r\n2018/05/23 08:34:11 predicate.go:43: Getting SNAPSHOT: Time elapsed: 02m05s, bytes written: 101 MB, bytes/sec 804787\r\n2018/05/23 08:34:16 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:34:16 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:16 predicate.go:43: Getting SNAPSHOT: Time elapsed: 02m10s, bytes written: 101 MB, bytes/sec 773833\r\n2018/05/23 08:34:21 predicate.go:43: Getting SNAPSHOT: Time elapsed: 02m15s, bytes written: 101 MB, bytes/sec 745173\r\n2018/05/23 08:34:26 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:34:26 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:26 predicate.go:43: Getting SNAPSHOT: Time elapsed: 02m20s, bytes written: 101 MB, bytes/sec 718559\r\n2018/05/23 08:34:31 predicate.go:43: Getting SNAPSHOT: Time elapsed: 02m25s, bytes written: 101 MB, bytes/sec 693781\r\n2018/05/23 08:34:36 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:34:36 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:36 predicate.go:43: Getting SNAPSHOT: Time elapsed: 02m30s, bytes written: 101 MB, bytes/sec 670655\r\n2018/05/23 08:34:41 predicate.go:43: Getting SNAPSHOT: Time elapsed: 02m35s, bytes written: 101 MB, bytes/sec 649021\r\n```\r\n\r\n## Step 5: attempt to restart dgraph 1 or dgraph 2\r\n\r\nWe attempt to restart dgraph 1 or dgraph 2, but dgraph server panics in [InitAndStartNode](https://github.com/dgraph-io/dgraph/blob/d907674eddb325592e941815d8e91c21a38314ff/worker/draft.go#L902). There is no way to restart these dgraph servers again.\r\n\r\nHere are the log output:\r\n\r\n* dgraph 1\r\n\r\n```\r\n$ dgraph server --bindall=false -o 1 --lru_mb 2048 --zero=localhost:5081 --my=localhost:7081 --posting_tables memorymap\r\n2018/05/23 08:34:21 groups.go:65: --my flag is provided without bindall, Did you forget to specify bindall?\r\n2018/05/23 08:34:21 groups.go:78: Current Raft Id: 1\r\n2018/05/23 08:34:21 worker.go:89: Worker listening at address: 127.0.0.1:7081\r\n2018/05/23 08:34:21 gRPC server started.  Listening on port 9081\r\n2018/05/23 08:34:21 HTTP server started.  Listening on port 8081\r\n2018/05/23 08:34:21 pool.go:108: == CONNECT ==> Setting localhost:5081\r\n2018/05/23 08:34:21 groups.go:105: Connected to group zero. Assigned group: 0\r\n2018/05/23 08:34:21 pool.go:108: == CONNECT ==> Setting localhost:7083\r\n2018/05/23 08:34:21 pool.go:158: Echo error from localhost:7082. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7082: getsockopt: connection refused\"\r\n2018/05/23 08:34:21 pool.go:108: == CONNECT ==> Setting localhost:7082\r\n2018/05/23 08:34:22 draft.go:170: Node ID: 1 with GroupID: 1\r\n2018/05/23 08:34:22 node.go:213: Found Snapshot, Metadata: {ConfState:{Nodes:[1 2 3] XXX_unrecognized:[]} Index:1687 Term:2 XXX_unrecognized:[]}\r\n2018/05/23 08:34:22 node.go:228: Found hardstate: {Term:2 Vote:1 Commit:1698 XXX_unrecognized:[]}\r\n2018/05/23 08:34:22 node.go:240: Group 1 found 11 entries\r\n2018/05/23 08:34:22 draft.go:896: Restarting node for group: 1\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x1107d19]\r\n\r\ngoroutine 240 [running]:\r\ngithub.com/dgraph-io/dgraph/worker.(*node).InitAndStartNode(0xc42b02c870, 0xc432d82950)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/draft.go:902 +0x3b9\r\ngithub.com/dgraph-io/dgraph/worker.StartRaftNodes(0xc42015c000, 0x0)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/groups.go:120 +0x88b\r\ncreated by github.com/dgraph-io/dgraph/dgraph/cmd/server.run\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/dgraph/cmd/server/run.go:355 +0x91f\r\n\r\n```\r\n\r\n* dgraph 2\r\n\r\n```\r\n$ dgraph server --bindall=false -o 2 --lru_mb 2048 --zero=localhost:5081 --my=localhost:7082 --posting_tables memorymap\r\n2018/05/23 08:34:25 groups.go:65: --my flag is provided without bindall, Did you forget to specify bindall?\r\n2018/05/23 08:34:25 groups.go:78: Current Raft Id: 2\r\n2018/05/23 08:34:25 worker.go:89: Worker listening at address: 127.0.0.1:7082\r\n2018/05/23 08:34:25 gRPC server started.  Listening on port 9082\r\n2018/05/23 08:34:25 HTTP server started.  Listening on port 8082\r\n2018/05/23 08:34:25 pool.go:108: == CONNECT ==> Setting localhost:5081\r\n2018/05/23 08:34:25 groups.go:105: Connected to group zero. Assigned group: 0\r\n2018/05/23 08:34:25 pool.go:158: Echo error from localhost:7081. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp [::1]:7081: getsockopt: connection refused\"\r\n2018/05/23 08:34:25 pool.go:108: == CONNECT ==> Setting localhost:7081\r\n2018/05/23 08:34:25 pool.go:108: == CONNECT ==> Setting localhost:7083\r\n2018/05/23 08:34:25 draft.go:170: Node ID: 2 with GroupID: 1\r\n2018/05/23 08:34:25 node.go:213: Found Snapshot, Metadata: {ConfState:{Nodes:[1 2 3] XXX_unrecognized:[]} Index:1687 Term:2 XXX_unrecognized:[]}\r\n2018/05/23 08:34:25 node.go:228: Found hardstate: {Term:2 Vote:0 Commit:1698 XXX_unrecognized:[]}\r\n2018/05/23 08:34:25 node.go:240: Group 1 found 11 entries\r\n2018/05/23 08:34:25 draft.go:896: Restarting node for group: 1\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x1107d19]\r\n\r\ngoroutine 291 [running]:\r\ngithub.com/dgraph-io/dgraph/worker.(*node).InitAndStartNode(0xc420118900, 0xc431e97000)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/draft.go:902 +0x3b9\r\ngithub.com/dgraph-io/dgraph/worker.StartRaftNodes(0xc4257ea000, 0x0)\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/worker/groups.go:120 +0x88b\r\ncreated by github.com/dgraph-io/dgraph/dgraph/cmd/server.run\r\n        /home/djc/go/src/github.com/dgraph-io/dgraph/dgraph/cmd/server/run.go:355 +0x91f\r\n```\r\n\r\n- Expected behaviour and actual result.\r\n\r\nAfter removing then re-adding a dgraph node in a dgraph cluster, at least one dgraph server will crashes. These dgraph servers can't be restarted.\r\n\r\nWe should be able to remove then re-add a dgraph node without affecting the other dgraph nodes.\r\n","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2409","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2409/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2409/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2409/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2409","id":325567392,"node_id":"MDU6SXNzdWUzMjU1NjczOTI=","number":2409,"title":"reverse edge not deleted - dgraph client","user":{"login":"rebootcode","id":9850427,"node_id":"MDQ6VXNlcjk4NTA0Mjc=","avatar_url":"https://avatars1.githubusercontent.com/u/9850427?v=4","gravatar_id":"","url":"https://api.github.com/users/rebootcode","html_url":"https://github.com/rebootcode","followers_url":"https://api.github.com/users/rebootcode/followers","following_url":"https://api.github.com/users/rebootcode/following{/other_user}","gists_url":"https://api.github.com/users/rebootcode/gists{/gist_id}","starred_url":"https://api.github.com/users/rebootcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rebootcode/subscriptions","organizations_url":"https://api.github.com/users/rebootcode/orgs","repos_url":"https://api.github.com/users/rebootcode/repos","events_url":"https://api.github.com/users/rebootcode/events{/privacy}","received_events_url":"https://api.github.com/users/rebootcode/received_events","type":"User","site_admin":false},"labels":[{"id":633145183,"node_id":"MDU6TGFiZWw2MzMxNDUxODM=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/investigate","name":"investigate","color":"e99695","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-23T06:37:38Z","updated_at":"2018-06-11T18:51:42Z","closed_at":"2018-06-11T18:48:04Z","author_association":"NONE","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\n1.0.5\r\n\r\n- Have you tried reproducing the issue with latest release?\r\nYes\r\n\r\n- What is the hardware spec (RAM, OS)?\r\n8GB RAM, MacOS\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n=> Create a reverse edge and delete parent Node, Reverse edge will remain intact and it is not deleted.\r\n\r\n- Expected behaviour and actual result.\r\n=> Reverse edge to be deleted.\r\n\r\nScreenshot here - ![Image of dgraph](http://prublem.com/files/lvnq6mop2d7.png)","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2407","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2407/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2407/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2407/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2407","id":325483038,"node_id":"MDU6SXNzdWUzMjU0ODMwMzg=","number":2407,"title":"Nothing Works","user":{"login":"bradennapier","id":15365418,"node_id":"MDQ6VXNlcjE1MzY1NDE4","avatar_url":"https://avatars3.githubusercontent.com/u/15365418?v=4","gravatar_id":"","url":"https://api.github.com/users/bradennapier","html_url":"https://github.com/bradennapier","followers_url":"https://api.github.com/users/bradennapier/followers","following_url":"https://api.github.com/users/bradennapier/following{/other_user}","gists_url":"https://api.github.com/users/bradennapier/gists{/gist_id}","starred_url":"https://api.github.com/users/bradennapier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradennapier/subscriptions","organizations_url":"https://api.github.com/users/bradennapier/orgs","repos_url":"https://api.github.com/users/bradennapier/repos","events_url":"https://api.github.com/users/bradennapier/events{/privacy}","received_events_url":"https://api.github.com/users/bradennapier/received_events","type":"User","site_admin":false},"labels":[{"id":575130195,"node_id":"MDU6TGFiZWw1NzUxMzAxOTU=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/question","name":"question","color":"bfd4f2","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-22T22:16:47Z","updated_at":"2018-05-22T22:32:28Z","closed_at":"2018-05-22T22:32:21Z","author_association":"NONE","body":"none of your demos or examples work they all gives errors that dgraph is not working or running","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2402","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2402/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2402/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2402/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2402","id":324514501,"node_id":"MDU6SXNzdWUzMjQ1MTQ1MDE=","number":2402,"title":"expand(_predicate_) should return localized edges","user":{"login":"lazharichir","id":12215372,"node_id":"MDQ6VXNlcjEyMjE1Mzcy","avatar_url":"https://avatars1.githubusercontent.com/u/12215372?v=4","gravatar_id":"","url":"https://api.github.com/users/lazharichir","html_url":"https://github.com/lazharichir","followers_url":"https://api.github.com/users/lazharichir/followers","following_url":"https://api.github.com/users/lazharichir/following{/other_user}","gists_url":"https://api.github.com/users/lazharichir/gists{/gist_id}","starred_url":"https://api.github.com/users/lazharichir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lazharichir/subscriptions","organizations_url":"https://api.github.com/users/lazharichir/orgs","repos_url":"https://api.github.com/users/lazharichir/repos","events_url":"https://api.github.com/users/lazharichir/events{/privacy}","received_events_url":"https://api.github.com/users/lazharichir/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"MichelDiz","id":6570955,"node_id":"MDQ6VXNlcjY1NzA5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/6570955?v=4","gravatar_id":"","url":"https://api.github.com/users/MichelDiz","html_url":"https://github.com/MichelDiz","followers_url":"https://api.github.com/users/MichelDiz/followers","following_url":"https://api.github.com/users/MichelDiz/following{/other_user}","gists_url":"https://api.github.com/users/MichelDiz/gists{/gist_id}","starred_url":"https://api.github.com/users/MichelDiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MichelDiz/subscriptions","organizations_url":"https://api.github.com/users/MichelDiz/orgs","repos_url":"https://api.github.com/users/MichelDiz/repos","events_url":"https://api.github.com/users/MichelDiz/events{/privacy}","received_events_url":"https://api.github.com/users/MichelDiz/received_events","type":"User","site_admin":false},"assignees":[{"login":"MichelDiz","id":6570955,"node_id":"MDQ6VXNlcjY1NzA5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/6570955?v=4","gravatar_id":"","url":"https://api.github.com/users/MichelDiz","html_url":"https://github.com/MichelDiz","followers_url":"https://api.github.com/users/MichelDiz/followers","following_url":"https://api.github.com/users/MichelDiz/following{/other_user}","gists_url":"https://api.github.com/users/MichelDiz/gists{/gist_id}","starred_url":"https://api.github.com/users/MichelDiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MichelDiz/subscriptions","organizations_url":"https://api.github.com/users/MichelDiz/orgs","repos_url":"https://api.github.com/users/MichelDiz/repos","events_url":"https://api.github.com/users/MichelDiz/events{/privacy}","received_events_url":"https://api.github.com/users/MichelDiz/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-05-18T18:46:29Z","updated_at":"2018-06-30T15:16:25Z","closed_at":"2018-06-30T15:16:25Z","author_association":"NONE","body":"When using expand(_predicate_), it only returns non-localized edges. It should return ALL predicates, including predicate@lang, and all of them if there are many languages. Or is this the expected return?\r\n\r\n```\r\n {\r\n  \r\n  var(func: eq(t.id, \"cjNzkzM\")) { phrase0uid as uid, phrase0preds as _predicate_ }\r\n  phrase0(func: uid(phrase0uid))  {\r\n    expand(val(phrase0preds))\r\n  }\r\n    \r\n}\r\n```\r\n\r\nReturns everything BUT localized strings.","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2399","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2399/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2399/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2399/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2399","id":324376717,"node_id":"MDU6SXNzdWUzMjQzNzY3MTc=","number":2399,"title":"Go client - Use variable to set predicate name?","user":{"login":"mbudge","id":15329154,"node_id":"MDQ6VXNlcjE1MzI5MTU0","avatar_url":"https://avatars0.githubusercontent.com/u/15329154?v=4","gravatar_id":"","url":"https://api.github.com/users/mbudge","html_url":"https://github.com/mbudge","followers_url":"https://api.github.com/users/mbudge/followers","following_url":"https://api.github.com/users/mbudge/following{/other_user}","gists_url":"https://api.github.com/users/mbudge/gists{/gist_id}","starred_url":"https://api.github.com/users/mbudge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbudge/subscriptions","organizations_url":"https://api.github.com/users/mbudge/orgs","repos_url":"https://api.github.com/users/mbudge/repos","events_url":"https://api.github.com/users/mbudge/events{/privacy}","received_events_url":"https://api.github.com/users/mbudge/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-18T11:40:39Z","updated_at":"2018-06-18T20:32:55Z","closed_at":"2018-06-18T20:32:55Z","author_association":"NONE","body":"Hi,\r\n\r\nPlease could you allow setting the predicate as a map variable value?\r\n\r\nIt would make the Go client easier to use, as we could reuse a generic \"get predicate UID\" function throughout our application. \r\n\r\n```\r\nfunc uidFromAsnNumber(ctx context.Context, txn *dgo.Txn, predicateName, string, asnNumber string) (string, error) {\r\n\r\n\tvariableMap := map[string]string{\"$predicate\": predicateName, \"$asnNumber\": asnNumber}\r\n\r\n\tq := `query Asn($asnNumber: string) {\r\n\t\tasnuid(func: eq($predicate, $asnNumber)) @normalize {\r\n\t\t\tuid: uid\r\n\t\t}\r\n\t}`\r\n\r\n\tresp, err := txn.QueryWithVars(ctx, q, vars)\r\n\tif err != nil {\r\n\t\treturn \"\", err\r\n\t}\r\n```\r\n\r\nEven better would be a wrapper function in the go client, so we just specify the predicate and the value, and it returns the UID.\r\n\r\nMany thanks.","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2397","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2397/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2397/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2397/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2397","id":324000512,"node_id":"MDU6SXNzdWUzMjQwMDA1MTI=","number":2397,"title":"Predicate moves can take down Dgraph indefinitely","user":{"login":"aphyr","id":3748,"node_id":"MDQ6VXNlcjM3NDg=","avatar_url":"https://avatars3.githubusercontent.com/u/3748?v=4","gravatar_id":"","url":"https://api.github.com/users/aphyr","html_url":"https://github.com/aphyr","followers_url":"https://api.github.com/users/aphyr/followers","following_url":"https://api.github.com/users/aphyr/following{/other_user}","gists_url":"https://api.github.com/users/aphyr/gists{/gist_id}","starred_url":"https://api.github.com/users/aphyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aphyr/subscriptions","organizations_url":"https://api.github.com/users/aphyr/orgs","repos_url":"https://api.github.com/users/aphyr/repos","events_url":"https://api.github.com/users/aphyr/events{/privacy}","received_events_url":"https://api.github.com/users/aphyr/received_events","type":"User","site_admin":false},"labels":[{"id":252336064,"node_id":"MDU6TGFiZWwyNTIzMzYwNjQ=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/bug","name":"bug","color":"fc2929","default":true},{"id":935537601,"node_id":"MDU6TGFiZWw5MzU1Mzc2MDE=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/verify-fix","name":"verify-fix","color":"aafc9c","default":false}],"state":"closed","locked":false,"assignee":{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false},"assignees":[{"login":"manishrjain","id":1782324,"node_id":"MDQ6VXNlcjE3ODIzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1782324?v=4","gravatar_id":"","url":"https://api.github.com/users/manishrjain","html_url":"https://github.com/manishrjain","followers_url":"https://api.github.com/users/manishrjain/followers","following_url":"https://api.github.com/users/manishrjain/following{/other_user}","gists_url":"https://api.github.com/users/manishrjain/gists{/gist_id}","starred_url":"https://api.github.com/users/manishrjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishrjain/subscriptions","organizations_url":"https://api.github.com/users/manishrjain/orgs","repos_url":"https://api.github.com/users/manishrjain/repos","events_url":"https://api.github.com/users/manishrjain/events{/privacy}","received_events_url":"https://api.github.com/users/manishrjain/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2018-05-17T12:26:11Z","updated_at":"2018-05-18T16:34:12Z","closed_at":"2018-05-18T16:34:11Z","author_association":"NONE","body":"In the build @manishrjain provided for testing on 2018-05-16 (sorry, don't have a SHA!), with predicate moves roughly every 10 seconds, Dgraph went down: [20180516T194304.000-0500.zip](https://github.com/dgraph-io/dgraph/files/2013106/20180516T194304.000-0500.1.zip)\r\n\r\n![latency-raw](https://user-images.githubusercontent.com/3748/40177752-6fc12c52-59ad-11e8-9231-c009096e171e.png)\r\n\r\nIn particular, it looks like a predicate move caused a single node's Alpha to crash with the following message:\r\n\r\n```clj\r\n2018/05/16 17:47:21 predicate_move.go:300: Move predicate request for pred: [amount_0], src: [2], dst: [1]\r\n2018/05/16 17:47:21 predicate_move.go:308: Trying to abort pending mutations. Loop: 0\r\n2018/05/16 17:47:21 predicate_move.go:176: Sent 2 keys for predicate amount_0\r\n2018/05/16 17:47:21 predicate_move.go:244: Got ReceivePredicate. Group: 2. Am leader: true\r\n2018/05/16 17:47:21 predicate_move.go:193: Receiving predicate. Batching and proposing key values\r\n2018/05/16 17:47:21 predicate_move.go:213: Predicate being received: type_0\r\n2018/05/16 17:47:21 index.go:934: Dropping predicate: [type_0]\r\n2018/05/16 17:47:21 schema.go:63: Deleting schema for predicate: [type_0]\r\n2018/05/16 17:47:22 predicate_move.go:43: Writing 3 keys\r\n2018/05/16 17:47:22 schema.go:252: Setting schema for attr type_0: string, tokenizer: [exact], directive: INDEX, count: false\r\n2018/05/16 17:47:22 predicate_move.go:278: Proposed 3 keys. Error: <nil>\r\n2018/05/16 17:47:22 predicate_move.go:300: Move predicate request for pred: [type_1], src: [2], dst: [1]\r\n2018/05/16 17:47:22 predicate_move.go:308: Trying to abort pending mutations. Loop: 0\r\n2018/05/16 17:47:22 predicate_move.go:308: Trying to abort pending mutations. Loop: 1\r\n2018/05/16 17:47:22 unexpected meta: 0\r\ngithub.com/dgraph-io/dgraph/x.Fatalf\r\n\t/home/mrjn/go/src/github.com/dgraph-io/dgraph/x/error.go:100\r\ngithub.com/dgraph-io/dgraph/posting.ReadPostingList\r\n\t/home/mrjn/go/src/github.com/dgraph-io/dgraph/posting/mvcc.go:424\r\ngithub.com/dgraph-io/dgraph/worker.movePredicateHelper\r\n\t/home/mrjn/go/src/github.com/dgraph-io/dgraph/worker/predicate_move.go:124\r\ngithub.com/dgraph-io/dgraph/worker.(*grpcWorker).MovePredicate\r\n\t/home/mrjn/go/src/github.com/dgraph-io/dgraph/worker/
2f37
predicate_move.go:321\r\ngithub.com/dgraph-io/dgraph/protos/intern._Worker_MovePredicate_Handler\r\n\t/home/mrjn/go/src/github.com/dgraph-io/dgraph/protos/intern/internal.pb.go:2772\r\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\r\n\t/home/mrjn/go/src/google.golang.org/grpc/server.go:1011\r\ngoogle.golang.org/grpc.(*Server).handleStream\r\n\t/home/mrjn/go/src/google.golang.org/grpc/server.go:1249\r\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\r\n\t/home/mrjn/go/src/google.golang.org/grpc/server.go:680\r\nruntime.goexit\r\n\t/usr/lib/go-1.10/src/runtime/asm_amd64.s:2361\r\n```\r\n\r\nOddly, the cluster was never able to recover from this state, even though five Zero nodes and four Alpha nodes were running and connected. All alpha nodes logged\r\n\r\n```\r\n2018/05/16 17:47:24 oracle.go:425: Error while fetching minTs from group 2, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp 192.168.122.13:7080: connect: connection refused\"\r\n2018/05/16 17:47:28 pool.go:158: Echo error from n3:7080. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp 192.168.122.13:7080: connect: connection refused\r\n```\r\n\r\n... indefinitely, and Zero nodes logged the same thing:\r\n\r\n```\r\n2018/05/16 17:47:24 oracle.go:425: Error while fetching minTs from group 2, err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp 192.168.122.13:7080: connect: connection refused\"\r\n2018/05/16 17:47:28 pool.go:158: Echo error from n3:7080. Err: rpc error: code = Unavailable desc = all SubConns are in TransientFailure, latest connection error: connection error: desc = \"transport: Error while dialing dial tcp 192.168.122.13:7080: connect: connection refused\"\r\n```\r\n\r\nEvery request either timed out (on n3), or returned UNAVAILABLE. Attempts to perform further predicate moves all timed out as well, though Zero would answer `/state` queries:\r\n\r\n```clj\r\n{:counter \"1079\",\r\n :groups\r\n {1\r\n  {:members\r\n   {1 {:id \"1\", :groupId 1, :addr \"n1:7080\"},\r\n    2\r\n    {:id \"2\",\r\n     :groupId 1,\r\n     :addr \"n2:7080\",\r\n     :leader true,\r\n     :lastUpdate \"1526517895\"},\r\n    4 {:id \"4\", :groupId 1, :addr \"n4:7080\"}},\r\n   :tablets\r\n   {:amount_0 {:groupId 1, :predicate \"amount_0\", :force true},\r\n    :key_2 {:groupId 1, :predicate \"key_2\", :force true},\r\n    :type_2 {:groupId 1, :predicate \"type_2\", :force true}}},\r\n  2\r\n  {:members\r\n   {3\r\n    {:id \"3\",\r\n     :groupId 2,\r\n     :addr \"n3:7080\",\r\n     :leader true,\r\n     :lastUpdate \"1526517898\"},\r\n    5 {:id \"5\", :groupId 2, :addr \"n5:7080\"}},\r\n   :tablets\r\n   {:_predicate_ {:groupId 2, :predicate \"_predicate_\", :force true},\r\n    :amount_1 {:groupId 2, :predicate \"amount_1\", :force true},\r\n    :amount_2 {:groupId 2, :predicate \"amount_2\", :force true},\r\n    :key_0 {:groupId 2, :predicate \"key_0\", :force true},\r\n    :key_1 {:groupId 2, :predicate \"key_1\", :force true},\r\n    :type_0 {:groupId 2, :predicate \"type_0\", :force true},\r\n    :type_1 {:groupId 2, :predicate \"type_1\", :force true}}}},\r\n :zeros\r\n {1 {:id \"1\", :addr \"n1:5080\"},\r\n  2 {:id \"2\", :addr \"n2:5080\"},\r\n  3 {:id \"3\", :addr \"n3:5080\", :leader true},\r\n  4 {:id \"4\", :addr \"n4:5080\"},\r\n  5 {:id \"5\", :addr \"n5:5080\"}},\r\n :maxLeaseId \"20000\",\r\n :maxTxnTs \"20000\"}\r\n```","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2393","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2393/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2393/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2393/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2393","id":323864468,"node_id":"MDU6SXNzdWUzMjM4NjQ0Njg=","number":2393,"title":"Exported schema is not consistent with the original and live import is failed","user":{"login":"ericpai","id":3821212,"node_id":"MDQ6VXNlcjM4MjEyMTI=","avatar_url":"https://avatars2.githubusercontent.com/u/3821212?v=4","gravatar_id":"","url":"https://api.github.com/users/ericpai","html_url":"https://github.com/ericpai","followers_url":"https://api.github.com/users/ericpai/followers","following_url":"https://api.github.com/users/ericpai/following{/other_user}","gists_url":"https://api.github.com/users/ericpai/gists{/gist_id}","starred_url":"https://api.github.com/users/ericpai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericpai/subscriptions","organizations_url":"https://api.github.com/users/ericpai/orgs","repos_url":"https://api.github.com/users/ericpai/repos","events_url":"https://api.github.com/users/ericpai/events{/privacy}","received_events_url":"https://api.github.com/users/ericpai/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-17T04:00:03Z","updated_at":"2018-05-18T00:19:45Z","closed_at":"2018-05-18T00:19:45Z","author_association":"CONTRIBUTOR","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\n\r\ndgraph v1.0.5\r\n\r\n- Have you tried reproducing the issue with latest release?\r\n\r\nYes, we met and reproduced the issue in a cluster consisting of 3 dgraph-zero and 3 dgraph-server.\r\nThe replica is 3.\r\n\r\n- What is the hardware spec (RAM, OS)?\r\n\r\nOS: CentOS7.2\r\nRAM: 16GB\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n\r\n1. The cluster is set to empty at first: `curl -X POST dgraph-server:8080/alter -d '{\"drop_all\": true}'`\r\n2. Alter schema as the [tour page](https://tour.dgraph.io/intro/3/) said.\r\n3. Mutate data as the [tour page](https://tour.dgraph.io/intro/4/) said.\r\n4. Export the data and schema: `curl dgraph-server:8080/admin/export` and got the following files:\r\n  - dgraph-1-2018-05-17-11-14.schema.gz\r\n  - dgraph-1-2018-05-17-11-14.rdf.gz\r\n5. Clear all the data again: `curl -X POST dgraph-server:8080/alter -d '{\"drop_all\": true}'`\r\n6. Use `dgraph live` import the data back but got the following infinite outputs.\r\n\r\n```\r\n[root@dev1 ~]# dgraph live -r dgraph-1-2018-05-17-11-14.rdf.gz -s dgraph-1-2018-05-17-11-14.schema.gz --zero=dgraph-zero:5080 --dgraph=dgraph-server:9080 -c 1\r\n2018/05/17 11:17:19 run.go:337: Creating temp client directory at /tmp/x312076153\r\n\r\nProcessing dgraph-1-2018-05-17-11-14.schema.gz\r\n2018/05/17 11:17:19 run.go:354: Processed schema file\r\n\r\nProcessing dgraph-1-2018-05-17-11-14.rdf.gz\r\n2018/05/17 11:17:19 batch.go:125: Error while mutating Attr: [name] should have @lang directive in schema to mutate edge: [entity:70012 attr:\"name\" value:\"Artyom\" lang:\"en\" ]\r\n2018/05/17 11:17:19 batch.go:125: Error while mutating Attr: [name] should have @lang directive in schema to mutate edge: [entity:70012 attr:\"name\" value:\"Artyom\" lang:\"en\" ]\r\n2018/05/17 11:17:19 batch.go:125: Error while mutating Attr: [name] should have @lang directive in schema to mutate edge: [entity:70012 attr:\"name\" value:\"Artyom\" lang:\"en\" ]\r\n...\r\n```\r\n\r\n7. Uncompress the schema file and check the content.\r\n\r\n```\r\n[root@dev1 ~]# gunzip dgraph-1-2018-05-17-11-14.schema.gz\r\n[root@dev1 ~]# cat dgraph-1-2018-05-17-11-14.schema\r\nage:int @index(int) .\r\nname:string @index(term) .\r\nfriend:uid @count .\r\nowns_pet:uid .\r\n_share_hash_:string @index(exact) .\r\n```\r\n\r\nThe original one, copy from [tour](https://tour.dgraph.io/intro/3/)\r\n\r\n```\r\nname: string @index(term) @lang .\r\nage: int @index(int) .\r\nfriend: uid @count .\r\n```\r\n\r\nThe `@lang` of predicate `name`  is missing, which causing the `dgraph live` error.\r\n\r\n- Expected behaviour and actual result.\r\n\r\n1. The `dgraph live` should be executed successfully as long as the schema and rdf files are exported successfully.\r\n2. The exported schema should equal the original one.\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2390","repository_url":"https://api.github.com/repos/dgraph-io/dgraph","labels_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2390/labels{/name}","comments_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2390/comments","events_url":"https://api.github.com/repos/dgraph-io/dgraph/issues/2390/events","html_url":"https://github.com/dgraph-io/dgraph/issues/2390","id":323507495,"node_id":"MDU6SXNzdWUzMjM1MDc0OTU=","number":2390,"title":"bulk loader: program exceeds 10000-thread limit","user":{"login":"QianchaoLiu","id":6898722,"node_id":"MDQ6VXNlcjY4OTg3MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/6898722?v=4","gravatar_id":"","url":"https://api.github.com/users/QianchaoLiu","html_url":"https://github.com/QianchaoLiu","followers_url":"https://api.github.com/users/QianchaoLiu/followers","following_url":"https://api.github.com/users/QianchaoLiu/following{/other_user}","gists_url":"https://api.github.com/users/QianchaoLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/QianchaoLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QianchaoLiu/subscriptions","organizations_url":"https://api.github.com/users/QianchaoLiu/orgs","repos_url":"https://api.github.com/users/QianchaoLiu/repos","events_url":"https://api.github.com/users/QianchaoLiu/events{/privacy}","received_events_url":"https://api.github.com/users/QianchaoLiu/received_events","type":"User","site_admin":false},"labels":[{"id":252336064,"node_id":"MDU6TGFiZWwyNTIzMzYwNjQ=","url":"https://api.github.com/repos/dgraph-io/dgraph/labels/bug","name":"bug","color":"fc2929","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-16T07:55:22Z","updated_at":"2018-05-25T22:58:15Z","closed_at":"2018-05-25T22:58:15Z","author_association":"NONE","body":"If you suspect this could be a bug, follow the template.\r\n\r\n- What version of Dgraph are you using?\r\n\r\n1.05\r\n\r\n- Have you tried reproducing the issue with latest release?\r\n\r\nyes\r\n\r\n- What is the hardware spec (RAM, OS)?\r\n\r\nrdf data set: 400G\r\nRAM: 128G \r\nOS: centos\r\n\r\n- Steps to reproduce the issue (command/config used to run Dgraph).\r\n\r\nwhen use `dgraph bulk` map reduce do batch data loading, `program exceeds 10000-thread limit` error raised at the begin of reduce.\r\n\r\nfull log:\r\n```\r\nMAP 05h41m10s rdf_count:4.165G rdf_speed:203.4k/sec edge_count:13.98G edge_speed:682.8k/sec\r\nREDUCE 05h41m11s [0.00%] edge_count:0.000 edge_speed:0.000/sec plist_count:0.000 plist_speed:0.000/sec\r\nruntime: program exceeds 10000-thread limit\r\nfatal error: thread exhaustion\r\n\r\nruntime stack:\r\nruntime.throw(0x1368a7c, 0x11)\r\n        /home/travis/.gimme/versions/go1.9.4.linux.amd64/src/runtime/panic.go:605 +0x95\r\nruntime.checkmcount()\r\n        /home/travis/.gimme/versions/go1.9.4.linux.amd64/src/runtime/proc.go:525 +0xa4\r\nruntime.mcommoninit(0xc5f0d73400)\r\n        /home/travis/.gimme/versions/go1.9.4.linux.amd64/src/runtime/proc.go:545 +0x9f\r\nruntime.allocm(0xc42046ec00, 0x0, 0xc700000000)\r\n        /home/travis/.gimme/versions/go1.9.4.linux.amd64/src/runtime/proc.go:1344 +0x99\r\nruntime.newm(0x0, 0xc42046ec00)\r\n        /home/travis/.gimme/versions/go1.9.4.linux.amd64/src/runtime/proc.go:1637 +0x39\r\nruntime.startm(0xc42046ec00, 0x1afb500)\r\n        /home/travis/.gimme/versions/go1.9.4.linux.amd64/src/runtime/proc.go:1728 +0x13f\r\nruntime.handoffp(0xc42046ec00)\r\n```\r\n\r\n- Expected behaviour and actual result.\r\n\r\n\r\n","score":1.0}]}
0

