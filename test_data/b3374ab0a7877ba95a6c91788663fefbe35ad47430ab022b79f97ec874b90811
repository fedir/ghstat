HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sun, 13 May 2018 13:15:38 GMT
Link: <https://api.github.com/search/issues?q=repo%3Aexpressjs%2Fexpress+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Aexpressjs%2Fexpress+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D1F2:4F42:44FD25A:8AFF4CE:5AF83A79
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 19
X-Ratelimit-Reset: 1526217397
X-Runtime-Rack: 0.445171
X-Xss-Protection: 1; mode=block

8000
{"total_count":2710,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/expressjs/express/issues/3653","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3653/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3653/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3653/events","html_url":"https://github.com/expressjs/express/issues/3653","id":322492688,"number":3653,"title":"Question about check the shipping format","user":{"login":"cjpatoilo","id":1542831,"avatar_url":"https://avatars3.githubusercontent.com/u/1542831?v=4","gravatar_id":"","url":"https://api.github.com/users/cjpatoilo","html_url":"https://github.com/cjpatoilo","followers_url":"https://api.github.com/users/cjpatoilo/followers","following_url":"https://api.github.com/users/cjpatoilo/following{/other_user}","gists_url":"https://api.github.com/users/cjpatoilo/gists{/gist_id}","starred_url":"https://api.github.com/users/cjpatoilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjpatoilo/subscriptions","organizations_url":"https://api.github.com/users/cjpatoilo/orgs","repos_url":"https://api.github.com/users/cjpatoilo/repos","events_url":"https://api.github.com/users/cjpatoilo/events{/privacy}","received_events_url":"https://api.github.com/users/cjpatoilo/received_events","type":"User","site_admin":false},"labels":[{"id":206149,"url":"https://api.github.com/repos/expressjs/express/labels/4.x","name":"4.x","color":"ededed","default":false},{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-12T08:08:27Z","updated_at":"2018-05-12T12:41:12Z","closed_at":"2018-05-12T12:40:55Z","author_association":"NONE","body":"Hi guys,\r\n\r\nIs there possible to check if sending the post was through a HTML form or an ajax call?","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3652","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3652/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3652/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3652/events","html_url":"https://github.com/expressjs/express/issues/3652","id":322486936,"number":3652,"title":"Missing first space in res.send","user":{"login":"siyangqiu","id":6004624,"avatar_url":"https://avatars3.githubusercontent.com/u/6004624?v=4","gravatar_id":"","url":"https://api.github.com/users/siyangqiu","html_url":"https://github.com/siyangqiu","followers_url":"https://api.github.com/users/siyangqiu/followers","following_url":"https://api.github.com/users/siyangqiu/following{/other_user}","gists_url":"https://api.github.com/users/siyangqiu/gists{/gist_id}","starred_url":"https://api.github.com/users/siyangqiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siyangqiu/subscriptions","organizations_url":"https://api.github.com/users/siyangqiu/orgs","repos_url":"https://api.github.com/users/siyangqiu/repos","events_url":"https://api.github.com/users/siyangqiu/events{/privacy}","received_events_url":"https://api.github.com/users/siyangqiu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-12T06:19:53Z","updated_at":"2018-05-12T18:18:07Z","closed_at":"2018-05-12T18:15:22Z","author_association":"NONE","body":"In the default express generator project using: \r\n> express --view=pug myapp\r\n\r\nThe default page at localhost:3000/users returns:\r\n> respondwith a resource\r\n\r\nThere isn't a space between *respond* and *with*\r\n\r\nIt seems that the first space after the first word is always skipped. I'm a bit inexperienced with Express, so I can't tell if this is a result of some line of code in the default project or something deeper in the framework (i.e. something in the 'res.send' function).\r\n\r\n> router.get('/', function(req, res, next) {\r\n>      res.send('respond with a resource');\r\n> });","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3651","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3651/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3651/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3651/events","html_url":"https://github.com/expressjs/express/issues/3651","id":322434802,"number":3651,"title":"optimization - static assets check if file exists, but use a static map of fs in memory instead?","user":{"login":"ORESoftware","id":11139560,"avatar_url":"https://avatars1.githubusercontent.com/u/11139560?v=4","gravatar_id":"","url":"https://api.github.com/users/ORESoftware","html_url":"https://github.com/ORESoftware","followers_url":"https://api.github.com/users/ORESoftware/followers","following_url":"https://api.github.com/users/ORESoftware/following{/other_user}","gists_url":"https://api.github.com/users/ORESoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/ORESoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ORESoftware/subscriptions","organizations_url":"https://api.github.com/users/ORESoftware/orgs","repos_url":"https://api.github.com/users/ORESoftware/repos","events_url":"https://api.github.com/users/ORESoftware/events{/privacy}","received_events_url":"https://api.github.com/users/ORESoftware/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-05-11T21:07:12Z","updated_at":"2018-05-11T22:17:29Z","closed_at":"2018-05-11T21:17:59Z","author_association":"NONE","body":"I have an optimization idea that might not have been implemented yet.\r\n\r\nI was looking at the 'serve-static' repo - if the `express.static` middleware comes before your API routes, I believe 'serve-static' is always going to try to read the file from the fs, and if the file doesn't exist the middleware will then call `next()`.\r\n\r\n**That means there is basically always going to be a fs read before your API routes gets hit.** \r\n\r\ninstead, why not create a map of the filesystem in memory, if a server route (path) is not in the map, don't even bother trying to read it in the 'serve-static' middleware, just call next() immediately.\r\n\r\nIs this optimization already in place?\r\nI think it would be AWESOME if users could pass an option to `express.static` that said the FS is static, therefore create a map of it in memory.\r\n\r\nhopefully this makes sense. \r\nI have some Express middleware that implemented this idea, although it's pretty simple stuff, you probably get it.","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3650","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3650/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3650/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3650/events","html_url":"https://github.com/expressjs/express/issues/3650","id":322290733,"number":3650,"title":"body-parser deprecated undefined extended: provide extended option","user":{"login":"Tiendq","id":815910,"avatar_url":"https://avatars2.githubusercontent.com/u/815910?v=4","gravatar_id":"","url":"https://api.github.com/users/Tiendq","html_url":"https://github.com/Tiendq","followers_url":"https://api.github.com/users/Tiendq/followers","following_url":"https://api.github.com/users/Tiendq/following{/other_user}","gists_url":"https://api.github.com/users/Tiendq/gists{/gist_id}","starred_url":"https://api.github.com/users/Tiendq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tiendq/subscriptions","organizations_url":"https://api.github.com/users/Tiendq/orgs","repos_url":"https://api.github.com/users/Tiendq/repos","events_url":"https://api.github.com/users/Tiendq/events{/privacy}","received_events_url":"https://api.github.com/users/Tiendq/received_events","type":"User","site_admin":false},"labels":[{"id":206149,"url":"https://api.github.com/repos/expressjs/express/labels/4.x","name":"4.x","color":"ededed","default":false},{"id":572472845,"url":"https://api.github.com/repos/expressjs/express/labels/module:body-parser","name":"module:body-parser","color":"bfe5bf","default":false},{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-11T13:09:56Z","updated_at":"2018-05-11T14:51:13Z","closed_at":"2018-05-11T13:16:58Z","author_association":"NONE","body":"`express.urlencoded([options])` documentation says that `extended` option is `true` by default. But `node` shows a deprecated warning.\r\n\r\n```javascript\r\nlet express = require('express');\r\nlet router = express.Router();\r\n\r\nrouter.post(\"/create\", express.urlencoded(), function (request, response) {\r\n});\r\n```\r\n\r\n`body-parser deprecated undefined extended: provide extended option`\r\n\r\nThere is no warning if I set `extended` explicitly:\r\n\r\n`express.urlencoded({ extended: true })`\r\n\r\nNodeJS v10.0.0\r\nexpress 4.16.3","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3649","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3649/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3649/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3649/events","html_url":"https://github.com/expressjs/express/issues/3649","id":321924949,"number":3649,"title":"Upload page for Download Page Example","user":{"login":"ImTotallyNotMessi","id":29573484,"avatar_url":"https://avatars2.githubusercontent.com/u/29573484?v=4","gravatar_id":"","url":"https://api.github.com/users/ImTotallyNotMessi","html_url":"https://github.com/ImTotallyNotMessi","followers_url":"https://api.github.com/users/ImTotallyNotMessi/followers","following_url":"https://api.github.com/users/ImTotallyNotMessi/following{/other_user}","gists_url":"https://api.github.com/users/ImTotallyNotMessi/gists{/gist_id}","starred_url":"https://api.github.com/users/ImTotallyNotMessi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ImTotallyNotMessi/subscriptions","organizations_url":"https://api.github.com/users/ImTotallyNotMessi/orgs","repos_url":"https://api.github.com/users/ImTotallyNotMessi/repos","events_url":"https://api.github.com/users/ImTotallyNotMessi/events{/privacy}","received_events_url":"https://api.github.com/users/ImTotallyNotMessi/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-10T13:08:36Z","updated_at":"2018-05-10T15:32:05Z","closed_at":"2018-05-10T15:31:16Z","author_association":"NONE","body":"[Download Example](https://github.com/expressjs/express/blob/master/examples/downloads/index.js)\r\nIs there a way where i can make an upload file page. Im looking to have an upload/download page on my website\r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3645","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3645/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3645/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3645/events","html_url":"https://github.com/expressjs/express/issues/3645","id":320567942,"number":3645,"title":"Question about routing and params","user":{"login":"AlbuquerqueRafael","id":13631723,"avatar_url":"https://avatars3.githubusercontent.com/u/13631723?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbuquerqueRafael","html_url":"https://github.com/AlbuquerqueRafael","followers_url":"https://api.github.com/users/AlbuquerqueRafael/followers","following_url":"https://api.github.com/users/AlbuquerqueRafael/following{/other_user}","gists_url":"https://api.github.com/users/AlbuquerqueRafael/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbuquerqueRafael/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbuquerqueRafael/subscriptions","organizations_url":"https://api.github.com/users/AlbuquerqueRafael/orgs","repos_url":"https://api.github.com/users/AlbuquerqueRafael/repos","events_url":"https://api.github.com/users/AlbuquerqueRafael/events{/privacy}","received_events_url":"https://api.github.com/users/AlbuquerqueRafael/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-06T06:52:20Z","updated_at":"2018-05-06T13:31:55Z","closed_at":"2018-05-06T13:31:46Z","author_association":"NONE","body":"Well, I'm having a problem with routing in ExpressJS.\r\n\r\nWhen I write my router this way:\r\n\r\n![image](https://user-images.githubusercontent.com/13631723/39670446-f6d67966-50db-11e8-8b19-f3625bc08610.png)\r\n\r\nAnd try to access: http://127.0.0.1:3000/v1/publicacao/search/ (My endpoint for my search function), \r\nI receive: \"Cast to ObjectId failed for value \"search\" at path \"_id\" for model \"Publication\"\"\r\n\r\nBut when I write my router this way:\r\n![image](https://user-images.githubusercontent.com/13631723/39670572-44b249ec-50de-11e8-9752-a8e8c5ae3243.png)\r\n\r\nAnd try to access: http://127.0.0.1:3000/v1/publicacao/search/ (The endpoint for search function),\r\nI receive: \"gg\"\r\n\r\nIn other words, the router is identifying \"everything\" that was not previous matched as a route parameter and entering on:\r\nrouter.get(':id', .. \r\n\r\nThere is something that I can do to avoid that? Or this is simply a Javascript/ExpressJS \"thing\"?\r\n\r\nThanks in advance!","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3644","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3644/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3644/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3644/events","html_url":"https://github.com/expressjs/express/issues/3644","id":320519510,"number":3644,"title":"HTTP/2 in express for node v10","user":{"login":"matt212","id":1698139,"avatar_url":"https://avatars1.githubusercontent.com/u/1698139?v=4","gravatar_id":"","url":"https://api.github.com/users/matt212","html_url":"https://github.com/matt212","followers_url":"https://api.github.com/users/matt212/followers","following_url":"https://api.github.com/users/matt212/following{/other_user}","gists_url":"https://api.github.com/users/matt212/gists{/gist_id}","starred_url":"https://api.github.com/users/matt212/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matt212/subscriptions","organizations_url":"https://api.github.com/users/matt212/orgs","repos_url":"https://api.github.com/users/matt212/repos","events_url":"https://api.github.com/users/matt212/events{/privacy}","received_events_url":"https://api.github.com/users/matt212/received_events","type":"User","site_admin":false},"labels":[{"id":55442290,"url":"https://api.github.com/repos/expressjs/express/labels/duplicate","name":"duplicate","color":"cccccc","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-05T15:49:20Z","updated_at":"2018-05-05T15:55:05Z","closed_at":"2018-05-05T15:54:46Z","author_association":"NONE","body":"hi,\r\nsince now node v10 supports HTTP/2.\r\nit would be feasible option to implement the same in express for routes ,render, session management for intern releases.\r\n\r\nhttps://nodejs.org/api/http2.html","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3643","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3643/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3643/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3643/events","html_url":"https://github.com/expressjs/express/issues/3643","id":320475481,"number":3643,"title":"Is that possible to extend the next(), i.e. insert another middleware inside a middleware?","user":{"login":"leoyli","id":8866555,"avatar_url":"https://avatars3.githubusercontent.com/u/8866555?v=4","gravatar_id":"","url":"https://api.github.com/users/leoyli","html_url":"https://github.com/leoyli","followers_url":"https://api.github.com/users/leoyli/followers","following_url":"https://api.github.com/users/leoyli/following{/other_user}","gists_url":"https://api.github.com/users/leoyli/gists{/gist_id}","starred_url":"https://api.github.com/users/leoyli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leoyli/subscriptions","organizations_url":"https://api.github.com/users/leoyli/orgs","repos_url":"https://api.github.com/users/leoyli/repos","events_url":"https://api.github.com/users/leoyli/events{/privacy}","received_events_url":"https://api.github.com/users/leoyli/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-05T03:24:08Z","updated_at":"2018-05-05T04:10:25Z","closed_at":"2018-05-05T04:10:18Z","author_association":"NONE","body":"For simplification, assume I have two modularized, independent middleware.\r\n\r\n```\r\nfunction middlewareA (req, res, next) {\r\n  (...)\r\n  return next();\r\n}\r\n\r\nfunction middlewareC (req, res, next) {\r\n  (...)\r\n  return next();\r\n}\r\n```\r\n\r\nIf I want to chain two middleware, normally I would do:\r\n```\r\nconst { Router } = require('express');\r\nconst someRouter = new Router();\r\nconst wrapAsync = //(a special wrapper for catching errors and bubbling)\r\nsomeRouter\r\n  .use(wrapAsync(middlewareA))\r\n  .use(wrapAsync(middlewareC));\r\n```\r\n\r\nHowever, for some reason, I want to extend the calling of `next()` inside `middlewareA` but I'm not able to added the middleware directly into `someRouter`, saying I have another `middlewareB1` to be inserted.  I have an ugly way to do it:\r\n```\r\nfunction middlewareA (req, res, next) {\r\n  (...)\r\n  return middlewareB1(req, res, wrapAsync(middlewareC(req, res, next)));\r\n}\r\n```\r\n\r\nWhat bother me is If I have N extra middleware (i.e. `middlewareB1` ~ `middlewareBN`) want to be inserted between `middlewareA` and `middlewareC`, then apparently I will then have a huge long long line of code... Although I think I might came up with a `for` loop for this kind of job, but before I dive into the implementation, I just wonder if anyone have a similar experiences.  Does anyone come up a good way to insert multiple middleware functions in another middleware?","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3642","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3642/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3642/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3642/events","html_url":"https://github.com/expressjs/express/issues/3642","id":320287699,"number":3642,"title":"Requests being routed to the wrong handler","user":{"login":"austinhuang0131","id":16656689,"avatar_url":"https://avatars1.githubusercontent.com/u/16656689?v=4","gravatar_id":"","url":"https://api.github.com/users/austinhuang0131","html_url":"https://github.com/austinhuang0131","followers_url":"https://api.github.com/users/austinhuang0131/followers","following_url":"https://api.github.com/users/austinhuang0131/following{/other_user}","gists_url":"https://api.github.com/users/austinhuang0131/gists{/gist_id}","starred_url":"https://api.github.com/users/austinhuang0131/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/austinhuang0131/subscriptions","organizations_url":"https://api.github.com/users/austinhuang0131/orgs","repos_url":"https://api.github.com/users/austinhuang0131/repos","events_url":"https://api.github.com/users/austinhuang0131/events{/privacy}","received_events_url":"https://api.github.com/users/austinhuang0131/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-04T14:03:45Z","updated_at":"2018-05-04T19:50:30Z","closed_at":"2018-05-04T18:39:34Z","author_association":"NONE","body":"From [this script](https://github.com/austinhuang0131/metagon/blob/master/index.js#L2041):\r\n\r\n```js\r\nvar server = express();\r\nserver.use(bodyParser.json({type: \"*/*\"}));\r\nserver.post('/api/messages', connector.listen());\r\nserver.post('/linebot', lineConnector.listen);\r\nserver.post('/cisco', cisco.listen);\r\n```\r\n\r\nCurrently, the requests sent to `/linebot` are sent to `cisco.listen` instead. `/api/messages` works correctly, however.\r\n\r\n* I'm using Heroku.\r\n* `lineConnector.listen` is ref'd [here](https://github.com/austinhuang0131/botbuilder-line/blob/master/index.js#L190).\r\n* `cisco.listen` is ref'd [here](https://github.com/austinhuang0131/botbuilder-ciscospark/blob/master/index.js#L90).\r\n* Commenting out the `/cisco` line works properly.","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3641","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3641/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3641/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3641/events","html_url":"https://github.com/expressjs/express/issues/3641","id":320191238,"number":3641,"title":"req.xhr not work in cross origin","user":{"login":"keyiis","id":7766085,"avatar_url":"https://avatars1.githubusercontent.com/u/7766085?v=4","gravatar_id":"","url":"https://api.github.com/users/keyiis","html_url":"https://github.com/keyiis","followers_url":"https://api.github.com/users/keyiis/followers","following_url":"https://api.github.com/users/keyiis/following{/other_user}","gists_url":"https://api.github.com/users/keyiis/gists{/gist_id}","starred_url":"https://api.github.com/users/keyiis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keyiis/subscriptions","organizations_url":"https://api.github.com/users/keyiis/orgs","repos_url":"https://api.github.com/users/keyiis/repos","events_url":"https://api.github.com/users/keyiis/events{/privacy}","received_events_url":"https://api.github.com/users/keyiis/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-04T08:29:19Z","updated_at":"2018-05-08T11:51:37Z","closed_at":"2018-05-08T11:51:37Z","author_association":"NONE","body":"I used client post data to server by ajax,my client is desktop app,the req.xhr still false on server side\r\n**client**\r\n```\r\n $.ajax({\r\n                        type: 'POST',\r\n                        data: JSON.stringify({ user: user }),\r\n                        contentType: 'application/json',\r\n                        url: 'http://127.0.0.1:3000/client/login',\r\n                        success: response => {\r\n                            console.log(response);\r\n                            localforage.setItem('token', response.token);\r\n                        }\r\n                    });\r\n```\r\n**server**\r\n```\r\napp.use('/', (req, res, next) => {\r\n  res.setHeader('Access-Control-Allow-Origin', req.headers.origin || '*');\r\n  res.setHeader('Access-Control-Allow-Headers', \"Origin,X-Requested-With,content-type,Accept,x-access-token\");\r\n  next();\r\n}, indexRouter);\r\n```","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3640","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3640/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3640/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3640/events","html_url":"https://github.com/expressjs/express/issues/3640","id":319567743,"number":3640,"title":"how can I get the params of a parent rout in a child route?","user":{"login":"slim-hmidi","id":31925861,"avatar_url":"https://avatars2.githubusercontent.com/u/31925861?v=4","gravatar_id":"","url":"https://api.github.com/users/slim-hmidi","html_url":"https://github.com/slim-hmidi","followers_url":"https://api.github.com/users/slim-hmidi/followers","following_url":"https://api.github.com/users/slim-hmidi/following{/other_user}","gists_url":"https://api.github.com/users/slim-hmidi/gists{/gist_id}","starred_url":"https://api.github.com/users/slim-hmidi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slim-hmidi/subscriptions","organizations_url":"https://api.github.com/users/slim-hmidi/orgs","repos_url":"https://api.github.com/users/slim-hmidi/repos","events_url":"https://api.github.com/users/slim-hmidi/events{/privacy}","received_events_url":"https://api.github.com/users/slim-hmidi/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-02T14:07:55Z","updated_at":"2018-05-02T15:39:39Z","closed_at":"2018-05-02T15:39:39Z","author_association":"NONE","body":"I have a nested route in nodejs and I'm trying to create a post api like this:\r\n```js\r\napp.post('/api/products/:product_id/price_perid', async (req, res) =>{\r\n  await Product\r\n  .query()\r\n  .insert({\r\n     product_id: req.params.product_id,\r\n     period: req.body.period\r\n  })\r\n})\r\n```\r\nWhen I checked the database, I found the product_id=null. I don't know if it is true to mix req.params and req.body in a post ROUTE. The insertion works well if I send the product_id in the body and using req.body.product_id. \r\nreq.params: `{}`\r\nreq.baseUrl: `api/products/:product_id`\r\nreq.url: `/price_perid`\r\n\r\nIs it possible to mix `req.params` and `req.body` in post api?\r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3639","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3639/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3639/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3639/events","html_url":"https://github.com/expressjs/express/issues/3639","id":319124801,"number":3639,"title":"Support Q: pre-compile handlebars template(s)","user":{"login":"ORESoftware","id":11139560,"avatar_url":"https://avatars1.githubusercontent.com/u/11139560?v=4","gravatar_id":"","url":"https://api.github.com/users/ORESoftware","html_url":"https://github.com/ORESoftware","followers_url":"https://api.github.com/users/ORESoftware/followers","following_url":"https://api.github.com/users/ORESoftware/following{/other_user}","gists_url":"https://api.github.com/users/ORESoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/ORESoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ORESoftware/subscriptions","organizations_url":"https://api.github.com/users/ORESoftware/orgs","repos_url":"https://api.github.com/users/ORESoftware/repos","events_url":"https://api.github.com/users/ORESoftware/events{/privacy}","received_events_url":"https://api.github.com/users/ORESoftware/received_events","type":"User","site_admin":false},"labels":[{"id":206149,"url":"https://api.github.com/repos/expressjs/express/labels/4.x","name":"4.x","color":"ededed","default":false},{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-01T06:05:20Z","updated_at":"2018-05-01T19:14:52Z","closed_at":"2018-05-01T06:19:36Z","author_association":"NONE","body":"I have this question on SO:\r\nhttps://stackoverflow.com/questions/50111841/precompile-handlebars-templates-on-express-server\r\n\r\nwith handlebars, you can \"pre-compile\" templates. I am guessing that it just makes it that much quicker to render the template with data, something like this:\r\n\r\n```js\r\nconst Handlebars = require('handlebars');\r\nconst string = fs.readFileSync('index.hbs');\r\nconst render = Handlebars.compile(string);\r\n```\r\n\r\n// you could then cache that render function and use it like so:\r\n```js\r\nrender({the:'data'});\r\n```\r\n\r\nso I know that Express is caching the template, because I am using\r\n```js\r\napp.set('view cache', true);\r\n```\r\nhowever, how can I configure Express to pre-compile Handlebars templates, if it's not already doing that out-of-the-box?\r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3638","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3638/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3638/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3638/events","html_url":"https://github.com/expressjs/express/issues/3638","id":318741284,"number":3638,"title":"Add support for easy creating of HTTP proxies","user":{"login":"mishaor","id":32357470,"avatar_url":"https://avatars3.githubusercontent.com/u/32357470?v=4","gravatar_id":"","url":"https://api.github.com/users/mishaor","html_url":"https://github.com/mishaor","followers_url":"https://api.github.com/users/mishaor/followers","following_url":"https://api.github.com/users/mishaor/following{/other_user}","gists_url":"https://api.github.com/users/mishaor/gists{/gist_id}","starred_url":"https://api.github.com/users/mishaor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mishaor/subscriptions","organizations_url":"https://api.github.com/users/mishaor/orgs","repos_url":"https://api.github.com/users/mishaor/repos","events_url":"https://api.github.com/users/mishaor/events{/privacy}","received_events_url":"https://api.github.com/users/mishaor/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-29T19:09:44Z","updated_at":"2018-04-29T19:20:01Z","closed_at":"2018-04-29T19:17:34Z","author_association":"NONE","body":"So the Express class would have Express.Proxy subclass.","s
8000
core":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3637","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3637/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3637/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3637/events","html_url":"https://github.com/expressjs/express/issues/3637","id":318724318,"number":3637,"title":"Send response from outside route","user":{"login":"gijo-varghese","id":23092846,"avatar_url":"https://avatars1.githubusercontent.com/u/23092846?v=4","gravatar_id":"","url":"https://api.github.com/users/gijo-varghese","html_url":"https://github.com/gijo-varghese","followers_url":"https://api.github.com/users/gijo-varghese/followers","following_url":"https://api.github.com/users/gijo-varghese/following{/other_user}","gists_url":"https://api.github.com/users/gijo-varghese/gists{/gist_id}","starred_url":"https://api.github.com/users/gijo-varghese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gijo-varghese/subscriptions","organizations_url":"https://api.github.com/users/gijo-varghese/orgs","repos_url":"https://api.github.com/users/gijo-varghese/repos","events_url":"https://api.github.com/users/gijo-varghese/events{/privacy}","received_events_url":"https://api.github.com/users/gijo-varghese/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-04-29T15:07:33Z","updated_at":"2018-04-29T16:08:51Z","closed_at":"2018-04-29T15:17:11Z","author_association":"NONE","body":"I've route `'/endpoint'` that accept a request, send it to a WebSocket client, and wait for its response. Is it possible to send the response outside the route function?\r\n\r\n\r\n```\r\nio.on('connection', (socket) => {\r\n    socket.on('res', (data) => {\r\n        console.log(data)\r\n         // response event received. lets send back to /endpoint\r\n    });\r\n});\r\n\r\napp.get('/endpoint', (req, res) => {\r\n    io.emit('req', { data: 'hello' });\r\n   // wait for event 'res' in socket io \r\n});\r\n```\r\n\r\nStackoverflow:\r\nhttps://stackoverflow.com/questions/50087400/forward-request-to-ws-client-and-wait-for-response-express/50087724","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3636","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3636/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3636/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3636/events","html_url":"https://github.com/expressjs/express/issues/3636","id":318481043,"number":3636,"title":"axios response data incorrect","user":{"login":"auahmed","id":4032097,"avatar_url":"https://avatars1.githubusercontent.com/u/4032097?v=4","gravatar_id":"","url":"https://api.github.com/users/auahmed","html_url":"https://github.com/auahmed","followers_url":"https://api.github.com/users/auahmed/followers","following_url":"https://api.github.com/users/auahmed/following{/other_user}","gists_url":"https://api.github.com/users/auahmed/gists{/gist_id}","starred_url":"https://api.github.com/users/auahmed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/auahmed/subscriptions","organizations_url":"https://api.github.com/users/auahmed/orgs","repos_url":"https://api.github.com/users/auahmed/repos","events_url":"https://api.github.com/users/auahmed/events{/privacy}","received_events_url":"https://api.github.com/users/auahmed/received_events","type":"User","site_admin":false},"labels":[{"id":133578711,"url":"https://api.github.com/repos/expressjs/express/labels/invalid","name":"invalid","color":"e6e6e6","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2018-04-27T16:58:30Z","updated_at":"2018-04-27T17:59:27Z","closed_at":"2018-04-27T17:51:26Z","author_association":"NONE","body":"Was hoping i can get some assistance on this.\r\nI am calling another API which returned an attachment to me.\r\nIf i was to call that API normally by using postman or anything i can download the ZIP successfully and unzip the contents.\r\nBut when i implement it to express my data is not right.\r\n\r\nAs seen below the issue is because when i try writing the returned data to a file it is not right.\r\nThe content-length is actually supposed to be 24109 but when i look at the response data length i only have 23062. \r\nIs this because of some sort of body parser that i need to implement?\r\n\r\nI have the following code:\r\n````\r\nconst express = require('express')\r\nconst axios = require('axios');\r\nconst app = express()\r\n\r\nconst generate = () => {\r\n  return axios.post('http://localhost:8050/api/json', {\r\n      host: 'lightapi.net',\r\n      service: 'codegen',\r\n      action: \"generate\",\r\n      version: '0.0.1',\r\n      data: [{\"framework\":\"swagger\"}]\r\n  }, {\r\n      responseType: 'blob',\r\n  });\r\n};\r\n\r\napp.get('/', (req, res) => {\r\n  generate().then((response) => {\r\n    console.log('########### HEADERS: ', response.headers);\r\n    console.log('########### AXIOS: ', response.data.length);\r\n  });\r\n  res.send('Hello World!');\r\n});\r\n\r\napp.listen(9000, () => console.log('Example app listening on port 9000!'))\r\n````\r\n\r\nand i get the following response:\r\n````\r\n########### HEADERS:  { connection: 'close',\r\n  server: 'L',\r\n  'content-type': 'application/zip',\r\n  'content-length': '24109',\r\n  'content-disposition': 'attachment',\r\n  date: 'Fri, 27 Apr 2018 16:48:05 GMT' }\r\n########### AXIOS:  23062\r\n````","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3635","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3635/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3635/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3635/events","html_url":"https://github.com/expressjs/express/issues/3635","id":318415945,"number":3635,"title":"How to res.send data 2 times?","user":{"login":"botaniQQQ","id":3118010,"avatar_url":"https://avatars3.githubusercontent.com/u/3118010?v=4","gravatar_id":"","url":"https://api.github.com/users/botaniQQQ","html_url":"https://github.com/botaniQQQ","followers_url":"https://api.github.com/users/botaniQQQ/followers","following_url":"https://api.github.com/users/botaniQQQ/following{/other_user}","gists_url":"https://api.github.com/users/botaniQQQ/gists{/gist_id}","starred_url":"https://api.github.com/users/botaniQQQ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/botaniQQQ/subscriptions","organizations_url":"https://api.github.com/users/botaniQQQ/orgs","repos_url":"https://api.github.com/users/botaniQQQ/repos","events_url":"https://api.github.com/users/botaniQQQ/events{/privacy}","received_events_url":"https://api.github.com/users/botaniQQQ/received_events","type":"User","site_admin":false},"labels":[{"id":206149,"url":"https://api.github.com/repos/expressjs/express/labels/4.x","name":"4.x","color":"ededed","default":false},{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-27T13:46:45Z","updated_at":"2018-04-27T13:50:43Z","closed_at":"2018-04-27T13:50:28Z","author_association":"NONE","body":"Hello.\r\n\r\nI want to show the user a loading line, and then when the data from the database is received, show the full page.\r\n```\r\nvar express = require('express');\r\nvar app = express();\r\n\r\napp.get('/', function (req, res) {\r\n  res.send('Loading ...');\r\n  setTimeout(function() {\r\n    console.log('Get database data ...');\r\n    res.send('Hello World!');\r\n  }, 3000);\r\n});\r\n\r\napp.listen(30000, function () {\r\n  console.log('Example app listening on port 30000!');\r\n});\r\n```\r\nSuch code leads to an error.\r\n```\r\nExample app listening on port 30000!\r\nGet database data ...\r\n_http_outgoing.js:491\r\n    throw new Error('Can\\'t set headers after they are sent.');\r\n    ^\r\n\r\nError: Can't set headers after they are sent.\r\n    at validateHeader (_http_outgoing.js:491:11)\r\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\r\n    at ServerResponse.header (/home/express/node_modules/express/lib/response.js:767:10)\r\n    at ServerResponse.send (/home/express/node_modules/express/lib/response.js:170:12)\r\n    at Timeout._onTimeout (/home/express/app.js:8:9)\r\n    at ontimeout (timers.js:482:11)\r\n    at tryOnTimeout (timers.js:317:5)\r\n    at Timer.listOnTimeout (timers.js:277:5)\r\n```","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3633","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3633/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3633/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3633/events","html_url":"https://github.com/expressjs/express/issues/3633","id":317785417,"number":3633,"title":"Router does not pass authentication header in a redirect","user":{"login":"rosano","id":1680612,"avatar_url":"https://avatars3.githubusercontent.com/u/1680612?v=4","gravatar_id":"","url":"https://api.github.com/users/rosano","html_url":"https://github.com/rosano","followers_url":"https://api.github.com/users/rosano/followers","following_url":"https://api.github.com/users/rosano/following{/other_user}","gists_url":"https://api.github.com/users/rosano/gists{/gist_id}","starred_url":"https://api.github.com/users/rosano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rosano/subscriptions","organizations_url":"https://api.github.com/users/rosano/orgs","repos_url":"https://api.github.com/users/rosano/repos","events_url":"https://api.github.com/users/rosano/events{/privacy}","received_events_url":"https://api.github.com/users/rosano/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-25T20:39:35Z","updated_at":"2018-04-25T21:19:58Z","closed_at":"2018-04-25T20:52:00Z","author_association":"NONE","body":"I am making a POST request to my Express-based API, and I notice that when I redirect, the authentication header does not get passed on, while any other headers (even nonsense ones) will make it past the redirect. Is this the intended behaviour?\r\n\r\nThe client makes a POST request\r\n\r\n```javascript\r\nvar requestPackage = require('request');\r\n\r\nrequestPackage.post({\r\n\turl: 'API_URL',\r\n\tauth: {\r\n\t\tbearer: 'API_TOKEN',\r\n\t},\r\n\theaders: {\r\n\t\t'lorem-ipsum': 'DOLOR SIT AMET'\r\n\t},\r\n\tjson: {\r\n\t\t'nunc tristique felis': 'id fringilla feugiat',\r\n\t},\r\n});\r\n```\r\n\r\nand the server performs the redirect (using status code 307 so that the headers get passed through)\r\n\r\n```javascript\r\nvar expressRouter = require('express').Router();\r\n\r\nexpressRouter.post('/API_PATH_ALPHA', function (req, res, next) {\r\n\tconsole.log({\r\n\t\tcustomHeader: req.headers['lorem-ipsum'],\r\n\t\tauthorisazion: req.headers.authorization,\r\n\t});\r\n\r\n\treturn res.redirect(307, '/API_PATH_BETA');\r\n});\r\n\r\nexpressRouter.post('/API_PATH_BETA', function (req, res, next) {\r\n\tconsole.log({\r\n\t\tcustomHeader: req.headers['lorem-ipsum'],\r\n\t\tauthorisazion: req.headers.authorization, // undefined\r\n\t});\r\n\r\n\treturn res.type('txt').send('Hello');\r\n});\r\n```","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3632","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3632/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3632/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3632/events","html_url":"https://github.com/expressjs/express/issues/3632","id":317544657,"number":3632,"title":"Outdated debug version with known vulnerabilities","user":{"login":"ziogibom","id":9935142,"avatar_url":"https://avatars3.githubusercontent.com/u/9935142?v=4","gravatar_id":"","url":"https://api.github.com/users/ziogibom","html_url":"https://github.com/ziogibom","followers_url":"https://api.github.com/users/ziogibom/followers","following_url":"https://api.github.com/users/ziogibom/following{/other_user}","gists_url":"https://api.github.com/users/ziogibom/gists{/gist_id}","starred_url":"https://api.github.com/users/ziogibom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ziogibom/subscriptions","organizations_url":"https://api.github.com/users/ziogibom/orgs","repos_url":"https://api.github.com/users/ziogibom/repos","events_url":"https://api.github.com/users/ziogibom/events{/privacy}","received_events_url":"https://api.github.com/users/ziogibom/received_events","type":"User","site_admin":false},"labels":[{"id":133578711,"url":"https://api.github.com/repos/expressjs/express/labels/invalid","name":"invalid","color":"e6e6e6","default":true}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-25T09:19:23Z","updated_at":"2018-04-25T11:34:22Z","closed_at":"2018-04-25T11:32:47Z","author_association":"NONE","body":"Nsp checker reporting that you are using old debug package version which includes outdated ms package with known vulnerability:\r\nhttps://nodesecurity.io/advisories/46","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3631","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3631/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3631/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3631/events","html_url":"https://github.com/expressjs/express/issues/3631","id":316459641,"number":3631,"title":"run app.render asynchronously","user":{"login":"AbdelrahmanHafez","id":19984935,"avatar_url":"https://avatars3.githubusercontent.com/u/19984935?v=4","gravatar_id":"","url":"https://api.github.com/users/AbdelrahmanHafez","html_url":"https://github.com/AbdelrahmanHafez","followers_url":"https://api.github.com/users/AbdelrahmanHafez/followers","following_url":"https://api.github.com/users/AbdelrahmanHafez/following{/other_user}","gists_url":"https://api.github.com/users/AbdelrahmanHafez/gists{/gist_id}","starred_url":"https://api.github.com/users/AbdelrahmanHafez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AbdelrahmanHafez/subscriptions","organizations_url":"https://api.github.com/users/AbdelrahmanHafez/orgs","repos_url":"https://api.github.com/users/AbdelrahmanHafez/repos","events_url":"https://api.github.com/users/AbdelrahmanHafez/events{/privacy}","received_events_url":"https://api.github.com/users/AbdelrahmanHafez/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-04-21T04:08:54Z","updated_at":"2018-04-22T00:56:14Z","closed_at":"2018-04-21T19:10:32Z","author_association":"NONE","body":"Is there a way to run app.render asynchronously?\r\n\r\nI tried promisifying it using `bluebird` but I get an error\r\n```\r\n    let render = Promise.promisify(req.app.render);\r\n    html = await render('email', { email: 'someone@gmail.com' });\r\n```\r\noutput:\r\n\r\n `TypeError: Cannot read property 'cache' of undefined`","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3629","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3629/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3629/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3629/events","html_url":"https://github.com/expressjs/express/issues/3629","id":316373733,"number":3629,"title":"Adding database models to the request object?","user":{"login":"edahlseng","id":6352776,"avatar_url":"https://avatars3.githubusercontent.com/u/6352776?v=4","gravatar_id":"","url":"https://api.github.com/users/edahlseng","html_url":"https://github.com/edahlseng","followers_url":"https://api.github.com/users/edahlseng/followers","following_url":"https://api.github.com/users/edahlseng/following{/other_user}","gists_url":"https://api.github.com/users/edahlseng/gists{/gist_id}","starred_url":"https://api.github.com/users/edahlseng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edahlseng/subscriptions","organizations_url":"https://api.github.com/users/edahlseng/orgs","repos_url":"https://api.github.com/users/edahlseng/repos","events_url":"https://api.github.com/users/edahlseng/events{/privacy}","received_events_url":"https://api.github.com/users/edahlseng/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-20T18:49:03Z","updated_at":"2018-05-07T15:57:08Z","closed_at":"2018-05-05T15:57:41Z","author_association":"NONE","body":"I have a question about what the request object can be used for within Express. In particular, I'm considering creating a middleware that adds a database model to the request object, something like this:\r\n\r\n```javascript\r\nconst express = require('express');\r\nconst db = require('./databaseModel.js');\r\n\r\nconst app = express();\r\n\r\napp.use((req, res, next) => {\r\n    req.db = db;\r\n    next();\r\n}\r\n\r\napp.get('/store', (req, res) => {\r\n    req.db.getAllStoreItems()\r\n    .then(storeItems => res.send(storeItems))\r\n    .catch(error => res.sendStatus(500));\r\n}\r\n```\r\n\r\nIs this an appropriate use of the request object? I'm considering this approach because it will make it easier to test my route controllers (I can just pass in a mocked database without needing to monkey patch the models), but I haven't seen this usage pattern much online so I'm not sure if there are performance implications/other gotchas that I'm not considering.\r\n\r\nThanks for the help!","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3628","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3628/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3628/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3628/events","html_url":"https://github.com/expressjs/express/issues/3628","id":316356898,"number":3628,"title":"what's the best way to do complex conditions on routes? ","user":{"login":"GuyMograbi","id":287367,"avatar_url":"https://avatars3.githubusercontent.com/u/287367?v=4","gravatar_id":"","url":"https://api.github.com/users/GuyMograbi","html_url":"https://github.com/GuyMograbi","followers_url":"https://api.github.com/users/GuyMograbi/followers","following_url":"https://api.github.com/users/GuyMograbi/following{/other_user}","gists_url":"https://api.github.com/users/GuyMograbi/gists{/gist_id}","starred_url":"https://api.github.com/users/GuyMograbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GuyMograbi/subscriptions","organizations_url":"https://api.github.com/users/GuyMograbi/orgs","repos_url":"https://api.github.com/users/GuyMograbi/repos","events_url":"https://api.github.com/users/GuyMograbi/events{/privacy}","received_events_url":"https://api.github.com/users/GuyMograbi/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-20T17:50:08Z","updated_at":"2018-05-05T15:58:49Z","closed_at":"2018-05-05T15:58:40Z","author_association":"NONE","body":"I often find myself in need to use a middleware based on subdomain or query parameter. \r\n\r\nright now, I am using a general middleware to do so. for example\r\n\r\n```\r\napp.use((req, res, next)=> {\r\n   if (req.query && ... ){...} else {next()}\r\n})\r\n```\r\n\r\nI was hoping maybe there's an easier way to achieve this. \r\nCan I configure express to also look at the query parameter and the domain while comparing routes? \r\nThen I can do \r\n\r\n```\r\napp.use(/some.sub.domain.com/, .. );\r\napp.use(/query=parameter/, ... )\r\n```\r\n\r\nor something of that sort. \r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3627","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3627/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3627/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3627/events","html_url":"https://github.com/expressjs/express/issues/3627","id":315860591,"number":3627,"title":"Refused to apply stylesheet and execute script because of MIME type","user":{"login":"kaygeeklaas","id":25608189,"avatar_url":"https://avatars3.githubusercontent.com/u/25608189?v=4","gravatar_id":"","url":"https://api.github.com/users/kaygeeklaas","html_url":"https://github.com/kaygeeklaas","followers_url":"https://api.github.com/users/kaygeeklaas/followers","following_url":"https://api.github.com/users/kaygeeklaas/following{/other_user}","gists_url":"https://api.github.com/users/kaygeeklaas/gists{/gist_id}","starred_url":"https://api.github.com/users/kaygeeklaas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaygeeklaas/subscriptions","organizations_url":"https://api.github.com/users/kaygeeklaas/orgs","repos_url":"https://api.github.com/users/kaygeeklaas/repos","events_url":"https://api.github.com/users/kaygeeklaas/events{/privacy}","received_events_url":"https://api.github.com/users/kaygeeklaas/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-19T12:44:10Z","updated_at":"2018-04-30T17:20:33Z","closed_at":"2018-04-30T17:20:33Z","author_association":"NONE","body":"Hi i seem to get the error:\r\n\r\n> **Refused to apply style from 'http://localhost:3000/css/adminstyle.css' because its MIME type ('text/html') is not a supported stylesheet MIME type, and strict MIME checking is enabled.**\r\n\r\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/adminstyle.css\" />\r\n\r\n> **pages:1 Refused to execute script from 'http://localhost:3000/js/main.js' because its MIME type ('text/html') is not executable, and strict MIME type checking is enabled.**\r\n\r\n<script type=\"application/javascript\" src=\"/js/main.js\"></script>\r\n\r\n\r\nThis  error seems to be happening when loading the stylesheet and script from the localhost as cdn stylesheets and scripts seem to be loading just fine e.g Bootstrap and JQuery\r\n\r\nMy question is how do i disable the strict MIME checking or get the stylesheets and scripts to load because i have been struggling with it the whole day, your help will be much appreciated","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3626","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3626/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3626/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3626/events","html_url":"https://github.com/expressjs/express/issues/3626","id":315604680,"number":3626,"title":"req.fresh send 304?  shouldn't that be req.stale send 304?","user":{"login":"waffledonkey","id":12648350,"avatar_url":"https://avatars2.githubusercontent.com/u/12648350?v=4","gravatar_id":"","url":"https://api.github.com/users/waffledonkey","html_url":"https://github.com/waffledonkey","followers_url":"https://api.github.com/users/waffledonkey/followers","following_url":"https://api.github.com/users/waffledonkey/following{/other_user}","gists_url":"https://api.github.com/users/waffledonkey/gists{/gist_id}","starred_url":"https://api.github.com/users/waffledonkey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waffledonkey/subscriptions","organizations_url":"https://api.github.com/users/waffledonkey/orgs","repos_url":"https://api.github.com/users/waffledonkey/repos","events_url":"https://api.github.com/users/waffledonkey/events{/privacy}","received_events_url":"https://api.github.com/users/waffledonkey/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":{"login":"dougwilson","id":67512,"avatar_url":"https://avatars3.githubusercontent.com/u/67512?v=4","gravatar_id":"","url":"https://api.github.com/users/dougwilson","html_url":"https://github.com/dougwilson","followers_url":"https://api.github.com/users/dougwilson/followers","following_url":"https://api.github.com/users/dougwilson/following{/other_user}","gists_url":"https://api.github.com/users/dougwilson/gists{/gist_id}","starred_url":"https://api.github.com/users/dougwilson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dougwilson/subscriptions","organizations_url":"https://api.github.com/users/dougwilson/orgs","repos_url":"https://api.github.com/users/dougwilson/repos","events_url":"https://api.github.com/users/dougwilson/events{/privacy}","received_events_url":"https://api.github.com/users/dougwilson/received_events","type":"User","site_admin":false},"assignees":[{"login":"dougwilson","id":67512,"avatar_url":"https://avatars3.githubusercontent.com/u/67512?v=4","gravatar_id":"","url":"https://api.github.com/users/dougwilson","html_url":"https://github.com/dougwilson","followers_url":"https://api.github.com/users/dougwilson/followers","following_url":"https://api.github.com/users/dougwilson/following{/other_user}","gists_url":"https://api.github.com/users/dougwilson/gists{/gist_id}","starred_url":"https://api.github.com/users/dougwilson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dougwilson/subscriptions","organizations_url":"https://api.github.com/users/dougwilson/orgs","repos_url":"https://api.github.com/users/dougwilson/repos","events_url":"https://api.github.com/users/dougwilson/events{/privacy}","received_events_url":"https://api.github.com/users/dougwilson/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2018-04-18T19:05:42Z","updated_at":"2018-04-18T19:09:19Z","closed_at":"2018-04-18T19:09:04Z","author_association":"NONE","body":"Am I completely misreading the docs or is response.js line 206 incorrect (should be req.stale)\r\n```\r\n205: // freshness\r\n206: if (req.fresh) this.statusCode = 304;\r\n```\r\n\r\n[req.fresh](http://expressjs.com/en/4x/api.html#req.fresh)\r\nIndicates whether the request is fresh. It is the opposite of req.stale.\r\n\r\nIt is true if the cache-control request header doesnt have a no-cache directive and any of the following are true:\r\n\r\nThe if-modified-since request header is specified and last-modified request header is equal to or earlier than the modified response header. \r\nThe if-none-match request header is *.\r\nThe **if-none-match request header**, after being parsed into its directives, **does not match the etag response header**.\r\n\r\nI've never seen the second condition but the first and last seem like they should result in 200 not 304.  I think the docs are written correctly, but the code in send() is not.\r\n\r\nThank you for your time and consideration (and all you've done/are doing... bravo!)","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3624","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3624/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3624/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3624/events","html_url":"https://github.com/expressjs/express/issues/3624","id":314721738,"number":3624,"title":"installation fails on docker image.","user":{"login":"danilohgds","id":12349622,"avatar_url":"https://avatars3.githubusercontent.com/u/12349622?v=4","gravatar_id":"","url":"https://api.github.com/users/danilohgds","html_url":"https://github.com/danilohgds","followers_url":"https://api.github.com/users/danilohgds/followers","following_url":"https://api.github.com/users/danilohgds/following{/other_user}","gists_url":"https://api.github.com/users/danilohgds/gists{/gist_id}","starred_url":"https://api.github.com/users/danilohgds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danilohgds/subscriptions","organizations_url":"https://api.github.com/users/danilohgds/orgs","repos_url":"https://api.github.com/users/danilohgds/repos","events_url":"https://api.github.com/users/danilohgds/events{/privacy}","received_events_url":"https://api.github.com/users/danilohgds/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-16T16:06:33Z","updated_at":"2018-04-16T16:40:37Z","closed_at":"2018-04-16T16:13:16Z","author_association":"NONE","body":"Hi guys, \r\n\r\nCan you help me with the following issue ? Npm install on Alpine based images results in the following error:\r\n```\r\nnpm ERR! Linux 4.9.87-linuxkit-aufs\r\nnpm ERR! argv \"/usr/local/bin/node\" \"/usr/local/bin/npm\" \"install\"\r\nnpm ERR! node v6.9.5\r\nnpm ERR! npm  v3.10.10\r\nnpm ERR! path /opt/app/node_modules/express/node_modules/array-flatten\r\nnpm ERR! code ENOENT\r\nnpm ERR! errno -2\r\nnpm ERR! syscall rename\r\n\r\nnpm ERR! enoent ENOENT: no such file or directory, rename '/opt/app/node_modules/express/node_modules/array-flatten' -> '/opt/app/node_modules/array-flatten'\r\nnpm ERR! enoent ENOENT: no such file or directory, rename '/opt/app/node_modules/express/node_modules/array-flatten' -> '/opt/app/node_modules/array-flatten'\r\nnpm ERR! enoent This is most likely not a problem with npm itself\r\nnpm ERR! enoent and is related to npm not being able to find a file.\r\nnpm ERR! enoent\r\n```\r\nAny clues why ? ","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3619","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3619/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3619/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3619/events","html_url":"https://github.com/expressjs/express/issues/3619","id":312977892,"number":3619,"title":"TypeError: View is not a constructor","user":{"login":"luca-viggiani","id":25035914,"avatar_url":"https://avatars2.githubusercontent.com/u/25035914?v=4","gravatar_id":"","url":"https://api.github.com/users/luca-viggiani","html_url":"https://github.com/luca-viggiani","followers_url":"https://api.github.com/users/luca-viggiani/followers","following_url":"https://api.github.com/users/luca-viggiani/following{/other_user}","gists_url":"https://api.github.com/users/luca-viggiani/gists{/gist_id}","starred_url":"https://api.github.com/users/luca-viggiani/starred{/owner}{/repo}","subscriptions
5d3f
_url":"https://api.github.com/users/luca-viggiani/subscriptions","organizations_url":"https://api.github.com/users/luca-viggiani/orgs","repos_url":"https://api.github.com/users/luca-viggiani/repos","events_url":"https://api.github.com/users/luca-viggiani/events{/privacy}","received_events_url":"https://api.github.com/users/luca-viggiani/received_events","type":"User","site_admin":false},"labels":[{"id":8636393,"url":"https://api.github.com/repos/expressjs/express/labels/wontfix","name":"wontfix","color":"ffffff","default":true}],"state":"closed","locked":false,"assignee":{"login":"dougwilson","id":67512,"avatar_url":"https://avatars3.githubusercontent.com/u/67512?v=4","gravatar_id":"","url":"https://api.github.com/users/dougwilson","html_url":"https://github.com/dougwilson","followers_url":"https://api.github.com/users/dougwilson/followers","following_url":"https://api.github.com/users/dougwilson/following{/other_user}","gists_url":"https://api.github.com/users/dougwilson/gists{/gist_id}","starred_url":"https://api.github.com/users/dougwilson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dougwilson/subscriptions","organizations_url":"https://api.github.com/users/dougwilson/orgs","repos_url":"https://api.github.com/users/dougwilson/repos","events_url":"https://api.github.com/users/dougwilson/events{/privacy}","received_events_url":"https://api.github.com/users/dougwilson/received_events","type":"User","site_admin":false},"assignees":[{"login":"dougwilson","id":67512,"avatar_url":"https://avatars3.githubusercontent.com/u/67512?v=4","gravatar_id":"","url":"https://api.github.com/users/dougwilson","html_url":"https://github.com/dougwilson","followers_url":"https://api.github.com/users/dougwilson/followers","following_url":"https://api.github.com/users/dougwilson/following{/other_user}","gists_url":"https://api.github.com/users/dougwilson/gists{/gist_id}","starred_url":"https://api.github.com/users/dougwilson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dougwilson/subscriptions","organizations_url":"https://api.github.com/users/dougwilson/orgs","repos_url":"https://api.github.com/users/dougwilson/repos","events_url":"https://api.github.com/users/dougwilson/events{/privacy}","received_events_url":"https://api.github.com/users/dougwilson/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2018-04-10T15:35:01Z","updated_at":"2018-04-14T16:10:45Z","closed_at":"2018-04-14T16:09:59Z","author_association":"NONE","body":"Hi, I'm getting this error when I try to render an ejs page... I guess the error is on my side, so can you please help me debug?\r\n\r\n**error**:\r\n```\r\nTypeError: View is not a constructor\r\n    at Function.render (/home/luca/Projects/stk/node_modules/express/lib/application.js:570:12)\r\n    at ServerResponse.render (/home/luca/Projects/stk/node_modules/express/lib/response.js:1008:7)\r\n    at app.get (/home/luca/Projects/stk/index.js:28:37)\r\n    at Layer.handle [as handle_request] (/home/luca/Projects/stk/node_modules/express/lib/router/layer.js:95:5)\r\n    at next (/home/luca/Projects/stk/node_modules/express/lib/router/route.js:137:13)\r\n    at Route.dispatch (/home/luca/Projects/stk/node_modules/express/lib/router/route.js:112:3)\r\n    at Layer.handle [as handle_request] (/home/luca/Projects/stk/node_modules/express/lib/router/layer.js:95:5)\r\n    at /home/luca/Projects/stk/node_modules/express/lib/router/index.js:281:22\r\n    at Function.process_params (/home/luca/Projects/stk/node_modules/express/lib/router/index.js:335:12)\r\n    at next (/home/luca/Projects/stk/node_modules/express/lib/router/index.js:275:10)\r\n```\r\n\r\n**my code:**\r\n```\r\nconst express         = require(\"express\"),\r\n           ejs                 = require(\"ejs\"),\r\n           app                = express();\r\n\r\napp.set('view engine', 'ejs');\r\napp.get(\"/login\", (req, res) => res.render(\"login.ejs\"));\r\n```\r\n\r\n\r\n\r\nlogin.ejs is located in views folder of my project\r\n\r\nExpress version is: \"4.16.3\", ejs version is: \"2.5.8\"\r\n\r\nThanks in advance\r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3618","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3618/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3618/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3618/events","html_url":"https://github.com/expressjs/express/issues/3618","id":312908583,"number":3618,"title":"Can you keep your main express .js file any directory and run with node?","user":{"login":"AbhimanyuAryan","id":8083613,"avatar_url":"https://avatars2.githubusercontent.com/u/8083613?v=4","gravatar_id":"","url":"https://api.github.com/users/AbhimanyuAryan","html_url":"https://github.com/AbhimanyuAryan","followers_url":"https://api.github.com/users/AbhimanyuAryan/followers","following_url":"https://api.github.com/users/AbhimanyuAryan/following{/other_user}","gists_url":"https://api.github.com/users/AbhimanyuAryan/gists{/gist_id}","starred_url":"https://api.github.com/users/AbhimanyuAryan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AbhimanyuAryan/subscriptions","organizations_url":"https://api.github.com/users/AbhimanyuAryan/orgs","repos_url":"https://api.github.com/users/AbhimanyuAryan/repos","events_url":"https://api.github.com/users/AbhimanyuAryan/events{/privacy}","received_events_url":"https://api.github.com/users/AbhimanyuAryan/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-04-10T12:51:23Z","updated_at":"2018-05-06T14:42:27Z","closed_at":"2018-05-06T14:42:21Z","author_association":"NONE","body":"It was earlier working but then I moved `/server.js` to `/server/controllers/oauth.controller.js`\r\n\r\nNow I believe it's not able to fetch the routes from `client directory` which is two level above where oauth.controller.js is kept\r\n\r\n**Error** while visiting 127.0.0.1:4568     \r\n\r\n    >node oauth.controller.js                                  authentication (origin/authentication)\r\n    server is listening on 4568\r\n    ForbiddenError: Forbidden\r\n        at SendStream.error (/Users/abhimanyuaryan/portal/node_modules/send/index.js:270:31)\r\n        at SendStream.pipe (/Users/abhimanyuaryan/portal/node_modules/send/index.js:554:12)\r\n        at sendfile (/Users/abhimanyuaryan/portal/node_modules/express/lib/response.js:1099:8)\r\n        at ServerResponse.sendFile (/Users/abhimanyuaryan/portal/node_modules/express/lib/response.js:429:3)\r\n        at app.get (/Users/abhimanyuaryan/portal/server/controllers/oauth.controller.js:72:7)\r\n        at Layer.handle [as handle_request] (/Users/abhimanyuaryan/portal/node_modules/express/lib/router/layer.js:95:5)\r\n        at next (/Users/abhimanyuaryan/portal/node_modules/express/lib/router/route.js:137:13)\r\n        at Route.dispatch (/Users/abhimanyuaryan/portal/node_modules/express/lib/router/route.js:112:3)\r\n        at Layer.handle [as handle_request] (/Users/abhimanyuaryan/portal/node_modules/express/lib/router/layer.js:95:5)\r\n        at /Users/abhimanyuaryan/portal/node_modules/express/lib/router/index.js:281:22\r\n\r\n\r\n**/server/controllers/oauth.controllers.js**\r\n\r\n    let Express = require('express')\r\n    let bodyParser = require('body-parser')\r\n    let session = require('express-session')\r\n    let passport = require('passport')\r\n    let GithubStrategy = require('passport-github2').Strategy\r\n    \r\n    let GITHUB_CLIENT_ID = \"xxxxxxxxxxxxxxxxx\"\r\n    let GITHUB_CLIENT_SECRET = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\r\n    \r\n    // flow #4\r\n    passport.serializeUser((user, done) => {\r\n    \tdone(null, user);\r\n    })\r\n    \r\n    // flow #6\r\n    passport.deserializeUser((user, done) => {\r\n    \tdone(null, user);\r\n    })\r\n    \r\n    passport.use(new GithubStrategy({\r\n    \tclientID: GITHUB_CLIENT_ID,\r\n    \tclientSecret: GITHUB_CLIENT_SECRET,\r\n    \tcallbackURL: \"http://127.0.0.1:4568/auth/github/callback\"\r\n      },\r\n      (accessToken, refreshToken,  profile, done) => {\r\n      \t// console.log(profile)\r\n      \t/*\r\n    \tflow #3\r\n    \tProfile is the json result from github, it contains helpful information like id, username, email etc.\r\n    \tYou can decide to use profile.id as your internal userId too.\r\n    \tHere you can call your database and check if the user already exist and create a new record if it doesn't \r\n    \texists. We are not going to include this logic here to keep things simple but you can manage\r\n    \tthe profile data if whatever way you want\r\n      \t*/\r\n      \t// for simplicity we are only going to return the whole profile\r\n      \treturn done(null, profile)\r\n      }\r\n    ))\r\n    \r\n    let app = Express()\r\n    app.use(bodyParser.json())\r\n    app.use(bodyParser.urlencoded({extended: true}))\r\n    app.use(Express.static(__dirname + '../../client', {dotfiles:'allow'}))\r\n    app.use(session({\r\n    \tsecret: 'top secret key',\r\n    \tresave: false,\r\n    \tsaveUninitialized: true\r\n    }))\r\n    app.use(passport.initialize())\r\n    app.use(passport.session())\r\n    \r\n    // Explorting modules to external file\r\n    var exports = module.exports = {};\r\n    \r\n    // function that will check if the user is authenticated\r\n    exports.isAuthenticated = (req, res, next) => {\r\n    \tif(req.isAuthenticated()){\r\n    \t\treturn next()\r\n    \t}\r\n    \tres.redirect('/login')\r\n    }\r\n    \r\n    // you can put 'isAuthenticated function in any get/post call, here is an example'\r\n    app.get('/', exports.isAuthenticated,\r\n    \t(req, res) => {\r\n    \t\tres.sendFile(__dirname + '../../client/secret.html')\r\n    \t}\r\n    )\r\n    \r\n    app.get('/login',\r\n    \t(req, res) => {\r\n    \t\tres.sendFile(__dirname + '../../client/login.html')\r\n    \t}\r\n    )\r\n    \r\n    app.get('/logout', \r\n    \t(req, res) => {\r\n    \t\treq.logout()\r\n    \t\tres.sendFile(__dirname + '../../client/login.html')\r\n    \t}\r\n    )\r\n    \r\n    // 'Sign in with Github' link click will arrive here and from here we call Github API with passport. authenticate\r\n    app.get('/auth/github',\r\n    \t//flow #1\r\n    \tpassport.authenticate('github', {scope: [ 'user:email']}),\r\n    \t(req, res) => {\r\n    \t}\r\n    )\r\n    \r\n    //github responses will arrive here and if its failure we will to /login\r\n    // if its successful we will redirect to ('/')\r\n    app.get('/auth/github/callback',\r\n    \t// flow #2\r\n    \tpassport.authenticate('github', {failureRedirect: '/login'}),\r\n    \t(req, res) => {\r\n    \t\t// flow #5\r\n    \t\tres.redirect('/')\r\n    \t}\r\n    )\r\n    \r\n    console.log('server is listening on 4568')\r\n    app.listen(4568)\r\n\r\n\r\nDirectly Hirarchy\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YHwjm.png","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3616","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3616/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3616/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3616/events","html_url":"https://github.com/expressjs/express/issues/3616","id":312264417,"number":3616,"title":"NPM Failed to parse json","user":{"login":"aidenappl","id":25751249,"avatar_url":"https://avatars3.githubusercontent.com/u/25751249?v=4","gravatar_id":"","url":"https://api.github.com/users/aidenappl","html_url":"https://github.com/aidenappl","followers_url":"https://api.github.com/users/aidenappl/followers","following_url":"https://api.github.com/users/aidenappl/following{/other_user}","gists_url":"https://api.github.com/users/aidenappl/gists{/gist_id}","starred_url":"https://api.github.com/users/aidenappl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aidenappl/subscriptions","organizations_url":"https://api.github.com/users/aidenappl/orgs","repos_url":"https://api.github.com/users/aidenappl/repos","events_url":"https://api.github.com/users/aidenappl/events{/privacy}","received_events_url":"https://api.github.com/users/aidenappl/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-08T02:32:18Z","updated_at":"2018-04-08T02:44:21Z","closed_at":"2018-04-08T02:44:10Z","author_association":"NONE","body":"Hey there, does anyone by chance know why i'm getting this error when I do sudo npm install?? Thanks!\r\n\r\n`ubuntu@ip-172-26-3-197:~$ sudo npm install\r\nnpm ERR! file /home/ubuntu/package.json\r\nnpm ERR! code EJSONPARSE\r\nnpm ERR! Failed to parse json\r\nnpm ERR! Unexpected string in JSON at position 232 while parsing '{\r\nnpm ERR!   \"name\": \"learnmore\",\r\nnpm ERR!   \"version\": \"1'\r\nnpm ERR! File: /home/ubuntu/package.json\r\nnpm ERR! Failed to parse package.json data.\r\nnpm ERR! package.json must be actual JSON, not just JavaScript.\r\nnpm ERR! \r\nnpm ERR! Tell the package author to fix their package.json file. JSON.parse\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /home/ubuntu/.npm/_logs/2018-04-08T02_28_21_871Z-debug.log`","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3615","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3615/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3615/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3615/events","html_url":"https://github.com/expressjs/express/issues/3615","id":311467297,"number":3615,"title":"req.is('json') returns null while content-type: json is present","user":{"login":"georgyfarniev","id":28708635,"avatar_url":"https://avatars2.githubusercontent.com/u/28708635?v=4","gravatar_id":"","url":"https://api.github.com/users/georgyfarniev","html_url":"https://github.com/georgyfarniev","followers_url":"https://api.github.com/users/georgyfarniev/followers","following_url":"https://api.github.com/users/georgyfarniev/following{/other_user}","gists_url":"https://api.github.com/users/georgyfarniev/gists{/gist_id}","starred_url":"https://api.github.com/users/georgyfarniev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/georgyfarniev/subscriptions","organizations_url":"https://api.github.com/users/georgyfarniev/orgs","repos_url":"https://api.github.com/users/georgyfarniev/repos","events_url":"https://api.github.com/users/georgyfarniev/events{/privacy}","received_events_url":"https://api.github.com/users/georgyfarniev/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":{"login":"dougwilson","id":67512,"avatar_url":"https://avatars3.githubusercontent.com/u/67512?v=4","gravatar_id":"","url":"https://api.github.com/users/dougwilson","html_url":"https://github.com/dougwilson","followers_url":"https://api.github.com/users/dougwilson/followers","following_url":"https://api.github.com/users/dougwilson/following{/other_user}","gists_url":"https://api.github.com/users/dougwilson/gists{/gist_id}","starred_url":"https://api.github.com/users/dougwilson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dougwilson/subscriptions","organizations_url":"https://api.github.com/users/dougwilson/orgs","repos_url":"https://api.github.com/users/dougwilson/repos","events_url":"https://api.github.com/users/dougwilson/events{/privacy}","received_events_url":"https://api.github.com/users/dougwilson/received_events","type":"User","site_admin":false},"assignees":[{"login":"dougwilson","id":67512,"avatar_url":"https://avatars3.githubusercontent.com/u/67512?v=4","gravatar_id":"","url":"https://api.github.com/users/dougwilson","html_url":"https://github.com/dougwilson","followers_url":"https://api.github.com/users/dougwilson/followers","following_url":"https://api.github.com/users/dougwilson/following{/other_user}","gists_url":"https://api.github.com/users/dougwilson/gists{/gist_id}","starred_url":"https://api.github.com/users/dougwilson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dougwilson/subscriptions","organizations_url":"https://api.github.com/users/dougwilson/orgs","repos_url":"https://api.github.com/users/dougwilson/repos","events_url":"https://api.github.com/users/dougwilson/events{/privacy}","received_events_url":"https://api.github.com/users/dougwilson/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-04-05T04:15:35Z","updated_at":"2018-04-05T12:19:30Z","closed_at":"2018-04-05T12:19:15Z","author_association":"NONE","body":"Minimal example, tested with express 4.16.3, node v9.4.0, Windows 10: \r\n\r\n```\r\nconst request = require('superagent')\r\nconst express = require('express')\r\nconst app = express()\r\n\r\napp.get('/', (req, res) => {\r\n  console.log('Header value:', req.headers['content-type'])\r\n  console.log('req.is value:', req.is('json'))\r\n  res.sendStatus(200)\r\n})\r\n\r\napp.listen(3333, async () => request.get('localhost:3333').type('json'))\r\n```","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3614","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3614/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3614/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3614/events","html_url":"https://github.com/expressjs/express/issues/3614","id":310740467,"number":3614,"title":"Problem defining routes inside of an async function","user":{"login":"0505gonzalez","id":719669,"avatar_url":"https://avatars0.githubusercontent.com/u/719669?v=4","gravatar_id":"","url":"https://api.github.com/users/0505gonzalez","html_url":"https://github.com/0505gonzalez","followers_url":"https://api.github.com/users/0505gonzalez/followers","following_url":"https://api.github.com/users/0505gonzalez/following{/other_user}","gists_url":"https://api.github.com/users/0505gonzalez/gists{/gist_id}","starred_url":"https://api.github.com/users/0505gonzalez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0505gonzalez/subscriptions","organizations_url":"https://api.github.com/users/0505gonzalez/orgs","repos_url":"https://api.github.com/users/0505gonzalez/repos","events_url":"https://api.github.com/users/0505gonzalez/events{/privacy}","received_events_url":"https://api.github.com/users/0505gonzalez/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-04-03T08:27:55Z","updated_at":"2018-04-03T08:30:49Z","closed_at":"2018-04-03T08:30:49Z","author_association":"NONE","body":"Hi all,\r\n\r\nI encountered a strange issue when defining routes in an async function that uses await. In the simplified example below, I define a GET endpoint and an error handler that formats the error. The error handler will not run if there is an await statement in the defineRoutes function. \r\n\r\n```\r\nconst express = require('express');\r\n\r\nconst app = express();\r\n\r\ndefineRoutes(app);\r\n\r\napp.use((err, req, res, next) => {\r\n    res.status(400).send({ error_code: 'FAILED' });\r\n});\r\n\r\napp.listen(8080);\r\n\r\nasync function defineRoutes(app) {\r\n    await \"\"; // Removing this line allows the error handler to run properly\r\n\r\n    app.get('/test', (req, res, next) => {\r\n        return next(new Error('Something happened'));\r\n    });\r\n}\r\n```\r\n\r\nDefining the error handler within the defineRoutes function works fine:\r\n```\r\n'use strict';\r\n\r\nconst express = require('express');\r\n\r\nconst app = express();\r\n\r\ndefineRoutes(app);\r\n\r\napp.listen(8080);\r\n\r\nasync function defineRoutes(app) {\r\n    await \"\";\r\n\r\n    app.get('/test', (req, res, next) => {\r\n        return next(new Error('Something happened'));\r\n    });\r\n\r\n    app.use((err, req, res, next) => {\r\n        res.status(400).send({ error_code: 'FAILED' });\r\n    });\r\n}\r\n``` \r\n\r\nCan anyone shed some light as to what is going on?","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3612","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3612/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3612/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3612/events","html_url":"https://github.com/expressjs/express/issues/3612","id":310398447,"number":3612,"title":"npm install issue  (ENOENT)","user":{"login":"drsmog","id":7422971,"avatar_url":"https://avatars2.githubusercontent.com/u/7422971?v=4","gravatar_id":"","url":"https://api.github.com/users/drsmog","html_url":"https://github.com/drsmog","followers_url":"https://api.github.com/users/drsmog/followers","following_url":"https://api.github.com/users/drsmog/following{/other_user}","gists_url":"https://api.github.com/users/drsmog/gists{/gist_id}","starred_url":"https://api.github.com/users/drsmog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drsmog/subscriptions","organizations_url":"https://api.github.com/users/drsmog/orgs","repos_url":"https://api.github.com/users/drsmog/repos","events_url":"https://api.github.com/users/drsmog/events{/privacy}","received_events_url":"https://api.github.com/users/drsmog/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-04-02T05:25:46Z","updated_at":"2018-05-08T11:09:53Z","closed_at":"2018-04-14T16:14:24Z","author_association":"NONE","body":"cant install. any ideas ?\r\n```\r\nC:\\Users\\isvanidze\\Desktop\\testexpress\r\n npm install express\r\nnpm WARN enoent ENOENT: no such file or directory, open 'C:\\Users\\isvanidze\\Desktop\\testexpress\\package.json'\r\nnpm WARN testexpress No description\r\nnpm WARN testexpress No repository field.\r\nnpm WARN testexpress No README data\r\nnpm WARN testexpress No license field.\r\n\r\nnpm ERR! path C:\\Users\\isvanidze\\Desktop\\testexpress\\node_modules\\content-type\r\nnpm ERR! code ENOENT\r\nnpm ERR! errno -4058\r\nnpm ERR! syscall rename\r\nnpm ERR! enoent ENOENT: no such file or directory, rename 'C:\\Users\\isvanidze\\Desktop\\testexpress\\node_modules\\content-type' -> 'C:\\Users\\isvanidze\\Desktop\\testexpress\\node_modules\\.content-type.DELETE'\r\nnpm ERR! enoent This is related to npm not being able to find a file.\r\nnpm ERR! enoent\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     C:\\Users\\isvanidze\\AppData\\Roaming\\npm-cache\\_logs\\2018-04-02T05_24_00_738Z-debug.log\r\n```","score":1.0}]}
0

