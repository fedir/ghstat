HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 09 Jun 2018 08:11:00 GMT
Link: <https://api.github.com/search/issues?q=repo%3Aexpressjs%2Fexpress+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Aexpressjs%2Fexpress+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: CE1B:57C4:23BD302:50D93C1:5B1B8B93
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 12
X-Ratelimit-Reset: 1528531917
X-Runtime-Rack: 0.534097
X-Xss-Protection: 1; mode=block

8000
{"total_count":2721,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/expressjs/express/issues/3666","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3666/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3666/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3666/events","html_url":"https://github.com/expressjs/express/issues/3666","id":329905161,"node_id":"MDU6SXNzdWUzMjk5MDUxNjE=","number":3666,"title":"Route path leaking into Mongoose code in route handler","user":{"login":"cjrutherford","id":9447239,"node_id":"MDQ6VXNlcjk0NDcyMzk=","avatar_url":"https://avatars3.githubusercontent.com/u/9447239?v=4","gravatar_id":"","url":"https://api.github.com/users/cjrutherford","html_url":"https://github.com/cjrutherford","followers_url":"https://api.github.com/users/cjrutherford/followers","following_url":"https://api.github.com/users/cjrutherford/following{/other_user}","gists_url":"https://api.github.com/users/cjrutherford/gists{/gist_id}","starred_url":"https://api.github.com/users/cjrutherford/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjrutherford/subscriptions","organizations_url":"https://api.github.com/users/cjrutherford/orgs","repos_url":"https://api.github.com/users/cjrutherford/repos","events_url":"https://api.github.com/users/cjrutherford/events{/privacy}","received_events_url":"https://api.github.com/users/cjrutherford/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"node_id":"MDU6TGFiZWw1NTMzOTA4MTk=","url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-06-06T14:55:46Z","updated_at":"2018-06-06T16:20:34Z","closed_at":"2018-06-06T16:20:34Z","author_association":"NONE","body":"I'm not entirely sure that this is caused from Express or Mongoose, but I have a feeling that the mongoose code is correct, and the express is not. \r\n\r\n**Background**\r\n\r\nNode Version: 8.11.2\r\nExpress Version: 4.6.13\r\nMongoose Version: 5.1.3\r\n\r\n**Problem Code**\r\n```\r\nrouter.get('/list', (req,res) => {\r\n  Insider.find({}, {id: 1}, (err, insiders) => {\r\n    if(err){\r\n      return res.status(400).json(err);\r\n    }\r\n    return res.json(insiders);\r\n  });\r\n});\r\n```\r\nOR \r\n```\r\nrouter.get('/list', (req,res) => {\r\n  Insider.find({},{id:1}).then(insiders => {\r\n    if(!insiders) return res.status(400).json({error: \"unable to locate insiders\"});\r\n    res.json(insiders);\r\n  }).catch(err => res.status(400).json(err));\r\n});\r\n```\r\n\r\nRegardless of the setup, the route never returns, and logs this error to the app:\r\n\r\n> Cast to ObjectId failed for value \"list\" at path \"_id\" for model \"insiders\"\r\n  CastError: Cast to ObjectId failed for value \"list\" at path \"_id\" for model \"insiders\"\r\n      at new CastError (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\error\\cast.js:27:11)\r\n      at ObjectId.cast (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\schema\\objectid.js:158:13)\r\n      at ObjectId.SchemaType.applySetters (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\schematype.js:724:12)\r\n      at ObjectId.SchemaType._castForQuery (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\schematype.js:1113:15)\r\n      at ObjectId.SchemaType.castForQuery (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\schematype.js:1103:15)\r\n      at ObjectId.SchemaType.castForQueryWrapper (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\schematype.js:1082:15)\r\n      at cast (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\cast.js:300:32)\r\n      at model.Query.Query.cast (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\query.js:3309:12)\r\n      at model.Query.Query._castConditions (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\query.js:1293:10)\r\n      at model.Query.Query._findOne (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\mongoose\\lib\\query.js:1518:8)\r\n      at process.nextTick (C:\\Users\\rutherfordc\\Documents\\GitHub\\ccs-express-mgo\\node_modules\\kareem\\index.js:333:33)\r\n      at process._tickCallback (internal/process/next_tick.js:112:11)\r\n\r\n\r\nI've confirmed that it's the route path that is leaking. (example: changing the route path to `/path` causes \"path\" to be in >Cast to ObjectId failed for value \"path\" at path \"_id\" for model \"insiders\"\r\n\r\nEDIT: Typo in code.","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3664","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3664/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3664/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3664/events","html_url":"https://github.com/expressjs/express/issues/3664","id":329384322,"node_id":"MDU6SXNzdWUzMjkzODQzMjI=","number":3664,"title":"How Express use index.html as home page?","user":{"login":"yzfdjzwl","id":21030370,"node_id":"MDQ6VXNlcjIxMDMwMzcw","avatar_url":"https://avatars3.githubusercontent.com/u/21030370?v=4","gravatar_id":"","url":"https://api.github.com/users/yzfdjzwl","html_url":"https://github.com/yzfdjzwl","followers_url":"https://api.github.com/users/yzfdjzwl/followers","following_url":"https://api.github.com/users/yzfdjzwl/following{/other_user}","gists_url":"https://api.github.com/users/yzfdjzwl/gists{/gist_id}","starred_url":"https://api.github.com/users/yzfdjzwl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yzfdjzwl/subscriptions","organizations_url":"https://api.github.com/users/yzfdjzwl/orgs","repos_url":"https://api.github.com/users/yzfdjzwl/repos","events_url":"https://api.github.com/users/yzfdjzwl/events{/privacy}","received_events_url":"https://api.github.com/users/yzfdjzwl/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-06-05T09:57:31Z","updated_at":"2018-06-06T09:08:43Z","closed_at":"2018-06-05T13:21:53Z","author_association":"NONE","body":"By default, I wonder express how to use `index.html` as home page.\r\n\r\nI look up sources, can't find where did it happen. Very thanks!","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3663","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3663/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3663/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3663/events","html_url":"https://github.com/expressjs/express/issues/3663","id":329151459,"node_id":"MDU6SXNzdWUzMjkxNTE0NTk=","number":3663,"title":"Router bypass callbacks not working with `Router.use`","user":{"login":"csvn","id":8770194,"node_id":"MDQ6VXNlcjg3NzAxOTQ=","avatar_url":"https://avatars2.githubusercontent.com/u/8770194?v=4","gravatar_id":"","url":"https://api.github.com/users/csvn","html_url":"https://github.com/csvn","followers_url":"https://api.github.com/users/csvn/followers","following_url":"https://api.github.com/users/csvn/following{/other_user}","gists_url":"https://api.github.com/users/csvn/gists{/gist_id}","starred_url":"https://api.github.com/users/csvn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/csvn/subscriptions","organizations_url":"https://api.github.com/users/csvn/orgs","repos_url":"https://api.github.com/users/csvn/repos","events_url":"https://api.github.com/users/csvn/events{/privacy}","received_events_url":"https://api.github.com/users/csvn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-04T17:38:52Z","updated_at":"2018-06-04T19:37:36Z","closed_at":"2018-06-04T17:50:04Z","author_association":"NONE","body":"Hello, when I use the code below, I expected `'SUCCESS'` to be rendered, but I get `'ERROR'`. If I change the `router.use` to `router.get` it works as expected. Removing `'/'` from `app.use()` does not seem to matter either.\r\n\r\n```javascript\r\nconst express = require('express');\r\nconst app = express();\r\n\r\napp.use('/', (req, res, next) => {\r\n  next('route');\r\n}, (req, res) => {\r\n  res.status(500).send('ERROR');\r\n});\r\n\r\napp.get('/', (req, res) => {\r\n  res.send('SUCCESS');\r\n});\r\n\r\napp.listen(8080, () => console.log('Server running on port 8080.'));\r\n```\r\n\r\nI could not find any related issues or any reason for this behavior on the docs, but please let me know if I missed anything in the bug report or docs.\r\n\r\n## Versions\r\n\r\n**express@4.16.3**  \r\n**node@10.3.0**","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3662","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3662/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3662/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3662/events","html_url":"https://github.com/expressjs/express/issues/3662","id":329109610,"node_id":"MDU6SXNzdWUzMjkxMDk2MTA=","number":3662,"title":"how to use express with typescript?","user":{"login":"setsunahao","id":22864474,"node_id":"MDQ6VXNlcjIyODY0NDc0","avatar_url":"https://avatars1.githubusercontent.com/u/22864474?v=4","gravatar_id":"","url":"https://api.github.com/users/setsunahao","html_url":"https://github.com/setsunahao","followers_url":"https://api.github.com/users/setsunahao/followers","following_url":"https://api.github.com/users/setsunahao/following{/other_user}","gists_url":"https://api.github.com/users/setsunahao/gists{/gist_id}","starred_url":"https://api.github.com/users/setsunahao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/setsunahao/subscriptions","organizations_url":"https://api.github.com/users/setsunahao/orgs","repos_url":"https://api.github.com/users/setsunahao/repos","events_url":"https://api.github.com/users/setsunahao/events{/privacy}","received_events_url":"https://api.github.com/users/setsunahao/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-06-04T15:38:21Z","updated_at":"2018-06-04T16:35:09Z","closed_at":"2018-06-04T16:17:11Z","author_association":"NONE","body":"how to use express with typescript? can express support typescript?","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3661","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3661/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3661/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3661/events","html_url":"https://github.com/expressjs/express/issues/3661","id":328729068,"node_id":"MDU6SXNzdWUzMjg3MjkwNjg=","number":3661,"title":"static serving etag not changing while file has changed on disk","user":{"login":"Ctaque","id":9574543,"node_id":"MDQ6VXNlcjk1NzQ1NDM=","avatar_url":"https://avatars0.githubusercontent.com/u/9574543?v=4","gravatar_id":"","url":"https://api.github.com/users/Ctaque","html_url":"https://github.com/Ctaque","followers_url":"https://api.github.com/users/Ctaque/followers","following_url":"https://api.github.com/users/Ctaque/following{/other_user}","gists_url":"https://api.github.com/users/Ctaque/gists{/gist_id}","starred_url":"https://api.github.com/users/Ctaque/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ctaque/subscriptions","organizations_url":"https://api.github.com/users/Ctaque/orgs","repos_url":"https://api.github.com/users/Ctaque/repos","events_url":"https://api.github.com/users/Ctaque/events{/privacy}","received_events_url":"https://api.github.com/users/Ctaque/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"node_id":"MDU6TGFiZWw1NTMzOTA4MTk=","url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-06-02T09:20:57Z","updated_at":"2018-06-02T15:31:48Z","closed_at":"2018-06-02T15:31:48Z","author_association":"NONE","body":"Hi,\r\nI'm having trouble while trying to understand the beheaviour of static files serving in express, especially the use of Etag.\r\n[MDN says about Etag](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag) : \r\n\r\n> If the resource at a given URL changes, a new Etag value must be generated. Etags are therefore similar to fingerprints and might also be used for tracking purposes by some servers. A comparison of them allows to quickly determine whether two representations of a resource are the same, but they might also be set to persist indefinitely by a tracking server\r\n\r\nBut this is not the beheaviour I am having. This is what happens : \r\nWhen I edit the react build file In the static directory (meaning, add/remove text, save, build), this Is not taken in consideration by express and the Etag of the resource does not change.\r\n\r\nHere is how I declare the static use : \r\n`app.use('/client', express.static('client', {maxAge: '1d'}));\r\n`\r\nCould someone explain why the Etag does not change when the file has changed on disk ?\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3660","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3660/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3660/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3660/events","html_url":"https://github.com/expressjs/express/issues/3660","id":326526822,"node_id":"MDU6SXNzdWUzMjY1MjY4MjI=","number":3660,"title":"using '*' with express.static redirects all the urls","user":{"login":"vdegenne","id":2827383,"node_id":"MDQ6VXNlcjI4MjczODM=","avatar_url":"https://avatars1.githubusercontent.com/u/2827383?v=4","gravatar_id":"","url":"https://api.github.com/users/vdegenne","html_url":"https://github.com/vdegenne","followers_url":"https://api.github.com/users/vdegenne/followers","following_url":"https://api.github.com/users/vdegenne/following{/other_user}","gists_url":"https://api.github.com/users/vdegenne/gists{/gist_id}","starred_url":"https://api.github.com/users/vdegenne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdegenne/subscriptions","organizations_url":"https://api.github.com/users/vdegenne/orgs","repos_url":"https://api.github.com/users/vdegenne/repos","events_url":"https://api.github.com/users/vdegenne/events{/privacy}","received_events_url":"https://api.github.com/users/vdegenne/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"node_id":"MDU6TGFiZWw1NTMzOTA4MTk=","url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-25T13:35:20Z","updated_at":"2018-05-26T19:14:24Z","closed_at":"2018-05-26T18:36:56Z","author_association":"NONE","body":"I am facing quite an unexpected behavior. I am using express for my back-end REST api and to serve the statics which is a Polymer front-end application. If I use\r\n\r\n```javascript\r\napp.use(express.static('public/build'));\r\n// or\r\napp.use('/', express.static('public/build'));\r\n```\r\nand start my node app, and request `http://localhost:3000/`, the application works normally. Again it is a Polymer application that means if I click on local links the page is not refreshing because it's using the `history` api, so for instance if I click `<a href=\"/about\">about</a>` the application will just load the appropriate view and will request appropriate data using an Ajax mechanism. That means the application seems to work normally but If I refresh the page say while the URL is `http://localhost:3000/about` express won't have a clue what `/about` route is and will just output `Cannot GET /about` on the page.\r\n\r\nMy Polymer apps need to be able to handle every URLs because there is also a 404 view, so it's ok to direct all routes to the same statics. My first thought was to write : \r\n\r\n```javascript\r\napp.use('*', express.static('public/build'));\r\n```\r\nBut now I encounter this issue where express tries to redirect (301) all my URLs,\r\n\r\n<img src=\"https://cdn1.imggmi.com/uploads/2018/5/25/7ec0b6824b5cc89deb03e41026996b1c-full.png\">\r\n\r\nit redirects all URLs even the static files like scripts and try to add a trailing slashes, which results in a complete fails to load my application..","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3659","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3659/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3659/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3659/events","html_url":"https://github.com/expressjs/express/issues/3659","id":325389051,"node_id":"MDU6SXNzdWUzMjUzODkwNTE=","number":3659,"title":"http.ServerResponse is undefined","user":{"login":"EleosOS","id":24414799,"node_id":"MDQ6VXNlcjI0NDE0Nzk5","avatar_url":"https://avatars1.githubusercontent.com/u/24414799?v=4","gravatar_id":"","url":"https://api.github.com/users/EleosOS","html_url":"https://github.com/EleosOS","followers_url":"https://api.github.com/users/EleosOS/followers","following_url":"https://api.github.com/users/EleosOS/following{/other_user}","gists_url":"https://api.github.com/users/EleosOS/gists{/gist_id}","starred_url":"https://api.github.com/users/EleosOS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EleosOS/subscriptions","organizations_url":"https://api.github.com/users/EleosOS/orgs","repos_url":"https://api.github.com/users/EleosOS/repos","events_url":"https://api.github.com/users/EleosOS/events{/privacy}","received_events_url":"https://api.github.com/users/EleosOS/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-22T17:18:53Z","updated_at":"2018-05-22T20:30:11Z","closed_at":"2018-05-22T20:30:11Z","author_association":"NONE","body":"Hey there, I got this error (like #3592) when trying to compile a react app which was created by create-react-app. It uses express to get socket.io running.\r\n\r\nNode.js: 8.11.1\r\nExpress: 4.16.3\r\n\r\n![graphic](https://user-images.githubusercontent.com/24414799/40378701-9e483afc-5df4-11e8-9b3b-be837abdbd69.png)\r\n\r\nI've uploaded the code and instructions how to run the app [here.](https://github.com/EleosOS/chatOS)","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3658","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3658/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3658/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3658/events","html_url":"https://github.com/expressjs/express/issues/3658","id":324785981,"node_id":"MDU6SXNzdWUzMjQ3ODU5ODE=","number":3658,"title":"add websocket router support","user":{"login":"yiakwy","id":8510840,"node_id":"MDQ6VXNlcjg1MTA4NDA=","avatar_url":"https://avatars0.githubusercontent.com/u/8510840?v=4","gravatar_id":"","url":"https://api.github.com/users/yiakwy","html_url":"https://github.com/yiakwy","followers_url":"https://api.github.com/users/yiakwy/followers","following_url":"https://api.github.com/users/yiakwy/following{/other_user}","gists_url":"https://api.github.com/users/yiakwy/gists{/gist_id}","starred_url":"https://api.github.com/users/yiakwy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yiakwy/subscriptions","organizations_url":"https://api.github.com/users/yiakwy/orgs","repos_url":"https://api.github.com/users/yiakwy/repos","events_url":"https://api.github.com/users/yiakwy/events{/privacy}","received_events_url":"https://api.github.com/users/yiakwy/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-21T04:44:06Z","updated_at":"2018-05-21T11:46:13Z","closed_at":"2018-05-21T11:45:58Z","author_association":"NONE","body":"Hi, here is a solution by adding faked wbsocket router method to \"Application\", and \"Router\". \r\n\r\n> https://github.com/amekkawi/express-ws-routes/issues/8. \r\n\r\nHis solution is really nice. But there is no people maintaining it. It does not work in new version of express anymore. \r\n\r\nCould any developers help me to figure out how to modify the code so that we can use it again?","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3657","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3657/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3657/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3657/events","html_url":"https://github.com/expressjs/express/issues/3657","id":323812596,"node_id":"MDU6SXNzdWUzMjM4MTI1OTY=","number":3657,"title":"Curried Default Error Handler Failing","user":{"login":"JesterXL","id":424737,"node_id":"MDQ6VXNlcjQyNDczNw==","avatar_url":"https://avatars1.githubusercontent.com/u/424737?v=4","gravatar_id":"","url":"https://api.github.com/users/JesterXL","html_url":"https://github.com/JesterXL","followers_url":"https://api.github.com/users/JesterXL/followers","following_url":"https://api.github.com/users/JesterXL/following{/other_user}","gists_url":"https://api.github.com/users/JesterXL/gists{/gist_id}","starred_url":"https://api.github.com/users/JesterXL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JesterXL/subscriptions","organizations_url":"https://api.github.com/users/JesterXL/orgs","repos_url":"https://api.github.com/users/JesterXL/repos","events_url":"https://api.github.com/users/JesterXL/events{/privacy}","received_events_url":"https://api.github.com/users/JesterXL/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-16T22:40:14Z","updated_at":"2018-05-18T16:28:34Z","closed_at":"2018-05-17T01:48:00Z","author_association":"NONE","body":"It appears that Express checks the function's arity to identify if it's an error-handler route. It works with a function, and works with an arrow function, but does not work with a Lodash curried function. I believe this is possibly because `theFunction.length` will print out 0 for curried functions, whereas `function` and `()=>` will print out a true arity. However, I can't seem to find where in the code y'all are checking for this. I've tried to manually setting the `theFunction.length` to 3 or 4 to hack it, but no dice. Any pointers?\r\n\r\nWorks when you hit `localhost:3000/error`:\r\n```javascript\r\nconst express = require('express')\r\nconst curry = require('lodash/fp/curry')\r\nconst app = express()\r\n\r\napp.get('/', (req, res) => res.send('Hello World!'))\r\napp.get('/error', (req, res, next) => {\r\n    next(new Error('boom'))\r\n})\r\n\r\nfunction genericErrorHandler(err, req, res, next) {\r\n    console.log(\"err message:\", err.message)\r\n    res.status(500).send('Something broke!');\r\n}\r\napp.use(genericErrorHandler)\r\n\r\napp.listen(3000, () => console.log('Example app listening on port 3000!'))\r\n```\r\n\r\nDoesn't work:\r\n```javascript\r\nconst express = require('express')\r\nconst curry = require('lodash/fp/curry')\r\nconst app = express()\r\n\r\napp.get('/', (req, res) => res.send('Hello World!'))\r\napp.get('/error', (req, res, next) => {\r\n    next(new Error('boom'))\r\n})\r\n\r\nconst genericErrorHandler = curry((prefix, err, req, res, next) => {\r\n    console.log(`${prefix} err message:`, err.message)\r\n    res.status(500).send('Something broke!');\r\n})\r\nconst curried = genericErrorHandler('🐮')\r\ncurried.length = 4 // I tried, heh\r\napp.use(curried);\r\n\r\napp.listen(3000, () => console.log('Example app listening on port 3000!'))\r\n```","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3654","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3654/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3654/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3654/events","html_url":"https://github.com/expressjs/express/issues/3654","id":322900694,"node_id":"MDU6SXNzdWUzMjI5MDA2OTQ=","number":3654,"title":"Support question - where does req.fresh come from","user":{"login":"ORESoftware","id":11139560,"node_id":"MDQ6VXNlcjExMTM5NTYw","avatar_url":"https://avatars1.githubusercontent.com/u/11139560?v=4","gravatar_id":"","url":"https://api.github.com/users/ORESoftware","html_url":"https://github.com/ORESoftware","followers_url":"https://api.github.com/users/ORESoftware/followers","following_url":"https://api.github.com/users/ORESoftware/following{/other_user}","gists_url":"https://api.github.com/users/ORESoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/ORESoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ORESoftware/subscriptions","organizations_url":"https://api.github.com/users/ORESoftware/orgs","repos_url":"https://api.github.com/users/ORESoftware/repos","events_url":"https://api.github.com/users/ORESoftware/events{/privacy}","received_events_url":"https://api.github.com/users/ORESoftware/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-14T16:59:34Z","updated_at":"2018-05-14T21:03:02Z","closed_at":"2018-05-14T21:03:01Z","author_association":"NONE","body":"I am trying to work on this issue, this is the context:\r\nhttps://github.com/expressjs/serve-static/issues/107#issuecomment-388875912\r\n\r\nLooking at the codebase:\r\nhttps://github.com/expressjs/express/blob/master/lib/response.js#L206\r\n\r\nBasically need to figure out how etags would work with a cached file in memory. According to the current code, if `req.fresh` is truthy, we can send a 304, but where is `req.fresh` being set?","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3653","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3653/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3653/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3653/events","html_url":"https://github.com/expressjs/express/issues/3653","id":322492688,"node_id":"MDU6SXNzdWUzMjI0OTI2ODg=","number":3653,"title":"Question about check the shipping format","user":{"login":"cjpatoilo","id":1542831,"node_id":"MDQ6VXNlcjE1NDI4MzE=","avatar_url":"https://avatars3.githubusercontent.com/u/1542831?v=4","gravatar_id":"","url":"https://api.github.com/users/cjpatoilo","html_url":"https://github.com/cjpatoilo","followers_url":"https://api.github.com/users/cjpatoilo/followers","following_url":"https://api.github.com/users/cjpatoilo/following{/other_user}","gists_url":"https://api.github.com/users/cjpatoilo/gists{/gist_id}","starred_url":"https://api.github.com/users/cjpatoilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjpatoilo/subscriptions","organizations_url":"https://api.github.com/users/cjpatoilo/orgs","repos_url":"https://api.github.com/users/cjpatoilo/repos","events_url":"https://api.github.com/users/cjpatoilo/events{/privacy}","received_events_url":"https://api.github.com/users/cjpatoilo/received_events","type":"User","site_admin":false},"labels":[{"id":206149,"node_id":"MDU6TGFiZWwyMDYxNDk=","url":"https://api.github.com/repos/expressjs/express/labels/4.x","name":"4.x","color":"ededed","default":false},{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-12T08:08:27Z","updated_at":"2018-05-12T12:41:12Z","closed_at":"2018-05-12T12:40:55Z","author_association":"NONE","body":"Hi guys,\r\n\r\nIs there possible to check if sending the post was through a HTML form or an ajax call?","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3652","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3652/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3652/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3652/events","html_url":"https://github.com/expressjs/express/issues/3652","id":322486936,"node_id":"MDU6SXNzdWUzMjI0ODY5MzY=","number":3652,"title":"Missing first space in res.send","user":{"login":"siyangqiu","id":6004624,"node_id":"MDQ6VXNlcjYwMDQ2MjQ=","avatar_url":"https://avatars3.githubusercontent.com/u/6004624?v=4","gravatar_id":"","url":"https://api.github.com/users/siyangqiu","html_url":"https://github.com/siyangqiu","followers_url":"https://api.github.com/users/siyangqiu/followers","following_url":"https://api.github.com/users/siyangqiu/following{/other_user}","gists_url":"https://api.github.com/users/siyangqiu/gists{/gist_id}","starred_url":"https://api.github.com/users/siyangqiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siyangqiu/subscriptions","organizations_url":"https://api.github.com/users/siyangqiu/orgs","repos_url":"https://api.github.com/users/siyangqiu/repos","events_url":"https://api.github.com/users/siyangqiu/events{/privacy}","received_events_url":"https://api.github.com/users/siyangqiu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-12T06:19:53Z","updated_at":"2018-05-12T18:18:07Z","closed_at":"2018-05-12T18:15:22Z","author_association":"NONE","body":"In the default express generator project using: \r\n> express --view=pug myapp\r\n\r\nThe default page at localhost:3000/users returns:\r\n> respondwith a resource\r\n\r\nThere isn't a space between *respond* and *with*\r\n\r\nIt seems that the first space after the first word is always skipped. I'm a bit inexperienced with 
8000
Express, so I can't tell if this is a result of some line of code in the default project or something deeper in the framework (i.e. something in the 'res.send' function).\r\n\r\n> router.get('/', function(req, res, next) {\r\n>      res.send('respond with a resource');\r\n> });","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3651","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3651/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3651/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3651/events","html_url":"https://github.com/expressjs/express/issues/3651","id":322434802,"node_id":"MDU6SXNzdWUzMjI0MzQ4MDI=","number":3651,"title":"optimization - static assets check if file exists, but use a static map of fs in memory instead?","user":{"login":"ORESoftware","id":11139560,"node_id":"MDQ6VXNlcjExMTM5NTYw","avatar_url":"https://avatars1.githubusercontent.com/u/11139560?v=4","gravatar_id":"","url":"https://api.github.com/users/ORESoftware","html_url":"https://github.com/ORESoftware","followers_url":"https://api.github.com/users/ORESoftware/followers","following_url":"https://api.github.com/users/ORESoftware/following{/other_user}","gists_url":"https://api.github.com/users/ORESoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/ORESoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ORESoftware/subscriptions","organizations_url":"https://api.github.com/users/ORESoftware/orgs","repos_url":"https://api.github.com/users/ORESoftware/repos","events_url":"https://api.github.com/users/ORESoftware/events{/privacy}","received_events_url":"https://api.github.com/users/ORESoftware/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-05-11T21:07:12Z","updated_at":"2018-05-11T22:17:29Z","closed_at":"2018-05-11T21:17:59Z","author_association":"NONE","body":"I have an optimization idea that might not have been implemented yet.\r\n\r\nI was looking at the 'serve-static' repo - if the `express.static` middleware comes before your API routes, I believe 'serve-static' is always going to try to read the file from the fs, and if the file doesn't exist the middleware will then call `next()`.\r\n\r\n**That means there is basically always going to be a fs read before your API routes gets hit.** \r\n\r\ninstead, why not create a map of the filesystem in memory, if a server route (path) is not in the map, don't even bother trying to read it in the 'serve-static' middleware, just call next() immediately.\r\n\r\nIs this optimization already in place?\r\nI think it would be AWESOME if users could pass an option to `express.static` that said the FS is static, therefore create a map of it in memory.\r\n\r\nhopefully this makes sense. \r\nI have some Express middleware that implemented this idea, although it's pretty simple stuff, you probably get it.","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3650","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3650/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3650/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3650/events","html_url":"https://github.com/expressjs/express/issues/3650","id":322290733,"node_id":"MDU6SXNzdWUzMjIyOTA3MzM=","number":3650,"title":"body-parser deprecated undefined extended: provide extended option","user":{"login":"tiendq","id":815910,"node_id":"MDQ6VXNlcjgxNTkxMA==","avatar_url":"https://avatars2.githubusercontent.com/u/815910?v=4","gravatar_id":"","url":"https://api.github.com/users/tiendq","html_url":"https://github.com/tiendq","followers_url":"https://api.github.com/users/tiendq/followers","following_url":"https://api.github.com/users/tiendq/following{/other_user}","gists_url":"https://api.github.com/users/tiendq/gists{/gist_id}","starred_url":"https://api.github.com/users/tiendq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiendq/subscriptions","organizations_url":"https://api.github.com/users/tiendq/orgs","repos_url":"https://api.github.com/users/tiendq/repos","events_url":"https://api.github.com/users/tiendq/events{/privacy}","received_events_url":"https://api.github.com/users/tiendq/received_events","type":"User","site_admin":false},"labels":[{"id":206149,"node_id":"MDU6TGFiZWwyMDYxNDk=","url":"https://api.github.com/repos/expressjs/express/labels/4.x","name":"4.x","color":"ededed","default":false},{"id":572472845,"node_id":"MDU6TGFiZWw1NzI0NzI4NDU=","url":"https://api.github.com/repos/expressjs/express/labels/module:body-parser","name":"module:body-parser","color":"bfe5bf","default":false},{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-11T13:09:56Z","updated_at":"2018-05-11T14:51:13Z","closed_at":"2018-05-11T13:16:58Z","author_association":"NONE","body":"`express.urlencoded([options])` documentation says that `extended` option is `true` by default. But `node` shows a deprecated warning.\r\n\r\n```javascript\r\nlet express = require('express');\r\nlet router = express.Router();\r\n\r\nrouter.post(\"/create\", express.urlencoded(), function (request, response) {\r\n});\r\n```\r\n\r\n`body-parser deprecated undefined extended: provide extended option`\r\n\r\nThere is no warning if I set `extended` explicitly:\r\n\r\n`express.urlencoded({ extended: true })`\r\n\r\nNodeJS v10.0.0\r\nexpress 4.16.3","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3649","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3649/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3649/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3649/events","html_url":"https://github.com/expressjs/express/issues/3649","id":321924949,"node_id":"MDU6SXNzdWUzMjE5MjQ5NDk=","number":3649,"title":"Upload page for Download Page Example","user":{"login":"ImTotallyNotMessi","id":29573484,"node_id":"MDQ6VXNlcjI5NTczNDg0","avatar_url":"https://avatars2.githubusercontent.com/u/29573484?v=4","gravatar_id":"","url":"https://api.github.com/users/ImTotallyNotMessi","html_url":"https://github.com/ImTotallyNotMessi","followers_url":"https://api.github.com/users/ImTotallyNotMessi/followers","following_url":"https://api.github.com/users/ImTotallyNotMessi/following{/other_user}","gists_url":"https://api.github.com/users/ImTotallyNotMessi/gists{/gist_id}","starred_url":"https://api.github.com/users/ImTotallyNotMessi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ImTotallyNotMessi/subscriptions","organizations_url":"https://api.github.com/users/ImTotallyNotMessi/orgs","repos_url":"https://api.github.com/users/ImTotallyNotMessi/repos","events_url":"https://api.github.com/users/ImTotallyNotMessi/events{/privacy}","received_events_url":"https://api.github.com/users/ImTotallyNotMessi/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-10T13:08:36Z","updated_at":"2018-05-10T15:32:05Z","closed_at":"2018-05-10T15:31:16Z","author_association":"NONE","body":"[Download Example](https://github.com/expressjs/express/blob/master/examples/downloads/index.js)\r\nIs there a way where i can make an upload file page. Im looking to have an upload/download page on my website\r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3645","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3645/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3645/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3645/events","html_url":"https://github.com/expressjs/express/issues/3645","id":320567942,"node_id":"MDU6SXNzdWUzMjA1Njc5NDI=","number":3645,"title":"Question about routing and params","user":{"login":"AlbuquerqueRafael","id":13631723,"node_id":"MDQ6VXNlcjEzNjMxNzIz","avatar_url":"https://avatars3.githubusercontent.com/u/13631723?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbuquerqueRafael","html_url":"https://github.com/AlbuquerqueRafael","followers_url":"https://api.github.com/users/AlbuquerqueRafael/followers","following_url":"https://api.github.com/users/AlbuquerqueRafael/following{/other_user}","gists_url":"https://api.github.com/users/AlbuquerqueRafael/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbuquerqueRafael/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbuquerqueRafael/subscriptions","organizations_url":"https://api.github.com/users/AlbuquerqueRafael/orgs","repos_url":"https://api.github.com/users/AlbuquerqueRafael/repos","events_url":"https://api.github.com/users/AlbuquerqueRafael/events{/privacy}","received_events_url":"https://api.github.com/users/AlbuquerqueRafael/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-06T06:52:20Z","updated_at":"2018-05-06T13:31:55Z","closed_at":"2018-05-06T13:31:46Z","author_association":"NONE","body":"Well, I'm having a problem with routing in ExpressJS.\r\n\r\nWhen I write my router this way:\r\n\r\n![image](https://user-images.githubusercontent.com/13631723/39670446-f6d67966-50db-11e8-8b19-f3625bc08610.png)\r\n\r\nAnd try to access: http://127.0.0.1:3000/v1/publicacao/search/ (My endpoint for my search function), \r\nI receive: \"Cast to ObjectId failed for value \"search\" at path \"_id\" for model \"Publication\"\"\r\n\r\nBut when I write my router this way:\r\n![image](https://user-images.githubusercontent.com/13631723/39670572-44b249ec-50de-11e8-9752-a8e8c5ae3243.png)\r\n\r\nAnd try to access: http://127.0.0.1:3000/v1/publicacao/search/ (The endpoint for search function),\r\nI receive: \"gg\"\r\n\r\nIn other words, the router is identifying \"everything\" that was not previous matched as a route parameter and entering on:\r\nrouter.get(':id', .. \r\n\r\nThere is something that I can do to avoid that? Or this is simply a Javascript/ExpressJS \"thing\"?\r\n\r\nThanks in advance!","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3644","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3644/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3644/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3644/events","html_url":"https://github.com/expressjs/express/issues/3644","id":320519510,"node_id":"MDU6SXNzdWUzMjA1MTk1MTA=","number":3644,"title":"HTTP/2 in express for node v10","user":{"login":"matt212","id":1698139,"node_id":"MDQ6VXNlcjE2OTgxMzk=","avatar_url":"https://avatars1.githubusercontent.com/u/1698139?v=4","gravatar_id":"","url":"https://api.github.com/users/matt212","html_url":"https://github.com/matt212","followers_url":"https://api.github.com/users/matt212/followers","following_url":"https://api.github.com/users/matt212/following{/other_user}","gists_url":"https://api.github.com/users/matt212/gists{/gist_id}","starred_url":"https://api.github.com/users/matt212/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matt212/subscriptions","organizations_url":"https://api.github.com/users/matt212/orgs","repos_url":"https://api.github.com/users/matt212/repos","events_url":"https://api.github.com/users/matt212/events{/privacy}","received_events_url":"https://api.github.com/users/matt212/received_events","type":"User","site_admin":false},"labels":[{"id":55442290,"node_id":"MDU6TGFiZWw1NTQ0MjI5MA==","url":"https://api.github.com/repos/expressjs/express/labels/duplicate","name":"duplicate","color":"cccccc","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-05T15:49:20Z","updated_at":"2018-05-05T15:55:05Z","closed_at":"2018-05-05T15:54:46Z","author_association":"NONE","body":"hi,\r\nsince now node v10 supports HTTP/2.\r\nit would be feasible option to implement the same in express for routes ,render, session management for intern releases.\r\n\r\nhttps://nodejs.org/api/http2.html","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3643","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3643/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3643/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3643/events","html_url":"https://github.com/expressjs/express/issues/3643","id":320475481,"node_id":"MDU6SXNzdWUzMjA0NzU0ODE=","number":3643,"title":"Is that possible to extend the next(), i.e. insert another middleware inside a middleware?","user":{"login":"leoyli","id":8866555,"node_id":"MDQ6VXNlcjg4NjY1NTU=","avatar_url":"https://avatars3.githubusercontent.com/u/8866555?v=4","gravatar_id":"","url":"https://api.github.com/users/leoyli","html_url":"https://github.com/leoyli","followers_url":"https://api.github.com/users/leoyli/followers","following_url":"https://api.github.com/users/leoyli/following{/other_user}","gists_url":"https://api.github.com/users/leoyli/gists{/gist_id}","starred_url":"https://api.github.com/users/leoyli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leoyli/subscriptions","organizations_url":"https://api.github.com/users/leoyli/orgs","repos_url":"https://api.github.com/users/leoyli/repos","events_url":"https://api.github.com/users/leoyli/events{/privacy}","received_events_url":"https://api.github.com/users/leoyli/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-05T03:24:08Z","updated_at":"2018-05-05T04:10:25Z","closed_at":"2018-05-05T04:10:18Z","author_association":"NONE","body":"For simplification, assume I have two modularized, independent middleware.\r\n\r\n```\r\nfunction middlewareA (req, res, next) {\r\n  (...)\r\n  return next();\r\n}\r\n\r\nfunction middlewareC (req, res, next) {\r\n  (...)\r\n  return next();\r\n}\r\n```\r\n\r\nIf I want to chain two middleware, normally I would do:\r\n```\r\nconst { Router } = require('express');\r\nconst someRouter = new Router();\r\nconst wrapAsync = //(a special wrapper for catching errors and bubbling)\r\nsomeRouter\r\n  .use(wrapAsync(middlewareA))\r\n  .use(wrapAsync(middlewareC));\r\n```\r\n\r\nHowever, for some reason, I want to extend the calling of `next()` inside `middlewareA` but I'm not able to added the middleware directly into `someRouter`, saying I have another `middlewareB1` to be inserted.  I have an ugly way to do it:\r\n```\r\nfunction middlewareA (req, res, next) {\r\n  (...)\r\n  return middlewareB1(req, res, wrapAsync(middlewareC(req, res, next)));\r\n}\r\n```\r\n\r\nWhat bother me is If I have N extra middleware (i.e. `middlewareB1` ~ `middlewareBN`) want to be inserted between `middlewareA` and `middlewareC`, then apparently I will then have a huge long long line of code... Although I think I might came up with a `for` loop for this kind of job, but before I dive into the implementation, I just wonder if anyone have a similar experiences.  Does anyone come up a good way to insert multiple middleware functions in another middleware?","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3642","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3642/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3642/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3642/events","html_url":"https://github.com/expressjs/express/issues/3642","id":320287699,"node_id":"MDU6SXNzdWUzMjAyODc2OTk=","number":3642,"title":"Requests being routed to the wrong handler","user":{"login":"austinhuang0131","id":16656689,"node_id":"MDQ6VXNlcjE2NjU2Njg5","avatar_url":"https://avatars1.githubusercontent.com/u/16656689?v=4","gravatar_id":"","url":"https://api.github.com/users/austinhuang0131","html_url":"https://github.com/austinhuang0131","followers_url":"https://api.github.com/users/austinhuang0131/followers","following_url":"https://api.github.com/users/austinhuang0131/following{/other_user}","gists_url":"https://api.github.com/users/austinhuang0131/gists{/gist_id}","starred_url":"https://api.github.com/users/austinhuang0131/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/austinhuang0131/subscriptions","organizations_url":"https://api.github.com/users/austinhuang0131/orgs","repos_url":"https://api.github.com/users/austinhuang0131/repos","events_url":"https://api.github.com/users/austinhuang0131/events{/privacy}","received_events_url":"https://api.github.com/users/austinhuang0131/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"node_id":"MDU6TGFiZWw1NTMzOTA4MTk=","url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-04T14:03:45Z","updated_at":"2018-05-04T19:50:30Z","closed_at":"2018-05-04T18:39:34Z","author_association":"NONE","body":"From [this script](https://github.com/austinhuang0131/metagon/blob/master/index.js#L2041):\r\n\r\n```js\r\nvar server = express();\r\nserver.use(bodyParser.json({type: \"*/*\"}));\r\nserver.post('/api/messages', connector.listen());\r\nserver.post('/linebot', lineConnector.listen);\r\nserver.post('/cisco', cisco.listen);\r\n```\r\n\r\nCurrently, the requests sent to `/linebot` are sent to `cisco.listen` instead. `/api/messages` works correctly, however.\r\n\r\n* I'm using Heroku.\r\n* `lineConnector.listen` is ref'd [here](https://github.com/austinhuang0131/botbuilder-line/blob/master/index.js#L190).\r\n* `cisco.listen` is ref'd [here](https://github.com/austinhuang0131/botbuilder-ciscospark/blob/master/index.js#L90).\r\n* Commenting out the `/cisco` line works properly.","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3641","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3641/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3641/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3641/events","html_url":"https://github.com/expressjs/express/issues/3641","id":320191238,"node_id":"MDU6SXNzdWUzMjAxOTEyMzg=","number":3641,"title":"req.xhr not work in cross origin","user":{"login":"keyiis","id":7766085,"node_id":"MDQ6VXNlcjc3NjYwODU=","avatar_url":"https://avatars1.githubusercontent.com/u/7766085?v=4","gravatar_id":"","url":"https://api.github.com/users/keyiis","html_url":"https://github.com/keyiis","followers_url":"https://api.github.com/users/keyiis/followers","following_url":"https://api.github.com/users/keyiis/following{/other_user}","gists_url":"https://api.github.com/users/keyiis/gists{/gist_id}","starred_url":"https://api.github.com/users/keyiis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keyiis/subscriptions","organizations_url":"https://api.github.com/users/keyiis/orgs","repos_url":"https://api.github.com/users/keyiis/repos","events_url":"https://api.github.com/users/keyiis/events{/privacy}","received_events_url":"https://api.github.com/users/keyiis/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"node_id":"MDU6TGFiZWw1NTMzOTA4MTk=","url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-04T08:29:19Z","updated_at":"2018-05-08T11:51:37Z","closed_at":"2018-05-08T11:51:37Z","author_association":"NONE","body":"I used client post data to server by ajax,my client is desktop app,the req.xhr still false on server side\r\n**client**\r\n```\r\n $.ajax({\r\n                        type: 'POST',\r\n                        data: JSON.stringify({ user: user }),\r\n                        contentType: 'application/json',\r\n                        url: 'http://127.0.0.1:3000/client/login',\r\n                        success: response => {\r\n                            console.log(response);\r\n                            localforage.setItem('token', response.token);\r\n                        }\r\n                    });\r\n```\r\n**server**\r\n```\r\napp.use('/', (req, res, next) => {\r\n  res.setHeader('Access-Control-Allow-Origin', req.headers.origin || '*');\r\n  res.setHeader('Access-Control-Allow-Headers', \"Origin,X-Requested-With,content-type,Accept,x-access-token\");\r\n  next();\r\n}, indexRouter);\r\n```","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3640","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3640/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3640/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3640/events","html_url":"https://github.com/expressjs/express/issues/3640","id":319567743,"node_id":"MDU6SXNzdWUzMTk1Njc3NDM=","number":3640,"title":"how can I get the params of a parent rout in a child route?","user":{"login":"slim-hmidi","id":31925861,"node_id":"MDQ6VXNlcjMxOTI1ODYx","avatar_url":"https://avatars2.githubusercontent.com/u/31925861?v=4","gravatar_id":"","url":"https://api.github.com/users/slim-hmidi","html_url":"https://github.com/slim-hmidi","followers_url":"https://api.github.com/users/slim-hmidi/followers","following_url":"https://api.github.com/users/slim-hmidi/following{/other_user}","gists_url":"https://api.github.com/users/slim-hmidi/gists{/gist_id}","starred_url":"https://api.github.com/users/slim-hmidi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slim-hmidi/subscriptions","organizations_url":"https://api.github.com/users/slim-hmidi/orgs","repos_url":"https://api.github.com/users/slim-hmidi/repos","events_url":"https://api.github.com/users/slim-hmidi/events{/privacy}","received_events_url":"https://api.github.com/users/slim-hmidi/received_events","type":"User","site_admin":false},"labels":[{"id":553390819,"node_id":"MDU6TGFiZWw1NTMzOTA4MTk=","url":"https://api.github.com/repos/expressjs/express/labels/awaiting%20more%20info","name":"awaiting more info","color":"cc317c","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-02T14:07:55Z","updated_at":"2018-05-02T15:39:39Z","closed_at":"2018-05-02T15:39:39Z","author_association":"NONE","body":"I have a nested route in nodejs and I'm trying to create a post api like this:\r\n```js\r\napp.post('/api/products/:product_id/price_perid', async (req, res) =>{\r\n  await Product\r\n  .query()\r\n  .insert({\r\n     product_id: req.params.product_id,\r\n     period: req.body.period\r\n  })\r\n})\r\n```\r\nWhen I checked the database, I found the product_id=null. I don't know if it is true to mix req.params and req.body in a post ROUTE. The insertion works well if I send the product_id in the body and using req.body.product_id. \r\nreq.params: `{}`\r\nreq.baseUrl: `api/products/:product_id`\r\nreq.url: `/price_perid`\r\n\r\nIs it possible to mix `req.params` and `req.body` in post api?\r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3639","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3639/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3639/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3639/events","html_url":"https://github.com/expressjs/express/issues/3639","id":319124801,"node_id":"MDU6SXNzdWUzMTkxMjQ4MDE=","number":3639,"title":"Support Q: pre-compile handlebars template(s)","user":{"login":"ORESoftware","id":11139560,"node_id":"MDQ6VXNlcjExMTM5NTYw","avatar_url":"https://avatars1.githubusercontent.com/u/11139560?v=4","gravatar_id":"","url":"https://api.github.com/users/ORESoftware","html_url":"https://github.com/ORESoftware","followers_url":"https://api.github.com/users/ORESoftware/followers","following_url":"https://api.github.com/users/ORESoftware/following{/other_user}","gists_url":"https://api.github.com/users/ORESoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/ORESoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ORESoftware/subscriptions","organizations_url":"https://api.github.com/users/ORESoftware/orgs","repos_url":"https://api.github.com/users/ORESoftware/repos","events_url":"https://api.github.com/users/ORESoftware/events{/privacy}","received_events_url":"https://api.github.com/users/ORESoftware/received_events","type":"User","site_admin":false},"labels":[{"id":206149,"node_id":"MDU6TGFiZWwyMDYxNDk=","url":"https://api.github.com/repos/expressjs/express/labels/4.x","name":"4.x","color":"ededed","default":false},{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-01T06:05:20Z","updated_at":"2018-05-01T19:14:52Z","closed_at":"2018-05-01T06:19:36Z","author_association":"NONE","body":"I have this question on SO:\r\nhttps://stackoverflow.com/questions/50111841/precompile-handlebars-templates-on-express-server\r\n\r\nwith handlebars, you can \"pre-compile\" templates. I am guessing that it just makes it that much quicker to render the template with data, something like this:\r\n\r\n```js\r\nconst Handlebars = require('handlebars');\r\nconst string = fs.readFileSync('index.hbs');\r\nconst render = Handlebars.compile(string);\r\n```\r\n\r\n// you could then cache that render function and use it like so:\r\n```js\r\nrender({the:'data'});\r\n```\r\n\r\nso I know that Express is caching the template, because I am using\r\n```js\r\napp.set('view cache', true);\r\n```\r\nhowever, how can I configure Express to pre-compile Handlebars templates, if it's not already doing that out-of-the-box?\r\n","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3638","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3638/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3638/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3638/events","html_url":"https://github.com/expressjs/express/issues/3638","id":318741284,"node_id":"MDU6SXNzdWUzMTg3NDEyODQ=","number":3638,"title":"Add support for easy creating of HTTP proxies","user":{"login":"mishaor","id":32357470,"node_id":"MDQ6VXNlcjMyMzU3NDcw","avatar_url":"https://avatars3.githubusercontent.com/u/32357470?v=4","gravatar_id":"","url":"https://api.github.com/users/mishaor","html_url":"https://github.com/mishaor","followers_url":"https://api.github.com/users/mishaor/followers","following_url":"https://api.github.com/users/mishaor/following{/other_user}","gists_url":"https://api.github.com/users/mishaor/gists{/gist_id}","starred_url":"https://api.github.com/users/mishaor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mishaor/subscriptions","organizations_url":"https://api.github.com/users/mishaor/orgs","repos_url":"https://api.github.com/users/mishaor/repos","events_url":"https://api.github.com/users/mishaor/events{/privacy}","received_events_url":"https://api.github.com/users/mishaor/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-29T19:09:44Z","updated_at":"2018-04-29T19:20:01Z","closed_at":"2018-04-29T19:17:34Z","author_association":"NONE","body":"So the Express class would have Express.Proxy subclass.","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3637","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3637/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3637/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3637/events","html_url":"https://github.com/expressjs/express/issues/3637","id":318724318,"node_id":"MDU6SXNzdWUzMTg3MjQzMTg=","number":3637,"title":"Send response from outside route","user":{"login":"gijo-varghese","id":23092846,"node_id":"MDQ6VXNlcjIzMDkyODQ2","avatar_url":"https://avatars1.githubusercontent.com/u/23092846?v=4","gravatar_id":"","url":"https://api.github.com/users/gijo-varghese","html_url":"https://github.com/gijo-varghese","followers_url":"https://api.github.com/users/gijo-varghese/followers","following_url":"https://api.github.com/users/gijo-varghese/following{/other_user}","gists_url":"https://api.github.com/users/gijo-varghese/gists{/gist_id}","starred_url":"https://api.github.com/users/gijo-varghese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gijo-varghese/subscriptions","organizations_url":"https://api.github.com/users/gijo-varghese/orgs","repos_url":"https://api.github.com/users/gijo-varghese/repos","events_url":"https://api.github.com/users/gijo-varghese/events{/privacy}","received_events_url":"https://api.github.com/users/gijo-varghese/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-04-29T15:07:33Z","updated_at":"2018-04-29T16:08:51Z","closed_at":"2018-04-29T15:17:11Z","author_association":"NONE","body":"I've route `'/endpoint'` that accept a request, send it to a WebSocket client, and wait for its response. Is it possible to send the response outside the route function?\r\n\r\n\r\n```\r\nio.on('connection', (socket) => {\r\n    socket.on('res', (data) => {\r\n        console.log(data)\r\n         // response event received. lets send back to /endpoint\r\n    });\r\n});\r\n\r\napp.get('/endpoint', (req, res) => {\r\n    io.emit('req', { data: 'hello' });\r\n   // wait for event 'res' in socket io \r\n});\r\n```\r\n\r\nStackoverflow:\r\nhttps://stackoverflow.com/questions/50087400/forward-request-to-ws-client-and-wait-for-response-express/50087724","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3636","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3636/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3636/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3636/events","h
4224
tml_url":"https://github.com/expressjs/express/issues/3636","id":318481043,"node_id":"MDU6SXNzdWUzMTg0ODEwNDM=","number":3636,"title":"axios response data incorrect","user":{"login":"auahmed","id":4032097,"node_id":"MDQ6VXNlcjQwMzIwOTc=","avatar_url":"https://avatars1.githubusercontent.com/u/4032097?v=4","gravatar_id":"","url":"https://api.github.com/users/auahmed","html_url":"https://github.com/auahmed","followers_url":"https://api.github.com/users/auahmed/followers","following_url":"https://api.github.com/users/auahmed/following{/other_user}","gists_url":"https://api.github.com/users/auahmed/gists{/gist_id}","starred_url":"https://api.github.com/users/auahmed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/auahmed/subscriptions","organizations_url":"https://api.github.com/users/auahmed/orgs","repos_url":"https://api.github.com/users/auahmed/repos","events_url":"https://api.github.com/users/auahmed/events{/privacy}","received_events_url":"https://api.github.com/users/auahmed/received_events","type":"User","site_admin":false},"labels":[{"id":133578711,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTE=","url":"https://api.github.com/repos/expressjs/express/labels/invalid","name":"invalid","color":"e6e6e6","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2018-04-27T16:58:30Z","updated_at":"2018-04-27T17:59:27Z","closed_at":"2018-04-27T17:51:26Z","author_association":"NONE","body":"Was hoping i can get some assistance on this.\r\nI am calling another API which returned an attachment to me.\r\nIf i was to call that API normally by using postman or anything i can download the ZIP successfully and unzip the contents.\r\nBut when i implement it to express my data is not right.\r\n\r\nAs seen below the issue is because when i try writing the returned data to a file it is not right.\r\nThe content-length is actually supposed to be 24109 but when i look at the response data length i only have 23062. \r\nIs this because of some sort of body parser that i need to implement?\r\n\r\nI have the following code:\r\n````\r\nconst express = require('express')\r\nconst axios = require('axios');\r\nconst app = express()\r\n\r\nconst generate = () => {\r\n  return axios.post('http://localhost:8050/api/json', {\r\n      host: 'lightapi.net',\r\n      service: 'codegen',\r\n      action: \"generate\",\r\n      version: '0.0.1',\r\n      data: [{\"framework\":\"swagger\"}]\r\n  }, {\r\n      responseType: 'blob',\r\n  });\r\n};\r\n\r\napp.get('/', (req, res) => {\r\n  generate().then((response) => {\r\n    console.log('########### HEADERS: ', response.headers);\r\n    console.log('########### AXIOS: ', response.data.length);\r\n  });\r\n  res.send('Hello World!');\r\n});\r\n\r\napp.listen(9000, () => console.log('Example app listening on port 9000!'))\r\n````\r\n\r\nand i get the following response:\r\n````\r\n########### HEADERS:  { connection: 'close',\r\n  server: 'L',\r\n  'content-type': 'application/zip',\r\n  'content-length': '24109',\r\n  'content-disposition': 'attachment',\r\n  date: 'Fri, 27 Apr 2018 16:48:05 GMT' }\r\n########### AXIOS:  23062\r\n````","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3635","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3635/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3635/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3635/events","html_url":"https://github.com/expressjs/express/issues/3635","id":318415945,"node_id":"MDU6SXNzdWUzMTg0MTU5NDU=","number":3635,"title":"How to res.send data 2 times?","user":{"login":"botaniQQQ","id":3118010,"node_id":"MDQ6VXNlcjMxMTgwMTA=","avatar_url":"https://avatars3.githubusercontent.com/u/3118010?v=4","gravatar_id":"","url":"https://api.github.com/users/botaniQQQ","html_url":"https://github.com/botaniQQQ","followers_url":"https://api.github.com/users/botaniQQQ/followers","following_url":"https://api.github.com/users/botaniQQQ/following{/other_user}","gists_url":"https://api.github.com/users/botaniQQQ/gists{/gist_id}","starred_url":"https://api.github.com/users/botaniQQQ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/botaniQQQ/subscriptions","organizations_url":"https://api.github.com/users/botaniQQQ/orgs","repos_url":"https://api.github.com/users/botaniQQQ/repos","events_url":"https://api.github.com/users/botaniQQQ/events{/privacy}","received_events_url":"https://api.github.com/users/botaniQQQ/received_events","type":"User","site_admin":false},"labels":[{"id":206149,"node_id":"MDU6TGFiZWwyMDYxNDk=","url":"https://api.github.com/repos/expressjs/express/labels/4.x","name":"4.x","color":"ededed","default":false},{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-27T13:46:45Z","updated_at":"2018-04-27T13:50:43Z","closed_at":"2018-04-27T13:50:28Z","author_association":"NONE","body":"Hello.\r\n\r\nI want to show the user a loading line, and then when the data from the database is received, show the full page.\r\n```\r\nvar express = require('express');\r\nvar app = express();\r\n\r\napp.get('/', function (req, res) {\r\n  res.send('Loading ...');\r\n  setTimeout(function() {\r\n    console.log('Get database data ...');\r\n    res.send('Hello World!');\r\n  }, 3000);\r\n});\r\n\r\napp.listen(30000, function () {\r\n  console.log('Example app listening on port 30000!');\r\n});\r\n```\r\nSuch code leads to an error.\r\n```\r\nExample app listening on port 30000!\r\nGet database data ...\r\n_http_outgoing.js:491\r\n    throw new Error('Can\\'t set headers after they are sent.');\r\n    ^\r\n\r\nError: Can't set headers after they are sent.\r\n    at validateHeader (_http_outgoing.js:491:11)\r\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\r\n    at ServerResponse.header (/home/express/node_modules/express/lib/response.js:767:10)\r\n    at ServerResponse.send (/home/express/node_modules/express/lib/response.js:170:12)\r\n    at Timeout._onTimeout (/home/express/app.js:8:9)\r\n    at ontimeout (timers.js:482:11)\r\n    at tryOnTimeout (timers.js:317:5)\r\n    at Timer.listOnTimeout (timers.js:277:5)\r\n```","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3633","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3633/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3633/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3633/events","html_url":"https://github.com/expressjs/express/issues/3633","id":317785417,"node_id":"MDU6SXNzdWUzMTc3ODU0MTc=","number":3633,"title":"Router does not pass authentication header in a redirect","user":{"login":"rosano","id":1680612,"node_id":"MDQ6VXNlcjE2ODA2MTI=","avatar_url":"https://avatars3.githubusercontent.com/u/1680612?v=4","gravatar_id":"","url":"https://api.github.com/users/rosano","html_url":"https://github.com/rosano","followers_url":"https://api.github.com/users/rosano/followers","following_url":"https://api.github.com/users/rosano/following{/other_user}","gists_url":"https://api.github.com/users/rosano/gists{/gist_id}","starred_url":"https://api.github.com/users/rosano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rosano/subscriptions","organizations_url":"https://api.github.com/users/rosano/orgs","repos_url":"https://api.github.com/users/rosano/repos","events_url":"https://api.github.com/users/rosano/events{/privacy}","received_events_url":"https://api.github.com/users/rosano/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-25T20:39:35Z","updated_at":"2018-04-25T21:19:58Z","closed_at":"2018-04-25T20:52:00Z","author_association":"NONE","body":"I am making a POST request to my Express-based API, and I notice that when I redirect, the authentication header does not get passed on, while any other headers (even nonsense ones) will make it past the redirect. Is this the intended behaviour?\r\n\r\nThe client makes a POST request\r\n\r\n```javascript\r\nvar requestPackage = require('request');\r\n\r\nrequestPackage.post({\r\n\turl: 'API_URL',\r\n\tauth: {\r\n\t\tbearer: 'API_TOKEN',\r\n\t},\r\n\theaders: {\r\n\t\t'lorem-ipsum': 'DOLOR SIT AMET'\r\n\t},\r\n\tjson: {\r\n\t\t'nunc tristique felis': 'id fringilla feugiat',\r\n\t},\r\n});\r\n```\r\n\r\nand the server performs the redirect (using status code 307 so that the headers get passed through)\r\n\r\n```javascript\r\nvar expressRouter = require('express').Router();\r\n\r\nexpressRouter.post('/API_PATH_ALPHA', function (req, res, next) {\r\n\tconsole.log({\r\n\t\tcustomHeader: req.headers['lorem-ipsum'],\r\n\t\tauthorisazion: req.headers.authorization,\r\n\t});\r\n\r\n\treturn res.redirect(307, '/API_PATH_BETA');\r\n});\r\n\r\nexpressRouter.post('/API_PATH_BETA', function (req, res, next) {\r\n\tconsole.log({\r\n\t\tcustomHeader: req.headers['lorem-ipsum'],\r\n\t\tauthorisazion: req.headers.authorization, // undefined\r\n\t});\r\n\r\n\treturn res.type('txt').send('Hello');\r\n});\r\n```","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3632","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3632/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3632/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3632/events","html_url":"https://github.com/expressjs/express/issues/3632","id":317544657,"node_id":"MDU6SXNzdWUzMTc1NDQ2NTc=","number":3632,"title":"Outdated debug version with known vulnerabilities","user":{"login":"ziogibom","id":9935142,"node_id":"MDQ6VXNlcjk5MzUxNDI=","avatar_url":"https://avatars3.githubusercontent.com/u/9935142?v=4","gravatar_id":"","url":"https://api.github.com/users/ziogibom","html_url":"https://github.com/ziogibom","followers_url":"https://api.github.com/users/ziogibom/followers","following_url":"https://api.github.com/users/ziogibom/following{/other_user}","gists_url":"https://api.github.com/users/ziogibom/gists{/gist_id}","starred_url":"https://api.github.com/users/ziogibom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ziogibom/subscriptions","organizations_url":"https://api.github.com/users/ziogibom/orgs","repos_url":"https://api.github.com/users/ziogibom/repos","events_url":"https://api.github.com/users/ziogibom/events{/privacy}","received_events_url":"https://api.github.com/users/ziogibom/received_events","type":"User","site_admin":false},"labels":[{"id":133578711,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTE=","url":"https://api.github.com/repos/expressjs/express/labels/invalid","name":"invalid","color":"e6e6e6","default":true}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-25T09:19:23Z","updated_at":"2018-04-25T11:34:22Z","closed_at":"2018-04-25T11:32:47Z","author_association":"NONE","body":"Nsp checker reporting that you are using old debug package version which includes outdated ms package with known vulnerability:\r\nhttps://nodesecurity.io/advisories/46","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3631","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3631/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3631/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3631/events","html_url":"https://github.com/expressjs/express/issues/3631","id":316459641,"node_id":"MDU6SXNzdWUzMTY0NTk2NDE=","number":3631,"title":"run app.render asynchronously","user":{"login":"AbdelrahmanHafez","id":19984935,"node_id":"MDQ6VXNlcjE5OTg0OTM1","avatar_url":"https://avatars3.githubusercontent.com/u/19984935?v=4","gravatar_id":"","url":"https://api.github.com/users/AbdelrahmanHafez","html_url":"https://github.com/AbdelrahmanHafez","followers_url":"https://api.github.com/users/AbdelrahmanHafez/followers","following_url":"https://api.github.com/users/AbdelrahmanHafez/following{/other_user}","gists_url":"https://api.github.com/users/AbdelrahmanHafez/gists{/gist_id}","starred_url":"https://api.github.com/users/AbdelrahmanHafez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AbdelrahmanHafez/subscriptions","organizations_url":"https://api.github.com/users/AbdelrahmanHafez/orgs","repos_url":"https://api.github.com/users/AbdelrahmanHafez/repos","events_url":"https://api.github.com/users/AbdelrahmanHafez/events{/privacy}","received_events_url":"https://api.github.com/users/AbdelrahmanHafez/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-04-21T04:08:54Z","updated_at":"2018-04-22T00:56:14Z","closed_at":"2018-04-21T19:10:32Z","author_association":"NONE","body":"Is there a way to run app.render asynchronously?\r\n\r\nI tried promisifying it using `bluebird` but I get an error\r\n```\r\n    let render = Promise.promisify(req.app.render);\r\n    html = await render('email', { email: 'someone@gmail.com' });\r\n```\r\noutput:\r\n\r\n `TypeError: Cannot read property 'cache' of undefined`","score":1.0},{"url":"https://api.github.com/repos/expressjs/express/issues/3629","repository_url":"https://api.github.com/repos/expressjs/express","labels_url":"https://api.github.com/repos/expressjs/express/issues/3629/labels{/name}","comments_url":"https://api.github.com/repos/expressjs/express/issues/3629/comments","events_url":"https://api.github.com/repos/expressjs/express/issues/3629/events","html_url":"https://github.com/expressjs/express/issues/3629","id":316373733,"node_id":"MDU6SXNzdWUzMTYzNzM3MzM=","number":3629,"title":"Adding database models to the request object?","user":{"login":"edahlseng","id":6352776,"node_id":"MDQ6VXNlcjYzNTI3NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/6352776?v=4","gravatar_id":"","url":"https://api.github.com/users/edahlseng","html_url":"https://github.com/edahlseng","followers_url":"https://api.github.com/users/edahlseng/followers","following_url":"https://api.github.com/users/edahlseng/following{/other_user}","gists_url":"https://api.github.com/users/edahlseng/gists{/gist_id}","starred_url":"https://api.github.com/users/edahlseng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edahlseng/subscriptions","organizations_url":"https://api.github.com/users/edahlseng/orgs","repos_url":"https://api.github.com/users/edahlseng/repos","events_url":"https://api.github.com/users/edahlseng/events{/privacy}","received_events_url":"https://api.github.com/users/edahlseng/received_events","type":"User","site_admin":false},"labels":[{"id":133578712,"node_id":"MDU6TGFiZWwxMzM1Nzg3MTI=","url":"https://api.github.com/repos/expressjs/express/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-20T18:49:03Z","updated_at":"2018-05-07T15:57:08Z","closed_at":"2018-05-05T15:57:41Z","author_association":"NONE","body":"I have a question about what the request object can be used for within Express. In particular, I'm considering creating a middleware that adds a database model to the request object, something like this:\r\n\r\n```javascript\r\nconst express = require('express');\r\nconst db = require('./databaseModel.js');\r\n\r\nconst app = express();\r\n\r\napp.use((req, res, next) => {\r\n    req.db = db;\r\n    next();\r\n}\r\n\r\napp.get('/store', (req, res) => {\r\n    req.db.getAllStoreItems()\r\n    .then(storeItems => res.send(storeItems))\r\n    .catch(error => res.sendStatus(500));\r\n}\r\n```\r\n\r\nIs this an appropriate use of the request object? I'm considering this approach because it will make it easier to test my route controllers (I can just pass in a mocked database without needing to monkey patch the models), but I haven't seen this usage pattern much online so I'm not sure if there are performance implications/other gotchas that I'm not considering.\r\n\r\nThanks for the help!","score":1.0}]}
0

