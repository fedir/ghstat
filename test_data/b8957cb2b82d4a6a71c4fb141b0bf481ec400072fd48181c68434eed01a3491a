HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 14 Apr 2018 20:22:29 GMT
Link: <https://api.github.com/search/issues?q=repo%3Apedestal%2Fpedestal+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Apedestal%2Fpedestal+type%3Aissue+state%3Aclosed&page=9>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D1C7:148A:14FD557:2FD59E1:5AD26305
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 23
X-Ratelimit-Reset: 1523737400
X-Runtime-Rack: 0.329353
X-Xss-Protection: 1; mode=block

8000
{"total_count":262,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/pedestal/pedestal/issues/541","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/541/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/541/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/541/events","html_url":"https://github.com/pedestal/pedestal/issues/541","id":273584049,"number":541,"title":"SSE data is not serialized correctly","user":{"login":"kennyjwilli","id":2453976,"avatar_url":"https://avatars3.githubusercontent.com/u/2453976?v=4","gravatar_id":"","url":"https://api.github.com/users/kennyjwilli","html_url":"https://github.com/kennyjwilli","followers_url":"https://api.github.com/users/kennyjwilli/followers","following_url":"https://api.github.com/users/kennyjwilli/following{/other_user}","gists_url":"https://api.github.com/users/kennyjwilli/gists{/gist_id}","starred_url":"https://api.github.com/users/kennyjwilli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kennyjwilli/subscriptions","organizations_url":"https://api.github.com/users/kennyjwilli/orgs","repos_url":"https://api.github.com/users/kennyjwilli/repos","events_url":"https://api.github.com/users/kennyjwilli/events{/privacy}","received_events_url":"https://api.github.com/users/kennyjwilli/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-13T21:28:27Z","updated_at":"2017-11-14T02:32:29Z","closed_at":"2017-11-14T02:32:29Z","author_association":"NONE","body":"# Description\r\n\r\nI have a route that looks like this: \r\n```\r\n[\"/subscribe\" :get [(http-sse/start-event-stream stream-ready)] :route-name :subscribe]\r\n```\r\nwhere `stream-ready` is defined like this: \r\n```\r\n(require '[clojure.core.async :as async])\r\n(require '[io.pedestal.http.sse :as sse])\r\n\r\n(defn stream-ready\r\n  [event-chan ctx]\r\n  (async/go-loop []\r\n    (async/<! (async/timeout 1000))\r\n    (sse/send-event event-chan \"example\" \"test\")\r\n    (recur)))\r\n```\r\nIn the browser I created an `EventSource` object and set the `onmessage` handler to just print out the event result. I get a new event message once per second. The event `data` looks something like this `\"[B@100394d9\"`, however. That looks a whole lot like how Clojure prints out Byte arrays. I'm wondering if Pedestal is incorrectly serializing SSE messages. \r\n\r\nThese are the Pedestal dependencies that I have: \r\n```\r\n[io.pedestal/pedestal.service \"0.5.3\"]\r\n[io.pedestal/pedestal.route \"0.5.3\"]\r\n[io.pedestal/pedestal.jetty \"0.5.3\"]\r\n```\r\n\r\n## Expected Behavior\r\nThe event data in the browser should be deserialized JSON.\r\n\r\n## Actual Behavior\r\nEvent data is a string of text.\r\n\r\n## Steps to reproduce\r\nClone [this](https://github.com/kennyjwilli/pedestal-sse-issue) repository and follow the instructions in its README.\r\n\r\n# Environment\r\n\r\n## Operating System (including version).\r\nUbuntu 16.10, Chrome 59.0.3071.109, Firefox 53.0.3.\r\n\r\n## Your current Leiningen or Boot version (`lein --version` or `boot --version`)\r\nBoot 2.7.2\r\n## Pedestal version\r\n0.5.3","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/537","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/537/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/537/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/537/events","html_url":"https://github.com/pedestal/pedestal/issues/537","id":264170130,"number":537,"title":"multimethods as route handlers error","user":{"login":"Zallin","id":6391474,"avatar_url":"https://avatars1.githubusercontent.com/u/6391474?v=4","gravatar_id":"","url":"https://api.github.com/users/Zallin","html_url":"https://github.com/Zallin","followers_url":"https://api.github.com/users/Zallin/followers","following_url":"https://api.github.com/users/Zallin/following{/other_user}","gists_url":"https://api.github.com/users/Zallin/gists{/gist_id}","starred_url":"https://api.github.com/users/Zallin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zallin/subscriptions","organizations_url":"https://api.github.com/users/Zallin/orgs","repos_url":"https://api.github.com/users/Zallin/repos","events_url":"https://api.github.com/users/Zallin/events{/privacy}","received_events_url":"https://api.github.com/users/Zallin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-10-10T10:07:02Z","updated_at":"2017-10-10T18:32:58Z","closed_at":"2017-10-10T11:04:11Z","author_association":"NONE","body":"# Description\r\nMultimethods can not be used as handlers\r\n## Expected Behavior\r\nI expect that mm can be used as a handler\r\n## Actual Behavior\r\nFollowing exception is thrown\r\n```clojure\r\n`#error {\r\n :cause You're trying to use something as an interceptor that isn't supported by the protocol; Perhaps you need to extend it?\r\n :data {:t #object[clojure.lang.MultiFn 0x19f72e12 clojure.lang.MultiFn@19f72e12], :type clojure.lang.MultiFn}\r\n :via\r\n [{:type clojure.lang.Compiler$CompilerException\r\n   :message clojure.lang.ExceptionInfo: You're trying to use something as an interceptor that isn't supported by the protocol; Perhaps you need to extend it? {:t #object[clojure.lang.MultiFn 0x19f72e12 \"clojure.lang.MultiFn@19f72e12\"], :type clojure.lang.MultiFn}, compiling:(my_ped/server.clj:7:1)\r\n   :at [clojure.lang.Compiler load Compiler.java 7391]}\r\n  {:type clojure.lang.ExceptionInfo\r\n   :message You're trying to use something as an interceptor that isn't supported by the protocol; Perhaps you need to extend it?\r\n   :data {:t #object[clojure.lang.MultiFn 0x19f72e12 clojure.lang.MultiFn@19f72e12], :type clojure.lang.MultiFn}\r\n   :at [clojure.core$ex_info invokeStatic core.clj 4617]}]\r\n :trace\r\n [[clojure.core$ex_info invokeStatic core.clj 4617]\r\n  [clojure.core$ex_info invoke core.clj 4617]\r\n  [io.pedestal.interceptor$interceptor invokeStatic interceptor.clj 82]\r\n  [io.pedestal.interceptor$interceptor invoke interceptor.clj 78]\r\n  [io.pedestal.interceptor$eval176$fn__177 invoke interceptor.clj 53]\r\n  [io.pedestal.interceptor$eval136$fn__137$G__127__142 invoke interceptor.clj 23]\r\n  [io.pedestal.interceptor$interceptor invokeStatic interceptor.clj 87]\r\n  [io.pedestal.interceptor$interceptor invoke interceptor.clj 78]\r\n  [io.pedestal.interceptor$eval172$fn__173 invoke interceptor.clj 50]\r\n  [io.pedestal.interceptor$eval136$fn__137$G__127__142 invoke interceptor.clj 23]\r\n  [io.pedestal.interceptor$interceptor invokeStatic interceptor.clj 87]\r\n  [io.pedestal.interceptor$interceptor invoke interceptor.clj 78]\r\n  [clojure.core$mapv$fn__6953 invoke core.clj 6627]\r\n  [clojure.lang.PersistentVector reduce PersistentVector.java 341]\r\n  [clojure.core$reduce invokeStatic core.clj 6544]\r\n  [clojure.core$mapv invokeStatic core.clj 6618]\r\n  [clojure.core$mapv invoke core.clj 6618]\r\n  [io.pedestal.http.route.definition.table$parse_handlers invokeStatic table.clj 77]\r\n  [io.pedestal.http.route.definition.table$parse_handlers invoke table.clj 70]\r\n  [io.pedestal.http.route.definition.table$route_table_row invokeStatic table.clj 123]\r\n  [io.pedestal.http.route.definition.table$route_table_row invoke table.clj 121]\r\n  [clojure.core$partial$fn__4759 invoke core.clj 2516]\r\n  [clojure.core$map_indexed$mapi__7050$fn__7051 invoke core.clj 7022]\r\n  [clojure.lang.LazySeq sval LazySeq.java 40]\r\n  [clojure.lang.LazySeq seq LazySeq.java 49]\r\n  [clojure.lang.RT seq RT.java 521]\r\n  [clojure.core$seq__4357 invokeStatic core.clj 137]\r\n  [clojure.core$map$fn__4785 invoke core.clj 2637]\r\n  [clojure.lang.LazySeq sval LazySeq.java 40]\r\n  [clojure.lang.LazySeq seq LazySeq.java 49]\r\n  [clojure.lang.RT seq RT.java 521]\r\n  [clojure.core$seq__4357 invokeStatic core.clj 137]\r\n  [clojure.core.protocols$seq_reduce invokeStatic protocols.clj 24]\r\n  [clojure.core.protocols$fn__6738 invokeStatic protocols.clj 75]\r\n  [clojure.core.protocols$fn__6738 invoke protocols.clj 75]\r\n  [clojure.core.protocols$fn__6684$G__6679__6697 invoke protocols.clj 13]\r\n  [clojure.core$reduce invokeStatic core.clj 6545]\r\n  [clojure.core$reduce invoke core.clj 6527]\r\n  [io.pedestal.http.route.definition$prioritize_constraints invokeStatic definition.clj 54]\r\n  [io.pedestal.http.route.definition$prioritize_constraints invoke definition.clj 47]\r\n  [io.pedestal.http.route.definition$ensure_routes_integrity invokeStatic definition.clj 72]\r\n  [io.pedestal.http.route.definition$ensure_routes_integrity invoke definition.clj 71]\r\n  [io.pedestal.http.route.definition.table$table_routes invokeStatic table.clj 160]\r\n  [io.pedestal.http.route.definition.table$table_routes invoke table.clj 151]\r\n  [io.pedestal.http.route.definition.table$table_routes invokeStatic table.clj 153]\r\n  [io.pedestal.http.route.definition.table$table_routes invoke table.clj 151]\r\n  [io.pedestal.http.route$eval9962$fn__9963 invoke route.clj 362]\r\n  [io.pedestal.http.route$eval9937$fn__9938$G__9928__9943 invoke route.clj 346]\r\n  [io.pedestal.http.route$expand_routes invokeStatic route.clj 379]\r\n  [io.pedestal.http.route$expand_routes invoke route.clj 364]\r\n  [io.pedestal.http$default_interceptors invokeStatic http.clj 240]\r\n  [io.pedestal.http$default_interceptors invoke http.clj 182]\r\n  [io.pedestal.http$create_provider invokeStatic http.clj 317]\r\n  [io.pedestal.http$create_provider invoke http.clj 313]\r\n  [io.pedestal.http$create_server invokeStatic http.clj 353]\r\n  [io.pedestal.http$create_server invoke http.clj 348]\r\n  [io.pedestal.http$create_server invokeStatic http.clj 350]\r\n  [io.pedestal.http$create_server invoke http.clj 348]\r\n  [my_ped.server$eval14055 invokeStatic server.clj 9]\r\n  [my_ped.server$eval14055 invoke server.clj 9]\r\n  [clojure.lang.Compiler eval Compiler.java 6927]\r\n  [clojure.lang.Compiler load Compiler.java 7379]\r\n  [clojure.lang.RT loadResourceScript RT.java 372]\r\n  [clojure.lang.RT loadResourceScript RT.java 363]\r\n  [clojure.lang.RT load RT.java 453]\r\n  [clojure.lang.RT load RT.java 419]\r\n  [clojure.core$load$fn__5677 invoke core.clj 5893]\r\n  [clojure.core$load invokeStatic core.clj 5892]\r\n  [clojure.core$load doInvoke core.clj 5876]\r\n  [clojure.lang.RestFn invoke RestFn.java 408]\r\n  [clojure.core$load_one invokeStatic core.clj 5697]\r\n  [clojure.core$load_one invoke core.clj 5692]\r\n  [clojure.core$load_lib$fn__5626 invoke core.clj 5737]\r\n  [clojure.core$load_lib invokeStatic core.clj 5736]\r\n  [clojure.core$load_lib doInvoke core.clj 5717]\r\n  [clojure.lang.RestFn applyTo RestFn.java 142]\r\n  [clojure.core$apply invokeStatic core.clj 648]\r\n  [clojure.core$load_libs invokeStatic core.clj 5774]\r\n  [clojure.core$load_libs doInvoke core.clj 5758]\r\n  [clojure.lang.RestFn applyTo RestFn.java 137]\r\n  [clojure.core$apply invokeStatic core.clj 648]\r\n  [clojure.core$require invokeStatic core.clj 5796]\r\n  [clojure.core$require doInvoke core.clj 5796]\r\n  [clojure.lang.RestFn invoke RestFn.java 408]\r\n  [user$eval5 invokeStatic form-init8953028771762633769.clj 1]\r\n  [user$eval5 invoke form-init8953028771762633769.clj 1]\r\n  [clojure.lang.Compiler eval Compiler.java 6927]\r\n  [clojure.lang.Compiler eval Compiler.java 6916]\r\n  [clojure.lang.Compiler eval Compiler.java 6916]\r\n  [clojure.lang.Compiler load Compiler.java 7379]\r\n  [clojure.lang.Compiler loadFile Compiler.java 7317]\r\n  [clojure.main$load_script invokeStatic main.clj 275]\r\n  [clojure.main$init_opt invokeStatic main.clj 277]\r\n  [clojure.main$init_opt invoke main.clj 277]\r\n  [clojure.main$initialize invokeStatic main.clj 308]\r\n  [clojure.main$null_opt invokeStatic main.clj 342]\r\n  [clojure.main$null_opt invoke main.clj 339]\r\n  [clojure.main$main invokeStatic main.clj 421]\r\n  [clojure.main$main doInvoke main.clj 384]\r\n  [clojure.lang.RestFn invoke RestFn.java 421]\r\n  [clojure.lang.Var invoke Var.java 383]\r\n  [clojure.lang.AFn applyToHelper AFn.java 156]\r\n  [clojure.lang.Var applyTo Var.java 700]\r\n  [clojure.main main main.java 37]]}`\r\n```\r\n## Steps to reproduce\r\n1. Create new pedestal project \r\n`lein new pedestal-service my-ped`\r\n2. Create multimethod \r\n```clojure\r\n(defmulti mm (fn [req] (:method req))) \r\n(defmethod mm :default [req] {:status 200 :body \"OK\"})\r\n```\r\n3. Set it to be route handler\r\n```clojure\r\n(def routes #{[\"/\" :get (conj common-interceptors `mm)] [\"/about\" :get (conj common-interceptors `about-page)]})\r\n```\r\n\r\n\r\n# Environment\r\n\r\n## Operating System (including version).\r\nmacOS Sierra 10.12.6 (16G29)\r\n## Your current Leiningen or Boot version (`lein --version` or `boot --version`)\r\n` Leiningen 2.7.1 on Java 1.8.0_144 Java HotSpot(TM) 64-Bit Server VM `\r\n## Pedestal version\r\n```clojure\r\n[org.clojure/clojure \"1.8.0\"]\r\n[io.pedestal/pedestal.service \"0.5.3\"]\r\n[io.pedestal/pedestal.jetty \"0.5.3\"]\r\n;; [io.pedestal/pedestal.immutant \"0.5.3\"]\r\n```","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/535","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/535/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/535/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/535/events","html_url":"https://github.com/pedestal/pedestal/issues/535","id":262233321,"number":535,"title":"require fails with pedestal 0.5.2 and clojure1.9.0-beta1","user":{"login":"nfisher","id":18616,"avatar_url":"https://avatars3.githubusercontent.com/u/18616?v=4","gravatar_id":"","url":"https://api.github.com/users/nfisher","html_url":"https://github.com/nfisher","followers_url":"https://api.github.com/users/nfisher/followers","following_url":"https://api.github.com/users/nfisher/following{/other_user}","gists_url":"https://api.github.com/users/nfisher/gists{/gist_id}","starred_url":"https://api.github.com/users/nfisher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nfisher/subscriptions","organizations_url":"https://api.github.com/users/nfisher/orgs","repos_url":"https://api.github.com/users/nfisher/repos","events_url":"https://api.github.com/users/nfisher/events{/privacy}","received_events_url":"https://api.github.com/users/nfisher/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-10-02T21:23:21Z","updated_at":"2017-10-03T14:44:02Z","closed_at":"2017-10-03T14:44:02Z","author_association":"CONTRIBUTOR","body":"# Description\r\n\r\nFollowing the hello world guide using Clojure 1.9.0 Beta1 (and alpha19) with pedestal 0.5.2 results in a spectacle of exceptions. Weeeee!!!\r\n\r\nI think this will be resolved when you release 0.5.3 as it appears you've bumped the core.async version to the latest in 0.5.3-SNAPSHOT on master.\r\n\r\n## Expected Behavior\r\n\r\n`(require 'hello)` should return nil and load the namespace\r\n\r\n## Actual Behavior\r\n\r\nThe following exceptions are vomited into the console:\r\n\r\n```\r\n            clojure.lang.ExceptionInfo: Call to clojure.core/refer-clojure did not conform to spec:\r\n\r\n                                         In: [2 1] val: :as fails at: [:args :exclude :op :quoted-spec :spec] predicate: #{:exclude}\r\n\r\n                                         In: [2 1] val: :as fails at: [:args :only :op :quoted-spec :spec] predicate: #{:only}\r\n\r\n                                         In: [2 1] val: :as fails at: [:args :rename :op :quoted-spec :spec] predicate: #{:rename}\r\n\r\n                                         In: [2] val: (quote :as) fails at: [:args :exclude :op :spec] predicate: #{:exclude}\r\n\r\n                                         In: [2] val: (quote :as) fails at: [:args :only :op :spec] predicate: #{:only}\r\n\r\n                                         In: [2] val: (quote :as) fails at: [:args :rename :op :spec] predicate: #{:rename}\r\n\r\n                                         :clojure.spec.alpha/spec  #object[clojure.spec.alpha$regex_spec_impl$reify__1200 0x6feea4d \"clojure.spec.alpha$regex_spec_impl$reify__1200@6feea4d\"]\r\n\r\n                                         :clojure.spec.alpha/value  ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))\r\n\r\n                                         :clojure.spec.alpha/args  ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))\r\n\r\n                                         \r\n\r\nclojure.lang.Compiler$CompilerException: clojure.lang.ExceptionInfo: Call to clojure.core/refer-clojure did not conform to spec:\r\n\r\n                                         In: [2 1] val: :as fails at: [:args :exclude :op :quoted-spec :spec] predicate: #{:exclude}\r\n\r\n                                         In: [2 1] val: :as fails at: [:args :only :op :quoted-spec :spec] predicate: #{:only}\r\n\r\n                                         In: [2 1] val: :as fails at: [:args :rename :op :quoted-spec :spec] predicate: #{:rename}\r\n\r\n                                         In: [2] val: (quote :as) fails at: [:args :exclude :op :spec] predicate: #{:exclude}\r\n\r\n                                         In: [2] val: (quote :as) fails at: [:args :only :op :spec] predicate: #{:only}\r\n\r\n                                         In: [2] val: (quote :as) fails at: [:args :rename :op :spec] predicate: #{:rename}\r\n\r\n                                         :clojure.spec.alpha/spec  #object[clojure.spec.alpha$regex_spec_impl$reify__1200 0x6feea4d \"clojure.spec.alpha$regex_spec_impl$reify__1200@6feea4d\"]\r\n\r\n                                         :clojure.spec.alpha/value  ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))\r\n\r\n                                         :clojure.spec.alpha/args  ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))\r\n\r\n                                          #:clojure.spec.alpha{:problems ({:path [:args :exclude :op :spec], :pred #{:exclude}, :val (quote :as), :via [], :in [2]} {:path [:args :exclude :op :quoted-spec :spec], :pred #{:exclude}, :val :as, :via [], :in [2 1]} {:path [:args :only :op :spec], :pred #{:only}, :val (quote :as), :via [], :in [2]} {:path [:args :only :op :quoted-spec :spec], :pred #{:only}, :val :as, :via [], :in [2 1]} {:path [:args :rename :op :spec], :pred #{:rename}, :val (quote :as), :via [], :in [2]} {:path [:args :rename :op :quoted-spec :spec], :pred #{:rename}, :val :as, :via [], :in [2 1]}), :spec #object[clojure.spec.alpha$regex_spec_impl$reify__1200 0x6feea4d \"clojure.spec.alpha$regex_spec_impl$reify__1200@6feea4d\"], :value ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core)), :args ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))}, compiling:(clojure/core/async.clj:9:1)\r\n```\r\n\r\n## Steps to reproduce\r\n\r\nFollow the steps here but set the version of Clojure to 1.9.0-beta1 and pedestal to 0.5.2: http://pedestal.io/guides/hello-world\r\n\r\nbuild.boot\r\n\r\n```clojure\r\n; vim: set filetype=clojure :\r\n(set-env!\r\n  :local-repo \"third_party\"\r\n  :source-paths #{\"src\"}\r\n  :dependencies\r\n  '[[io.pedestal/pedestal.service \"0.5.2\" :exclusions [org.clojure/clojure org.clojure/core.async]]\r\n    [io.pedestal/pedestal.route   \"0.5.2\" :exclusions [org.clojure/clojure org.clojure/core.async]]\r\n    [io.pedestal/pedestal.jetty   \"0.5.2\" :exclusions [org.clojure/clojure org.clojure/core.async]]\r\n    [org.slf4j/slf4j-simple       \"1.7.25\"]\r\n    ; this fixes it, exclusions get rid of classpath loader noise\r\n    [org.clojure/core.async       \"0.3.443\" :exclusions [org.clojure/clojure]]])\r\n```\r\n\r\nboot.properties\r\n\r\n```shell\r\n#http://boot-clj.com\r\n#Mon Oct 02 21:10:38 BST 2017\r\nBOOT_CLOJURE_NAME=org.clojure/clojure\r\nBOOT_CLOJURE_VERSION=1.9.0-beta1\r\nBOOT_VERSION=2.7.2\r\n```\r\n\r\n# Environment\r\n\r\n## Operating System (including version).\r\n\r\nOS X High Sierra\r\n\r\n## Your current Leiningen version (`lein --version`)\r\n\r\nboot 2.7.2\r\n\r\n## Pedestal version\r\n\r\n0.5.2","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/533","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/533/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/533/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/533/events","html_url":"https://github.com/pedestal/pedestal/issues/533","id":252809742,"number":533,"title":"Why the complex dependencies?","user":{"login":"JayAndCatchFire","id":10983817,"avatar_url":"https://avatars0.githubusercontent.com/u/10983817?v=4","gravatar_id":"","url":"https://api.github.com/users/JayAndCatchFire","html_url":"https://github.com/JayAndCatchFire","followers_url":"https://api.github.com/users/JayAndCatchFire/followers","following_url":"https://api.github.com/users/JayAndCatchFire/following{/other_user}","gists_url":"https://api.github.com/users/JayAndCatchFire/gists{/gist_id}","starred_url":"https://api.github.com/users/JayAndCatchFire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayAndCatchFire/subscriptions","organizations_url":"https://api.github.com/users/JayAndCatchFire/orgs","repos_url":"https://api.github.com/users/JayAndCatchFire/repos","events_url":"https://api.github.com/users/JayAndCatchFire/events{/privacy}","received_events_url":"https://api.github.com/users/JayAndCatchFire/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-08-25T06:29:41Z","updated_at":"2017-08-25T17:40:48Z","closed_at":"2017-08-25T10:52:57Z","author_association":"NONE","body":"Hey, I'm a fan of the project and I wanted to give back by helping update some of the outdated dependencies.\r\n\r\nI started updating dependencies and I noticed some oddities.  For example, `potemkin` is used by `clj-http` as a dev dependency in `pedestal.service`, but it's excluded there.  It's a dependency of `pedestal.immutant` even though it's never actually used in the code anywhere.\r\n\r\nAnother example is that `javax.servlet/javax.servlet-api` is a dependency of `pedestal.immutant` but it's never used anywhere in that project.\r\n\r\nAnother example is that `crypto-equality` is excluded from the dependency `ring/ring-core` in `pedestal.service` and then included on its own.  I figured this was probably to get a specific version of `crypto-equality`.  However, the version of `ring/ring-core` (1.5.1, which is out of date incidentally) doesn't depend on `crypto-equality` anymore.\r\n\r\nSo are the dependencies of the pedestal packages in need of some pruning or is there some method to the madness?  Because if it's the former I'd be more than happy to volunteer my time weeding some of this stuff out.","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/532","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/532/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/532/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/532/events","html_url":"https://github.com/pedestal/pedestal/issues/532","id":252550717,"number":532,"title":"Problem in routing","user":{"login":"ikitommi","id":567532,"avatar_url":"https://avatars1.githubusercontent.com/u/567532?v=4","gravatar_id":"","url":"https://api.github.com/users/ikitommi","html_url":"https://github.com/ikitommi","followers_url":"https://api.github.com/users/ikitommi/followers","following_url":"https://api.github.com/users/ikitommi/following{/other_user}","gists_url":"https://api.github.com/users/ikitommi/gists{/gist_id}","starred_url":"https://api.github.com/users/ikitommi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ikitommi/subscriptions","organizations_url":"https://api.github.com/users/ikitommi/orgs","repos_url":"https://api.github.com/users/ikitommi/repos","events_url":"https://api.github.com/users/ikitommi/events{/privacy}","received_events_url":"https://api.github.com/users/ikitommi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2017-08-24T10:00:57Z","updated_at":"2017-11-20T16:09:09Z","closed_at":"2017-08-25T10:29:10Z","author_association":"NONE","body":"# Description\r\n\r\nA wildcard route masks non-wildcard routes with prefix-tree router.\r\n\r\n## Expected Behavior\r\n\r\nRoute should match.\r\n\r\n## Actual Behavior\r\n\r\nDoes not.\r\n\r\n## Steps to reproduce\r\n\r\n```clj\r\n(require '[io.pedestal.http.route.definition.table :as table])\r\n(require '[io.pedestal.http.route.map-tree :as map-tree])\r\n(require '[io.pedestal.http.route.router :as router])\r\n\r\n(router/find-route\r\n  (map-tree/router\r\n    (table/table-routes\r\n      [[\"/:a\" :get (constantly \"\") :route-name ::ping]\r\n       [\"/evil/ping\" :get (constantly \"\") :route-name ::evil-ping]]))\r\n  {:path-info \"/evil/ping\" :request-method :get})\r\n; => nil\r\n```\r\n\r\n# Environment\r\n\r\n```clj\r\n[io.pedestal/pedestal.service       \"0.5.2\"]\r\n```","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/528","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/528/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/528/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/528/events","html_url":"https://github.com/pedestal/pedestal/issues/528","id":241391885,"number":528,"title":"Handlers should be able to return a channel.","user":{"login":"patrickthebold","id":5789991,"avatar_url":"https://avatars0.githubusercontent.com/u/5789991?v=4","gravatar_id":"","url":"https://api.github.com/users/patrickthebold","html_url":"https://github.com/patrickthebold","followers_url":"https://api.github.com/users/patrickthebold/followers","following_url":"https://api.github.com/users/patrickthebold/following{/other_user}","gists_url":"https://api.github.com/users/patrickthebold/gists{/gist_id}","starred_url":"https://api.github.com/users/patrickthebold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/patrickthebold/subscriptions","organizations_url":"https://api.github.com/users/patrickthebold/orgs","repos_url":"https://api.github.com/users/patrickthebold/repos","events_url":"https://api.github.com/users/patrickthebold/events{/privacy}","received_events_url":"https://api.github.com/users/patrickthebold/received_events","type":"User","site_admin":false},"labels":[{"id":30598902,"url":"https://api.github.com/repos/pedestal/pedestal/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-07-07T22:04:05Z","updated_at":"2017-07-08T20:12:53Z","closed_at":"2017-07-08T10:12:10Z","author_association":"NONE","body":"In general, an interceptor can return a channel that eventually produces a context map. Handlers should be able to return a channel that returns a response map.\r\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/527","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/527/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/527/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/527/events","html_url":"https://github.com/pedestal/pedestal/issues/527","id":239959363,"number":527,"title":"war-example repl grumpy","user":{"login":"bherrmann7","id":33614,"avatar_url":"https://avatars3.githubusercontent.com/u/33614?v=4","gravatar_id":"","url":"https://api.github.com/users/bherrmann7","html_url":"https://github.com/bherrmann7","followers_url":"https://api.github.com/users/bherrmann7/followers","following_url":"https://api.github.com/users/bherrmann7/following{/other_user}","gists_url":"https://api.github.com/users/bherrmann7/gists{/gist_id}","starred_url":"https://api.github.com/users/bherrmann7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bherrmann7/subscriptions","organizations_url":"https://api.github.com/users/bherrmann7/orgs","repos_url":"https://api.github.com/users/bherrmann7/repos","events_url":"https://api.github.com/users/bherrmann7/events{/privacy}","received_events_url":"https://api.github.com/users/bherrmann7/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-07-01T16:38:31Z","updated_at":"2017-07-07T23:23:42Z","closed_at":"2017-07-07T22:20:20Z","author_association":"NONE","body":"# Description\r\nexception on startup of the repl for the war-example\r\n## Expected Behavior\r\na happy repl\r\n## Actual Behavior\r\na grump replv- can't invoke (run-dev)\r\n## Steps to reproduce\r\n\r\n$ git clone https://github.com/pedestal/pedestal.git pp\r\n$ cd pp/samples/war-example/\r\n$ lein repl\r\n\r\n# Environment\r\n\r\n## Operating System (including version).\r\nOSX \r\n$ uname -a \r\nDarwin talkie 16.6.0 Darwin Kernel Version 16.6.0: Fri Apr 14 16:21:16 PDT 2017; root:xnu-3789.60.24~6/RELEASE_X86_64 x86_64\r\n\r\n## Your current Leiningen version (`lein --version`)\r\n\r\n$ lein --version\r\nLeiningen 2.6.1 on Java 1.8.0_121 Java HotSpot(TM) 64-Bit Server VM\r\n\r\n## Pedestal version\r\n[io.pedestal/pedestal.service \"0.5.1\"]\r\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/523","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/523/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/523/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/523/events","html_url":"https://github.com/pedestal/pedestal/issues/523","id":236684306,"number":523,"title":"SSE Heartbeat Buffering Error","user":{"login":"LusciousPear","id":177046,"avatar_url":"https://avatars3.githubusercontent.com/u/177046?v=4","gravatar_id":"","url":"https://api.github.com/users/LusciousPear","html_url":"https://github.com/LusciousPear","followers_url":"https://api.github.com/users/LusciousPear/followers","following_url":"https://api.github.com/users/LusciousPear/following{/other_user}","gists_url":"https://api.github.com/users/LusciousPear/gists{/gist_id}","starred_url":"https://api.github.com/users/LusciousPear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LusciousPear/subscriptions","organizations_url":"https://api.github.com/users/LusciousPear/orgs","repos_url":"https://api.github.com/users/LusciousPear/repos","events_url":"https://api.github.com/users/LusciousPear/events{/privacy}","received_events_url":"https://api.github.com/users/LusciousPear/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-06-17T21:08:37Z","updated_at":"2017-06-20T00:54:40Z","closed_at":"2017-06-20T00:54:40Z","author_association":"NONE","body":"Hi,\r\n\r\nI'm encountering a strange buffering problem with the Pedestal SSE system. I'm on Pedestal 0.5.2 but also repro'd in 0.5.3-SNAPSHOT. \r\n\r\nIf I put a value in the event-ch, it *immediately* sends a heartbeat to the client (even if 
8000
the interval is 20 seconds). I would expect it to send the event, instead.\r\n\r\nWhen the next heartbeat is supposed to send, it actually sends that event I put in 1 or 2 heartbeat-intervals ago.\r\n\r\nThis gradually increases ... it takes 20 seconds to send an event, then 40, then 60, then 80 etc.\r\n\r\nI've looked at the pedestal SSE code, and I'm not sure how this could be happening, but I'm rather new to core.async.\r\n\r\nHere's my code. \r\n\r\nI'm basically maintaining a pool of HTTP proxies that register and then have requests sent to them.\r\n\r\n```\r\n(def proxy-send-pool (ref {}))\r\n\r\n(defn update-proxy-pool [ip event-ch country]\r\n  (dosync (alter proxy-send-pool (fn [v i event]\r\n                                   (assoc-in v [i] event)) ip event-ch)))\r\n\r\n(defn sse-stream-ready\r\n  \"Starts sending counter events to client.\"\r\n  [event-ch ctx]\r\n  (let [{:keys [request response-channel]} ctx\r\n        addr (or (get (:headers request) \"x-forwarded-for\") (:remote-addr request))\r\n        country (get (Util/getGeo addr) \"country_code\")]\r\n    (update-proxy-pool addr event-ch country)\r\n    (async/put! event-ch (generate-string {:ip @afghan.util/this-ip}))))\r\n\r\n\r\n(defn add-work-item [request ip]\r\n  (async/put! (fetch-ip-channel ip) {:name \"request\" :data (generate-string request)}))\r\n\r\n\r\n(defroutes routes\r\n           [[[\"/register\" {:get [::events (sse/start-event-stream sse-stream-ready 20 100000 {:on-client-disconnect close-conn})]}]]])\r\n\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/516","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/516/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/516/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/516/events","html_url":"https://github.com/pedestal/pedestal/issues/516","id":235019631,"number":516,"title":"Secure headers not applied to static files","user":{"login":"stuartsierra","id":95044,"avatar_url":"https://avatars3.githubusercontent.com/u/95044?v=4","gravatar_id":"","url":"https://api.github.com/users/stuartsierra","html_url":"https://github.com/stuartsierra","followers_url":"https://api.github.com/users/stuartsierra/followers","following_url":"https://api.github.com/users/stuartsierra/following{/other_user}","gists_url":"https://api.github.com/users/stuartsierra/gists{/gist_id}","starred_url":"https://api.github.com/users/stuartsierra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stuartsierra/subscriptions","organizations_url":"https://api.github.com/users/stuartsierra/orgs","repos_url":"https://api.github.com/users/stuartsierra/repos","events_url":"https://api.github.com/users/stuartsierra/events{/privacy}","received_events_url":"https://api.github.com/users/stuartsierra/received_events","type":"User","site_admin":false},"labels":[{"id":47812103,"url":"https://api.github.com/repos/pedestal/pedestal/labels/primed","name":"primed","color":"009800","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-06-10T18:35:46Z","updated_at":"2017-07-12T15:15:39Z","closed_at":"2017-07-12T13:23:24Z","author_association":"CONTRIBUTOR","body":"# Description\r\n\r\nStatic files served from the classpath or the filesystem are served without security-related headers such as `Content-Security-Policy`.\r\n\r\n## Steps to reproduce\r\n\r\nIn a shell, run:\r\n\r\n    lein new pedestal-service foo\r\n\r\n    cd foo\r\n\r\n    mkdir -p resources/public\r\n\r\n    cat <<EOF > resources/public/page.html\r\n    <!doctype html>\r\n    <html>\r\n        <head>\r\n            <title>Sample page</title>\r\n        </head>\r\n        <body>\r\n            <p>Sample page</p>\r\n            <script src=\"https://code.jquery.com/jquery-3.2.1.min.js\"></script>\r\n        </body>\r\n    </html>\r\n    EOF\r\n\r\n    lein run-dev\r\n\r\nIn another shell, run:\r\n    \r\n    curl -i 'http://localhost:8080/page.html'\r\n\r\nObserve the headers in the response:\r\n\r\n    HTTP/1.1 200 OK\r\n    Date: Sat, 10 Jun 2017 18:30:09 GMT\r\n    Last-Modified: Sat, 10 Jun 2017 18:30:06 GMT\r\n    Content-Type: text/html\r\n    Access-Control-Allow-Credentials: true\r\n    Access-Control-Expose-Headers: Content-Length, Last-Modified, Content-Type\r\n    Content-Length: 215\r\n\r\nCompare by running:\r\n\r\n    curl -i 'http://localhost:8080/'\r\n\r\nAnd observe the headers in the response:\r\n\r\n    HTTP/1.1 200 OK\r\n    Date: Sat, 10 Jun 2017 18:30:15 GMT\r\n    X-Frame-Options: DENY\r\n    X-XSS-Protection: 1; mode=block\r\n    X-Download-Options: noopen\r\n    Strict-Transport-Security: max-age=31536000; includeSubdomains\r\n    X-Permitted-Cross-Domain-Policies: none\r\n    Access-Control-Allow-Credentials: true\r\n    Access-Control-Expose-Headers: Strict-Transport-Security, X-Frame-Options, X-Content-Type-Options, X-Xss-Protection, X-Download-Options, X-Permitted-Cross-Domain-Policies, Content-Security-Policy, Content-Type\r\n    X-Content-Type-Options: nosniff\r\n    Content-Security-Policy: object-src 'none'; script-src 'unsafe-inline' 'unsafe-eval' 'strict-dynamic' https: http:;\r\n    Content-Type: text/html;charset=utf-8\r\n    Transfer-Encoding: chunked\r\n\r\n# Environment\r\n\r\n## Operating System (including version).\r\n\r\nOS X El Capitan 10.11.6\r\n\r\n## Your current Leiningen version (`lein --version`)\r\n\r\nLeiningen 2.7.1 on Java 1.8.0_92 Java HotSpot(TM) 64-Bit Server VM\r\n\r\n## Pedestal version\r\n\r\n0.5.2","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/512","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/512/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/512/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/512/events","html_url":"https://github.com/pedestal/pedestal/issues/512","id":226820651,"number":512,"title":"Allow enqueueing of interceptors other than at end of interceptor chain","user":{"login":"crimeminister","id":29072,"avatar_url":"https://avatars3.githubusercontent.com/u/29072?v=4","gravatar_id":"","url":"https://api.github.com/users/crimeminister","html_url":"https://github.com/crimeminister","followers_url":"https://api.github.com/users/crimeminister/followers","following_url":"https://api.github.com/users/crimeminister/following{/other_user}","gists_url":"https://api.github.com/users/crimeminister/gists{/gist_id}","starred_url":"https://api.github.com/users/crimeminister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crimeminister/subscriptions","organizations_url":"https://api.github.com/users/crimeminister/orgs","repos_url":"https://api.github.com/users/crimeminister/repos","events_url":"https://api.github.com/users/crimeminister/events{/privacy}","received_events_url":"https://api.github.com/users/crimeminister/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-05-07T02:14:19Z","updated_at":"2017-07-12T16:27:40Z","closed_at":"2017-07-12T16:27:40Z","author_association":"CONTRIBUTOR","body":"I recently encountered a situation in which I had to enqueue a sequence of interceptors and ensure that they executed immediately after the current interceptor. As the `io.pedestal.interceptor.chain/enqueue` function only supports adding interceptors to the end of the chain (which makes sense given that for the underlying `PersistentQueue` data structure that's what's supported efficiently) I added a `prequeue` function that [did what I needed](https://github.com/crimeminister/pedestal/commit/88e06ff4a36de9a481584211bee42f1e2fb5410e) though perhaps not as performantly as one might want. I am curious if there is any appetite for the chain API to support the addition of interceptors both at the front and back of the chain?\r\n\r\nIf the interceptor chain is used by itself for running data processing pipelines it might also be nice to extend the API to support more flexible insertion/removal options, e.g. before or after a given interceptor or between every two interceptors (to store timestamps for performance evaluation, say). I have pondered changing the underlying data structure storing the interceptor chain on the context from `PersistentQueue` to a [finger tree](https://github.com/clojure/data.finger-tree) as it supports constant time addition at both ends; does that make any sense given the discussion happening in #411?","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/511","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/511/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/511/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/511/events","html_url":"https://github.com/pedestal/pedestal/issues/511","id":226255130,"number":511,"title":"Doc issue: clarification of setting :response in an intercepter","user":{"login":"deg","id":90383,"avatar_url":"https://avatars1.githubusercontent.com/u/90383?v=4","gravatar_id":"","url":"https://api.github.com/users/deg","html_url":"https://github.com/deg","followers_url":"https://api.github.com/users/deg/followers","following_url":"https://api.github.com/users/deg/following{/other_user}","gists_url":"https://api.github.com/users/deg/gists{/gist_id}","starred_url":"https://api.github.com/users/deg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deg/subscriptions","organizations_url":"https://api.github.com/users/deg/orgs","repos_url":"https://api.github.com/users/deg/repos","events_url":"https://api.github.com/users/deg/events{/privacy}","received_events_url":"https://api.github.com/users/deg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-05-04T11:46:03Z","updated_at":"2017-05-04T12:34:03Z","closed_at":"2017-05-04T11:47:19Z","author_association":"NONE","body":"I was recently bitten by lack of knowledge, writing an interceptor for a Vase app.\r\n\r\nI needed to set the context's `:response` and then let it be processed by existing Vase code (e.g., converting the response to transit).\r\n\r\nI initially did this in the `:enter` of my interceptor, and was surprised to discover that the remaining interceptors were not called. (The proximate reason is https://github.com/pedestal/pedestal/blob/master/service/src/io/pedestal/http/impl/servlet_interceptor.clj#L373, and I assume that the intention is deliberate).\r\n\r\nIt was easy to fix my code; I just needed to set the response in my `:leave`. But, this was not obvious at first, and would be helped by more documentation and examples of how to write interceptors. (Ideally, also with a link to this part of the Pedestal docs from the Vase docs).","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/510","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/510/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/510/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/510/events","html_url":"https://github.com/pedestal/pedestal/issues/510","id":223571031,"number":510,"title":"[Refactor proposal] pedestal/http.clj seems to big, maybe split?","user":{"login":"kirillsalykin","id":136315,"avatar_url":"https://avatars3.githubusercontent.com/u/136315?v=4","gravatar_id":"","url":"https://api.github.com/users/kirillsalykin","html_url":"https://github.com/kirillsalykin","followers_url":"https://api.github.com/users/kirillsalykin/followers","following_url":"https://api.github.com/users/kirillsalykin/following{/other_user}","gists_url":"https://api.github.com/users/kirillsalykin/gists{/gist_id}","starred_url":"https://api.github.com/users/kirillsalykin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirillsalykin/subscriptions","organizations_url":"https://api.github.com/users/kirillsalykin/orgs","repos_url":"https://api.github.com/users/kirillsalykin/repos","events_url":"https://api.github.com/users/kirillsalykin/events{/privacy}","received_events_url":"https://api.github.com/users/kirillsalykin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-04-22T15:13:14Z","updated_at":"2017-04-24T13:47:04Z","closed_at":"2017-04-24T13:47:04Z","author_association":"NONE","body":"This file https://github.com/pedestal/pedestal/blob/master/service/src/io/pedestal/http.clj seems too big to me, I think it can be splitted into these parts:\r\n- Response part (all `*-response` + `*-body` parts and `not-found` interceptor)\r\n- Defaults part (default interceptors + dev defaults)\r\n- Creation part (`create-server` etc)\r\n\r\nAlso some other questions:\r\n1. Maybe I misunderstand but I thought everything servlet related was moved to provider, thus servlet-init etc not needed?\r\n2. Also I propose to add `body-params` and  `keyword-params` interceptors to `default-interceptors`. I can see that now `body-params` are used, but only with `csrf`. Is this intentional secure default?\r\n\r\nWhat do you think?\r\n\r\nThis refactor seems not that hard, I'd like to help with it.\r\n\r\nThanks.\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/506","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/506/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/506/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/506/events","html_url":"https://github.com/pedestal/pedestal/issues/506","id":220783167,"number":506,"title":"Cookies missing in Jetty when :h2? true","user":{"login":"claj","id":353113,"avatar_url":"https://avatars1.githubusercontent.com/u/353113?v=4","gravatar_id":"","url":"https://api.github.com/users/claj","html_url":"https://github.com/claj","followers_url":"https://api.github.com/users/claj/followers","following_url":"https://api.github.com/users/claj/following{/other_user}","gists_url":"https://api.github.com/users/claj/gists{/gist_id}","starred_url":"https://api.github.com/users/claj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claj/subscriptions","organizations_url":"https://api.github.com/users/claj/orgs","repos_url":"https://api.github.com/users/claj/repos","events_url":"https://api.github.com/users/claj/events{/privacy}","received_events_url":"https://api.github.com/users/claj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2017-04-10T21:58:56Z","updated_at":"2017-04-21T14:12:07Z","closed_at":"2017-04-21T14:12:07Z","author_association":"NONE","body":"# Description\r\n\r\nWe observed that the pedestal application doesn't get the session reliably when having `:h2?` enabled using Jetty. It turned out only one cookie is presented to the pedestal application when using `:h2?` / ALPN functionality.\r\n\r\n## Expected Behavior\r\n\r\nThat our application sees the same cookies as the browser sends in the request.\r\n\r\nThis works when `:h2?` is disabled.\r\n\r\n## Actual Behavior\r\n\r\nWhen our SPA has started, it sends request backs to the server.\r\n\r\n### Chrome\r\n\r\nAt this point, several cookies has been set and, according to Chromes network debugging tool, all of them are sent back to the server like this:\r\n\r\n`__lc.visitor_id.8695666=S1491858882.6ef2063bfc; youple=wUuiEgfwvBDVDVpL6UrGrEmnP4b7huv%2FqSO2zpwpOuTt5YNhV32rQ7Zvh1ZqwOhkhfSH6kUEcIyL346vB6J77hPwcLN%2FLQSMEA%2FNRjZf%2BeILbbWesJ5C0IYmQpLUDaTvBb8vZ8ePbKEdmMweJCBQNNkouprMmVAtitABUP8ZcdHp3yZB%2BleDDWbZNirwobE%2FJ71tzVEWggEa9gZ8C5YHhQ%2FmJLS4CZ1LaOmqaMQD%2F6emdE2cpoBfCjGwL7EPIRL8kUCebuHx%2FP%2F0tUDNRIfxaw%3D%3D--m8W4ho%2B2%2FvQ5ozn75oBEEQUjMO%2BKrMMGj6w6GBncR40%3D; lc_window_state=minimized`\r\n\r\nIn the pedestal application, all cookies but one has mysteriously disappeared.\r\n\r\nRelevant parts of the request object looks like this\r\n\r\n`:session {}\r\n:cookies {\"__lc.visitor_id.8695666\" {:value \"S1491858882.6ef2063bfc\"}}`\r\n\r\nthe received `:header \"cookie\"` string looks like this:\r\n\r\n`:cookie-header \"__lc.visitor_id.8695666=S1491858882.6ef2063bfc\"`\r\n\r\n### Firefox\r\nThe behaviour is consisten with Firefox. The sent cookie header is as follows:\r\n\r\n`__lc.visitor_id.8695666=S1491819758.1a84a50d80; cookies-accepted=\"accepted\"; lc_window_state=minimized; youple=hpP4vWgqZ8Ykt%2BuSZ1aGS7SVg%2BZ%2BlxQHNoYurHCox72LilmKX3ikKqOcNGqR37DijeraETHAFUZS1aVzCss%2FotFcRFuc5dCK1wQGi53Yo6QbDY4IC5gO0OMvf3QPJmY1zKXvrGEMMmya8Ht8oR4kQY5LcxcslK%2FOPtIKJVNp6kv%2B77elNSNzdMHJdrQa%2Bwsmp0BQejSExXlkXA2GJ%2FyYoMbWgDod7VapNNgSTSKDQ3Jk5Evnn%2FkPSeuUDTrwQuuluJS7EbPQg9kHSUsA3t2pgA%3D%3D--Ty%2BKlKIkh6u2Nnie9PTNl7p1roEfMGJXjYDr9EDy%2F%2FA%3D`\r\n\r\nwhich results in\r\n\r\n`:session {}\r\n:cookies {\"__lc.visitor_id.8695666\" {:value \"S1491819758.1a84a50d80\"}}\r\n\r\n:cookie-header \"__lc.visitor_id.8695666=S1491819758.1a84a50d80\"}`\r\n\r\nThe state and the symptomes are very confusing and took us quite some time to diagnose.\r\n\r\n## Steps to reproduce\r\n\r\nI will try to come up with a minimum reproducible case. I report it as is, hopefully the error is apparent from the stylobate implementation or from the reported dependencies.\r\n\r\n# Environment\r\n\r\nChrome Version 57.0.2987.133 (64-bit)\r\nFirefox 52.0.2 (64-bit)\r\n\r\nPedestal 0.5.2\r\nClojure 1.9.0-alpha14\r\nJetty version \"9.4.2.v20170220\"\r\n\r\n[org.eclipse.jetty.alpn/alpn-api \"1.1.3.v20160715\"]\r\n\r\n[ring/ring-core \"1.5.1\" :exclusions [[org.clojure/clojure]\r\n                                                      [org.clojure/tools.reader]\r\n                                                      [crypto-random]\r\n                                                      [crypto-equality]]]\r\n\r\n[ring/ring-codec \"1.0.1\"]\r\n\r\n\r\n  :java-agents [[org.mortbay.jetty.alpn/jetty-alpn-agent \"2.0.6\"]]\r\n\r\n## Operating System (including version).\r\nmacOS Sieera 10.12.3 (also seen on Ubuntu 16.04)\r\n\r\n## Your current Leiningen version (`lein --version`)\r\nLeiningen 2.7.1 on Java 1.8.0_121 Java HotSpot(TM) 64-Bit Server VM\r\n\r\n## Pedestal version\r\n0.5.2\r\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/505","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/505/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/505/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/505/events","html_url":"https://github.com/pedestal/pedestal/issues/505","id":220056703,"number":505,"title":"Pedestal's core.async dependency doesn't work with Clojure 1.9.0-alpha15","user":{"login":"mtnygard","id":116714,"avatar_url":"https://avatars2.githubusercontent.com/u/116714?v=4","gravatar_id":"","url":"https://api.github.com/users/mtnygard","html_url":"https://github.com/mtnygard","followers_url":"https://api.github.com/users/mtnygard/followers","following_url":"https://api.github.com/users/mtnygard/following{/other_user}","gists_url":"https://api.github.com/users/mtnygard/gists{/gist_id}","starred_url":"https://api.github.com/users/mtnygard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtnygard/subscriptions","organizations_url":"https://api.github.com/users/mtnygard/orgs","repos_url":"https://api.github.com/users/mtnygard/repos","events_url":"https://api.github.com/users/mtnygard/events{/privacy}","received_events_url":"https://api.github.com/users/mtnygard/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-04-06T22:52:25Z","updated_at":"2017-04-07T15:05:50Z","closed_at":"2017-04-07T15:05:50Z","author_association":"CONTRIBUTOR","body":"# Description\r\n\r\n## Expected Behavior\r\n\r\nREPL starts as normal.\r\n\r\n## Actual Behavior\r\n\r\nCompile error is reported:\r\n\r\n```\r\n#error {\r\n :cause Call to clojure.core/refer-clojure did not conform to spec:\r\nIn: [2] val: (quote :as) fails at: [:args :exclude :op :spec] predicate: #{:exclude}\r\nIn: [2 1] val: :as fails at: [:args :exclude :op :quoted-spec :spec] predicate: #{:exclude}\r\nIn: [2] val: (quote :as) fails at: [:args :only :op :spec] predicate: #{:only}\r\nIn: [2 1] val: :as fails at: [:args :only :op :quoted-spec :spec] predicate: #{:only}\r\nIn: [2] val: (quote :as) fails at: [:args :rename :op :spec] predicate: #{:rename}\r\nIn: [2 1] val: :as fails at: [:args :rename :op :quoted-spec :spec] predicate: #{:rename}\r\n:clojure.spec/args  ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))\r\n\r\n :data #:clojure.spec{:problems ({:path [:args :exclude :op :spec], :pred #{:exclude}, :val (quote :as), :via [], :in [2]} {:path [:args :exclude :op :quoted-spec :spec], :pred #{:exclude}, :val :as, :via [], :in [2 1]} {:path [:args :only :op :spec], :pred #{:only}, :val (quote :as), :via [], :in [2]} {:path [:args :only :op :quoted-spec :spec], :pred #{:only}, :val :as, :via [], :in [2 1]} {:path [:args :rename :op :spec], :pred #{:rename}, :val (quote :as), :via [], :in [2]} {:path [:args :rename :op :quoted-spec :spec], :pred #{:rename}, :val :as, :via [], :in [2 1]}), :args ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))}\r\n :via\r\n [{:type clojure.lang.Compiler$CompilerException\r\n   :message clojure.lang.ExceptionInfo: Call to clojure.core/refer-clojure did not conform to spec:\r\nIn: [2] val: (quote :as) fails at: [:args :exclude :op :spec] predicate: #{:exclude}\r\nIn: [2 1] val: :as fails at: [:args :exclude :op :quoted-spec :spec] predicate: #{:exclude}\r\nIn: [2] val: (quote :as) fails at: [:args :only :op :spec] predicate: #{:only}\r\nIn: [2 1] val: :as fails at: [:args :only :op :quoted-spec :spec] predicate: #{:only}\r\nIn: [2] val: (quote :as) fails at: [:args :rename :op :spec] predicate: #{:rename}\r\nIn: [2 1] val: :as fails at: [:args :rename :op :quoted-spec :spec] predicate: #{:rename}\r\n:clojure.spec/args  ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))\r\n #:clojure.spec{:problems ({:path [:args :exclude :op :spec], :pred #{:exclude}, :val (quote :as), :via [], :in [2]} {:path [:args :exclude :op :quoted-spec :spec], :pred #{:exclude}, :val :as, :via [], :in [2 1]} {:path [:args :only :op :spec], :pred #{:only}, :val (quote :as), :via [], :in [2]} {:path [:args :only :op :quoted-spec :spec], :pred #{:only}, :val :as, :via [], :in [2 1]} {:path [:args :rename :op :spec], :pred #{:rename}, :val (quote :as), :via [], :in [2]} {:path [:args :rename :op :quoted-spec :spec], :pred #{:rename}, :val :as, :via [], :in [2 1]}), :args ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))}, compiling:(clojure/core/async.clj:9:1)\r\n   :at [clojure.lang.Compiler analyzeSeq Compiler.java 6926]}\r\n  {:type clojure.lang.ExceptionInfo\r\n   :message Call to clojure.core/refer-clojure did not conform to spec:\r\nIn: [2] val: (quote :as) fails at: [:args :exclude :op :spec] predicate: #{:exclude}\r\nIn: [2 1] val: :as fails at: [:args :exclude :op :quoted-spec :spec] predicate: #{:exclude}\r\nIn: [2] val: (quote :as) fails at: [:args :only :op :spec] predicate: #{:only}\r\nIn: [2 1] val: :as fails at: [:args :only :op :quoted-spec :spec] predicate: #{:only}\r\nIn: [2] val: (quote :as) fails at: [:args :rename :op :spec] predicate: #{:rename}\r\nIn: [2 1] val: :as fails at: [:args :rename :op :quoted-spec :spec] predicate: #{:rename}\r\n:clojure.spec/args  ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))\r\n\r\n   :data #:clojure.spec{:problems ({:path [:args :exclude :op :spec], :pred #{:exclude}, :val (quote :as), :via [], :in [2]} {:path [:args :exclude :op :quoted-spec :spec], :pred #{:exclude}, :val :as, :via [], :in [2 1]} {:path [:args :only :op :spec], :pred #{:only}, :val (quote :as), :via [], :in [2]} {:path [:args :only :op :quoted-spec :spec], :pred #{:only}, :val :as, :via [], :in [2 1]} {:path [:args :rename :op :spec], :pred #{:rename}, :val (quote :as), :via [], :in [2]} {:path [:args :rename :op :quoted-spec :spec], :pred #{:rename}, :val :as, :via [], :in [2 1]}), :args ((quote :exclude) (quote [reduce into merge map take partition partition-by bounded-count]) (quote :as) (quote core))}\r\n   :at [clojure.core$ex_info invokeStatic core.clj 4725]}]\r\n :trace\r\n [[clojure.core$ex_info invokeStatic core.clj 4725]\r\n  [clojure.spec$macroexpand_check invokeStatic spec.clj 697]\r\n  [clojure.spec$macroexpand_check invoke spec.clj 686]\r\n  [clojure.lang.AFn applyToHelper AFn.java 156]\r\n  [clojure.lang.AFn applyTo AFn.java 144]\r\n  [clojure.lang.Var applyTo Var.java 700]\r\n  [clojure.lang.Compiler macroexpand1 Compiler.java 6816]\r\n  [clojure.lang.Compiler analyzeSeq Compiler.java 6905]\r\n  [clojure.lang.Compiler analyze Compiler.java 6701]\r\n  [clojure.lang.Compiler analyze Compiler.java 6657]\r\n  [clojure.lang.Compiler$BodyExpr$Parser parse Compiler.java 6030]\r\n  [clojure.lang.Compiler$TryExpr$Parser parse Compiler.java 2277]\r\n  [clojure.lang.Compiler analyzeSeq Compiler.java 6919]\r\n  [clojure.lang.Compiler analyze Compiler.java 6701]\r\n  [clojure.lang.Compiler analyze Compiler.java 6657]\r\n  [clojure.lang.Compiler$BodyExpr$Parser parse Compiler.java 6030]\r\n  [clojure.lang.Compiler$FnMethod parse Compiler.java 5407]\r\n  [clojure.lang.Compiler$FnExpr parse Compiler.java 3973]\r\n  [clojure.lang.Compiler analyzeSeq Compiler.java 6917]\r\n  [clojure.lang.Compiler analyze Compiler.java 6701]\r\n  [clojure.lang.Compiler analyzeSeq Compiler.java 6907]\r\n  [clojure.lang.Compiler analyze Compiler.java 6701]\r\n  [clojure.lang.Compiler analyze Compiler.java 6657]\r\n  [clojure.lang.Compiler$InvokeExpr parse Compiler.java 3767]\r\n  [clojure.lang.Compiler analyzeSeq Compiler.java 6921]\r\n  [clojure.lang.Compiler analyze Compiler.java 6701]\r\n  [clojure.lang.Compiler analyze Compiler.java 6657]\r\n  [clojure.lang.Compiler$BodyExpr$Parser parse Compiler.java 6030]\r\n  [clojure.lang.Compiler$FnMethod parse Compiler.java 5407]\r\n  [clojure.lang.Compiler$FnExpr parse Compiler.java 3973]\r\n  [clojure.lang.Compiler analyzeSeq Compiler.java 6917]\r\n  [clojure.lang.Compiler analyze Compiler.java 6701]\r\n  [clojure.lang.Compiler eval Compiler.java 6975]\r\n  [clojure.lang.Compiler eval Compiler.java 6967]\r\n  [clojure.lang.Compiler load Compiler.java 7430]\r\n  [clojure.lang.RT loadResourceScript RT.java 374]\r\n  [clojure.lang.RT loadResourceScript RT.java 365]\r\n  [clojure.lang.RT load RT.java 455]\r\n  [clojure.lang.RT load RT.java 421]\r\n  [clojure.core$load$fn__7831 invoke core.clj 6008]\r\n  [clojure.core$load invokeStatic core.clj 6007]\r\n  [clojure.core$load doInvoke core.clj 5991]\r\n  [clojure.lang.RestFn invoke RestFn.java 408]\r\n  [clojure.core$load_one invokeStatic core.clj 5812]\r\n  [clojure.core$load_one invoke core.clj 5807]\r\n  [clojure.core$load_lib$fn__7776 invoke core.clj 5852]\r\n  [clojure.core$load_lib invokeStatic core.clj 5851]\r\n  [clojure.core$load_lib doInvoke core.clj 5832]\r\n  [clojure.lang.RestFn applyTo RestFn.java 142]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$load_libs invokeStatic core.clj 5889]\r\n  [clojure.core$load_libs doInvoke core.clj 5873]\r\n  [clojure.lang.RestFn applyTo RestFn.java 137]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$require invokeStatic core.clj 5911]\r\n  [clojure.core$require doInvoke core.clj 5911]\r\n  [clojure.lang.RestFn invoke RestFn.java 436]\r\n  [io.pedestal.interceptor.chain$eval215$loading__7717__auto____216 invoke chain.clj 13]\r\n  [io.pedestal.interceptor.chain$eval215 invokeStatic chain.clj 13]\r\n  [io.pedestal.interceptor.chain$eval215 invoke chain.clj 13]\r\n  [clojure.lang.Compiler eval Compiler.java 6978]\r\n  [clojure.lang.Compiler eval Compiler.java 6967]\r\n  [clojure.lang.Compiler load Compiler.java 7430]\r\n  [clojure.lang.RT loadResourceScript RT.java 374]\r\n  [clojure.lang.RT loadResourceScript RT.java 365]\r\n  [clojure.lang.RT load RT.java 455]\r\n  [clojure.lang.RT load RT.java 421]\r\n  [clojure.core$load$fn__7831 invoke core.clj 6008]\r\n  [clojure.core$load invokeStatic core.clj 6007]\r\n  [clojure.core$load doInvoke core.clj 5991]\r\n  [clojure.lang.RestFn invoke RestFn.java 408]\r\n  [clojure.core$load_one invokeStatic core.clj 5812]\r\n  [clojure.core$load_one invoke core.clj 5807]\r\n  [clojure.core$load_lib$fn__7776 invoke core.clj 5852]\r\n  [clojure.core$load_lib invokeStatic core.clj 5851]\r\n  [clojure.core$load_lib doInvoke core.clj 5832]\r\n  [clojure.lang.RestFn applyTo RestFn.java 142]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$load_libs invokeStatic core.clj 5889]\r\n  [clojure.core$load_libs doInvoke core.clj 5873]\r\n  [clojure.lang.RestFn applyTo RestFn.java 137]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$require invokeStatic core.clj 5911]\r\n  [clojure.core$require doInvoke core.clj 5911]\r\n  [clojure.lang.RestFn invoke RestFn.java 1096]\r\n  [io.pedestal.http.route$eval38$loading__7717__auto____39 invoke route.clj 13]\r\n  [io.pedestal.http.route$eval38 invokeStatic route.clj 13]\r\n  [io.pedestal.http.route$eval38 invoke route.clj 13]\r\n  [clojure.lang.Compiler eval Compiler.java 6978]\r\n  [clojure.lang.Compiler eval Compiler.java 6967]\r\n  [clojure.lang.Compiler load Compiler.java 7430]\r\n  [clojure.lang.RT loadResourceScript RT.java 374]\r\n  [clojure.lang.RT loadResourceScript RT.java 365]\r\n  [clojure.lang.RT load RT.java 455]\r\n  [clojure.lang.RT load RT.java 421]\r\n  [clojure.core$load$fn__7831 invoke core.clj 6008]\r\n  [clojure.core$load invokeStatic core.clj 6007]\r\n  [clojure.core$load doInvoke core.clj 5991]\r\n  [clojure.lang.RestFn invoke RestFn.java 408]\r\n  [clojure.core$load_one invokeStatic core.clj 5812]\r\n  [clojure.core$load_one invoke core.clj 5807]\r\n  [clojure.core$load_lib$fn__7776 invoke core.clj 5852]\r\n  [clojure.core$load_lib invokeStatic core.clj 5851]\r\n  [clojure.core$load_lib doInvoke core.clj 5832]\r\n  [clojure.lang.RestFn applyTo RestFn.java 142]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$load_libs invokeStatic core.clj 5889]\r\n  [clojure.core$load_libs doInvoke core.clj 5873]\r\n  [clojure.lang.RestFn applyTo RestFn.java 137]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$require invokeStatic core.clj 5911]\r\n  [clojure.core$require doInvoke core.clj 5911]\r\n  [clojure.lang.RestFn invoke RestFn.java 1523]\r\n  [io.pedestal.http$eval32$loading__7717__auto____33 invoke http.clj 13]\r\n  [io.pedestal.http$eval32 invokeStatic http.clj 13]\r\n  [io.pedestal.http$eval32 invoke http.clj 13]\r\n  [clojure.lang.Compiler eval Compiler.java 6978]\r\n  [clojure.lang.Compiler eval Compiler.java 6967]\r\n  [clojure.lang.Compiler load Compiler.java 7430]\r\n  [clojure.lang.RT loadResourceScript RT.java 374]\r\n  [clojure.lang.RT loadResourceScript RT.java 365]\r\n  [clojure.lang.RT load RT.java 455]\r\n  [clojure.lang.RT load RT.java 421]\r\n  [clojure.core$load$fn__7831 invoke core.clj 6008]\r\n  [clojure.core$load invokeStatic core.clj 6007]\r\n  [clojure.core$load doInvoke core.clj 5991]\r\n  [clojure.lang.RestFn invoke RestFn.java 408]\r\n  [clojure.core$load_one invokeStatic core.clj 5812]\r\n  [clojure.core$load_one invoke core.clj 5807]\r\n  [clojure.core$load_lib$fn__7776 invoke core.clj 5852]\r\n  [clojure.core$load_lib invokeStatic core.clj 5851]\r\n  [clojure.core$load_lib doInvoke core.clj 5832]\r\n  [clojure.lang.RestFn applyTo RestFn.java 142
8000
]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$load_libs invokeStatic core.clj 5889]\r\n  [clojure.core$load_libs doInvoke core.clj 5873]\r\n  [clojure.lang.RestFn applyTo RestFn.java 137]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$require invokeStatic core.clj 5911]\r\n  [clojure.core$require doInvoke core.clj 5911]\r\n  [clojure.lang.RestFn invoke RestFn.java 436]\r\n  [foosrv.server$eval24$loading__7717__auto____25 invoke server.clj 1]\r\n  [foosrv.server$eval24 invokeStatic server.clj 1]\r\n  [foosrv.server$eval24 invoke server.clj 1]\r\n  [clojure.lang.Compiler eval Compiler.java 6978]\r\n  [clojure.lang.Compiler eval Compiler.java 6967]\r\n  [clojure.lang.Compiler load Compiler.java 7430]\r\n  [clojure.lang.RT loadResourceScript RT.java 374]\r\n  [clojure.lang.RT loadResourceScript RT.java 365]\r\n  [clojure.lang.RT load RT.java 455]\r\n  [clojure.lang.RT load RT.java 421]\r\n  [clojure.core$load$fn__7831 invoke core.clj 6008]\r\n  [clojure.core$load invokeStatic core.clj 6007]\r\n  [clojure.core$load doInvoke core.clj 5991]\r\n  [clojure.lang.RestFn invoke RestFn.java 408]\r\n  [clojure.core$load_one invokeStatic core.clj 5812]\r\n  [clojure.core$load_one invoke core.clj 5807]\r\n  [clojure.core$load_lib$fn__7776 invoke core.clj 5852]\r\n  [clojure.core$load_lib invokeStatic core.clj 5851]\r\n  [clojure.core$load_lib doInvoke core.clj 5832]\r\n  [clojure.lang.RestFn applyTo RestFn.java 142]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$load_libs invokeStatic core.clj 5889]\r\n  [clojure.core$load_libs doInvoke core.clj 5873]\r\n  [clojure.lang.RestFn applyTo RestFn.java 137]\r\n  [clojure.core$apply invokeStatic core.clj 659]\r\n  [clojure.core$require invokeStatic core.clj 5911]\r\n  [clojure.core$require doInvoke core.clj 5911]\r\n  [clojure.lang.RestFn invoke RestFn.java 408]\r\n  [user$eval15 invokeStatic form-init7975287044535910165.clj 1]\r\n  [user$eval15 invoke form-init7975287044535910165.clj 1]\r\n  [clojure.lang.Compiler eval Compiler.java 6978]\r\n  [clojure.lang.Compiler eval Compiler.java 6967]\r\n  [clojure.lang.Compiler eval Compiler.java 6967]\r\n  [clojure.lang.Compiler load Compiler.java 7430]\r\n  [clojure.lang.Compiler loadFile Compiler.java 7368]\r\n  [clojure.main$load_script invokeStatic main.clj 277]\r\n  [clojure.main$init_opt invokeStatic main.clj 279]\r\n  [clojure.main$init_opt invoke main.clj 279]\r\n  [clojure.main$initialize invokeStatic main.clj 310]\r\n  [clojure.main$null_opt invokeStatic main.clj 344]\r\n  [clojure.main$null_opt invoke main.clj 341]\r\n  [clojure.main$main invokeStatic main.clj 423]\r\n  [clojure.main$main doInvoke main.clj 386]\r\n  [clojure.lang.RestFn applyTo RestFn.java 137]\r\n  [clojure.lang.Var applyTo Var.java 700]\r\n  [clojure.main main main.java 37]]}\r\n```\r\n\r\n## Steps to reproduce\r\n\r\n1. Create new project with `lein new pedestal-service foo`\r\n\r\n2. Edit foo/project.clj to use clojure 1.9.0-alpha15\r\n\r\n3. Start a repl with `lein repl`\r\n\r\n# Environment\r\n\r\n## Pedestal version\r\n\r\n0.5.2\r\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/504","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/504/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/504/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/504/events","html_url":"https://github.com/pedestal/pedestal/issues/504","id":217831013,"number":504,"title":"Bug in pedestal.io website guide","user":{"login":"oasalonen","id":1109816,"avatar_url":"https://avatars0.githubusercontent.com/u/1109816?v=4","gravatar_id":"","url":"https://api.github.com/users/oasalonen","html_url":"https://github.com/oasalonen","followers_url":"https://api.github.com/users/oasalonen/followers","following_url":"https://api.github.com/users/oasalonen/following{/other_user}","gists_url":"https://api.github.com/users/oasalonen/gists{/gist_id}","starred_url":"https://api.github.com/users/oasalonen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oasalonen/subscriptions","organizations_url":"https://api.github.com/users/oasalonen/orgs","repos_url":"https://api.github.com/users/oasalonen/repos","events_url":"https://api.github.com/users/oasalonen/events{/privacy}","received_events_url":"https://api.github.com/users/oasalonen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-03-29T10:24:35Z","updated_at":"2017-03-29T10:27:45Z","closed_at":"2017-03-29T10:27:45Z","author_association":"NONE","body":"Is this the right place to file issues on the pedestal.io website guides?\r\n\r\nIn http://pedestal.io/guides/hello-world-content-types#_the_whole_shebang see hello.clj `defn greeting-for`. \r\n\r\nThe line \r\n`(unmentionables nm) nm`\r\nshould be\r\n`(unmentionables nm) nil`\r\n\r\nas shown in an earlier example of the guide (http://pedestal.io/guides/hello-world-query-parameters#_conditional_responses)","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/502","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/502/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/502/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/502/events","html_url":"https://github.com/pedestal/pedestal/issues/502","id":215025765,"number":502,"title":" CSRF and application/x-www-form-urlencoded data.","user":{"login":"ddeaguiar","id":5809,"avatar_url":"https://avatars3.githubusercontent.com/u/5809?v=4","gravatar_id":"","url":"https://api.github.com/users/ddeaguiar","html_url":"https://github.com/ddeaguiar","followers_url":"https://api.github.com/users/ddeaguiar/followers","following_url":"https://api.github.com/users/ddeaguiar/following{/other_user}","gists_url":"https://api.github.com/users/ddeaguiar/gists{/gist_id}","starred_url":"https://api.github.com/users/ddeaguiar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddeaguiar/subscriptions","organizations_url":"https://api.github.com/users/ddeaguiar/orgs","repos_url":"https://api.github.com/users/ddeaguiar/repos","events_url":"https://api.github.com/users/ddeaguiar/events{/privacy}","received_events_url":"https://api.github.com/users/ddeaguiar/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-03-17T14:50:02Z","updated_at":"2017-04-07T17:26:08Z","closed_at":"2017-04-07T16:43:07Z","author_association":"CONTRIBUTOR","body":"# Description\r\nWhen CSRF is activated via the service map, I alway see the _Invalid anti-forgery token_ response when POST'ing `application/x-www-form-urlencoded` data that includes the anti-forgery token.\r\n\r\nIt works as expected when I enable sessions via the service map and add the CSRF interceptor after the `body-params` interceptor during route configuration.\r\n\r\n## Expected Behavior\r\nThe request should not be considered invalid when the correct anti-forgery token is submitted in the form params.\r\n## Actual Behavior\r\nThe _Invalid anti-forgery token_ response is always returned.\r\n## Steps to reproduce\r\n* Activate CSRF protection via the service map.\r\n* Add an authentication endpoint and submit a request with a content-type of `application/x-www-form-urlencoded` containing the anti-forgery token.\r\n\r\nRefer to [this](https://github.com/ddeaguiar/pedestal-csrf-issue) sample app for a demonstration.\r\n\r\nThis issue seems to go back a few years based on [this](https://stuarth.github.io/clojure/csrf-pedestal/) blog post.\r\n\r\n# Environment\r\n\r\nJava 1.8.0_112\r\n\r\n## Operating System (including version).\r\n\r\nMacOS 10.12.3\r\n\r\n## Your current Leiningen version (`lein --version`)\r\n\r\n2.7.1\r\n\r\n## Pedestal version\r\n\r\n0.5.2\r\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/499","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/499/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/499/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/499/events","html_url":"https://github.com/pedestal/pedestal/issues/499","id":211535072,"number":499,"title":"Pedestal breaks my ClojureScript / JavaScript application","user":{"login":"ohpauleez","id":153929,"avatar_url":"https://avatars0.githubusercontent.com/u/153929?v=4","gravatar_id":"","url":"https://api.github.com/users/ohpauleez","html_url":"https://github.com/ohpauleez","followers_url":"https://api.github.com/users/ohpauleez/followers","following_url":"https://api.github.com/users/ohpauleez/following{/other_user}","gists_url":"https://api.github.com/users/ohpauleez/gists{/gist_id}","starred_url":"https://api.github.com/users/ohpauleez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ohpauleez/subscriptions","organizations_url":"https://api.github.com/users/ohpauleez/orgs","repos_url":"https://api.github.com/users/ohpauleez/repos","events_url":"https://api.github.com/users/ohpauleez/events{/privacy}","received_events_url":"https://api.github.com/users/ohpauleez/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-03-02T22:15:06Z","updated_at":"2017-06-22T17:27:19Z","closed_at":"2017-03-02T22:21:33Z","author_association":"OWNER","body":"# Description\r\n\r\nWhen using Pedestal, my application works fine in Firefox (albeit some warnings), but fails to even load in Chrome.\r\n\r\n## Expected Behavior\r\n\r\nWhen serving up my JavaScript application from the resource/public path in Pedestal, I expect my application to load in the browser\r\n\r\n## Actual Behavior\r\n\r\nA bunch of CSP errors/warnings within the JavaScript console and the application never loads\r\n\r\n## Steps to reproduce\r\n\r\nAny JavaScript or ClojureScript application that uses dynamic features (forced writing, eval, etc.)\r\n\r\n\r\n## Pedestal version\r\n\r\n0.5.2\r\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/498","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/498/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/498/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/498/events","html_url":"https://github.com/pedestal/pedestal/issues/498","id":210566351,"number":498,"title":"`url-for` functionality should be delayed until used","user":{"login":"ohpauleez","id":153929,"avatar_url":"https://avatars0.githubusercontent.com/u/153929?v=4","gravatar_id":"","url":"https://api.github.com/users/ohpauleez","html_url":"https://github.com/ohpauleez","followers_url":"https://api.github.com/users/ohpauleez/followers","following_url":"https://api.github.com/users/ohpauleez/following{/other_user}","gists_url":"https://api.github.com/users/ohpauleez/gists{/gist_id}","starred_url":"https://api.github.com/users/ohpauleez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ohpauleez/subscriptions","organizations_url":"https://api.github.com/users/ohpauleez/orgs","repos_url":"https://api.github.com/users/ohpauleez/repos","events_url":"https://api.github.com/users/ohpauleez/events{/privacy}","received_events_url":"https://api.github.com/users/ohpauleez/received_events","type":"User","site_admin":false},"labels":[{"id":47812103,"url":"https://api.github.com/repos/pedestal/pedestal/labels/primed","name":"primed","color":"009800","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-02-27T18:26:53Z","updated_at":"2017-04-21T14:42:24Z","closed_at":"2017-04-21T14:42:24Z","author_association":"OWNER","body":"In the current implementation of the router, a \"route context\" is a constructor function for building routers and resolving the route matches.\r\n\r\nIn that process, a `link-map` is created for use with the `url-for` function, but the `url-for` function may not be used within the end application.\r\n\r\nThis construction should be `delay`-ed, and only computed if used.  The delay needs to be created on a [single line](https://github.com/pedestal/pedestal/blob/master/route/src/io/pedestal/http/route.clj#L396) and `url-for` needs to be smarter that [`*url-for*` may be a Delay](https://github.com/pedestal/pedestal/blob/master/route/src/io/pedestal/http/route.clj#L342).  It's not enough to just check for IDeref, because *url-for* could be a Var for backwards compatibility.","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/493","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/493/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/493/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/493/events","html_url":"https://github.com/pedestal/pedestal/issues/493","id":202593803,"number":493,"title":"Invalid route generated with url-for-routes","user":{"login":"oliyh","id":2052835,"avatar_url":"https://avatars1.githubusercontent.com/u/2052835?v=4","gravatar_id":"","url":"https://api.github.com/users/oliyh","html_url":"https://github.com/oliyh","followers_url":"https://api.github.com/users/oliyh/followers","following_url":"https://api.github.com/users/oliyh/following{/other_user}","gists_url":"https://api.github.com/users/oliyh/gists{/gist_id}","starred_url":"https://api.github.com/users/oliyh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oliyh/subscriptions","organizations_url":"https://api.github.com/users/oliyh/orgs","repos_url":"https://api.github.com/users/oliyh/repos","events_url":"https://api.github.com/users/oliyh/events{/privacy}","received_events_url":"https://api.github.com/users/oliyh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-01-23T17:09:16Z","updated_at":"2017-01-26T23:47:02Z","closed_at":"2017-01-26T19:55:00Z","author_association":"NONE","body":"# Description\r\n```clojure\r\n(require '[io.pedestal.http.route :as route]\r\n         '[io.pedestal.http.route.definition :refer [defroutes]])\r\n\r\n(defn all-things [ctx])\r\n\r\n(defn make-thing [ctx])\r\n\r\n(defroutes sample-routes\r\n  [[[\"/things/:date\"\r\n     [\"/\" {:get all-things}]\r\n     [\"/thing\" {:post make-thing}]]]])\r\n\r\n((route/url-for-routes sample-routes) ::all-things :params {:date \"2017-01-23\"})\r\n;; => /things/2017-01-23// ;; the trailing double slash is wrong, and results in a 404 when routing\r\n\r\n((route/url-for-routes sample-routes) ::make-thing :params {:date \"2017-01-23\"})\r\n;; => /things/2017-01-23/thing ;; works correctly\r\n```\r\n\r\n## Expected Behavior\r\nThe `::all-things` route should have a single trailing slash\r\n\r\n## Actual Behavior\r\nIn 0.5.1 the behaviour is correct. In 0.5.2 it has a double trailing slash which results in a 404 when passed back into pedestal","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/492","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/492/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/492/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/492/events","html_url":"https://github.com/pedestal/pedestal/issues/492","id":200060841,"number":492,"title":"Path travelsal vulnerability in Ring, upgrade to 1.5.1","user":{"login":"claj","id":353113,"avatar_url":"https://avatars1.githubusercontent.com/u/353113?v=4","gravatar_id":"","url":"https://api.github.com/users/claj","html_url":"https://github.com/claj","followers_url":"https://api.github.com/users/claj/followers","following_url":"https://api.github.com/users/claj/following{/other_user}","gists_url":"https://api.github.com/users/claj/gists{/gist_id}","starred_url":"https://api.github.com/users/claj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claj/subscriptions","organizations_url":"https://api.github.com/users/claj/orgs","repos_url":"https://api.github.com/users/claj/repos","events_url":"https://api.github.com/users/claj/events{/privacy}","received_events_url":"https://api.github.com/users/claj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-01-11T10:51:09Z","updated_at":"2017-01-11T19:44:28Z","closed_at":"2017-01-11T19:44:28Z","author_association":"NONE","body":"# Description\r\nThere was an announcement on the clojure mailing list, encouraging an upgrade to Ring 1.5.1 because of path traversal vulnerability in earlier versions:\r\n\r\nhttps://groups.google.com/forum/#!topic/clojure/YDrKBV26rnA\r\n\r\nThe announcement follows here:\r\n\r\nhere is a path traversal vulnerability in Ring that affects applications that serve resources from the filesystem. It does not affect Ring sites deployed as uberjars.\r\n\r\nVersions affected: Every version prior to 1.5.1; 1.6.0-beta1 to 1.6.0-beta6\r\n\r\nFixed versions: 1.5.1, 1.6.0-beta7\r\n\r\nLink: https://github.com/ring-clojure/ring\r\n\r\nOverview\r\n\r\nThis vulnerability is caused by a bug in the ring.util.response/resource-response function. An attacker can use this vulnerability to access files that are in a directory on the classpath, but they cannot access resources contained in a jar.\r\n\r\nThis also affects the ring.middleware.resource/wrap-resource middleware, and the compojure.route/resources function.\r\n\r\nExample\r\n\r\nConsider a minimal Compojure application:\r\n\r\n(ns example.core\r\n  (:require [compojure.core :refer :all]\r\n            [compojure.route :as route]))\r\n\r\n(defroutes app\r\n  (GET \"/\" [] \"Hello World\")\r\n  (route/resources \"/\")\r\n  (route/not-found \"Not Found\"))\r\n\r\nAssume that this isn't packaged as an jar when deployed, but is deployed as a directory of source files. An attacker can craft a URL to read any file on the classpath that is not in a jar:\r\n\r\ncurl -vvv --path-as-is 'http://localhost:3000//../example/core.clj'\r\n\r\nCause\r\n\r\nUnlike the file-response function, the resource-response function did not properly santize the path from the client.\r\n\r\nFix\r\n\r\nThe resource-response function now checks for path segments containing \"..\", and also ensures that for file-based resources, the canonical filepath of the resource must be contained within the canonical filepath of the :root option.\r\n\r\nThis fix means that Ring will not follow symlinks on the classpath if they lead to files or directories outside the path specified in the :root option. If you happen to need this for any reason, then you need to set the :allow-symlinks? option to true.\r\n\r\nRecommendation\r\n\r\nUpgrade to 1.5.1 as soon as possible.\r\n\r\nCredit\r\n\r\nThanks go Tim McCormack for discovering this vulnerability, and his responsible disclosure of it. Thanks also go to Dmitri Sotnikov for reviewing the fix.\r\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/490","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/490/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/490/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/490/events","html_url":"https://github.com/pedestal/pedestal/issues/490","id":198232603,"number":490,"title":"Interceptor chain hangs on closed channel","user":{"login":"EwenG","id":2028701,"avatar_url":"https://avatars3.githubusercontent.com/u/2028701?v=4","gravatar_id":"","url":"https://api.github.com/users/EwenG","html_url":"https://github.com/EwenG","followers_url":"https://api.github.com/users/EwenG/followers","following_url":"https://api.github.com/users/EwenG/following{/other_user}","gists_url":"https://api.github.com/users/EwenG/gists{/gist_id}","starred_url":"https://api.github.com/users/EwenG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EwenG/subscriptions","organizations_url":"https://api.github.com/users/EwenG/orgs","repos_url":"https://api.github.com/users/EwenG/repos","events_url":"https://api.github.com/users/EwenG/events{/privacy}","received_events_url":"https://api.github.com/users/EwenG/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-12-31T13:35:19Z","updated_at":"2017-01-11T19:44:56Z","closed_at":"2017-01-11T19:44:56Z","author_association":"NONE","body":"# Description\r\n\r\nWhen an asynchronous interceptor closes its returned channel instead of putting a well formed context in it, the interceptor chain hangs, the socket is not closed, no response is returned to the client.\r\n\r\n## Expected Behavior\r\n\r\nThe server should respond with internal server error\r\n\r\n## Actual Behavior\r\n\r\nThe server hangs\r\n\r\n## Steps to reproduce\r\n\r\nRun the application from the gist [https://gist.github.com/EwenG/2f6846a2bad14c50b386](https://gist.github.com/EwenG/2f6846a2bad14c50b386)\r\n\r\nRequest the url: http://localhost:8080/\r\n\r\n# Environment\r\n\r\n## Operating System (including version).\r\n\r\nOSX 10.11.6\r\n\r\n## Your current Leiningen version (`lein --version`)\r\n\r\nLeiningen 2.7.1 on Java 1.8.0_91 Java HotSpot(TM) 64-Bit Server VM\r\n\r\n## Pedestal version\r\n\r\n0.5.1","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/488","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/488/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/488/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/488/events","html_url":"https://github.com/pedestal/pedestal/issues/488","id":196453374,"number":488,"title":"Malformed request can trigger an internal server error","user":{"login":"ray1729","id":129297,"avatar_url":"https://avatars1.githubusercontent.com/u/129297?v=4","gravatar_id":"","url":"https://api.github.com/users/ray1729","html_url":"https://github.com/ray1729","followers_url":"https://api.github.com/users/ray1729/followers","following_url":"https://api.github.com/users/ray1729/following{/other_user}","gists_url":"https://api.github.com/users/ray1729/gists{/gist_id}","starred_url":"https://api.github.com/users/ray1729/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ray1729/subscriptions","organizations_url":"https://api.github.com/users/ray1729/orgs","repos_url":"https://api.github.com/users/ray1729/repos","events_url":"https://api.github.com/users/ray1729/events{/privacy}","received_events_url":"https://api.github.com/users/ray1729/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-12-19T16:14:04Z","updated_at":"2016-12-20T16:27:01Z","closed_at":"2016-12-20T16:27:00Z","author_association":"NONE","body":"# Description\r\n\r\nIncorrectly encoded URL parameters trigger an internal server error.\r\n\r\n## Expected Behavior\r\n\r\nServer should respond with 400 - bad request.\r\n\r\n## Actual Behavior\r\n\r\nServer responds with 500 - internal server error.\r\n\r\n## Steps to reproduce\r\n\r\nRun the hello world application from the Pedestal guide: http://pedestal.io/guides/hello-world\r\n\r\nIssue the request `curl http://localhost:8890/greet?q=%`\r\n\r\n# Environment\r\n\r\n## Operating System (including version).\r\n\r\nUbuntu trusty \r\n\r\n## Your current Leiningen version (`lein --version`)\r\n\r\nLeiningen 2.7.1 on Java 1.8.0_77 Java HotSpot(TM) 64-Bit Server VM\r\n\r\n## Pedestal version\r\n\r\n0.5.1","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/484","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/484/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/484/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/484/events","html_url":"https://github.com/pedestal/pedestal/issues/484","id":191296667,"number":484,"title":"Blocking put inside go-loop in SSE","user":{"login":"oliyh","id":2052835,"avatar_url":"https://avatars1.githubusercontent.com/u/2052835?v=4","gravatar_id":"","url":"https://api.github.com/users/oliyh","html_url":"https://github.com/oliyh","followers_url":"https://api.github.com/users/oliyh/followers","following_url":"https://api.github.com/users/oliyh/following{/other_user}","gists_url":"https://api.github.com/users/oliyh/gists{/gist_id}","starred_url":"https://api.github.com/users/oliyh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oliyh/subscriptions","organizations_url":"https://api.github.com/users/oliyh/orgs","repos_url":"https://api.github.com/users/oliyh/repos","events_url":"https://api.github.com/users/oliyh/events{/privacy}","received_events_url":"https://api.github.com/users/oliyh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-11-23T15:05:47Z","updated_at":"2016-12-20T19:01:47Z","closed_at":"2016-12-20T19:01:47Z","author_association":"NONE","body":"Hello,\r\n\r\nOur production system suffered a hang today and I found that all the async-dispatch threads were waiting at `send-event` (stack trace below).\r\n\r\nOnce inside the code it looks like we have a blocking put inside a go loop, which doesn’t look right.\r\n\r\nThe blocking put is here: https://github.com/pedestal/pedestal/blob/cf3fa1ccd7e9a62d9e4d43ddeebb903b27408190/service/src/io/pedestal/http/sse.clj#L91\r\n\r\nInside the go loop here: https://github.com/pedestal/pedestal/blob/cf3fa1ccd7e9a62d9e4d43ddeebb903b27408190/service/src/io/pedestal/http/sse.clj#L150\r\n\r\nIt should be `>!` instead of `>!!` or we risk locking up the core async threads.\r\n\r\nDoes this make sense?\r\nThanks\r\n\r\n```\r\n{\r\n\r\n      \"state\": \"waiting\",\r\n\r\n      \"stacktrace\": [\r\n\r\n        \"clojure.core$promise$reify__7005 deref (core.clj:6823)\",\r\n\r\n        \"clojure.core$deref invokeStatic (core.clj:2228)\",\r\n\r\n        \"clojure.core$deref invoke (core.clj:2214)\",\r\n\r\n        \"clojure.core.async$_GT__BANG__BANG_ invokeStatic (async.clj:145)\",\r\n\r\n        \"clojure.core.async$_GT__BANG__BANG_ invoke (async.clj:137)\",\r\n\r\n        \"io.pedestal.http.sse$send_event invokeStatic (sse.clj:91)\",\r\n\r\n        \"io.pedestal.http.sse$send_event invoke (sse.clj:81)\",\r\n\r\n        \"io.pedestal.http.sse$start_dispatch_loop$fn__23544$state_machine__9503__auto____23545$fn__23547 invoke (sse.clj:131)\",\r\n\r\n        \"io.pedestal.http.sse$start_dispatch_loop$fn__23544$state_machine__9503__auto____23545 invoke (sse.clj:131)\",\r\n\r\n        \"clojure.core.async.impl.ioc_macros$run_state_machine invokeStatic (ioc_macros.clj:1012)\",\r\n\r\n        \"clojure.core.async.impl.ioc_macros$run_state_machine invoke (ioc_macros.clj:1011)\",\r\n\r\n        \"clojure.core.async.impl.ioc_macros$run_state_machine_wrapped invokeStatic (ioc_macros.clj:1016)\",\r\n\r\n        \"clojure.core.async.impl.ioc_macros$run_state_machine_wrapped invoke (ioc_macros.clj:1014)\",\r\n\r\n        \"clojure.core.async$ioc_alts_BANG_$fn__9657 invoke (async.clj:383)\",\r\n\r\n        \"clojure.core.async$do_alts$fn__9611$fn__9614 invoke (async.clj:252)\",\r\n\r\n        \"clojure.core.async.impl.channels.ManyToManyChannel$fn__6376$fn__6377 invoke (channels.clj:95)\"\r\n\r\n      ],\r\n\r\n      \"name\": \"async-dispatch-8\"\r\n\r\n    }\r\n\r\n ```","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/483","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/483/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/483/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/483/events","html_url":"https://github.com/pedestal/pedestal/issues/483","id":190864800,"number":483,"title":"Add documentation to the `io.pedestal.interceptors.helpers` namespace which calls out deprecated helpers.","user":{"login":"ddeaguiar","id":5809,"avatar_url":"https://avatars3.githubusercontent.com/u/5809?v=4","gravatar_id":"","url":"https://api.github.com/users/ddeaguiar","html_url":"https://github.com/ddeaguiar","followers_url":"https://api.github.com/users/ddeaguiar/followers","following_url":"https://api.github.com/users/ddeaguiar/following{/other_user}","gists_url":"https://api.github.com/users/ddeaguiar/gists{/gist_id}","starred_url":"https://api.github.com/users/ddeaguiar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddeaguiar/subscriptions","organizations_url":"https://api.github.com/users/ddeaguiar/orgs","repos_url":"https://api.github.com/users/ddeaguiar/repos","events_url":"https://api.github.com/users/ddeaguiar/events{/privacy}","received_events_url":"https://api.github.com/users/ddeaguiar/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-11-21T23:22:06Z","updated_at":"2016-12-20T16:30:39Z","closed_at":"2016-12-20T16:30:39Z","author_association":"CONTRIBUTOR","body":"# Description\r\nThe Pedestal [api docs](http://pedestal.io/api/pedestal.interceptor/io.pedestal.interceptor.helpers.html) are not clear about the current usage recommendations for the interceptor helpers in the `io.pedestal.interceptor.helpers` namespace. These recommendations were briefly discussed in #308 and expanded upon in pull #301. I suggest we add a namespace comment which captures the intended usage of these helpers and/or annotate all the helper macros in the `io.pedestal.interceptor.helpers` namespace with `{:deprecated 0.4.0}` metadata.\r\n\r\nBringing this up because someone ran into this issue today and brought it up in the #Pedestal Slack channel. I'd be happy to submit a PR for either approach.\r\n\r\n## Pedestal version\r\n0.5.1","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/481","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/481/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/481/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/481/events","html_url":"https://github.com/pedestal/pedestal/issues/481","id":188402882,"number":481,"title":"StatsD Metrics Reporter","user":{"login":"semperos","id":231375,"avatar_url":"https://avatars0.githubusercontent.com/u/231375?v=4","gravatar_id":"","url":"https://api.github.com/users/semperos","html_url":"https://github.com/semperos","followers_url":"https://api.github.com/users/semperos/followers","following_url":"https://api.github.com/users/semperos/following{/other_user}","gists_url":"https://api.github.com/users/semperos/gists{/gist_id}","starred_url":"https://api.github.com/users/semperos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/semperos/subscriptions","organizations_url":"https://api.github.com/users/semperos/orgs","repos_url":"https://api.github.com/users/semperos/repos","events_url":"https://api.github.com/users/semperos/events{/privacy}","received_events_url":"https://api.github.com/users/semperos/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2016-11-10T02:10:31Z","updated_at":"2016-12-20T15:51:00Z","closed_at":"2016-12-20T15:46:01Z","author_assoc
47d2
iation":"NONE","body":"# Description\r\n\r\nWhen recording Pedestal metrics via a StatsD recorder/reporter, the payloads that Pedestal sends to the StatsD server contain illegal metric names (using a leading `:` character, derived in Pedestal from the [straight stringification](https://github.com/pedestal/pedestal/blob/7250c9a33aaffcbf909ba7f4e20f895445bdfd52/log/src/io/pedestal/log.clj#L299-L323) of keywords used for metric names), which causes the StatsD server not to record the metrics and instead log an error. The colon is reserved by StatsD as a separator between the metric name and the value being recorded.\r\n\r\nI've verified that by refactoring the `counter`, `gauge`, `histogram`, and `meter` functions in the `io.pedestal.log` namespace to do something other than `(str metric-name)` where `metric-name` appears always to be a namespace-qualified keyword, I'm able to get StatsD metrics reporting working. Under the perhaps-mistaken assumption that `metric-name` is always a namespace-qualified keyword, my local fix simply does the following in the place of `(str metric-name)`:\r\n\r\n```clj\r\n(str (namespace metric-name) \".\" (name metric-name))\r\n```\r\n\r\n## Expected Behavior\r\n\r\nUsing a StatsD reporter for Pedestal metrics, metrics are published successfully to the StatsD server when running a Pedestal app.\r\n\r\n## Actual Behavior\r\n\r\nPedestal publishes metrics to StatsD with illegal names, with StatsD reporting them as \"bad lines\" and not able to record them. Here is an example:\r\n\r\n```\r\n9 Nov 20:45:59 - DEBUG: :helloworld-metrics.service/statsd-hits:1|g\r\n9 Nov 20:45:59 - DEBUG: Bad line: helloworld-metrics.service/statsd-hits in msg \":helloworld-metrics.service/statsd-hits:1|g\"\r\n```\r\n\r\n## Steps to reproduce\r\n\r\n1. Clone the StatsD repo: `git clone https://github.com/etsy/statsd && cd statsd`\r\n2. Add a `config.js` file with the StatsD configuration found below in this issue.\r\n3. Run StatsD with `node stats.js config.js`\r\n4. Clone the Pedestal repo: `git clone https://github.com/pedestal/pedestal && cd pedestal`\r\n5. Step into the metrics sample project: `cd samples/helloworld-metrics`\r\n6. Run the sample project: `lein run-dev`\r\n7. Hit the page of the app which sends metrics to StatsD at [http://localhost:8080/statsd](http://localhost:8080/statsd)\r\n8. Observe StatsD log output, specifically the `DEBUG` output lines that indicate the metrics published are `Bad line`s\r\n\r\n# Environment\r\n\r\n## Operating System (including version).\r\n\r\nMac OSX 10.11.6 (El Capitan)\r\n\r\n## Your current Leiningen version (`lein --version`)\r\n\r\nLeiningen 2.7.1 on Java 1.8.0_60 Java HotSpot(TM) 64-Bit Server VM\r\n\r\n## Pedestal version\r\n\r\nAs found in the sample project in this repo at commit 1ee713e, `[io.pedestal/pedestal.service \"0.5.1\"]`.\r\n\r\n## Node version (used for running StatsD locally)\r\n\r\nv5.10.1 \r\n\r\n## StatsD version\r\n\r\nI run StatsD locally from a checkout of the repo at https://github.com/etsy/statsd, tested with commits ff845eb and 02eae13 with same behavior, using config:\r\n\r\n```js\r\n{\r\n  dumpMessages: true,\r\n  debug: true,\r\n  port: 8125,\r\n  backends: [ \"./backends/console\" ]\r\n}\r\n```","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/479","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/479/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/479/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/479/events","html_url":"https://github.com/pedestal/pedestal/issues/479","id":184612365,"number":479,"title":":transit-params not available during testing with response-for","user":{"login":"rauhs","id":11081351,"avatar_url":"https://avatars3.githubusercontent.com/u/11081351?v=4","gravatar_id":"","url":"https://api.github.com/users/rauhs","html_url":"https://github.com/rauhs","followers_url":"https://api.github.com/users/rauhs/followers","following_url":"https://api.github.com/users/rauhs/following{/other_user}","gists_url":"https://api.github.com/users/rauhs/gists{/gist_id}","starred_url":"https://api.github.com/users/rauhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rauhs/subscriptions","organizations_url":"https://api.github.com/users/rauhs/orgs","repos_url":"https://api.github.com/users/rauhs/repos","events_url":"https://api.github.com/users/rauhs/events{/privacy}","received_events_url":"https://api.github.com/users/rauhs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-10-22T05:58:38Z","updated_at":"2016-10-25T20:36:03Z","closed_at":"2016-10-25T20:36:03Z","author_association":"NONE","body":"# Description\n\nCommit d948b6122bbe086562419efa36446f9bd330115c seems to break transit parsing when testing with `response-for`. The problem is that `(.available (:body req))` returns 0, even though there is data in the stream. Maybe there is something wrong with how the body stream gets constructed for testing?\n## Steps to reproduce\n\nThis code should reproduce it. There is parts you can uncomment and see the working version.\n\n``` clojure\n(def body-parser\n  {#\"^application/transit\\+json\"\n   (fn [{:keys [body] :as req}]\n     ;; Calling slurp on body here works but will trigger a EOFException since the stream is\n     ;; then consumed.\n     (assoc req\n       :body-debug [(.available body)]\n       :transit-params (transit/read (transit/reader body :json))))})\n\n(def routes\n  (table/table-routes\n    [[\"/a/\"\n      :post [ ;; Uncommenting the default parser and the transit params are not available:\n             ;#_\n                 (body-params/body-params)\n             #_(body-params/body-params body-parser)\n\n             #(-> {:status 200\n                   :body (select-keys % [:transit-params :body-debug])})]\n      :route-name :route/a]]))\n\n(io.pedestal.test/response-for\n  (-> {::pedestal/routes routes\n       ::pedestal/type :immutant}\n      pedestal/default-interceptors\n      pedestal/dev-interceptors\n      pedestal/service-fn\n      ::pedestal/service-fn)\n  \"POST\" \"/a/\"\n  :body \"[\\\"^ \\\",\\\"~:a\\\",\\\"~:b\\\"]\" ;; {:a :b}\n  :headers {\"Content-Type\" \"application/transit+json;UTF-8\"})\n```\n## Operating System (including version).\n\nLinux sky 4.4.0-38-generic #57-Ubuntu SMP Tue Sep 6 15:42:33 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n## Pedestal version\n\n0.5.1\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/477","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/477/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/477/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/477/events","html_url":"https://github.com/pedestal/pedestal/issues/477","id":183996264,"number":477,"title":"url-for omits trailing slash in combination with map tree router","user":{"login":"rauhs","id":11081351,"avatar_url":"https://avatars3.githubusercontent.com/u/11081351?v=4","gravatar_id":"","url":"https://api.github.com/users/rauhs","html_url":"https://github.com/rauhs","followers_url":"https://api.github.com/users/rauhs/followers","following_url":"https://api.github.com/users/rauhs/following{/other_user}","gists_url":"https://api.github.com/users/rauhs/gists{/gist_id}","starred_url":"https://api.github.com/users/rauhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rauhs/subscriptions","organizations_url":"https://api.github.com/users/rauhs/orgs","repos_url":"https://api.github.com/users/rauhs/repos","events_url":"https://api.github.com/users/rauhs/events{/privacy}","received_events_url":"https://api.github.com/users/rauhs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-10-19T15:31:30Z","updated_at":"2016-12-20T16:30:06Z","closed_at":"2016-12-20T16:30:05Z","author_association":"NONE","body":"# Description\n\nUsing `url-for-routes` sometimes omits the trailing slash even though this is how it is specified in the route definition\n## Expected Behavior\n\nReturn the URL as defined.\n## Steps to reproduce\n\n```\n((io.pedestal.http.route/url-for-routes\n   (io.pedestal.http.route.definition.table/table-routes\n     [[\"/api/\"\n       :get identity\n       :route-name :x]]))\n  :x)\n;; => \"/api\"\n```\n\nNote, this will also 404 since the router seems to match for the exact URL.\n## Pedestal version\n\n0.5.0\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/473","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/473/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/473/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/473/events","html_url":"https://github.com/pedestal/pedestal/issues/473","id":180715537,"number":473,"title":"url-for docstring for :override parameter","user":{"login":"christianromney","id":5679,"avatar_url":"https://avatars2.githubusercontent.com/u/5679?v=4","gravatar_id":"","url":"https://api.github.com/users/christianromney","html_url":"https://github.com/christianromney","followers_url":"https://api.github.com/users/christianromney/followers","following_url":"https://api.github.com/users/christianromney/following{/other_user}","gists_url":"https://api.github.com/users/christianromney/gists{/gist_id}","starred_url":"https://api.github.com/users/christianromney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianromney/subscriptions","organizations_url":"https://api.github.com/users/christianromney/orgs","repos_url":"https://api.github.com/users/christianromney/repos","events_url":"https://api.github.com/users/christianromney/events{/privacy}","received_events_url":"https://api.github.com/users/christianromney/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-10-03T18:46:51Z","updated_at":"2016-10-03T22:24:46Z","closed_at":"2016-10-03T22:24:46Z","author_association":"CONTRIBUTOR","body":"# Description\n\nThe docstring for `io.pedestal.http.route/url-for-routes` describes the options that can be passed to the returned function (and, by extension, url-for). One of these options is `:override` which is stated to be \"A map of aspects of the matching route to override including any of: `:scheme`, `:host`, `:port`.\" The wording is a bit confusing.\n## Expected Behavior\n\nBased on the description of the `:override` parameter being a map, I would expect to override the scheme, host and port like so:\n\n``` clojure\n(url-for ::foo/page :override {:host \"localhost\" :scheme :http :port 8000} :absolute? true)\n```\n## Actual Behavior\n\nThis fails. The correct syntax omits the `:override` key and places the nested map's elements directly at the top level:\n\n``` clojure\n(url-for ::foo/page :host \"localhost\" :scheme :http :port 8000 :absolute? true)\n```\n## Steps to reproduce\n- Generate a new Pedestal service\n- Require the following namespaces / aliases\n\n``` clojure\n[io.pedestal.http.route :as route]\n[io.pedestal.http.route.definition.table :refer [table-routes]]\n```\n- Put this function in server.clj \n\n``` clojure\n(defn url-for\n  \"Returns a url string for the named route\"\n  [route-name & opts]\n  (let [f (route/url-for-routes (table-routes service/routes))]\n    (apply f route-name opts)))\n```\n- Try the expected / actual examples above at the REPL\n# Environment\n## Operating System (including version).\n\nmacOS Sierra 10.12\n## Your current Leiningen version (`lein --version`)\n\nLeiningen 2.7.1 on Java 1.8.0_40 Java HotSpot(TM) 64-Bit Server VM\n## Pedestal version\n\n0.5.1\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/472","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/472/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/472/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/472/events","html_url":"https://github.com/pedestal/pedestal/issues/472","id":180160411,"number":472,"title":"Unsupported major.minor version","user":{"login":"rjb25","id":12534967,"avatar_url":"https://avatars3.githubusercontent.com/u/12534967?v=4","gravatar_id":"","url":"https://api.github.com/users/rjb25","html_url":"https://github.com/rjb25","followers_url":"https://api.github.com/users/rjb25/followers","following_url":"https://api.github.com/users/rjb25/following{/other_user}","gists_url":"https://api.github.com/users/rjb25/gists{/gist_id}","starred_url":"https://api.github.com/users/rjb25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjb25/subscriptions","organizations_url":"https://api.github.com/users/rjb25/orgs","repos_url":"https://api.github.com/users/rjb25/repos","events_url":"https://api.github.com/users/rjb25/events{/privacy}","received_events_url":"https://api.github.com/users/rjb25/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-09-29T20:54:24Z","updated_at":"2016-09-29T21:10:03Z","closed_at":"2016-09-29T21:10:03Z","author_association":"NONE","body":"# Description\n\nWhen running lein repl I get the following error\n## Expected Behavior\n\nNo error\n## Actual Behavior\n\nerror {\n :cause org/eclipse/jetty/server/Response : Unsupported major.minor version 52.0\n\nAsk for full long error\n## Steps to reproduce\n\nlein new pedestal-service helloworld\ncd helloworld\nlein repl\n# Environment\n\nCommand Line Interface\n## Operating System (including version).\n\nUbuntu 14.04\n## Your current Leiningen version (`lein --version`)\n\nLeiningen 2.6.1\n## Pedestal version\n\n0.5.1\n","score":1.0},{"url":"https://api.github.com/repos/pedestal/pedestal/issues/470","repository_url":"https://api.github.com/repos/pedestal/pedestal","labels_url":"https://api.github.com/repos/pedestal/pedestal/issues/470/labels{/name}","comments_url":"https://api.github.com/repos/pedestal/pedestal/issues/470/comments","events_url":"https://api.github.com/repos/pedestal/pedestal/issues/470/events","html_url":"https://github.com/pedestal/pedestal/issues/470","id":179879012,"number":470,"title":"Unexpected behavior restarting tomcat server via io.pedestal.http/start and io.pedestal.http/stop","user":{"login":"ClassicThunder","id":236009,"avatar_url":"https://avatars1.githubusercontent.com/u/236009?v=4","gravatar_id":"","url":"https://api.github.com/users/ClassicThunder","html_url":"https://github.com/ClassicThunder","followers_url":"https://api.github.com/users/ClassicThunder/followers","following_url":"https://api.github.com/users/ClassicThunder/following{/other_user}","gists_url":"https://api.github.com/users/ClassicThunder/gists{/gist_id}","starred_url":"https://api.github.com/users/ClassicThunder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ClassicThunder/subscriptions","organizations_url":"https://api.github.com/users/ClassicThunder/orgs","repos_url":"https://api.github.com/users/ClassicThunder/repos","events_url":"https://api.github.com/users/ClassicThunder/events{/privacy}","received_events_url":"https://api.github.com/users/ClassicThunder/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-09-28T20:24:32Z","updated_at":"2016-12-21T19:05:09Z","closed_at":"2016-12-21T19:05:09Z","author_association":"NONE","body":"# Description\n## Expected Behavior\n\nWhen `(bootstrap/stop runnable-service)` is called Chrome is unable to establish a connection.\n\n```\nThis site can’t be reached\nlocalhost refused to connect.\n```\n\nWhen `(bootstrap/start runnable-service)` is called Chrome is able to navigate to the defined paths.\n\nI want to be able to start and stop the server without exiting the repl. \n## Actual Behavior\n\nThe first `(bootstrap/stop runnable-service)` results in the browser waiting for a respnse indefinitely and the second  `(bootstrap/start runnable-service)` results in tomcat displaying its standard 404 message at urls that worked previously.\n## Steps to reproduce\n\nUsing the below code\n- Launch the REPL\n- Run the command `(bootstrap/start runnable-service)` the home and about page are reachable via my browser.\n- Run the command `(bootstrap/stop runnable-service)` the browser waits for a response indefinitely.\n- Run the command `(bootstrap/start runnable-service)` the browser returns a the stock tomcat 404 page of the home and about page.\n\n```\n(ns pedestal-refapp.core\n  (:gen-class)\n  (:require [io.pedestal.http :as server]\n            [io.pedestal.http.body-params :as body-params]\n            [io.pedestal.http :as bootstrap]))\n\n(defn about-page\n  [request]\n  {:status 200\n   :body \"about-page\"})\n\n(defn home-page\n  [request]\n  {:status 200\n   :body \"home-page\"})\n\n(def common-interceptors [(body-params/body-params) bootstrap/json-body])\n\n\n(def routes #{[\"/\" :get (conj common-interceptors `home-page)]\n              [\"/about\" :get (conj common-interceptors `about-page)]})\n\n\n(defonce runnable-service (server/create-server\n                           {\n                            :env :prod\n                            ::bootstrap/join? false\n                            ::bootstrap/routes routes\n                            ::bootstrap/type :tomcat\n                            ::bootstrap/port 8080}))\n```\n# Environment\n## Operating System (including version).\n- OS X El Capitan\n## Your current Leiningen version (`lein --version`)\n- Leiningen 2.6.1 on Java 1.8.0_102 Java HotSpot(TM) 64-Bit Server VM\n## Pedestal version\n- 0.5.0\n","score":1.0}]}
0

