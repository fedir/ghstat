HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 14 Apr 2018 20:50:27 GMT
Link: <https://api.github.com/search/issues?q=repo%3Akeystonejs%2Fkeystone+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Akeystonejs%2Fkeystone+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D5A4:148C:22E7CDB:4706723:5AD26992
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 24
X-Ratelimit-Reset: 1523739085
X-Runtime-Rack: 0.409953
X-Xss-Protection: 1; mode=block

8000
{"total_count":1934,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4596","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4596/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4596/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4596/events","html_url":"https://github.com/keystonejs/keystone/issues/4596","id":304728558,"number":4596,"title":"How to pass options to mongoose schema","user":{"login":"DavyBello","id":16988644,"avatar_url":"https://avatars3.githubusercontent.com/u/16988644?v=4","gravatar_id":"","url":"https://api.github.com/users/DavyBello","html_url":"https://github.com/DavyBello","followers_url":"https://api.github.com/users/DavyBello/followers","following_url":"https://api.github.com/users/DavyBello/following{/other_user}","gists_url":"https://api.github.com/users/DavyBello/gists{/gist_id}","starred_url":"https://api.github.com/users/DavyBello/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavyBello/subscriptions","organizations_url":"https://api.github.com/users/DavyBello/orgs","repos_url":"https://api.github.com/users/DavyBello/repos","events_url":"https://api.github.com/users/DavyBello/events{/privacy}","received_events_url":"https://api.github.com/users/DavyBello/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-03-13T11:36:35Z","updated_at":"2018-03-13T11:50:13Z","closed_at":"2018-03-13T11:50:13Z","author_association":"NONE","body":"<!--\r\n  We're trying to keep the issue tracker unpolluted.\r\n\r\n  Please ask questions and support requests on:\r\n  * https://stackoverflow.com/questions/tagged/keystonejs\r\n  * https://gitter.im/keystonejs/keystone\r\n\r\n  New features can be requested and voted upon on:\r\n  * https://productpains.com/product/keystonejs\r\n -->\r\n \r\n### Expected behavior\r\nI'm getting an error \"Unknown modifier: $pushAll MongoError: Unknown modifier: $pushAll\" when updating a document \r\nApparently the issue is resolved in [mongoose v5](https://github.com/Automattic/mongoose/issues/4455) #4589 but the alternative is to pass { usePushEach: true } as a config option when initializing the schema but i can't figure out how to do that in keystone\r\n\r\n\r\n### Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n| Software         | Version\r\n| ---------------- | -------\r\n| Keystone         | 4.0.0-beta.5\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4585","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4585/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4585/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4585/events","html_url":"https://github.com/keystonejs/keystone/issues/4585","id":300936682,"number":4585,"title":"Blank screen on Admin Panel","user":{"login":"vamshi9","id":11611776,"avatar_url":"https://avatars3.githubusercontent.com/u/11611776?v=4","gravatar_id":"","url":"https://api.github.com/users/vamshi9","html_url":"https://github.com/vamshi9","followers_url":"https://api.github.com/users/vamshi9/followers","following_url":"https://api.github.com/users/vamshi9/following{/other_user}","gists_url":"https://api.github.com/users/vamshi9/gists{/gist_id}","starred_url":"https://api.github.com/users/vamshi9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vamshi9/subscriptions","organizations_url":"https://api.github.com/users/vamshi9/orgs","repos_url":"https://api.github.com/users/vamshi9/repos","events_url":"https://api.github.com/users/vamshi9/events{/privacy}","received_events_url":"https://api.github.com/users/vamshi9/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-02-28T08:45:17Z","updated_at":"2018-03-01T11:49:10Z","closed_at":"2018-03-01T11:49:10Z","author_association":"NONE","body":"If I make any further changes in models, I am getting a blank screen in the admin panel but not user panel. But the status shows 200. I am using mlab connection for the database. What would be the possible reason for this?\r\n\r\n**Model.js**\r\n```\r\nvar keystone = require('keystone');\r\n    Types = keystone.Field.Types;\r\n   \r\nvar Teaching = new keystone.List('teaching',{\r\n    autokey : {path : 'slug', from : 'title' , unique : 'true'},\r\n    map : {name : 'title'},\r\n    defaultSort : '-createdAt'\r\n});    \r\n\r\nTeaching.add({\r\n    title : {type : String, required :true},\r\n    course : {type : String},\r\n    professorName : {type : String}\r\n});\r\n\r\n/*virtuals for semester here*/\r\n\r\nTeaching.defaultcolumns = 'title , course , professorName';\r\nTeaching.register();\r\n```\r\n**Keystone.js**\r\n```\r\n\r\nrequire('dotenv').config();\r\n\r\nvar keystone = require('keystone');\r\nvar handlebars = require('express-handlebars');\r\nvar middleware = require('./routes/middleware');\r\n\r\n// if(middleware.userInfo.name.first == \"HOD\"){\r\n// \tconsole.log(\"correct stategy\");\r\n// }\r\n\r\nkeystone.init({\r\n\t'name': 'DMS',\r\n\t'brand': 'DMS',\r\n\r\n\t'sass': 'public',\r\n\t'static': 'public',\r\n\t'favicon': 'public/favicon.ico',\r\n\t'views': 'templates/views',\r\n\t'view engine': '.hbs',\r\n\t'mongo': process.env.MONGO_URI,\r\n\r\n\t'custom engine': handlebars.create({\r\n\t\tlayoutsDir: 'templates/views/layouts',\r\n\t\tpartialsDir: 'templates/views/partials',\r\n\t\tdefaultLayout: 'default',\r\n\t\thelpers: new require('./templates/views/helpers')(),\r\n\t\textname: '.hbs',\r\n\t}).engine,\r\n\r\n\t'emails': 'templates/emails',\r\n\r\n\t'auto update': true,\r\n\t'session': true,\r\n\t'auth': true,\r\n\t'user model': 'User',\r\n});\r\n\r\nkeystone.import('models');\r\n\r\nkeystone.set('admin path','admin');\r\nkeystone.set('locals', {\r\n\t_: require('lodash'),\r\n\tenv: keystone.get('env'),\r\n\tutils: keystone.utils,\r\n\teditable: keystone.content.editable,\r\n});\r\n\r\nkeystone.set('routes', require('./routes'));\r\n\r\nkeystone.set('cloudinary config', process.env.CLOUDINARY_URL);\r\nkeystone.set('cookie secret', process.env.COOKIE_SECRET);\r\n    //keystone.set('mailgun api key', process.env.MANDRILL_API_KEY);\r\n\r\nkeystone.set('nav', {\r\n\tposts: ['posts', 'post-categories'],\r\n\tgalleries: 'galleries',\r\n\tenquiries: 'enquiries',\r\n\tusers: 'users',\r\n\tresearch : 'research',\r\n\tpublications : 'publications',\r\n\tteachingInitiatives : 'teaching'\r\n});\r\n\r\nkeystone.set('signin logo','../images/logo.png');\r\nkeystone.set('signin url','/');\r\nkeystone.set('signin redirect','/');\r\n\r\n// if (!process.env.MAILGUN_API_KEY || !process.env.MAILGUN_DOMAIN) {\r\n// \tconsole.log('----------------------------------------'\r\n// \t+ '\\nWARNING: MISSING MAILGUN CREDENTIALS'\r\n// \t+ '\\n----------------------------------------'\r\n// \t+ '\\nYou have opted into email sending but have not provided'\r\n// \t+ '\\nmailgun credentials. Attempts to send will fail.'\r\n// \t+ '\\n\\nCreate a mailgun account and add the credentials to the .env file to'\r\n// \t+ '\\nset up your mailgun integration');\r\n// }\r\n\r\nkeystone.set('port',7000);\r\nkeystone.start();\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4573","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4573/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4573/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4573/events","html_url":"https://github.com/keystonejs/keystone/issues/4573","id":297254674,"number":4573,"title":"npm install fails with node Docker images","user":{"login":"cvn","id":774864,"avatar_url":"https://avatars3.githubusercontent.com/u/774864?v=4","gravatar_id":"","url":"https://api.github.com/users/cvn","html_url":"https://github.com/cvn","followers_url":"https://api.github.com/users/cvn/followers","following_url":"https://api.github.com/users/cvn/following{/other_user}","gists_url":"https://api.github.com/users/cvn/gists{/gist_id}","starred_url":"https://api.github.com/users/cvn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cvn/subscriptions","organizations_url":"https://api.github.com/users/cvn/orgs","repos_url":"https://api.github.com/users/cvn/repos","events_url":"https://api.github.com/users/cvn/events{/privacy}","received_events_url":"https://api.github.com/users/cvn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-02-14T21:39:42Z","updated_at":"2018-03-01T12:24:52Z","closed_at":"2018-03-01T12:24:52Z","author_association":"CONTRIBUTOR","body":"Hello,\r\n\r\nKeystone 4.0.0-beta.8 has a regression where `npm install keystone` fails inside a `node:slim` Docker container. This issue was introduced by PR #4453, specifically the updated [knox dependency](https://github.com/keystonejs/keystone/blob/v4.0.0-beta.8/package.json#L54). It requires git for installation, which is not included in the production-focused node Docker images.\r\n\r\nWorkaround:\r\n\r\n* add `apt-get install git` to the Dockerfile before `npm install`\r\n\r\nPossible solutions:\r\n\r\n* replace the `keystonejs/knox` dependency with [knox-s3](https://www.npmjs.com/package/knox-s3) (as discussed in Automattic/knox#326)\r\n* publish `keystonejs/knox` to npm\r\n* remove knox altogether, and replace with an alternative like [aws-sdk](https://www.npmjs.com/package/aws-sdk)\r\n\r\nIf using knox-s3 is good enough for now, I'd be happy to submit a PR. Longer term, eliminating knox seems wise.\r\n\r\n@vitalbone, do you have an opinion?\r\n\r\nChad\r\n\r\n---\r\n\r\n### Expected behavior\r\n`npm install keystone` should work when using the `node:slim` Docker image.\r\n\r\n### Actual/Current behavior\r\nIt fails. This is the error with node 9.5.0 and npm 5.6.0.\r\n\r\n    npm ERR! code ENOGIT\r\n    npm ERR! No git binary found in $PATH\r\n    npm ERR! \r\n    npm ERR! Failed using git.\r\n\r\nFor the sake of search indexing, earlier versions of npm also say:\r\n\r\n    npm ERR! not found: git\r\n\r\n### Steps to reproduce the actual/current behavior\r\n\r\n1. Create a Dockerfile:\r\n\r\n        FROM node:slim\r\n        RUN npm install keystone\r\n\r\n2. Build it:\r\n\r\n        docker build .\r\n\r\n### Environment\r\n\r\n| Software         | Version\r\n| ---------------- | -------\r\n| Keystone         | 4.0.0-beta.8\r\n| Node             | 9.5.0\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4571","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4571/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4571/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4571/events","html_url":"https://github.com/keystonejs/keystone/issues/4571","id":296385184,"number":4571,"title":"if condition in models","user":{"login":"vamshi9","id":11611776,"avatar_url":"https://avatars3.githubusercontent.com/u/11611776?v=4","gravatar_id":"","url":"https://api.github.com/users/vamshi9","html_url":"https://github.com/vamshi9","followers_url":"https://api.github.com/users/vamshi9/followers","following_url":"https://api.github.com/users/vamshi9/following{/other_user}","gists_url":"https://api.github.com/users/vamshi9/gists{/gist_id}","starred_url":"https://api.github.com/users/vamshi9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vamshi9/subscriptions","organizations_url":"https://api.github.com/users/vamshi9/orgs","repos_url":"https://api.github.com/users/vamshi9/repos","events_url":"https://api.github.com/users/vamshi9/events{/privacy}","received_events_url":"https://api.github.com/users/vamshi9/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-02-12T14:03:49Z","updated_at":"2018-02-14T11:00:21Z","closed_at":"2018-02-14T11:00:21Z","author_association":"NONE","body":"How to add if condition in Models add field?\r\nEx :- ```Post.add({\r\n             if(true){\r\n                 console.log(\"something goes here\");\r\n             }\r\n          )}```","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4570","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4570/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4570/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4570/events","html_url":"https://github.com/keystonejs/keystone/issues/4570","id":296373973,"number":4570,"title":"How to run REACT.js and Keystone.js togather.","user":{"login":"niro121","id":652893,"avatar_url":"https://avatars1.githubusercontent.com/u/652893?v=4","gravatar_id":"","url":"https://api.github.com/users/niro121","html_url":"https://github.com/niro121","followers_url":"https://api.github.com/users/niro121/followers","following_url":"https://api.github.com/users/niro121/following{/other_user}","gists_url":"https://api.github.com/users/niro121/gists{/gist_id}","starred_url":"https://api.github.com/users/niro121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niro121/subscriptions","organizations_url":"https://api.github.com/users/niro121/orgs","repos_url":"https://api.github.com/users/niro121/repos","events_url":"https://api.github.com/users/niro121/events{/privacy}","received_events_url":"https://api.github.com/users/niro121/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2018-02-12T13:26:24Z","updated_at":"2018-03-06T13:28:57Z","closed_at":"2018-03-06T13:28:57Z","author_association":"NONE","body":"Hi,\r\n\r\nI want to know if we can run REACT custom admin with keystone. As its hard to update Keystone admin we want to use API's and do an operational back end.\r\n\r\nCan we know if this is possible? I can't run both REACT.js and Keystone.js at the same time.\r\n\r\nPlease help.","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4567","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4567/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4567/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4567/events","html_url":"https://github.com/keystonejs/keystone/issues/4567","id":295052229,"number":4567,"title":"Admin UI does not show the list of users when using a custom path","user":{"login":"EternallLight","id":4663690,"avatar_url":"https://avatars1.githubusercontent.com/u/4663690?v=4","gravatar_id":"","url":"https://api.github.com/users/EternallLight","html_url":"https://github.com/EternallLight","followers_url":"https://api.github.com/users/EternallLight/followers","following_url":"https://api.github.com/users/EternallLight/following{/other_user}","gists_url":"https://api.github.com/users/EternallLight/gists{/gist_id}","starred_url":"https://api.github.com/users/EternallLight/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EternallLight/subscriptions","organizations_url":"https://api.github.com/users/EternallLight/orgs","repos_url":"https://api.github.com/users/EternallLight/repos","events_url":"https://api.github.com/users/EternallLight/events{/privacy}","received_events_url":"https://api.github.com/users/EternallLight/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2018-02-07T08:50:01Z","updated_at":"2018-03-01T11:48:53Z","closed_at":"2018-03-01T11:48:53Z","author_association":"NONE","body":"Hello,\r\n\r\nFor security reasons, I would like to change the admin path from /keystone to a custom path. \r\nIt was not hard to find that this functionality is already implemented and `keystone.set('admin path', 'customadminpath');` should do the job. After applying this setting, I noticed that the list pages no longer show the list of items and get frozen with endless progress animation. Inspection in dev tools shows that request to /keystone/api/ (in new case, /customadminpath/api) does not go out. If I make a GET request to /customadminpath/api/... manually, I receive a correct response with the list of items, so it rather seems like the front-end application issue. \r\nI'm slightly familiar and can take a look at this matter. Do you still accept pull request?\r\n\r\nThanks,\r\nAndrey.","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4566","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4566/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4566/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4566/events","html_url":"https://github.com/keystonejs/keystone/issues/4566","id":294701506,"number":4566,"title":" 4.0.0-beta.8 Admin endless loading","user":{"login":"vivien-ps","id":31012345,"avatar_url":"https://avatars1.githubusercontent.com/u/31012345?v=4","gravatar_id":"","url":"https://api.github.com/users/vivien-ps","html_url":"https://github.com/vivien-ps","followers_url":"https://api.github.com/users/vivien-ps/followers","following_url":"https://api.github.com/users/vivien-ps/following{/other_user}","gists_url":"https://api.github.com/users/vivien-ps/gists{/gist_id}","starred_url":"https://api.github.com/users/vivien-ps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vivien-ps/subscriptions","organizations_url":"https://api.github.com/users/vivien-ps/orgs","repos_url":"https://api.github.com/users/vivien-ps/repos","events_url":"https://api.github.com/users/vivien-ps/events{/privacy}","received_events_url":"https://api.github.com/users/vivien-ps/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2018-02-06T10:12:13Z","updated_at":"2018-02-21T12:37:02Z","closed_at":"2018-02-06T12:03:55Z","author_association":"NONE","body":"### Expected behavior\r\nBefore migrating from 4.0.0-beta.5 to 4.0.0-beta.8, my admin pages were loading perfectly.\r\n\r\n### Actual/Current behavior\r\nSince the update the when I go to any page of the admin, (Out of the admin / page),\r\nI have endless loading and no errors in the console.\r\n\r\n### Environment\r\n\r\n| Software         | Version\r\n| --------------- | -------\r\n| Keystone        |  4.0.0-beta.8\r\n| Node              |  9.4.0\r\n| Npm               | 5.6.0\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4562","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4562/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4562/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4562/events","html_url":"https://github.com/keystonejs/keystone/issues/4562","id":293948609,"number":4562,"title":"ReferenceError: self is not defined","user":{"login":"Twansparant","id":2317592,"avatar_url":"https://avatars0.githubusercontent.com/u/2317592?v=4","gravatar_id":"","url":"https://api.github.com/users/Twansparant","html_url":"https://github.com/Twansparant","followers_url":"https://api.github.com/users/Twansparant/followers","following_url":"https://api.github.com/users/Twansparant/following{/other_user}","gists_url":"https://api.github.com/users/Twansparant/gists{/gist_id}","starred_url":"https://api.github.com/users/Twansparant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Twansparant/subscriptions","organizations_url":"https://api.github.com/users/Twansparant/orgs","repos_url":"https://api.github.com/users/Twansparant/repos","events_url":"https://api.github.com/users/Twansparant/events{/privacy}","received_events_url":"https://api.github.com/users/Twansparant/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-02-02T16:37:24Z","updated_at":"2018-02-05T12:07:08Z","closed_at":"2018-02-05T12:07:08Z","author_association":"NONE","body":"Hi there,\r\n\r\nNot sure if this is the right place to ask this, but I'm using React as frontend and I'm trying to implement a [Mapbox GL](https://github.com/mapbox/mapbox-gl-js) map. But whenever I'm trying to use Mapbox as described [here](https://blog.mapbox.com/mapbox-gl-js-react-764da6cc074a):\r\n\r\n```jsx\r\nimport React from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\n```\r\nI get the error:\r\n```\r\nReferenceError: self is not defined\r\n    at Object.255 (/path/to/my/keystone/node_modules/mapbox-gl/dist/src/util/browser/window.js:4:1)\r\n```\r\nIn that file **self** is defined like this:\r\n`module.exports = (self: Window);`\r\n\r\n### Expected behavior\r\nThe Mapbox component should render in my react frontend\r\n\r\n### Actual/Current behavior\r\nMy component is not rendered at all and gives the error `self is not defined` on the frontend\r\n\r\n### Steps to reproduce the actual/current behavior\r\nTry to import mapboxgl and render a map in react\r\n\r\nIf I clone and use [this basic example](https://github.com/mapbox/mapbox-react-examples/tree/master/basic) it works fine.\r\n\r\n### Environment\r\n\r\n| Software         | Version\r\n| ---------------- | -------\r\n| Keystone         | 4.0.0-beta.5\r\n| Node             | 9.3.0\r\n\r\nI'm not really a Node expert, but it has got something to do how node is run in Keystone?\r\nAny help is welcome, thanks!","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4561","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4561/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4561/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4561/events","html_url":"https://github.com/keystonejs/keystone/issues/4561","id":293587835,"number":4561,"title":"I can't log in in admin area when I changed user model name","user":{"login":"myadzel","id":873432,"avatar_url":"https://avatars0.githubusercontent.com/u/873432?v=4","gravatar_id":"","url":"https://api.github.com/users/myadzel","html_url":"https://github.com/myadzel","followers_url":"https://api.github.com/users/myadzel/followers","following_url":"https://api.github.com/users/myadzel/following{/other_user}","gists_url":"https://api.github.com/users/myadzel/gists{/gist_id}","starred_url":"https://api.github.com/users/myadzel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myadzel/subscriptions","organizations_url":"https://api.github.com/users/myadzel/orgs","repos_url":"https://api.github.com/users/myadzel/repos","events_url":"https://api.github.com/users/myadzel/events{/privacy}","received_events_url":"https://api.github.com/users/myadzel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-02-01T16:08:47Z","updated_at":"2018-02-02T07:38:01Z","closed_at":"2018-02-02T07:38:01Z","author_association":"NONE","body":"with message:\r\n\r\n`The email and password you entered are not valid.`","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4557","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4557/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4557/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4557/events","html_url":"https://github.com/keystonejs/keystone/issues/4557","id":291465564,"number":4557,"title":"Unknown Keystone List ","user":{"login":"vamshi9","id":11611776,"avatar_url":"https://avatars3.githubusercontent.com/u/11611776?v=4","gravatar_id":"","url":"https://api.github.com/users/vamshi9","html_url":"https://github.com/vamshi9","followers_url":"https://api.github.com/users/vamshi9/followers","following_url":"https://api.github.com/users/vamshi9/following{/other_user}","gists_url":"https://api.github.com/users/vamshi9/gists{/gist_id}","starred_url":"https://api.github.com/users/vamshi9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vamshi9/subscriptions","organizations_url":"https://api.github.com/users/vamshi9/orgs","repos_url":"https://api.github.com/users/vamshi9/repos","events_url":"https://api.github.com/users/vamshi9/events{/privacy}","received_events_url":"https://api.github.com/users/vamshi9/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-01-25T06:37:51Z","updated_at":"2018-01-30T07:06:45Z","closed_at":"2018-01-30T07:06:45Z","author_association":"NONE","body":"<!--\r\n  We're trying to keep the issue tracker unpolluted.\r\n\r\n  Please ask questions and support requests on:\r\n  * https://stackoverflow.com/questions/tagged/keystonejs\r\n  * https://gitter.im/keystonejs/keystone\r\n\r\n  New features can be requested and voted upon on:\r\n  * https://productpains.com/product/keystonejs\r\n -->\r\n \r\n### Expected behavior\r\n<!-- If you're describing a bug, tell us what should happen -->\r\n<!-- If you're suggesting a change/improvement, tell us how it should work -->\r\n\r\nWhen I click the research button on the front end of user panel it is supposed to load the page without any errors.\r\n\r\n### Actual/Current behavior\r\n<!-- If you're describing a bug, tell us what happens instead of the expected behavior -->\r\n<!-- If you're suggesting a change/improvement, explain the difference from current behavior -->\r\n\r\n![unknownkeystonelisterror](https://user-images.githubusercontent.com/11611776/35374004-1138a2fc-01c7-11e8-80fc-bdaa86e10814.PNG)\r\n\r\n## Node             |    v8.6.0\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4556","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4556/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4556/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4556/events","html_url":"https://github.com/keystonejs/keystone/issues/4556","id":291094661,"number":4556,"title":"能不能修改图片上传服务商？Can you modify the picture uploads？","user":{"login":"chenyinlong","id":16054968,"avatar_url":"https://avatars2.githubusercontent.com/u/16054968?v=4","gravatar_id":"","url":"https://api.github.com/users/chenyinlong","html_url":"https://github.com/chenyinlong","followers_url":"https://api.github.com/users/chenyinlong/followers","following_url":"https://api.github.com/users/chenyinlong/following{/other_user}","gists_url":"https://api.github.com/users/chenyinlong/gists{/gist_id}","starred_url":"https://api.github.com/users/chenyinlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenyinlong/subscriptions","organizations_url":"https://api.github.com/users/chenyinlong/orgs","repos_url":"https://api.github.com/users/chenyinlong/repos","events_url":"https://api.github.com/users/chenyinlong/events{/privacy}","received_events_url":"https://api.github.com/users/chenyinlong/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-01-24T06:08:11Z","updated_at":"2018-01-25T04:26:02Z","closed_at":"2018-01-25T04:25:55Z","author_association":"NONE","body":"因为我在中国，所以我想知道是不是可以修改成为本地化的图片服务商，比如：七牛云（https://www.qiniu.com）？\r\nBecause I'm in China, I want to know if I can modify it to be a localised picture service provider，for example 七牛云（https://www.qiniu.com）？\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4552","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4552/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4552/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4552/events","html_url":"https://github.com/keystonejs/keystone/issues/4552","id":289959379,"number":4552,"title":"After creating corporate page this kind of error was showing while rest of the pages was fine.  ","user":{"login":"Shashank908","id":22529888,"avatar_url":"https://avatars0.githubusercontent.com/u/22529888?v=4","gravatar_id":"","url":"https://api.github.com/users/Shashank908","html_url":"https://github.com/Shashank908","followers_url":"https://api.github.com/users/Shashank908/followers","following_url":"https://api.github.com/users/Shashank908/following{/other_user}","gists_url":"https://api.github.com/users/Shashank908/gists{/gist_id}","starred_url":"https://api.github.com/users/Shashank908/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shashank908/subscriptions","organizations_url":"https://api.github.com/users/Shashank908/orgs","repos_url":"https://api.github.com/users/Shashank908/repos","events_url":"https://api.github.com/users/Shashank908/events{/privacy}","received_events_url":"https://api.github.com/users/Shashank908/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-01-19T12:25:00Z","updated_at":"2018-02-06T07:00:09Z","closed_at":"2018-02-06T07:00:09Z","author_association":"NONE","body":"Error thrown for request: `/corporate`\r\n```\r\nTypeError: Cannot read property 'length' of undefined\r\n    at async.eachSeries.asyncFinished (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\grappling-hook\\index.js:226:19)\r\n    at iterate (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\grappling-hook\\node_modules\\async\\lib\\async.js:146:13)\r\n    at Object.async.eachSeries (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\grappling-hook\\node_modules\\async\\lib\\async.js:162:9)\r\n    at iterateAsyncMiddleware (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\grappling-hook\\index.js:225:8)\r\n    at C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\grappling-hook\\index.js:585:5\r\n    at dezalgofy (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\grappling-hook\\index.js:192:2)\r\n    at Keystone.callHook (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\grappling-hook\\index.js:584:4)\r\n    at C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\keystone\\server\\createApp.js:122:12\r\n    at Layer.handle [as handle_request] (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\express\\lib\\router\\layer.js:95:5)\r\n    at trim_prefix (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\express\\lib\\router\\index.js:312:13)\r\n    at C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\express\\lib\\router\\index.js:280:7\r\n    at Function.process_params (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\express\\lib\\router\\index.js:330:12)\r\n    at next (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_mod
8000
ules\\express\\lib\\router\\index.js:271:10)\r\n    at frameGuard (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\keystone\\lib\\security\\frameGuard.js:20:3)\r\n    at Layer.handle [as handle_request] (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\express\\lib\\router\\layer.js:95:5)\r\n    at trim_prefix (C:\\Users\\Shashank Shekhar\\Desktop\\keystone\\node_modules\\express\\lib\\router\\index.js:312:13)\r\n```","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4551","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4551/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4551/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4551/events","html_url":"https://github.com/keystonejs/keystone/issues/4551","id":288424563,"number":4551,"title":"Keystone and the future","user":{"login":"autoboxer","id":2757601,"avatar_url":"https://avatars3.githubusercontent.com/u/2757601?v=4","gravatar_id":"","url":"https://api.github.com/users/autoboxer","html_url":"https://github.com/autoboxer","followers_url":"https://api.github.com/users/autoboxer/followers","following_url":"https://api.github.com/users/autoboxer/following{/other_user}","gists_url":"https://api.github.com/users/autoboxer/gists{/gist_id}","starred_url":"https://api.github.com/users/autoboxer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/autoboxer/subscriptions","organizations_url":"https://api.github.com/users/autoboxer/orgs","repos_url":"https://api.github.com/users/autoboxer/repos","events_url":"https://api.github.com/users/autoboxer/events{/privacy}","received_events_url":"https://api.github.com/users/autoboxer/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":85,"created_at":"2018-01-14T17:24:39Z","updated_at":"2018-04-10T17:42:15Z","closed_at":"2018-03-01T12:42:41Z","author_association":"MEMBER","body":"Activity on all channels related to this repo ( Slack, Gitter, and here ) seem to have dropped off a while ago, picked up for a brief moment a few months ago, then dropped off again.  There are many people in the community who are reliant on this repo for projects they're working on ( myself included, I just spent almost 4 years building a 30,000+ line codebase for a local adoption agency on Keystone ), and we need to know how to proceed with our work related to this repo.  If this is still active, please let us know and start communicating, there are many people who need to know.","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4550","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4550/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4550/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4550/events","html_url":"https://github.com/keystonejs/keystone/issues/4550","id":287702347,"number":4550,"title":"In front page, I need to edit 'data' in js, but how can I get the 'data', in front template,  you can use it like 'data.id', but in js, I can not get 'data'","user":{"login":"xiaosunJessica","id":17615820,"avatar_url":"https://avatars0.githubusercontent.com/u/17615820?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaosunJessica","html_url":"https://github.com/xiaosunJessica","followers_url":"https://api.github.com/users/xiaosunJessica/followers","following_url":"https://api.github.com/users/xiaosunJessica/following{/other_user}","gists_url":"https://api.github.com/users/xiaosunJessica/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaosunJessica/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaosunJessica/subscriptions","organizations_url":"https://api.github.com/users/xiaosunJessica/orgs","repos_url":"https://api.github.com/users/xiaosunJessica/repos","events_url":"https://api.github.com/users/xiaosunJessica/events{/privacy}","received_events_url":"https://api.github.com/users/xiaosunJessica/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-01-11T08:36:02Z","updated_at":"2018-01-11T08:58:46Z","closed_at":"2018-01-11T08:58:46Z","author_association":"NONE","body":"<!--\r\n  We're trying to keep the issue tracker unpolluted.\r\n\r\n  Please ask questions and support requests on:\r\n  * https://stackoverflow.com/questions/tagged/keystonejs\r\n  * https://gitter.im/keystonejs/keystone\r\n\r\n  New features can be requested and voted upon on:\r\n  * https://productpains.com/product/keystonejs\r\n -->\r\n \r\n### Expected behavior\r\n<!-- If you're describing a bug, tell us what should happen -->\r\n<!-- If you're suggesting a change/improvement, tell us how it should work -->\r\n\r\n\r\n\r\n### Actual/Current behavior\r\n<!-- If you're describing a bug, tell us what happens instead of the expected behavior -->\r\n<!-- If you're suggesting a change/improvement, explain the difference from current behavior -->\r\n\r\n\r\n\r\n### Steps to reproduce the actual/current behavior\r\n<!-- If you're describing a bug, tell us what steps to take to reproduce your bug -->\r\n<!-- If you'resuggesting a change/improvement, explain how to reproduce the current behavior -->\r\n\r\n\r\n\r\n### Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n| Software         | Version\r\n| ---------------- | -------\r\n| Keystone         | \r\n| Node             | \r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4543","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4543/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4543/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4543/events","html_url":"https://github.com/keystonejs/keystone/issues/4543","id":286585360,"number":4543,"title":"Use template-literal instead of EJS","user":{"login":"Drulac","id":17110977,"avatar_url":"https://avatars2.githubusercontent.com/u/17110977?v=4","gravatar_id":"","url":"https://api.github.com/users/Drulac","html_url":"https://github.com/Drulac","followers_url":"https://api.github.com/users/Drulac/followers","following_url":"https://api.github.com/users/Drulac/following{/other_user}","gists_url":"https://api.github.com/users/Drulac/gists{/gist_id}","starred_url":"https://api.github.com/users/Drulac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Drulac/subscriptions","organizations_url":"https://api.github.com/users/Drulac/orgs","repos_url":"https://api.github.com/users/Drulac/repos","events_url":"https://api.github.com/users/Drulac/events{/privacy}","received_events_url":"https://api.github.com/users/Drulac/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-01-07T17:34:57Z","updated_at":"2018-01-22T12:03:05Z","closed_at":"2018-01-22T12:03:05Z","author_association":"NONE","body":"[Template Literal](https://github.com/Drulac/template-literal) is fastest, smallest and simplest template engine, because it use JS's literal template feature,\r\n\r\nIt's  55 times faster than EJS, and it also use less CPU and RAM ressources, so it may be a good idea to use it instead of EJS 😀","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4542","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4542/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4542/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4542/events","html_url":"https://github.com/keystonejs/keystone/issues/4542","id":286499131,"number":4542,"title":"When is the next release?","user":{"login":"VinayaSathyanarayana","id":16976677,"avatar_url":"https://avatars2.githubusercontent.com/u/16976677?v=4","gravatar_id":"","url":"https://api.github.com/users/VinayaSathyanarayana","html_url":"https://github.com/VinayaSathyanarayana","followers_url":"https://api.github.com/users/VinayaSathyanarayana/followers","following_url":"https://api.github.com/users/VinayaSathyanarayana/following{/other_user}","gists_url":"https://api.github.com/users/VinayaSathyanarayana/gists{/gist_id}","starred_url":"https://api.github.com/users/VinayaSathyanarayana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VinayaSathyanarayana/subscriptions","organizations_url":"https://api.github.com/users/VinayaSathyanarayana/orgs","repos_url":"https://api.github.com/users/VinayaSathyanarayana/repos","events_url":"https://api.github.com/users/VinayaSathyanarayana/events{/privacy}","received_events_url":"https://api.github.com/users/VinayaSathyanarayana/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-06T16:54:13Z","updated_at":"2018-01-22T13:14:01Z","closed_at":"2018-01-22T13:14:01Z","author_association":"NONE","body":"When is the next release planned?","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4532","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4532/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4532/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4532/events","html_url":"https://github.com/keystonejs/keystone/issues/4532","id":281555935,"number":4532,"title":"Can't enter admin (CSRF error) when setting cookie.secure = true","user":{"login":"Norbz","id":6388929,"avatar_url":"https://avatars3.githubusercontent.com/u/6388929?v=4","gravatar_id":"","url":"https://api.github.com/users/Norbz","html_url":"https://github.com/Norbz","followers_url":"https://api.github.com/users/Norbz/followers","following_url":"https://api.github.com/users/Norbz/following{/other_user}","gists_url":"https://api.github.com/users/Norbz/gists{/gist_id}","starred_url":"https://api.github.com/users/Norbz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Norbz/subscriptions","organizations_url":"https://api.github.com/users/Norbz/orgs","repos_url":"https://api.github.com/users/Norbz/repos","events_url":"https://api.github.com/users/Norbz/events{/privacy}","received_events_url":"https://api.github.com/users/Norbz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-12-12T22:13:14Z","updated_at":"2017-12-14T11:10:55Z","closed_at":"2017-12-14T11:10:54Z","author_association":"NONE","body":"### Expected behavior\r\nWe should be able to set the express-session option 'secure' to true without messing with Keystone log in.\r\n \r\n\r\n### Actual/Current behavior\r\nset up Keystone with the following options :\r\n\r\n```\r\n  'trust proxy': true,\r\n  'session options': {\r\n    cookie: { maxAge: 600000000, httpOnly: true, secure: true },\r\n  },\r\n```\r\n\r\nIn some controller :\r\n```\r\n// Doesn't works : pass is false\r\nconst pass = keystone.security.csrf.validate(req);\r\nconsole.info(pass); //false\r\n```\r\n\r\nWhen trying to log in the admin : receiving a **503 error : CSRF error**\r\n\r\n\r\n### Steps to reproduce the actual/current behavior\r\nBehind Apache or nginx as a reverse proxy, providing HTTPS support :\r\n\r\n1) Set secure option to express session as above.\r\n2) try to log into keystone\r\n\r\n### Environment\r\nReversed proxy made with apache2, mod_proxy, mod_proxy_http. \r\n\r\n| Software         | Version\r\n| ---------------- | -------\r\n| Keystone         | 4.0.0-rc7\r\n| Node             | 8.8.0\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4528","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4528/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4528/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4528/events","html_url":"https://github.com/keystonejs/keystone/issues/4528","id":278846758,"number":4528,"title":"Setting up custom middleware for Keystone 4","user":{"login":"camslabosz","id":29443292,"avatar_url":"https://avatars2.githubusercontent.com/u/29443292?v=4","gravatar_id":"","url":"https://api.github.com/users/camslabosz","html_url":"https://github.com/camslabosz","followers_url":"https://api.github.com/users/camslabosz/followers","following_url":"https://api.github.com/users/camslabosz/following{/other_user}","gists_url":"https://api.github.com/users/camslabosz/gists{/gist_id}","starred_url":"https://api.github.com/users/camslabosz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camslabosz/subscriptions","organizations_url":"https://api.github.com/users/camslabosz/orgs","repos_url":"https://api.github.com/users/camslabosz/repos","events_url":"https://api.github.com/users/camslabosz/events{/privacy}","received_events_url":"https://api.github.com/users/camslabosz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-12-04T01:47:25Z","updated_at":"2017-12-05T06:16:13Z","closed_at":"2017-12-05T06:16:13Z","author_association":"NONE","body":"Is there a simple way to setup custom middleware for Keystone 4?\r\n\r\nI am using Keystone as a framework for a RESTful API. Ideally I'd like to use JWT tokens for user authentication because of use for a mobile app. \r\n\r\nWhile this question is specific to JWT, more generally, it would be good to know how to hook into the middleware to leverage custom per/post methods. \r\n\r\n/routes/index.js\r\n\r\n`keystone.pre('jwt', middleware.jwt);`\r\n\r\n/routes/middleware.js\r\n```\r\nexports.jwt = function (req, res, next) {\r\n\t...\r\n        next()\r\n};\r\n```\r\nI receive the following error\r\n\r\n```\r\nif (cache.opts.strict) throw new Error('Hooks for ' + hook + ' are not supported.');\r\nError: Hooks for pre:jwt are not supported.\r\n```\r\n\r\n| Software         | Version\r\n| ---------------- | -------\r\n| Keystone         |  4\r\n| Node             |  7.1.0\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4511","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4511/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4511/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4511/events","html_url":"https://github.com/keystonejs/keystone/issues/4511","id":273918889,"number":4511,"title":"node 8.9.1 support","user":{"login":"sarkistlt","id":5773343,"avatar_url":"https://avatars1.githubusercontent.com/u/5773343?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkistlt","html_url":"https://github.com/sarkistlt","followers_url":"https://api.github.com/users/sarkistlt/followers","following_url":"https://api.github.com/users/sarkistlt/following{/other_user}","gists_url":"https://api.github.com/users/sarkistlt/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkistlt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkistlt/subscriptions","organizations_url":"https://api.github.com/users/sarkistlt/orgs","repos_url":"https://api.github.com/users/sarkistlt/repos","events_url":"https://api.github.com/users/sarkistlt/events{/privacy}","received_events_url":"https://api.github.com/users/sarkistlt/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-14T19:45:35Z","updated_at":"2017-11-15T23:39:57Z","closed_at":"2017-11-15T23:39:57Z","author_association":"NONE","body":"Any updates on this one? It just hanging the process.\r\nBelow is the log from `DEBUG=keystone:* node dist/server/keystone`\r\n\r\n```cli\r\nexpress-session deprecated undefined saveUninitialized option; provide saveUninitialized option dist/server/app/index.js:56:48\r\n  keystone:core:init initializing app +0ms\r\n  keystone:core:options settings options +1ms\r\n  keystone:core:options setting session for auth +0ms\r\n{ Error: Cannot find module '../build/Release/bson'\r\n    at Function.Module._resolveFilename (module.js:536:15)\r\n    at Function.Module._load (module.js:466:25)\r\n    at Module.require (module.js:579:17)\r\n    at require (internal/module.js:11:18)\r\n    at Object.<anonymous> (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/node_modules/bson/ext/index.js:15:10)\r\n    at Module._compile (module.js:635:30)\r\n    at Object.Module._extensions..js (module.js:646:10)\r\n    at Module.load (module.js:554:32)\r\n    at tryModuleLoad (module.js:497:12)\r\n    at Function.Module._load (module.js:489:3)\r\n    at Module.require (module.js:579:17)\r\n    at require (internal/module.js:11:18)\r\n    at Object.<anonymous> (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/node_modules/bson/lib/bson/index.js:3:24)\r\n    at Module._compile (module.js:635:30)\r\n    at Object.Module._extensions..js (module.js:646:10)\r\n    at Module.load (module.js:554:32)\r\n    at tryModuleLoad (module.js:497:12)\r\n    at Function.Module._load (module.js:489:3)\r\n    at Module.require (module.js:579:17)\r\n    at require (internal/module.js:11:18)\r\n    at Object.<anonymous> (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/node_modules/mongodb/lib/mongodb/index.js:2:22)\r\n    at Module._compile (module.js:635:30)\r\n    at Object.Module._extensions..js (module.js:646:10)\r\n    at Module.load (module.js:554:32)\r\n    at tryModuleLoad (module.js:497:12)\r\n    at Function.Module._load (module.js:489:3)\r\n    at Module.require (module.js:579:17)\r\n    at require (internal/module.js:11:18)\r\n    at Object.<anonymous> (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/node_modules/mongoose/lib/utils.js:5:16)\r\n    at Module._compile (module.js:635:30)\r\n    at Object.Module._extensions..js (module.js:646:10)\r\n    at Module.load (module.js:554:32)\r\n    at tryModuleLoad (module.js:497:12)\r\n    at Function.Module._load (module.js:489:3)\r\n    at Module.require (module.js:579:17)\r\n    at require (internal/module.js:11:18)\r\n    at Object.<anonymous> (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/node_modules/mongoose/lib/schema.js:7:13)\r\n    at Module._compile (module.js:635:30)\r\n    at Object.Module._extensions..js (module.js:646:10)\r\n    at Module.load (module.js:554:32)\r\n    at tryModuleLoad (module.js:497:12)\r\n    at Function.Module._load (module.js:489:3)\r\n    at Module.require (module.js:579:17)\r\n    at require (internal/module.js:11:18)\r\n    at Object.<anonymous> (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/node_modules/mongoose/lib/index.js:7:14)\r\n    at Module._compile (module.js:635:30)\r\n    at Object.Module._extensions..js (module.js:646:10)\r\n    at Module.load (module.js:554:32)\r\n    at tryModuleLoad (module.js:497:12)\r\n    at Function.Module._load (module.js:489:3)\r\n    at Module.require (module.js:579:17)\r\n    at require (internal/module.js:11:18)\r\n    at Object.<anonymous> (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/node_modules/mongoose/index.js:7:18)\r\n    at Module._compile (module.js:635:30)\r\n    at Object.Module._extensions..js (module.js:646:10)\r\n    at Module.load (module.js:554:32)\r\n    at tryModuleLoad (module.js:497:12)\r\n    at Function.Module._load (module.js:489:3)\r\n    at Module.require (module.js:579:17)\r\n    at require (internal/module.js:11:18)\r\n    at Keystone.init (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/node_modules/keystone/lib/core/init.js:27:24)\r\n    at Object.<anonymous> (/Users/sarkisarutiunian/Projects/Coda/hum/store-front/dist/server/keystone.js:45:20)\r\n    at Module._compile (module.js:635:30)\r\n    at Object.Module._extensions..js (module.js:646:10)\r\n    at Module.load (module.js:554:32)\r\n    at tryModuleLoad (module.js:497:12)\r\n    at Function.Module._load (module.js:489:3)\r\n    at Function.Module.runMain (module.js:676:10)\r\n    at startup (bootstrap_node.js:187:16)\r\n    at bootstrap_node.js:608:3 code: 'MODULE_NOT_FOUND' }\r\njs-bson: Failed to load c++ bson extension, using pure JS version\r\n  keystone:core:options setting nav +126ms\r\n  keystone:core:initNav init nav +0ms\r\n  keystone:core:importer importing  ./views +1ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer importing  ./views/account +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./views/checkout +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./views/general +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./views/partials +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./views/popups +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +1ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer importing  ./controllers +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./controllers/account +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +2ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./controllers/cart +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./controllers/checkout +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./controllers/partials +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./controllers/popups +1ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer importing  ./controllers/quiz +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +1ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer recur +0ms\r\n  keystone:core:importer cannot require  .map +0ms\r\n  keystone:core:start mount the express app +12ms\r\n  keystone:core:mount mounting +1ms\r\n  keystone:core:mount adding request logger +1ms\r\n  keystone:core:mount enabling frame guard +2ms\r\n  keystone:core:mount adding keystone routes to express app +1ms\r\n  keystone:core:routes setting keystone Admin Route +13ms\r\n  keystone:core:routes setting cloudinary api +1ms\r\n  keystone:core:mount configuring app routes +10ms\r\n  keystone:core:mount connecting to mongo +5ms\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4510","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4510/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4510/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4510/events","html_url":"https://github.com/keystonejs/keystone/issues/4510","id":273606437,"number":4510,"title":"Cannot read property 'expandColumns' of undefined","user":{"login":"kilakewe","id":6761186,"avatar_url":"https://avatars0.githubusercontent.com/u/6761186?v=4","gravatar_id":"","url":"https://api.github.com/users/kilakewe","html_url":"https://github.com/kilakewe","followers_url":"https://api.github.com/users/kilakewe/followers","following_url":"https://api.github.com/users/kilakewe/following{/other_user}","gists_url":"https://api.github.com/users/kilakewe/gists{/gist_id}","starred_url":"https://api.github.com/users/kilakewe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kilakewe/subscriptions","organizations_url":"https://api.github.com/users/kilakewe/orgs","repos_url":"https://api.github.com/users/kilakewe/repos","events_url":"https://api.github.com/users/kilakewe/events{/privacy}","received_events_url":"https://api.github.com/users/kilakewe/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-13T22:50:10Z","updated_at":"2017-11-14T08:40:42Z","closed_at":"2017-11-14T08:40:42Z","author_association":"NONE","body":"### Expected behavior\r\nLoad the Order record and display all the child orderItems.\r\n\r\n\r\n\r\n### Actual/Current behavior\r\nJS throws an error of _Cannot read property 'expandColumns' of undefined_\r\n\r\n\r\n\r\n### Steps to reproduce the actual/current behaviour\r\n#### Order Modal\r\n`var keystone = require('keystone'),\r\n\tTypes = keystone.Field.Types;\r\n\r\nvar Order = new keystone.List('Order', {\r\n\tdefaultSort: '-createdAt',\r\n\tmap: { name: 'name' },\r\n\ttrack: {\r\n\t\tcreatedAt: true,\r\n\t\tcreatedBy: true,\r\n\t\tupdatedAt: true,\r\n\t\tupdatedBy: true,\r\n\t},\r\n});\r\n\r\nOrder.add({\r\n\tname: { type: String, label: 'Order ID', required: true, initial: true },\r\n\tcustomer: {\r\n\t\tID: { type: String, required: true, initial: true },\r\n\t\tname: { type
8000
: String, required: true, initial: true },\r\n\t},\r\n});\r\nOrder.defaultColumns = 'name';\r\nOrder.relationship({ ref: 'OrderItem', refPath: 'order', path: 'items' });\r\n\r\nOrder.register();`\r\n\r\n#### OrderItem Modal\r\n\r\n`var keystone = require('keystone'),\r\n\tTypes = keystone.Field.Types;\r\n\r\nvar OrderItems = new keystone.List('OrderItems', {\r\n\tautokey: { path: 'slug', from: '_id', unique: true },\r\n\tmap: { name: 'name' },\r\n\tdefaultSort: '-createdAt',\r\n\ttrack: {\r\n\t\tcreatedAt: true,\r\n\t\tcreatedBy: true,\r\n\t\tupdatedAt: true,\r\n\t\tupdatedBy: true,\r\n\t},\r\n});\r\n\r\nOrderItems.add({\r\n\tname: { type: String, required: true, initial: true },\r\n\torder: { type: Types.Relationship, ref: 'Order' },\r\n});\r\n\r\nOrderItems.defaultColumns = 'name, createdAt, updatedAt';\r\n\r\nOrderItems.register();`\r\n\r\n### Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n` Node: 8.2.1\r\n\r\n \"name\": \"Project\",\r\n  \"version\": \"0.0.0\",\r\n  \"private\": true,\r\n  \"dependencies\": {\r\n    \"async\": \"^2.6.0\",\r\n    \"connect-mongo\": \"^2.0.0\",\r\n    \"dotenv\": \"^4.0.0\",\r\n    \"keystone\": \"^4.0.0-beta.7\",\r\n    \"keystone-email\": \"^1.0.5\",\r\n    \"lodash\": \"^4.17.4\",\r\n    \"moment-business-days\": \"^1.0.6\",\r\n    \"nodemailer\": \"^4.4.0\",\r\n    \"pug\": \"^2.0.0-rc.4\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"eslint\": \"3.15.0\",\r\n    \"eslint-config-keystone\": \"3.0.0\",\r\n    \"eslint-plugin-react\": \"^5.1.1\"\r\n  },\r\n  \"scripts\": {\r\n    \"lint\": \"eslint .\",\r\n    \"start\": \"node keystone.js\"\r\n  }\r\n}`\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4506","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4506/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4506/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4506/events","html_url":"https://github.com/keystonejs/keystone/issues/4506","id":273239297,"number":4506,"title":"E11000 duplicate key error collection","user":{"login":"oliverbenns","id":1992355,"avatar_url":"https://avatars1.githubusercontent.com/u/1992355?v=4","gravatar_id":"","url":"https://api.github.com/users/oliverbenns","html_url":"https://github.com/oliverbenns","followers_url":"https://api.github.com/users/oliverbenns/followers","following_url":"https://api.github.com/users/oliverbenns/following{/other_user}","gists_url":"https://api.github.com/users/oliverbenns/gists{/gist_id}","starred_url":"https://api.github.com/users/oliverbenns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oliverbenns/subscriptions","organizations_url":"https://api.github.com/users/oliverbenns/orgs","repos_url":"https://api.github.com/users/oliverbenns/repos","events_url":"https://api.github.com/users/oliverbenns/events{/privacy}","received_events_url":"https://api.github.com/users/oliverbenns/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-12T15:35:34Z","updated_at":"2017-11-12T16:28:43Z","closed_at":"2017-11-12T16:28:43Z","author_association":"NONE","body":"### Expected behavior\r\nUpdates to populate database correctly if no database exists.\r\n\r\n### Actual/Current behavior\r\nEven if database already exists, updates script runs and fails with bug `E11000 duplicate key error collection`. Deleting the database with mongo (`db.dropDatabase();`) still creates the error.\r\n\r\nThe other model updates data appear to work correctly. Not only that, they also add the same again, resulting in loads of duplicates...\r\n\r\n### Environment\r\nThe updates script runs correctly on my Mac machine. But my Digital Ocean Ubuntu server fails. Both running Node `8.3.0`.\r\n\r\nUser model:\r\n\r\n```\r\nvar keystone = require('keystone');\r\nvar Types = keystone.Field.Types;\r\n\r\n/**\r\n * User Model\r\n * ==========\r\n */\r\nvar User = new keystone.List('User');\r\n\r\nUser.add({\r\n\tname: { type: Types.Name, required: true, index: true },\r\n\temail: { type: Types.Email, initial: true, required: true, unique: true, index: true },\r\n\tpassword: { type: Types.Password, initial: true, required: true },\r\n}, 'Permissions', {\r\n\tisAdmin: { type: Boolean, label: 'Can access Keystone', index: true },\r\n});\r\n\r\n// Provide access to Keystone\r\nUser.schema.virtual('canAccessKeystone').get(function () {\r\n\treturn this.isAdmin;\r\n});\r\n\r\n\r\n/**\r\n * Registration\r\n */\r\nUser.defaultColumns = 'name, email, isAdmin';\r\nUser.register();\r\n\r\n```\r\n\r\nFixtures:\r\n`0.0.1.js`:\r\n```\r\nconst User = [\r\n\t{\r\n\t\t'name.first': 'Admin',\r\n\t\t'name.last': 'User',\r\n\t\t'email': 'user1@user1.com',\r\n\t\t'password': 'redacted',\r\n\t\t'isAdmin': true,\r\n\t},\r\n\t{\r\n\t\t'name.first': 'Second',\r\n\t\t'name.last': '',\r\n\t\t'email': 'user2@user2.com',\r\n\t\t'password': 'redacted',\r\n\t\t'isAdmin': true,\r\n\t},\r\n];\r\n\r\nexports.create = {\r\n\tUser,\r\n};\r\n```","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4501","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4501/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4501/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4501/events","html_url":"https://github.com/keystonejs/keystone/issues/4501","id":273127246,"number":4501,"title":"MongoError: not authorized on <Project name> to execute command { find: “app_updates”, filter: { key: “0.0.1-admins” }, limit: 1, batchSize: 1, singleBatch: true }","user":{"login":"ghost","id":10137,"avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-11-11T07:41:54Z","updated_at":"2017-11-11T07:59:41Z","closed_at":"2017-11-11T07:59:41Z","author_association":"NONE","body":"","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4493","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4493/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4493/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4493/events","html_url":"https://github.com/keystonejs/keystone/issues/4493","id":270228718,"number":4493,"title":"markdown editor","user":{"login":"recoluan","id":18067907,"avatar_url":"https://avatars2.githubusercontent.com/u/18067907?v=4","gravatar_id":"","url":"https://api.github.com/users/recoluan","html_url":"https://github.com/recoluan","followers_url":"https://api.github.com/users/recoluan/followers","following_url":"https://api.github.com/users/recoluan/following{/other_user}","gists_url":"https://api.github.com/users/recoluan/gists{/gist_id}","starred_url":"https://api.github.com/users/recoluan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/recoluan/subscriptions","organizations_url":"https://api.github.com/users/recoluan/orgs","repos_url":"https://api.github.com/users/recoluan/repos","events_url":"https://api.github.com/users/recoluan/events{/privacy}","received_events_url":"https://api.github.com/users/recoluan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-01T08:07:31Z","updated_at":"2017-11-01T09:20:02Z","closed_at":"2017-11-01T09:20:01Z","author_association":"NONE","body":"The markdown editor appears in the text with newline and md source code","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4486","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4486/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4486/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4486/events","html_url":"https://github.com/keystonejs/keystone/issues/4486","id":269266193,"number":4486,"title":"Password Validation/User Update Causes App to Crash","user":{"login":"j-sz","id":13860942,"avatar_url":"https://avatars1.githubusercontent.com/u/13860942?v=4","gravatar_id":"","url":"https://api.github.com/users/j-sz","html_url":"https://github.com/j-sz","followers_url":"https://api.github.com/users/j-sz/followers","following_url":"https://api.github.com/users/j-sz/following{/other_user}","gists_url":"https://api.github.com/users/j-sz/gists{/gist_id}","starred_url":"https://api.github.com/users/j-sz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j-sz/subscriptions","organizations_url":"https://api.github.com/users/j-sz/orgs","repos_url":"https://api.github.com/users/j-sz/repos","events_url":"https://api.github.com/users/j-sz/events{/privacy}","received_events_url":"https://api.github.com/users/j-sz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-10-27T23:57:04Z","updated_at":"2018-01-03T20:35:25Z","closed_at":"2018-01-03T20:34:22Z","author_association":"NONE","body":"### Expected behavior\r\n- Password validation should **not** run on save/update if the password field has not been updated\r\n\r\n### Actual/Current behavior\r\n- Password validation runs and causes the app to crash (because \"pass\" is undefined)\r\n\r\n### Steps to reproduce the actual/current behavior\r\n1. Create a model containing a password field \r\n1. Create/save a document into the model \r\n1. Update the same document without changing the password\r\n1. The app crashes as password is undefined\r\n\r\n### Environment\r\n- Ubuntu 16.04.3 LTS (GNU/Linux 4.4.0-1038-aws x86_64)\r\n\r\n| Software  | Version\r\n| Keystone  | 4.0.0-beta.7\r\n| Node | 6.11.5\r\n\r\n### Workaround\r\n- I believe the issue is related to [this commit](https://github.com/keystonejs/keystone/commit/8ecb80960ffd2ae2f241b0bbb62367821a79ff63), fields/types/password/PasswordType.js, line 203: \r\n```\r\n\tif (rejectCommon && dumbPasswords.check(pass)) {\r\n\t\tmessages.push('Password must not be a common, frequently-used password.');\r\n\t}\r\n```\r\n- I changed line 203 to: \r\n\r\n```\r\n\tif (typeof pass === 'string' && rejectCommon && dumbPasswords.check(pass)) {\r\n\t\tmessages.push('Password must not be a common, frequently-used password.');\r\n\t}\r\n``` \r\n- The record updates without crashing the app when `typeof pass === 'string'` is added as a condition to the if statement.  ","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4467","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4467/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4467/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4467/events","html_url":"https://github.com/keystonejs/keystone/issues/4467","id":266038457,"number":4467,"title":"Admin UI Taking Forever To Load/Not Loading at All.","user":{"login":"jesster2k10","id":6454286,"avatar_url":"https://avatars3.githubusercontent.com/u/6454286?v=4","gravatar_id":"","url":"https://api.github.com/users/jesster2k10","html_url":"https://github.com/jesster2k10","followers_url":"https://api.github.com/users/jesster2k10/followers","following_url":"https://api.github.com/users/jesster2k10/following{/other_user}","gists_url":"https://api.github.com/users/jesster2k10/gists{/gist_id}","starred_url":"https://api.github.com/users/jesster2k10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jesster2k10/subscriptions","organizations_url":"https://api.github.com/users/jesster2k10/orgs","repos_url":"https://api.github.com/users/jesster2k10/repos","events_url":"https://api.github.com/users/jesster2k10/events{/privacy}","received_events_url":"https://api.github.com/users/jesster2k10/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2017-10-17T08:39:41Z","updated_at":"2017-11-03T18:33:44Z","closed_at":"2017-11-03T18:33:44Z","author_association":"NONE","body":"<!--\r\n  We're trying to keep the issue tracker unpolluted.\r\n\r\n  Please ask questions and support requests on:\r\n  * https://stackoverflow.com/questions/tagged/keystonejs\r\n  * https://gitter.im/keystonejs/keystone\r\n\r\n  New features can be requested and voted upon on:\r\n  * https://productpains.com/product/keystonejs\r\n -->\r\n\r\nI am having an issue when I deploy my app to production where the admin interface never loads. I know for sure it isn't a server issue as I have a seperate control panel interface from the keystone one that loads - \r\n\r\nhttps://restaurant-application-admin.herokuapp.com/\r\n\r\nbut when I try to do anything under `/keystone` it refuses to load and results in a time out. I've been having this issue since I started using Redis for some token validations.\r\n\r\nYou can try it out here:\r\n\r\nhttps://restaurant-application-admin.herokuapp.com/keystone/signin\r\n\r\nI also tried to develop my own keystone and I linked it locally but I since have unlinked it but I am still getting the error.\r\n\r\nThe Admin UI works as expected when I run the web app locally but not on our production server.\r\n \r\n### Expected behavior\r\nThe admin UI Should load the login screen followed by all of the lists.\r\n\r\n### Console Log\r\n```\r\n`Release v77 created by user jesster2k10@gmail.com\r\n2017-10-17T08:30:59.448394+00:00 heroku[web.1]: Restarting\r\n2017-10-17T08:30:59.448928+00:00 heroku[web.1]: State changed from up to starting\r\n2017-10-17T08:31:00.330343+00:00 heroku[web.1]: Stopping all processes with SIGTERM\r\n2017-10-17T08:31:00.593772+00:00 heroku[web.1]: Process exited with status 143\r\n2017-10-17T08:31:05.738706+00:00 heroku[web.1]: Starting process with command `node keystone.js`\r\n2017-10-17T08:31:09.565731+00:00 app[web.1]: Warning: connect.session() MemoryStore is not\r\n2017-10-17T08:31:09.565781+00:00 app[web.1]: designed for a production environment, as it will leak\r\n2017-10-17T08:31:09.565782+00:00 app[web.1]: memory, and will not scale past a single process.\r\n2017-10-17T08:31:12.207332+00:00 app[web.1]: \r\n2017-10-17T08:31:12.207361+00:00 app[web.1]: ------------------------------------------------\r\n2017-10-17T08:31:12.207362+00:00 app[web.1]: KeystoneJS Started:\r\n2017-10-17T08:31:12.207362+00:00 app[web.1]: Your Restaurant  is ready on http://0.0.0.0:27113\r\n2017-10-17T08:31:12.207363+00:00 app[web.1]: ------------------------------------------------\r\n2017-10-17T08:31:12.207363+00:00 app[web.1]: \r\n2017-10-17T08:31:12.578445+00:00 heroku[web.1]: State changed from starting to up\r\n2017-10-17T08:31:15.983501+00:00 app[web.1]: 2017-10-17 08:10:98 error building App/index.js:\r\n2017-10-17T08:31:15.983506+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/babel-polyfill/lib/index.js\r\n2017-10-17T08:31:18.119704+00:00 app[web.1]: 2017-10-17 08:10:11 error building Signin/index.js:\r\n2017-10-17T08:31:18.119720+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/object-assign/index.js\r\n2017-10-17T08:31:19.931746+00:00 app[web.1]: 2017-10-17 08:10:93 error building FieldTypes.js:\r\n2017-10-17T08:31:19.931763+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/cloudinary-microurl/url.js\r\n2017-10-17T08:31:21.966412+00:00 app[web.1]: 2017-10-17 08:10:96 error building FieldTypes.js:\r\n2017-10-17T08:31:21.966430+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/object-assign/index.js\r\n2017-10-17T08:31:25.039919+00:00 app[web.1]: 2017-10-17 08:10:03 error building App/index.js:\r\n2017-10-17T08:31:25.039943+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/object-assign/index.js\r\n2017-10-17T08:31:28.637914+00:00 app[web.1]: 2017-10-17 08:10:63 error building App/index.js:\r\n2017-10-17T08:31:28.637935+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/lodash/isEqual.js\r\n2017-10-17T08:31:28.683944+00:00 app[web.1]: 2017-10-17 08:10:68 error building App/index.js:\r\n2017-10-17T08:31:28.683948+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/redux-saga/effects.js\r\n2017-10-17T08:31:30.987800+00:00 app[web.1]: GET /keystone/signin 200 21.744 ms\r\n2017-10-17T08:31:30.970884+00:00 heroku[router]: at=info method=GET path=\"/keystone/signin\" host=restaurant-application-admin.herokuapp.com request_id=174d2c5d-bfb3-42cf-babc-a1a8eeb999fb fwd=\"83.136.45.25\" dyno=web.1 connect=0ms service=1542ms status=200 bytes=1272 protocol=https\r\n2017-10-17T08:31:31.370791+00:00 heroku[router]: at=info method=GET path=\"/keystone/js/packages.js\" host=restaurant-application-admin.herokuapp.com request_id=93d322f7-be9a-4f29-97a7-70756eeede9d fwd=\"83.136.45.25\" dyno=web.1 connect=0ms service=290ms status=304 bytes=239 protocol=https\r\n2017-10-17T08:31:37.561246+00:00 heroku[router]: at=info method=GET path=\"/keystone/styles/keystone.min.css\" host=restaurant-application-admin.herokuapp.com request_id=77b341e6-4e67-4fd3-b63b-e4844cbcd2d3 fwd=\"83.136.45.25\" dyno=web.1 connect=0ms service=6482ms status=200 bytes=25488 protocol=https\r\n2017-10-17T08:31:39.705462+00:00 app[web.1]: 2017-10-17 08:10:70 error building App/index.js:\r\n2017-10-17T08:31:39.705484+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/lodash/isPlainObject.js\r\n2017-10-17T08:31:39.707075+00:00 app[web.1]: 2017-10-17 08:10:70 error building App/index.js:\r\n2017-10-17T08:31:39.707078+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/lodash/isObject.js\r\n2017-10-17T08:31:39.707162+00:00 app[web.1]: 2017-10-17 08:10:70 error building App/index.js:\r\n2017-10-17T08:31:39.707164+00:00 app[web.1]: Couldn't find preset \"env\" relative to directory \"/app\" while parsing file: /app/node_modules/lodash/isArray.js\r\n2017-10-17T08:31:33+00:00 app[heroku-redis]: source=REDIS sample#active-connections=2 sample#load-avg-1m=0.23 sample#load-avg-5m=0.195 sample#load-avg-15m=0.165 sample#read-iops=0 sample#write-iops=0 sample#memory-total=15664292kB sample#memory-free=11596816kB sample#memory-cached=1001624kB sample#memory-redis=331320bytes sample#hit-rate=1 sample#evicted-keys=0\r\n2017-10-17T08:32:01.078834+00:00 heroku[router]: at=error code=H12 desc=\"Request timeout\" method=GET path=\"/keystone/js/signin.js\" host=restaurant-application-admin.herokuapp.com request_id=d7831230-324e-4ec0-ae6f-8fe6b56e3c6d fwd=\"83.136.45.25\" dyno=web.1 connect=1ms service=30000ms status=503 bytes=0 protocol=https\r\n2017-10-17T08:32:09.580487+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=restaurant-application-admin.herokuapp.com request_id=9201c298-d356-4d9e-89f7-3866908cec79 fwd=\"83.136.45.25\" dyno=web.1 connect=0ms service=5ms status=200 bytes=4579 protocol=https`\r\n\r\n```\r\n\r\n\r\n### Actual/Current behavior\r\nThe Admin UI Never loads and it sends a 503 error. See image attached below:\r\n\r\n![taking forever to load then resuling in a 503](https://i.imgur.com/Y0JxbfD.png)\r\n\r\n\r\n### Steps to reproduce the actual/current behavior\r\nVisit https://restaurant-application-admin.herokuapp.com/keystone/signin\r\n\r\n### Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n| Software         | Version\r\n| ---------------- | -------\r\n| Keystone         |  git+https://github.com/keystonejs/keystone.git\r\n| Node             | 8.2.1\r\n| NPM | 5.2.0\r\n\r\n### Package.json\r\n\r\n```\r\n\r\n{\r\n  \"name\": \"your-restaurant\",\r\n  \"version\": \"0.0.0\",\r\n  \"private\": true,\r\n  \"engines\": {\r\n    \"node\": \"8.2.1\",\r\n    \"npm\": \"5.2.0\"\r\n  },\r\n  \"dependencies\": {\r\n    \"async\": \"2.1.4\",\r\n    \"dotenv\": \"4.0.0\",\r\n    \"express-jwt-blacklist\": \"^1.1.0\",\r\n    \"jsonwebtoken\": \"^7.4.3\",\r\n    \"keystone\": \"git+https://github.com/keystonejs/keystone.git\",\r\n    \"keystone-email\": \"1.0.5\",\r\n    \"lodash\": \"^4.17.4\",\r\n    \"mongoose\": \"^4.11.11\",\r\n    \"node-sass\": \"4.5.0\",\r\n    \"node-sass-middleware\": \"^0.11.0\",\r\n    \"passport\": \"^0.3.2\",\r\n    \"passport-facebook\": \"^2.1.1\",\r\n    \"passport-google-oauth20\": \"^1.0.0\",\r\n    \"passport-local\": \"^1.0.0\",\r\n    \"pug\": \"2.0.0-beta11\",\r\n    \"redis\": \"^2.8.0\",\r\n    \"res-error\": \"^0.3.1\",\r\n    \"restful-keystone\": \"^0.3.0\",\r\n    \"serialize-error\": \"^2.1.0\",\r\n    \"stripe\": \"^5.1.1\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"babel-cli\": \"^6.26.0\",\r\n    \"babel-preset-env\": \"^1.6.0\",\r\n    \"eslint\": \"3.15.0\",\r\n    \"eslint-config-keystone\": \"3.0.0\",\r\n    \"eslint-plugin-react\": \"^5.1.1\",\r\n    \"nodemon\": \"^1.12.1\"\r\n  },\r\n  \"scripts\": {\r\n    \"lint\": \"eslint .\",\r\n    \"start\": \"nodemon keystone.js\"\r\n  }\r\n}\r\n\r\n```\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4465","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4465/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4465/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4465/events","html_url":"https://github.com/keystonejs/keystone/issues/4465","id":265584093,"number":4465,"title":"Why keystone reinvent wheel in couples areas ?","user":{"login":"arturkasperek","id":6894763,"avatar_url":"https://avatars2.githubusercontent.com/u/6894763?v=4","gravatar_id":"","url":"https://api.github.com/users/arturkasperek","html_url":"https://github.com/arturkasperek","followers_url":"https://api.github.com/users/arturkasperek/followers","following_url":"https://api.github.com/users/arturkasperek/following{/other_user}","gists_url":"https://api.github.com/users/arturkasperek/gists{/gist_id}","starred_url":"https://api.github.com/users/arturkasperek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arturkasperek/subscriptions","organizations_url":"https://api.github.com/users/arturkasperek/orgs","repos_url":"https://api.github.com/users/arturkasperek/repos","events_url":"https://api.github.com/users/arturkasperek/events{/privacy}","received_events_url":"https://api.github.com/users/arturkasperek/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-10-15T16:23:22Z","updated_at":"2017-10-16T06:52:56Z","closed_at":"2017-10-15T23:31:59Z","author_association":"NONE","body":"In that areas exists libs:\r\n- REST api generation + ORM - https://feathersjs.com/ \r\nThat tool supports ORM like sequalize or mongoose, it also helps in generating CRUD api\r\n- generation CRUD UI from schema and validation - https://github.com/mozilla-services/react-jsonschema-form\r\nI sow that keystone team was working long time on nested list, that react json schema supports out of box nested structure, also as name of lib suggest it uses jsonschema to validate so it's pretty good tool for making CRUD UI and also extra validate. Without problem with that tool is possible to \r\n make custom fields\r\n- admin panel skeleton - https://github.com/marmelab/admin-on-rest\r\nIt could be used as a skeleton for admin panel, supports authentication, provide helpers to adopt own api\r\n\r\nI'm wondering if this is a good way to continue work on the project in current shape. I think Keystone shouldn't focus on creating DB schemas and generating API, it should use some other tool like feathejs which support SQL DBs and no SQL dbs like mongo. Also I think we should't generate UI since we have already done great tool for that, react jsonschema form. What are your thoughts @JedWatson  @jossmac @mxstbr ?","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4462","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4462/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4462/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4462/events","html_url":"https://github.com/keystonejs/keystone/issues/4462","id":265043077,"number":4462,"title":"Sorting in the Admin UI only works on the item above or below.","user":{"login":"leeonel","id":7529321,"avatar_url":"https://avatars3.githubusercontent.com/u/7529321?v=4","gravatar_id":"","url":"https://api.github.com/users/leeonel","html_url":"https://github.com/leeonel","followers_url":"https://api.github.com/users/leeonel/followers","following_url":"https://api.github.com/users/leeonel/following{/other_user}","gists_url":"https://api.github.com/users/leeonel/gists{/gist_id}","starred_url":"https://api.github.com/users/leeonel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leeonel/subscriptions","organizations_url":"https://api.github.com/users/leeonel/orgs","repos_url":"https://api.github.com/users/leeonel/repos","events_url":"https://api.github.com/users/leeonel/events{/privacy}","received_events_url":"https://api.github.com/users/leeonel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-12T18:35:37Z","updated_at":"2017-10-23T20:34:02Z","closed_at":"2017-10-23T20:34:02Z","author_association":"NONE","body":"<!--\r\n  We're trying to keep the issue tracker unpolluted.\r\n\r\n  Please ask questions and support requests on:\r\n  * https://stackoverflow.com/questions/tagged/keystonejs\r\n  * https://gitter.im/keystonejs/keystone\r\n\r\n  New features can be requested and voted upon on:\r\n  * https://productpains.com/product/keystonejs\r\n -->\r\n \r\n### Expected behavior\r\n<!-- If you're describing a bug, tell us what should happen -->\r\n<!-- If you're suggesting a change/improvement, tell us how it should work -->\r\nSorting in the Admin UI should work on any order.\r\n\r\n\r\n\r\n### Actual/Current behavior\r\n<!-- If you're describing a bug, tell us what happens instead of the expected behavior -->\r\n<!-- If you're suggesting a change/improvement, explain the difference from current behavior -->\r\nSorting in the Admin UI only works on the item above or below\r\n\r\n\r\n\r\n### Steps to reproduce the actual/current behavior\r\n<!-- If you're describing a bug, tell us what steps to take to reproduce your bug -->\r\n<!-- If you'resuggesting a change/improvement, explain how to reproduce the current behavior -->\r\nEnabling \"sortable: true\" in a `keystone.List()` and dragging the items.\r\n\r\n\r\n\r\n### Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n| Software         | Version\r\n| ---------------- | -------\r\n| Keystone         | 4.0.0-beta.5\r\n| Node             | 6.11.3\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4461","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4461/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4461/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4461/events","html_url":"https://github.com/keystonejs/keystone/issues/4461","id":264868494,"number":4461,"title":"How to add a complete custom Admin UI theme","user":{"login":"chrisformula","id":3940594,"avatar_url":"https://avatars3.githubusercontent.com/u/3940594?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisformula","html_url":"https://github.com/chrisformula","followers_url":"https://api.github.com/users/chrisformula/followers","following_url":"https://api.github.com/users/chrisformula/following{/other_user}","gists_url":"https://api.github.com/users/chrisformula/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisformula/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisformula/subscriptions","organizations_url":"https://api.github.com/users/chrisformula/orgs","repos_url":"https://api.github.com/users/chrisformula/repos","events_url":"https://api.github.com/users/chrisformula/events{/privacy}","received_events_url":"https://api.github.com/users/chrisformula/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-10-12T09:16:15Z","updated_at":"2017-11-22T13:33:10Z","closed_at":"2017-11-22T13:33:10Z","author_association":"NONE","body":"Is it possible to override the default UI in the admin panel with your own custom css and how can you change the view elements thereof?\r\n\r\nFor ex: Id:=Nav to change to id=CusNav and pull through the css styles as well?","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4459","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4459/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4459/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4459/events","html_url":"https://github.com/keystonejs/keystone/issues/4459","id":263692855,"number":4459,"title":"How do i apply eager transformations when using Cloudinary images?","user":{"login":"augustbjornberg","id":1137612,"avatar_url":"https://avatars2.githubusercontent.com/u/1137612?v=4","gravatar_id":"","url":"https://api.github.com/users/augustbjornberg","html_url":"https://github.com/augustbjornberg","followers_url":"https://api.github.com/users/augustbjornberg/followers","following_url":"https://api.github.com/users/augustbjornberg/following{/other_user}","gists_url":"https://api.github.com/users/augustbjornberg/gists{/gist_id}","starred_url":"https://api.github.com/users/augustbjornberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/augustbjornberg/subscriptions","organizations_url":"https://api.github.com/users/augustbjornberg/orgs","repos_url":"https://api.github.com/users/augustbjornberg/repos","events_url":"https://api.github.com/users/augustbjornberg/events{/privacy}","received_events_url":"https://api.github.com/users/augustbjornberg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-08T04:48:26Z","updated_at":"2017-10-09T18:33:55Z","closed_at":"2017-10-09T18:32:18Z","author_association":"NONE","body":"_Asking here since the asking on stackoverflow resulted in tumbleweed._\r\n\
e2b
r\n_https://stackoverflow.com/questions/46623881/keystone-and-cloudinary-how-to-apply-eager-transformations_\r\n\r\n---\r\n\r\nI've read the documentation for the CloudinaryImage field, and the part about applying options, in my case eager transformations, was slightly confusing.\r\n\r\nhttps://github.com/keystonejs/keystone/tree/master/fields/types/cloudinaryimage\r\n\r\nThe section only says Underscore Methods, but how and where do i actually access/use the methods? Is it somewhere in the schema, model, or elsewhere?\r\n\r\nGiven the following model and API endpoint/selector, what would be the approach if i wanted to be able to return my Cloudinary image urls with the eager transformation of *quality = 60 (q_60)* in my API endpoint?\r\n\r\n**Model**\r\n\r\n    SomeModel.add({\r\n    \tsingleImage: { \r\n    \t\ttype: Types.CloudinaryImage,\r\n    \t\tdefault: {}\r\n    \t},\r\n    \tmultipleImages: { \r\n    \t\ttype: Types.CloudinaryImages,\r\n    \t\tdefault: []\r\n    \t}\r\n    })\r\n\r\n**API endpoint**\r\n\r\n\tvar items = [];\r\n\r\n\tasync.parallel([\r\n\r\n\t\tfunction(next) {\r\n\t\t\tkeystone.list('SomeModel').model.find()\r\n\t\t\t.where('state', 'published')\r\n\t\t\t.exec(function(error, results) {\r\n\r\n\t\t\t\tasync.each(results, function(item, next) {\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t}, function(err) {\r\n\t\t\t\t\tnext(err)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t], function(error) {\r\n\t\tres.setHeader('Content-Type', 'application/json');\r\n\t\treturn res.status(200).send(JSON.stringify(items));\r\n\t})\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4458","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4458/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4458/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4458/events","html_url":"https://github.com/keystonejs/keystone/issues/4458","id":263646852,"number":4458,"title":"What are process.env.GA_PROPERTY and process.env.GA_DOMAIN?","user":{"login":"datnguyenquy94","id":12053102,"avatar_url":"https://avatars2.githubusercontent.com/u/12053102?v=4","gravatar_id":"","url":"https://api.github.com/users/datnguyenquy94","html_url":"https://github.com/datnguyenquy94","followers_url":"https://api.github.com/users/datnguyenquy94/followers","following_url":"https://api.github.com/users/datnguyenquy94/following{/other_user}","gists_url":"https://api.github.com/users/datnguyenquy94/gists{/gist_id}","starred_url":"https://api.github.com/users/datnguyenquy94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/datnguyenquy94/subscriptions","organizations_url":"https://api.github.com/users/datnguyenquy94/orgs","repos_url":"https://api.github.com/users/datnguyenquy94/repos","events_url":"https://api.github.com/users/datnguyenquy94/events{/privacy}","received_events_url":"https://api.github.com/users/datnguyenquy94/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-10-07T14:55:35Z","updated_at":"2017-10-07T15:57:45Z","closed_at":"2017-10-07T15:57:45Z","author_association":"NONE","body":"Just like the title, I am settings up a blog and trying to apply google analytics to it. But I am confused about GA_PROPERTY and GA_DOMAIN. What is it? \r\n\r\nGA_PROPERTY is \"Tracking Id\" right? And GA_DOMAIN is my domain or google analytics callback url ?","score":1.0}]}
0

