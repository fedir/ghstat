HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Wed, 10 Oct 2018 05:34:34 GMT
Link: <https://api.github.com/search/issues?q=repo%3Amicro%2Fgo-micro+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Amicro%2Fgo-micro+type%3Aissue+state%3Aclosed&page=6>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: C106:5142:23C5AB:4C6468:5BBD8F69
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 25
X-Ratelimit-Reset: 1539149733
X-Xss-Protection: 1; mode=block

8000
{"total_count":166,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/micro/go-micro/issues/307","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/307/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/307/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/307/events","html_url":"https://github.com/micro/go-micro/issues/307","id":360179258,"node_id":"MDU6SXNzdWUzNjAxNzkyNTg=","number":307,"title":"how can i set etcdv3 address not using env?","user":{"login":"baofengqqwwff","id":20411388,"node_id":"MDQ6VXNlcjIwNDExMzg4","avatar_url":"https://avatars1.githubusercontent.com/u/20411388?v=4","gravatar_id":"","url":"https://api.github.com/users/baofengqqwwff","html_url":"https://github.com/baofengqqwwff","followers_url":"https://api.github.com/users/baofengqqwwff/followers","following_url":"https://api.github.com/users/baofengqqwwff/following{/other_user}","gists_url":"https://api.github.com/users/baofengqqwwff/gists{/gist_id}","starred_url":"https://api.github.com/users/baofengqqwwff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baofengqqwwff/subscriptions","organizations_url":"https://api.github.com/users/baofengqqwwff/orgs","repos_url":"https://api.github.com/users/baofengqqwwff/repos","events_url":"https://api.github.com/users/baofengqqwwff/events{/privacy}","received_events_url":"https://api.github.com/users/baofengqqwwff/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-09-14T06:55:32Z","updated_at":"2018-09-14T07:48:00Z","closed_at":"2018-09-14T07:48:00Z","author_association":"NONE","body":"i want to set the address in main function,not using setting env MICRO_REGISTRY_ADDRESS=127.0.0.1:2379,how can i do that? ","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/304","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/304/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/304/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/304/events","html_url":"https://github.com/micro/go-micro/issues/304","id":358826368,"node_id":"MDU6SXNzdWUzNTg4MjYzNjg=","number":304,"title":"Got \"kubernetes.io/serviceaccount: no such file or directory\" for all micro cli comands","user":{"login":"wangyanxing","id":5952436,"node_id":"MDQ6VXNlcjU5NTI0MzY=","avatar_url":"https://avatars0.githubusercontent.com/u/5952436?v=4","gravatar_id":"","url":"https://api.github.com/users/wangyanxing","html_url":"https://github.com/wangyanxing","followers_url":"https://api.github.com/users/wangyanxing/followers","following_url":"https://api.github.com/users/wangyanxing/following{/other_user}","gists_url":"https://api.github.com/users/wangyanxing/gists{/gist_id}","starred_url":"https://api.github.com/users/wangyanxing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangyanxing/subscriptions","organizations_url":"https://api.github.com/users/wangyanxing/orgs","repos_url":"https://api.github.com/users/wangyanxing/repos","events_url":"https://api.github.com/users/wangyanxing/events{/privacy}","received_events_url":"https://api.github.com/users/wangyanxing/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-09-10T23:05:16Z","updated_at":"2018-09-11T06:31:38Z","closed_at":"2018-09-11T06:31:38Z","author_association":"NONE","body":"I'm not able to run `micro` cli for all micro cli commands.\r\n\r\n```\r\n~ $ micro                                                                                                                                                \r\n2018/09/10 16:02:21 stat /var/run/secrets/kubernetes.io/serviceaccount: no such file or directory\r\n```\r\nI installed minikube on my Mac, but not sure why it affects. I've tried reinstall go and micro, still see same issue.","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/303","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/303/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/303/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/303/events","html_url":"https://github.com/micro/go-micro/issues/303","id":354293375,"node_id":"MDU6SXNzdWUzNTQyOTMzNzU=","number":303,"title":"not thread safe?","user":{"login":"baofengqqwwff","id":20411388,"node_id":"MDQ6VXNlcjIwNDExMzg4","avatar_url":"https://avatars1.githubusercontent.com/u/20411388?v=4","gravatar_id":"","url":"https://api.github.com/users/baofengqqwwff","html_url":"https://github.com/baofengqqwwff","followers_url":"https://api.github.com/users/baofengqqwwff/followers","following_url":"https://api.github.com/users/baofengqqwwff/following{/other_user}","gists_url":"https://api.github.com/users/baofengqqwwff/gists{/gist_id}","starred_url":"https://api.github.com/users/baofengqqwwff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baofengqqwwff/subscriptions","organizations_url":"https://api.github.com/users/baofengqqwwff/orgs","repos_url":"https://api.github.com/users/baofengqqwwff/repos","events_url":"https://api.github.com/users/baofengqqwwff/events{/privacy}","received_events_url":"https://api.github.com/users/baofengqqwwff/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-08-27T12:10:44Z","updated_at":"2018-08-27T16:59:17Z","closed_at":"2018-08-27T16:59:16Z","author_association":"NONE","body":"hello, if i run two same client at the same time, the server struct has some data, is it not thread safe? but if one client finish, the data will reset","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/302","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/302/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/302/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/302/events","html_url":"https://github.com/micro/go-micro/issues/302","id":354234442,"node_id":"MDU6SXNzdWUzNTQyMzQ0NDI=","number":302,"title":"Can`t make pubsub work â€” any tips to debug?","user":{"login":"misterion","id":196737,"node_id":"MDQ6VXNlcjE5NjczNw==","avatar_url":"https://avatars1.githubusercontent.com/u/196737?v=4","gravatar_id":"","url":"https://api.github.com/users/misterion","html_url":"https://github.com/misterion","followers_url":"https://api.github.com/users/misterion/followers","following_url":"https://api.github.com/users/misterion/following{/other_user}","gists_url":"https://api.github.com/users/misterion/gists{/gist_id}","starred_url":"https://api.github.com/users/misterion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/misterion/subscriptions","organizations_url":"https://api.github.com/users/misterion/orgs","repos_url":"https://api.github.com/users/misterion/repos","events_url":"https://api.github.com/users/misterion/events{/privacy}","received_events_url":"https://api.github.com/users/misterion/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-08-27T08:51:46Z","updated_at":"2018-08-27T17:39:37Z","closed_at":"2018-08-27T17:39:36Z","author_association":"NONE","body":"Hi! First of all thank you for go-micro. After go-kit it`s dramatically reduce amount of service code you should write before writing your business logic itself. Right now i`m trying to test pubsub part of go-micro and can`t make my subscriber part to receive messages. \r\n\r\nThe config\r\n- RabbitMQ as broker\r\n- Consul as discovery \r\n- gRPC as transport \r\n\r\nProto part \r\n```\r\nsyntax = \"proto3\";\r\n\r\nmessage Event {\r\n    // unix timestamp\r\n    int64 timestamp = 1;\r\n\r\n\t// message\r\n    string payload = 2;\r\n}\r\n```\r\n\r\nThe publisher part looks like this \r\n```\r\ntype Application struct {\r\n\tservice micro.Service\r\n\tpublisher micro.Publisher\r\n}\r\n...\r\napp.service = micro.NewService(\r\n\t\tmicro.Name(\"go.p1.glutton.core-app\"),\r\n\t\tmicro.Version(\"latest\"),\r\n\t)\r\napp.service.Init()\r\napp.publisher = micro.NewPublisher(\"glutton.topic.event-stream\", app.service.Client())\r\nev := &proto.Event{\r\n\t\tTimestamp: time.Now().Unix(),\r\n\t\tPayload:  \"some string\",\r\n\t}\r\nlog.Printf(\"publishing %+v\\n\", ev)\r\napp.publisher.Publish(context.Background(), ev)\r\n```\r\nand subscriber part \r\n```\r\ntype EventApplication struct {\r\n}\r\nfunc (app *EventApplication) Process(ctx context.Context, event *proto.Event) error {\r\n\tmd, _ := metadata.FromContext(ctx)\r\n\tlog.Logf(\"[pubsub.1] Received event %+v with metadata %+v\\n\", event, md)\r\n}\r\n\r\nservice := micro.NewService(\r\n\t\tmicro.Name(\"go.p1.glutton.event-subscriber\"),\r\n\t\tmicro.Version(\"latest\"),\r\n)\r\nservice.Init()\r\nmicro.RegisterSubscriber(\"glutton.topic.event-stream\", service.Server(), app, server.SubscriberQueue(\"queue.pubsub\"))\r\n...\r\n```\r\n\r\nI can`t find any active connections to RabbitMQ server after client and server applications start. And not any error of `Publish` call. Could you please give some tips what`s wrong and there i can get more information about this?","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/301","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/301/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/301/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/301/events","html_url":"https://github.com/micro/go-micro/issues/301","id":354166842,"node_id":"MDU6SXNzdWUzNTQxNjY4NDI=","number":301,"title":"registry compile error","user":{"login":"michael1589","id":9250127,"node_id":"MDQ6VXNlcjkyNTAxMjc=","avatar_url":"https://avatars3.githubusercontent.com/u/9250127?v=4","gravatar_id":"","url":"https://api.github.com/users/michael1589","html_url":"https://github.com/michael1589","followers_url":"https://api.github.com/users/michael1589/followers","following_url":"https://api.github.com/users/michael1589/following{/other_user}","gists_url":"https://api.github.com/users/michael1589/gists{/gist_id}","starred_url":"https://api.github.com/users/michael1589/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael1589/subscriptions","organizations_url":"https://api.github.com/users/michael1589/orgs","repos_url":"https://api.github.com/users/michael1589/repos","events_url":"https://api.github.com/users/michael1589/events{/privacy}","received_events_url":"https://api.github.com/users/michael1589/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-08-27T03:23:20Z","updated_at":"2018-08-27T06:03:18Z","closed_at":"2018-08-27T06:03:18Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/9250127/44638677-d07b8f00-a9ea-11e8-86dd-6a09e1c9eaf2.png)\r\nMy project TelGateway refers to go-micro whose version is 9d3cb65daaf630acb1c87b8f45d13b8def7d7a22. But compiles error as you see. Seems asr.Connect undefined, neither do api.AgentServiceConnect. Is there a merge error I guess?","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/300","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/300/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/300/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/300/events","html_url":"https://github.com/micro/go-micro/issues/300","id":352760143,"node_id":"MDU6SXNzdWUzNTI3NjAxNDM=","number":300,"title":"GKE permission issue with micro api","user":{"login":"mgyong","id":2178001,"node_id":"MDQ6VXNlcjIxNzgwMDE=","avatar_url":"https://avatars0.githubusercontent.com/u/2178001?v=4","gravatar_id":"","url":"https://api.github.com/users/mgyong","html_url":"https://github.com/mgyong","followers_url":"https://api.github.com/users/mgyong/followers","following_url":"https://api.github.com/users/mgyong/following{/other_user}","gists_url":"https://api.github.com/users/mgyong/gists{/gist_id}","starred_url":"https://api.github.com/users/mgyong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgyong/subscriptions","organizations_url":"https://api.github.com/users/mgyong/orgs","repos_url":"https://api.github.com/users/mgyong/repos","events_url":"https://api.github.com/users/mgyong/events{/privacy}","received_events_url":"https://api.github.com/users/mgyong/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-08-22T00:45:37Z","updated_at":"2018-08-22T07:45:54Z","closed_at":"2018-08-22T07:45:54Z","author_association":"NONE","body":"Trying to deploy micro-api pods on Google Kubernetes Cluster\r\nGetting the below error. Seems to be some permission issue. Was hoping if someone can give me some pointers. Namespace of go-micro pod is in app\r\n\r\n```\r\n2018/08/22 00:43:40 Registering RPC Handler at /rpc\r\n2018/08/22 00:43:40 Registering API Default Handler at /\r\n2018/08/22 00:43:40 Listening on [::]:3000\r\n2018/08/22 00:43:40 Listening on [::]:33959\r\n2018/08/22 00:43:40 Broker Listening on [::]:46409\r\n2018/08/22 00:43:40 Registering node: go.micro.api-6a215d3c-a5a4-11e8-a5bb-0a580a0c0153\r\n2018/08/22 00:43:40 K8s: request failed with code 403\r\n2018/08/22 00:43:40 K8s: request failed with body:\r\n2018/08/22 00:43:40 {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"pods is forbidden: User \\\"system:serviceaccount:app:default\\\" cannot list pods in the namespace \\\"app\\\": Unknown user \\\"system:serviceaccount:app:default\\\"\",\"reason\":\"Forbidden\",\"details\":{\"kind\":\"pods\"},\"code\":403}\r\n2018/08/22 00:43:40 Error watching endpoints K8s: error\r\n2018/08/22 00:43:40 K8s: request failed with code 403\r\n2018/08/22 00:43:40 K8s: request failed with body:\r\n2018/08/22 00:43:40 {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"pods \\\"microapi-5f5bdfb9d5-f5g2g\\\" is forbidden: User \\\"system:serviceaccount:app:default\\\" cannot patch pods in the namespace \\\"app\\\": Unknown user \\\"system:serviceaccount:app:default\\\"\",\"reason\":\"Forbidden\",\"details\":{\"name\":\"microapi-5f5bdfb9d5-f5g2g\",\"kind\":\"pods\"},\"code\":403}\r\n2018/08/22 00:43:40 K8s: error\r\n\r\n```\r\n\r\n```\r\nkind: Deployment\r\napiVersion: apps/v1\r\nmetadata:\r\n  name: microapi\r\n  namespace: app\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: micro\r\n  template:\r\n    metadata:\r\n      namespace: app\r\n      labels:\r\n        app: micro\r\n    spec:\r\n        containers:\r\n        - name: micro\r\n          image: microhq/micro:kubernetes\r\n          args:\r\n            - \"api\"\r\n          env:\r\n          - name: MICRO_API_ADDRESS\r\n            value: \"0.0.0.0:3000\"\r\n          - name: MICRO_API_NAMESPACE\r\n            value: \"mgyongappk8\"\r\n\r\n          ports:\r\n          - containerPort: 3000\r\n            name: api-port\r\n```\r\n```\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: micro\r\n  namespace: app\r\nspec:\r\n  type: LoadBalancer\r\n  ports:\r\n  - name: api-http\r\n    port: 3000\r\n    targetPort: api-port\r\n    protocol: TCP\r\n  selector:\r\n    app: micro\r\n```","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/298","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/298/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/298/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/298/events","html_url":"https://github.com/micro/go-micro/issues/298","id":352160906,"node_id":"MDU6SXNzdWUzNTIxNjA5MDY=","number":298,"title":"build error","user":{"login":"reechou","id":949857,"node_id":"MDQ6VXNlcjk0OTg1Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/949857?v=4","gravatar_id":"","url":"https://api.github.com/users/reechou","html_url":"https://github.com/reechou","followers_url":"https://api.github.com/users/reechou/followers","following_url":"https://api.github.com/users/reechou/following{/other_user}","gists_url":"https://api.github.com/users/reechou/gists{/gist_id}","starred_url":"https://api.github.com/users/reechou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reechou/subscriptions","organizations_url":"https://api.github.com/users/reechou/orgs","repos_url":"https://api.github.com/users/reechou/repos","events_url":"https://api.github.com/users/reechou/events{/privacy}","received_events_url":"https://api.github.com/users/reechou/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-08-20T14:29:03Z","updated_at":"2018-08-20T14:33:48Z","closed_at":"2018-08-20T14:30:49Z","author_association":"NONE","body":"I use the lastest version, go build with error:\r\n../../../github.com/micro/go-micro/registry/consul_registry.go:228:6: asr.Connect undefined (type *api.AgentServiceRegistration has no field or method Connect)\r\n../../../github.com/micro/go-micro/registry/consul_registry.go:228:18: undefined: api.AgentServiceConnect\r\n../../../github.com/micro/go-micro/registry/consul_registry.go:257:34: c.Client.Health().Connect undefined (type *api.Health has no field or method Connect)","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/297","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/297/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/297/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/297/events","html_url":"https://github.com/micro/go-micro/issues/297","id":352113559,"node_id":"MDU6SXNzdWUzNTIxMTM1NTk=","number":297,"title":"micro api service 500","user":{"login":"yuyongbo","id":17313948,"node_id":"MDQ6VXNlcjE3MzEzOTQ4","avatar_url":"https://avatars3.githubusercontent.com/u/17313948?v=4","gravatar_id":"","url":"https://api.github.com/users/yuyongbo","html_url":"https://github.com/yuyongbo","followers_url":"https://api.github.com/users/yuyongbo/followers","following_url":"https://api.github.com/users/yuyongbo/following{/other_user}","gists_url":"https://api.github.com/users/yuyongbo/gists{/gist_id}","starred_url":"https://api.github.com/users/yuyongbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yuyongbo/subscriptions","organizations_url":"https://api.github.com/users/yuyongbo/orgs","repos_url":"https://api.github.com/users/yuyongbo/repos","events_url":"https://api.github.com/users/yuyongbo/events{/privacy}","received_events_url":"https://api.github.com/users/yuyongbo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-08-20T12:29:44Z","updated_at":"2018-08-20T12:33:56Z","closed_at":"2018-08-20T12:33:56Z","author_association":"NONE","body":"I started consul, user-server,user-api,and micro api services.but api also produce a error with 500 when i request . i wanna konw why.\r\n\r\n``` \r\n[root@localhost api]# micro api --handler=http --address=:7777\r\n2018-08-20 20:19:00.940869 I | Registering RPC Handler at /rpc\r\n2018-08-20 20:19:00.941016 I | Registering API HTTP Handler at /{service:[a-zA-Z0-9]+}\r\n2018-08-20 20:19:00.941269 I | Listening on [::]:7777\r\n2018-08-20 20:19:00.941564 I | Listening on [::]:32858\r\n2018-08-20 20:19:00.941721 I | Broker Listening on [::]:32833\r\n2018-08-20 20:19:00.942652 I | Registering node: go.micro.api-38687480-a473-11e8-86b1-801844e61950\r\n192.168.16.112 - - [20/Aug/2018:20:20:03 +0800] \"POST /api/user/register HTTP/1.1\" 500 0 \"\" \"PostmanRuntime/7.2.0\"\r\n192.168.16.112 - - [20/Aug/2018:20:20:10 +0800] \"POST /api/user/register HTTP/1.1\" 500 0 \"\" \"PostmanRuntime/7.2.0\"\r\n192.168.16.112 - - [20/Aug/2018:20:20:11 +0800] \"POST /api/user/register HTTP/1.1\" 500 0 \"\" \"PostmanRuntime/7.2.0\"\r\n192.168.16.112 - - [20/Aug/2018:20:20:11 +0800] \"POST /api/user/register HTTP/1.1\" 500 0 \"\" \"PostmanRuntime/7.2.0\"\r\n192.168.16.112 - - [20/Aug/2018:20:23:01 +0800] \"POST /api/user/register HTTP/1.1\" 500 0 \"\" \"PostmanRuntime/7.2.0\"\r\n192.168.16.112 - - [20/Aug/2018:20:23:02 +0800] \"POST /api/user/register HTTP/1.1\" 500 0 \"\" \"PostmanRuntime/7.2.0\"\r\n```","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/296","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/296/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/296/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/296/events","html_url":"https://github.com/micro/go-micro/issues/296","id":350986302,"node_id":"MDU6SXNzdWUzNTA5ODYzMDI=","number":296,"title":"Deploying go-micro on kubernetes using consul for service discovery","user":{"login":"mgyong","id":2178001,"node_id":"MDQ6VXNlcjIxNzgwMDE=","avatar_url":"https://avatars0.githubusercontent.com/u/2178001?v=4","gravatar_id":"","url":"https://api.github.com/users/mgyong","html_url":"https://github.com/mgyong","followers_url":"https://api.github.com/users/mgyong/followers","following_url":"https://api.github.com/users/mgyong/following{/other_user}","gists_url":"https://api.github.com/users/mgyong/gists{/gist_id}","starred_url":"https://api.github.com/users/mgyong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgyong/subscriptions","organizations_url":"https://api.github.com/users/mgyong/orgs","repos_url":"https://api.github.com/users/mgyong/repos","events_url":"https://api.github.com/users/mgyong/events{/privacy}","received_events_url":"https://api.github.com/users/mgyong/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-08-15T22:13:53Z","updated_at":"2018-08-27T11:26:14Z","closed_at":"2018-08-16T06:06:13Z","author_association":"NONE","body":"I am deploying a simple go-micro server on kubernetes using consul for service discovery. I have successfully deployed consul in the kubernetes cluster. However it seems that by default go-micro users localhost:8500 for service discovery. How do i change it to point to my consul cluster on kubernetes for service discovery? In this case the DNS for my consul cluster is  consul-0.consul.app.svc.cluster.local\r\n\r\nI am getting the below error \r\n```\r\n2018/08/15 21:10:17 Starting server mgyongappk8.merlion-app id 9c31fd72-a0cf-11e8-872c-0a580a0c0230\r\n2018/08/15 21:10:17 Listening on [::]:44349\r\n2018/08/15 21:10:17 Broker Listening on [::]:36601\r\n2018/08/15 21:10:17 Registering node: mgyongappk8.merlion-app-9c31fd72-a0cf-11e8-872c-0a580a0c0230\r\n2018/08/15 21:10:17 Put http://127.0.0.1:8500/v1/agent/service/register: dial tcp 127.0.0.1:8500: connect: connection refused\r\n\r\n```\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\"fmt\"\r\n\t\"log\"\r\n\t\"github.com/micro/go-micro/server\"\r\n)\r\n\r\nfunc main(){\r\n\r\n\tmd := map[string]string{\r\n\t\t\"name\":    \"merlion-app service\",\r\n\t\t\"version\": \"v1\",\r\n\t\t\"type\":    \"server\",\r\n\t\t\"url\":     \"mgyongappk8.merlion-app\"\r\n\t}\r\n\r\n\tserver.DefaultServer = server.NewServer(server.Metadata(md))\r\n\r\n\turl, ok := md[\"url\"]\r\n\tif !ok {\r\n\t\terrors.New(\"Error parsing meta\")\r\n\t}\r\n\r\n\tserver.Init(\r\n\t\tserver.Name(url),\r\n\t)\r\n\r\n\tif err := server.Run(); err != nil {\r\n\t\tlog.Fatal(err)\r\n\t}\r\n}\r\n```","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/294","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/294/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/294/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/294/events","html_url":"https://github.com/micro/go-micro/issues/294","id":349946863,"node_id":"MDU6SXNzdWUzNDk5NDY4NjM=","number":294,"title":"Is it possible to add REST handlers to service?","user":{"login":"onrik","id":4413900,"node_id":"MDQ6VXNlcjQ0MTM5MDA=","avatar_url":"https://avatars0.githubusercontent.com/u/4413900?v=4","gravatar_id":"","url":"https://api.github.com/users/onrik","html_url":"https://github.com/onrik","followers_url":"https://api.github.com/users/onrik/followers","following_url":"https://api.github.com/users/onrik/following{/other_user}","gists_url":"https://api.github.com/users/onrik/gists{/gist_id}","starred_url":"https://api.github.com/users/onrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onrik/subscriptions","organizations_url":"https://api.github.com/users/onrik/orgs","repos_url":"https://api.github.com/users/onrik/repos","events_url":"https://api.github.com/users/onrik/events{/privacy}","received_events_url":"https://api.github.com/users/onrik/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-08-13T09:09:52Z","updated_at":"2018-08-13T09:13:13Z","closed_at":"2018-08-13T09:13:13Z","author_association":"NONE","body":"I have a simple service like this. But i need to add some http REST handlers (GET /health for example). Is it possible?\r\n```go\r\npackage main\r\n\r\nimport (\r\n    \"net/http\"\r\n    \"time\"\r\n    \"log\"\r\n\r\n    \"github.com/micro/go-micro\"\r\n    \"github.com/micro/go-micro/server\"\r\n)\r\n\r\nfunc main() {\r\n    configFile := \"/etc/micro/usage.yml\"\r\n\r\n    service := micro.NewService(\r\n        micro.Name(\"micro.usage\"),\r\n        micro.Version(\"1.0\"),\r\n        micro.Flags(common.ConfigFlag(&configFile)),\r\n        micro.RegisterTTL(10*time.Second),\r\n        micro.RegisterInterval(3*time.Second),\r\n    )\r\n    service.Init()\r\n    topic, broker, db := Init(configFile)\r\n\r\n    service.Init(\r\n        micro.Broker(broker),\r\n    )\r\n\r\n    handler := UsageHandler{db: db}\r\n    err := service.Server().Subscribe(\r\n        server.NewSubscriber(topic, handler.TrackUsage),\r\n    )\r\n\r\n    if err != nil {\r\n        log.Fatal(err)\r\n    }\r\n\r\n    if err := service.Run(); err != nil {\r\n        log.Fatal(err)\r\n    }\r\n}\r\n```","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/293","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/293/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/293/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/293/events","html_url":"https://github.com/micro/go-micro/issues/293","id":349003566,"node_id":"MDU6SXNzdWUzNDkwMDM1NjY=","number":293,"title":"how did we considering about knative?","user":{"login":"crazybber","id":3401462,"node_id":"MDQ6VXNlcjM0MDE0NjI=","avatar_url":"https://avatars0.githubusercontent.com/u/3401462?v=4","gravatar_id":"","url":"https://api.github.com/users/crazybber","html_url":"https://github.com/crazybber","followers_url":"https://api.github.com/users/crazybber/followers","following_url":"https://api.github.com/users/crazybber/following{/other_user}","gists_url":"https://api.github.com/users/crazybber/gists{/gist_id}","starred_url":"https://api.github.com/users/crazybber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crazybber/subscriptions","organizations_url":"https://api.github.com/users/crazybber/orgs","repos_url":"https://api.github.com/users/crazybber/repos","events_url":"https://api.github.com/users/crazybber/events{/privacy}","received_events_url":"https://api.github.com/users/crazybber/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-08-09T07:07:23Z","updated_at":"2018-08-09T07:18:26Z","closed_at":"2018-08-09T07:15:23Z","author_association":"NONE","body":"https://cloud.google.com/knative/  & https://github.com/knative/\r\ndid we plan to support it ?","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/291","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/291/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/291/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/291/events","html_url":"https://github.com/micro/go-micro/issues/291","id":348590451,"node_id":"MDU6SXNzdWUzNDg1OTA0NTE=","number":291,"title":"Why don't you use broker.PublishOption","user":{"login":"scholar-ink","id":18609508,"node_id":"MDQ6VXNlcjE4NjA5NTA4","avatar_url":"https://avatars0.githubusercontent.com/u/18609508?v=4","gravatar_id":"","url":"https://api.github.com/users/scholar-ink","html_url":"https://github.com/scholar-ink","followers_url":"https://api.github.com/users/scholar-ink/followers","following_url":"https://api.github.com/users/scholar-ink/following{/other_user}","gists_url":"https://api.github.com/users/scholar-ink/gists{/gist_id}","starred_url":"https://api.github.com/users/scholar-ink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scholar-ink/subscriptions","organizations_url":"https://api.github.com/users/scholar-ink/orgs","repos_url":"https://api.github.com/users/scholar-ink/repos","events_url":"https://api.github.com/users/scholar-ink/events{/privacy}","received_events_url":"https://api.github.com/users/scholar-ink/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-08-08T06:22:24Z","updated_at":"2018-08-08T06:51:59Z","closed_at":"2018-08-08T06:51:59Z","author_association":"NONE","body":"rpc_client.go \r\n\r\n`\r\nfunc (r *rpcClient) Publish(ctx context.Context, msg Message, opts ...broker.PublishOption) error \r\n`\r\ninstead of\r\n\r\n`\r\nfunc (r *rpcClient) Publish(ctx context.Context, msg Message, opts ...PublishOption) error \r\n`\r\n\r\nsuch as \r\n`rpcClient.Publish(ctx, msg,nsq.WithDeferredPublish(ttl[0]));`","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/287","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/287/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/287/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/287/events","html_url":"https://github.com/micro/go-micro/issues/287","id":345119296,"node_id":"MDU6SXNzdWUzNDUxMTkyOTY=","number":287,"title":"Server Handle() method error never handled","user":{"login":"gillesfabio","id":173784,"node_id":"MDQ6VXNlcjE3Mzc4NA==","avatar_url":"https://avatars0.githubusercontent.com/u/173784?v=4","gravatar_id":"","url":"https://api.github.com/users/gillesfabio","html_url":"https://github.com/gillesfabio","followers_url":"https://api.github.com/users/gillesfabio/followers","following_url":"https://api.github.com/users/gillesfabio/following{/other_user}","gists_url":"https://api.github.com/users/gillesfabio/gists{/gist_id}","starred_url":"https://api.github.com/users/gillesfabio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gillesfabio/subscriptions","organizations_url":"https://api.github.com/users/gillesfabio/orgs","repos_url":"https://api.github.com/users/gillesfabio/repos","events_url":
8000
"https://api.github.com/users/gillesfabio/events{/privacy}","received_events_url":"https://api.github.com/users/gillesfabio/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-07-27T07:25:58Z","updated_at":"2018-07-27T08:26:17Z","closed_at":"2018-07-27T08:25:43Z","author_association":"NONE","body":"The RPC server `Handle` method error is never handled. The generated `RegisterServiceHandler` function silently bypasses the `s.Handle()` error return ([here](https://github.com/micro/protoc-gen-micro/blob/master/examples/greeter/greeter.micro.go#L90)). And so [here](https://github.com/micro/go-micro/blob/master/server/rpc_server.go#L155) and [here](https://github.com/micro/go-micro/blob/master/server/rpc_service.go#L161). That means it can be very time consuming to debug a server handler registration error. \r\n\r\n`RegisterServiceHandler` should handle this error with an explicit error return or a `panic`.","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/286","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/286/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/286/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/286/events","html_url":"https://github.com/micro/go-micro/issues/286","id":344779006,"node_id":"MDU6SXNzdWUzNDQ3NzkwMDY=","number":286,"title":"using --registry_address=consul:8500 how to set TCPCheck","user":{"login":"lovelly","id":13118848,"node_id":"MDQ6VXNlcjEzMTE4ODQ4","avatar_url":"https://avatars2.githubusercontent.com/u/13118848?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelly","html_url":"https://github.com/lovelly","followers_url":"https://api.github.com/users/lovelly/followers","following_url":"https://api.github.com/users/lovelly/following{/other_user}","gists_url":"https://api.github.com/users/lovelly/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelly/subscriptions","organizations_url":"https://api.github.com/users/lovelly/orgs","repos_url":"https://api.github.com/users/lovelly/repos","events_url":"https://api.github.com/users/lovelly/events{/privacy}","received_events_url":"https://api.github.com/users/lovelly/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-07-26T10:06:51Z","updated_at":"2018-07-27T17:26:53Z","closed_at":"2018-07-27T17:26:52Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/13118848/43256090-433de8ae-90fe-11e8-9077-37bb884e41a8.png)\r\n\r\ncmd.go Reassigned registry no place to set tcpcheck.","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/285","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/285/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/285/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/285/events","html_url":"https://github.com/micro/go-micro/issues/285","id":344303809,"node_id":"MDU6SXNzdWUzNDQzMDM4MDk=","number":285,"title":"More Error details","user":{"login":"cute-angelia","id":26561606,"node_id":"MDQ6VXNlcjI2NTYxNjA2","avatar_url":"https://avatars2.githubusercontent.com/u/26561606?v=4","gravatar_id":"","url":"https://api.github.com/users/cute-angelia","html_url":"https://github.com/cute-angelia","followers_url":"https://api.github.com/users/cute-angelia/followers","following_url":"https://api.github.com/users/cute-angelia/following{/other_user}","gists_url":"https://api.github.com/users/cute-angelia/gists{/gist_id}","starred_url":"https://api.github.com/users/cute-angelia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cute-angelia/subscriptions","organizations_url":"https://api.github.com/users/cute-angelia/orgs","repos_url":"https://api.github.com/users/cute-angelia/repos","events_url":"https://api.github.com/users/cute-angelia/events{/privacy}","received_events_url":"https://api.github.com/users/cute-angelia/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-07-25T06:01:26Z","updated_at":"2018-07-27T06:25:32Z","closed_at":"2018-07-26T08:34:16Z","author_association":"NONE","body":"i got some errors when client call SRV and SRV not runing\r\n\r\n```\r\n     {\"id\":\"go.micro.client\",\"code\":500,\"detail\":\"none available\",\"status\":\"Internal Server Error\"}\r\n```\r\n\r\nin this error detail,  i don't know which SRV is \"none available\", \r\n\r\nCan there be more error informations, like SRV name, SRV function\r\n\r\nthank you~\r\n","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/284","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/284/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/284/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/284/events","html_url":"https://github.com/micro/go-micro/issues/284","id":344144796,"node_id":"MDU6SXNzdWUzNDQxNDQ3OTY=","number":284,"title":"visibility for client to registered services","user":{"login":"magaldima","id":10351307,"node_id":"MDQ6VXNlcjEwMzUxMzA3","avatar_url":"https://avatars0.githubusercontent.com/u/10351307?v=4","gravatar_id":"","url":"https://api.github.com/users/magaldima","html_url":"https://github.com/magaldima","followers_url":"https://api.github.com/users/magaldima/followers","following_url":"https://api.github.com/users/magaldima/following{/other_user}","gists_url":"https://api.github.com/users/magaldima/gists{/gist_id}","starred_url":"https://api.github.com/users/magaldima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magaldima/subscriptions","organizations_url":"https://api.github.com/users/magaldima/orgs","repos_url":"https://api.github.com/users/magaldima/repos","events_url":"https://api.github.com/users/magaldima/events{/privacy}","received_events_url":"https://api.github.com/users/magaldima/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-07-24T18:05:48Z","updated_at":"2018-07-24T20:29:04Z","closed_at":"2018-07-24T20:29:03Z","author_association":"NONE","body":"I'm interested in having a `Client` have some visibility into the available \"registered\" services. Is there any easy way to expose this and/or add this to the `Client` interface without knowing beforehand the service name?\r\n\r\nThis is essentially analogous to a `Kubernetes Discovery Client`.\r\n\r\n**Proposal:**\r\nModify the `Service` interface to expose a `Discovery` interface.\r\n```\r\n// Service is an interface that wraps the lower level libraries\r\n// within go-micro. Its a convenience method for building\r\n// and initialising services.\r\ntype Service interface {\r\n\tInit(...Option)\r\n\tOptions() Options\r\n\tClient() client.Client\r\n\tServer() server.Server\r\n\tRun() error\r\n        Discovery() discover.Discovery\r\n\tString() string\r\n}\r\n```\r\n\r\nThe Discovery interface should be defined as:\r\n```\r\n// Discovery provides an interface to find and watch Services\r\ntype Discovery interface {\r\n\tGetService(string) ([]*registry.Service, error)\r\n\tListServices() ([]*registry.Service, error)\r\n\tWatch(...registry.WatchOption) (registry.Watcher, error)\r\n}\r\n```\r\n\r\nFinally, this means that the `Registry` interface should be:\r\n```\r\n// The registry provides an interface for service discovery\r\n// and an abstraction over varying implementations\r\n// {consul, etcd, zookeeper, ...}\r\ntype Registry interface {\r\n\tRegister(*Service, ...RegisterOption) error\r\n\tDeregister(*Service) error\r\n\tdiscovery.Discover\r\n\tString() string\r\n\tOptions() Options\r\n}\r\n```\r\n\r\n**Alternative:**\r\nMy other alternative to this, would be to add a simple API to my service that enables a client to ping a service (essentially a way to say: \"if you exist, send me an ack\"). I realize this is very similar to a /health endpoint, but instead of the purpose of tracking the health of a service, I want to track the existence of registered services available to a particular micro client.","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/283","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/283/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/283/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/283/events","html_url":"https://github.com/micro/go-micro/issues/283","id":343987313,"node_id":"MDU6SXNzdWUzNDM5ODczMTM=","number":283,"title":"Consul service mesh","user":{"login":"alexbilbie","id":77991,"node_id":"MDQ6VXNlcjc3OTkx","avatar_url":"https://avatars1.githubusercontent.com/u/77991?v=4","gravatar_id":"","url":"https://api.github.com/users/alexbilbie","html_url":"https://github.com/alexbilbie","followers_url":"https://api.github.com/users/alexbilbie/followers","following_url":"https://api.github.com/users/alexbilbie/following{/other_user}","gists_url":"https://api.github.com/users/alexbilbie/gists{/gist_id}","starred_url":"https://api.github.com/users/alexbilbie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexbilbie/subscriptions","organizations_url":"https://api.github.com/users/alexbilbie/orgs","repos_url":"https://api.github.com/users/alexbilbie/repos","events_url":"https://api.github.com/users/alexbilbie/events{/privacy}","received_events_url":"https://api.github.com/users/alexbilbie/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-07-24T11:00:14Z","updated_at":"2018-09-15T07:00:31Z","closed_at":"2018-09-15T07:00:31Z","author_association":"NONE","body":"I'm just wondering if there any thoughts/plans to integrate with Consul's new service mesh (released in Consul v1.2)?\r\n\r\nAs an alternative, have you got any recommendations on how a permission layer could be integrated with Micro so service X could be given permission to call method Y on service Z?","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/282","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/282/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/282/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/282/events","html_url":"https://github.com/micro/go-micro/issues/282","id":343619851,"node_id":"MDU6SXNzdWUzNDM2MTk4NTE=","number":282,"title":"micro api issue","user":{"login":"yuyongbo","id":17313948,"node_id":"MDQ6VXNlcjE3MzEzOTQ4","avatar_url":"https://avatars3.githubusercontent.com/u/17313948?v=4","gravatar_id":"","url":"https://api.github.com/users/yuyongbo","html_url":"https://github.com/yuyongbo","followers_url":"https://api.github.com/users/yuyongbo/followers","following_url":"https://api.github.com/users/yuyongbo/following{/other_user}","gists_url":"https://api.github.com/users/yuyongbo/gists{/gist_id}","starred_url":"https://api.github.com/users/yuyongbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yuyongbo/subscriptions","organizations_url":"https://api.github.com/users/yuyongbo/orgs","repos_url":"https://api.github.com/users/yuyongbo/repos","events_url":"https://api.github.com/users/yuyongbo/events{/privacy}","received_events_url":"https://api.github.com/users/yuyongbo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-07-23T12:51:43Z","updated_at":"2018-07-24T03:26:04Z","closed_at":"2018-07-23T12:54:22Z","author_association":"NONE","body":"I use service discovery Etcdv3,other problem had resolved,But there has a problem:I don't know how to use the micro api command for providing gateway service. please help me or  take a guide with me .","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/277","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/277/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/277/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/277/events","html_url":"https://github.com/micro/go-micro/issues/277","id":342518613,"node_id":"MDU6SXNzdWUzNDI1MTg2MTM=","number":277,"title":"client GRPC and client.Retries(5) will cause timeouts ?","user":{"login":"gstarikov","id":19396845,"node_id":"MDQ6VXNlcjE5Mzk2ODQ1","avatar_url":"https://avatars0.githubusercontent.com/u/19396845?v=4","gravatar_id":"","url":"https://api.github.com/users/gstarikov","html_url":"https://github.com/gstarikov","followers_url":"https://api.github.com/users/gstarikov/followers","following_url":"https://api.github.com/users/gstarikov/following{/other_user}","gists_url":"https://api.github.com/users/gstarikov/gists{/gist_id}","starred_url":"https://api.github.com/users/gstarikov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gstarikov/subscriptions","organizations_url":"https://api.github.com/users/gstarikov/orgs","repos_url":"https://api.github.com/users/gstarikov/repos","events_url":"https://api.github.com/users/gstarikov/events{/privacy}","received_events_url":"https://api.github.com/users/gstarikov/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-07-18T22:49:04Z","updated_at":"2018-07-20T09:43:36Z","closed_at":"2018-07-20T04:33:52Z","author_association":"NONE","body":"Hello,\r\n\r\n```\r\nimport (\r\n\t\"github.com/micro/go-micro\"\r\n\t\"github.com/micro/go-grpc\"\r\n\t\"github.com/micro/go-micro/selector/cache\"\r\n\tclientGRPC \"github.com/micro/go-plugins/client/grpc\"\r\n)\r\n\r\n...\r\n\r\n\tclientGRPClocal := clientGRPC.NewClient( client.PoolSize(10), client.Selector(cache.NewSelector(cache.TTL(time.Second))), client.Retries(5) )\r\n\r\n\t\tVS\r\n\r\n\tclientGRPClocal := clientGRPC.NewClient( client.PoolSize(10), client.Selector(cache.NewSelector(cache.TTL(time.Second))) )\r\n```\r\n\r\nin first case (when set client.Retries(5)) we catch timeouts (default 5 sec) at 100% of the requests,\r\nat second case (without client.Retries(5)) every thing works as should be.\r\nI can not understand what went wrong and why.\r\n\r\nis it our fault or bug in go-micro?","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/276","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/276/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/276/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/276/events","html_url":"https://github.com/micro/go-micro/issues/276","id":342249695,"node_id":"MDU6SXNzdWUzNDIyNDk2OTU=","number":276,"title":"micro tag problem","user":{"login":"cute-angelia","id":26561606,"node_id":"MDQ6VXNlcjI2NTYxNjA2","avatar_url":"https://avatars2.githubusercontent.com/u/26561606?v=4","gravatar_id":"","url":"https://api.github.com/users/cute-angelia","html_url":"https://github.com/cute-angelia","followers_url":"https://api.github.com/users/cute-angelia/followers","following_url":"https://api.github.com/users/cute-angelia/following{/other_user}","gists_url":"https://api.github.com/users/cute-angelia/gists{/gist_id}","starred_url":"https://api.github.com/users/cute-angelia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cute-angelia/subscriptions","organizations_url":"https://api.github.com/users/cute-angelia/orgs","repos_url":"https://api.github.com/users/cute-angelia/repos","events_url":"https://api.github.com/users/cute-angelia/events{/privacy}","received_events_url":"https://api.github.com/users/cute-angelia/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-07-18T09:34:22Z","updated_at":"2018-07-18T15:01:03Z","closed_at":"2018-07-18T15:01:03Z","author_association":"NONE","body":"hello , i'am use \" mirco api , api, and srv \" , run the mistake for a moment in consul and the http status with 500\r\n\r\n\r\nsome consul log \r\n\r\n```\r\n 2018/07/18 17:29:24 [DEBUG] agent: Service tag \"t-789caa562a294acc2b2ec82f2a51b252ca28292950aa05040000ffff4f930768\" will not be discoverable via DNS due to it being too long. Valid lengths are between 1 and 63 bytes.\r\n    2018/07/18 17:29:24 [DEBUG] agent: Service tag \"t-789caa562a4a4dcf2c2e29aa54b2524acecf2b2ecd51aa05040000ffff560f07c8\" will not be discoverable via DNS due to it being too long. Valid lengths are between 1 and 63 byte\r\n```\r\n\r\nIs there a way?","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/275","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/275/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/275/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/275/events","html_url":"https://github.com/micro/go-micro/issues/275","id":341762784,"node_id":"MDU6SXNzdWUzNDE3NjI3ODQ=","number":275,"title":"Bug: Client pool has not actual usage, micro.Transport does not have keepalived mechanism","user":{"login":"zhujingfa","id":2382988,"node_id":"MDQ6VXNlcjIzODI5ODg=","avatar_url":"https://avatars3.githubusercontent.com/u/2382988?v=4","gravatar_id":"","url":"https://api.github.com/users/zhujingfa","html_url":"https://github.com/zhujingfa","followers_url":"https://api.github.com/users/zhujingfa/followers","following_url":"https://api.github.com/users/zhujingfa/following{/other_user}","gists_url":"https://api.github.com/users/zhujingfa/gists{/gist_id}","starred_url":"https://api.github.com/users/zhujingfa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhujingfa/subscriptions","organizations_url":"https://api.github.com/users/zhujingfa/orgs","repos_url":"https://api.github.com/users/zhujingfa/repos","events_url":"https://api.github.com/users/zhujingfa/events{/privacy}","received_events_url":"https://api.github.com/users/zhujingfa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-07-17T04:35:36Z","updated_at":"2018-07-17T10:52:28Z","closed_at":"2018-07-17T10:52:28Z","author_association":"NONE","body":"micro.Transport has not keepalived mechanism, Set client.PoolSize can not improve qps, pooled conns are all closed ones.\r\n```\r\nfunc (r *rpcClient) call(ctx context.Context, address string, req Request, resp interface{}, opts CallOptions) error {\r\n\t......\r\n\tvar grr error\r\n\tc, err := r.pool.getConn(address, r.opts.Transport, transport.WithTimeout(opts.DialTimeout))\r\n\tif err != nil {\r\n\t\treturn errors.InternalServerError(\"go.micro.client\", \"connection error: %v\", err)\r\n\t}\r\n\tdefer func() {\r\n\t\t// defer execution of release\r\n\t\tr.pool.release(address, c, grr)\r\n\t}()\r\n\tstream := &rpcStream{\r\n\t\tcontext: ctx,\r\n\t\trequest: req,\r\n\t\tclosed:  make(chan bool),\r\n\t\tcodec:   newRpcPlusCodec(msg, c, cf),\r\n\t}\r\n        //will close low level conn every call \r\n\tdefer stream.Close()\r\n        ........\r\n}\r\n```","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/274","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/274/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/274/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/274/events","html_url":"https://github.com/micro/go-micro/issues/274","id":339126725,"node_id":"MDU6SXNzdWUzMzkxMjY3MjU=","number":274,"title":"hello, I want to add net/debug/pprof  to micro srv service, how to do this ","user":{"login":"zjn1234","id":21353379,"node_id":"MDQ6VXNlcjIxMzUzMzc5","avatar_url":"https://avatars0.githubusercontent.com/u/21353379?v=4","gravatar_id":"","url":"https://api.github.com/users/zjn1234","html_url":"https://github.com/zjn1234","followers_url":"https://api.github.com/users/zjn1234/followers","following_url":"https://api.github.com/users/zjn1234/following{/other_user}","gists_url":"https://api.github.com/users/zjn1234/gists{/gist_id}","starred_url":"https://api.github.com/users/zjn1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zjn1234/subscriptions","organizations_url":"https://api.github.com/users/zjn1234/orgs","repos_url":"https://api.github.com/users/zjn1234/repos","events_url":"https://api.github.com/users/zjn1234/events{/privacy}","received_events_url":"https://api.github.com/users/zjn1234/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-07-07T07:56:42Z","updated_at":"2018-07-07T07:58:18Z","closed_at":"2018-07-07T07:58:18Z","author_association":"NONE","body":"","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/273","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/273/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/273/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/273/events","html_url":"https://github.com/micro/go-micro/issues/273","id":334346258,"node_id":"MDU6SXNzdWUzMzQzNDYyNTg=","number":273,"title":"add license header to every source code file","user":{"login":"xiang90","id":4479947,"node_id":"MDQ6VXNlcjQ0Nzk5NDc=","avatar_url":"https://avatars0.githubusercontent.com/u/4479947?v=4","gravatar_id":"","url":"https://api.github.com/users/xiang90","html_url":"https://github.com/xiang90","followers_url":"https://api.github.com/users/xiang90/followers","following_url":"https://api.github.com/users/xiang90/following{/other_user}","gists_url":"https://api.github.com/users/xiang90/gists{/gist_id}","starred_url":"https://api.github.com/users/xiang90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiang90/subscriptions","organizations_url":"https://api.github.com/users/xiang90/orgs","repos_url":"https://api.github.com/users/xiang90/repos","events_url":"https://api.github.com/users/xiang90/events{/privacy}","received_events_url":"https://api.github.com/users/xiang90/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-06-21T05:42:25Z","updated_at":"2018-06-21T15:41:01Z","closed_at":"2018-06-21T07:35:37Z","author_association":"NONE","body":"Please see http://www.apache.org/dev/apply-license.html#new\r\n\r\nexample: https://github.com/coreos/etcd/blob/master/client/auth_role.go#L1-L15","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/272","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/272/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/272/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/272/events","html_url":"https://github.com/micro/go-micro/issues/272","id":334338235,"node_id":"MDU6SXNzdWUzMzQzMzgyMzU=","number":272,"title":"Client connection error","user":{"login":"seaguest","id":498853,"node_id":"MDQ6VXNlcjQ5ODg1Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/498853?v=4","gravatar_id":"","url":"https://api.github.com/users/seaguest","html_url":"https://github.com/seaguest","followers_url":"https://api.github.com/users/seaguest/followers","following_url":"https://api.github.com/users/seaguest/following{/other_user}","gists_url":"https://api.github.com/users/seaguest/gists{/gist_id}","starred_url":"https://api.github.com/users/seaguest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seaguest/subscriptions","organizations_url":"https://api.github.com/users/seaguest/orgs","repos_url":"https://api.github.com/users/seaguest/repos","events_url":"https://api.github.com/users/seaguest/events{/privacy}","received_events_url":"https://api.github.com/users/seaguest/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-21T04:56:31Z","updated_at":"2018-06-21T06:40:04Z","closed_at":"2018-06-21T06:40:04Z","author_association":"NONE","body":"Hello,\r\n\r\nI have a single machine for consul, I started with following command:\r\n\r\n`consul agent -server -client=0.0.0.0 -bind=0.0.0.0 -data-dir /opt/consul/data -syslog -bootstrap-expect 1 \r\n`\r\nThen I started my server on the same machine.\r\n\r\nI tried to specify the consul server on client's side with following code:\r\n\r\n```\r\n\treg := registry.NewRegistry(registry.Addrs(\"public consul ip\"))\r\n\r\n\tservice := micro.NewService(\r\n\t\tmicro.Name(\"greeter.client\"),\r\n\t\tmicro.Version(\"latest\"),\r\n\t\tmicro.Registry(reg),\r\n\t)\r\n\r\n```\r\nThen the client (is running on another machine) call sometimes succeeds, most of the times fails.\r\n\r\n```\r\nroot@dev:~# ./client\r\nxxxxxxxxxxxxxx  // this is correct response\r\nroot@dev:~# \r\nroot@dev:~# \r\nroot@dev:~# ./client\r\n{\"id\":\"go.micro.client\",\"code\":500,\"detail\":\"connection error: dial tcp 172.18.35.70:37749: connect: connection refused\",\"status\":\"Internal Server Error\"}\r\nroot@dev:~# ./client\r\n{\"id\":\"go.micro.client\",\"code\":500,\"detail\":\"connection error: dial tcp 172.18.35.70:37906: connect: connection refused\",\"status\":\"Internal Server Error\"}\r\n\r\n```\r\nEven I tried to run the client on the same machine as server, the result is still the same, it says \"connection error\", why it tries to connect to ports other than 8500? could anyone help?","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/271","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/271/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/271/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/271/events","html_url":"https://github.com/micro/go-micro/issues/271","id":333557710,"node_id":"MDU6SXNzdWUzMzM1NTc3MTA=","number":271,"title":"how to specify the target server for client?","user":{"login":"seaguest","id":498853,"node_id":"MDQ6VXNlcjQ5ODg1Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/498853?v=4","gravatar_id":"","url":"https://api.github.com/users/seaguest","html_url":"https://github.com/seaguest","followers_url":"https://api.github.com/users/seaguest/followers","following_url":"https://api.github.com/users/seaguest/following{/other_user}","gists_url":"https://api.github.com/users/seaguest/gists{/gist_id}","starred_url":"https://api.github.com/users/seaguest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seaguest/subscriptions","organizations_url":"https://api.github.com/users/seaguest/orgs","repos_url":"https://api.github.com/users/seaguest/repos","events_url":"https://api.github.com/users/seaguest/events{/privacy}","received_events_url":"https://api.github.com/users/seaguest/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-06-19T07:54:26Z","updated_at":"2018-06-21T04:00:25Z","closed_at":"2018-06-19T10:29:46Z","author_association":"NONE","body":"Hello,\r\n\r\nI want to run the micro service on one server, and other servers call theres services on that server, is that possible? I didn't find a proper example to do that.\r\n\r\n```\r\n\t// Create a new service. Optionally include some options here.\r\n\tservice := micro.NewService(micro.Name(\"greeter.client\"))\r\n\tservice.Init()\r\n\r\n\t// Create new greeter client\r\n\tgreeter := proto.NewGreeterService(\"greeter\", service.Client())\r\n\r\n\t// Call the greeter\r\n\trsp, err := greeter.Hello(context.TODO(), &proto.HelloRequest{Name: \"John\"})\r\n\tif err != nil {\r\n\t\tfmt.Println(err)\r\n\t}\r\n```\r\n\r\nHere I want to specify the target server where creating the service, how could I achieve that ?\r\n","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/270","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/270/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/270/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/270/events","html_url":"https://github.com/micro/go-micro/issues/270","id":333059641,"node_id":"MDU6SXNzdWUzMzMwNTk2NDE=","number":270,"title":"*.pb.go file     Unable to generate a function to register a micro service to the go-micro server","user":{"login":"YJinHai","id":31155965,"node_id":"MDQ6VXNlcjMxMTU1OTY1","avatar_url":"https://avatars3.githubusercontent.com/u/31155965?v=4","gravatar_id":"","url":"https://api.github.com/users/YJinHai","html_url":"https://github.com/YJinHai","followers_url":"https://api.github.com/users/YJinHai/followers","following_url":"https://api.github.com/users/YJinHai/following{/other_user}","gists_url":"https://api.github.com/users/YJinHai/gists{/gist_id}","starred_url":"https://api.github.com/users/YJinHai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YJinHai/subscriptions","organizations_url":"https://api.github.com/users/YJinHai/orgs","repos_url":"https://api.github.com/users/YJinHai/repos","events_url":"https://api.github.com/users/YJinHai/events{/privacy}","received_events_url":"https://api.github.com/users/YJinHai/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-17T12:38:12Z","updated_at":"2018-06-17T13:39:59Z","closed_at":"2018-06-17T13:39:59Z","author_association":"NONE","body":"Hello, I am following this tutorial, but I have encountered a problem that cannot be solved. I want to implement a warehouse micro-service.\r\nAttach a link to this section:[https://ewanvalentine.io/microservices-in-golang-part-2/](url)\r\nThis is my **Makefile**:\r\n`build:\r\n        protoc -I. --go_out=plugins=micro:$(GOPATH)/src/shippy/consignment-service \\\r\n                proto/consignment/consignment.proto\r\n`\r\n**consignment.proto**:\r\n`\r\nservice ShippingService {\r\n  rpc CreateConsignment(Consignment) returns (Response) {}\r\n  rpc GetConsignments(GetRequest) returns (Response) {}\r\n}`\r\nbut in **main.go**,This service function is not available in pb file after make build\r\n`func main() {\r\n        server := micro.NewService(\r\n                micro.Name(\"go.micro.srv.consignment\"),\r\n                micro.Version(\"latest\"),\r\n        )\r\n        server.Init()\r\n        repo := Repository{}\r\n        pb.RegisterShippingServiceHandler(server.Server(), &service{repo})\r\n        if err := server.Run(); err != nil {\r\n                log.Fatalf(\"failed to serve: %v\", err)\r\n        }\r\n}`\r\n**error**:\r\n`./main.go:76:2: undefined: go_micro_srv_consignment.RegisterShippingServiceHandler`\r\nI just learned micro service. This problem has been bothering me for two days. I can only deal with issues. I am looking forward to your reply.\r\n\r\nThank\r\n","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/267","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/267/labels{/name}","comments
28e7
_url":"https://api.github.com/repos/micro/go-micro/issues/267/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/267/events","html_url":"https://github.com/micro/go-micro/issues/267","id":331963407,"node_id":"MDU6SXNzdWUzMzE5NjM0MDc=","number":267,"title":"Deadlock issue, when HTTPBrocker Connect is called.","user":{"login":"jasimmk","id":759996,"node_id":"MDQ6VXNlcjc1OTk5Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/759996?v=4","gravatar_id":"","url":"https://api.github.com/users/jasimmk","html_url":"https://github.com/jasimmk","followers_url":"https://api.github.com/users/jasimmk/followers","following_url":"https://api.github.com/users/jasimmk/following{/other_user}","gists_url":"https://api.github.com/users/jasimmk/gists{/gist_id}","starred_url":"https://api.github.com/users/jasimmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasimmk/subscriptions","organizations_url":"https://api.github.com/users/jasimmk/orgs","repos_url":"https://api.github.com/users/jasimmk/repos","events_url":"https://api.github.com/users/jasimmk/events{/privacy}","received_events_url":"https://api.github.com/users/jasimmk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-13T11:59:27Z","updated_at":"2018-06-13T15:21:40Z","closed_at":"2018-06-13T15:21:40Z","author_association":"NONE","body":"I was working on a pub sub  poc, \r\na. `server` (single binary) is responsible for generating a proto payload and send to `worker` via a topic\r\nb. `worker` (single binary) is responsible for subscribing to the topic, accept the payload, regenerate another payload and publish it\r\nc. `server` is subscribed to the second type of events generated by `worker`\r\n\r\nWhile testing locally, using mDNS registry, Events are published from `server` and received at `worker` properly, But at the moment,  publish second event, from `worker` to `server`, deadlock happens.\r\n\r\nOn debugging, could see \r\n\r\n```\r\n(h *httpBroker) ServeHTTP(w http.ResponseWriter, req *http.Request)\r\n      .......\r\n\th.RLock()\r\n\tfor _, subscriber := range h.subscribers[topic] {\r\n\t\tif id == subscriber.id {\r\n\t\t\t// sub is sync; crufty rate limiting\r\n\t\t\t// so we don't hose the cpu\r\n\t\t\tsubscriber.fn(p)\r\n\t\t}\r\n\t}\r\n\th.RUnlock()\r\n```\r\nis creating a read lock, and `RUnlock` never happens\r\n\r\nwhile \r\n```\r\nfunc (h *httpBroker) Connect() error {\r\n\th.Lock()\r\n\tdefer h.Unlock()\r\n\r\n\tif h.running {\r\n\t\treturn nil\r\n\t}\r\n```\r\nCreates a full lock, and waits forever to release the read locks.\r\n\r\n<img width=\"1680\" alt=\"deadlock\" src=\"https://user-images.githubusercontent.com/759996/41349989-a410e300-6f22-11e8-8fc4-4a093de38ed9.png\">\r\n\r\n\r\n\r\n\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/266","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/266/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/266/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/266/events","html_url":"https://github.com/micro/go-micro/issues/266","id":331590974,"node_id":"MDU6SXNzdWUzMzE1OTA5NzQ=","number":266,"title":"If the service name contains an underscore, the browser path will not be found","user":{"login":"locxiang","id":6622033,"node_id":"MDQ6VXNlcjY2MjIwMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/6622033?v=4","gravatar_id":"","url":"https://api.github.com/users/locxiang","html_url":"https://github.com/locxiang","followers_url":"https://api.github.com/users/locxiang/followers","following_url":"https://api.github.com/users/locxiang/following{/other_user}","gists_url":"https://api.github.com/users/locxiang/gists{/gist_id}","starred_url":"https://api.github.com/users/locxiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/locxiang/subscriptions","organizations_url":"https://api.github.com/users/locxiang/orgs","repos_url":"https://api.github.com/users/locxiang/repos","events_url":"https://api.github.com/users/locxiang/events{/privacy}","received_events_url":"https://api.github.com/users/locxiang/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-12T13:36:35Z","updated_at":"2018-06-13T15:56:03Z","closed_at":"2018-06-13T15:56:02Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/6622033/41293639-6f5cc056-6e88-11e8-8c7c-6bd87c76bbe7.png)\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/6622033/41293670-82e49d38-6e88-11e8-84ba-77057629d364.png)\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/6622033/41293679-88e62bde-6e88-11e8-9571-37f8ad76ec29.png)\r\n\r\n\r\n```\r\nmicro --registry_address=consul:8500 --register_interval=5 --register_ttl=10 --enable_stats web --namespace=go.micro.web\r\n```","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/265","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/265/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/265/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/265/events","html_url":"https://github.com/micro/go-micro/issues/265","id":330599073,"node_id":"MDU6SXNzdWUzMzA1OTkwNzM=","number":265,"title":"Multiple goroutine call clients","user":{"login":"lovelly","id":13118848,"node_id":"MDQ6VXNlcjEzMTE4ODQ4","avatar_url":"https://avatars2.githubusercontent.com/u/13118848?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelly","html_url":"https://github.com/lovelly","followers_url":"https://api.github.com/users/lovelly/followers","following_url":"https://api.github.com/users/lovelly/following{/other_user}","gists_url":"https://api.github.com/users/lovelly/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelly/subscriptions","organizations_url":"https://api.github.com/users/lovelly/orgs","repos_url":"https://api.github.com/users/lovelly/repos","events_url":"https://api.github.com/users/lovelly/events{/privacy}","received_events_url":"https://api.github.com/users/lovelly/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-08T10:08:54Z","updated_at":"2018-06-08T13:27:13Z","closed_at":"2018-06-08T10:11:26Z","author_association":"NONE","body":"panic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x87c398]\r\n\r\ngoroutine 357944 [running]:\r\nmp/vendor/github.com/micro/go-micro/client.(*rpcClient).Call.func1(0x0, 0xc42063e7c8, 0x7b04be)\r\n        F:/gowork/src/mp/vendor/github.com/micro/go-micro/client/rpc_client.go:299 +0x188\r\nmp/vendor/github.com/micro/go-micro/client.(*rpcClient).Call.func2(0xc421b78720, 0xc421b786c0, 0xc42024b6d8)\r\n        F:/gowork/src/mp/vendor/github.com/micro/go-micro/client/rpc_client.go:315 +0x33\r\ncreated by mp/vendor/github.com/micro/go-micro/client.(*rpcClient).Call\r\n        F:/gowork/src/mp/vendor/github.com/micro/go-micro/client/rpc_client.go:314 +0x4a1\r\n","score":1.0},{"url":"https://api.github.com/repos/micro/go-micro/issues/263","repository_url":"https://api.github.com/repos/micro/go-micro","labels_url":"https://api.github.com/repos/micro/go-micro/issues/263/labels{/name}","comments_url":"https://api.github.com/repos/micro/go-micro/issues/263/comments","events_url":"https://api.github.com/repos/micro/go-micro/issues/263/events","html_url":"https://github.com/micro/go-micro/issues/263","id":327250272,"node_id":"MDU6SXNzdWUzMjcyNTAyNzI=","number":263,"title":"How do I properly allow overriding HTTP Transport's default Dial func?","user":{"login":"sthetz","id":3657010,"node_id":"MDQ6VXNlcjM2NTcwMTA=","avatar_url":"https://avatars2.githubusercontent.com/u/3657010?v=4","gravatar_id":"","url":"https://api.github.com/users/sthetz","html_url":"https://github.com/sthetz","followers_url":"https://api.github.com/users/sthetz/followers","following_url":"https://api.github.com/users/sthetz/following{/other_user}","gists_url":"https://api.github.com/users/sthetz/gists{/gist_id}","starred_url":"https://api.github.com/users/sthetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sthetz/subscriptions","organizations_url":"https://api.github.com/users/sthetz/orgs","repos_url":"https://api.github.com/users/sthetz/repos","events_url":"https://api.github.com/users/sthetz/events{/privacy}","received_events_url":"https://api.github.com/users/sthetz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-29T09:58:23Z","updated_at":"2018-05-29T10:15:23Z","closed_at":"2018-05-29T10:15:23Z","author_association":"NONE","body":"Hello!\r\nI am very excited about go-micro and want to thank all the contributors for the great work you are doing. \r\n\r\nMy business needs require using custom Dial function to communicate with microservices in my environment. Unfortunately I couldn't find how to do it properly, and came up with this quick and dirty hack: https://github.com/sthetz/go-micro/commit/95638e3ff433a85ec42b39c51ef577f62baaf69a\r\n\r\nIf I understand your architecture correctly, the proper way would be to use `transport.Option`/`transport.DialOption` to set the Dialer, but I couldn't figure out how to do that. I tried adding a field to these structs and exposing setter functions to set that field, but in `func (h *httpTransport) Dial(addr string, opts ...DialOption) (Client, error)` the `httpTransport` didn't have the Dialer that I set. \r\n\r\nAm I right in assuming that something like this wouldn't work at the moment?\r\n\r\n```\r\nmicro.NewService(\r\n  micro.Transport(\r\n    transport.NewTransport(\r\n      transport.WithDialer(customDialer), // would-be setter function for overriding the dial\r\n    ),\r\n  ),\r\n)\r\n```\r\n\r\n","score":1.0}]}
0

