HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Tue, 03 Jul 2018 02:33:23 GMT
Link: <https://api.github.com/search/issues?q=repo%3Aapache%2Fcouchdb+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Aapache%2Fcouchdb+type%3Aissue+state%3Aclosed&page=12>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: C1A1:77E4:291D0A5:5BE1A52:5B3AE072
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 28
X-Ratelimit-Reset: 1530585263
X-Runtime-Rack: 0.368408
X-Xss-Protection: 1; mode=block

8000
{"total_count":357,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/apache/couchdb/issues/1420","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1420/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1420/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1420/events","html_url":"https://github.com/apache/couchdb/issues/1420","id":337274552,"node_id":"MDU6SXNzdWUzMzcyNzQ1NTI=","number":1420,"title":"can not install couchdb under centos 7","user":{"login":"hanbi918","id":39208283,"node_id":"MDQ6VXNlcjM5MjA4Mjgz","avatar_url":"https://avatars1.githubusercontent.com/u/39208283?v=4","gravatar_id":"","url":"https://api.github.com/users/hanbi918","html_url":"https://github.com/hanbi918","followers_url":"https://api.github.com/users/hanbi918/followers","following_url":"https://api.github.com/users/hanbi918/following{/other_user}","gists_url":"https://api.github.com/users/hanbi918/gists{/gist_id}","starred_url":"https://api.github.com/users/hanbi918/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanbi918/subscriptions","organizations_url":"https://api.github.com/users/hanbi918/orgs","repos_url":"https://api.github.com/users/hanbi918/repos","events_url":"https://api.github.com/users/hanbi918/events{/privacy}","received_events_url":"https://api.github.com/users/hanbi918/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-07-01T08:40:56Z","updated_at":"2018-07-02T02:50:38Z","closed_at":"2018-07-02T02:50:38Z","author_association":"NONE","body":"when i install couchdb refer to this doc: http://docs.couchdb.org/en/2.1.1/install/unix.html#installation-using-the-apache-couchdb-convenience-binary-packages, i get following error:\r\n```====================================================================================================\r\n Package        Arch          Version                      Repository                          Size\r\n====================================================================================================\r\nInstalling:\r\n couchdb        x86_64        2.1.1-2.el7.centos           bintray--apache-couchdb-rpm         18 M\r\n\r\nTransaction Summary\r\n====================================================================================================\r\nInstall  1 Package\r\n\r\nTotal download size: 18 M\r\nInstalled size: 39 M\r\nIs this ok [y/d/N]: y\r\nDownloading packages:\r\ncouchdb-2.1.1-2.el7.centos.x86 FAILED                                           14 MB  00:00:00 ETA\r\nhttp://apache.bintray.com/couchdb-rpm/el7/x86_64/couchdb-2.1.1-2.el7.centos.x86_64.rpm: [Errno -1] Package does not match intended download. Suggestion: run yum --enablerepo=bintray--apache-couchdb-rpm clean metadata\r\nTrying other mirror.\r\n\r\n\r\nError downloading packages:\r\n  couchdb-2.1.1-2.el7.centos.x86_64: [Errno 256] No more mirrors to try.\r\n```\r\n\r\n\r\nanybody can help me solve this problem!\r\nthanks!","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1415","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1415/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1415/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1415/events","html_url":"https://github.com/apache/couchdb/issues/1415","id":336118729,"node_id":"MDU6SXNzdWUzMzYxMTg3Mjk=","number":1415,"title":" mango $regex Search with special character throw a bad request when input a string contains \"+++\" ","user":{"login":"pttien","id":8980287,"node_id":"MDQ6VXNlcjg5ODAyODc=","avatar_url":"https://avatars0.githubusercontent.com/u/8980287?v=4","gravatar_id":"","url":"https://api.github.com/users/pttien","html_url":"https://github.com/pttien","followers_url":"https://api.github.com/users/pttien/followers","following_url":"https://api.github.com/users/pttien/following{/other_user}","gists_url":"https://api.github.com/users/pttien/gists{/gist_id}","starred_url":"https://api.github.com/users/pttien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pttien/subscriptions","organizations_url":"https://api.github.com/users/pttien/orgs","repos_url":"https://api.github.com/users/pttien/repos","events_url":"https://api.github.com/users/pttien/events{/privacy}","received_events_url":"https://api.github.com/users/pttien/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-27T08:03:05Z","updated_at":"2018-06-27T17:23:25Z","closed_at":"2018-06-27T17:20:30Z","author_association":"NONE","body":"## Steps to Reproduce (for bugs)\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n1.create a document content \"+++\" in 1 field, \r\n2. use mango search by regex \r\n\r\n![image](https://user-images.githubusercontent.com/8980287/41960814-eb7fe5b2-7a1a-11e8-9048-16b97fcc2871.png)\r\n\r\nand see the error\r\n![image](https://user-images.githubusercontent.com/8980287/41960955-48435608-7a1b-11e8-9349-626258db7bd6.png)\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1410","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1410/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1410/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1410/events","html_url":"https://github.com/apache/couchdb/issues/1410","id":335395066,"node_id":"MDU6SXNzdWUzMzUzOTUwNjY=","number":1410,"title":"Rewrite as function in 1.7.1","user":{"login":"johs","id":48370,"node_id":"MDQ6VXNlcjQ4Mzcw","avatar_url":"https://avatars2.githubusercontent.com/u/48370?v=4","gravatar_id":"","url":"https://api.github.com/users/johs","html_url":"https://github.com/johs","followers_url":"https://api.github.com/users/johs/followers","following_url":"https://api.github.com/users/johs/following{/other_user}","gists_url":"https://api.github.com/users/johs/gists{/gist_id}","starred_url":"https://api.github.com/users/johs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johs/subscriptions","organizations_url":"https://api.github.com/users/johs/orgs","repos_url":"https://api.github.com/users/johs/repos","events_url":"https://api.github.com/users/johs/events{/privacy}","received_events_url":"https://api.github.com/users/johs/received_events","type":"User","site_admin":false},"labels":[{"id":595166845,"node_id":"MDU6TGFiZWw1OTUxNjY4NDU=","url":"https://api.github.com/repos/apache/couchdb/labels/1.x","name":"1.x","color":"BFD4F2","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-06-25T12:56:50Z","updated_at":"2018-06-26T18:35:02Z","closed_at":"2018-06-26T18:35:02Z","author_association":"NONE","body":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n## Expected Behavior\r\n<!--- If you're describing a bug, tell us what should happen -->\r\n<!--- If you're suggesting a change/improvement, tell us how it should work -->\r\n\r\n### Rewrite section a is stringified function\r\n‘Rewrite using JS’ feature was introduced in CouchDB 1.7. If the rewrites field is a stringified function, query server is used to pre-process and route a request.\r\nhttp://docs.couchdb.org/en/2.1.1/api/ddoc/rewrites.html\r\n\r\n## Current Behavior\r\n<!--- If describing a bug, tell us what happens instead of the expected behavior -->\r\n<!--- If suggesting a change/improvement, explain the difference from current behavior -->\r\nInstalled CouchDB 1.7.1 from source on both Ubuntu and OSX, rewrite seems to be working like 1.6 version, reporting \r\n\r\n    {\"error\":\"rewrite_error\",\"reason\":\"Rewrite rules are a String. They must be a JSON Array.\"}\r\n\r\n... when served design document with rewrite function that works fine in 2.1.1","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1402","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1402/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1402/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1402/events","html_url":"https://github.com/apache/couchdb/issues/1402","id":334874205,"node_id":"MDU6SXNzdWUzMzQ4NzQyMDU=","number":1402,"title":"CouchDB not working on Windows Linux Subsystem","user":{"login":"peter17ji","id":29380055,"node_id":"MDQ6VXNlcjI5MzgwMDU1","avatar_url":"https://avatars2.githubusercontent.com/u/29380055?v=4","gravatar_id":"","url":"https://api.github.com/users/peter17ji","html_url":"https://github.com/peter17ji","followers_url":"https://api.github.com/users/peter17ji/followers","following_url":"https://api.github.com/users/peter17ji/following{/other_user}","gists_url":"https://api.github.com/users/peter17ji/gists{/gist_id}","starred_url":"https://api.github.com/users/peter17ji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peter17ji/subscriptions","organizations_url":"https://api.github.com/users/peter17ji/orgs","repos_url":"https://api.github.com/users/peter17ji/repos","events_url":"https://api.github.com/users/peter17ji/events{/privacy}","received_events_url":"https://api.github.com/users/peter17ji/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-22T13:16:12Z","updated_at":"2018-06-22T13:33:46Z","closed_at":"2018-06-22T13:33:46Z","author_association":"NONE","body":"<!--- Provide a general summary of the issue in the Title above -->\r\nCouchDB can't be started after installing from Launchpad PPA.\r\n\r\n## Expected Behavior\r\n<!--- If you're describing a bug, tell us what should happen -->\r\nThis is my first time installing CouchDB.  I'm trying to start the service after installation.\r\n\r\n## Current Behavior\r\n<!--- If describing a bug, tell us what happens instead of the expected behavior -->\r\npeter@DESKTOP:/mnt/c/Users/peter$ sudo add-apt-repository ppa:couchdb/stable -y\r\ngpg: keyring `/tmp/tmpp9604qin/secring.gpg' created\r\ngpg: keyring `/tmp/tmpp9604qin/pubring.gpg' created\r\ngpg: requesting key C17EAB57 from hkp server keyserver.ubuntu.com\r\ngpg: /tmp/tmpp9604qin/trustdb.gpg: trustdb created\r\ngpg: key C17EAB57: public key \"Launchpad PPA for Apache CouchDB\" imported\r\ngpg: Total number processed: 1\r\ngpg:               imported: 1  (RSA: 1)\r\nOK\r\npeter@DESKTOP:/mnt/c/Users/peter$ sudo apt update\r\nHit:1 http://mirrors.163.com/ubuntu xenial InRelease\r\nHit:2 http://mirrors.163.com/ubuntu xenial-security InRelease\r\nHit:3 http://mirrors.163.com/ubuntu xenial-updates InRelease\r\nHit:4 http://mirrors.163.com/ubuntu xenial-proposed InRelease\r\nHit:5 http://mirrors.163.com/ubuntu xenial-backports InRelease\r\nGet:6 http://ppa.launchpad.net/couchdb/stable/ubuntu xenial InRelease [17.6 kB]\r\nGet:7 http://ppa.launchpad.net/couchdb/stable/ubuntu xenial/main amd64 Packages [1,139 B]\r\nGet:8 http://ppa.launchpad.net/couchdb/stable/ubuntu xenial/main Translation-en [849 B]\r\nFetched 19.5 kB in 7s (2,648 B/s)\r\nReading package lists... Done\r\nBuilding dependency tree\r\nReading state information... Done\r\nAll packages are up to date.\r\npeter@DESKTOP-43HDKBI:/mnt/c/Users/peter$ sudo apt install couchdb -y\r\nReading package lists... Done\r\nBuilding dependency tree\r\nReading state information... Done\r\nThe following additional packages will be installed:\r\n  couchdb-bin couchdb-common erlang-asn1 erlang-base-hipe erlang-crypto erlang-eunit erlang-inets erlang-mnesia\r\n  erlang-os-mon erlang-public-key erlang-runtime-tools erlang-snmp erlang-ssl erlang-syntax-tools erlang-tools\r\n  erlang-webtool erlang-xmerl libmozjs185-1.0 libnspr4 libsctp1\r\nSuggested packages:\r\n  erlang erlang-manpages erlang-doc erlang-edoc erlang-gs erlang-observer lksctp-tools\r\nThe following NEW packages will be installed:\r\n  couchdb couchdb-bin couchdb-common erlang-asn1 erlang-base-hipe erlang-crypto erlang-eunit erlang-inets\r\n  erlang-mnesia erlang-os-mon erlang-public-key erlang-runtime-tools erlang-snmp erlang-ssl erlang-syntax-tools\r\n  erlang-tools erlang-webtool erlang-xmerl libmozjs185-1.0 libnspr4 libsctp1\r\n0 upgraded, 21 newly installed, 0 to remove and 0 not upgraded.\r\nNeed to get 21.3 MB of archives.\r\nProcessing triggers for ureadahead (0.100.0-19) ...\r\nSetting up couchdb-common (1.6.1-0ubuntu6ppa2~xenial1) ...\r\nSetting up erlang-base-hipe (1:18.3-dfsg-1ubuntu3.1) ...\r\nSearching for services which depend on erlang and should be started...none found.\r\nSetting up erlang-crypto (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-eunit (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-mnesia (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-runtime-tools (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-asn1 (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-public-key (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-ssl (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-inets (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-snmp (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-os-mon (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-syntax-tools (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-webtool (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-tools (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up erlang-xmerl (1:18.3-dfsg-1ubuntu3.1) ...\r\nSetting up libnspr4:amd64 (2:4.13.1-0ubuntu0.16.04.1) ...\r\nSetting up libmozjs185-1.0 (1.8.5-1.0.0+dfsg-4.5) ...\r\nSetting up couchdb-bin (1.6.1-0ubuntu6ppa2~xenial1) ...\r\nSetting up couchdb (1.6.1-0ubuntu6ppa2~xenial1) ...\r\ninvoke-rc.d: unknown initscript, /etc/init.d/couchdb not found.\r\ninvoke-rc.d: could not determine current runlevel\r\nSetting up libsctp1:amd64 (1.0.16+dfsg-3) ...\r\nProcessing triggers for libc-bin (2.23-0ubuntu10) ...\r\nProcessing triggers for ureadahead (0.100.0-19) ...\r\npeter@DESKTOP:/mnt/c/Users/peter$ sudo service couchdb start\r\n[sudo] password for peter:\r\ncouchdb: unrecognized service\r\npeter@DESKTOP:/mnt/c/Users/peter$ sudo start couchdb\r\nsudo: start: command not found\r\npeter@DESKTOP:/mnt/c/Users/peter$ uname -a\r\nLinux DESKTOP 4.4.0-17134-Microsoft #112-Microsoft Thu Jun 07 22:57:00 PST 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n## Possible Solution\r\n<!--- Not obligatory, but suggest a fix/reason for the bug, -->\r\nMaybe properly write to /etc/init.d path?\r\n\r\n## Steps to Reproduce (for bugs)\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n4.\r\n\r\n## Context\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used:\r\n* Browser Name and version:\r\n* Operating System and version (desktop or mobile):\r\n* Link to your project:\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1395","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1395/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1395/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1395/events","html_url":"https://github.com/apache/couchdb/issues/1395","id":333900048,"node_id":"MDU6SXNzdWUzMzM5MDAwNDg=","number":1395,"title":"query view with multiple key values, but get wrong result","user":{"login":"altairlee","id":18165265,"node_id":"MDQ6VXNlcjE4MTY1MjY1","avatar_url":"https://avatars2.githubusercontent.com/u/18165265?v=4","gravatar_id":"","url":"https://api.github.com/users/altairlee","html_url":"https://github.com/altairlee","followers_url":"https://api.github.com/users/altairlee/followers","following_url":"https://api.github.com/users/altairlee/following{/other_user}","gists_url":"https://api.github.com/users/altairlee/gists{/gist_id}","starred_url":"https://api.github.com/users/altairlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/altairlee/subscriptions","organizations_url":"https://api.github.com/users/altairlee/orgs","repos_url":"https://api.github.com/users/altairlee/repos","events_url":"https://api.github.com/users/altairlee/events{/privacy}","received_events_url":"https://api.github.com/users/altairlee/received_events","type":"User","site_admin":false},"labels":[{"id":594291811,"node_id":"MDU6TGFiZWw1OTQyOTE4MTE=","url":"https://api.github.com/repos/apache/couchdb/labels/invalid","name":"invalid","color":"D2DAE1","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-06-20T02:13:01Z","updated_at":"2018-06-21T06:41:02Z","closed_at":"2018-06-20T04:58:01Z","author_association":"NONE","body":"I create a view with the Map function:\r\n\r\n    function(doc) {\r\n        if (doc.market == \"m_warehouse\") {\r\n            emit([doc.logTime,doc.dbName,doc.tableName], 1);\r\n        }\r\n    }\r\n\r\nand using the api to query :\r\n\r\n    http://10.23.244.33:8080/org1channel_access%24record/_design/_v_select_data/_view/new-view/?limit=10&skip=0&include_docs=false&reduce=false&descending=true&startkey=[\"2018-06-19T09:16:47,527\",\"stage\"]&endkey=[\"2018-06-19T09:16:43,717\",\"stage\"]\r\n\r\n&startkey=[\"2018-06-19T09:16:47,527\",\"stage\"]&endkey=[\"2018-06-19T09:16:43,717\",\"stage\"]\r\n\r\nbut I got the result : \r\n\r\n    {\r\n    \"total_rows\": 248133,\r\n    \"offset\": 248129,\r\n    \"rows\": [\r\n        {\r\n            \"id\": \"01CGBPYVXVD88FPDVR3NP50VJW\",\r\n            \"key\": [\r\n                \"2018-06-19T09:16:47,527\",\r\n                \"ods\",\r\n                \"o_ad_dsp_pvlog_realtime\"\r\n            ],\r\n            \"value\": 1\r\n        },\r\n        {\r\n            \"id\": \"01CGBQ6JMEBR8KBMB8T7Q7CZY3\",\r\n            \"key\": [\r\n                \"2018-06-19T09:16:44,824\",\r\n                \"stage\",\r\n                \"s_ad_ztc_realpv_base_indirect\"\r\n            ],\r\n            \"value\": 1\r\n        },\r\n        {\r\n            \"id\": \"01CGBQ4BKT8S2VDMT2RGH1FQ71\",\r\n            \"key\": [\r\n                \"2018-06-19T09:16:44,707\",\r\n                \"stage\",\r\n                \"s_ad_ztc_realpv_base_indirect\"\r\n            ],\r\n            \"value\": 1\r\n        },\r\n        {\r\n            \"id\": \"01CGBQ18CBHQX3F28649YH66B9\",\r\n            \"key\": [\r\n                \"2018-06-19T09:16:43,717\",\r\n                \"stage\",\r\n                \"s_ad_ztc_realpv_base_indirect\"\r\n            ],\r\n            \"value\": 1\r\n        }\r\n      ]\r\n    }\r\n-------------\r\n\r\nthe key `ods` should not in the result.\r\n\r\ndid I do something wrong ?","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1389","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1389/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1389/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1389/events","html_url":"https://github.com/apache/couchdb/issues/1389","id":332783218,"node_id":"MDU6SXNzdWUzMzI3ODMyMTg=","number":1389,"title":"View with wrong result, filtering by year month date","user":{"login":"touy","id":122671,"node_id":"MDQ6VXNlcjEyMjY3MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/122671?v=4","gravatar_id":"","url":"https://api.github.com/users/touy","html_url":"https://github.com/touy","followers_url":"https://api.github.com/users/touy/followers","following_url":"https://api.github.com/users/touy/following{/other_user}","gists_url":"https://api.github.com/users/touy/gists{/gist_id}","starred_url":"https://api.github.com/users/touy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/touy/subscriptions","organizations_url":"https://api.github.com/users/touy/orgs","repos_url":"https://api.github.com/users/touy/repos","events_url":"https://api.github.com/users/touy/events{/privacy}","received_events_url":"https://api.github.com/users/touy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-06-15T13:53:17Z","updated_at":"2018-06-17T15:29:37Z","closed_at":"2018-06-17T04:29:57Z","author_association":"NONE","body":"I have create a view to filter data by year , month, day , code as below\r\nfunction (doc) {\r\n     var d = new Date(doc.gpstime); \r\nif (d != null) {\r\n var key = [d.getFullYear(),d.getMonth()+1,d.getDate()\r\n];\r\nemit([key,doc.imei], null);\r\n} \r\n}\r\n- couchdb 2.0 and 2.1.1 ( I thought it was about the version then I upgrade from 2.0 to 2.1, but it's not)\r\n- nodejs V10\r\n- Centos 6.5\r\nwhich above code , working perfectly on Windows ( I guessed!) because I download backup from Centos server 6.5 and re insert to couchdb on Windows , \r\nabove code is to call all data with specific year , month and date, then I would put them in to array for processing , \r\nthere are processes that I call that function \r\n- auto by timer , every 5 minutes\r\n- and manually \r\nby the way , there are some data from the next date shown, as i queried for 2018,6,14  but there are some data from 2018,6,15 \r\n, then I tried to search data on browser with id that shown on 2018,6,14 , and found  it is not exist \r\n on 2018,6,15 \r\n, then I updated that data  ( just changed some text value) , then I search on webrowser again on 2018,6,14 then I could not found it there , but I found on 2018,6,14 so this is the solution to fix this issue \r\nwhy it has this strange behavior , the result of view was wrong ? \r\nI didn't config any clusters on my server\r\n\r\nthe result on the console right hand side\r\n![image](https://user-images.githubusercontent.com/122671/41471653-73941d42-70de-11e8-82fa-639d56bb37eb.png)\r\n![image](https://user-images.githubusercontent.com/122671/41471668-7c2ddff6-70de-11e8-80e0-14eaac7d751a.png)\r\n\r\n\r\n\r\n\r\nI query on webbrowser \r\n\r\n![image](https://user-images.githubusercontent.com/122671/41471683-89eef0b2-70de-11e8-8373-f4d6723a665c.png)\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1388","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1388/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1388/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1388/events","html_url":"https://github.com/apache/couchdb/issues/1388","id":332634644,"node_id":"MDU6SXNzdWUzMzI2MzQ2NDQ=","number":1388,"title":"Couchdb documentation for json index definition is unclear on support for indexing array fields","user":{"login":"worldspawn","id":819581,"node_id":"MDQ6VXNlcjgxOTU4MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/819581?v=4","gravatar_id":"","url":"https://api.github.com/users/worldspawn","html_url":"https://github.com/worldspawn","followers_url":"https://api.github.com/users/worldspawn/followers","following_url":"https://api.github.com/users/worldspawn/following{/other_user}","gists_url":"https://api.github.com/users/worldspawn/gists{/gist_id}","starred_url":"https://api.github.com/users/worldspawn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/worldspawn/subscriptions","organizations_url":"https://api.github.com/users/worldspawn/orgs","repos_url":"https://api.github.com/users/worldspawn/repos","events_url":"https://api.github.com/users/worldspawn/events{/privacy}","received_events_url":"https://api.github.com/users/worldspawn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-06-15T03:25:54Z","updated_at":"2018-06-18T23:11:10Z","closed_at":"2018-06-18T23:04:13Z","author_association":"NONE","body":"The documentation here http://docs.couchdb.org/en/2.1.1/api/database/find.html#db-index says \r\n\r\n>Index object format for JSON type indexes\r\n>The index object is a JSON array of field names following the sort syntax. Nested fields are also allowed, e.g. “person.name”.\r\n\r\nIt doesn't explicitly state that indexing array fields is allowed. It doesnt' provide an example of how to do it if it is.\r\n\r\nTo clarify, given: \r\n```{\r\n  \"_id\": \"theid\",\r\n  \"results\": [\r\n    { \"type\": \"sometype\" }\r\n  ]\r\n}\r\n```\r\n\r\nI know i can query that with the $elemMatch selector but can it be indexed too? I've read a few examples suggesting that a notation like \"results[].type\" or \"results.[].type\" can be used but in my own tests I always get a warning stating that no matching index could be found.\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1385","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1385/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1385/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1385/events","html_url":"https://github.com/apache/couchdb/issues/1385","id":332154530,"node_id":"MDU6SXNzdWUzMzIxNTQ1MzA=","number":1385,"title":"3 Node Properly Configured Cluster, 1 Node get 'stolen', There seems to be no way to heal","user":{"login":"seigel","id":15181,"node_id":"MDQ6VXNlcjE1MTgx","avatar_url":"https://avatars0.githubusercontent.com/u/15181?v=4","gravatar_id":"","url":"https://api.github.com/users/seigel","html_url":"https://github.com/seigel","followers_url":"https://api.github.com/users/seigel/followers","following_url":"https://api.github.com/users/seigel/following{/other_user}","gists_url":"https://api.github.com/users/seigel/gists{/gist_id}","starred_url":"https://api.github.com/users/seigel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seigel/subscriptions","organizations_url":"https://api.github.com/users/seigel/orgs","repos_url":"https://api.github.com/users/seigel/repos","events_url":"https://api.github.com/users/seigel/events{/privacy}","received_events_url":"https://api.github.com/users/seigel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-06-13T20:37:27Z","updated_at":"2018-06-15T06:01:32Z","closed_at":"2018-06-14T03:42:28Z","author_association":"NONE","body":"<!--- Provide a general summary of the issue in the Title above -->\r\n'Stolen' == I no longer have access to that machine nor its data.\r\n'Properly Configured' == Having 3 replicas of the data on 3 different nodes to be happy.\r\n\r\nNOTE: my understanding of q=9, n=3 could be flawed as well...\r\n\r\n## Expected Behavior\r\n<!--- If you're describing a bug, tell us what should happen -->\r\nIf this is a bug, then I would have expected that when Node C was 'stolen', and the system administrator replaced it with a shiny new machine from costco, that the cluster would be happy again.  Every piece of data would have succeeded in satisfying the (3 copies) requirement for the cluster.\r\n\r\n<!--- If you're suggesting a change/improvement, tell us how it should work -->\r\nIf this is not a bug, and is expected behaviour, then what is the documented way to recover?\r\n\r\n\r\n## Current Behavior\r\n<!--- If describing a bug, tell us what happens instead of the expected behavior -->\r\nIf it is a bug, then the cluster is not rebalancing the data to the new node for the data that is violating the 3 replica constraint.  New data seems to be being properly allocated to the new node.\r\n\r\n<!--- If suggesting a change/improvement, explain the difference from current behavior -->\r\nIf this behaviour isn't a bug, then I'd suggest that cluster can either, when told or automatically, use the new node to take the place of the 'stolen' one.\r\n\r\n## Possible Solution\r\n<!--- Not obligatory, but suggest a fix/reason for the bug, -->\r\nAs IT / OPS it is hard to know how to FIX a cluster when a node gets 'stolen'\r\n<!--- or ideas how to implement the addition or change -->\r\n\r\n## Steps to Reproduce (for bugs)\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n1. Set up a 3 node cluster with settings (q=9, n=3)\r\n2. Add enough data so that each of the three nodes is adequately doing its part\r\n3. Shut off node 3\r\n4. Connect a 4th node to the cluster.  Shards from any old data that might be in violation do not show up.\r\n\r\n## Context\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\nTrying to write up playbooks for IT/OPS support and not knowing how to get them to make the cluster healthy again when a single node loses it all.\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\nMachines in AWS can disappear.  What do we do when that happens and we have a very large cluster of data?\r\n\r\nTHANKS in ADVANCE!\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: 2.1.1\r\n* Browser Name and version: n/a\r\n* Operating System and version (desktop or mobile): n/a\r\n* Link to your project: n/a\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1381","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1381/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1381/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1381/events","html_url":"https://github.com/apache/couchdb/issues/1381","id":330981677,"node_id":"MDU6SXNzdWUzMzA5ODE2Nzc=","number":1381,"title":"Possibility of running CouchDB in same BEAM as Erlang/Elixir app? ","user":{"login":"Qqwy","id":5345745,"node_id":"MDQ6VXNlcjUzNDU3NDU=","avatar_url":"https://avatars2.githubusercontent.com/u/5345745?v=4","gravatar_id":"","url":"https://api.github.com/users/Qqwy","html_url":"https://github.com/Qqwy","followers_url":"https://api.github.com/users/Qqwy/followers","following_url":"https://api.github.com/users/Qqwy/following{/other_user}","gists_url":"https://api.github.com/users/Qqwy/gists{/gist_id}","starred_url":"https://api.github.com/users/Qqwy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qqwy/subscriptions","organizations_url":"https://api.github.com/users/Qqwy/orgs","repos_url":"https://api.github.com/users/Qqwy/repos","events_url":"https://api.github.com/users/Qqwy/events{/privacy}","received_events_url":"https://api.github.com/users/Qqwy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-10T16:18:20Z","updated_at":"2018-06-11T05:35:12Z","closed_at":"2018-06-11T05:35:12Z","author_association":"NONE","body":"We are building an application using Elixir, and we are wondering how difficult it would be to talk to CouchDB directly, because it feels like a shame to run it seoarately in its own BEAM and perform serialization/deserialization of data structures all the time.\r\n\r\nIs this in any way possible, or is CouchDB currently just not built for that?","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1378","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1378/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1378/comments","events_url":"https://api.github.com/repos/apache/couchdb
8000
/issues/1378/events","html_url":"https://github.com/apache/couchdb/issues/1378","id":330099456,"node_id":"MDU6SXNzdWUzMzAwOTk0NTY=","number":1378,"title":"Purge throws \"this feature is not yet implemented\"","user":{"login":"tudordumitriu","id":4671554,"node_id":"MDQ6VXNlcjQ2NzE1NTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/4671554?v=4","gravatar_id":"","url":"https://api.github.com/users/tudordumitriu","html_url":"https://github.com/tudordumitriu","followers_url":"https://api.github.com/users/tudordumitriu/followers","following_url":"https://api.github.com/users/tudordumitriu/following{/other_user}","gists_url":"https://api.github.com/users/tudordumitriu/gists{/gist_id}","starred_url":"https://api.github.com/users/tudordumitriu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tudordumitriu/subscriptions","organizations_url":"https://api.github.com/users/tudordumitriu/orgs","repos_url":"https://api.github.com/users/tudordumitriu/repos","events_url":"https://api.github.com/users/tudordumitriu/events{/privacy}","received_events_url":"https://api.github.com/users/tudordumitriu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-06-07T02:58:54Z","updated_at":"2018-06-08T13:31:28Z","closed_at":"2018-06-07T13:34:49Z","author_association":"NONE","body":"## Expected Behavior\r\nShould purge the document as in documentation\r\n\r\n## Current Behavior\r\nReturns an error message\r\n{\r\n    \"error\": \"not_implemented\",\r\n    \"reason\": \"this feature is not yet implemented\"\r\n}\r\n\r\n## Steps to Reproduce (for bugs)\r\n1. Triggering a HTTP POST to http://localhost:5984/userdb-61/_purge with ({\"id\": [\"rev\"]})\r\n2. Returns the above error\r\n\r\n## Context\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\nWe are having a db with lots of _deleted docs, that is sync with PouchDB and we need to clean them up because they are getting replicated. So we are getting All Changes and from each change we're using the doc id and rev to trigger a POST to _purge\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: 2.1.1\r\n* Browser Name and version: Postman / .Net HttpClient \r\n* Operating System and version (desktop or mobile): Windows 10\r\nI have also ran into: https://groups.google.com/forum/#!topic/couchdb-user-archive/yDf965WCTMQ and in Fauxton Setup it says: \"Apache CouchDB is configured for production usage as a single node!\"\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1372","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1372/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1372/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1372/events","html_url":"https://github.com/apache/couchdb/issues/1372","id":329127919,"node_id":"MDU6SXNzdWUzMjkxMjc5MTk=","number":1372,"title":"Numbers in documents get rounded down without explaination.","user":{"login":"Panossa","id":23323875,"node_id":"MDQ6VXNlcjIzMzIzODc1","avatar_url":"https://avatars3.githubusercontent.com/u/23323875?v=4","gravatar_id":"","url":"https://api.github.com/users/Panossa","html_url":"https://github.com/Panossa","followers_url":"https://api.github.com/users/Panossa/followers","following_url":"https://api.github.com/users/Panossa/following{/other_user}","gists_url":"https://api.github.com/users/Panossa/gists{/gist_id}","starred_url":"https://api.github.com/users/Panossa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Panossa/subscriptions","organizations_url":"https://api.github.com/users/Panossa/orgs","repos_url":"https://api.github.com/users/Panossa/repos","events_url":"https://api.github.com/users/Panossa/events{/privacy}","received_events_url":"https://api.github.com/users/Panossa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-04T16:24:10Z","updated_at":"2018-06-04T17:26:57Z","closed_at":"2018-06-04T17:26:56Z","author_association":"NONE","body":"I don't know whether it's a feature or a bug. But if it's meant to be this way it's not obvious why and I never saw anyone writing about this:\r\nWhen I save the following document:\r\n{\"server_id\": 369553424691494913}\r\n\r\n## Expected Behavior\r\nI expect when I open up the document (after saving it) in Futon or I'm getting it via GET I get this:\r\n{\"server_id\": 369553424691494913} //without \"\" around the number\r\n\r\n## Current Behavior\r\nResponse:\r\n{\"server_id\": 369553424691494900} //btw it rounds down on 1-2 decimals every time, not only with this number\r\n\r\n## Possible Solution\r\nEither showing a warning about precision or save it the right way.\r\n\r\n## Steps to Reproduce (for bugs)\r\n1. Saving e.g. the document {\"server_id\": 369553424691494900}\r\n2. GETting it.\r\n\r\n## Context\r\nI'm saving server ids in the database as numbers so I can use them without converting them back from strings to numbers.\r\n\r\n## Your Environment\r\n* Version used: 2.1.1\r\n* Browser Name and version: Chrome Canary 69.0.3448.0 (64 bit)\r\n* Operating System and version (desktop or mobile): Win7 64bit Home Pr.\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1371","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1371/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1371/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1371/events","html_url":"https://github.com/apache/couchdb/issues/1371","id":328811203,"node_id":"MDU6SXNzdWUzMjg4MTEyMDM=","number":1371,"title":"Mango index not used when selector has a field with \"$gt\", \"$lt\" and another field","user":{"login":"linquize","id":791115,"node_id":"MDQ6VXNlcjc5MTExNQ==","avatar_url":"https://avatars2.githubusercontent.com/u/791115?v=4","gravatar_id":"","url":"https://api.github.com/users/linquize","html_url":"https://github.com/linquize","followers_url":"https://api.github.com/users/linquize/followers","following_url":"https://api.github.com/users/linquize/following{/other_user}","gists_url":"https://api.github.com/users/linquize/gists{/gist_id}","starred_url":"https://api.github.com/users/linquize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linquize/subscriptions","organizations_url":"https://api.github.com/users/linquize/orgs","repos_url":"https://api.github.com/users/linquize/repos","events_url":"https://api.github.com/users/linquize/events{/privacy}","received_events_url":"https://api.github.com/users/linquize/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/apache/couchdb/milestones/3","html_url":"https://github.com/apache/couchdb/milestone/3","labels_url":"https://api.github.com/repos/apache/couchdb/milestones/3/labels","id":3150995,"node_id":"MDk6TWlsZXN0b25lMzE1MDk5NQ==","number":3,"title":"2.2.0","description":"","creator":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars1.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","site_admin":false},"open_issues":16,"closed_issues":26,"state":"open","created_at":"2018-02-28T15:49:56Z","updated_at":"2018-06-23T17:25:27Z","due_on":null,"closed_at":null},"comments":1,"created_at":"2018-06-03T08:46:11Z","updated_at":"2018-06-03T21:04:44Z","closed_at":"2018-06-03T21:04:38Z","author_association":"NONE","body":"<!--- Provide a general summary of the issue in the Title above -->\r\nWrite a Mango query with 2 selector fields. One field \"a\" checks \"$gt\", \"$lt\" and anther field \"b\" simply checks equality.\r\nCreate index of one field [\"a\"] and these 2 fields [\"a\", \"b\"].\r\n\r\n## Expected Behavior\r\n<!--- If you're describing a bug, tell us what should happen -->\r\n<!--- If you're suggesting a change/improvement, tell us how it should work -->\r\nFor all Mango queries below, Mango index `a-index` is used.\r\n\r\n## Current Behavior\r\n<!--- If describing a bug, tell us what happens instead of the expected behavior -->\r\n<!--- If suggesting a change/improvement, explain the difference from current behavior -->\r\nFor Mango query 1, Mango index `a-index` is not used.\r\nFor Mango query 2 and 3, Mango index `a-index` is used.\r\n\r\n## Possible Solution\r\n<!--- Not obligatory, but suggest a fix/reason for the bug, -->\r\n<!--- or ideas how to implement the addition or change -->\r\nFix the bug.\r\n\r\n## Steps to Reproduce (for bugs)\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n**Bulk Insert Documents**\r\n```json\r\n{\r\n  \"docs\": [\r\n    { \"a\": \"1970-01-01\", \"b\": 1, \"c\": \"xxx\" },\r\n    { \"a\": \"1970-01-02\", \"b\": 2, \"c\": \"yyy\" },\r\n    { \"a\": \"1970-01-03\", \"b\": 1, \"c\": \"zzz\" },\r\n  ]\r\n}\r\n```\r\n\r\n**Query 1**\r\n```json\r\n{\r\n  \"selector\": {\r\n    \"a\": {\r\n      \"$gte\": \"1970-01-01\",\r\n      \"$lt\": \"1970-01-31\"\r\n    },\r\n    \"b\": 1\r\n  }\r\n}\r\n```\r\n\r\n**Query 2**\r\n```json\r\n{\r\n  \"selector\": {\r\n    \"a\": {\r\n      \"$gte\": \"1970-01-01\",\r\n      \"$lt\": \"1970-01-31\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Query 3**\r\n```json\r\n{\r\n  \"selector\": {\r\n    \"a\": {\r\n      \"$gte\": \"1970-01-01\"\r\n    },\r\n    \"b\": 1\r\n  }\r\n}\r\n```\r\n\r\n**Index 1**\r\n```json\r\n{\r\n   \"index\": {\r\n      \"fields\": [\r\n         \"a\"\r\n      ]\r\n   },\r\n   \"name\": \"a-index\",\r\n   \"type\": \"json\"\r\n}\r\n```\r\n\r\n**Index 2**\r\n```json\r\n{\r\n   \"index\": {\r\n      \"fields\": [\r\n         \"a\", \"b\"\r\n      ]\r\n   },\r\n   \"name\": \"a-b-index\",\r\n   \"type\": \"json\"\r\n}\r\n```\r\n1. Bulk insert documents as above\r\n2. Open Fauxton\r\n3. Create Mango index 1 as above\r\n4. Enter Mango query 1 as above\r\n5. Press Explain button\r\n6. I found that index `a-index` is not used\r\n7. Run the query, it is really slow\r\n8. Enter Mango query 2 or query 3 as above\r\n9. Press Explain button\r\n10. Index `a-index` is used\r\n11. Perform above steps again, but this time, create index 2\r\n\r\n## Context\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\nIndex `a-index` is not used in the mango query 1, so query performance is poor.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: 2.1.1 (docker image)\r\n* Browser Name and version: Firefox 60\r\n* Operating System and version (desktop or mobile): Ubuntu 16.04 x64\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1363","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1363/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1363/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1363/events","html_url":"https://github.com/apache/couchdb/issues/1363","id":328016315,"node_id":"MDU6SXNzdWUzMjgwMTYzMTU=","number":1363,"title":"Credentials leaked in logfile when replication job crashes","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","site_admin":false},"labels":[{"id":594290095,"node_id":"MDU6TGFiZWw1OTQyOTAwOTU=","url":"https://api.github.com/repos/apache/couchdb/labels/replication","name":"replication","color":"BFD4F2","default":false},{"id":594290339,"node_id":"MDU6TGFiZWw1OTQyOTAzMzk=","url":"https://api.github.com/repos/apache/couchdb/labels/security","name":"security","color":"EE3F46","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-31T06:58:25Z","updated_at":"2018-05-31T15:43:23Z","closed_at":"2018-05-31T15:43:23Z","author_association":"MEMBER","body":"After a CRASH REPORT, the state of the gen_server couch_replicator_scheduler_job is dumped in the logfile at error level. This log line contains the credentials for the job in the URL.\r\n\r\nHere is a censored example.\r\n\r\n```\r\n[error] 2018-05-29T12:45:00.976000Z couchdb@node1 <0.29397.581> -------- CRASH REPORT Process  (<0.29397.581>) with 2 neighbors exited with reason: changes_reader_died at gen_server:terminate/7(line:826) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_replicator_scheduler_job,init,['Argument__1']}, ancestors: [couch_replicator_scheduler_sup,couch_replicator_sup,...], messages: [], links: [<0.30307.432>,<0.13375.581>,<0.8145.604>,<0.13512.577>,<0.32578.349>,...], dictionary: [{task_status_props,[{changes_pending,null},{checkpoint_interval,...},...]},...], trap_exit: true, status: running, heap_size: 4185, stack_size: 27, reductions: 24764\r\n[error] 2018-05-29T12:45:00.976000Z couchdb@node1 <0.27201.432> -------- gen_server <0.27201.432> terminated with reason: changes_reader_died\r\n  last msg: {'EXIT',<0.29397.581>,changes_reader_died}\r\n     state: {state,<0.29397.581>,<0.16013.476>,20,{httpdb,\"https://admin:REALPASSWORD@SERVER/db/\",nil,[{\"Accept\",\"application/json\"}\r\n,{\"User-Agent\",\"CouchDB-Replicator/2.1.0\"}],30000,[{is_ssl,true},{socket_options,[{keepalive,true},{nodelay,false}]},{ssl_options,[{depth,3},{verify,verify_none}]}],10,250\r\n,<0.13264.515>,20,nil,undefined},{httpdb,\"https://admin:REALPASSWORD@SERVER/db/\",nil,[{\"Accept\",\"application/json\"},{\"User-Agent\"\r\n,\"CouchDB-Replicator/2.1.0\"}],30000,[{is_ssl,true},{socket_options,[{keepalive,true},{nodelay,false}]},{ssl_options,[{depth,3},{verify,verify_none}]}],10,250,<0.6420.509>,\r\n20,nil,undefined},[],nil,nil,nil,[],nil,nil,{batch,[],0}}\r\n```\r\n\r\n/cc @nickva ","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1360","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1360/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1360/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1360/events","html_url":"https://github.com/apache/couchdb/issues/1360","id":328013155,"node_id":"MDU6SXNzdWUzMjgwMTMxNTU=","number":1360,"title":"error: function_clause, couch_btree:fold_reduce","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","site_admin":false},"labels":[{"id":594290317,"node_id":"MDU6TGFiZWw1OTQyOTAzMTc=","url":"https://api.github.com/repos/apache/couchdb/labels/bug","name":"bug","color":"EE3F46","default":true},{"id":594289841,"node_id":"MDU6TGFiZWw1OTQyODk4NDE=","url":"https://api.github.com/repos/apache/couchdb/labels/dbcore","name":"dbcore","color":"BFD4F2","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-31T06:44:40Z","updated_at":"2018-05-31T06:59:52Z","closed_at":"2018-05-31T06:59:51Z","author_association":"MEMBER","body":"Under heavy load and insufficient CPU, a 3-node cluster produced a large number of function_clause errors. This is one of these errors.\r\n\r\n```\r\n[error] 2018-05-25T20:33:45.758000Z couchdb@node1 <0.7616.770> b3ebc2476b rexi_server error:function_clause [{couch_btree,fold_reduce,[undefined,#Fun<couch_db.32.89963714>,0,[{start_key,1}]],[{file,\"src/couch_btree.erl\"},{line,74}]},{couch_db,count_changes_since,2,[{file,\"src/couch_db.erl\"},{line,1265}]},{fabric_rpc,changes,4,[{file,\"src/fabric_rpc.erl\"},{line,78}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n```","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1354","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1354/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1354/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1354/events","html_url":"https://github.com/apache/couchdb/issues/1354","id":327908863,"node_id":"MDU6SXNzdWUzMjc5MDg4NjM=","number":1354,"title":"\"User database does not exist\", but first-time setup is successful!","user":{"login":"JohnOllhorn","id":28832014,"node_id":"MDQ6VXNlcjI4ODMyMDE0","avatar_url":"https://avatars3.githubusercontent.com/u/28832014?v=4","gravatar_id":"","url":"https://api.github.com/users/JohnOllhorn","html_url":"https://github.com/JohnOllhorn","followers_url":"https://api.github.com/users/JohnOllhorn/followers","following_url":"https://api.github.com/users/JohnOllhorn/following{/other_user}","gists_url":"https://api.github.com/users/JohnOllhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/JohnOllhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohnOllhorn/subscriptions","organizations_url":"https://api.github.com/users/JohnOllhorn/orgs","repos_url":"https://api.github.com/users/JohnOllhorn/repos","events_url":"https://api.github.com/users/JohnOllhorn/events{/privacy}","received_events_url":"https://api.github.com/users/JohnOllhorn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-30T21:38:42Z","updated_at":"2018-05-31T03:22:37Z","closed_at":"2018-05-30T21:39:56Z","author_association":"NONE","body":"I want to use CouchDB in a single node docker environment. I also did the first-time setup, but the two messages stay permanently in the log.\r\n\r\n```\r\ncouch       | [notice] 2018-05-30T21:30:58.040338Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:03.041183Z nonode@nohost emulator -------- Error in process <0.7104.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:03.041307Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [notice] 2018-05-30T21:31:08.042188Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:08.042292Z nonode@nohost emulator -------- Error in process <0.7197.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [error] 2018-05-30T21:31:13.043751Z nonode@nohost emulator -------- Error in process <0.7266.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:13.043878Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:18.044218Z nonode@nohost emulator -------- Error in process <0.7359.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:18.044336Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:23.045194Z nonode@nohost emulator -------- Error in process <0.7428.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:23.045316Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:28.046173Z nonode@nohost emulator -------- Error in process <0.7521.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:28.046312Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:33.047183Z nonode@nohost emulator -------- Error in process <0.7590.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:33.047307Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:38.048862Z nonode@nohost emulator -------- Error in process <0.7683.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:38.048976Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:43.049175Z nonode@nohost emulator -------- Error in process <0.7752.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:43.049313Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:48.050204Z nonode@nohost emulator -------- Error in process <0.7845.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:48.050322Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:53.051164Z nonode@nohost emulator -------- Error in process <0.7914.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:31:53.051355Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [notice] 2018-05-30T21:31:58.052195Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:31:58.052392Z nonode@nohost emulator -------- Error in process <0.8007.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [error] 2018-05-30T21:32:03.054784Z nonode@nohost emulator -------- Error in process <0.8076.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:03.054911Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:32:08.055188Z nonode@nohost emulator -------- Error in process <0.8168.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:08.055303Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21
8000
:32:13.056199Z nonode@nohost emulator -------- Error in process <0.8238.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:13.056327Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [notice] 2018-05-30T21:32:18.062195Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:32:18.062235Z nonode@nohost emulator -------- Error in process <0.8330.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:23.063229Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:32:23.063337Z nonode@nohost emulator -------- Error in process <0.8400.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [error] 2018-05-30T21:32:28.064241Z nonode@nohost emulator -------- Error in process <0.8492.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:28.064262Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:32:33.065274Z nonode@nohost emulator -------- Error in process <0.8562.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:33.065445Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:32:38.066231Z nonode@nohost emulator -------- Error in process <0.8654.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:38.066344Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:32:43.067386Z nonode@nohost emulator -------- Error in process <0.8724.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:43.067679Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [notice] 2018-05-30T21:32:48.068186Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:32:48.068293Z nonode@nohost emulator -------- Error in process <0.8816.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [error] 2018-05-30T21:32:53.069179Z nonode@nohost emulator -------- Error in process <0.8886.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:53.069301Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:32:58.070222Z nonode@nohost emulator -------- Error in process <0.8978.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:32:58.070244Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [error] 2018-05-30T21:33:03.073523Z nonode@nohost emulator -------- Error in process <0.9048.1> with exit value: {database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk...\r\ncouch       | [notice] 2018-05-30T21:33:03.073644Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\ncouch       | [notice] 2018-05-30T21:33:08.074212Z nonode@nohost <0.315.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\n```","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1351","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1351/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1351/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1351/events","html_url":"https://github.com/apache/couchdb/issues/1351","id":327181144,"node_id":"MDU6SXNzdWUzMjcxODExNDQ=","number":1351,"title":"[js] reduce_builtin.js: emfile error (ppc64le)","user":{"login":"abdasgupta","id":15626057,"node_id":"MDQ6VXNlcjE1NjI2MDU3","avatar_url":"https://avatars0.githubusercontent.com/u/15626057?v=4","gravatar_id":"","url":"https://api.github.com/users/abdasgupta","html_url":"https://github.com/abdasgupta","followers_url":"https://api.github.com/users/abdasgupta/followers","following_url":"https://api.github.com/users/abdasgupta/following{/other_user}","gists_url":"https://api.github.com/users/abdasgupta/gists{/gist_id}","starred_url":"https://api.github.com/users/abdasgupta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abdasgupta/subscriptions","organizations_url":"https://api.github.com/users/abdasgupta/orgs","repos_url":"https://api.github.com/users/abdasgupta/repos","events_url":"https://api.github.com/users/abdasgupta/events{/privacy}","received_events_url":"https://api.github.com/users/abdasgupta/received_events","type":"User","site_admin":false},"labels":[{"id":594290132,"node_id":"MDU6TGFiZWw1OTQyOTAxMzI=","url":"https://api.github.com/repos/apache/couchdb/labels/testsuite","name":"testsuite","color":"BFD4F2","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-29T06:08:22Z","updated_at":"2018-05-29T08:17:42Z","closed_at":"2018-05-29T08:17:42Z","author_association":"NONE","body":"<!--- Provide a general summary of the issue in the Title above -->\r\nTo port couchdb on ppc64le platform, first we need to pass all the test cases. But while executing the command, following error is appearing after few test cases passed.\r\n```\r\ntest/javascript/tests/reduce_builtin.js                        \r\n    Error: emfile\r\nTrace back (most recent call first):\r\n    \r\n 551: test/javascript/couch.js\r\n      CouchError([object Object])\r\n 514: test/javascript/couch.js\r\n      ([object CouchHTTP])\r\n 180: test/javascript/couch.js\r\n      (\"(function (doc) {emit(doc.keys, [1, 1]);})/* avoid race cond 1527498\r\n 165: test/javascript/tests/reduce_builtin.js\r\n      ()\r\n  37: test/javascript/cli_runner.js\r\n      runTest()\r\n  48: test/javascript/cli_runner.js\r\n      \r\nfail\r\n=======================================================\r\nJavaScript tests complete.\r\n  Failed: 1.  Skipped or passed: 40.\r\nMakefile:140: recipe for target 'javascript' failed\r\nmake[1]: *** [javascript] Error 1\r\nmake[1]: Leaving directory '/home/abdasgupta/couchdb'\r\nMakefile:103: recipe for target 'check' failed\r\nmake: *** [check] Error 2\r\n```\r\n## Expected Behavior\r\n<!--- If you're describing a bug, tell us what should happen -->\r\n<!--- If you're suggesting a change/improvement, tell us how it should work -->\r\nThe test case `test/javascript/tests/reduce_builtin.js` should pass.\r\n\r\n## Current Behavior\r\n<!--- If describing a bug, tell us what happens instead of the expected behavior -->\r\n<!--- If suggesting a change/improvement, explain the difference from current behavior -->\r\n\r\n## Possible Solution\r\n<!--- Not obligatory, but suggest a fix/reason for the bug, -->\r\n<!--- or ideas how to implement the addition or change -->\r\n\r\n## Steps to Reproduce (for bugs)\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n1. Run `make check`\r\n2.\r\n3.\r\n4.\r\n\r\n## Context\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: upstream master branch\r\n* Browser Name and version:\r\n* Operating System and version (desktop or mobile): Ubuntu 16.04.4 LTS on ppc64le\r\n* Link to your project:\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1350","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1350/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1350/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1350/events","html_url":"https://github.com/apache/couchdb/issues/1350","id":327166878,"node_id":"MDU6SXNzdWUzMjcxNjY4Nzg=","number":1350,"title":"CentOS package install issue with js library","user":{"login":"leiz340","id":39719917,"node_id":"MDQ6VXNlcjM5NzE5OTE3","avatar_url":"https://avatars2.githubusercontent.com/u/39719917?v=4","gravatar_id":"","url":"https://api.github.com/users/leiz340","html_url":"https://github.com/leiz340","followers_url":"https://api.github.com/users/leiz340/followers","following_url":"https://api.github.com/users/leiz340/following{/other_user}","gists_url":"https://api.github.com/users/leiz340/gists{/gist_id}","starred_url":"https://api.github.com/users/leiz340/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leiz340/subscriptions","organizations_url":"https://api.github.com/users/leiz340/orgs","repos_url":"https://api.github.com/users/leiz340/repos","events_url":"https://api.github.com/users/leiz340/events{/privacy}","received_events_url":"https://api.github.com/users/leiz340/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-29T04:32:46Z","updated_at":"2018-05-29T08:30:38Z","closed_at":"2018-05-29T08:17:45Z","author_association":"NONE","body":"centos 7.2\r\nwhen I exec yum install couchdb ，found error cannot install success\r\n--> Finished Dependency Resolution\r\nError: Package: couchdb-2.1.1-2.el7.centos.x86_64 (bintray-apache-couchdb-rpm)\r\n           Requires: js = 1:1.8.5\r\n           Installing: 1:couch-js-1.8.5-21.el7.x86_64 (bintray-apache-couchdb-rpm)\r\n               js = 1.8.5-21.el7\r\n           Available: 1:js-1.8.5-20.el7.i686 (base)\r\n               js = 1:1.8.5-20.el7\r\nError: Package: couchdb-2.1.1-2.el7.centos.x86_64 (bintray-apache-couchdb-rpm)\r\n           Requires: js = 1:1.8.5\r\n           Available: 1:couch-js-1.8.5-21.el7.x86_64 (bintray-apache-couchdb-rpm)\r\n               js = 1.8.5-21.el7\r\n           Available: 1:js-1.8.5-20.el7.i686 (base)\r\n               js = 1:1.8.5-20.el7\r\n You could try using --skip-broken to work around the problem\r\n You could try running: rpm -Va --nofiles --nodigest\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1343","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1343/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1343/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1343/events","html_url":"https://github.com/apache/couchdb/issues/1343","id":326723067,"node_id":"MDU6SXNzdWUzMjY3MjMwNjc=","number":1343,"title":"Add official support of Couchdb  for Ubuntu 18.04","user":{"login":"codeyash","id":654242,"node_id":"MDQ6VXNlcjY1NDI0Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/654242?v=4","gravatar_id":"","url":"https://api.github.com/users/codeyash","html_url":"https://github.com/codeyash","followers_url":"https://api.github.com/users/codeyash/followers","following_url":"https://api.github.com/users/codeyash/following{/other_user}","gists_url":"https://api.github.com/users/codeyash/gists{/gist_id}","starred_url":"https://api.github.com/users/codeyash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codeyash/subscriptions","organizations_url":"https://api.github.com/users/codeyash/orgs","repos_url":"https://api.github.com/users/codeyash/repos","events_url":"https://api.github.com/users/codeyash/events{/privacy}","received_events_url":"https://api.github.com/users/codeyash/received_events","type":"User","site_admin":false},"labels":[{"id":594291884,"node_id":"MDU6TGFiZWw1OTQyOTE4ODQ=","url":"https://api.github.com/repos/apache/couchdb/labels/duplicate","name":"duplicate","color":"D2DAE1","default":true}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-26T09:03:40Z","updated_at":"2018-06-15T06:00:25Z","closed_at":"2018-05-26T18:03:00Z","author_association":"NONE","body":"Hello,\r\n\r\nPlease add this task in your 2.2.0 milestone. \r\n\r\nhttps://github.com/apache/couchdb/issues/1314 (Duplicate of this but it's closed and task is still open)","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1342","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1342/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1342/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1342/events","html_url":"https://github.com/apache/couchdb/issues/1342","id":326468084,"node_id":"MDU6SXNzdWUzMjY0NjgwODQ=","number":1342,"title":"View query doesn't consider latest write for db with 3 replicas","user":{"login":"ChiragMoradiya","id":2399621,"node_id":"MDQ6VXNlcjIzOTk2MjE=","avatar_url":"https://avatars0.githubusercontent.com/u/2399621?v=4","gravatar_id":"","url":"https://api.github.com/users/ChiragMoradiya","html_url":"https://github.com/ChiragMoradiya","followers_url":"https://api.github.com/users/ChiragMoradiya/followers","following_url":"https://api.github.com/users/ChiragMoradiya/following{/other_user}","gists_url":"https://api.github.com/users/ChiragMoradiya/gists{/gist_id}","starred_url":"https://api.github.com/users/ChiragMoradiya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChiragMoradiya/subscriptions","organizations_url":"https://api.github.com/users/ChiragMoradiya/orgs","repos_url":"https://api.github.com/users/ChiragMoradiya/repos","events_url":"https://api.github.com/users/ChiragMoradiya/events{/privacy}","received_events_url":"https://api.github.com/users/ChiragMoradiya/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-25T10:28:37Z","updated_at":"2018-05-28T21:49:42Z","closed_at":"2018-05-28T21:49:42Z","author_association":"NONE","body":"When I run Query, using Couchdb view, immediately after write operation, the result doesn't consider latest write. Instead previous revision of that document is used to generate result.\r\n\r\nBelow is the details about my setup and steps to reproduce.\r\n\r\n## Setup\r\n- CouchDB version: 2.1.1\r\n- Cluster: 3 Nodes\r\n- OS: Ubuntu 16.04\r\n- I've created  a database with 3 replicas.\r\n- There is around 1000 documents in the database.\r\n  - Each document contains 2 fields: `name` and `balance`.\r\n- There is a view function named `by_name` is available.\r\n  - `name` field is emitted as key.\r\n\r\n## Steps to Reproduce\r\n- Following steps are performed  ~50 times\r\n  - Read one of the document (random).\r\n  - Increase it's balance by 1\r\n  - Save the document in CouchDb\r\n  - Read the same document using CouchDb view `by_name` with `include_docs=true`.\r\n  - Validate whether it's `balance` is same as just updated.\r\n- I've observed that only after around 4-5 iterations, balance validation step fails. \r\n- When I did check for revision of the document, I found that result provided me older revision of the document. (OR didn't provide latest revision).\r\n- This test I have performed differently using `reduce` function to get sum of `balance`. There also, query result was generated on previous revision of the document.\r\n\r\n## Expected Behavior\r\nQuery result should always consider latest revision of the document.\r\n\r\n## Additional Observations\r\n**Works for database with 2 replicas**\r\nI've created another database with 2 replicas and  performed same test(s) on it.  In this case I didn't found any issue.\r\n\r\n## Possible cause\r\n\r\n- To understand possible cause, let's understand my assumptions for how document write and query result generation works in CouchDB.\r\n\r\n### How document write works\r\n\r\n- It work's based on value of 'w' configured for each database.\r\n- When it's value is 2, then a write is called successful only when the document is written on at least 2 nodes.\r\n\r\n### How view query works\r\n- Query request is distributed to all the nodes having replica of that database.\r\n- Node which gives fastest result, is considered final result and delivered to user.\r\n- I have observed this by enabling detailed logging on all nodes of my cluster.\r\n\r\n**Based on above 2 assumptions, I have following conclusion for the cause of this issue:**\r\n\r\n- When a particular document is written, CouchDb has responded after writing document on 2 nodes. So, 1 node is not yet having latest revision of that document. Though, This node will synchronize eventually. But, assume that before that query arrived at the cluster.\r\n- So, query request is distributed to all 3 nodes of my cluster.\r\n- The node on which the document isn't yet written will respond faster than other 2 nodes as it doesn't require to rebuild the index as there isn't any changes in documents. While other 2 nodes on which document was written successfully, will take time to respond as they need to rebuild the index before generating query result.\r\n- And as per my assumption, fastest response is returned. And thus, latest revision of the document wasn't considered for query result generation.\r\n\r\n### Why issue doesn't exist for databases with 2 replicas ?\r\nIt's obvious. Though explaining here.\r\n\r\nFor databases with 2 replicas, value of 'w' was 2. So, when I write document it's written to both of the replicas. So, query result is generated by either of these 2 nodes will consider latest write, always.","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1341","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1341/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1341/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1341/events","html_url":"https://github.com/apache/couchdb/issues/1341","id":326276379,"node_id":"MDU6SXNzdWUzMjYyNzYzNzk=","number":1341,"title":"CouchDB degrades and starts timeouting on all index operations","user":{"login":"pzduniak","id":917230,"node_id":"MDQ6VXNlcjkxNzIzMA==","avatar_url":"https://avatars0.githubusercontent.com/u/917230?v=4","gravatar_id":"","url":"https://api.github.com/users/pzduniak","html_url":"https://github.com/pzduniak","followers_url":"https://api.github.com/users/pzduniak/followers","following_url":"https://api.github.com/users/pzduniak/following{/other_user}","gists_url":"https://api.github.com/users/pzduniak/gists{/gist_id}","starred_url":"https://api.github.com/users/pzduniak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pzduniak/subscriptions","organizations_url":"https://api.github.com/users/pzduniak/orgs","repos_url":"https://api.github.com/users/pzduniak/repos","events_url":"https://api.github.com/users/pzduniak/events{/privacy}","received_events_url":"https://api.github.com/users/pzduniak/received_events","type":"User","site_admin":false},"labels":[{"id":594290869,"node_id":"MDU6TGFiZWw1OTQyOTA4Njk=","url":"https://api.github.com/repos/apache/couchdb/labels/docker","name":"docker","color":"FAD8C7","default":false},{"id":594291811,"node_id":"MDU6TGFiZWw1OTQyOTE4MTE=","url":"https://api.github.com/repos/apache/couchdb/labels/invalid","name":"invalid","color":"D2DAE1","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2018-05-24T20:20:12Z","updated_at":"2018-05-25T15:47:19Z","closed_at":"2018-05-24T21:03:53Z","author_association":"NONE","body":"## Expected Behavior\r\nCouchDB should start up with ~100 records in its databases and ~14 views. 2.1.1 in Docker. Doesn't work as both root and couchdb user.\r\n\r\n## Current Behavior\r\nhttps://gist.github.com/pzduniak/4d4d9c148ee910bb053d9cfdd1b04216\r\nIndexing is never done.\r\n\r\n## Steps to Reproduce (for bugs)\r\nWe're casually running into it using our Dockerfile.\r\n[couchdb.zip](https://github.com/apache/couchdb/files/2036951/couchdb.zip)\r\n\r\nI honestly have absolutely no idea how to fix it. As you can see in the Dockerfile, timeout values are high.\r\n\r\n## Context\r\nOur application waits until CouchDB is done starting up (using `/healthcheck.sh`) and then tries to create design documents in its database (`cubefiles`), eventually querying for a user by his username (where everything fails, because indexes can't be built).\r\n\r\n## Your Environment\r\nUbuntu 16.04 running Docker 18.03\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1340","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1340/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1340/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1340/events","html_url":"https://github.com/apache/couchdb/issues/1340","id":326239163,"node_id":"MDU6SXNzdWUzMjYyMzkxNjM=","number":1340,"title":"View creation failed on CentOS 7 - CouchDB 2.1.1","user":{"login":"plcollard","id":11019668,"node_id":"MDQ6VXNlcjExMDE5NjY4","avatar_url":"https://avatars1.githubusercontent.com/u/11019668?v=4","gravatar_id":"","url":"https://api.github.com/users/plcollard","html_url":"https://github.com/plcollard","followers_url":"https://api.github.com/users/plcollard/followers","following_url":"https://api.github.com/users/plcollard/following{/other_user}","gists_url":"https://api.github.com/users/plcollard/gists{/gist_id}","starred_url":"https://api.github.com/users/plcollard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plcollard/subscriptions","organizations_url":"https://api.github.com/users/plcollard/orgs","repos_url":"https://api.github.com/users/plcollard/repos","events_url":"https://api.github.com/users/plcollard/events{/privacy}","received_events_url":"https://api.github.com/users/plcollard/received_events","type":"User","site_admin":false},"labels":[{"id":594291884,"node_id":"MDU6TGFiZWw1OTQyOTE4ODQ=","url":"https://api.github.com/repos/apache/couchdb/labels/duplicate","name":"duplicate","color":"D2DAE1","default":true}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-24T18:28:37Z","updated_at":"2018-06-09T17:25:13Z","closed_at":"2018-05-24T19:11:39Z","author_association":"NONE","body":"CouchDB failed to create views on fresh and updated server with CentOS 7.\r\n\r\n## Expected Behavior\r\nVerification of the setup should work .\r\n\r\n## Current Behavior\r\nI've first seen the issue in a CentOS 7 server where the packages where updated.\r\nI reproduced the error in a fresh server.\r\n\r\n## Steps to Reproduce (for bugs)\r\n1. Install CentOS 7 and update it.\r\n2. Setup repo as described in http://docs.couchdb.org/en/latest/install/unix.html#installation-using-the-apache-couchdb-convenience-binary-packages\r\n3. Install couchdb package and run the setup.\r\n4. Launch the verification in the web interface and the problem appears at the \"Create view\" steps. \r\n\r\n## Output of logs :\r\n<pre>\r\n[notice] 2018-05-24T18:05:41.461809Z couchdb@127.0.0.1 <0.1522.0> e3ce237828 10.50.50.130:5984 10.50.50.70 undefined GET /verifytestdb 404 ok 3\r\n[notice] 2018-05-24T18:05:41.464446Z couchdb@127.0.0.1 <0.1521.0> 079947299c 10.50.50.130:5984 10.50.50.70 undefined GET /verifytestdb_replicate 404 ok 5\r\n[notice] 2018-05-24T18:05:41.514311Z couchdb@127.0.0.1 <0.1521.0> f2f1464e89 10.50.50.130:5984 10.50.50.70 admin PUT /verifytestdb 201 ok 41\r\n[notice] 2018-05-24T18:05:41.537452Z couchdb@127.0.0.1 <0.1522.0> 14d27f1fbf 10.50.50.130:5984 10.50.50.70 admin PUT /verifytestdb/test_doc_1 201 ok 14\r\n[notice] 2018-05-24T18:05:41.554945Z couchdb@127.0.0.1 <0.1522.0> 3063dde463 10.50.50.130:5984 10.50.50.70 admin PUT /verifytestdb/test_doc_1 201 ok 9\r\n[notice] 2018-05-24T18:05:41.571887Z couchdb@127.0.0.1 <0.1522.0> 7a159de3e1 10.50.50.130:5984 10.50.50.70 admin DELETE /verifytestdb/test_doc_1?rev=2-d588d3e93ee155c5afffdf0247a2c5ef 200 ok 9\r\n[notice] 2018-05-24T18:05:41.602334Z couchdb@127.0.0.1 <0.1522.0> bf8be929af 10.50.50.130:5984 10.50.50.70 admin PUT /verifytestdb/test_doc_10 201 ok 21\r\n[notice] 2018-05-24T18:05:41.604973Z couchdb@127.0.0.1 <0.1524.0> 1e62a52beb 10.50.50.130:5984 10.50.50.70 admin PUT /verifytestdb/test_doc_20 201 ok 21\r\n[notice] 2018-05-24T18:05:41.612475Z couchdb@127.0.0.1 <0.2903.0> f116ca8328 10.50.50.130:5984 10.50.50.70 admin PUT /verifytestdb/test_doc_30 201 ok 29\r\n[info] 2018-05-24T18:05:41.639492Z couchdb@127.0.0.1 <0.212.0> -------- couch_proc_manager <0.3043.0> died normal\r\n[error] 2018-05-24T18:05:41.639645Z couchdb@127.0.0.1 <0.3041.0> -------- OS Process Error <0.3043.0> :: {os_process_error,{exit_status,1}}\r\n[info] 2018-05-24T18:05:41.660287Z couchdb@127.0.0.1 <0.212.0> -------- couch_proc_manager <0.3046.0> died normal\r\n[error] 2018-05-24T18:05:41.660387Z couchdb@127.0.0.1 <0.3041.0> -------- OS Process Error <0.3046.0> :: {os_process_error,{exit_status,1}}\r\n[info] 2018-05-24T18:05:41.675095Z couchdb@127.0.0.1 <0.212.0> -------- couch_proc_manager <0.3049.0> died normal\r\n[error] 2018-05-24T18:05:41.675173Z couchdb@127.0.0.1 <0.3041.0> -------- OS Process Error <0.3049.0> :: {os_process_error,{exit_status,1}}\r\n[info] 2018-05-24T18:05:41.694356Z couchdb@127.0.0.1 <0.212.0> -------- couch_proc_manager <0.3052.0> died normal\r\n[error] 2018-05-24T18:05:41.694441Z couchdb@127.0.0.1 <0.3041.0> -------- OS Process Error <0.3052.0> :: {os_process_error,{exit_status,1}}\r\n[info] 2018-05-24T18:05:41.708698Z couchdb@127.0.0.1 <0.212.0> -------- couch_proc_manager <0.3055.0> died normal\r\n[error] 2018-05-24T18:05:41.708790Z couchdb@127.0.0.1 <0.3041.0> -------- OS Process Error <0.3055.0> :: {os_process_error,{exit_status,1}}\r\n[info] 2018-05-24T18:05:41.731796Z couchdb@127.0.0.1 <0.212.0> -------- couch_proc_manager <0.3058.0> died normal\r\n[error] 2018-05-24T18:05:41.731895Z couch
6d2a
db@127.0.0.1 <0.3041.0> -------- OS Process Error <0.3058.0> :: {os_process_error,{exit_status,1}}\r\n[info] 2018-05-24T18:05:41.748254Z couchdb@127.0.0.1 <0.212.0> -------- couch_proc_manager <0.3077.0> died normal\r\n[error] 2018-05-24T18:05:41.748351Z couchdb@127.0.0.1 <0.3041.0> -------- OS Process Error <0.3077.0> :: {os_process_error,{exit_status,1}}\r\n[info] 2018-05-24T18:05:41.762309Z couchdb@127.0.0.1 <0.212.0> -------- couch_proc_manager <0.3080.0> died normal\r\n[error] 2018-05-24T18:05:41.762387Z couchdb@127.0.0.1 <0.3041.0> -------- OS Process Error <0.3080.0> :: {os_process_error,{exit_status,1}}\r\n...\r\n</pre>\r\n\r\n\r\n## Environment\r\n* Version used: 2.1.1 (installed from repo)\r\n* Operating System: CentOS 7 server\r\n* Kernel: 3.10.0-862.3.2.el7.x86_64\r\n\r\n\r\nIf you need more informations let me know and if you have a solution I would be happy to test it.\r\n\r\nThanks!\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1339","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1339/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1339/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1339/events","html_url":"https://github.com/apache/couchdb/issues/1339","id":326138971,"node_id":"MDU6SXNzdWUzMjYxMzg5NzE=","number":1339,"title":"if will support arm linux?","user":{"login":"ericdai","id":1776435,"node_id":"MDQ6VXNlcjE3NzY0MzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1776435?v=4","gravatar_id":"","url":"https://api.github.com/users/ericdai","html_url":"https://github.com/ericdai","followers_url":"https://api.github.com/users/ericdai/followers","following_url":"https://api.github.com/users/ericdai/following{/other_user}","gists_url":"https://api.github.com/users/ericdai/gists{/gist_id}","starred_url":"https://api.github.com/users/ericdai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericdai/subscriptions","organizations_url":"https://api.github.com/users/ericdai/orgs","repos_url":"https://api.github.com/users/ericdai/repos","events_url":"https://api.github.com/users/ericdai/events{/privacy}","received_events_url":"https://api.github.com/users/ericdai/received_events","type":"User","site_admin":false},"labels":[{"id":594291884,"node_id":"MDU6TGFiZWw1OTQyOTE4ODQ=","url":"https://api.github.com/repos/apache/couchdb/labels/duplicate","name":"duplicate","color":"D2DAE1","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-24T14:07:22Z","updated_at":"2018-05-24T15:08:10Z","closed_at":"2018-05-24T15:08:03Z","author_association":"NONE","body":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n## Expected Behavior\r\n<!--- If you're describing a bug, tell us what should happen -->\r\n<!--- If you're suggesting a change/improvement, tell us how it should work -->\r\n\r\n## Current Behavior\r\n<!--- If describing a bug, tell us what happens instead of the expected behavior -->\r\n<!--- If suggesting a change/improvement, explain the difference from current behavior -->\r\n\r\n## Possible Solution\r\n<!--- Not obligatory, but suggest a fix/reason for the bug, -->\r\n<!--- or ideas how to implement the addition or change -->\r\n\r\n## Steps to Reproduce (for bugs)\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n1.\r\n2.\r\n3.\r\n4.\r\n\r\n## Context\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used:\r\n* Browser Name and version:\r\n* Operating System and version (desktop or mobile):\r\n* Link to your project:\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1335","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1335/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1335/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1335/events","html_url":"https://github.com/apache/couchdb/issues/1335","id":324852765,"node_id":"MDU6SXNzdWUzMjQ4NTI3NjU=","number":1335,"title":"can't get current statics by _stats","user":{"login":"taicao88","id":39483774,"node_id":"MDQ6VXNlcjM5NDgzNzc0","avatar_url":"https://avatars2.githubusercontent.com/u/39483774?v=4","gravatar_id":"","url":"https://api.github.com/users/taicao88","html_url":"https://github.com/taicao88","followers_url":"https://api.github.com/users/taicao88/followers","following_url":"https://api.github.com/users/taicao88/following{/other_user}","gists_url":"https://api.github.com/users/taicao88/gists{/gist_id}","starred_url":"https://api.github.com/users/taicao88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taicao88/subscriptions","organizations_url":"https://api.github.com/users/taicao88/orgs","repos_url":"https://api.github.com/users/taicao88/repos","events_url":"https://api.github.com/users/taicao88/events{/privacy}","received_events_url":"https://api.github.com/users/taicao88/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-21T09:43:40Z","updated_at":"2018-06-01T17:04:56Z","closed_at":"2018-05-21T17:35:45Z","author_association":"NONE","body":"Can't get current request time by _stats\r\nconfig stats_collector failed","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1333","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1333/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1333/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1333/events","html_url":"https://github.com/apache/couchdb/issues/1333","id":324401448,"node_id":"MDU6SXNzdWUzMjQ0MDE0NDg=","number":1333,"title":"Support for modern Spidermonkey versions?","user":{"login":"browndav","id":763977,"node_id":"MDQ6VXNlcjc2Mzk3Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/763977?v=4","gravatar_id":"","url":"https://api.github.com/users/browndav","html_url":"https://github.com/browndav","followers_url":"https://api.github.com/users/browndav/followers","following_url":"https://api.github.com/users/browndav/following{/other_user}","gists_url":"https://api.github.com/users/browndav/gists{/gist_id}","starred_url":"https://api.github.com/users/browndav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/browndav/subscriptions","organizations_url":"https://api.github.com/users/browndav/orgs","repos_url":"https://api.github.com/users/browndav/repos","events_url":"https://api.github.com/users/browndav/events{/privacy}","received_events_url":"https://api.github.com/users/browndav/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-05-18T13:00:26Z","updated_at":"2018-05-22T06:22:36Z","closed_at":"2018-05-18T17:46:59Z","author_association":"NONE","body":"Spidermonkey 1.8.5, currently recommended by the CouchDB 2.1.1 documentation, was released in March of 2011 along with Firefox 4. At the time of this writing, the engine appears to be slightly more than seven years old. I just have a couple quick informational questions if you have a moment:\r\n\r\n1. Is there any supported way to build CouchDB using a modern version of SpiderMonkey, or any plans to support this in the near future? Failing that, is there a supported method of relying on Node and/or V8 instead of Spidermonkey 1.8.5?\r\n\r\n2. Has the CouchDB team checked Spidermonkey 1.8.5 against the MITRE CVE repository for vulnerabilities? If so, have any security fixes been backported?\r\n\r\nThanks in advance. If I'm missing a piece of documentation or a detail, apologies; I tried to scour pretty hard before opening a ticket.\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1332","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1332/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1332/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1332/events","html_url":"https://github.com/apache/couchdb/issues/1332","id":324235159,"node_id":"MDU6SXNzdWUzMjQyMzUxNTk=","number":1332,"title":"couchdb returns 500 to elasticsearch river changes query","user":{"login":"krishnakode","id":35506582,"node_id":"MDQ6VXNlcjM1NTA2NTgy","avatar_url":"https://avatars3.githubusercontent.com/u/35506582?v=4","gravatar_id":"","url":"https://api.github.com/users/krishnakode","html_url":"https://github.com/krishnakode","followers_url":"https://api.github.com/users/krishnakode/followers","following_url":"https://api.github.com/users/krishnakode/following{/other_user}","gists_url":"https://api.github.com/users/krishnakode/gists{/gist_id}","starred_url":"https://api.github.com/users/krishnakode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krishnakode/subscriptions","organizations_url":"https://api.github.com/users/krishnakode/orgs","repos_url":"https://api.github.com/users/krishnakode/repos","events_url":"https://api.github.com/users/krishnakode/events{/privacy}","received_events_url":"https://api.github.com/users/krishnakode/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-18T00:59:47Z","updated_at":"2018-05-18T01:26:03Z","closed_at":"2018-05-18T01:26:02Z","author_association":"NONE","body":"We have couchdb on 0.11.0 and elastic search on 0.90.3. When I add a river on elasticsearch for the couchdb, couch throws the below error. Elastic logs show a socket timed out error. What might be causing this error? and, How to fix it?\r\n\r\n[error] [<0.3416.6>] Uncaught error in HTTP request: {error,{case_clause,{error,enotconn}}}\r\n[info] [<0.3416.6>] Stacktrace: [{mochiweb_request,get,2},\r\n             {couch_httpd_external,json_req_obj,3},\r\n             {couch_query_servers,filter_docs,5},\r\n             {couch_changes,'-make_filter_fun/3-fun-1-',5},\r\n             {couch_changes,changes_enumerator,2},\r\n             {couch_btree,stream_kv_node2,8},\r\n             {couch_btree,stream_kp_node,7},\r\n             {couch_btree,fold,4}]\r\n\r\n* Version used: couchdb 0.11.0, elastic 0.90.3\r\n* Browser Name and version: chrome\r\n* Operating System and version (desktop or mobile): Linux 2.6.26-2-xen-686\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1328","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1328/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1328/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1328/events","html_url":"https://github.com/apache/couchdb/issues/1328","id":322825339,"node_id":"MDU6SXNzdWUzMjI4MjUzMzk=","number":1328,"title":"couchup fails with Connection Error, Bad Status Line","user":{"login":"ahayes","id":1750076,"node_id":"MDQ6VXNlcjE3NTAwNzY=","avatar_url":"https://avatars1.githubusercontent.com/u/1750076?v=4","gravatar_id":"","url":"https://api.github.com/users/ahayes","html_url":"https://github.com/ahayes","followers_url":"https://api.github.com/users/ahayes/followers","following_url":"https://api.github.com/users/ahayes/following{/other_user}","gists_url":"https://api.github.com/users/ahayes/gists{/gist_id}","starred_url":"https://api.github.com/users/ahayes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahayes/subscriptions","organizations_url":"https://api.github.com/users/ahayes/orgs","repos_url":"https://api.github.com/users/ahayes/repos","events_url":"https://api.github.com/users/ahayes/events{/privacy}","received_events_url":"https://api.github.com/users/ahayes/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-14T13:50:12Z","updated_at":"2018-05-14T14:38:52Z","closed_at":"2018-05-14T14:38:51Z","author_association":"NONE","body":"While migrating several databases with this command\r\n`/opt/couchdb/bin/couchup replicate -a -i -l admin -p password`\r\n\r\ncouchup threw the following error and the beam.smp process remained pegged at 100% afterwards\r\n[stderr](https://gist.github.com/ahayes/f59d442e672844a12c4a63a21b22a9a8)\r\n\r\n## Expected Behavior\r\nMigrate DB without issue.\r\n\r\n## Current Behavior\r\nMigration throws error and hangs\r\n\r\n## Possible Solution\r\nMay have something to do with large document attachments, although I did set\r\n`[httpd]`\r\n`max_http_request_size = 4294967296`\r\nin /opt/couchdb/etc/local.ini\r\n\r\n## Steps to Reproduce (for bugs)\r\nUnsure. I can help troubleshoot on my database.\r\n\r\n## Context\r\nTrying to migrate several databases to latest couchdb from the Ubuntu packaged 1.6 version.\r\n\r\n## Your Environment\r\n* Version used: 1.6 -> 2.1.1\r\n* Operating System and version (desktop or mobile): Ubuntu 16.04 LX zone on SMartOS\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1327","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1327/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1327/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1327/events","html_url":"https://github.com/apache/couchdb/issues/1327","id":322782161,"node_id":"MDU6SXNzdWUzMjI3ODIxNjE=","number":1327,"title":"\"os_mon: Missing application directory.\"}","user":{"login":"sayakpaul","id":22957388,"node_id":"MDQ6VXNlcjIyOTU3Mzg4","avatar_url":"https://avatars3.githubusercontent.com/u/22957388?v=4","gravatar_id":"","url":"https://api.github.com/users/sayakpaul","html_url":"https://github.com/sayakpaul","followers_url":"https://api.github.com/users/sayakpaul/followers","following_url":"https://api.github.com/users/sayakpaul/following{/other_user}","gists_url":"https://api.github.com/users/sayakpaul/gists{/gist_id}","starred_url":"https://api.github.com/users/sayakpaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sayakpaul/subscriptions","organizations_url":"https://api.github.com/users/sayakpaul/orgs","repos_url":"https://api.github.com/users/sayakpaul/repos","events_url":"https://api.github.com/users/sayakpaul/events{/privacy}","received_events_url":"https://api.github.com/users/sayakpaul/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-14T11:46:41Z","updated_at":"2018-05-14T15:05:45Z","closed_at":"2018-05-14T15:05:45Z","author_association":"NONE","body":"Couch DB 2.1.1 installation is getting failed at the last step of rel (generate) on Red Hat Linux 7.3. The compilation was fully successful. Following is the full trace of what I get in the error:\r\n\r\nERROR: generate failed while processing /home/1251148/apache-couchdb-2.1.1/rel: {'EXIT',{{badmatch,{error,\"os_mon: Missing application directory.\"}},\r\n         [{rebar_reltool,generate,2,\r\n                         [{file,\"src/rebar_reltool.erl\"},{line,53}]},\r\n          {rebar_core,run_modules,4,[{file,\"src/rebar_core.erl\"},{line,493}]},\r\n          {rebar_core,execute,6,[{file,\"src/rebar_core.erl\"},{line,418}]},\r\n          {rebar_core,maybe_execute,8,\r\n                      [{file,\"src/rebar_core.erl\"},{line,302}]},\r\n          {rebar_core,process_dir1,7,[{file,\"src/rebar_core.erl\"},{line,261}]},\r\n          {rebar_core,process_each,5,[{file,\"src/rebar_core.erl\"},{line,351}]},\r\n          {rebar_core,process_dir1,7,[{file,\"src/rebar_core.erl\"},{line,253}]},\r\n          {rebar_core,process_commands,2,\r\n                      [{file,\"src/rebar_core.erl\"},{line,93}]}]}}\r\nmake: *** [release] Error 1\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1325","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1325/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1325/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1325/events","html_url":"https://github.com/apache/couchdb/issues/1325","id":322528808,"node_id":"MDU6SXNzdWUzMjI1Mjg4MDg=","number":1325,"title":"Invalid bind_address issue on version 2.1.1 on mac","user":{"login":"navneet21sharma","id":20189518,"node_id":"MDQ6VXNlcjIwMTg5NTE4","avatar_url":"https://avatars1.githubusercontent.com/u/20189518?v=4","gravatar_id":"","url":"https://api.github.com/users/navneet21sharma","html_url":"https://github.com/navneet21sharma","followers_url":"https://api.github.com/users/navneet21sharma/followers","following_url":"https://api.github.com/users/navneet21sharma/following{/other_user}","gists_url":"https://api.github.com/users/navneet21sharma/gists{/gist_id}","starred_url":"https://api.github.com/users/navneet21sharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/navneet21sharma/subscriptions","organizations_url":"https://api.github.com/users/navneet21sharma/orgs","repos_url":"https://api.github.com/users/navneet21sharma/repos","events_url":"https://api.github.com/users/navneet21sharma/events{/privacy}","received_events_url":"https://api.github.com/users/navneet21sharma/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-12T17:31:41Z","updated_at":"2018-05-12T22:18:35Z","closed_at":"2018-05-12T18:28:51Z","author_association":"NONE","body":"I am having CouchDB 2.1.1 for mac and having same issue. When I start couchDB then it start opening new tab with address http://127.0.0.1:5984/_utils/ and refused to connect. It continue to open until I force quit it.\r\nPlease find crash log file\r\n[CouchDB2.log](https://github.com/apache/couchdb/files/1997786/CouchDB2.log)\r\n\r\nI tried to locate local.ini file to change address to 127.0.0.1 or 0.0.0.0 . I find local.ini  at /Applications/Apache\\ CouchDB.app/Contents/Resources/couchdbx-core/etc/local.ini \r\nI looked at [chttpd] bind_address , It was already 127.0.0.1 so I tried with 0.0.0.0 but still facing the same issue.\r\nPlease find local.ini file and default.ini file and let me know what is wrong with it.\r\n\r\n\r\n\r\n[ini_files.zip](https://github.com/apache/couchdb/files/1997790/ini_files.zip)\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1322","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1322/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1322/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1322/events","html_url":"https://github.com/apache/couchdb/issues/1322","id":322193233,"node_id":"MDU6SXNzdWUzMjIxOTMyMzM=","number":1322,"title":"CouchDB Replication not working on different Network Interface","user":{"login":"codehakase","id":9336187,"node_id":"MDQ6VXNlcjkzMzYxODc=","avatar_url":"https://avatars2.githubusercontent.com/u/9336187?v=4","gravatar_id":"","url":"https://api.github.com/users/codehakase","html_url":"https://github.com/codehakase","followers_url":"https://api.github.com/users/codehakase/followers","following_url":"https://api.github.com/users/codehakase/following{/other_user}","gists_url":"https://api.github.com/users/codehakase/gists{/gist_id}","starred_url":"https://api.github.com/users/codehakase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codehakase/subscriptions","organizations_url":"https://api.github.com/users/codehakase/orgs","repos_url":"https://api.github.com/users/codehakase/repos","events_url":"https://api.github.com/users/codehakase/events{/privacy}","received_events_url":"https://api.github.com/users/codehakase/received_events","type":"User","site_admin":false},"labels":[{"id":594291716,"node_id":"MDU6TGFiZWw1OTQyOTE3MTY=","url":"https://api.github.com/repos/apache/couchdb/labels/waiting%20on%20user","name":"waiting on user","color":"FBCA04","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-11T07:16:49Z","updated_at":"2018-05-12T16:24:51Z","closed_at":"2018-05-12T16:24:51Z","author_association":"NONE","body":"I have CouchDB (2.1) setup on a Raspberry Pi 3. Internet connection is provided to the device via a LAN cable, with that couchdb works correctly. However, when I setup the device to use internet connection from a USB Modem, couchdb replication stops, returns an error\r\n\r\n## Expected Behavior\r\nReplication should still work, no matter which network interface is in use.\r\n\r\n## Current Behavior\r\nOn replication intervals, it fails with an error `failed due to error {error,req_timedout}`\r\n> I have an API proxy also running in same device, all external network calls works perfectly, couchdb replication is the exception.\r\n\r\n## Steps to Reproduce (for bugs)\r\nI was able to reproduce the errors the following way:\r\n1. Connect the Raspberry to the internet via a LAN\r\n2. Connect to an api server, to create a new document in couchdb\r\n3. Confirm Replication by checking remote Upstream\r\n4. Restart the Device with connection set to Modem\r\n5. Repeat Step **2**\r\n\r\n## Your Environment\r\n* Version used: 2.1\r\n* Operating System and version (desktop or mobile): Raspbian (based on Debian)\r\n","score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1320","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1320/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1320/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1320/events","html_url":"https://github.com/apache/couchdb/issues/1320","id":321702777,"node_id":"MDU6SXNzdWUzMjE3MDI3Nzc=","number":1320,"title":"Attachment length is undefined in validation function","user":{"login":"OldSneerJaw","id":5003870,"node_id":"MDQ6VXNlcjUwMDM4NzA=","avatar_url":"https://avatars1.githubusercontent.com/u/5003870?v=4","gravatar_id":"","url":"https://api.github.com/users/OldSneerJaw","html_url":"https://github.com/OldSneerJaw","followers_url":"https://api.github.com/users/OldSneerJaw/followers","following_url":"https://api.github.com/users/OldSneerJaw/following{/other_user}","gists_url":"https://api.github.com/users/OldSneerJaw/gists{/gist_id}","starred_url":"https://api.github.com/users/OldSneerJaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OldSneerJaw/subscriptions","organizations_url":"https://api.github.com/users/OldSneerJaw/orgs","repos_url":"https://api.github.com/users/OldSneerJaw/repos","events_url":"https://api.github.com/users/OldSneerJaw/events{/privacy}","received_events_url":"https://api.github.com/users/OldSneerJaw/received_events","type":"User","site_admin":false},"labels":[{"id":594291847,"node_id":"MDU6TGFiZWw1OTQyOTE4NDc=","url":"https://api.github.com/repos/apache/couchdb/labels/wontfix","name":"wontfix","color":"D2DAE1","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-09T19:49:09Z","updated_at":"2018-05-09T20:13:39Z","closed_at":"2018-05-09T20:12:15Z","author_association":"NONE","body":"## Expected Behavior\r\n\r\nWhen a new attachment (e.g. `my-attachment.txt`) is added to a document by way of the [`PUT /db/doc/attachment`](http://docs.couchdb.org/en/2.1.1/api/document/attachments.html#put--db-docid-attname) endpoint, the length/size of the attachment should be exposed to the validation function by way of the `newDoc._attachments['my-attachment.txt'].length` field.\r\n\r\n## Current Behavior\r\n\r\nIn the case described above, the `newDoc._attachments['my-attachment.txt'].length` field has a value of `undefined` when the attachment is first added. However, on subsequent revisions to the document, the `newDoc._attachments['my-attachment.txt'].length` field _is_ correctly populated with the length of the file in the validation function. For example, consider the following sequence of events:\r\n\r\n1. Document A is created in revision 1 with some arbitrary content\r\n2. Attachment `my-attachment.txt` is added to document A via `PUT /db/doc/attachment` in revision 2\r\n3. The content of document A is replaced in revision 3\r\n\r\nIn step 2, the attachment object's `length` will be `undefined` when the validation function is executed. But in step 3, the attachment object's `length` will have the correct integer value when the validation function is executed.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Add a design document with the following validation function:\r\n\r\n```javascript\r\nfunction(newDoc, oldDoc) { \r\n  var names = Object.keys(newDoc._attachments); \r\n  for (var nameIndex = 0; nameIndex < names.length; nameIndex++) { \r\n    var name = names[nameIndex]; \r\n    var attachment = newDoc._attachments[name]; \r\n    if (attachment.length > 25) { \r\n      throw { forbidden: 'Maximum attachment length (25 bytes) exceeded by ' + name }; \r\n    } \r\n  }\r\n}\r\n```\r\n\r\n2. Add an attachment that exceeds the 25 byte limit defined in the validation function. Much to my chagrin, it will be allowed.\r\n\r\n```\r\nPUT /test/attachment-length-test/foo.txt HTTP/1.1\r\nHost: localhost:5984\r\nContent-Type: text/plain\r\nAuthorization: Basic ********\r\n\r\nThis is a simple text file whose length exceeds 25 bytes.\r\n```\r\n\r\n3. Attempt to add a second attachment that does not violate the constraint:\r\n\r\n```\r\nPUT /test/attachment-length-test/bar.txt?rev=1-0300ab1eae40ff6acda7c8772ed7a3e7 HTTP/1.1\r\nHost: localhost:5984\r\nContent-Type: text/plain\r\nAuthorization: Basic ********\r\n\r\nThis is short enough!\r\n```\r\n\r\nThe request will be rejected with the following response, indicating that the attachment that was added in the previous operation (`foo.txt`) is too large:\r\n\r\n```\r\n{\r\n    \"error\": \"forbidden\",\r\n    \"reason\": \"Maximum attachment length (25 bytes) exceeded by foo.txt\"\r\n}\r\n```\r\n\r\n## Context\r\n\r\nThis issue prevents fine-grained control by the validation function over the maximum size of each individual attachment or the maximum size of all attachments combined since the size of each attachment as it is being added is `undefined`. For instance, one might want their validation function to prevent document attachments larger than 100KB and to ensure that all attachments combined are no larger than 500KB to prevent malicious/clueless users from filling up the DB's hard drive.\r\n\r\n## Your Environment\r\n* Version used: 2.1.1\r\n* Browser Name and version: N/A\r\n* Operating System and version (desktop or mobile): macOS High Sierra\r\n* Link to your project: https://github.com/OldSneerJaw/couchster\r\n","score":1.0}]}
0

