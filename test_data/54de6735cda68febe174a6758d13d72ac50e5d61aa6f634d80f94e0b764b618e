HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sun, 13 May 2018 13:07:07 GMT
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: CFEA:4F42:44EABB5:8ADA804:5AF8387B
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 10
X-Ratelimit-Reset: 1526216865
X-Runtime-Rack: 0.312731
X-Xss-Protection: 1; mode=block

8000
{"total_count":29,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/tomaka/rouille/issues/167","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/167/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/167/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/167/events","html_url":"https://github.com/tomaka/rouille/issues/167","id":293769304,"number":167,"title":"Option to run using thread pool","user":{"login":"jaemk","id":13563490,"avatar_url":"https://avatars0.githubusercontent.com/u/13563490?v=4","gravatar_id":"","url":"https://api.github.com/users/jaemk","html_url":"https://github.com/jaemk","followers_url":"https://api.github.com/users/jaemk/followers","following_url":"https://api.github.com/users/jaemk/following{/other_user}","gists_url":"https://api.github.com/users/jaemk/gists{/gist_id}","starred_url":"https://api.github.com/users/jaemk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaemk/subscriptions","organizations_url":"https://api.github.com/users/jaemk/orgs","repos_url":"https://api.github.com/users/jaemk/repos","events_url":"https://api.github.com/users/jaemk/events{/privacy}","received_events_url":"https://api.github.com/users/jaemk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-02-02T04:22:51Z","updated_at":"2018-02-04T19:14:02Z","closed_at":"2018-02-04T19:14:02Z","author_association":"CONTRIBUTOR","body":"Since we're talking breaking changes (#165), what are your opinions on adding an option to process requests in a thread pool? The default still being unlimited `thread:::spawn`s. The `Server` struct could also be made more \"builder-y\" in the process.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/165","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/165/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/165/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/165/events","html_url":"https://github.com/tomaka/rouille/issues/165","id":291057957,"number":165,"title":"New release?","user":{"login":"mentalbrew","id":149130,"avatar_url":"https://avatars0.githubusercontent.com/u/149130?v=4","gravatar_id":"","url":"https://api.github.com/users/mentalbrew","html_url":"https://github.com/mentalbrew","followers_url":"https://api.github.com/users/mentalbrew/followers","following_url":"https://api.github.com/users/mentalbrew/following{/other_user}","gists_url":"https://api.github.com/users/mentalbrew/gists{/gist_id}","starred_url":"https://api.github.com/users/mentalbrew/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mentalbrew/subscriptions","organizations_url":"https://api.github.com/users/mentalbrew/orgs","repos_url":"https://api.github.com/users/mentalbrew/repos","events_url":"https://api.github.com/users/mentalbrew/events{/privacy}","received_events_url":"https://api.github.com/users/mentalbrew/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-01-24T01:56:24Z","updated_at":"2018-02-04T16:08:48Z","closed_at":"2018-02-04T16:08:48Z","author_association":"NONE","body":"Would there be any problem with releasing a version with serde support now that it has been merged? Is there anything else holding it up?","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/156","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/156/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/156/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/156/events","html_url":"https://github.com/tomaka/rouille/issues/156","id":271479093,"number":156,"title":"post_input! wrong number of type arguments: expected 1, found 2","user":{"login":"lolgesten","id":30282827,"avatar_url":"https://avatars0.githubusercontent.com/u/30282827?v=4","gravatar_id":"","url":"https://api.github.com/users/lolgesten","html_url":"https://github.com/lolgesten","followers_url":"https://api.github.com/users/lolgesten/followers","following_url":"https://api.github.com/users/lolgesten/following{/other_user}","gists_url":"https://api.github.com/users/lolgesten/gists{/gist_id}","starred_url":"https://api.github.com/users/lolgesten/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolgesten/subscriptions","organizations_url":"https://api.github.com/users/lolgesten/orgs","repos_url":"https://api.github.com/users/lolgesten/repos","events_url":"https://api.github.com/users/lolgesten/events{/privacy}","received_events_url":"https://api.github.com/users/lolgesten/received_events","type":"User","site_admin":false},"labels":[{"id":236655162,"url":"https://api.github.com/repos/tomaka/rouille/labels/bug","name":"bug","color":"fc2929","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-06T13:42:40Z","updated_at":"2018-04-04T09:13:15Z","closed_at":"2018-04-04T09:13:15Z","author_association":"NONE","body":"It's very possible I'm doing something wrong here.\r\n\r\nI believe I'm following the docs/example code, but still I get something strange in the macro.\r\n\r\n```\r\nerror[E0244]: wrong number of type arguments: expected 1, found 2\r\n   --> src/main.rs:142:33\r\n    |\r\n142 |                       let input = post_input!(&request, {\r\n    |  _________________________________^\r\n143 | |                         descriptor: String\r\n144 | |                     });\r\n    | |______________________^ expected 1 type argument\r\n    |\r\n    = note: this error originates in a macro outside of the current crate\r\n```\r\n\r\nShould this work?","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/155","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/155/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/155/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/155/events","html_url":"https://github.com/tomaka/rouille/issues/155","id":271305433,"number":155,"title":"Numbers in url","user":{"login":"zer0tonin","id":7149690,"avatar_url":"https://avatars3.githubusercontent.com/u/7149690?v=4","gravatar_id":"","url":"https://api.github.com/users/zer0tonin","html_url":"https://github.com/zer0tonin","followers_url":"https://api.github.com/users/zer0tonin/followers","following_url":"https://api.github.com/users/zer0tonin/following{/other_user}","gists_url":"https://api.github.com/users/zer0tonin/gists{/gist_id}","starred_url":"https://api.github.com/users/zer0tonin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zer0tonin/subscriptions","organizations_url":"https://api.github.com/users/zer0tonin/orgs","repos_url":"https://api.github.com/users/zer0tonin/repos","events_url":"https://api.github.com/users/zer0tonin/events{/privacy}","received_events_url":"https://api.github.com/users/zer0tonin/received_events","type":"User","site_admin":false},"labels":[{"id":236655162,"url":"https://api.github.com/repos/tomaka/rouille/labels/bug","name":"bug","color":"fc2929","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2017-11-05T19:11:56Z","updated_at":"2018-02-08T10:49:50Z","closed_at":"2018-02-08T10:49:50Z","author_association":"NONE","body":"Hello,\r\n\r\nIt looks like the application won't compile if the routes have hardcoded numbers in them.\r\nFor example this works : \r\n\r\n```rust\r\nfn main() {\r\n    println!(\"Listening!\");\r\n\r\n    rouille::start_server(\"0.0.0.0:8080\", move |request| {\r\n\r\n        router!(request, \r\n            (GET) (/) => {\r\n                Response::text(\"Hello world!\")\r\n            },\r\n\r\n            (GET) (/two) => {\r\n                Response::text(\"Hello two!\")\r\n            },\r\n\r\n            _ => Response::empty_404()\r\n        )\r\n\r\n    });\r\n}\r\n```\r\n\r\nBut this doesn't :\r\n```rust\r\nfn main() {\r\n    rouille::start_server(\"0.0.0.0:8080\", move |request| {\r\n\r\n        router!(request, \r\n            (GET) (/) => {\r\n                Response::text(\"Hello world!\")\r\n            },\r\n\r\n            (GET) (/2) => {\r\n                Response::text(\"Hello 2!\")\r\n            },\r\n\r\n            _ => Response::empty_404()\r\n        )\r\n\r\n    });\r\n}\r\n```\r\n\r\nIt leads to the following error:\r\n\r\n```\r\nerror: no rules expected the token `request_url`\r\n  --> src/main.rs:11:9\r\n   |\r\n11 | /         router!(request,\r\n12 | |             (GET) (/) => {\r\n13 | |                 Response::text(\"Hello world!\")\r\n14 | |             },\r\n...  |\r\n20 | |             _ => Response::empty_404()\r\n21 | |         )\r\n   | |_________^\r\n   |\r\n   = note: this error originates in a macro outside of the current crate\r\n\r\nerror: Could not compile `rustit`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name rustit src/main.rs --crate-type bin --emit=\r\ndep-info,link -C debuginfo=2 -C metadata=9a526171b8297007 -C extra-filename=-9a526171b8297007 --out\r\n-dir /home/antoine/src/rust/rustit/target/debug/deps -L dependency=/home/antoine/src/rust/rustit/ta\r\nrget/debug/deps --extern rouille=/home/antoine/src/rust/rustit/target/debug/deps/librouille-0f6c379\r\n9a677a040.rlib -L native=/home/antoine/src/rust/Rustit/target/debug/build/brotli-sys-faf770ae9206b3\r\n55/out -L native=/home/antoine/src/rust/Rustit/target/debug/build/miniz-sys-c9ca5bf082b97141/out` (\r\nexit code: 101)\r\n```\r\n\r\nIs this normal behaviour? Is there anyway to get around this?","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/149","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/149/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/149/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/149/events","html_url":"https://github.com/tomaka/rouille/issues/149","id":263733828,"number":149,"title":"Use serde instead of rustc_serialize?","user":{"login":"icefoxen","id":1335133,"avatar_url":"https://avatars3.githubusercontent.com/u/1335133?v=4","gravatar_id":"","url":"https://api.github.com/users/icefoxen","html_url":"https://github.com/icefoxen","followers_url":"https://api.github.com/users/icefoxen/followers","following_url":"https://api.github.com/users/icefoxen/following{/other_user}","gists_url":"https://api.github.com/users/icefoxen/gists{/gist_id}","starred_url":"https://api.github.com/users/icefoxen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icefoxen/subscriptions","organizations_url":"https://api.github.com/users/icefoxen/orgs","repos_url":"https://api.github.com/users/icefoxen/repos","events_url":"https://api.github.com/users/icefoxen/events{/privacy}","received_events_url":"https://api.github.com/users/icefoxen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-08T17:19:29Z","updated_at":"2018-01-03T16:53:30Z","closed_at":"2018-01-03T16:53:30Z","author_association":"NONE","body":"Or maybe have it available a feature flag.\r\n\r\nIn theory, it doesn't REALLY matter, but in practice, I use `reqwest` for unit tests, which serializes things to JSON using serde.  So far the serde and rustc_serialize representations have always matched, but there's no guarantee that will always be the case.\r\n\r\nI will try to work on a PR for this if you want.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/148","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/148/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/148/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/148/events","html_url":"https://github.com/tomaka/rouille/issues/148","id":259338200,"number":148,"title":"Trailing commas not handled in `router!` macro","user":{"login":"LPGhatguy","id":654598,"avatar_url":"https://avatars3.githubusercontent.com/u/654598?v=4","gravatar_id":"","url":"https://api.github.com/users/LPGhatguy","html_url":"https://github.com/LPGhatguy","followers_url":"https://api.github.com/users/LPGhatguy/followers","following_url":"https://api.github.com/users/LPGhatguy/following{/other_user}","gists_url":"https://api.github.com/users/LPGhatguy/gists{/gist_id}","starred_url":"https://api.github.com/users/LPGhatguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LPGhatguy/subscriptions","organizations_url":"https://api.github.com/users/LPGhatguy/orgs","repos_url":"https://api.github.com/users/LPGhatguy/repos","events_url":"https://api.github.com/users/LPGhatguy/events{/privacy}","received_events_url":"https://api.github.com/users/LPGhatguy/received_events","type":"User","site_admin":false},"labels":[{"id":236655164,"url":"https://api.github.com/repos/tomaka/rouille/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-09-21T00:07:42Z","updated_at":"2018-01-03T17:09:31Z","closed_at":"2018-01-03T17:09:31Z","author_association":"NONE","body":"This should be an easy problem to fix.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/146","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/146/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/146/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/146/events","html_url":"https://github.com/tomaka/rouille/issues/146","id":249835515,"number":146,"title":"Question on compile time","user":{"login":"Mitranim","id":4263831,"avatar_url":"https://avatars0.githubusercontent.com/u/4263831?v=4","gravatar_id":"","url":"https://api.github.com/users/Mitranim","html_url":"https://github.com/Mitranim","followers_url":"https://api.github.com/users/Mitranim/followers","following_url":"https://api.github.com/users/Mitranim/following{/other_user}","gists_url":"https://api.github.com/users/Mitranim/gists{/gist_id}","starred_url":"https://api.github.com/users/Mitranim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mitranim/subscriptions","organizations_url":"https://api.github.com/users/Mitranim/orgs","repos_url":"https://api.github.com/users/Mitranim/repos","events_url":"https://api.github.com/users/Mitranim/events{/privacy}","received_events_url":"https://api.github.com/users/Mitranim/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-08-12T21:10:34Z","updated_at":"2017-08-12T22:47:01Z","closed_at":"2017-08-12T22:47:01Z","author_association":"CONTRIBUTOR","body":"Using `cargo run`, this code takes at least 2.2s to recompile:\r\n\r\n```rs\r\nextern crate rouille;\r\n\r\nfn main() {\r\n    rouille::start_server(\"localhost:6982\", |_| rouille::Response::empty_404());\r\n}\r\n```\r\n\r\nMy CPU is a fairly recent 2.9 GHz i7, and I'm using the nightly toolchain. Usually, trivial Rust scripts recompile near-instantly due to dependency caching. Even using procedural macros (e.g. with Maud) doesn't seem to affect recompilation time. Using rouille, my compile time goes way up.\r\n\r\nAny suggestions/advice? Is this a rouille-specific problem?","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/139","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/139/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/139/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/139/events","html_url":"https://github.com/tomaka/rouille/issues/139","id":224532351,"number":139,"title":"How to stop the server?","user":{"login":"leovailati","id":557981,"avatar_url":"https://avatars3.githubusercontent.com/u/557981?v=4","gravatar_id":"","url":"https://api.github.com/users/leovailati","html_url":"https://github.com/leovailati","followers_url":"https://api.github.com/users/leovailati/followers","following_url":"https://api.github.com/users/leovailati/following{/other_user}","gists_url":"https://api.github.com/users/leovailati/gists{/gist_id}","starred_url":"https://api.github.com/users/leovailati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leovailati/subscriptions","organizations_url":"https://api.github.com/users/leovailati/orgs","repos_url":"https://api.github.com/users/leovailati/repos","events_url":"https://api.github.com/users/leovailati/events{/privacy}","received_events_url":"https://api.github.com/users/leovailati/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-04-26T16:48:35Z","updated_at":"2017-04-27T14:01:08Z","closed_at":"2017-04-27T14:01:08Z","author_association":"NONE","body":"Hello,\r\n\r\nWhat is the appropriate way to stop the server?\r\n\r\nAccording to documentation for `Server::run()`:\r\n\r\n> Runs the server **forever**, or until the listening socket is somehow force-closed by the operating system.\r\n\r\nAnd `start_server` never returns (`!`).","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/131","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/131/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/131/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/131/events","html_url":"https://github.com/tomaka/rouille/issues/131","id":200791901,"number":131,"title":"error when cargo build","user":{"login":"adals","id":169691,"avatar_url":"https://avatars2.githubusercontent.com/u/169691?v=4","gravatar_id":"","url":"https://api.github.com/users/adals","html_url":"https://github.com/adals","followers_url":"https://api.github.com/users/adals/followers","following_url":"https://api.github.com/users/adals/following{/other_user}","gists_url":"https://api.github.com/users/adals/gists{/gist_id}","starred_url":"https://api.github.com/users/adals/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adals/subscriptions","organizations_url":"https://api.github.com/users/adals/orgs","repos_url":"https://api.github.com/users/adals/repos","events_url":"https://api.github.com/users/adals/events{/privacy}","received_events_url":"https://api.github.com/users/adals/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-01-14T09:07:03Z","updated_at":"2017-01-14T10:04:15Z","closed_at":"2017-01-14T09:29:56Z","author_association":"NONE","body":"    Updating registry `https://github.com/rust-lang/crates.io-index`\r\nerror: failed to select a version for `phf` (required by `postgres`):\r\nall possible versions conflict with previously selected versions of `phf`\r\n  version 0.7.16 in use by phf v0.7.16\r\n  possible versions to select: 0.7.19\r\n\r\n\r\n\r\n$ rustc -Vv\r\nrustc 1.14.0 (e8a012324 2016-12-16)\r\nbinary: rustc\r\ncommit-hash: e8a0123241f0d397d39cd18fcc4e5e7edde22730\r\ncommit-date: 2016-12-16\r\nhost: x86_64-apple-darwin\r\nrelease: 1.14.0\r\nLLVM version: 3.9","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/125","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/125/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/125/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/125/events","html_url":"https://github.com/tomaka/rouille/issues/125","id":196293820,"number":125,"title":"Use pure Rust gzip library","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[{"id":236655164,"url":"https://api.github.com/repos/tomaka/rouille/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-12-18T19:27:39Z","updated_at":"2018-04-14T20:17:35Z","closed_at":"2018-04-14T20:17:35Z","author_association":"OWNER","body":"Very long term issue.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/110","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/110/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/110/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/110/events","html_url":"https://github.com/tomaka/rouille/issues/110","id":195855394,"number":110,"title":"Add methods on Response to set the cache-control","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[{"id":236655164,"url":"https://api.github.com/repos/tomaka/rouille/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/tomaka/rouille/milestones/1","html_url":"https://github.com/tomaka/rouille/milestone/1","labels_url":"https://api.github.com/repos/tomaka/rouille/milestones/1/labels","id":2166239,"number":1,"title":"Version 1.0","description":"","creator":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2016-11-30T13:02:14Z","updated_at":"2016-12-18T10:19:58Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2016-12-15T16:46:13Z","updated_at":"2016-12-18T10:19:58Z","closed_at":"2016-12-18T10:19:58Z","author_association":"OWNER","body":"","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/109","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/109/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/109/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/109/events","html_url":"https://github.com/tomaka/rouille/issues/109","id":195853907,"number":109,"title":"Add an accept! macro","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[{"id":236655164,"url":"https://api.github.com/repos/tomaka/rouille/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/tomaka/rouille/milestones/1","html_url":"https://github.com/tomaka/rouille/milestone/1","labels_url":"https://api.github.com/repos/tomaka/rouille/milestones/1/labels","id":2166239,"number":1,"title":"Version 1.0","description":"","creator":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2016-11-30T13:02:14Z","updated_at":"2016-12-18T10:19:58Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2016-12-15T16:40:22Z","updated_at":"2016-12-18T10:10:50Z","closed_at":"2016-12-18T10:10:50Z","author_association":"OWNER","body":"That allows dispatching depending on the `Accept` header of the request.\r\n\r\nExample usage:\r\n\r\n```rust\r\naccept!(request,\r\n    \"text/json\" => Response::json(...),\r\n    \"text/html\" => Response::html(...),\r\n    _ => Response::not_acceptable()\r\n)\r\n```\r\n\r\nBy knowing all the possible content types in advance we can determine which one matches the request the most.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/101","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/101/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/101/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/101/events","html_url":"https://github.com/tomaka/rouille/issues/101","id":195598596,"number":101,"title":"Add support for brotli content encoding","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-12-14T17:45:59Z","updated_at":"2016-12-17T15:03:05Z","closed_at":"2016-12-17T15:03:05Z","author_association":"OWNER","body":"","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/95","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/95/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/95/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/95/events","html_url":"https://github.com/tomaka/rouille/issues/95","id":195509329,"number":95,"title":"Make it possible to start a server on a random port and retreive it","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[{"id":236655164,"url":"https://api.github.com/repos/tomaka/rouille/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-12-14T11:41:26Z","updated_at":"2016-12-14T17:40:33Z","closed_at":"2016-12-14T17:40:33Z","author_association":"OWNER","body":"Starting the server on a random port is not difficult (just pass port number 0) but knowing which port is used is currently impossible.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/90","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/90/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/90/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/90/events","html_url":"https://github.com/tomaka/rouille/issues/90","id":195483353,"number":90,"title":"Support SSL","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url"
8000
:"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[{"id":236655164,"url":"https://api.github.com/repos/tomaka/rouille/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-12-14T09:41:36Z","updated_at":"2018-05-04T23:50:38Z","closed_at":"2018-02-25T23:06:26Z","author_association":"OWNER","body":"Both for the listening server and the reverse proxy thing.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/83","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/83/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/83/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/83/events","html_url":"https://github.com/tomaka/rouille/issues/83","id":195365947,"number":83,"title":"Add possibility to set the content encoding","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-12-13T20:55:32Z","updated_at":"2016-12-15T08:11:52Z","closed_at":"2016-12-15T08:11:52Z","author_association":"OWNER","body":"To directly send gzip back to the client for example.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/67","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/67/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/67/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/67/events","html_url":"https://github.com/tomaka/rouille/issues/67","id":193713407,"number":67,"title":"Support websockets","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-12-06T08:43:16Z","updated_at":"2016-12-07T12:59:31Z","closed_at":"2016-12-07T12:59:31Z","author_association":"OWNER","body":"Unfortunately this needs a fix here: https://github.com/frewsxcv/tiny-http/blob/1dc2c8ef3defdfb5d21082814f2eac5899f583b4/src/request.rs#L265","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/66","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/66/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/66/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/66/events","html_url":"https://github.com/tomaka/rouille/issues/66","id":193677348,"number":66,"title":"Use of gh-pages for book hosting","user":{"login":"Phrohdoh","id":4861023,"avatar_url":"https://avatars2.githubusercontent.com/u/4861023?v=4","gravatar_id":"","url":"https://api.github.com/users/Phrohdoh","html_url":"https://github.com/Phrohdoh","followers_url":"https://api.github.com/users/Phrohdoh/followers","following_url":"https://api.github.com/users/Phrohdoh/following{/other_user}","gists_url":"https://api.github.com/users/Phrohdoh/gists{/gist_id}","starred_url":"https://api.github.com/users/Phrohdoh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Phrohdoh/subscriptions","organizations_url":"https://api.github.com/users/Phrohdoh/orgs","repos_url":"https://api.github.com/users/Phrohdoh/repos","events_url":"https://api.github.com/users/Phrohdoh/events{/privacy}","received_events_url":"https://api.github.com/users/Phrohdoh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-12-06T03:57:15Z","updated_at":"2016-12-06T13:31:02Z","closed_at":"2016-12-06T13:31:02Z","author_association":"NONE","body":"I really like the usage of `gh-pages` for hosting the book.\r\n\r\nWould you write up (blog post, etc) a how-to for this so that other projects may follow along?\r\n\r\nI'd be great to see more do this, but unfortunately most of the gh-pages generation I have seen (my own included) just push the orphaned results of `cargo doc` and call that a day.","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/50","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/50/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/50/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/50/events","html_url":"https://github.com/tomaka/rouille/issues/50","id":191685320,"number":50,"title":"Use a custom derive for POST input structs","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2016-11-25T11:49:03Z","updated_at":"2016-11-30T06:20:11Z","closed_at":"2016-11-30T06:20:11Z","author_association":"OWNER","body":"This is a follow-up to #49 \r\n\r\nOnce it's stable (https://github.com/rust-lang/rust/issues/35900), we can use the custom derive system for POST structs instead of using `rustc-serialize`.\r\n\r\nThis has the big advantage that we can adjust the corresponding trait to our needs, and make it work for files.\r\n\r\n```rust\r\ntrait DecodePostField {\r\n    fn from_field(content: &str) -> Result<Self, PostError>;\r\n    fn from_file<R: BufRead>(file: R, mime: &str) -> Result<Self, PostError>;\r\n}\r\n\r\ntrait DecodePostInput {\r\n    fn decode<I: Iterator<Item = PostInputElement>>(elements: I) -> Result<Self, PostError>;\r\n}\r\n```\r\n\r\nExample in practice:\r\n\r\n```rust\r\n#[derive(RouillePostDecode)]      // implements DecodePostInput on the struct\r\nstruct Input {\r\n    field1: i32,         // each field must implement DecodePostField\r\n    field2: String,\r\n    file: TemporaryFileStorage,\r\n}\r\n\r\nlet input: Input = try_or_400!(rouille::post::decode(&request));\r\n```\r\n\r\nIf you read #49 I explain at the bottom that it isn't possible to do this. But if we use a trait other than the one in rustc-serialize, then it becomes a viable option.\r\n\r\nIn this example, the `from_file` method of `TemporaryFileStorage` would write the file to a temporary directory by streaming from the user's request, and then will return a `TemporaryFileStorage` struct that contains the path to the file. If the `TemporaryFileStorage` struct gets dropped before being stored in a database (for example because of a panic), its destructor would automatically delete the file.\r\n\r\nRouille could provide some helpers, like:\r\n- `TemporaryFileStorage`\r\n- `BufferedFile` (stores the content in memory)\r\n\r\nThere is one unresolved question, however: how do we provide a configuration for `TemporaryFileStorage` or `BufferedFile`? While these two cases don't need a configuration, it would be nice if we could write a `S3File` struct that automatically uploads to S3 or a `ProxyFile` that transfers the file to another service. But doing so requires some sort of configuration to be passed to `from_file`.\r\n","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/49","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/49/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/49/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/49/events","html_url":"https://github.com/tomaka/rouille/issues/49","id":191676517,"number":49,"title":"Short-term improvement of POST input","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[{"id":236655164,"url":"https://api.github.com/repos/tomaka/rouille/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-11-25T11:00:01Z","updated_at":"2016-11-29T11:05:03Z","closed_at":"2016-11-29T11:05:03Z","author_association":"OWNER","body":"The way POST input is currently handled has several drawbacks when it comes to multipart form data. You can't use the structs system, and therefore you are forced to manually handle the fields using the multipart facilities. If you happen to use a regular form-encoded form and want to switch to multipart, you have to rewrite all your code.\r\n\r\nI think the following should be changed:\r\n\r\n- `get_post_input` and `decode_raw_post_input` automatically support multipart form data in addition to url-encoded data.\r\n- If the user transfers a file and `get_post_input`/`decode_raw_post_input` are used, the file is ignored. These functions are only meant to be used for fileless input.\r\n- Add a `get_post_input_with_files` function, a bit similar to `get_multipart_input`. This function returns an iterator (like `get_multipart_input`) except that any non-file data is buffered and provided at once as the last element of the iterator. This non-file-data is provided as a struct `FieldsInput` that as a `decode` method.\r\n\r\n## Example: before\r\n\r\n```rust\r\nlet mut field1 = None;\r\nlet mut field2 = None;\r\nlet mut file_handle = None;\r\n\r\nlet mut multipart = try_or_400!(rouille::input::multipart::get_multipart_input(request));\r\nwhile let Some(entry) = multipart.next() {\r\n    match entry.data {\r\n        rouille::input::multipart::MultipartData::Text(txt) if entry.name == \"field1\" => {\r\n            field1 = Some(try_or_400!(txt.parse()));\r\n        },\r\n        rouille::input::multipart::MultipartData::Text(txt) if entry.name == \"field2\" => {\r\n            field2 = Some(try_or_400!(txt.parse()));\r\n        },\r\n        rouille::input::multipart::MultipartData::File(f) => {\r\n            file_handle = Some(upload_file(f));\r\n        },\r\n     }\r\n}\r\n\r\nlet field1 = match field1 { Some(f) => f, None => return Response::empty_400() }; \r\nlet field2 = match field2 { Some(f) => f, None => return Response::empty_400() };\r\nlet file_handle = match file_handle { Some(f) => f, None => return Response::empty_400() };\r\n\r\nadd_file_in_database(field1, field2, file_handle);\r\n```\r\n\r\n## Example: after\r\n\r\n```rust\r\n#[derive(RustcDecodable)]\r\nstruct Input {\r\n    field1: i32,\r\n    field2: String,\r\n}\r\n\r\nlet mut file_handle = None;\r\n\r\nlet mut multipart = try_or_400!(rouille::input::post::get_post_input_with_files(request));\r\nwhile let Some(entry) = multipart.next() {\r\n    match entry.data {\r\n        rouille::input::multipart::MultipartData::File(f) => {\r\n            file_handle = Some(upload_file(f));\r\n        },\r\n        rouille::input::multipart::MultipartData::Fields(fields) => {\r\n            let input: Input = try_or_400!(fields.decode());\r\n            let file_handle = match file_handle { Some(f) => f, None => return Response::empty_400() };\r\n            add_file_in_database(input.field1, input.field2, file_handle);\r\n        },\r\n     }\r\n}\r\n```\r\n\r\nWhile these two examples don't look so different, the important part is that in the second example it's much easier and cleaner to add new fields to `Input` compared to the first example.\r\n\r\nFiles still need individual handling.\r\n\r\n## Technical constraints\r\n\r\nBefore you ask, there are some technical constraints why we can't do this:\r\n\r\n```rust\r\nstruct Input {\r\n    field1: i32,\r\n    field2: String,\r\n    file: SomeFileHandle,\r\n}\r\n```\r\n\r\nSince files and fields can come in any order in the body sent by the browser, we would sometimes be obligated to cache the content of the file in a buffer (or on the disk). That's what PHP does for example. But it's something that we don't want in a high-performance language such as Rust, as it's too costly and/or too magical.\r\n\r\nFor example some people may want to stream directly the content of the file from the client's socket to S3 or to another service. This is only possible if we use an iterator-like system like presented above.\r\n","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/43","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/43/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/43/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/43/events","html_url":"https://github.com/tomaka/rouille/issues/43","id":182874388,"number":43,"title":"Send back session cookie as HttpOnly","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-10-13T19:10:02Z","updated_at":"2016-11-07T12:09:05Z","closed_at":"2016-11-07T12:09:05Z","author_association":"OWNER","body":"","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/35","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/35/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/35/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/35/events","html_url":"https://github.com/tomaka/rouille/issues/35","id":180373365,"number":35,"title":"Sessions rework","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-09-30T18:38:17Z","updated_at":"2016-11-30T06:10:19Z","closed_at":"2016-11-30T06:10:19Z","author_association":"OWNER","body":"The way sessions currently work is weird and should be changed entirely.\n\nAs a reminder, to handle a session you need to:\n- Examine the Request to check for a specific cookie.\n- If present, load session data from some sort of storage (like a database).\n- If necessary, store updated data to the storage.\n- Put the session cookie in the Response.\n\nSince there is a variety of ways to store session data, rouille is not going to handle this. However steps 1 and 4 can (and should) be handled by rouille.\n\nI suggest users should do something like this:\n\n``` rust\nlet database = ...;\n\nrouille::start_server(\"0.0.0.0:8000\", move |request| {\n    rouille::session::session(&request, \"SID\", 3600, |session| {\n        struct Data { name: String }\n\n        let mut session_data: Option<Data> = if session.client_has_sid() {\n            Some(database.load_data(session.id()))\n        } else { None };\n        let had_data = session_data.is_some();\n\n        let response = handle(request, &mut session_data);\n\n        if let Some(data) = session_data {\n            if !had_data { database.insert_entry(session.id(), data); }\n            else { database.update_entry(session.id(), data); }\n        } else {\n            if had_data { database.remove_entry(session.id()); }\n        }\n\n        response\n    })\n});\n```\n\nIt may look a bit cumbersome, but I think it's ok. It's coherent with rouille's design of being simple and explicit.\n\nThe `session` function would take care of analyzing the `Request` and furnishing a `Session` object. This `Session` object would be responsible of giving a session ID, potentially generating one if there is none. Then the `session` function transforms the `Response` to set the cookie if necessary.\n","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/32","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/32/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/32/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/32/events","html_url":"https://github.com/tomaka/rouille/issues/32","id":180349025,"number":32,"title":"Make try_or_400! return the error message in its body?","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[{"id":236655164,"url":"https://api.github.com/repos/tomaka/rouille/labels/enhancement","name":"enhancement","color":"84b6eb","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/tomaka/rouille/milestones/1","html_url":"https://github.com/tomaka/rouille/milestone/1","labels_url":"https://api.github.com/repos/tomaka/rouille/milestones/1/labels","id":2166239,"number":1,"title":"Version 1.0","description":"","creator":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2016-11-30T13:02:14Z","updated_at":"2016-12-18T10:19:58Z","due_on":null,"closed_at":null},"comments":1,"created_at":"2016-09-30T16:38:56Z","updated_at":"2016-12-15T10:15:36Z","closed_at":"2016-12-15T10:15:36Z","author_association":"OWNER","body":"Not sure if that's a good idea or not, but the `try_or_400!` macro could assume that its parameter implements `Error` and put the error trace in the body of the response.\n","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/26","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/26/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/26/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/26/events","html_url":"https://github.com/tomaka/rouille/issues/26","id":178851379,"number":26,"title":"About RouteError","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-09-23T11:19:33Z","updated_at":"2016-09-30T15:23:10Z","closed_at":"2016-09-30T15:23:10Z","author_association":"OWNER","body":"I feel that this aspect is not designed correctly.\nWhen do you return a `Response` with a 404 status code and when do you return a `RouteError::NoRouteFound`? Both represent the same thing.\n\nI think that `RouteError` should maybe be removed and everything should simply return a `Response`.\n","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/25","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/25/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/25/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/25/events","html_url":"https://github.com/tomaka/rouille/issues/25","id":178851063,"number":25,"title":"Solve how to handle the request's body","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-09-23T11:17:52Z","updated_at":"2016-10-02T09:22:22Z","closed_at":"2016-10-02T09:22:22Z","author_association":"OWNER","body":"Right now the request's body is entirely stored in a Vec, and cloned every time we access it.\nThis is a bad idea as it makes the server very easy to DDoS by sending large bodies.\n\nInstead, the body should be an object that implements `Read` and that progressively reads the data from the socket.\n\nBut this has the consequence that it will not be possible to retrieve the body twice. In an ideal world it would be possible to retrieve the body as many times as you like, but I'm not sure if in practice it's a real problem or a non-issue.\n","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/20","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/20/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/20/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/20/events","html_url":"https://github.com/tomaka/rouille/issues/20","id":178702706,"number":20,"title":"request.header(&str) is case sensitive","user":{"login":"sindreij","id":210635,"avatar_url":"https://avatars1.githubusercontent.com/u/210635?v=4","gravatar_id":"","url":"https://api.github.com/users/sindreij","html_url":"https://github.com/sindreij","followers_url":"https://api.github.com/users/sindreij/followers","following_url":"https://api.github.com/users/sindreij/following{/other_user}","gists_url":"https://api.github.com/users/sindreij/gists{/gist_id}","starred_url":"https://api.github.com/users/sindreij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sindreij/subscriptions","organizations_url":"https://api.github.com/users/sindreij/orgs","repos_url":"https://api.github.com/users/sindreij/repos","events_url":"https://api.github.com/users/sindreij/events{/privacy}","received_events_url":"https://api.github.com/users/sindreij/received_events","type":"User","site_admin":false},"labels":[{"id":236655162,"url":"https://api.github.com/repos/tomaka/rouille/labels/bug","name":"bug","color":"fc2929","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-09-22T19:43:39Z","updated_at":"2016-09-22T20:26:14Z","closed_at":"2016-09-22T20:26:14Z","author_association":"CONTRIBUTOR","body":"Hello, I really like your library in its simplicity it looks easier to use than the alternatives, and not using a middleware system looks like a smart choice.\n\nI have found one thing that I think might be a bug. request.header(&str) is case sensitive, while HTTP headers is supposed to be case insensitive. tiny-http solves this by having a HeaderField where comparisons are case insensitive, however rouille are casting headers to strings, which makes them case sensitive.\n","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/17","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/17/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/17/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/17/events","html_url":"https://github.com/tomaka/rouille/issues/17","id":178397725,"number":17,"title":"Add a way to proxy a request to another server","user":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/tomaka/rouille/milestones/1","html_url":"https://github.com/tomaka/rouille/milestone/1","labels_url":"https://api.github.com/repos/tomaka/rouille/milestones/1/labels","id":2166239,"number":1,"title":"Version 1.0","description":"","creator":{"login":"tomaka","id":1412254,"avatar_url":"https://avatars1.githubusercontent.com/u/1412254?v=4","gravatar_id":"","url":"https://api.github.com/users/tomaka","html_url":"https://github.com/tomaka","followers_url":"https://api.github.com/users/tomaka/followers","following_url":"https://api.github.com/users/tomaka/following{/other_user}","gists_url":"https://api.github.com/users/tomaka/gists{/gist_id}","starred_url":"https://api.github.com/users/tomaka/starred{/owner}{/repo}","subscriptions_url":"
102d
https://api.github.com/users/tomaka/subscriptions","organizations_url":"https://api.github.com/users/tomaka/orgs","repos_url":"https://api.github.com/users/tomaka/repos","events_url":"https://api.github.com/users/tomaka/events{/privacy}","received_events_url":"https://api.github.com/users/tomaka/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2016-11-30T13:02:14Z","updated_at":"2016-12-18T10:19:58Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2016-09-21T16:27:10Z","updated_at":"2016-12-03T09:22:32Z","closed_at":"2016-12-03T09:22:32Z","author_association":"OWNER","body":"","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/14","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/14/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/14/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/14/events","html_url":"https://github.com/tomaka/rouille/issues/14","id":168672197,"number":14,"title":"Why is the handler argument in the start_server function Fn(&Request)?","user":{"login":"LFalch","id":1416084,"avatar_url":"https://avatars0.githubusercontent.com/u/1416084?v=4","gravatar_id":"","url":"https://api.github.com/users/LFalch","html_url":"https://github.com/LFalch","followers_url":"https://api.github.com/users/LFalch/followers","following_url":"https://api.github.com/users/LFalch/following{/other_user}","gists_url":"https://api.github.com/users/LFalch/gists{/gist_id}","starred_url":"https://api.github.com/users/LFalch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LFalch/subscriptions","organizations_url":"https://api.github.com/users/LFalch/orgs","repos_url":"https://api.github.com/users/LFalch/repos","events_url":"https://api.github.com/users/LFalch/events{/privacy}","received_events_url":"https://api.github.com/users/LFalch/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-08-01T15:21:44Z","updated_at":"2016-08-01T15:28:04Z","closed_at":"2016-08-01T15:28:04Z","author_association":"NONE","body":"It would simplify things a little if it was FnMut(&Request) and I can't really see and why it isn't.\n","score":1.0},{"url":"https://api.github.com/repos/tomaka/rouille/issues/3","repository_url":"https://api.github.com/repos/tomaka/rouille","labels_url":"https://api.github.com/repos/tomaka/rouille/issues/3/labels{/name}","comments_url":"https://api.github.com/repos/tomaka/rouille/issues/3/comments","events_url":"https://api.github.com/repos/tomaka/rouille/issues/3/events","html_url":"https://github.com/tomaka/rouille/issues/3","id":127651225,"number":3,"title":"Licence","user":{"login":"flosse","id":276043,"avatar_url":"https://avatars2.githubusercontent.com/u/276043?v=4","gravatar_id":"","url":"https://api.github.com/users/flosse","html_url":"https://github.com/flosse","followers_url":"https://api.github.com/users/flosse/followers","following_url":"https://api.github.com/users/flosse/following{/other_user}","gists_url":"https://api.github.com/users/flosse/gists{/gist_id}","starred_url":"https://api.github.com/users/flosse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flosse/subscriptions","organizations_url":"https://api.github.com/users/flosse/orgs","repos_url":"https://api.github.com/users/flosse/repos","events_url":"https://api.github.com/users/flosse/events{/privacy}","received_events_url":"https://api.github.com/users/flosse/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-01-20T10:24:11Z","updated_at":"2016-01-24T09:35:53Z","closed_at":"2016-01-24T09:35:53Z","author_association":"NONE","body":"Would you mind to add a `LICENCE` file to the repository and add the name to https://github.com/flosse/rust-web-framework-comparison ?\n","score":1.0}]}
0

