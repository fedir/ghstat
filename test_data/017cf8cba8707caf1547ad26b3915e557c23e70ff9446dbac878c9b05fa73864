HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 09 Jun 2018 08:08:10 GMT
Link: <https://api.github.com/search/issues?q=repo%3Aninenines%2Fcowboy+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Aninenines%2Fcowboy+type%3Aissue+state%3Aclosed&page=27>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: CB3C:57C3:1EE2E38:44F730A:5B1B8AEA
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 21
X-Ratelimit-Reset: 1528531742
X-Runtime-Rack: 0.314559
X-Xss-Protection: 1; mode=block

8000
{"total_count":789,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1294","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1294/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1294/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1294/events","html_url":"https://github.com/ninenines/cowboy/issues/1294","id":328961110,"node_id":"MDU6SXNzdWUzMjg5NjExMTA=","number":1294,"title":"Request fails with 400 for empty Host header","user":{"login":"saxxi","id":504684,"node_id":"MDQ6VXNlcjUwNDY4NA==","avatar_url":"https://avatars2.githubusercontent.com/u/504684?v=4","gravatar_id":"","url":"https://api.github.com/users/saxxi","html_url":"https://github.com/saxxi","followers_url":"https://api.github.com/users/saxxi/followers","following_url":"https://api.github.com/users/saxxi/following{/other_user}","gists_url":"https://api.github.com/users/saxxi/gists{/gist_id}","starred_url":"https://api.github.com/users/saxxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saxxi/subscriptions","organizations_url":"https://api.github.com/users/saxxi/orgs","repos_url":"https://api.github.com/users/saxxi/repos","events_url":"https://api.github.com/users/saxxi/events{/privacy}","received_events_url":"https://api.github.com/users/saxxi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2018-06-04T08:44:20Z","updated_at":"2018-06-04T20:38:16Z","closed_at":"2018-06-04T16:17:16Z","author_association":"NONE","body":"It appears AWS Application Load Balancer's health check ping is not sending Host header which causes the machine to wrongly think it's unhealthy and therefore terminate it.\r\n\r\n```\r\n$ curl -i localhost:4000/status  -H 'Host:anything-here-is-okay'\r\nHTTP/1.1 200 OK\r\nserver: Cowboy\r\ndate: Mon, 04 Jun 2018 07:18:34 GMT\r\ncontent-length: 19\r\ncache-control: max-age=0, private, must-revalidate\r\n\r\n{\"version\":\"0.0.3\"}%\r\n```\r\n\r\nAnd this is what we think is happening on the server side, ie from AWS ALB's health check, reproducible in local env too:\r\n\r\n```\r\n$ curl -i localhost:4000/status  -H 'Host:'\r\nHTTP/1.1 400 Bad Request\r\nconnection: close\r\nserver: Cowboy\r\ndate: Mon, 04 Jun 2018 07:19:17 GMT\r\ncontent-length: 0\r\n```\r\n\r\nThe logged error (same as production):\r\n\r\n```\r\n[error] Cowboy returned 400 because it was unable to parse the request headers.\r\n\r\nThis may happen because there are no headers, or there are too many headers\r\nor the header name or value are too large (such as a large cookie).\r\n\r\nYou can customize those values when configuring your http/https\r\nserver. The configuration option and default values are shown below:\r\n\r\n    protocol_options: [\r\n      max_header_name_length: 64,\r\n      max_header_value_length: 4096,\r\n      max_headers: 100,\r\n      max_request_line_length: 8096\r\n    ]\r\n```\r\n\r\nRegarding the solution to the issue I was hoping we could add or replace a plug before this line kicks in and inject something like:\r\n\r\n```\r\n# Request -> [OurMiddleware] -> [Plug] -> [Phoenix] -> ...\r\n\r\ndefmodule NotificationServiceWeb.Endpoint do\r\n  plug :add_host_if_blank\r\n  use Phoenix.Endpoint\r\n\r\n  defp add_host_if_blank\r\n      conn = conn\r\n      |> put_req_header(\"Host\", \"custom-host\") # this seems to work only on testing?\r\n  end\r\nend\r\n```\r\n\r\nI posted this issue on [phoenix's group](https://github.com/phoenixframework/phoenix/issues/2437) however it seems the issue comes from `Cowboy`. Any thoughts on how to fix this?\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1293","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1293/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1293/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1293/events","html_url":"https://github.com/ninenines/cowboy/issues/1293","id":324932042,"node_id":"MDU6SXNzdWUzMjQ5MzIwNDI=","number":1293,"title":"SSL handshake failure","user":{"login":"benjamin-bergia","id":6614080,"node_id":"MDQ6VXNlcjY2MTQwODA=","avatar_url":"https://avatars3.githubusercontent.com/u/6614080?v=4","gravatar_id":"","url":"https://api.github.com/users/benjamin-bergia","html_url":"https://github.com/benjamin-bergia","followers_url":"https://api.github.com/users/benjamin-bergia/followers","following_url":"https://api.github.com/users/benjamin-bergia/following{/other_user}","gists_url":"https://api.github.com/users/benjamin-bergia/gists{/gist_id}","starred_url":"https://api.github.com/users/benjamin-bergia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benjamin-bergia/subscriptions","organizations_url":"https://api.github.com/users/benjamin-bergia/orgs","repos_url":"https://api.github.com/users/benjamin-bergia/repos","events_url":"https://api.github.com/users/benjamin-bergia/events{/privacy}","received_events_url":"https://api.github.com/users/benjamin-bergia/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-21T14:15:38Z","updated_at":"2018-05-22T01:39:56Z","closed_at":"2018-05-21T14:31:33Z","author_association":"NONE","body":"For some reasons, I am not able to get cowboy running with tls.\r\nI use the following configuration:\r\n```\r\n  Routes = [{'_', [{\"/test\", test_handler,    #{}}]}],\r\n  Dispatch = cowboy_router:compile(Routes),\r\n\r\n  PrivDirectory = code:priv_dir(myapp),\r\n\r\n  {ok, _} = cowboy:start_tls(myapp_tls,\r\n                             [{certfile, PrivDirectory ++ \"/server.crt\"},\r\n                              {keyfile, PrivDirectory ++ \"/server.key\"},\r\n                              {port, 8443}\r\n                             ],\r\n                             #{env => #{dispatch => Dispatch}}),\r\n\r\n  myapp_sup:start_link().\r\n```\r\n\r\nAnd when I send any request with curl or other, I always get something like:\r\n```\r\ncurl --trace-ascii - -k https://127.0.0.1:8443/test\r\n== Info:   Trying 127.0.0.1...\r\n== Info: TCP_NODELAY set\r\n== Info: Connected to 127.0.0.1 (127.0.0.1) port 8443 (#0)\r\n== Info: ALPN, offering h2\r\n== Info: ALPN, offering http/1.1\r\n== Info: ignoring certificate verify locations due to disabled peer verification\r\n=> Send SSL data, 5 bytes (0x5)\r\n0000: .....\r\n== Info: TLSv1.2 (OUT), TLS handshake, Client hello (1):\r\n=> Send SSL data, 237 bytes (0xed)\r\n0000: ......cve........%E@.....{tc..\"...L.k...h.,.0.........+./.....$.\r\n0040: (.s.w.#.'.r.v.....................=...<...5.../.A...............\r\n0080: k...g...9...3.E.....X......................3t.........h2.http/1.\r\n00c0: 1........... ................................\r\n<= Recv SSL data, 5 bytes (0x5)\r\n0000: .....\r\n== Info: TLSv1.2 (IN), TLS alert, Server hello (2):\r\n<= Recv SSL data, 2 bytes (0x2)\r\n0000: .(\r\n== Info: error:14094410:SSL routines:ssl3_read_bytes:sslv3 alert handshake failure\r\n== Info: stopped the pause stream!\r\n== Info: Closing connection 0\r\ncurl: (35) error:14094410:SSL routines:ssl3_read_bytes:sslv3 alert handshake failure\r\n```\r\n\r\nOn the cowboy shell I get the following error: `TLS server: In state hello at tls_handshake.erl:130 generated SERVER ALERT: Fatal - Handshake Failure - malformed_handshake_data`. Both are running on my laptop and should be using the same version of openssl.\r\n\r\nI am running `OTP-21.0-rc1`, `OpenSSL 1.1.0h-fips  27 Mar 2018`, \r\n and I tested with both cowboy `2.3` and `2.4`.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1290","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1290/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1290/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1290/events","html_url":"https://github.com/ninenines/cowboy/issues/1290","id":321199991,"node_id":"MDU6SXNzdWUzMjExOTk5OTE=","number":1290,"title":"Do not crash on connection reset","user":{"login":"matikij","id":406403,"node_id":"MDQ6VXNlcjQwNjQwMw==","avatar_url":"https://avatars1.githubusercontent.com/u/406403?v=4","gravatar_id":"","url":"https://api.github.com/users/matikij","html_url":"https://github.com/matikij","followers_url":"https://api.github.com/users/matikij/followers","following_url":"https://api.github.com/users/matikij/following{/other_user}","gists_url":"https://api.github.com/users/matikij/gists{/gist_id}","starred_url":"https://api.github.com/users/matikij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matikij/subscriptions","organizations_url":"https://api.github.com/users/matikij/orgs","repos_url":"https://api.github.com/users/matikij/repos","events_url":"https://api.github.com/users/matikij/events{/privacy}","received_events_url":"https://api.github.com/users/matikij/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-08T14:02:24Z","updated_at":"2018-05-16T10:29:17Z","closed_at":"2018-05-16T10:29:17Z","author_association":"NONE","body":"We are using the rabbitmq management plugin which uses Cowboy to handle HTTP traffic. We are also using haproxy in front of this to loadbalance the http requests and check the health. When doing health checks, in order to limit the number of tcp connections in TIME_WAIT state haproxy doesn't do a nice tcp connection close, but instead it sends a RST when it is done with a connection.\r\nThis combination results in the log file being flooded with messages like:\r\n\r\n```\r\n2018-04-30 14:18:09.762 [error] <0.883.0> CRASH REPORT Process <0.883.0> with 0 neighbours crashed with reason: bad argument in call to erlang:port_get_data(#Port<0.25771>) in prim_file:sendfile/8\r\n2018-04-30 14:18:09.762 [error] <0.758.0> Ranch listener rabbit_web_dispatch_sup_15672 had connection process started with cowboy_clear:start_link/4 at <0.883.0> exit with reason: {badarg,[{erlang,port_get_data,[#Port<0.25771>],[]},{prim_file,sendfile,8,[]},{file,sendfile,8,[{file,\"file.erl\"},{line,1287}]},{ranch_tcp,sendfile,5,[{file,\"src/ranch_tcp.erl\"},{line,161}]},{ranch_tcp,sendfile,5,[{file,\"src/ranch_tcp.erl\"},{line,148}]},{cowboy_http,commands,3,[{file,\"src/cowboy_http.erl\"},{line,982}]},{cowboy_http,loop,2,[{file,\"src/cowboy_http.erl\"},{line,200}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,247}]}]}\r\n```\r\nNot sure if this is really an issue as it seems that the mantra here is \"let it crash\", but perhaps 'connection reset by peer' situation is not that uncommon. Perhaps it's better to handle this situation differently.\r\n\r\nFor more details see https://github.com/rabbitmq/rabbitmq-management/issues/570","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1289","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1289/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1289/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1289/events","html_url":"https://github.com/ninenines/cowboy/issues/1289","id":320815426,"node_id":"MDU6SXNzdWUzMjA4MTU0MjY=","number":1289,"title":"PUSH_PROMISE only works for certain HTTP/2 clients (nghttp) and not others (Chrome, cURL)","user":{"login":"idyll","id":4642,"node_id":"MDQ6VXNlcjQ2NDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4642?v=4","gravatar_id":"","url":"https://api.github.com/users/idyll","html_url":"https://github.com/idyll","followers_url":"https://api.github.com/users/idyll/followers","following_url":"https://api.github.com/users/idyll/following{/other_user}","gists_url":"https://api.github.com/users/idyll/gists{/gist_id}","starred_url":"https://api.github.com/users/idyll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idyll/subscriptions","organizations_url":"https://api.github.com/users/idyll/orgs","repos_url":"https://api.github.com/users/idyll/repos","events_url":"https://api.github.com/users/idyll/events{/privacy}","received_events_url":"https://api.github.com/users/idyll/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":24,"created_at":"2018-05-07T13:58:35Z","updated_at":"2018-05-22T13:07:35Z","closed_at":"2018-05-16T09:09:10Z","author_association":"NONE","body":"I've been testing out push promise and I can't get it to work when using cURL or any web browsers (I have been testing with Chrome mainly).\r\n\r\nI've got a quick example that demonstrates the issue:\r\n\r\nhttps://github.com/idyll/safari_test_erlang\r\n\r\nIf I open https://localhost:8443 with cURL I get a framing error: \r\n`curl: (16) Error in the HTTP2 framing layer`\r\n\r\nWhen I try in Chrome it totally ignores the push promise (in the developer window websites that push resources have `Push` noted in the source).\r\n\r\nI've tried using the NGHTTP website, https://nghttp2.org and it works. You can see a stylesheet being pushed from there in Chrome and cURL works.\r\n\r\nThe nghttp client does work with my example. And when I look at the PUSH_PROMISE frame I don't see any issues. The only thing i haven't check is the `Promised Stream ID`.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1288","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1288/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1288/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1288/events","html_url":"https://github.com/ninenines/cowboy/issues/1288","id":317708185,"node_id":"MDU6SXNzdWUzMTc3MDgxODU=","number":1288,"title":"Cowboy 2.3.0, **(exit) :undef","user":{"login":"MassiveFermion","id":25373436,"node_id":"MDQ6VXNlcjI1MzczNDM2","avatar_url":"https://avatars1.githubusercontent.com/u/25373436?v=4","gravatar_id":"","url":"https://api.github.com/users/MassiveFermion","html_url":"https://github.com/MassiveFermion","followers_url":"https://api.github.com/users/MassiveFermion/followers","following_url":"https://api.github.com/users/MassiveFermion/following{/other_user}","gists_url":"https://api.github.com/users/MassiveFermion/gists{/gist_id}","starred_url":"https://api.github.com/users/MassiveFermion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MassiveFermion/subscriptions","organizations_url":"https://api.github.com/users/MassiveFermion/orgs","repos_url":"https://api.github.com/users/MassiveFermion/repos","events_url":"https://api.github.com/users/MassiveFermion/events{/privacy}","received_events_url":"https://api.github.com/users/MassiveFermion/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-04-25T16:44:21Z","updated_at":"2018-04-25T17:52:42Z","closed_at":"2018-04-25T17:52:42Z","author_association":"NONE","body":"I'm just beginning to learn elixir and so I'm practicing with some simple codes I find on the internet. But when I use Cowboy, I get this weird error that I can find nothing about on the internet.\r\n\r\n> 21:09:03.194 [error] Ranch protocol :error (:cowboy_protocol) of listener Example.Router.HTTP terminated\r\n> ** (exit) :undef\r\n\r\nI should mention that this happens when I use cowboy 2.3.0. cowboy 1.1.2 works fine.\r\nThe code I'm running is exactly the one given [here](https://elixirschool.com/en/lessons/specifics/plug/).","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1286","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1286/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1286/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1286/events","html_url":"https://github.com/ninenines/cowboy/issues/1286","id":316817434,"node_id":"MDU6SXNzdWUzMTY4MTc0MzQ=","number":1286,"title":"How to set Keep Alive Timeout: GCP kubernetes Load Balancer 502 issue","user":{"login":"arturictus","id":1930175,"node_id":"MDQ6VXNlcjE5MzAxNzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1930175?v=4","gravatar_id":"","url":"https://api.github.com/users/arturictus","html_url":"https://github.com/arturictus","followers_url":"https://api.github.com/users/arturictus/followers","following_url":"https://api.github.com/users/arturictus/following{/other_user}","gists_url":"https://api.github.com/users/arturictus/gists{/gist_id}","starred_url":"https://api.github.com/users/arturictus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arturictus/subscriptions","organizations_url":"https://api.github.com/users/arturictus/orgs","repos_url":"https://api.github.com/users/arturictus/repos","events_url":"https://api.github.com/users/arturictus/events{/privacy}","received_events_url":"https://api.github.com/users/arturictus/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-04-23T13:39:46Z","updated_at":"2018-05-02T08:43:45Z","closed_at":"2018-04-30T13:23:26Z","author_association":"NONE","body":"Hi,\r\nHow can set a keep alive timeout?\r\nI've been checking the documentation and the code and I couldn't find anything.\r\nMy case:\r\nWe are deploying to Google Cloud with kubernetes. and we are getting random 502 responses because the GCP´s Load Balancer tries so keep connections open and looks like Cowboy closes the connection before the Load Balancer does. The Load Balancer sends requests to a closed connection.\r\nBetter explained [here](https://blog.percy.io/tuning-nginx-behind-google-cloud-platform-http-s-load-balancer-305982ddb340) .\r\nThe solution for nginx is to set the `keepalive_timeout` to a bigger time than the Load Balancer.\r\nAny Idea how to do it with Cowboy?.\r\n\r\nThanks in advance.\r\n\r\nMy current version is 1.1.2\r\nWith phoenix 1.3.2\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1285","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1285/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1285/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1285/events","html_url":"https://github.com/ninenines/cowboy/issues/1285","id":314567152,"node_id":"MDU6SXNzdWUzMTQ1NjcxNTI=","number":1285,"title":"The most efficient way of sending response, big concatenated binary or deep iolist?","user":{"login":"DOBRO","id":296845,"node_id":"MDQ6VXNlcjI5Njg0NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/296845?v=4","gravatar_id":"","url":"https://api.github.com/users/DOBRO","html_url":"https://github.com/DOBRO","followers_url":"https://api.github.com/users/DOBRO/followers","following_url":"https://api.github.com/users/DOBRO/following{/other_user}","gists_url":"https://api.github.com/users/DOBRO/gists{/gist_id}","starred_url":"https://api.github.com/users/DOBRO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DOBRO/subscriptions","organizations_url":"https://api.github.com/users/DOBRO/orgs","repos_url":"https://api.github.com/users/DOBRO/repos","events_url":"https://api.github.com/users/DOBRO/events{/privacy}","received_events_url":"https://api.github.com/users/DOBRO/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2018-04-16T09:23:47Z","updated_at":"2018-04-16T12:29:58Z","closed_at":"2018-04-16T12:29:58Z","author_association":"NONE","body":"Hi, \r\n\r\nI'm trying to figure out what is the best way of sending response using cowboy_req:reply.\r\nSay, we have two variants, big concatenated binary and deep iolist.\r\n\r\nEg. 1:\r\n\r\ninit(Req0, State) ->\r\n   BigBinBody = <<BigBin1/binary, BigBin2/binary, ...., BigBinN/binary>>,\r\n   Req = cowboy_req:reply(200, #{<<\"content-type\">> => <<\"text/html\">>}, BigBinBody, Req0),\r\n   {ok, Req, State}.\r\n\r\n\r\n\r\nEg 2:\r\n\r\ninit(Req0, State) ->\r\n   DeepIoList = [\"Very\", [\"Deep\", [\"IoList\"]]],\r\n   Req = cowboy_req:reply(200, #{<<\"content-type\">> => <<\"text/html\">>}, DeepIoList, Req0),\r\n   {ok, Req, State}.\r\n\r\nWhich one of them is more efficient considering they are of the same iolist_size?\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1283","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1283/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1283/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1283/events","html_url":"https://github.com/ninenines/cowboy/issues/1283","id":314450420,"node_id":"MDU6SXNzdWUzMTQ0NTA0MjA=","number":1283,"title":"Sending informational responses results in a protocol error with H2 clients.","user":{"login":"idyll","id":4642,"node_id":"MDQ6VXNlcjQ2NDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4642?v=4","gravatar_id":"","url":"https://api.github.com/users/idyll","html_url":"https://github.com/idyll","followers_url":"https://api.github.com/users/idyll/followers","following_url":"https://api.github.com/users/idyll/following{/other_user}","gists_url":"https://api.github.com/users/idyll/gists{/gist_id}","starred_url":"https://api.github.com/users/idyll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idyll/subscriptions","organizations_url":"https://api.github.com/users/idyll/orgs","repos_url":"https://api.github.com/users/idyll/repos","events_url":"https://api.github.com/users/idyll/events{/privacy}","received_events_url":"https://api.github.com/users/idyll/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2018-04-15T20:46:28Z","updated_at":"2018-04-23T13:50:59Z","closed_at":"2018-04-23T13:50:59Z","author_association":"NONE","body":"I can't get `inform/3` or `inform/2` to work.\r\nI've updated my sample server code to send back an early hint before it sends back the response.\r\n\r\nhttps://github.com/idyll/safari_test_erlang\r\n\r\nIf you access this in Chrome you'll see: `ERR_SPDY_PROTOCOL_ERROR`\r\n\r\nFor curl you get: `curl: (92) HTTP/2 stream 1 was closed cleanly, but before getting  all response header fields, teated as error`\r\n\r\nIt looks like there's an error when sending the informational response around the time the header is sent?","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1281","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1281/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1281/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1281/events","html_url":"https://github.com/ninenines/cowboy/issues/1281","id":311619074,"node_id":"MDU6SXNzdWUzMTE2MTkwNzQ=","number":1281,"title":"Specify TLS Version","user":{"login":"alanj853","id":15139000,"node_id":"MDQ6VXNlcjE1MTM5MDAw","avatar_url":"https://avatars1.githubusercontent.com/u/15139000?v=4","gravatar_id":"","url":"https://api.github.com/users/alanj853","html_url":"https://github.com/alanj853","followers_url":"https://api.github.com/users/alanj853/followers","following_url":"https://api.github.com/users/alanj853/following{/other_user}","gists_url":"https://api.github.com/users/alanj853/gists{/gist_id}","starred_url":"https://api.github.com/users/alanj853/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alanj853/subscriptions","organizations_url":"https://api.github.com/users/alanj853/orgs","repos_url":"https://api.github.com/users/alanj853/repos","events_url":"https://api.github.com/users/alanj853/events{/privacy}","received_events_url":"https://api.github.com/users/alanj853/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-05T13:50:59Z","updated_at":"2018-04-05T18:08:25Z","closed_at":"2018-04-05T18:08:24Z","author_association":"NONE","body":"Hi,\r\n\r\nI am wondering if it is possible to specify a specific version of TLS (and/or SSL) to use with this http server? Or if not, can someone please tell me what version it is currently using.\r\n\r\nRegards,\r\n\r\nAlan","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1279","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1279/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1279/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1279/events","html_url":"https://github.com/ninenines/cowboy/issues/1279","id":310945025,"node_id":"MDU6SXNzdWUzMTA5NDUwMjU=","number":1279,"title":"Cowboy does not accept new connections after some sockets get stuck in CLOSE_WAIT state","user":{"login":"awaise267","id":15897614,"node_id":"MDQ6VXNlcjE1ODk3NjE0","avatar_url":"https://avatars0.githubusercontent.com/u/15897614?v=4","gravatar_id":"","url":"https://api.github.com/users/awaise267","html_url":"https://github.com/awaise267","followers_url":"https://api.github.com/users/awaise267/followers","following_url":"https://api.github.com/users/awaise267/following{/other_user}","gists_url":"https://api.github.com/users/awaise267/gists{/gist_id}","starred_url":"https://api.github.com/users/awaise267/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/awaise267/subscriptions","organizations_url":"https://api.github.com/users/awaise267/orgs","repos_url":"https://api.github.com/users/awaise267/repos","events_url":"https://api.github.com/users/awaise267/events{/privacy}","received_events_url":"https://api.github.com/users/awaise267/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-03T18:22:10Z","updated_at":"2018-04-30T13:24:55Z","closed_at":"2018-04-30T13:24:55Z","author_association":"NONE","body":"Hey there,\r\n\r\nI was doing some tests to figure out an optimal number for the acceptors (I am using cowboy for websockets). I started with 100 following your comment on http://erlang.org/pipermail/erlang-questions/2012-October/069570.html\r\n>     NBAcceptor shouldn't be too low but shouldn't be too high either. I\r\n>     found 100 to be a good values but it really depends on how many\r\n>     connections come at once, how many cores you have, how many\r\n>     concurrent connections you expect, and so on.\r\n\r\nFor my tests, I have created a \"client\" script using Gun (it just does `gun:open` followed by `gun:ws_upgrade` to open `N` connections). I'm not controlling the rate at which I open these connections in order to find out the maximum rate of incoming connections I can support with the 100 acceptors.\r\n\r\nI noticed some failures starting when `N` is around 2000. If I stop my client script at this point and restart it, the server does not accept even a single connection. This makes me suspect that cowboy has crashed. However, I see no crash reports in my server console. `netstat` shows a lot of sockets stuck in the CLOSE_WAIT state though.\r\n\r\nThis seems similar to #232 at first glance but I'm testing with a http server (no SSL). Also, the main concern for me is that the server is not accepting new connections after the load is reduced.\r\n\r\nOn the server side, I'm using cowboy 2.0 and Erlang 19 for my tests.\r\n\r\nHere's the barebones version of my handler:\r\n```\r\ninit(Req, State) ->\r\n    {cowboy_websocket, Req, State}.\r\n\r\nhandle(Req, State) ->\r\n    {ok, Req, State}.\r\n\r\nwebsocket_handle(_Any, Req, State) ->\r\n    {reply, {text, <<\"Handle\">>}, Req, State, hibernate}.\r\nwebsocket_info(_Any, Req, State) ->\r\n    {reply, {text, <<\"Info\">>}, Req, State, hibernate}.\r\n\r\nterminate(_Reason, _Req, _State) ->\r\n    ok.\r\n```\r\n\r\nAnd here's how I start the server:\r\n```\r\nDispatch = cowboy_router:compile([\r\n    {'_', [{\"/\", my_handler, []}]}\r\n]),\r\nOpts = #{\r\n    env => #{dispatch => Dispatch}\r\n},\r\n{ok, _} = cowboy:start_clear(http,\r\n    [{port, ?MY_PORT}, {num_acceptors, 100}],\r\n    Opts\r\n).\r\n```\r\n\r\nCan you help me figure out where the issue can be? Thanks!","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1278","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1278/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1278/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1278/events","html_url":"https://github.com/ninenines/cowboy/issues/1278","id":310808794,"node_id":"MDU6SXNzdWUzMTA4MDg3OTQ=","number":1278,"title":"idle_timeout triggered while streaming body","user":{"login":"djustinek","id":15683,"node_id":"MDQ6VXNlcjE1Njgz","avatar_url":"https://avatars2.githubusercontent.com/u/15683?v=4","gravatar_id":"","url":"https://api.github.com/users/djustinek","html_url":"https://github.com/djustinek","followers_url":"https://api.github.com/users/djustinek/followers","following_url":"https://api.github.com/users/djustinek/following{/other_user}","gists_url":"https://api.github.com/users/djustinek/gists{/gist_id}","starred_url":"https://api.github.com/users/djustinek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djustinek/subscriptions","organizations_url":"https://api.github.com/users/djustinek/orgs","repos_url":"https://api.github.com/users/djustinek/repos","events_url":"https://api.github.com/users/djustinek/events{/privacy}","received_events_url":"https://api.github.com/users/djustinek/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-04-03T12:06:30Z","updated_at":"2018-04-03T19:13:42Z","closed_at":"2018-04-03T19:13:42Z","author_association":"NONE","body":"Stream body that lasts over 1 minute triggers idle_timeout in http handler even though packets are constantly being sent.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1277","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1277/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1277/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1277/events","html_url":"https://github.com/ninenines/cowboy/issues/1277","id":310711579,"node_id":"MDU6SXNzdWUzMTA3MTE1Nzk=","number":1277,"title":"tag 2.3.0","user":{"login":"SergejJurecko","id":17950,"node_id":"MDQ6VXNlcjE3OTUw","avatar_url":"https://avatars0.githubusercontent.com/u/17950?v=4","gravatar_id":"","url":"https://api.github.com/users/SergejJurecko","html_url":"https://github.com/SergejJurecko","followers_url":"https://api.github.com/users/SergejJurecko/followers","following_url":"https://api.github.com/users/SergejJurecko/following{/other_user}","gists_url":"https://api.github.com/users/SergejJurecko/gists{/gist_id}","starred_url":"https://api.github.com/users/SergejJurecko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergejJurecko/subscriptions","organizations_url":"https://api.github.com/users/SergejJurecko/orgs","repos_url":"https://api.github.com/users/SergejJurecko/repos","events_url":"https://api.github.com/users/SergejJurecko/events{/privacy}","r
8000
eceived_events_url":"https://api.github.com/users/SergejJurecko/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-03T06:37:26Z","updated_at":"2018-04-03T07:41:28Z","closed_at":"2018-04-03T07:41:28Z","author_association":"NONE","body":"missing git tag for latest release","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1276","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1276/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1276/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1276/events","html_url":"https://github.com/ninenines/cowboy/issues/1276","id":310130963,"node_id":"MDU6SXNzdWUzMTAxMzA5NjM=","number":1276,"title":"How to send msg to client before reply","user":{"login":"dcy","id":1137238,"node_id":"MDQ6VXNlcjExMzcyMzg=","avatar_url":"https://avatars3.githubusercontent.com/u/1137238?v=4","gravatar_id":"","url":"https://api.github.com/users/dcy","html_url":"https://github.com/dcy","followers_url":"https://api.github.com/users/dcy/followers","following_url":"https://api.github.com/users/dcy/following{/other_user}","gists_url":"https://api.github.com/users/dcy/gists{/gist_id}","starred_url":"https://api.github.com/users/dcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcy/subscriptions","organizations_url":"https://api.github.com/users/dcy/orgs","repos_url":"https://api.github.com/users/dcy/repos","events_url":"https://api.github.com/users/dcy/events{/privacy}","received_events_url":"https://api.github.com/users/dcy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-03-30T18:06:32Z","updated_at":"2018-03-30T19:09:01Z","closed_at":"2018-03-30T19:09:01Z","author_association":"NONE","body":"Hi!\r\nI want to send a msg/bin to client before [reply](https://github.com/ninenines/cowboy/blob/master/examples/websocket/src/ws_handler.erl#L15)\r\n```\r\nwebsocket_handle({text, Msg}, State) ->\r\n        %% Send <<\"Hello\">> to client\r\n\t{reply, {text, << \"World\" >>}, State};\r\n```\r\nIn one ```websocket_handle```, I want to send the first msg ```<<\"Hello\">>``` to client, then send the second msg ```<<\"World\">>``` to client. The client should receive ```<<\"Hello\">>``` first.\r\nCould you tell me how?","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1272","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1272/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1272/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1272/events","html_url":"https://github.com/ninenines/cowboy/issues/1272","id":306947309,"node_id":"MDU6SXNzdWUzMDY5NDczMDk=","number":1272,"title":"Websocket over HTTP/2","user":{"login":"essen","id":141739,"node_id":"MDQ6VXNlcjE0MTczOQ==","avatar_url":"https://avatars2.githubusercontent.com/u/141739?v=4","gravatar_id":"","url":"https://api.github.com/users/essen","html_url":"https://github.com/essen","followers_url":"https://api.github.com/users/essen/followers","following_url":"https://api.github.com/users/essen/following{/other_user}","gists_url":"https://api.github.com/users/essen/gists{/gist_id}","starred_url":"https://api.github.com/users/essen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/essen/subscriptions","organizations_url":"https://api.github.com/users/essen/orgs","repos_url":"https://api.github.com/users/essen/repos","events_url":"https://api.github.com/users/essen/events{/privacy}","received_events_url":"https://api.github.com/users/essen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/ninenines/cowboy/milestones/20","html_url":"https://github.com/ninenines/cowboy/milestone/20","labels_url":"https://api.github.com/repos/ninenines/cowboy/milestones/20/labels","id":2974829,"node_id":"MDk6TWlsZXN0b25lMjk3NDgyOQ==","number":20,"title":"2.x \"better Websocket\"","description":"Websocket could use a command-based interface for return values (backward compatible) and many small options and improvements.","creator":{"login":"essen","id":141739,"node_id":"MDQ6VXNlcjE0MTczOQ==","avatar_url":"https://avatars2.githubusercontent.com/u/141739?v=4","gravatar_id":"","url":"https://api.github.com/users/essen","html_url":"https://github.com/essen","followers_url":"https://api.github.com/users/essen/followers","following_url":"https://api.github.com/users/essen/following{/other_user}","gists_url":"https://api.github.com/users/essen/gists{/gist_id}","starred_url":"https://api.github.com/users/essen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/essen/subscriptions","organizations_url":"https://api.github.com/users/essen/orgs","repos_url":"https://api.github.com/users/essen/repos","events_url":"https://api.github.com/users/essen/events{/privacy}","received_events_url":"https://api.github.com/users/essen/received_events","type":"User","site_admin":false},"open_issues":10,"closed_issues":5,"state":"open","created_at":"2017-12-12T16:08:33Z","updated_at":"2018-05-17T11:40:16Z","due_on":null,"closed_at":null},"comments":6,"created_at":"2018-03-20T16:42:03Z","updated_at":"2018-04-06T15:33:27Z","closed_at":"2018-04-06T15:33:26Z","author_association":"MEMBER","body":"Please comment if you need it.\r\n\r\nhttps://tools.ietf.org/html/draft-ietf-httpbis-h2-websockets-00","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1271","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1271/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1271/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1271/events","html_url":"https://github.com/ninenines/cowboy/issues/1271","id":305776966,"node_id":"MDU6SXNzdWUzMDU3NzY5NjY=","number":1271,"title":"How can I  update internal state periodically?","user":{"login":"whitelilis","id":1090230,"node_id":"MDQ6VXNlcjEwOTAyMzA=","avatar_url":"https://avatars3.githubusercontent.com/u/1090230?v=4","gravatar_id":"","url":"https://api.github.com/users/whitelilis","html_url":"https://github.com/whitelilis","followers_url":"https://api.github.com/users/whitelilis/followers","following_url":"https://api.github.com/users/whitelilis/following{/other_user}","gists_url":"https://api.github.com/users/whitelilis/gists{/gist_id}","starred_url":"https://api.github.com/users/whitelilis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitelilis/subscriptions","organizations_url":"https://api.github.com/users/whitelilis/orgs","repos_url":"https://api.github.com/users/whitelilis/repos","events_url":"https://api.github.com/users/whitelilis/events{/privacy}","received_events_url":"https://api.github.com/users/whitelilis/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-16T01:54:38Z","updated_at":"2018-03-16T08:32:54Z","closed_at":"2018-03-16T08:32:54Z","author_association":"NONE","body":"My http handler need a dict to find something, and this dict need to be updated periodically, how can I do this?","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1269","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1269/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1269/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1269/events","html_url":"https://github.com/ninenines/cowboy/issues/1269","id":303126003,"node_id":"MDU6SXNzdWUzMDMxMjYwMDM=","number":1269,"title":"cowboy_req:read_body(Req0) timeout","user":{"login":"loudferret","id":6190449,"node_id":"MDQ6VXNlcjYxOTA0NDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6190449?v=4","gravatar_id":"","url":"https://api.github.com/users/loudferret","html_url":"https://github.com/loudferret","followers_url":"https://api.github.com/users/loudferret/followers","following_url":"https://api.github.com/users/loudferret/following{/other_user}","gists_url":"https://api.github.com/users/loudferret/gists{/gist_id}","starred_url":"https://api.github.com/users/loudferret/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loudferret/subscriptions","organizations_url":"https://api.github.com/users/loudferret/orgs","repos_url":"https://api.github.com/users/loudferret/repos","events_url":"https://api.github.com/users/loudferret/events{/privacy}","received_events_url":"https://api.github.com/users/loudferret/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-03-07T14:45:29Z","updated_at":"2018-03-14T14:26:04Z","closed_at":"2018-03-14T14:26:04Z","author_association":"NONE","body":"Hello,\r\ncreating simple http-amqp gateway I have problem reading request body. Using function (mostly) copied from cowboy documentation\r\n```\r\nfetch_body(Rq) ->\r\n    case cowboy_req:has_body(Rq) of\r\n        true ->\r\n            {ok, Body} = fetch_body(Rq, <<>>),\r\n            Body;\r\n        false ->\r\n            <<>>\r\n    end.\r\n\r\nfetch_body(Req0, Acc) ->\r\n    case cowboy_req:read_body(Req0) of\r\n        {ok, Data, Req} ->\r\n            {ok, <<Acc/binary, Data/binary>>, Req};\r\n        {more, Data, Req} ->\r\n            fetch_body(Req, <<Acc/binary, Data/binary>>)\r\n    end.\r\n```\r\n\r\ntesting with simple `curl` request shell script\r\n\r\n```\r\n$ cat test/post.sh\r\n#!/bin/dash\r\n\r\ncurl -v -i --ipv4 \\\r\n    -H \"Content-Type: application/json\" \\\r\n    -X POST \\\r\n    --data @simple.json \\\r\n    'http://localhost:8567/mqw/v1/pub/raw'\r\n```\r\nThe file `simple.json` is 2 line textfile. Erlang error follows:\r\n\r\n```\r\n=CRASH REPORT==== 7-Mar-2018::15:38:45 ===\r\n  crasher:   \r\n    initial call: cowboy_stream_h:request_process/3\r\n    pid: <0.365.0>                             \r\n    registered_name: []            \r\n    exception exit: {{timeout,   \r\n                         {gen_server,call,\r\n                             [amqcwb_publish,\r\n                              {handle_http_request,\r\n                                  #{bindings => #{},      \r\n                                    body_length => 73,\r\n                                    has_body => true,\r\n                                    headers => #{<<\"accept\">> => <<\"*/*\">>,\r\n                                      <<\"content-length\">> => <<\"73\">>,\r\n                                      <<\"content-type\">> => <<\"application/json\">>,\r\n                                      <<\"host\">> => <<\"localhost:8567\">>,\r\n                                      <<\"user-agent\">> => <<\"curl/7.52.1\">>},\r\n                                    host => <<\"localhost\">>,\r\n                                    host_info => undefined,\r\n                                    method => <<\"POST\">>,      \r\n                                    path => <<\"/mqw/v1/pub/raw\">>,\r\n                                    path_info => undefined,\r\n                                    peer => {{127,0,0,1},57152},\r\n                                    pid => <0.364.0>,                                                                                                \r\n                                    port => 8567,            \r\n                                    qs => <<>>,\r\n                                    ref => http_server_cowboy,                                                                                                                                    \r\n                                    scheme => <<\"http\">>,                                                  \r\n                                    streamid => 1,\r\n                                    version => 'HTTP/1.1'},\r\n                                  []}]}},\r\n                     [{gen_server,call,2,[{file,\"gen_server.erl\"},{line,204}]},\r\n                      {cowboy_handler,execute,2,\r\n                          [{file,\r\n                               \"/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_handler.erl\"},\r\n                           {line,37}]},\r\n                      {cowboy_stream_h,execute,3,\r\n                          [{file,\r\n                               \"/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_stream_h.erl\"},\r\n                           {line,205}]},\r\n                      {cowboy_stream_h,request_process,3,\r\n                          [{file,\r\n                               \"/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_stream_h.erl\"},\r\n                           {line,184}]},\r\n                      {proc_lib,init_p_do_apply,3,\r\n                          [{file,\"proc_lib.erl\"},{line,247}]}]}\r\n      in function  gen_server:call/2 (gen_server.erl, line 204)\r\n      in call from cowboy_handler:execute/2 (/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_handler.erl, line 37)\r\n      in call from cowboy_stream_h:execute/3 (/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_stream_h.erl, line 205)\r\n      in call from cowboy_stream_h:request_process/3 (/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_stream_h.erl, line 184)\r\n    ancestors: [<0.364.0>,<0.349.0>,<0.348.0>,ranch_sup,<0.297.0>]\r\n    messages: [{request_body,#Ref<0.0.2.317>,fin,73,\r\n                                <<\"{ \\\"empty\\\": {\\\"one\\\": 1, \\\"two\\\": \\\"two\\\"}, \\\"full\\\": {\\\"one\\\": 1, \\\"two\\\": \\\"three\\\"} }\">>}]\r\n    links: [<0.364.0>]\r\n    dictionary: []\r\n    trap_exit: false\r\n    status: running\r\n    heap_size: 987\r\n    stack_size: 27\r\n    reductions: 313\r\n  neighbours:\r\n```\r\n\r\nOutput from curl script:\r\n```\r\n*   Trying 127.0.0.1...\r\n* TCP_NODELAY set\r\n* Connected to localhost (127.0.0.1) port 8567 (#0)\r\n> POST /mqw/v1/pub/raw?from=meteo HTTP/1.1\r\n> Host: localhost:8567\r\n> User-Agent: curl/7.52.1\r\n> Accept: */*\r\n> Content-Type: application/json\r\n> Content-Length: 73\r\n>\r\n* upload completely sent off: 73 out of 73 bytes\r\n< HTTP/1.1 500 Internal Server Error\r\nHTTP/1.1 500 Internal Server Error\r\n< content-length: 0\r\ncontent-length: 0\r\n\r\n<\r\n* Curl_http_done: called premature == 0\r\n* Connection #0 to host localhost left intact\r\n```\r\n\r\nThe application is rebar3 app, I did try cowboy v2.0.0, v2.1.0 and v2.2.2 from hex.pm, application runs using `rebar3 shell`. Well, can you help me? Do you need more information?\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1267","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1267/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1267/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1267/events","html_url":"https://github.com/ninenines/cowboy/issues/1267","id":298857690,"node_id":"MDU6SXNzdWUyOTg4NTc2OTA=","number":1267,"title":"Content-length error crash the process due to wrong error handling","user":{"login":"sauvainr","id":1715747,"node_id":"MDQ6VXNlcjE3MTU3NDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1715747?v=4","gravatar_id":"","url":"https://api.github.com/users/sauvainr","html_url":"https://github.com/sauvainr","followers_url":"https://api.github.com/users/sauvainr/followers","following_url":"https://api.github.com/users/sauvainr/following{/other_user}","gists_url":"https://api.github.com/users/sauvainr/gists{/gist_id}","starred_url":"https://api.github.com/users/sauvainr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sauvainr/subscriptions","organizations_url":"https://api.github.com/users/sauvainr/orgs","repos_url":"https://api.github.com/users/sauvainr/repos","events_url":"https://api.github.com/users/sauvainr/events{/privacy}","received_events_url":"https://api.github.com/users/sauvainr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-02-21T06:39:01Z","updated_at":"2018-02-28T15:20:45Z","closed_at":"2018-02-28T15:20:45Z","author_association":"NONE","body":"The 'content-length' error emitted at\r\nhttps://github.com/ninenines/cowboy/blob/master/src/cowboy_http2.erl#L942\r\n\r\ndoesnt match the 'terminate_reason' and crash\r\nhttps://github.com/ninenines/cowboy/blob/master/src/cowboy_http2.erl#L817\r\n\r\nError:\r\n`Process #PID<0.722.0> terminating\r\n** (FunctionClauseError) no function clause matching in :cowboy_http2.terminate_reason/1    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http2.erl:817: :cowboy_http2.terminate_reason({:stream_error, 1, :protocol_error, :\"The content-length header is invalid. (RFC7230 3.3.2)\"})    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http2.erl:811: :cowboy_http2.terminate/2    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http2.erl:942: :cowboy_http2.stream_req_init/5    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http2.erl:293: :cowboy_http2.parse/2    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http.erl:256: :cowboy_http.parse/2\r\n    (stdlib) proc_lib.erl:247: :proc_lib.init_p_do_apply/3\r\nInitial Call: :cowboy_clear.connection_process/5\r\n`","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1262","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1262/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1262/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1262/events","html_url":"https://github.com/ninenines/cowboy/issues/1262","id":292077864,"node_id":"MDU6SXNzdWUyOTIwNzc4NjQ=","number":1262,"title":"Wrong type in parse_cookies example","user":{"login":"benbro","id":75841,"node_id":"MDQ6VXNlcjc1ODQx","avatar_url":"https://avatars2.githubusercontent.com/u/75841?v=4","gravatar_id":"","url":"https://api.github.com/users/benbro","html_url":"https://github.com/benbro","followers_url":"https://api.github.com/users/benbro/followers","following_url":"https://api.github.com/users/benbro/following{/other_user}","gists_url":"https://api.github.com/users/benbro/gists{/gist_id}","starred_url":"https://api.github.com/users/benbro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benbro/subscriptions","organizations_url":"https://api.github.com/users/benbro/orgs","repos_url":"https://api.github.com/users/benbro/repos","events_url":"https://api.github.com/users/benbro/events{/privacy}","received_events_url":"https://api.github.com/users/benbro/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-27T01:30:43Z","updated_at":"2018-01-29T11:59:08Z","closed_at":"2018-01-29T11:59:07Z","author_association":"NONE","body":"Description says Name is a binary but in the example token is an atom.\r\n```erlang\r\nparse_cookies(Req) -> [{Name, Value}]\r\n\r\nName  :: binary() %% case sensitive\r\nValue :: binary() %% case sensitive\r\n```\r\n\r\n```erlang\r\n{_, Token} = lists:keyfind(token, 1, Cookies).\r\n```\r\n\r\nShould be:\r\n```erlang\r\n{_, Token} = lists:keyfind(<<\"token\">>, 1, Cookies).\r\n```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1261","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1261/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1261/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1261/events","html_url":"https://github.com/ninenines/cowboy/issues/1261","id":292072434,"node_id":"MDU6SXNzdWUyOTIwNzI0MzQ=","number":1261,"title":"websocket handler docs missing example for close frame","user":{"login":"benbro","id":75841,"node_id":"MDQ6VXNlcjc1ODQx","avatar_url":"https://avatars2.githubusercontent.com/u/75841?v=4","gravatar_id":"","url":"https://api.github.com/users/benbro","html_url":"https://github.com/benbro","followers_url":"https://api.github.com/users/benbro/followers","following_url":"https://api.github.com/users/benbro/following{/other_user}","gists_url":"https://api.github.com/users/benbro/gists{/gist_id}","starred_url":"https://api.github.com/users/benbro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benbro/subscriptions","organizations_url":"https://api.github.com/users/benbro/orgs","repos_url":"https://api.github.com/users/benbro/repos","events_url":"https://api.github.com/users/benbro/events{/privacy}","received_events_url":"https://api.github.com/users/benbro/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-27T00:37:45Z","updated_at":"2018-01-29T12:04:05Z","closed_at":"2018-01-29T12:04:05Z","author_association":"NONE","body":"https://ninenines.eu/docs/en/cowboy/2.2/guide/ws_handlers/\r\n\r\nSomething like:\r\n```erlang\r\nwebsocket_info(_Info, State) ->\r\n    {reply, {close, 1000, <<\"some-reason\">>}, State}.\r\n```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1259","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1259/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1259/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1259/events","html_url":"https://github.com/ninenines/cowboy/issues/1259","id":291823943,"node_id":"MDU6SXNzdWUyOTE4MjM5NDM=","number":1259,"title":"WebSocket connection disconnected after 1min with example","user":{"login":"zombiecong","id":7962780,"node_id":"MDQ6VXNlcjc5NjI3ODA=","avatar_url":"https://avatars2.githubusercontent.com/u/7962780?v=4","gravatar_id":"","url":"https://api.github.com/users/zombiecong","html_url":"https://github.com/zombiecong","followers_url":"https://api.github.com/users/zombiecong/followers","following_url":"https://api.github.com/users/zombiecong/following{/other_user}","gists_url":"https://api.github.com/users/zombiecong/gists{/gist_id}","starred_url":"https://api.github.com/users/zombiecong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zombiecong/subscriptions","organizations_url":"https://api.github.com/users/zombiecong/orgs","repos_url":"https://api.github.com/users/zombiecong/repos","events_url":"https://api.github.com/users/zombiecong/events{/privacy}","received_events_url":"https://api.github.com/users/zombiecong/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-01-26T07:57:19Z","updated_at":"2018-01-26T09:37:56Z","closed_at":"2018-01-26T08:30:50Z","author_association":"NONE","body":"Hi ,\r\n\r\nI am a newbie of erlang , and I try the [example](https://github.com/ninenines/cowboy/tree/master/examples/websocket) of websocket.\r\n\r\nIt works well at the beginning,  but the connection was disconnected after 1min. And I got a `timeout` message from `terminate/3`.\r\n\r\nI am confused , the timeout because of \"ping/pong timeout\" or something I missed.\r\n\r\nThanks.\r\n\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1258","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1258/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1258/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1258/events","html_url":"https://github.com/ninenines/cowboy/issues/1258","id":291079257,"node_id":"MDU6SXNzdWUyOTEwNzkyNTc=","number":1258,"title":"H2 content for large pages with multiple elements is scrambled in Chrome and Safari.","user":{"login":"idyll","id":4642,"node_id":"MDQ6VXNlcjQ2NDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4642?v=4","gravatar_id":"","url":"https://api.github.com/users/idyll","html_url":"https://github.com/idyll","followers_url":"https://api.github.com/users/idyll/followers","following_url":"https://api.github.com/users/idyll/following{/other_user}","gists_url":"https://api.github.com/users/idyll/gists{/gist_id}","starred_url":"https://api.github.com/users/idyll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idyll/subscriptions","organizations_url":"https://api.github.com/users/idyll/orgs","repos_url":"https://api.github.com/users/idyll/repos","events_url":"https://api.github.com/users/idyll/events{/privacy}","received_events_url":"https://api.github.com/users/idyll/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-01-24T04:14:54Z","updated_at":"2018-01-24T14:53:36Z","closed_at":"2018-01-24T10:51:21Z","author_association":"NONE","body":"Since the 2.2.1 updates release content is displayed out of order in Chrome and Safari.\r\n\r\nSpecifically in HTML I am seeing a portion of a sample page is rendered before the html header. It looks like the first two packets of data are being reversed.\r\n\r\nPortions of the content are also missing.\r\n\r\nI will provide a sample as soon as I can reliably replicate it. But it only triggered once a page reaches a certain size.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1257","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1257/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1257/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1257/events","html_url":"https://github.com/ninenines/cowboy/issues/1257","id":290585552,"node_id":"MDU6SXNzdWUyOTA1ODU1NTI=","number":1257,"title":"cowboy_router crash when request comes shortly after cowboy:set_env","user":{"login":"gotthardp","id":939979,"node_id":"MDQ6VXNlcjkzOTk3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/939979?v=4","gravatar_id":"","url":"https://api.github.com/users/gotthardp","html_url":"https://github.com/gotthardp","followers_url":"https://api.github.com/users/gotthardp/followers","following_url":"https://api.github.com/users/gotthardp/following{/other_user}","gists_url":"https://api.github.com/users/gotthardp/gists{/gist_id}","starred_url":"https://api.github.com/users/gotthardp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gotthardp/subscriptions","organizations_url":"https://api.github.com/users/gotthardp/orgs","repos_url":"https://api.github.com/users/gotthardp/repos","events_url":"https://api.github.com/users/gotthardp/events{/privacy}","received_events_url":"https://api.github.com/users/gotthardp/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-01-22T19:25:57Z","updated_at":"2018-02-26T10:13:16Z","closed_at":"2018-02-26T10:08:38Z","author_association":"NONE","body":"I am using `cowboy:set_env(..., dispatch, Dispatch)` to update the routes. Sometimes (I suspect when the request comes shortly after calling set_env) I get the following function_clause error.\r\n\r\nIt is clear to me that it is because the env (the second `execute` parameter) is empty. It is not clear why is it empty, because it contained some routes before and I just added few more.\r\n\r\nCould there be a moment during an `set_env` update where the env is clear and could cause the following crash?\r\n\r\n```\r\n=CRASH REPORT==== 22-Jan-2018::18:39:34 ===\r\n  crasher:\r\n    initial call: cowboy_stream_h:request_process/3\r\n    pid: <0.331.0>\r\n    registered_name: []\r\n    exception exit: {function_clause,\r\n                        [{cowboy_router,execute,\r\n                             [#{body_length => 0,cert => undefined,\r\n                                has_body => false,\r\n                                headers =>\r\n                                    #{<<\"accept\">> =>\r\n                                          <<\"application/json, text/plain, */*\">>,\r\n                                      <<\"accept-encoding\">> =>\r\n                                          <<\"gzip, deflate\">>,\r\n                                      <<\"accept-language\">> =>\r\n                                          <<\"en-US,en;q=0.5\">>,\r\n                                      <<\"authorization\">> =>\r\n                                          <<\"Digest username=\\\"admin\\\", realm=\\\"lorawan-server\\\", nonce=\\\"36e8beffb55ebe0b067b895f597b6cf0\\\", uri=\\\"/admin/ngraph/00002A9F\\\", response=\\\"6e44f21ea7550cae0ebe411278b5e91c\\\"\">>,\r\n                                      <<\"connection\">> => <<\"keep-alive\">>,\r\n                                      <<\"cookie\">> =>\r\n                                          <<\"m=2258:Z3Vlc3Q6Z3Vlc3Q%253D\">>,\r\n                                      <<\"host\">> => <<\"192.168.88.101:8080\">>,\r\n                                      <<\"if-none-match\">> =>\r\n                                          <<\"\\\"NRJTeOuHduGoXtf8F8f+Du2Bwc4AadjmMQaJJAzvPqU=\\\"\">>,\r\n                                      <<\"referer\">> =>\r\n                                          <<\"http://192.168.88.101:8080/admin\">>,\r\n                                      <<\"user-agent\">> =>\r\n                                          <<\"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0\">>},\r\n                                host => <<\"192.168.88.101\">>,\r\n                                method => <<\"GET\">>,\r\n                                path => <<\"/admin/ngraph/00002A9F\">>,\r\n                                peer => {{192,168,88,254},56862},\r\n                                pid => <0.312.0>,port => 8080,qs => <<>>,\r\n                                ref => http,scheme => <<\"http\">>,\r\n                                sock => {{192,168,88,101},8080},\r\n                                streamid => 1,version => 'HTTP/1.1'},\r\n                              #{}],\r\n                             [{file,\r\n                                  \"/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_router.erl\"},\r\n                              {line,164}]},\r\n                         {cowboy_stream_h,execute,3,\r\n                             [{file,\r\n                                  \"/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_stream_h.erl\"},\r\n                              {line,249}]},\r\n                         {cowboy_stream_h,request_process,3,\r\n                             [{file,\r\n                                  \"/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_stream_h.erl\"},\r\n                              {line,227}]},\r\n                         {proc_lib,init_p_do_apply,3,\r\n                             [{file,\"proc_lib.erl\"},{line,247}]}]}\r\n      in function  cowboy_router:execute/2\r\n         called as cowboy_router:execute(#{body_length => 0,cert => undefined,\r\n                                           has_body => false,\r\n                                           headers =>\r\n                                               #{<<\"accept\">> =>\r\n               
6af1
                                      <<\"application/json, text/plain, */*\">>,\r\n                                                 <<\"accept-encoding\">> =>\r\n                                                     <<\"gzip, deflate\">>,\r\n                                                 <<\"accept-language\">> =>\r\n                                                     <<\"en-US,en;q=0.5\">>,\r\n                                                 <<\"authorization\">> =>\r\n                                                     <<\"Digest username=\\\"admin\\\", realm=\\\"lorawan-server\\\", nonce=\\\"36e8beffb55ebe0b067b895f597b6cf0\\\", uri=\\\"/admin/ngraph/00002A9F\\\", response=\\\"6e44f21ea7550cae0ebe411278b5e91c\\\"\">>,\r\n                                                 <<\"connection\">> =>\r\n                                                     <<\"keep-alive\">>,\r\n                                                 <<\"cookie\">> =>\r\n                                                     <<\"m=2258:Z3Vlc3Q6Z3Vlc3Q%253D\">>,\r\n                                                 <<\"host\">> =>\r\n                                                     <<\"192.168.88.101:8080\">>,\r\n                                                 <<\"if-none-match\">> =>\r\n                                                     <<\"\\\"NRJTeOuHduGoXtf8F8f+Du2Bwc4AadjmMQaJJAzvPqU=\\\"\">>,\r\n                                                 <<\"referer\">> =>\r\n                                                     <<\"http://192.168.88.101:8080/admin\">>,\r\n                                                 <<\"user-agent\">> =>\r\n                                                     <<\"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0\">>},\r\n                                           host => <<\"192.168.88.101\">>,\r\n                                           method => <<\"GET\">>,\r\n                                           path =>\r\n                                               <<\"/admin/ngraph/00002A9F\">>,\r\n                                           peer => {{192,168,88,254},56862},\r\n                                           pid => <0.312.0>,port => 8080,\r\n                                           qs => <<>>,ref => http,\r\n                                           scheme => <<\"http\">>,\r\n                                           sock => {{192,168,88,101},8080},\r\n                                           streamid => 1,\r\n                                           version => 'HTTP/1.1'},\r\n                                         #{})\r\n      in call from cowboy_stream_h:execute/3 (/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_stream_h.erl, line 249)\r\n      in call from cowboy_stream_h:request_process/3 (/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_stream_h.erl, line 227)\r\n    ancestors: [<0.312.0>,<0.296.0>,<0.295.0>,ranch_sup,<0.256.0>]\r\n    messages: []\r\n    links: [<0.312.0>]\r\n    dictionary: []\r\n    trap_exit: false\r\n    status: running\r\n    heap_size: 1598\r\n    stack_size: 27\r\n    reductions: 256\r\n  neighbours:\r\n```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1255","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1255/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1255/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1255/events","html_url":"https://github.com/ninenines/cowboy/issues/1255","id":290112535,"node_id":"MDU6SXNzdWUyOTAxMTI1MzU=","number":1255,"title":"Elixir compilation fails if _build directory is a symlink to a nested directory","user":{"login":"naps62","id":283819,"node_id":"MDQ6VXNlcjI4MzgxOQ==","avatar_url":"https://avatars2.githubusercontent.com/u/283819?v=4","gravatar_id":"","url":"https://api.github.com/users/naps62","html_url":"https://github.com/naps62","followers_url":"https://api.github.com/users/naps62/followers","following_url":"https://api.github.com/users/naps62/following{/other_user}","gists_url":"https://api.github.com/users/naps62/gists{/gist_id}","starred_url":"https://api.github.com/users/naps62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naps62/subscriptions","organizations_url":"https://api.github.com/users/naps62/orgs","repos_url":"https://api.github.com/users/naps62/repos","events_url":"https://api.github.com/users/naps62/events{/privacy}","received_events_url":"https://api.github.com/users/naps62/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2018-01-19T21:29:13Z","updated_at":"2018-01-24T19:01:45Z","closed_at":"2018-01-24T13:05:27Z","author_association":"NONE","body":"Trying to compile a project in our CI, I noticed that this package failed to compile.\r\n\r\nWe were using a setup recommended by our CI, where the `_build` directory (where builds from Elixir projects go to) was symlinked to `$SEMAPHORE_CACHE_DIR/_build`. Under these conditions, cowboy failed to compile, with the following error:\r\n\r\n```\r\n** (Mix) Could not compile dependency :cowboy, \"/home/runner/.mix/rebar3 bare compile --paths \"/home/runner/platform/_build/test/lib/*/ebin\"\" command failed. You can recompile this dependency with \"mix deps.compile cowboy\", update it with \"mix deps.update cowboy\" or clean it with \"mix deps.clean cowboy\"\r\n```\r\n\r\nTrying to reproduce this locally I noticed that it failed if `_build` was symlinked to `./first-dir/second-dir`, but it worked if it was symlinked directly to `./first-dir`, so without adding the extra level of nesting\r\n\r\nI'm not if this is a cowboy issue though. Might also be rebar or some other tool (I'm not that familiar with the Erlang ecosystem), so apologies if this is the wrong place to report it","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1252","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1252/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1252/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1252/events","html_url":"https://github.com/ninenines/cowboy/issues/1252","id":286302223,"node_id":"MDU6SXNzdWUyODYzMDIyMjM=","number":1252,"title":"Question: How to send 400 from content_types_provided?","user":{"login":"sammyraul","id":29125149,"node_id":"MDQ6VXNlcjI5MTI1MTQ5","avatar_url":"https://avatars1.githubusercontent.com/u/29125149?v=4","gravatar_id":"","url":"https://api.github.com/users/sammyraul","html_url":"https://github.com/sammyraul","followers_url":"https://api.github.com/users/sammyraul/followers","following_url":"https://api.github.com/users/sammyraul/following{/other_user}","gists_url":"https://api.github.com/users/sammyraul/gists{/gist_id}","starred_url":"https://api.github.com/users/sammyraul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammyraul/subscriptions","organizations_url":"https://api.github.com/users/sammyraul/orgs","repos_url":"https://api.github.com/users/sammyraul/repos","events_url":"https://api.github.com/users/sammyraul/events{/privacy}","received_events_url":"https://api.github.com/users/sammyraul/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-01-05T14:23:47Z","updated_at":"2018-01-05T14:32:33Z","closed_at":"2018-01-05T14:29:12Z","author_association":"NONE","body":"Hi,\r\nI wanted to return 400 from REST handler  content_types_provided. here's my code\r\n\r\n```\r\n> content_types_provided(Req, State) ->\r\n>     {[\r\n>         {{<<\"text\">>, <<\"plain\">>, []}, show_form},\r\n>         {{<<\"text\">>, <<\"html\">>, []}, show_form}\r\n>     ], Req, State}.\r\n> \r\n> %% Empty list returns 200\r\n> show_form(Req,State) ->\r\n>      { [ ], Req, State}. // returns 2oo or \r\n> \r\n> %% Returning false crashes process andreturns 500\r\n> show_form(Req,State) ->\r\n>      { false, Req, State}. //crash or\r\n> \r\n> %% Explicitly calling reply function returns 400 but this also causes crash\r\n> show_form(Req,State) ->\r\n>       cowboy_req:reply(400, Req), // works but crash\r\n>       { [ ], Req, State}\r\n```\r\n\r\n\r\nWhat is the right way to return error code if request is wrong instead of sending back data?\r\nI could not find this in the documentation or maybe I missed it. If someone can point me it would be really appreciated.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1251","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1251/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1251/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1251/events","html_url":"https://github.com/ninenines/cowboy/issues/1251","id":285754863,"node_id":"MDU6SXNzdWUyODU3NTQ4NjM=","number":1251,"title":"How best to implement an Apache-style access log for Cowboy >=2.0?","user":{"login":"nickelization","id":4108538,"node_id":"MDQ6VXNlcjQxMDg1Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4108538?v=4","gravatar_id":"","url":"https://api.github.com/users/nickelization","html_url":"https://github.com/nickelization","followers_url":"https://api.github.com/users/nickelization/followers","following_url":"https://api.github.com/users/nickelization/following{/other_user}","gists_url":"https://api.github.com/users/nickelization/gists{/gist_id}","starred_url":"https://api.github.com/users/nickelization/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickelization/subscriptions","organizations_url":"https://api.github.com/users/nickelization/orgs","repos_url":"https://api.github.com/users/nickelization/repos","events_url":"https://api.github.com/users/nickelization/events{/privacy}","received_events_url":"https://api.github.com/users/nickelization/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2018-01-03T17:28:29Z","updated_at":"2018-03-29T09:30:22Z","closed_at":"2018-01-03T17:37:48Z","author_association":"NONE","body":"Hi there, I'd really like to add support for Apache-style access logs to Cowboy (and maybe error logs too), but I'm not sure how best to go about it. I specifically say Apache-style logs because there are a lot of great tools that exist out there for parsing and dealing with logs that follow this particular format, so I'd really like the format of the logs to match an actual Apache log as closely as possible. I recently switched a big project from Webmachine over to Cowboy, and overall I've really loved Cowboy, but the one thing I've missed from Webmachine is the Apache-style logging features that it has. If we could get that added, Cowboy would really be perfect for my needs 😀\r\n\r\nI can see this has been discussed before for pre-2.0 Cowboy, and it looks like the `onresponse` hook would work great, but it looks like that feature has been removed in 2.0 and later. I also looked into creating a middleware module for this, but it doesn't seem like you can get all the info you need to include stuff like the response code, since sending a response seems to follow a totally separate code path that doesn't involve the middleware stuff at all.\r\n\r\nI'd be happy to submit a patch to Cowboy to help enable this, but I'm not sure what the best way to go about it would be from an architectural standpoint. Some sort of enhancement to middlewares? Bringing onresponse back? Maybe building better logging features directly into Cowboy as a first-class feature? Or something else entirely? I figured I'd better have a discussion about this before I start coding, to make sure whatever I implement has a shot at being accepted. Looking forward to hearing your thoughts!","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1250","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1250/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1250/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1250/events","html_url":"https://github.com/ninenines/cowboy/issues/1250","id":285448266,"node_id":"MDU6SXNzdWUyODU0NDgyNjY=","number":1250,"title":"Dependency is specified as a dependency but is not reachable by the system error","user":{"login":"sammyraul","id":29125149,"node_id":"MDQ6VXNlcjI5MTI1MTQ5","avatar_url":"https://avatars1.githubusercontent.com/u/29125149?v=4","gravatar_id":"","url":"https://api.github.com/users/sammyraul","html_url":"https://github.com/sammyraul","followers_url":"https://api.github.com/users/sammyraul/followers","following_url":"https://api.github.com/users/sammyraul/following{/other_user}","gists_url":"https://api.github.com/users/sammyraul/gists{/gist_id}","starred_url":"https://api.github.com/users/sammyraul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammyraul/subscriptions","organizations_url":"https://api.github.com/users/sammyraul/orgs","repos_url":"https://api.github.com/users/sammyraul/repos","events_url":"https://api.github.com/users/sammyraul/events{/privacy}","received_events_url":"https://api.github.com/users/sammyraul/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-01-02T14:52:11Z","updated_at":"2018-01-02T16:58:15Z","closed_at":"2018-01-02T16:58:15Z","author_association":"NONE","body":"Hello,\r\nA bit naive issue when including external lib into Cowboy.\r\n\r\nI am trying to include erlydtl in my Makefile. But unfortunately it is failing with \r\n\r\n> Failed to solve release:\r\n Dependency erlydtl is specified as a dependency but is not reachable by the system.\r\n\r\nmake: *** [relx-rel] Error 127\r\n\r\nThe same works when using rebar3, I am able to build and run my application.\r\n\r\nHere's my Makefile\r\n\r\n```\r\nDEPS = cowboy erlydtl\r\ndep_cowboy_commit = master\r\nerlydtl = git https://github.com/erlydtl/erlydtl\r\n\r\nLOCAL_DEPS = kernel stdlib ssl compiler erts crypto public_key hipe inets asn1\r\ninclude erlang.mk\r\n```\r\n\r\nI am sorry if it is not the right place for this but any pointers would be highly appreciated.\r\nThanks Sammy","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1249","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1249/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1249/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1249/events","html_url":"https://github.com/ninenines/cowboy/issues/1249","id":285169894,"node_id":"MDU6SXNzdWUyODUxNjk4OTQ=","number":1249,"title":"src/cb3_handler.erl:2: behaviour cowboy_http undefined","user":{"login":"ToolwatchThunker","id":11857304,"node_id":"MDQ6VXNlcjExODU3MzA0","avatar_url":"https://avatars0.githubusercontent.com/u/11857304?v=4","gravatar_id":"","url":"https://api.github.com/users/ToolwatchThunker","html_url":"https://github.com/ToolwatchThunker","followers_url":"https://api.github.com/users/ToolwatchThunker/followers","following_url":"https://api.github.com/users/ToolwatchThunker/following{/other_user}","gists_url":"https://api.github.com/users/ToolwatchThunker/gists{/gist_id}","starred_url":"https://api.github.com/users/ToolwatchThunker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ToolwatchThunker/subscriptions","organizations_url":"https://api.github.com/users/ToolwatchThunker/orgs","repos_url":"https://api.github.com/users/ToolwatchThunker/repos","events_url":"https://api.github.com/users/ToolwatchThunker/events{/privacy}","received_events_url":"https://api.github.com/users/ToolwatchThunker/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2017-12-29T23:39:58Z","updated_at":"2018-01-02T18:33:53Z","closed_at":"2017-12-29T23:48:05Z","author_association":"NONE","body":"The Cowboy Web Server fails on the Erlang statement ****-behaviour(cowboy_http_handler)**** \r\n\r\nI have tried Cowboy Web Server Versions 2.2.0 and 2.1.0 but they both have the same problems.\r\n\r\nHere is the output of the make operation:\r\n\r\n`[tomlinux@tomlinux cb3]$ make run\r\nmake[1]: Entering directory '/home/tmoriarty/cb3/deps/cowboy'\r\nmake[2]: Entering directory '/home/tmoriarty/cb3/deps/cowlib'\r\nmake[2]: Leaving directory '/home/tmoriarty/cb3/deps/cowlib'\r\nmake[2]: Entering directory '/home/tmoriarty/cb3/deps/ranch'\r\n DEPEND ranch.d\r\nmake[2]: Leaving directory '/home/tmoriarty/cb3/deps/ranch'\r\n DEPEND cowboy.d\r\n GEN    rebar.config\r\nmake[1]: Leaving directory '/home/tmoriarty/cb3/deps/cowboy'\r\n DEPEND cb3.d\r\n ERLC   cb3_app.erl cb3_handler.erl\r\ncompile: warnings being treated as errors\r\nsrc/cb3_handler.erl:2: behaviour cowboy_http_handler undefined\r\nerlang.mk:5141: recipe for target 'ebin/cb3.app' failed\r\nmake[1]: *** [ebin/cb3.app] Error 1\r\nerlang.mk:4932: recipe for target 'app' failed\r\nmake: *** [app] Error 2`","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1248","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1248/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1248/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1248/events","html_url":"https://github.com/ninenines/cowboy/issues/1248","id":284337676,"node_id":"MDU6SXNzdWUyODQzMzc2NzY=","number":1248,"title":"Cowboy Hard Caches Static File Output Unless I Nuke Everything","user":{"login":"ajm113","id":9935420,"node_id":"MDQ6VXNlcjk5MzU0MjA=","avatar_url":"https://avatars1.githubusercontent.com/u/9935420?v=4","gravatar_id":"","url":"https://api.github.com/users/ajm113","html_url":"https://github.com/ajm113","followers_url":"https://api.github.com/users/ajm113/followers","following_url":"https://api.github.com/users/ajm113/following{/other_user}","gists_url":"https://api.github.com/users/ajm113/gists{/gist_id}","starred_url":"https://api.github.com/users/ajm113/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajm113/subscriptions","organizations_url":"https://api.github.com/users/ajm113/orgs","repos_url":"https://api.github.com/users/ajm113/repos","events_url":"https://api.github.com/users/ajm113/events{/privacy}","received_events_url":"https://api.github.com/users/ajm113/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-12-24T02:03:33Z","updated_at":"2017-12-24T09:11:59Z","closed_at":"2017-12-24T05:24:24Z","author_association":"NONE","body":"This is a bit of a very unusual issue for myself. I don't know if I have something setup wrong, or if there is black magic in the works, or I drank too many fizzy drinks to read the docs slow enough, but I'll do my best to describe my issue...\r\n\r\nSo I have gulp converting my pug.js input into a friendly browser readable .html file. Whenever I make any changes to the pug.js file for gulp to update the .html file in my priv folder it updates perfectly fine. No issue here. However, when I attempt to see my changes on the server using Cowboy, I don't see my changes reflect.\r\n\r\nHere's what I've done, running `rebar3 shell`\r\n\r\n- Attempt to Google my issue. I haven't seen anyone run into this, and I am using the most recent version. So perhaps this is a new bug, and I'm the only one thus far who has ran into it?\r\n- Delete the priv folder of my app's output _build. -- No dice\r\n- Blow away browser cache. -- Nothing\r\n- Directly input my priv folder path using this `{\"/assets/[...]\", cowboy_static, {dir, code:priv_dir(bombinaid) ++ \"/assets\"}}`. -- Nope.avi\r\n- Directly edit the HTML file inside the priv folder. -- Negative!\r\n- Also I notice if I remove all the text inside the html file parts of the old file still appear. So for some reason Cowboy registers the removed/added text, but still shows old files or garbage data.\r\n- Blow away _build folder all together. IT WORKS! But why do I have to nuke everything to see my changes?\r\n\r\nTL;DR ver: Cowboy doesn't recognize local file changes to update the server, unless I blow away cowboy.\r\n\r\nMy rebar.config\r\n```\r\n{erl_opts, [debug_info]}.\r\n{shell, [{apps, [\r\n    bombinaid,\r\n    kernel,\r\n    stdlib,\r\n    cowboy\r\n]}]}.\r\n\r\n{deps, [\r\n\t{cowboy, {git,\"https://github.com/ninenines/cowboy.git\", {tag, \"2.2.0\"}}}\r\n]}.\r\n\r\n{relx, [{release, { bombinaid, \"0.0.1\" },\r\n         [bombinaid,\r\n          sasl,\r\n          cowboy\r\n          ]},\r\n\r\n        {dev_mode, true},\r\n        {include_erts, true},\r\n\r\n        {extended_start_script, true}]\r\n}.\r\n\r\n```\r\n\r\nMy repo having the issue: https://github.com/ajm113/bombinaid.com\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1247","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1247/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1247/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1247/events","html_url":"https://github.com/ninenines/cowboy/issues/1247","id":284089793,"node_id":"MDU6SXNzdWUyODQwODk3OTM=","number":1247,"title":"Safari hangs on certain H2 responses.","user":{"login":"idyll","id":4642,"node_id":"MDQ6VXNlcjQ2NDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4642?v=4","gravatar_id":"","url":"https://api.github.com/users/idyll","html_url":"https://github.com/idyll","followers_url":"https://api.github.com/users/idyll/followers","following_url":"https://api.github.com/users/idyll/following{/other_user}","gists_url":"https://api.github.com/users/idyll/gists{/gist_id}","starred_url":"https://api.github.com/users/idyll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idyll/subscriptions","organizations_url":"https://api.github.com/users/idyll/orgs","repos_url":"https://api.github.com/users/idyll/repos","events_url":"https://api.github.com/users/idyll/events{/privacy}","received_events_url":"https://api.github.com/users/idyll/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2017-12-22T07:14:42Z","updated_at":"2018-01-23T19:38:19Z","closed_at":"2018-01-23T15:16:47Z","author_association":"NONE","body":"### Background\r\n\r\nI apologize but figuring out how to trigger the bug has exhausted my H2 knowledge. I am not sure if the issue is Safari not correctly handling an edge case or if Cowboy doesn't conform to the spec.\r\n\r\nThis is probably Cowboy triggering a Safari bug. And if so I have an open ticket with Apple. I just need to be able to explain to them what to fix.\r\n\r\n### My Observation\r\n\r\nSafari and the GO H2C command line client both hang when they receive a certain sequence of frames from Cowboy. I first triggered it in a Phoenix app but I am reproduce directly in Cowboy by calling `reply` with specially crafted iodata.\r\n\r\n### To Reproduce\r\n`reply` with the following iodata:\r\n```\r\n[[[\"\" | \"\"]  | \"\"]  | \"... string that contains at around 36,000 characters or so...\" ]\r\n```\r\n\r\nI have a sample project here: (again I apologize it's elixir not erlang.)\r\nhttps://github.com/idyll/safari\r\n\r\nMy guess is that the result is several small frames being sent to Safari which result in it triggering the bug. But your insight would be appreciated.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1246","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1246/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1246/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1246/events","html_url":"https://github.com/ninenines/cowboy/issues/1246","id":282739440,"node_id":"MDU6SXNzdWUyODI3Mzk0NDA=","number":1246,"title":"Recommended way of redirecting http request to https","user":{"login":"Ilyes512","id":2445415,"node_id":"MDQ6VXNlcjI0NDU0MTU=","avatar_url":"https://avatars2.githubusercontent.com/u/2445415?v=4","gravatar_id":"","url":"https://api.github.com/users/Ilyes512","html_url":"https://github.com/Ilyes512","followers_url":"https://api.github.com/users/Ilyes512/followers","following_url":"https://api.github.com/users/Ilyes512/following{/other_user}","gists_url":"https://api.github.com/users/Ilyes512/gists{/gist_id}","starred_url":"https://api.github.com/users/Ilyes512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ilyes512/subscriptions","organizations_url":"https://api.github.com/users/Ilyes512/orgs","repos_url":"https://api.github.com/users/Ilyes512/repos","events_url":"https://api.github.com/users/Ilyes512/events{/privacy}","received_events_url":"https://api.github.com/users/Ilyes512/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-12-18T00:57:00Z","updated_at":"2017-12-18T08:25:23Z","closed_at":"2017-12-18T08:25:23Z","author_association":"NONE","body":"Hi, I am new to he platform and learning mainly Elixir at the moment. As you might now the \"main\" (web) framework for Elixir is Phoenix which uses Plug which in turn uses Cowboy as its server. I always like to go deep into the underlying libraries so thats why I started [this](https://github.com/Ilyes512/elixir_hello_world) to play around with Cowboy.\r\n\r\nSo at this point I have got cowboy(2) running either using start_clear or start_tls. At this point I want to use https, but I want all incoming http request to be redirected to https. I know how to do this with Nginx, but I was wondering if this was possible using cowboy (or using any other language feature in Erlang/Elixir). Besides the question if it's possible I would also like to know if this is the \"best\"/recommend way of doing it. If its not, should I use an external tools like Nginx/HAProxy for redirecting?\r\n\r\nI have also tried running both http and https by calling both start_clear and start_tls, but it seems only one survives? Not sure what I should change to be able to run two cowboy instances (on two different ports I think in any case).\r\n\r\n","score":1.0}]}
0

