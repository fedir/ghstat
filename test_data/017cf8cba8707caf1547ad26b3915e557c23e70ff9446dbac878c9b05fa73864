HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 31 Mar 2018 23:53:39 GMT
Link: <https://api.github.com/search/issues?q=repo%3Aninenines%2Fcowboy+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Aninenines%2Fcowboy+type%3Aissue+state%3Aclosed&page=26>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D9E5:094F:2EF87F4:59C3A67:5AC01F82
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 25
X-Ratelimit-Reset: 1522540479
X-Runtime-Rack: 0.309269
X-Xss-Protection: 1; mode=block

8000
{"total_count":774,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1276","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1276/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1276/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1276/events","html_url":"https://github.com/ninenines/cowboy/issues/1276","id":310130963,"number":1276,"title":"How to send msg to client before reply","user":{"login":"dcy","id":1137238,"avatar_url":"https://avatars3.githubusercontent.com/u/1137238?v=4","gravatar_id":"","url":"https://api.github.com/users/dcy","html_url":"https://github.com/dcy","followers_url":"https://api.github.com/users/dcy/followers","following_url":"https://api.github.com/users/dcy/following{/other_user}","gists_url":"https://api.github.com/users/dcy/gists{/gist_id}","starred_url":"https://api.github.com/users/dcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcy/subscriptions","organizations_url":"https://api.github.com/users/dcy/orgs","repos_url":"https://api.github.com/users/dcy/repos","events_url":"https://api.github.com/users/dcy/events{/privacy}","received_events_url":"https://api.github.com/users/dcy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-03-30T18:06:32Z","updated_at":"2018-03-30T19:09:01Z","closed_at":"2018-03-30T19:09:01Z","author_association":"NONE","body":"Hi!\r\nI want to send a msg/bin to client before [reply](https://github.com/ninenines/cowboy/blob/master/examples/websocket/src/ws_handler.erl#L15)\r\n```\r\nwebsocket_handle({text, Msg}, State) ->\r\n        %% Send <<\"Hello\">> to client\r\n\t{reply, {text, << \"World\" >>}, State};\r\n```\r\nIn one ```websocket_handle```, I want to send the first msg ```<<\"Hello\">>``` to client, then send the second msg ```<<\"World\">>``` to client. The client should receive ```<<\"Hello\">>``` first.\r\nCould you tell me how?","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1271","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1271/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1271/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1271/events","html_url":"https://github.com/ninenines/cowboy/issues/1271","id":305776966,"number":1271,"title":"How can I  update internal state periodically?","user":{"login":"whitelilis","id":1090230,"avatar_url":"https://avatars3.githubusercontent.com/u/1090230?v=4","gravatar_id":"","url":"https://api.github.com/users/whitelilis","html_url":"https://github.com/whitelilis","followers_url":"https://api.github.com/users/whitelilis/followers","following_url":"https://api.github.com/users/whitelilis/following{/other_user}","gists_url":"https://api.github.com/users/whitelilis/gists{/gist_id}","starred_url":"https://api.github.com/users/whitelilis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitelilis/subscriptions","organizations_url":"https://api.github.com/users/whitelilis/orgs","repos_url":"https://api.github.com/users/whitelilis/repos","events_url":"https://api.github.com/users/whitelilis/events{/privacy}","received_events_url":"https://api.github.com/users/whitelilis/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-16T01:54:38Z","updated_at":"2018-03-16T08:32:54Z","closed_at":"2018-03-16T08:32:54Z","author_association":"NONE","body":"My http handler need a dict to find something, and this dict need to be updated periodically, how can I do this?","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1269","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1269/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1269/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1269/events","html_url":"https://github.com/ninenines/cowboy/issues/1269","id":303126003,"number":1269,"title":"cowboy_req:read_body(Req0) timeout","user":{"login":"loudferret","id":6190449,"avatar_url":"https://avatars1.githubusercontent.com/u/6190449?v=4","gravatar_id":"","url":"https://api.github.com/users/loudferret","html_url":"https://github.com/loudferret","followers_url":"https://api.github.com/users/loudferret/followers","following_url":"https://api.github.com/users/loudferret/following{/other_user}","gists_url":"https://api.github.com/users/loudferret/gists{/gist_id}","starred_url":"https://api.github.com/users/loudferret/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loudferret/subscriptions","organizations_url":"https://api.github.com/users/loudferret/orgs","repos_url":"https://api.github.com/users/loudferret/repos","events_url":"https://api.github.com/users/loudferret/events{/privacy}","received_events_url":"https://api.github.com/users/loudferret/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-03-07T14:45:29Z","updated_at":"2018-03-14T14:26:04Z","closed_at":"2018-03-14T14:26:04Z","author_association":"NONE","body":"Hello,\r\ncreating simple http-amqp gateway I have problem reading request body. Using function (mostly) copied from cowboy documentation\r\n```\r\nfetch_body(Rq) ->\r\n    case cowboy_req:has_body(Rq) of\r\n        true ->\r\n            {ok, Body} = fetch_body(Rq, <<>>),\r\n            Body;\r\n        false ->\r\n            <<>>\r\n    end.\r\n\r\nfetch_body(Req0, Acc) ->\r\n    case cowboy_req:read_body(Req0) of\r\n        {ok, Data, Req} ->\r\n            {ok, <<Acc/binary, Data/binary>>, Req};\r\n        {more, Data, Req} ->\r\n            fetch_body(Req, <<Acc/binary, Data/binary>>)\r\n    end.\r\n```\r\n\r\ntesting with simple `curl` request shell script\r\n\r\n```\r\n$ cat test/post.sh\r\n#!/bin/dash\r\n\r\ncurl -v -i --ipv4 \\\r\n    -H \"Content-Type: application/json\" \\\r\n    -X POST \\\r\n    --data @simple.json \\\r\n    'http://localhost:8567/mqw/v1/pub/raw'\r\n```\r\nThe file `simple.json` is 2 line textfile. Erlang error follows:\r\n\r\n```\r\n=CRASH REPORT==== 7-Mar-2018::15:38:45 ===\r\n  crasher:   \r\n    initial call: cowboy_stream_h:request_process/3\r\n    pid: <0.365.0>                             \r\n    registered_name: []            \r\n    exception exit: {{timeout,   \r\n                         {gen_server,call,\r\n                             [amqcwb_publish,\r\n                              {handle_http_request,\r\n                                  #{bindings => #{},      \r\n                                    body_length => 73,\r\n                                    has_body => true,\r\n                                    headers => #{<<\"accept\">> => <<\"*/*\">>,\r\n                                      <<\"content-length\">> => <<\"73\">>,\r\n                                      <<\"content-type\">> => <<\"application/json\">>,\r\n                                      <<\"host\">> => <<\"localhost:8567\">>,\r\n                                      <<\"user-agent\">> => <<\"curl/7.52.1\">>},\r\n                                    host => <<\"localhost\">>,\r\n                                    host_info => undefined,\r\n                                    method => <<\"POST\">>,      \r\n                                    path => <<\"/mqw/v1/pub/raw\">>,\r\n                                    path_info => undefined,\r\n                                    peer => {{127,0,0,1},57152},\r\n                                    pid => <0.364.0>,                                                                                                \r\n                                    port => 8567,            \r\n                                    qs => <<>>,\r\n                                    ref => http_server_cowboy,                                                                                                                                    \r\n                                    scheme => <<\"http\">>,                                                  \r\n                                    streamid => 1,\r\n                                    version => 'HTTP/1.1'},\r\n                                  []}]}},\r\n                     [{gen_server,call,2,[{file,\"gen_server.erl\"},{line,204}]},\r\n                      {cowboy_handler,execute,2,\r\n                          [{file,\r\n                               \"/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_handler.erl\"},\r\n                           {line,37}]},\r\n                      {cowboy_stream_h,execute,3,\r\n                          [{file,\r\n                               \"/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_stream_h.erl\"},\r\n                           {line,205}]},\r\n                      {cowboy_stream_h,request_process,3,\r\n                          [{file,\r\n                               \"/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_stream_h.erl\"},\r\n                           {line,184}]},\r\n                      {proc_lib,init_p_do_apply,3,\r\n                          [{file,\"proc_lib.erl\"},{line,247}]}]}\r\n      in function  gen_server:call/2 (gen_server.erl, line 204)\r\n      in call from cowboy_handler:execute/2 (/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_handler.erl, line 37)\r\n      in call from cowboy_stream_h:execute/3 (/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_stream_h.erl, line 205)\r\n      in call from cowboy_stream_h:request_process/3 (/home/x/work/DS/amqpCowboy/_build/default/lib/cowboy/src/cowboy_stream_h.erl, line 184)\r\n    ancestors: [<0.364.0>,<0.349.0>,<0.348.0>,ranch_sup,<0.297.0>]\r\n    messages: [{request_body,#Ref<0.0.2.317>,fin,73,\r\n                                <<\"{ \\\"empty\\\": {\\\"one\\\": 1, \\\"two\\\": \\\"two\\\"}, \\\"full\\\": {\\\"one\\\": 1, \\\"two\\\": \\\"three\\\"} }\">>}]\r\n    links: [<0.364.0>]\r\n    dictionary: []\r\n    trap_exit: false\r\n    status: running\r\n    heap_size: 987\r\n    stack_size: 27\r\n    reductions: 313\r\n  neighbours:\r\n```\r\n\r\nOutput from curl script:\r\n```\r\n*   Trying 127.0.0.1...\r\n* TCP_NODELAY set\r\n* Connected to localhost (127.0.0.1) port 8567 (#0)\r\n> POST /mqw/v1/pub/raw?from=meteo HTTP/1.1\r\n> Host: localhost:8567\r\n> User-Agent: curl/7.52.1\r\n> Accept: */*\r\n> Content-Type: application/json\r\n> Content-Length: 73\r\n>\r\n* upload completely sent off: 73 out of 73 bytes\r\n< HTTP/1.1 500 Internal Server Error\r\nHTTP/1.1 500 Internal Server Error\r\n< content-length: 0\r\ncontent-length: 0\r\n\r\n<\r\n* Curl_http_done: called premature == 0\r\n* Connection #0 to host localhost left intact\r\n```\r\n\r\nThe application is rebar3 app, I did try cowboy v2.0.0, v2.1.0 and v2.2.2 from hex.pm, application runs using `rebar3 shell`. Well, can you help me? Do you need more information?\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1267","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1267/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1267/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1267/events","html_url":"https://github.com/ninenines/cowboy/issues/1267","id":298857690,"number":1267,"title":"Content-length error crash the process due to wrong error handling","user":{"login":"sauvainr","id":1715747,"avatar_url":"https://avatars1.githubusercontent.com/u/1715747?v=4","gravatar_id":"","url":"https://api.github.com/users/sauvainr","html_url":"https://github.com/sauvainr","followers_url":"https://api.github.com/users/sauvainr/followers","following_url":"https://api.github.com/users/sauvainr/following{/other_user}","gists_url":"https://api.github.com/users/sauvainr/gists{/gist_id}","starred_url":"https://api.github.com/users/sauvainr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sauvainr/subscriptions","organizations_url":"https://api.github.com/users/sauvainr/orgs","repos_url":"https://api.github.com/users/sauvainr/repos","events_url":"https://api.github.com/users/sauvainr/events{/privacy}","received_events_url":"https://api.github.com/users/sauvainr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-02-21T06:39:01Z","updated_at":"2018-02-28T15:20:45Z","closed_at":"2018-02-28T15:20:45Z","author_association":"NONE","body":"The 'content-length' error emitted at\r\nhttps://github.com/ninenines/cowboy/blob/master/src/cowboy_http2.erl#L942\r\n\r\ndoesnt match the 'terminate_reason' and crash\r\nhttps://github.com/ninenines/cowboy/blob/master/src/cowboy_http2.erl#L817\r\n\r\nError:\r\n`Process #PID<0.722.0> terminating\r\n** (FunctionClauseError) no function clause matching in :cowboy_http2.terminate_reason/1    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http2.erl:817: :cowboy_http2.terminate_reason({:stream_error, 1, :protocol_error, :\"The content-length header is invalid. (RFC7230 3.3.2)\"})    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http2.erl:811: :cowboy_http2.terminate/2    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http2.erl:942: :cowboy_http2.stream_req_init/5    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http2.erl:293: :cowboy_http2.parse/2    \r\n(cowboy) /home/renaud/Workspace/pegasus_dispatcher/deps/cowboy/src/cowboy_http.erl:256: :cowboy_http.parse/2\r\n    (stdlib) proc_lib.erl:247: :proc_lib.init_p_do_apply/3\r\nInitial Call: :cowboy_clear.connection_process/5\r\n`","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1262","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1262/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1262/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1262/events","html_url":"https://github.com/ninenines/cowboy/issues/1262","id":292077864,"number":1262,"title":"Wrong type in parse_cookies example","user":{"login":"benbro","id":75841,"avatar_url":"https://avatars2.githubusercontent.com/u/75841?v=4","gravatar_id":"","url":"https://api.github.com/users/benbro","html_url":"https://github.com/benbro","followers_url":"https://api.github.com/users/benbro/followers","following_url":"https://api.github.com/users/benbro/following{/other_user}","gists_url":"https://api.github.com/users/benbro/gists{/gist_id}","starred_url":"https://api.github.com/users/benbro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benbro/subscriptions","organizations_url":"https://api.github.com/users/benbro/orgs","repos_url":"https://api.github.com/users/benbro/repos","events_url":"https://api.github.com/users/benbro/events{/privacy}","received_events_url":"https://api.github.com/users/benbro/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-27T01:30:43Z","updated_at":"2018-01-29T11:59:08Z","closed_at":"2018-01-29T11:59:07Z","author_association":"NONE","body":"Description says Name is a binary but in the example token is an atom.\r\n```erlang\r\nparse_cookies(Req) -> [{Name, Value}]\r\n\r\nName  :: binary() %% case sensitive\r\nValue :: binary() %% case sensitive\r\n```\r\n\r\n```erlang\r\n{_, Token} = lists:keyfind(token, 1, Cookies).\r\n```\r\n\r\nShould be:\r\n```erlang\r\n{_, Token} = lists:keyfind(<<\"token\">>, 1, Cookies).\r\n```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1261","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1261/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1261/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1261/events","html_url":"https://github.com/ninenines/cowboy/issues/1261","id":292072434,"number":1261,"title":"websocket handler docs missing example for close frame","user":{"login":"benbro","id":75841,"avatar_url":"https://avatars2.githubusercontent.com/u/75841?v=4","gravatar_id":"","url":"https://api.github.com/users/benbro","html_url":"https://github.com/benbro","followers_url":"https://api.github.com/users/benbro/followers","following_url":"https://api.github.com/users/benbro/following{/other_user}","gists_url":"https://api.github.com/users/benbro/gists{/gist_id}","starred_url":"https://api.github.com/users/benbro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benbro/subscriptions","organizations_url":"https://api.github.com/users/benbro/orgs","repos_url":"https://api.github.com/users/benbro/repos","events_url":"https://api.github.com/users/benbro/events{/privacy}","received_events_url":"https://api.github.com/users/benbro/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-27T00:37:45Z","updated_at":"2018-01-29T12:04:05Z","closed_at":"2018-01-29T12:04:05Z","author_association":"NONE","body":"https://ninenines.eu/docs/en/cowboy/2.2/guide/ws_handlers/\r\n\r\nSomething like:\r\n```erlang\r\nwebsocket_info(_Info, State) ->\r\n    {reply, {close, 1000, <<\"some-reason\">>}, State}.\r\n```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1259","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1259/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1259/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1259/events","html_url":"https://github.com/ninenines/cowboy/issues/1259","id":291823943,"number":1259,"title":"WebSocket connection disconnected after 1min with example","user":{"login":"zombiecong","id":7962780,"avatar_url":"https://avatars2.githubusercontent.com/u/7962780?v=4","gravatar_id":"","url":"https://api.github.com/users/zombiecong","html_url":"https://github.com/zombiecong","followers_url":"https://api.github.com/users/zombiecong/followers","following_url":"https://api.github.com/users/zombiecong/following{/other_user}","gists_url":"https://api.github.com/users/zombiecong/gists{/gist_id}","starred_url":"https://api.github.com/users/zombiecong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zombiecong/subscriptions","organizations_url":"https://api.github.com/users/zombiecong/orgs","repos_url":"https://api.github.com/users/zombiecong/repos","events_url":"https://api.github.com/users/zombiecong/events{/privacy}","received_events_url":"https://api.github.com/users/zombiecong/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-01-26T07:57:19Z","updated_at":"2018-01-26T09:37:56Z","closed_at":"2018-01-26T08:30:50Z","author_association":"NONE","body":"Hi ,\r\n\r\nI am a newbie of erlang , and I try the [example](https://github.com/ninenines/cowboy/tree/master/examples/websocket) of websocket.\r\n\r\nIt works well at the beginning,  but the connection was disconnected after 1min. And I got a `timeout` message from `terminate/3`.\r\n\r\nI am confused , the timeout because of \"ping/pong timeout\" or something I missed.\r\n\r\nThanks.\r\n\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1258","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1258/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1258/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1258/events","html_url":"https://github.com/ninenines/cowboy/issues/1258","id":291079257,"number":1258,"title":"H2 content for large pages with multiple elements is scrambled in Chrome and Safari.","user":{"login":"idyll","id":4642,"avatar_url":"https://avatars3.githubusercontent.com/u/4642?v=4","gravatar_id":"","url":"https://api.github.com/users/idyll","html_url":"https://github.com/idyll","followers_url":"https://api.github.com/users/idyll/followers","following_url":"https://api.github.com/users/idyll/following{/other_user}","gists_url":"https://api.github.com/users/idyll/gists{/gist_id}","starred_url":"https://api.github.com/users/idyll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idyll/subscriptions","organizations_url":"https://api.github.com/users/idyll/orgs","repos_url":"https://api.github.com/users/idyll/repos","events_url":"https://api.github.com/users/idyll/events{/privacy}","received_events_url":"https://api.github.com/users/idyll/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-01-24T04:14:54Z","updated_at":"2018-01-24T14:53:36Z","closed_at":"2018-01-24T10:51:21Z","author_association":"NONE","body":"Since the 2.2.1 updates release content is displayed out of order in Chrome and Safari.\r\n\r\nSpecifically in HTML I am seeing a portion of a sample page is rendered before the html header. It looks like the first two packets of data are being reversed.\r\n\r\nPortions of the content are also missing.\r\n\r\nI will provide a sample as soon as I can reliably replicate it. But it only triggered once a page reaches a certain size.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1257","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1257/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1257/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1257/events","html_url":"https://github.com/ninenines/cowboy/issues/1257","id":290585552,"number":1257,"title":"cowboy_router crash when request comes shortly after cowboy:set_env","user":{"login":"gotthardp","id":939979,"avatar_url":"https://avatars1.githubusercontent.com/u/939979?v=4","gravatar_id":"","url":"https://api.github.com/users/gotthardp","html_url":"https://github.com/gotthardp","followers_url":"https://api.github.com/users/gotthardp/followers","following_url":"https://api.github.com/users/gotthardp/following{/other_user}","gists_url":"https://api.github.com/users/gotthardp/gists{/gist_id}","starred_url":"https://api.github.com/users/gotthardp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gotthardp/subscriptions","organizations_url":"https://api.github.com/users/gotthardp/orgs","repos_url":"https://api.github.com/users/gotthardp/repos","events_url":"https://api.github.com/users/gotthardp/events{/privacy}","received_events_url":"https://api.github.com/users/gotthardp/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-01-22T19:25:57Z","updated_at":"2018-02-26T10:13:16Z","closed_at":"2018-02-26T10:08:38Z","author_association":"NONE","body":"I am using `cowboy:set_env(..., dispatch, Dispatch)` to update the routes. Sometimes (I suspect when the request comes shortly after calling set_env) I get the following function_clause error.\r\n\r\nIt is clear to me that it is because the env (the second `execute` parameter) is empty. It is not clear why is it empty, because it contained some routes before and I just added few more.\r\n\r\nCould there be a moment during an `set_env` update where the env is clear and could cause the following crash?\r\n\r\n```\r\n=CRASH REPORT==== 22-Jan-2018::18:39:34 ===\r\n  crasher:\r\n    initial call: cowboy_stream_h:request_process/3\r\n    pid: <0.331.0>\r\n    registered_name: []\r\n    exception exit: {function_clause,\r\n                        [{cowboy_router,execute,\r\n                             [#{body_length => 0,cert => undefined,\r\n                                has_body => false,\r\n                                headers =>\r\n                                    #{<<\"accept\">> =>\r\n                                          <<\"application/json, text/plain, */*\">>,\r\n                                      <<\"accept-encoding\">> =>\r\n                                          <<\"gzip, deflate\">>,\r\n                                      <<\"accept-language\">> =>\r\n                                          <<\"en-US,en;q=0.5\">>,\r\n                                      <<\"authorization\">> =>\r\n                                          <<\"Digest username=\\\"admin\\\", realm=\\\"lorawan-server\\\", nonce=\\\"36e8beffb55ebe0b067b895f597b6cf0\\\", uri=\\\"/admin/ngraph/00002A9F\\\", response=\\\"6e44f21ea7550cae0ebe411278b5e91c\\\"\">>,\r\n                                      <<\"connection\">> => <<\"keep-alive\">>,\r\n                                      <<\"cookie\">> =>\r\n                                          <<\"m=2258:Z3Vlc3Q6Z3Vlc3Q%253D\">>,\r\n                                      <<\"host\">> => <<\"192.168.88.101:8080\">>,\r\n                                      <<\"if-none-match\">> =>\r\n                                          <<\"\\\"NRJTeOuHduGoXtf8F8f+Du2Bwc4AadjmMQaJJAzvPqU=\\\"\">>,\r\n                                      <<\"referer\">> =>\r\n                                          <<\"http://192.168.88.101:8080/admin\">>,\r\n                                      <<\"user-agent\">> =>\r\n                                          <<\"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0\">>},\r\n                                host => <<\"192.168.88.101\">>,\r\n                                method => <<\"GET\">>,\r\n                                path => <<\"/admin/ngraph/00002A9F\">>,\r\n                                peer => {{192,168,88,254},56862},\r\n                                pid => <0.312.0>,port => 8080,qs => <<>>,\r\n                                ref => http,scheme => <<\"http\">>,\r\n                                sock => {{192,168,88,101},8080},\r\n                                streamid => 1,version => 'HTTP/1.1'},\r\n                              #{}],\r\n                             [{file,\r\n                                  \"/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_router.erl\"},\r\n                              {line,164}]},\r\n                         {cowboy_stream_h,execute,3,\r\n                             [{file,\r\n                                  \"/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_stream_h.erl\"},\r\n                              {line,249}]},\r\n                         {cowboy_stream_h,request_process,3,\r\n                             [{file,\r\n                                  \"/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_stream_h.erl\"},\r\n                              {line,227}]},\r\n                         {proc_lib,init_p_do_apply,3,\r\n                             [{file,\"proc_lib.erl\"},{line,247}]}]}\r\n      in function  cowboy_router:execute/2\r\n         called as cowboy_router:execute(#{body_length => 0,cert => undefined,\r\n                                           has_body => false,\r\n                                           headers =>\r\n                                               #{<<\"accept\">> =>\r\n                                                     <<\"application/json, text/plain, */*\">>,\r\n                                                 <<\"accept-encoding\">> =>\r\n                                                     <<\"gzip, deflate\">>,\r\n                                                 <<\"accept-language\">> =>\r\n                                                     <<\"en-US,en;q=0.5\">>,\r\n                                                 <<\"authorization\">> =>\r\n                                                     <<\"Digest username=\\\"admin\\\", realm=\\\"lorawan-server\\\", nonce=\\\"36e8beffb55ebe0b067b895f597b6cf0\\\", uri=\\\"/admin/ngraph/00002A9F\\\", response=\\\"6e44f21ea7550cae0ebe411278b5e91c\\\"\">>,\r\n                                                 <<\"connection\">> =>\r\n                                                     <<\"keep-alive\">>,\r\n                                                 <<\"cookie\">> =>\r\n                                                     <<\"m=2258:Z3Vlc3Q6Z3Vlc3Q%253D\">>,\r\n                                                 <<\"host\">> =>\r\n                                                     <<\"192.168.88.101:8080\">>,\r\n                                                 <<\"if-none-match\">> =>\r\n                                                     <<\"\\\"NRJTeOuHduGoXtf8F8f+Du2Bwc4AadjmMQaJJAzvPqU=\\\"\">>,\r\n                                                 <<\"referer\">> =>\r\n                                                     <<\"http://192.168.88.101:8080/admin\">>,\r\n                                                 <<\"user-agent\">> =>\r\n                                                     <<\"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0\">>},\r\n                                           host => <<\"192.168.88.101\">>,\r\n                                           method => <<\"GET\">>,\r\n                                           path =>\r\n                                               <<\"/admin/ngraph/00002A9F\">>,\r\n                                           peer => {{192,168,88,254},56862},\r\n                                           pid => <0.312.0>,port => 8080,\r\n                                           qs => <<>>,ref => http,\r\n                                           scheme => <<\"http\">>,\r\n                                           sock => {{192,168,88,101},8080},\r\n                                           streamid => 1,\r\n                                           version => 'HTTP/1.1'},\r\n                                         #{})\r\n      in call from cowboy_stream_h:execute/3 (/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_stream_h.erl, line 249)\r\n      in call from cowboy_stream_h:request_process/3 (/root/projects/lorawan-shepherd/_build/default/lib/cowboy/src/cowboy_stream_h.erl, line 227)\r\n    ancestors: [<0.312.0>,<0.296.0>,<0.295.0>,ranch_sup,<0.256.0>]\r\n    messages: []\r\n    links: [<0.312.0>]\r\n    dictionary: []\r\n    trap_exit: false\r\n    status: running\r\n    heap_size: 1598\r\n    stack_size: 27\r\n    reductions: 256\r\n  neighbours:\r\n```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1255","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1255/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1255/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1255/events","html_url":"https://github.com/ninenines/cowboy/issues/1255","id":290112535,"number":1255,"title":"Elixir compilation fails if _build directory is a symlink to a nested directory","user":{"login":"naps62","id":283819,"avatar_url":"https://avatars2.githubusercontent.com/u/283819?v=4","gravatar_id":"","url":"https://api.github.com/users/naps62","html_url":"https://github.com/naps62","followers_url":"https://api.github.com/users/naps62/followers","following_url":"https://api.github.com/users/naps62/following{/other_user}","gists_url":"https://api.github.com/users/naps62/gists{/gist_id}","starred_url":"https://api.github.com/users/naps62/starred{/owne
8000
r}{/repo}","subscriptions_url":"https://api.github.com/users/naps62/subscriptions","organizations_url":"https://api.github.com/users/naps62/orgs","repos_url":"https://api.github.com/users/naps62/repos","events_url":"https://api.github.com/users/naps62/events{/privacy}","received_events_url":"https://api.github.com/users/naps62/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2018-01-19T21:29:13Z","updated_at":"2018-01-24T19:01:45Z","closed_at":"2018-01-24T13:05:27Z","author_association":"NONE","body":"Trying to compile a project in our CI, I noticed that this package failed to compile.\r\n\r\nWe were using a setup recommended by our CI, where the `_build` directory (where builds from Elixir projects go to) was symlinked to `$SEMAPHORE_CACHE_DIR/_build`. Under these conditions, cowboy failed to compile, with the following error:\r\n\r\n```\r\n** (Mix) Could not compile dependency :cowboy, \"/home/runner/.mix/rebar3 bare compile --paths \"/home/runner/platform/_build/test/lib/*/ebin\"\" command failed. You can recompile this dependency with \"mix deps.compile cowboy\", update it with \"mix deps.update cowboy\" or clean it with \"mix deps.clean cowboy\"\r\n```\r\n\r\nTrying to reproduce this locally I noticed that it failed if `_build` was symlinked to `./first-dir/second-dir`, but it worked if it was symlinked directly to `./first-dir`, so without adding the extra level of nesting\r\n\r\nI'm not if this is a cowboy issue though. Might also be rebar or some other tool (I'm not that familiar with the Erlang ecosystem), so apologies if this is the wrong place to report it","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1252","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1252/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1252/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1252/events","html_url":"https://github.com/ninenines/cowboy/issues/1252","id":286302223,"number":1252,"title":"Question: How to send 400 from content_types_provided?","user":{"login":"sammyraul","id":29125149,"avatar_url":"https://avatars1.githubusercontent.com/u/29125149?v=4","gravatar_id":"","url":"https://api.github.com/users/sammyraul","html_url":"https://github.com/sammyraul","followers_url":"https://api.github.com/users/sammyraul/followers","following_url":"https://api.github.com/users/sammyraul/following{/other_user}","gists_url":"https://api.github.com/users/sammyraul/gists{/gist_id}","starred_url":"https://api.github.com/users/sammyraul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammyraul/subscriptions","organizations_url":"https://api.github.com/users/sammyraul/orgs","repos_url":"https://api.github.com/users/sammyraul/repos","events_url":"https://api.github.com/users/sammyraul/events{/privacy}","received_events_url":"https://api.github.com/users/sammyraul/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-01-05T14:23:47Z","updated_at":"2018-01-05T14:32:33Z","closed_at":"2018-01-05T14:29:12Z","author_association":"NONE","body":"Hi,\r\nI wanted to return 400 from REST handler  content_types_provided. here's my code\r\n\r\n```\r\n> content_types_provided(Req, State) ->\r\n>     {[\r\n>         {{<<\"text\">>, <<\"plain\">>, []}, show_form},\r\n>         {{<<\"text\">>, <<\"html\">>, []}, show_form}\r\n>     ], Req, State}.\r\n> \r\n> %% Empty list returns 200\r\n> show_form(Req,State) ->\r\n>      { [ ], Req, State}. // returns 2oo or \r\n> \r\n> %% Returning false crashes process andreturns 500\r\n> show_form(Req,State) ->\r\n>      { false, Req, State}. //crash or\r\n> \r\n> %% Explicitly calling reply function returns 400 but this also causes crash\r\n> show_form(Req,State) ->\r\n>       cowboy_req:reply(400, Req), // works but crash\r\n>       { [ ], Req, State}\r\n```\r\n\r\n\r\nWhat is the right way to return error code if request is wrong instead of sending back data?\r\nI could not find this in the documentation or maybe I missed it. If someone can point me it would be really appreciated.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1251","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1251/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1251/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1251/events","html_url":"https://github.com/ninenines/cowboy/issues/1251","id":285754863,"number":1251,"title":"How best to implement an Apache-style access log for Cowboy >=2.0?","user":{"login":"nickelization","id":4108538,"avatar_url":"https://avatars2.githubusercontent.com/u/4108538?v=4","gravatar_id":"","url":"https://api.github.com/users/nickelization","html_url":"https://github.com/nickelization","followers_url":"https://api.github.com/users/nickelization/followers","following_url":"https://api.github.com/users/nickelization/following{/other_user}","gists_url":"https://api.github.com/users/nickelization/gists{/gist_id}","starred_url":"https://api.github.com/users/nickelization/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickelization/subscriptions","organizations_url":"https://api.github.com/users/nickelization/orgs","repos_url":"https://api.github.com/users/nickelization/repos","events_url":"https://api.github.com/users/nickelization/events{/privacy}","received_events_url":"https://api.github.com/users/nickelization/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2018-01-03T17:28:29Z","updated_at":"2018-03-29T09:30:22Z","closed_at":"2018-01-03T17:37:48Z","author_association":"NONE","body":"Hi there, I'd really like to add support for Apache-style access logs to Cowboy (and maybe error logs too), but I'm not sure how best to go about it. I specifically say Apache-style logs because there are a lot of great tools that exist out there for parsing and dealing with logs that follow this particular format, so I'd really like the format of the logs to match an actual Apache log as closely as possible. I recently switched a big project from Webmachine over to Cowboy, and overall I've really loved Cowboy, but the one thing I've missed from Webmachine is the Apache-style logging features that it has. If we could get that added, Cowboy would really be perfect for my needs ðŸ˜€\r\n\r\nI can see this has been discussed before for pre-2.0 Cowboy, and it looks like the `onresponse` hook would work great, but it looks like that feature has been removed in 2.0 and later. I also looked into creating a middleware module for this, but it doesn't seem like you can get all the info you need to include stuff like the response code, since sending a response seems to follow a totally separate code path that doesn't involve the middleware stuff at all.\r\n\r\nI'd be happy to submit a patch to Cowboy to help enable this, but I'm not sure what the best way to go about it would be from an architectural standpoint. Some sort of enhancement to middlewares? Bringing onresponse back? Maybe building better logging features directly into Cowboy as a first-class feature? Or something else entirely? I figured I'd better have a discussion about this before I start coding, to make sure whatever I implement has a shot at being accepted. Looking forward to hearing your thoughts!","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1250","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1250/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1250/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1250/events","html_url":"https://github.com/ninenines/cowboy/issues/1250","id":285448266,"number":1250,"title":"Dependency is specified as a dependency but is not reachable by the system error","user":{"login":"sammyraul","id":29125149,"avatar_url":"https://avatars1.githubusercontent.com/u/29125149?v=4","gravatar_id":"","url":"https://api.github.com/users/sammyraul","html_url":"https://github.com/sammyraul","followers_url":"https://api.github.com/users/sammyraul/followers","following_url":"https://api.github.com/users/sammyraul/following{/other_user}","gists_url":"https://api.github.com/users/sammyraul/gists{/gist_id}","starred_url":"https://api.github.com/users/sammyraul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammyraul/subscriptions","organizations_url":"https://api.github.com/users/sammyraul/orgs","repos_url":"https://api.github.com/users/sammyraul/repos","events_url":"https://api.github.com/users/sammyraul/events{/privacy}","received_events_url":"https://api.github.com/users/sammyraul/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-01-02T14:52:11Z","updated_at":"2018-01-02T16:58:15Z","closed_at":"2018-01-02T16:58:15Z","author_association":"NONE","body":"Hello,\r\nA bit naive issue when including external lib into Cowboy.\r\n\r\nI am trying to include erlydtl in my Makefile. But unfortunately it is failing with \r\n\r\n> Failed to solve release:\r\n Dependency erlydtl is specified as a dependency but is not reachable by the system.\r\n\r\nmake: *** [relx-rel] Error 127\r\n\r\nThe same works when using rebar3, I am able to build and run my application.\r\n\r\nHere's my Makefile\r\n\r\n```\r\nDEPS = cowboy erlydtl\r\ndep_cowboy_commit = master\r\nerlydtl = git https://github.com/erlydtl/erlydtl\r\n\r\nLOCAL_DEPS = kernel stdlib ssl compiler erts crypto public_key hipe inets asn1\r\ninclude erlang.mk\r\n```\r\n\r\nI am sorry if it is not the right place for this but any pointers would be highly appreciated.\r\nThanks Sammy","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1249","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1249/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1249/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1249/events","html_url":"https://github.com/ninenines/cowboy/issues/1249","id":285169894,"number":1249,"title":"src/cb3_handler.erl:2: behaviour cowboy_http undefined","user":{"login":"ToolwatchThunker","id":11857304,"avatar_url":"https://avatars0.githubusercontent.com/u/11857304?v=4","gravatar_id":"","url":"https://api.github.com/users/ToolwatchThunker","html_url":"https://github.com/ToolwatchThunker","followers_url":"https://api.github.com/users/ToolwatchThunker/followers","following_url":"https://api.github.com/users/ToolwatchThunker/following{/other_user}","gists_url":"https://api.github.com/users/ToolwatchThunker/gists{/gist_id}","starred_url":"https://api.github.com/users/ToolwatchThunker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ToolwatchThunker/subscriptions","organizations_url":"https://api.github.com/users/ToolwatchThunker/orgs","repos_url":"https://api.github.com/users/ToolwatchThunker/repos","events_url":"https://api.github.com/users/ToolwatchThunker/events{/privacy}","received_events_url":"https://api.github.com/users/ToolwatchThunker/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2017-12-29T23:39:58Z","updated_at":"2018-01-02T18:33:53Z","closed_at":"2017-12-29T23:48:05Z","author_association":"NONE","body":"The Cowboy Web Server fails on the Erlang statement ****-behaviour(cowboy_http_handler)**** \r\n\r\nI have tried Cowboy Web Server Versions 2.2.0 and 2.1.0 but they both have the same problems.\r\n\r\nHere is the output of the make operation:\r\n\r\n`[tomlinux@tomlinux cb3]$ make run\r\nmake[1]: Entering directory '/home/tmoriarty/cb3/deps/cowboy'\r\nmake[2]: Entering directory '/home/tmoriarty/cb3/deps/cowlib'\r\nmake[2]: Leaving directory '/home/tmoriarty/cb3/deps/cowlib'\r\nmake[2]: Entering directory '/home/tmoriarty/cb3/deps/ranch'\r\n DEPEND ranch.d\r\nmake[2]: Leaving directory '/home/tmoriarty/cb3/deps/ranch'\r\n DEPEND cowboy.d\r\n GEN    rebar.config\r\nmake[1]: Leaving directory '/home/tmoriarty/cb3/deps/cowboy'\r\n DEPEND cb3.d\r\n ERLC   cb3_app.erl cb3_handler.erl\r\ncompile: warnings being treated as errors\r\nsrc/cb3_handler.erl:2: behaviour cowboy_http_handler undefined\r\nerlang.mk:5141: recipe for target 'ebin/cb3.app' failed\r\nmake[1]: *** [ebin/cb3.app] Error 1\r\nerlang.mk:4932: recipe for target 'app' failed\r\nmake: *** [app] Error 2`","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1248","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1248/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1248/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1248/events","html_url":"https://github.com/ninenines/cowboy/issues/1248","id":284337676,"number":1248,"title":"Cowboy Hard Caches Static File Output Unless I Nuke Everything","user":{"login":"ajm113","id":9935420,"avatar_url":"https://avatars1.githubusercontent.com/u/9935420?v=4","gravatar_id":"","url":"https://api.github.com/users/ajm113","html_url":"https://github.com/ajm113","followers_url":"https://api.github.com/users/ajm113/followers","following_url":"https://api.github.com/users/ajm113/following{/other_user}","gists_url":"https://api.github.com/users/ajm113/gists{/gist_id}","starred_url":"https://api.github.com/users/ajm113/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajm113/subscriptions","organizations_url":"https://api.github.com/users/ajm113/orgs","repos_url":"https://api.github.com/users/ajm113/repos","events_url":"https://api.github.com/users/ajm113/events{/privacy}","received_events_url":"https://api.github.com/users/ajm113/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-12-24T02:03:33Z","updated_at":"2017-12-24T09:11:59Z","closed_at":"2017-12-24T05:24:24Z","author_association":"NONE","body":"This is a bit of a very unusual issue for myself. I don't know if I have something setup wrong, or if there is black magic in the works, or I drank too many fizzy drinks to read the docs slow enough, but I'll do my best to describe my issue...\r\n\r\nSo I have gulp converting my pug.js input into a friendly browser readable .html file. Whenever I make any changes to the pug.js file for gulp to update the .html file in my priv folder it updates perfectly fine. No issue here. However, when I attempt to see my changes on the server using Cowboy, I don't see my changes reflect.\r\n\r\nHere's what I've done, running `rebar3 shell`\r\n\r\n- Attempt to Google my issue. I haven't seen anyone run into this, and I am using the most recent version. So perhaps this is a new bug, and I'm the only one thus far who has ran into it?\r\n- Delete the priv folder of my app's output _build. -- No dice\r\n- Blow away browser cache. -- Nothing\r\n- Directly input my priv folder path using this `{\"/assets/[...]\", cowboy_static, {dir, code:priv_dir(bombinaid) ++ \"/assets\"}}`. -- Nope.avi\r\n- Directly edit the HTML file inside the priv folder. -- Negative!\r\n- Also I notice if I remove all the text inside the html file parts of the old file still appear. So for some reason Cowboy registers the removed/added text, but still shows old files or garbage data.\r\n- Blow away _build folder all together. IT WORKS! But why do I have to nuke everything to see my changes?\r\n\r\nTL;DR ver: Cowboy doesn't recognize local file changes to update the server, unless I blow away cowboy.\r\n\r\nMy rebar.config\r\n```\r\n{erl_opts, [debug_info]}.\r\n{shell, [{apps, [\r\n    bombinaid,\r\n    kernel,\r\n    stdlib,\r\n    cowboy\r\n]}]}.\r\n\r\n{deps, [\r\n\t{cowboy, {git,\"https://github.com/ninenines/cowboy.git\", {tag, \"2.2.0\"}}}\r\n]}.\r\n\r\n{relx, [{release, { bombinaid, \"0.0.1\" },\r\n         [bombinaid,\r\n          sasl,\r\n          cowboy\r\n          ]},\r\n\r\n        {dev_mode, true},\r\n        {include_erts, true},\r\n\r\n        {extended_start_script, true}]\r\n}.\r\n\r\n```\r\n\r\nMy repo having the issue: https://github.com/ajm113/bombinaid.com\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1247","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1247/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1247/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1247/events","html_url":"https://github.com/ninenines/cowboy/issues/1247","id":284089793,"number":1247,"title":"Safari hangs on certain H2 responses.","user":{"login":"idyll","id":4642,"avatar_url":"https://avatars3.githubusercontent.com/u/4642?v=4","gravatar_id":"","url":"https://api.github.com/users/idyll","html_url":"https://github.com/idyll","followers_url":"https://api.github.com/users/idyll/followers","following_url":"https://api.github.com/users/idyll/following{/other_user}","gists_url":"https://api.github.com/users/idyll/gists{/gist_id}","starred_url":"https://api.github.com/users/idyll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idyll/subscriptions","organizations_url":"https://api.github.com/users/idyll/orgs","repos_url":"https://api.github.com/users/idyll/repos","events_url":"https://api.github.com/users/idyll/events{/privacy}","received_events_url":"https://api.github.com/users/idyll/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2017-12-22T07:14:42Z","updated_at":"2018-01-23T19:38:19Z","closed_at":"2018-01-23T15:16:47Z","author_association":"NONE","body":"### Background\r\n\r\nI apologize but figuring out how to trigger the bug has exhausted my H2 knowledge. I am not sure if the issue is Safari not correctly handling an edge case or if Cowboy doesn't conform to the spec.\r\n\r\nThis is probably Cowboy triggering a Safari bug. And if so I have an open ticket with Apple. I just need to be able to explain to them what to fix.\r\n\r\n### My Observation\r\n\r\nSafari and the GO H2C command line client both hang when they receive a certain sequence of frames from Cowboy. I first triggered it in a Phoenix app but I am reproduce directly in Cowboy by calling `reply` with specially crafted iodata.\r\n\r\n### To Reproduce\r\n`reply` with the following iodata:\r\n```\r\n[[[\"\" | \"\"]  | \"\"]  | \"... string that contains at around 36,000 characters or so...\" ]\r\n```\r\n\r\nI have a sample project here: (again I apologize it's elixir not erlang.)\r\nhttps://github.com/idyll/safari\r\n\r\nMy guess is that the result is several small frames being sent to Safari which result in it triggering the bug. But your insight would be appreciated.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1246","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1246/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1246/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1246/events","html_url":"https://github.com/ninenines/cowboy/issues/1246","id":282739440,"number":1246,"title":"Recommended way of redirecting http request to https","user":{"login":"Ilyes512","id":2445415,"avatar_url":"https://avatars2.githubusercontent.com/u/2445415?v=4","gravatar_id":"","url":"https://api.github.com/users/Ilyes512","html_url":"https://github.com/Ilyes512","followers_url":"https://api.github.com/users/Ilyes512/followers","following_url":"https://api.github.com/users/Ilyes512/following{/other_user}","gists_url":"https://api.github.com/users/Ilyes512/gists{/gist_id}","starred_url":"https://api.github.com/users/Ilyes512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ilyes512/subscriptions","organizations_url":"https://api.github.com/users/Ilyes512/orgs","repos_url":"https://api.github.com/users/Ilyes512/repos","events_url":"https://api.github.com/users/Ilyes512/events{/privacy}","received_events_url":"https://api.github.com/users/Ilyes512/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-12-18T00:57:00Z","updated_at":"2017-12-18T08:25:23Z","closed_at":"2017-12-18T08:25:23Z","author_association":"NONE","body":"Hi, I am new to he platform and learning mainly Elixir at the moment. As you might now the \"main\" (web) framework for Elixir is Phoenix which uses Plug which in turn uses Cowboy as its server. I always like to go deep into the underlying libraries so thats why I started [this](https://github.com/Ilyes512/elixir_hello_world) to play around with Cowboy.\r\n\r\nSo at this point I have got cowboy(2) running either using start_clear or start_tls. At this point I want to use https, but I want all incoming http request to be redirected to https. I know how to do this with Nginx, but I was wondering if this was possible using cowboy (or using any other language feature in Erlang/Elixir). Besides the question if it's possible I would also like to know if this is the \"best\"/recommend way of doing it. If its not, should I use an external tools like Nginx/HAProxy for redirecting?\r\n\r\nI have also tried running both http and https by calling both start_clear and start_tls, but it seems only one survives? Not sure what I should change to be able to run two cowboy instances (on two different ports I think in any case).\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1244","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1244/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1244/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1244/events","html_url":"https://github.com/ninenines/cowboy/issues/1244","id":281274137,"number":1244,"title":"no function clause matching in :cow_uri.urldecode/2","user":{"login":"ourway","id":1386881,"avatar_url":"https://avatars1.githubusercontent.com/u/1386881?v=4","gravatar_id":"","url":"https://api.github.com/users/ourway","html_url":"https://github.com/ourway","followers_url":"https://api.github.com/users/ourway/followers","following_url":"https://api.github.com/users/ourway/following{/other_user}","gists_url":"https://api.github.com/users/ourway/gists{/gist_id}","starred_url":"https://api.github.com/users/ourway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ourway/subscriptions","organizations_url":"https://api.github.com/users/ourway/orgs","repos_url":"https://api.github.com/users/ourway/repos","events_url":"https://api.github.com/users/ourway/events{/privacy}","received_events_url":"https://api.github.com/users/ourway/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-12-12T06:40:04Z","updated_at":"2017-12-12T15:17:13Z","closed_at":"2017-12-12T15:17:13Z","author_association":"NONE","body":"request:\r\n\r\n```\r\ncurl -X POST \\                                                                                                             [10:03:31]\r\n  http://127.0.0.1:6050/messaging/MO/\\<\\30925678> \\\r\n  -H 'Cache-Control: no-cache' \\\r\n  -H 'Content-Type: application/xml' \\\r\n  -d 'some content'\r\n```\r\n\r\nAnd error:\r\n\r\n```\r\n[error] Process #PID<0.712.0> raised an exception\r\n** (FunctionClauseError) no function clause matching in :cow_uri.urldecode/2\r\n    (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cow_uri.erl:26: :cow_uri.urldecode(\"<30925678\", \"\")\r\n    (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:331: :cowboy_router.\"-split_path/2-lc$^1/1-1-\"/1\r\n    (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:331: :cowboy_router.split_path/2\r\n    (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:334: :cowboy_router.split_path/2\r\n    (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:271: :cowboy_router.match_path/4\r\n    (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:169: :cowboy_router.execute/2\r\n    (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_protocol.erl:442: :cowboy_protocol.execute/4\r\n[error] Ranch protocol #PID<0.712.0> (:cowboy_protocol) of listener Red9.Endpoint.HTTP terminated\r\n** (exit) an exception was raised:\r\n    ** (FunctionClauseError) no function clause matching in :cow_uri.urldecode/2\r\n        (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cow_uri.erl:26: :cow_uri.urldecode(\"<30925678\", \"\")\r\n        (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:331: :cowboy_router.\"-split_path/2-lc$^1/1-1-\"/1\r\n        (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:331: :cowboy_router.split_path/2\r\n        (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:334: :cowboy_router.split_path/2\r\n        (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:271: :cowboy_router.match_path/4\r\n        (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_router.erl:169: :cowboy_router.execute/2\r\n        (cowboy) /Users/rodmena/Documents/development/red9/deps/cowboy/src/cowboy_protocol.erl:442: :cowboy_protocol.execute/4\r\n```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1243","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1243/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1243/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1243/events","html_url":"https://github.com/ninenines/cowboy/issues/1243","id":280737173,"number":1243,"title":"Client PID","user":{"login":"fiodinggo","id":17215221,"avatar_url":"https://avatars0.githubusercontent.com/u/17215221?v=4","gravatar_id":"","url":"https://api.github.com/users/fiodinggo","html_url":"https://github.com/fiodinggo","followers_url":"https://api.github.com/users/fiodinggo/followers","following_url":"https://api.github.com/users/fiodinggo/following{/other_user}","gists_url":"https://api.github.com/users/fiodinggo/gists{/gist_id}","starred_url":"https://api.github.com/users/fiodinggo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fiodinggo/subscriptions","organizations_url":"https://api.github.com/users/fiodinggo/orgs","repos_url":"https://api.github.com/users/fiodinggo/repos","events_url":"https://api.github.com/users/fiodinggo/events{/privacy}","received_events_url":"https://api.github.com/users/fiodinggo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2017-12-09T17:26:54Z","updated_at":"2017-12-12T15:17:38Z","closed_at":"2017-12-12T15:17:38Z","author_association":"NONE","body":"Hello everyone,\r\ni'm confused, where is my real pid (client pid), because in init function, if i catch self() / erlang:self(), it doesn't same with - if i catch self() / erlang:self() from  websocket_init. please take a look my script:\r\n\r\n-module(ws_handler).\r\n\r\n-export([init/2]).\r\n-export([websocket_init/1]).\r\n-export([websocket_handle/2]).\r\n-export([websocket_info/2]).\r\n\r\ninit(Req0, State) ->\r\n  io:format(\"start#1 ~p~n\", [self()]),\r\n  {cowboy_websocket, Req0, State}.\r\n\r\nwebsocket_init(State) ->\r\n  io:format(\"start#2 ~p~n\", [self()]),\r\n  erlang:start_timer(10000, self(), <<\"Hello!\">>),\r\n  {reply, State, hibernate}.\r\n\r\nwebsocket_handle({text, Msg}, State) ->\r\n\t{reply, {text, << \"That's what she said! \", Msg/binary >>}, State, hibernate};\r\nwebsocket_handle(_Data, State) ->\r\n\t{ok, State, hibernate}.\r\n\r\nwebsocket_info({timeout, _Ref, Msg}, State) ->\r\n\terlang:start_timer(10000, self(), <<\"How' you doin'?\">>),\r\n\t{reply, {text, Msg}, State, hibernate};\r\nwebsocket_info(_Info, State) ->\r\n{ok, State}.\r\n\r\nWhat is this supposed to be or not?\r\nplease, i need some reason for that...\r\nThanks alot","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1242","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1242/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1242/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1242/events","html_url":"https://github.com/ninenines/cowboy/issues/1242","id":279706927,"number":1242,"title":"can't change environment after start of listener","user":{"login":"mkrusemark","id":4252296,"avatar_url":"https://avatars3.githubusercontent.com/u/4252296?v=4","gravatar_id":"","url":"https://api.github.com/users/mkrusemark","html_url":"https://github.com/mkrusemark","followers_url":"https://api.github.com/users/mkrusemark/followers","following_url":"https://api.github.com/users/mkrusemark/following{/other_user}","gists_url":"https://api.github.com/users/mkrusemark/gists{/gist_id}","starred_url":"https://api.github.com/users/mkrusemark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkrusemark/subscriptions","organizations_url":"https://api.github.com/users/mkrusemark/orgs","repos_url":"https://api.github.com/users/mkrusemark/repos","events_url":"https://api.github.com/users/mkrusemark/events{/privacy}","received_events_url":"https://api.github.com/users/mkrusemark/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-12-06T10:48:15Z","updated_at":"2017-12-06T11:13:45Z","closed_at":"2017-12-06T11:13:45Z","author_association":"NONE","body":"Changing routes for an already running listener has no effect.\r\n\r\nStart listener:\r\n    Dispatch = cowboy_router:compile([]),\r\n    {Res0, _} = cowboy:start_clear(http_listener,\r\n                                  [{port, 8000}],\r\n                                  #{env => #{dispatch => Dispatch}}\r\n                                 ),\r\n\r\nChange routes:\r\n        Dispatch = cowboy_router:compile([{\"_\", [{\"/\", http_connector_handler, []}]}]),\r\n        cowboy:set_env(http_listener, dispatch, Dispatch)\r\n\r\nhttp_connector_handler:\r\ninit(Req0, State) ->\r\n    throw(Req0),\r\n\r\nrequesting localhost:8000:// doesn't show anything. The same handler is called if used in cowboy:start_clear.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1240","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1240/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1240/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1240/events","html_url":"https://github.com/ninenines/cowboy/issues/1240","id":275907538,"number":1240,"title":"Return empty 200 after a REST POST request.","user":{"login":"dxtr","id":204705,"avatar_url":"https://avatars2.githubusercontent.com/u/204705?v=4","gravatar_id":"","url":"https://api.github.com/users/dxtr","html_url":"https://github.com/dxtr","followers_url":"https://api.
6317
github.com/users/dxtr/followers","following_url":"https://api.github.com/users/dxtr/following{/other_user}","gists_url":"https://api.github.com/users/dxtr/gists{/gist_id}","starred_url":"https://api.github.com/users/dxtr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dxtr/subscriptions","organizations_url":"https://api.github.com/users/dxtr/orgs","repos_url":"https://api.github.com/users/dxtr/repos","events_url":"https://api.github.com/users/dxtr/events{/privacy}","received_events_url":"https://api.github.com/users/dxtr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-11-22T00:40:07Z","updated_at":"2017-11-22T21:29:25Z","closed_at":"2017-11-22T21:29:25Z","author_association":"NONE","body":"I am currently working on creating a server for a (broken?) application that expects a HTTP Status 200 with a Content-Length of 0 after a REST POST request. Cowboy will mainly return Status 204.\r\n\r\nI honestly can't see any way to do this. Is my assessment correct?\r\n\r\nI have been digging through the code a little and came to this in cowboy_req:\r\n```\r\n-spec has_resp_body(req()) -> boolean().\r\nhas_resp_body(#{resp_body := {sendfile, _, _, _}}) ->\r\n\ttrue;\r\nhas_resp_body(#{resp_body := RespBody}) ->\r\n\tiolist_size(RespBody) > 0;\r\nhas_resp_body(_) ->\r\n\tfalse.\r\n```\r\n\r\nI also looked in cowboy_rest and found:\r\n\r\n```\r\nhas_resp_body(Req, State) ->\r\n\tcase cowboy_req:has_resp_body(Req) of\r\n\t\ttrue -> multiple_choices(Req, State);\r\n\t\tfalse -> respond(Req, State, 204)\r\n\tend.\r\n```\r\n\r\nThat makes sense with what I experienced - namely that etting the body to `<<\"\">>` resulted in cowboy_req:has_resp_body/1 returning false\r\n\r\nSo I tried this:\r\n```\r\n\t    Resp = cowboy_req:set_resp_body({sendfile, 0, 0, \"/dev/zero\"}, Req),\r\n```\r\n\r\nThat results in `cowboy_req:has_resp_body/1` returning true - but the response I am getting is still 204.\r\nAm I simply missing something here?\r\n\r\nI am running 2.1.0, by the way.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1239","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1239/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1239/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1239/events","html_url":"https://github.com/ninenines/cowboy/issues/1239","id":275321668,"number":1239,"title":"Early error handling problem in cowboy_metrics_h","user":{"login":"mmzeeman","id":1024972,"avatar_url":"https://avatars0.githubusercontent.com/u/1024972?v=4","gravatar_id":"","url":"https://api.github.com/users/mmzeeman","html_url":"https://github.com/mmzeeman","followers_url":"https://api.github.com/users/mmzeeman/followers","following_url":"https://api.github.com/users/mmzeeman/following{/other_user}","gists_url":"https://api.github.com/users/mmzeeman/gists{/gist_id}","starred_url":"https://api.github.com/users/mmzeeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmzeeman/subscriptions","organizations_url":"https://api.github.com/users/mmzeeman/orgs","repos_url":"https://api.github.com/users/mmzeeman/repos","events_url":"https://api.github.com/users/mmzeeman/events{/privacy}","received_events_url":"https://api.github.com/users/mmzeeman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-11-20T11:23:27Z","updated_at":"2017-11-20T15:31:46Z","closed_at":"2017-11-20T15:27:08Z","author_association":"NONE","body":"During testing I bumped into this problem. The cowboy metrics handler tries to report the error, but it crashes on a function clause error.\r\n\r\nI was sending an illegal request to the server. The request line was:\r\n\r\n```\r\nFOO bar\\r\\n\r\n```\r\n\r\n```\r\n11:52:05.529 [error] Unhandled exception error:function_clause in cowboy_stream:early_error(1, Reason, PartialReq, Resp, Opts)\r\nStacktrace: [{cowboy_metrics_h,early_error,[1,{connection_error,protocol_error,'Invalid request-line or request-target. (RFC7230 3.1.1, RFC7230 5.3)'},#{},{response,400,#{<<\"content-length\">> => <<\"0\">>},<<>>},#{connection_type => supervisor,env => #{},metrics_callback => #Fun<zotonic_listen_http.14.72510757>,middlewares => [cowmachine_proxy,z_sites_dispatcher,z_cowmachine_middleware],request_timeout => 60000,stream_handlers => [cowboy_stream_h]}],[{file,\"/Users/Maas/Work/git/zotonic/zotonic-master/zotonic/_build/default/lib/cowboy/src/cowboy_metrics_h.erl\"},{line,281}]},{cowboy_http,early_error,4,[{file,\"/Users/Maas/Work/git/zotonic/zotonic-master/zotonic/_build/default/lib/cowboy/src/cowboy_http.erl\"},{line,1129}]},{cowboy_http,error_terminate,3,[{file,\"/U...\"},...]},...]\r\nReason: {connection_error,protocol_error,'Invalid request-line or request-target. (RFC7230 3.1.1, RFC7230 5.3)'}\r\nPartialReq: #{}\r\nResp: {response,400,#{<<\"content-length\">> => <<\"0\">>},<<>>}\r\nOpts: #{connection_type => supervisor,env => #{},metrics_callback => #Fun<zotonic_listen_http.14.72510757>,middlewares => [cowmachine_proxy,z_sites_dispatcher,z_cowmachine_middleware],request_timeout => 60000,stream_handlers => [cowboy_metrics_h,cowboy_stream_h]}\r\nRecompile: /Users/Maas/Work/git/zotonic/zotonic-master/zotonic/apps/zotonic_core/src/support/z_access_syslog\r\n```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1236","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1236/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1236/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1236/events","html_url":"https://github.com/ninenines/cowboy/issues/1236","id":271466000,"number":1236,"title":"Erlang/OTP >= 20.0 deprecates crypto:sha/1 to be replaced with crypto:hash/2","user":{"login":"InfoSec812","id":99691,"avatar_url":"https://avatars0.githubusercontent.com/u/99691?v=4","gravatar_id":"","url":"https://api.github.com/users/InfoSec812","html_url":"https://github.com/InfoSec812","followers_url":"https://api.github.com/users/InfoSec812/followers","following_url":"https://api.github.com/users/InfoSec812/following{/other_user}","gists_url":"https://api.github.com/users/InfoSec812/gists{/gist_id}","starred_url":"https://api.github.com/users/InfoSec812/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/InfoSec812/subscriptions","organizations_url":"https://api.github.com/users/InfoSec812/orgs","repos_url":"https://api.github.com/users/InfoSec812/repos","events_url":"https://api.github.com/users/InfoSec812/events{/privacy}","received_events_url":"https://api.github.com/users/InfoSec812/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-11-06T12:55:29Z","updated_at":"2017-11-06T14:12:17Z","closed_at":"2017-11-06T14:12:17Z","author_association":"NONE","body":"Need to implement a safe way to handle this in a backward compatible manner","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1235","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1235/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1235/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1235/events","html_url":"https://github.com/ninenines/cowboy/issues/1235","id":270245129,"number":1235,"title":"Use websocket causes the system restart when upgrading the release","user":{"login":"feng19","id":2451508,"avatar_url":"https://avatars3.githubusercontent.com/u/2451508?v=4","gravatar_id":"","url":"https://api.github.com/users/feng19","html_url":"https://github.com/feng19","followers_url":"https://api.github.com/users/feng19/followers","following_url":"https://api.github.com/users/feng19/following{/other_user}","gists_url":"https://api.github.com/users/feng19/gists{/gist_id}","starred_url":"https://api.github.com/users/feng19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feng19/subscriptions","organizations_url":"https://api.github.com/users/feng19/orgs","repos_url":"https://api.github.com/users/feng19/repos","events_url":"https://api.github.com/users/feng19/events{/privacy}","received_events_url":"https://api.github.com/users/feng19/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/ninenines/cowboy/milestones/19","html_url":"https://github.com/ninenines/cowboy/milestone/19","labels_url":"https://api.github.com/repos/ninenines/cowboy/milestones/19/labels","id":2974825,"number":19,"title":"2.3 \"Finish sys support\"","description":"Cowboy 2.0 comes with some sys support but some things are still missing. This release will aim to fix that.","creator":{"login":"essen","id":141739,"avatar_url":"https://avatars2.githubusercontent.com/u/141739?v=4","gravatar_id":"","url":"https://api.github.com/users/essen","html_url":"https://github.com/essen","followers_url":"https://api.github.com/users/essen/followers","following_url":"https://api.github.com/users/essen/following{/other_user}","gists_url":"https://api.github.com/users/essen/gists{/gist_id}","starred_url":"https://api.github.com/users/essen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/essen/subscriptions","organizations_url":"https://api.github.com/users/essen/orgs","repos_url":"https://api.github.com/users/essen/repos","events_url":"https://api.github.com/users/essen/events{/privacy}","received_events_url":"https://api.github.com/users/essen/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":5,"state":"closed","created_at":"2017-12-12T16:04:52Z","updated_at":"2018-03-28T11:01:12Z","due_on":null,"closed_at":"2018-03-28T11:01:12Z"},"comments":3,"created_at":"2017-11-01T09:19:47Z","updated_at":"2018-03-27T16:29:40Z","closed_at":"2018-03-27T16:29:40Z","author_association":"NONE","body":"Hello! I use cowboy websocket to develop online chat site. but I encountered a serious problem when upgrading the release. From the source I found that because the system needs to scan the entire application of the supervisor process , but the websocket process is also a supervisor process.Because it does not handle the system message, and then throws the [bad match exception](https://github.com/erlang/otp/blob/OTP-19.3.6/lib/sasl/src/release_handler_1.erl#L657) that causes the system to restart.","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1234","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1234/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1234/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1234/events","html_url":"https://github.com/ninenines/cowboy/issues/1234","id":269652481,"number":1234,"title":"[cowboy_http] I try to set `idle_timeout` to 'infinity'","user":{"login":"fimars","id":16299018,"avatar_url":"https://avatars1.githubusercontent.com/u/16299018?v=4","gravatar_id":"","url":"https://api.github.com/users/fimars","html_url":"https://github.com/fimars","followers_url":"https://api.github.com/users/fimars/followers","following_url":"https://api.github.com/users/fimars/following{/other_user}","gists_url":"https://api.github.com/users/fimars/gists{/gist_id}","starred_url":"https://api.github.com/users/fimars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fimars/subscriptions","organizations_url":"https://api.github.com/users/fimars/orgs","repos_url":"https://api.github.com/users/fimars/repos","events_url":"https://api.github.com/users/fimars/events{/privacy}","received_events_url":"https://api.github.com/users/fimars/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-10-30T15:53:03Z","updated_at":"2018-03-14T16:44:36Z","closed_at":"2018-03-14T16:44:36Z","author_association":"NONE","body":"Like this, I use on the elixir.\r\n```elixir\r\n    { :ok, _ } = :cowboy.start_clear(:dev_files_server,\r\n      [{ :port, port }],\r\n      %{ :env => %{ :dispatch => build_dispath_config() }, :idle_timeout => :infinity }\r\n    )\r\n```\r\n![image](https://user-images.githubusercontent.com/16299018/32180398-d75b5044-bd5f-11e7-8a57-78608bdcb048.png)\r\n\r\n## More\r\nUse 6_000_000`integer` work very well. But i find `idle_timeout` is `timeout()` type. ","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1231","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1231/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1231/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1231/events","html_url":"https://github.com/ninenines/cowboy/issues/1231","id":267633474,"number":1231,"title":"cow_sse.erl failed","user":{"login":"codertrack","id":5790771,"avatar_url":"https://avatars1.githubusercontent.com/u/5790771?v=4","gravatar_id":"","url":"https://api.github.com/users/codertrack","html_url":"https://github.com/codertrack","followers_url":"https://api.github.com/users/codertrack/followers","following_url":"https://api.github.com/users/codertrack/following{/other_user}","gists_url":"https://api.github.com/users/codertrack/gists{/gist_id}","starred_url":"https://api.github.com/users/codertrack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codertrack/subscriptions","organizations_url":"https://api.github.com/users/codertrack/orgs","repos_url":"https://api.github.com/users/codertrack/repos","events_url":"https://api.github.com/users/codertrack/events{/privacy}","received_events_url":"https://api.github.com/users/codertrack/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-23T11:31:37Z","updated_at":"2017-10-23T11:38:30Z","closed_at":"2017-10-23T11:38:30Z","author_association":"NONE","body":"===> Compiling _build/default/lib/cowlib/src/cow_sse.erl failed\r\n_build/default/lib/cowlib/src/cow_sse.erl:32: syntax error before: ':='\r\n\r\n_build/default/lib/cowlib/src/cow_sse.erl:44: type event() undefined\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1230","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1230/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1230/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1230/events","html_url":"https://github.com/ninenines/cowboy/issues/1230","id":267480885,"number":1230,"title":"\"Content-Type\" header and multiple values","user":{"login":"lukebakken","id":514926,"avatar_url":"https://avatars2.githubusercontent.com/u/514926?v=4","gravatar_id":"","url":"https://api.github.com/users/lukebakken","html_url":"https://github.com/lukebakken","followers_url":"https://api.github.com/users/lukebakken/followers","following_url":"https://api.github.com/users/lukebakken/following{/other_user}","gists_url":"https://api.github.com/users/lukebakken/gists{/gist_id}","starred_url":"https://api.github.com/users/lukebakken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukebakken/subscriptions","organizations_url":"https://api.github.com/users/lukebakken/orgs","repos_url":"https://api.github.com/users/lukebakken/repos","events_url":"https://api.github.com/users/lukebakken/events{/privacy}","received_events_url":"https://api.github.com/users/lukebakken/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-10-22T17:01:20Z","updated_at":"2017-10-23T14:00:30Z","closed_at":"2017-10-23T14:00:30Z","author_association":"CONTRIBUTOR","body":"In #1229 I describe a scenario in which sending the `Content-Type` header twice resulted in a `415` response, which broke a test suite that worked against Cowboy `1.0`. I did a bit more digging and compared how the following request's headers are parsed by `1.1.2` and `2.0`:\r\n\r\n```\r\ncurl -H 'Content-Type: application/json;charset=UTF-8' -H 'Content-Type: application/json' localhost:8080/ -d 'foo bar baz'\r\n```\r\n\r\nCowboy `1.1.2` \r\n\r\n```\r\n{<<\"content-type\">>,<<\"application/json;charset=UTF-8\">>},\r\n{<<\"content-type\">>,<<\"application/json\">>},\r\n```\r\n\r\nCowboy `2.0.0`:\r\n\r\n```\r\n<<\"content-type\">> =>\r\n    <<\"application/json;charset=UTF-8, application/json\">>,\r\n```\r\n\r\nThis explains why the upgrade to `2.0.0` resulted in the `415` error as `content_types_accepted` didn't match the `<<\"application/json;charset=UTF-8, application/json\">>` binary passed to it.\r\n\r\nIn the case of `Content-Type`, I don't believe multiple headers should be combined this way. The [BNF for Content-Type](https://tools.ietf.org/html/rfc1341) doesn't make any mention of multiple values allowed, and [this document](https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2) states the following:\r\n\r\n> Multiple message-header fields with the same field-name MAY be present in a message if and only if the entire field-value for that header field is defined as a comma-separated list\r\n\r\nI also tested the above `curl` request with a Sinatra app and only the first header is preserved: [ruby-transcript.txt](https://github.com/ninenines/cowboy/files/1405134/ruby-transcript.txt)\r\n","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1228","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1228/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1228/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1228/events","html_url":"https://github.com/ninenines/cowboy/issues/1228","id":267215645,"number":1228,"title":"cowboy_clock crashes during lookup of rfc1123","user":{"login":"iguberman","id":12000934,"avatar_url":"https://avatars3.githubusercontent.com/u/12000934?v=4","gravatar_id":"","url":"https://api.github.com/users/iguberman","html_url":"https://github.com/iguberman","followers_url":"https://api.github.com/users/iguberman/followers","following_url":"https://api.github.com/users/iguberman/following{/other_user}","gists_url":"https://api.github.com/users/iguberman/gists{/gist_id}","starred_url":"https://api.github.com/users/iguberman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iguberman/subscriptions","organizations_url":"https://api.github.com/users/iguberman/orgs","repos_url":"https://api.github.com/users/iguberman/repos","events_url":"https://api.github.com/users/iguberman/events{/privacy}","received_events_url":"https://api.github.com/users/iguberman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-10-20T15:35:00Z","updated_at":"2017-11-01T17:13:41Z","closed_at":"2017-11-01T17:07:57Z","author_association":"NONE","body":"I get below error log intermittently, possibly during high load in the system.  \r\n\r\n```2017-10-20 04:56:50.535 [error] <0.4194.0>@cowboy_clock:rfc1123:54 CRASH REPORT Process <0.4194.0> with 0 neighbours crashed with reason: bad argument in call to ets:lookup_element(cowboy_clock, rfc1123, 2) in cowboy_clock:rfc1123/0 line 54\r\n2017-10-20 04:56:50.535 [error] <0.720.0> Lager event handler error_logger_lager_h exited with reason {'EXIT',{{case_clause,[http,<0.4193.0>,1,<0.4194.0>,badarg,[{ets,lookup_element,[cowboy_clock,rfc1123,2],[]},{cowboy_clock,rfc1123,0,[{file,\"/drone/src/code.xaptum.xyz/xaptum-development/xmx/_build/default/lib/cowboy/src/cowboy_clock.erl\"},{line,54}]},{cowboy_req,response_headers,2,[{file,\"/drone/src/code.xaptum.xyz/xaptum-development/xmx/_build/default/lib/cowboy/src/cowboy_req.erl\"},{line,778}]},{cowboy_req,do_reply,4,[{file,\"/drone/src/code.xaptum.xyz/xaptum-development/xmx/_build/defau...\"},...]},...]]},...}}\r\n2017-10-20 04:56:50.588 [error] <0.4197.0>@cowboy_clock:rfc1123:54 CRASH REPORT Process <0.4197.0> with 0 neighbours crashed with reason: bad argument in call to ets:lookup_element(cowboy_clock, rfc1123, 2) in cowboy_clock:rfc1123/0 line 54\r\n2017-10-20 04:56:50.588 [error] <0.720.0> Lager event handler error_logger_lager_h exited with reason {'EXIT',{{case_clause,[http,<0.4196.0>,1,<0.4197.0>,badarg,[{ets,lookup_element,[cowboy_clock,rfc1123,2],[]},{cowboy_clock,rfc1123,0,[{file,\"/drone/src/code.xaptum.xyz/xaptum-development/xmx/_build/default/lib/cowboy/src/cowboy_clock.erl\"},{line,54}]},{cowboy_req,response_headers,2,[{file,\"/drone/src/code.xaptum.xyz/xaptum-development/xmx/_build/default/lib/cowboy/src/cowboy_req.erl\"},{line,778}]},{cowboy_req,do_reply,4,[{file,\"/drone/src/code.xaptum.xyz/xaptum-development/xmx/_build/defau...\"},...]},...]]},...}}```","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1227","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1227/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1227/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1227/events","html_url":"https://github.com/ninenines/cowboy/issues/1227","id":265808091,"number":1227,"title":"using sql_bridge dep","user":{"login":"fiodinggo","id":17215221,"avatar_url":"https://avatars0.githubusercontent.com/u/17215221?v=4","gravatar_id":"","url":"https://api.github.com/users/fiodinggo","html_url":"https://github.com/fiodinggo","followers_url":"https://api.github.com/users/fiodinggo/followers","following_url":"https://api.github.com/users/fiodinggo/following{/other_user}","gists_url":"https://api.github.com/users/fiodinggo/gists{/gist_id}","starred_url":"https://api.github.com/users/fiodinggo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fiodinggo/subscriptions","organizations_url":"https://api.github.com/users/fiodinggo/orgs","repos_url":"https://api.github.com/users/fiodinggo/repos","events_url":"https://api.github.com/users/fiodinggo/events{/privacy}","received_events_url":"https://api.github.com/users/fiodinggo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2017-10-16T15:18:47Z","updated_at":"2017-10-16T17:36:36Z","closed_at":"2017-10-16T17:15:08Z","author_association":"NONE","body":"how can i use this sql_bridge module in my cowboy project?\r\nhttps://github.com/choptastic/sql_bridge","score":1.0},{"url":"https://api.github.com/repos/ninenines/cowboy/issues/1224","repository_url":"https://api.github.com/repos/ninenines/cowboy","labels_url":"https://api.github.com/repos/ninenines/cowboy/issues/1224/labels{/name}","comments_url":"https://api.github.com/repos/ninenines/cowboy/issues/1224/comments","events_url":"https://api.github.com/repos/ninenines/cowboy/issues/1224/events","html_url":"https://github.com/ninenines/cowboy/issues/1224","id":264124532,"number":1224,"title":"Automatic HTTPS certification","user":{"login":"ShalokShalom","id":6344099,"avatar_url":"https://avatars0.githubusercontent.com/u/6344099?v=4","gravatar_id":"","url":"https://api.github.com/users/ShalokShalom","html_url":"https://github.com/ShalokShalom","followers_url":"https://api.github.com/users/ShalokShalom/followers","following_url":"https://api.github.com/users/ShalokShalom/following{/other_user}","gists_url":"https://api.github.com/users/ShalokShalom/gists{/gist_id}","starred_url":"https://api.github.com/users/ShalokShalom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShalokShalom/subscriptions","organizations_url":"https://api.github.com/users/ShalokShalom/orgs","repos_url":"https://api.github.com/users/ShalokShalom/repos","events_url":"https://api.github.com/users/ShalokShalom/events{/privacy}","received_events_url":"https://api.github.com/users/ShalokShalom/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-10T07:27:52Z","updated_at":"2017-10-10T08:13:33Z","closed_at":"2017-10-10T08:13:33Z","author_association":"NONE","body":"See here: http://caddyserver.com/\r\n\r\nThanks ","score":1.0}]}
0

