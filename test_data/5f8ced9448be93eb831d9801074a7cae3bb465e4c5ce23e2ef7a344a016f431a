HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 09 Jun 2018 08:05:15 GMT
Link: <https://api.github.com/search/issues?q=repo%3Akemalcr%2Fkemal+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Akemalcr%2Fkemal+type%3Aissue+state%3Aclosed&page=9>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: C8C8:57C5:3727322:7192C0B:5B1B8A3B
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 6
X-Ratelimit-Reset: 1528531543
X-Runtime-Rack: 0.334463
X-Xss-Protection: 1; mode=block

8000
{"total_count":248,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/kemalcr/kemal/issues/448","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/448/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/448/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/448/events","html_url":"https://github.com/kemalcr/kemal/issues/448","id":320160306,"node_id":"MDU6SXNzdWUzMjAxNjAzMDY=","number":448,"title":" Error : instantiating 'Kemal:Module#run()'","user":{"login":"godmode97","id":25510386,"node_id":"MDQ6VXNlcjI1NTEwMzg2","avatar_url":"https://avatars2.githubusercontent.com/u/25510386?v=4","gravatar_id":"","url":"https://api.github.com/users/godmode97","html_url":"https://github.com/godmode97","followers_url":"https://api.github.com/users/godmode97/followers","following_url":"https://api.github.com/users/godmode97/following{/other_user}","gists_url":"https://api.github.com/users/godmode97/gists{/gist_id}","starred_url":"https://api.github.com/users/godmode97/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/godmode97/subscriptions","organizations_url":"https://api.github.com/users/godmode97/orgs","repos_url":"https://api.github.com/users/godmode97/repos","events_url":"https://api.github.com/users/godmode97/events{/privacy}","received_events_url":"https://api.github.com/users/godmode97/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-04T05:51:43Z","updated_at":"2018-05-07T03:43:50Z","closed_at":"2018-05-07T03:43:50Z","author_association":"NONE","body":"### Error in starting Kemal Server\r\n\r\nAn error caught after executing starting Kemal , I  got this error only after upgrading my ubuntu 16.04 \r\nto 18.04,\r\n\r\n### Steps to Reproduce\r\n\r\n1. cd [_working directory_]\r\n2. crystal run src/[_application_].cr\r\n\r\n**Expected behavior:**\r\n```bash\r\n[development] Kemal is ready to lead at http://0.0.0.0:3000\r\n```\r\n**Actual behavior:** \r\n```bash\r\nError in src/cm.cr:243: instantiating 'Kemal:Module#run()'\r\n\r\nKemal.run\r\n      ^~~\r\n\r\nin lib/kemal/src/kemal.cr:19: instantiating 'Kemal:Module#run(Nil)'\r\n\r\n    self.run(nil)\r\n         ^~~\r\n\r\nin lib/kemal/src/kemal.cr:12: instantiating 'Kemal:Module#run(Nil)'\r\n\r\n    self.run port do\r\n         ^~~\r\n\r\nin lib/kemal/src/kemal.cr:69: instantiating 'HTTP::Server#listen()'\r\n\r\n    config.server.not_nil!.listen if config.env != \"test\" && config.server\r\n                           ^~~~~~\r\n\r\nin /usr/share/crystal/src/http/server.cr:160: instantiating 'listen(Bool)'\r\n\r\n  def listen(reuse_port = false)\r\n  ^\r\n\r\nin /usr/share/crystal/src/http/server.cr:163: expanding macro\r\n\r\n      spawn handle_client(server.accept?)\r\n      ^\r\n\r\nin macro 'spawn' /usr/share/crystal/src/concurrent.cr:95, line 9:\r\n\r\n   1.   \r\n   2.     ->(\r\n   3.       \r\n   4.         __arg0 : typeof(server.accept?),\r\n   5.       \r\n   6.       \r\n   7.       ) {\r\n   8.       spawn(name: nil) do\r\n>  9.         handle_client(\r\n  10.           \r\n  11.             __arg0,\r\n  12.           \r\n  13.           \r\n  14.         )\r\n  15.       end\r\n  16.     \r\n  17.       }.call(server.accept?)\r\n  18.     \r\n  19.   \r\n\r\ninstantiating 'handle_client((TCPSocket | Nil))'\r\nin /usr/share/crystal/src/http/server.cr:190: instantiating 'HTTP::Server::RequestProcessor#process(IO+, IO+)'\r\n\r\n    @processor.process(io, io)\r\n               ^~~~~~~\r\n\r\nin /usr/share/crystal/src/http/server/request_processor.cr:16: instantiating 'process(IO+, IO+, IO::FileDescriptor)'\r\n\r\n  def process(input, output, error = STDERR)\r\n  ^\r\n\r\nin /usr/share/crystal/src/http/server/request_processor.cr:39: instantiating '(HTTP::Handler | Proc(HTTP::Server::Context, Nil))#call(HTTP::Server::Context)'\r\n\r\n          @handler.call(context)\r\n                   ^~~~\r\n\r\nin /usr/share/crystal/src/http/server/handlers/compress_handler.cr:12: expanding macro\r\n\r\n    {% if flag?(:without_zlib) %}\r\n    ^\r\n\r\nin macro 'macro_140679119854208' /usr/share/crystal/src/http/server/handlers/compress_handler.cr:12, line 12:\r\n\r\n   1. \r\n   2.       request_headers = context.request.headers\r\n   3. \r\n   4.       if request_headers.includes_word?(\"Accept-Encoding\", \"gzip\")\r\n   5.         context.response.headers[\"Content-Encoding\"] = \"gzip\"\r\n   6.         context.response.output = Gzip::Writer.new(context.response.output, sync_close: true)\r\n   7.       elsif request_headers.includes_word?(\"Accept-Encoding\", \"deflate\")\r\n   8.         context.response.headers[\"Content-Encoding\"] = \"deflate\"\r\n   9.         context.response.output = Flate::Writer.new(context.response.output, sync_close: true)\r\n  10.       end\r\n  11. \r\n> 12.       call_next(context)\r\n  13.     \r\n\r\ninstantiating 'call_next(HTTP::Server::Context)'\r\nin /usr/share/crystal/src/http/server/handler.cr:24: instantiating '(HTTP::Handler | Proc(HTTP::Server::Context, Nil))#call(HTTP::Server::Context)'\r\n\r\n      next_handler.call(context)\r\n                   ^~~~\r\n\r\nin /usr/share/crystal/src/http/server/handlers/error_handler.cr:15: instantiating 'call_next(HTTP::Server::Context)'\r\n\r\n      call_next(context)\r\n      ^~~~~~~~~\r\n\r\nin /usr/share/crystal/src/http/server/handler.cr:24: instantiating '(HTTP::Handler | Proc(HTTP::Server::Context, Nil))#call(HTTP::Server::Context)'\r\n\r\n      next_handler.call(context)\r\n                   ^~~~\r\n\r\nin /usr/share/crystal/src/http/server/handlers/log_handler.cr:11: instantiating 'Time:Class#measure()'\r\n\r\n    elapsed = Time.measure { call_next(context) }\r\n                   ^~~~~~~\r\n\r\nin /usr/share/crystal/src/http/server/handlers/log_handler.cr:11: instantiating 'Time:Class#measure()'\r\n\r\n    elapsed = Time.measure { call_next(context) }\r\n                   ^~~~~~~\r\n\r\nin /usr/share/crystal/src/http/server/handlers/log_handler.cr:11: instantiating 'call_next(HTTP::Server::Context)'\r\n\r\n    elapsed = Time.measure { call_next(context) }\r\n                             ^~~~~~~~~\r\n\r\nin /usr/share/crystal/src/http/server/handler.cr:24: instantiating '(HTTP::Handler | Proc(HTTP::Server::Context, Nil))#call(HTTP::Server::Context)'\r\n\r\n      next_handler.call(context)\r\n                   ^~~~\r\n\r\nin lib/kemal/src/kemal/static_file_handler.cr:8: instantiating 'call_next(HTTP::Server::Context)'\r\n\r\n      return call_next(context) if context.request.path.not_nil! == \"/\"\r\n             ^~~~~~~~~\r\n\r\nin /usr/share/crystal/src/http/server/handler.cr:24: instantiating '(HTTP::Handler | Proc(HTTP::Server::Context, Nil))#call(HTTP::Server::Context)'\r\n\r\n      next_handler.call(context)\r\n                   ^~~~\r\n\r\nin /usr/share/crystal/src/http/server/handlers/static_file_handler.cr:65: instantiating 'directory_listing(HTTP::Server::Response, String, String)'\r\n\r\n      directory_listing(context.response, request_path, file_path)\r\n      ^~~~~~~~~~~~~~~~~\r\n\r\nin /usr/share/crystal/src/http/server/handlers/static_file_handler.cr:115: instantiating 'HTTP::StaticFileHandler::DirectoryListing#to_s(HTTP::Server::Response)'\r\n\r\n    DirectoryListing.new(request_path, path).to_s(io)\r\n                                             ^~~~\r\n\r\nin macro 'def_to_s' /usr/share/crystal/src/ecr/macros.cr:35, line 2:\r\n\r\n   1.     def to_s(__io__)\r\n>  2.       ECR.embed \"/usr/share/crystal/src/http/server/handlers/static_file_handler.html\", \"__io__\"\r\n   3.     end\r\n   4.   \r\n\r\nexpanding macro\r\nin macro 'embed' /usr/share/crystal/src/ecr/macros.cr:69, line 1:\r\n\r\n>  1.     {{ run(\"ecr/process\", \"/usr/share/crystal/src/http/server/handlers/static_file_handler.html\", \"__io__\") }}\r\n   2.   \r\n\r\nexpanding macro\r\nin macro 'def_to_s' /usr/share/crystal/src/ecr/macros.cr:35, line 2:\r\n\r\n   1.     def to_s(__io__)\r\n>  2.       ECR.embed \"/usr/share/crystal/src/http/server/handlers/static_file_handler.html\", \"__io__\"\r\n   3.     end\r\n   4.   \r\n\r\nexpanding macro\r\nin macro 'embed' /usr/share/crystal/src/ecr/macros.cr:69, line 1:\r\n\r\n>  1.     {{ run(\"ecr/process\", \"/usr/share/crystal/src/http/server/handlers/static_file_handler.html\", \"__io__\") }}\r\n   2.   \r\n\r\nError executing run (exit code: 127): ecr/process \"/usr/share/crystal/src/http/server/handlers/static_file_handler.html\" \"__io__\"\r\n\r\nstderr:\r\n\r\n    /home/user/.cache/crystal/usr-share-crystal-src-ecr-process.cr/macro_run: error while loading shared libraries: libevent-2.0.so.5: cannot open shared object file: No such file or directory\r\n\r\n\r\n```\r\n\r\n**Reproduces how often:** [What percentage of the time does it reproduce?]\r\n\r\n### Versions\r\n```bash\r\nCrystal 0.24.2 [4f9ed8d03] (2018-03-08)\r\n\r\nLLVM: 4.0.0\r\nDefault target: x86_64-unknown-linux-gnu\r\n```\r\n```yml\r\nKemal Version\r\n kemal:\r\n    github: kemalcr/kemal\r\n    version: ~> 0.22.0\r\n```\r\n### Additional Information\r\n\r\nUbuntu 18.04 asked me to delete some libraries that seem to be obsolete, and should be deleted in the operating system. After restarting, crystal won't compile.\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/447","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/447/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/447/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/447/events","html_url":"https://github.com/kemalcr/kemal/issues/447","id":319343210,"node_id":"MDU6SXNzdWUzMTkzNDMyMTA=","number":447,"title":"Optionally disable the X-Powered-By header","user":{"login":"Prutya","id":8135164,"node_id":"MDQ6VXNlcjgxMzUxNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/8135164?v=4","gravatar_id":"","url":"https://api.github.com/users/Prutya","html_url":"https://github.com/Prutya","followers_url":"https://api.github.com/users/Prutya/followers","following_url":"https://api.github.com/users/Prutya/following{/other_user}","gists_url":"https://api.github.com/users/Prutya/gists{/gist_id}","starred_url":"https://api.github.com/users/Prutya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prutya/subscriptions","organizations_url":"https://api.github.com/users/Prutya/orgs","repos_url":"https://api.github.com/users/Prutya/repos","events_url":"https://api.github.com/users/Prutya/events{/privacy}","received_events_url":"https://api.github.com/users/Prutya/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-01T22:00:19Z","updated_at":"2018-05-09T07:19:59Z","closed_at":"2018-05-09T07:19:59Z","author_association":"NONE","body":"Hi, \r\nCan we add a possibility to disable the 'X-Powered-By' header?\r\nCurrently I have to monkey-patch the InitHandler class like this:\r\n```crystal\r\nmodule Kemal\r\n  class InitHandler\r\n    def call(context : HTTP::Server::Context)\r\n      context.response.content_type = \"text/html\" unless context.response.headers.has_key?(\"Content-Type\")\r\n      call_next context\r\n    end\r\n\r\n    # def call(context : HTTP::Server::Context)\r\n    #   context.response.headers.add \"X-Powered-By\", \"Kemal\"\r\n    #   context.response.content_type = \"text/html\" unless context.response.headers.has_key?(\"Content-Type\")\r\n    #   call_next context\r\n    # end\r\n  end\r\nend\r\n```","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/444","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/444/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/444/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/444/events","html_url":"https://github.com/kemalcr/kemal/issues/444","id":316596327,"node_id":"MDU6SXNzdWUzMTY1OTYzMjc=","number":444,"title":"redirect with flash session #375","user":{"login":"lebogan","id":1024382,"node_id":"MDQ6VXNlcjEwMjQzODI=","avatar_url":"https://avatars3.githubusercontent.com/u/1024382?v=4","gravatar_id":"","url":"https://api.github.com/users/lebogan","html_url":"https://github.com/lebogan","followers_url":"https://api.github.com/users/lebogan/followers","following_url":"https://api.github.com/users/lebogan/following{/other_user}","gists_url":"https://api.github.com/users/lebogan/gists{/gist_id}","starred_url":"https://api.github.com/users/lebogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lebogan/subscriptions","organizations_url":"https://api.github.com/users/lebogan/orgs","repos_url":"https://api.github.com/users/lebogan/repos","events_url":"https://api.github.com/users/lebogan/events{/privacy}","received_events_url":"https://api.github.com/users/lebogan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-04-22T17:16:08Z","updated_at":"2018-04-23T06:36:34Z","closed_at":"2018-04-23T06:36:34Z","author_association":"NONE","body":"Is kemal-flash still a valid shard? Using it with kemal-sessions doesn't seem to work. I have tested it with Chrome, Firefox, and Opera. What am I missing? Crystal 0.24.2, Kemal 0.22.0.\r\n```\r\n kemal-flash:\r\n    github: neovintage/kemal-flash\r\n    version: 0.1.0\r\n\r\n  kemal-session:\r\n    github: kemalcr/kemal-session\r\n    version: 0.9.0\r\n```\r\n```\r\nrequire \"kemal\"\r\nrequire \"kemal-session\"\r\nrequire \"kemal-flash\"\r\n\r\nget \"/check_flash\" do |env|\r\n  env.flash[\"notice\"]?\r\nend\r\n```\r\nThanks as always :)","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/443","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/443/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/443/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/443/events","html_url":"https://github.com/kemalcr/kemal/issues/443","id":312149303,"node_id":"MDU6SXNzdWUzMTIxNDkzMDM=","number":443,"title":"Custom error handler","user":{"login":"lebogan","id":1024382,"node_id":"MDQ6VXNlcjEwMjQzODI=","avatar_url":"https://avatars3.githubusercontent.com/u/1024382?v=4","gravatar_id":"","url":"https://api.github.com/users/lebogan","html_url":"https://github.com/lebogan","followers_url":"https://api.github.com/users/lebogan/followers","following_url":"https://api.github.com/users/lebogan/following{/other_user}","gists_url":"https://api.github.com/users/lebogan/gists{/gist_id}","starred_url":"https://api.github.com/users/lebogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lebogan/subscriptions","organizations_url":"https://api.github.com/users/lebogan/orgs","repos_url":"https://api.github.com/users/lebogan/repos","events_url":"https://api.github.com/users/lebogan/events{/privacy}","received_events_url":"https://api.github.com/users/lebogan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-06T23:38:51Z","updated_at":"2018-04-07T14:09:14Z","closed_at":"2018-04-07T14:09:14Z","author_association":"NONE","body":"### Description\r\n\r\nI am writing a series of articles for the rank beginner based on my experience with Sinatra; like, Jumpstart Sinatra by Darren Jones. I want 404 errors to be rendered in a special view which explains what happened and provides a link back to the home page.\r\n```\r\nerror 404 do\r\n  my_renderer \"error404\"\r\nend\r\n```\r\nerror404 is a slang view file.\r\n### Steps to Reproduce\r\n`A build rendered this error: read before assignment to local variable 'title'`\r\n\r\nI thought it  was refering to this route:\r\n```\r\nget \"/\" do\r\n  title = \"People Named Kemal\"\r\n  my_renderer \"home\"\r\nend\r\n```\r\n**Expected behavior:** \r\nI expected it to compile and display an error page on 404.\r\n\r\n**Actual behavior:**\r\nIt wont complie and gives the aforementioned error. Tracing the error back to the top revealed:\r\n```\r\nError in src/kemal_names.cr:28 expanding macro\r\n  my_renderer \"error404\"\r\n.\r\n1. render \"src/views/#{\"error404\"}.slang ...\r\n```\r\n### Versions\r\nCrystal 0.24.2\r\nKemal 0.22.0\r\n\r\n### Additional Information\r\nIf I remove the call to error404.slang it compiles. Am I asking for something Kemal is not designed to do?\r\n\r\nThanks for pointing me in the right direction.","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/442","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/442/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/442/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/442/events","html_url":"https://github.com/kemalcr/kemal/issues/442","id":310149365,"node_id":"MDU6SXNzdWUzMTAxNDkzNjU=","number":442,"title":"Comment documentation on route definitions ","user":{"login":"Blacksmoke16","id":12136995,"node_id":"MDQ6VXNlcjEyMTM2OTk1","avatar_url":"https://avatars1.githubusercontent.com/u/12136995?v=4","gravatar_id":"","url":"https://api.github.com/users/Blacksmoke16","html_url":"https://github.com/Blacksmoke16","followers_url":"https://api.github.com/users/Blacksmoke16/followers","following_url":"https://api.github.com/users/Blacksmoke16/following{/other_user}","gists_url":"https://api.github.com/users/Blacksmoke16/gists{/gist_id}","starred_url":"https://api.github.com/users/Blacksmoke16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blacksmoke16/subscriptions","organizations_url":"https://api.github.com/users/Blacksmoke16/orgs","repos_url":"https://api.github.com/users/Blacksmoke16/repos","events_url":"https://api.github.com/users/Blacksmoke16/events{/privacy}","received_events_url":"https://api.github.com/users/Blacksmoke16/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-30T19:31:15Z","updated_at":"2018-04-03T15:33:38Z","closed_at":"2018-04-03T15:33:38Z","author_association":"CONTRIBUTOR","body":"### Description\r\n\r\nUsing comment documentation on route definitions does not get parsed/displayed after doing `crystal docs`\r\n\r\n### Steps to Reproduce\r\n\r\n1. Create a new kemal project\r\n2. Add a route with comment documentation on it\r\n3. Add another method also with comment documentation on it\r\n4. Run `crystal docs`\r\n5. Notice that only the method had documentation created.\r\n\r\n**Expected behavior:** Docs generated for the route definitions\r\n\r\n**Actual behavior:** It doesn't\r\n\r\n**Reproduces how often:** 100%\r\n\r\n### Versions\r\n\r\nCrystal 0.24.2\r\nKemal 0.22.0\r\n\r\n### Additional Information\r\n#### Example:\r\nroutes.cr\r\n```Crystal\r\nmodule Api2\r\n  # Defines the routes used in the app\r\n  class Routes\r\n      # Test route for getting json\r\n      get \"/\" do |env|\r\n        {name: \"Serdar\", age: 4141414}.to_json\r\n      end\r\n      # Test Method\r\n      def test\r\n      end\r\n  end\r\nend\r\n```\r\ngenerated class doc\r\n![image](https://user-images.githubusercontent.com/12136995/38150919-33959aa4-342f-11e8-8f4f-f0ec0b599be2.png)\r\n\r\n### Use Case\r\nI would like to use the auto generated doc comments on my route definitions to define what the endpoint is used for as well as route specific information, such as request body, auth required etc.\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/439","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/439/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/439/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/439/events","html_url":"https://github.com/kemalcr/kemal/issues/439","id":306357782,"node_id":"MDU6SXNzdWUzMDYzNTc3ODI=","number":439,"title":"Remove powered-by header","user":{"login":"dkimot","id":20249639,"node_id":"MDQ6VXNlcjIwMjQ5NjM5","avatar_url":"https://avatars0.githubusercontent.com/u/20249639?v=4","gravatar_id":"","url":"https://api.github.com/users/dkimot","html_url":"https://github.com/dkimot","followers_url":"https://api.github.com/users/dkimot/followers","following_url":"https://api.github.com/users/dkimot/following{/other_user}","gists_url":"https://api.github.com/users/dkimot/gists{/gist_id}","starred_url":"https://api.github.com/users/dkimot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkimot/subscriptions","organizations_url":"https://api.github.com/users/dkimot/orgs","repos_url":"https://api.github.com/users/dkimot/repos","events_url":"https://api.github.com/users/dkimot/events{/privacy}","received_events_url":"https://api.github.com/users/dkimot/received_events","type":"User","site_admin":false},"labels":[{"id":277058249,"node_id":"MDU6TGFiZWwyNzcwNTgyNDk=","url":"https://api.github.com/repos/kemalcr/kemal/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-03-19T07:31:19Z","updated_at":"2018-03-19T21:30:45Z","closed_at":"2018-03-19T19:41:27Z","author_association":"NONE","body":"I want to remove the X-Powered-By header, is there an easy or quick way to do that?","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/438","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/438/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/438/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/438/events","html_url":"https://github.com/kemalcr/kemal/issues/438","id":302120247,"node_id":"MDU6SXNzdWUzMDIxMjAyNDc=","number":438,"title":"Compatibility with next Crystal","user":{"login":"jwoertink","id":2391,"node_id":"MDQ6VXNlcjIzOTE=","avatar_url":"https://avatars1.githubusercontent.com/u/2391?v=4","gravatar_id":"","url":"https://api.github.com/users/jwoertink","html_url":"https://github.com/jwoertink","followers_url":"https://api.github.com/users/jwoertink/followers","following_url":"https://api.github.com/users/jwoertink/following{/other_user}","gists_url":"https://api.github.com/users/jwoertink/gists{/gist_id}","starred_url":"https://api.github.com/users/jwoertink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jwoertink/subscriptions","organizations_url":"https://api.github.com/users/jwoertink/orgs","repos_url":"https://api.github.com/users/jwoertink/repos","events_url":"https://api.github.com/users/jwoertink/events{/privacy}","received_events_url":"https://api.github.com/users/jwoertink/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-03-04T20:45:11Z","updated_at":"2018-03-07T12:17:15Z","closed_at":"2018-03-07T12:17:15Z","author_association":"CONTRIBUTOR","body":"### Description\r\n\r\nIt looks like [this PR](https://github.com/crystal-lang/crystal/pull/5183/files) changed the `JSON::Type` to `JSON::Any::Type`. This causes a breaking change \r\n\r\n```\r\nin lib/kemal/src/kemal/param_parser.cr:11: undefined constant JSON::Type\r\n\r\n    alias AllParamTypes = Nil | String | Int64 | Float64 | Bool | Hash(String, JSON::Type) | Array(JSON::Type)\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n1. Use the latest commit from crystal\r\n2. run a kemal app\r\n\r\n**Expected behavior:** Kemal to boot\r\n\r\n**Actual behavior:** Compile error\r\n\r\n### Versions\r\n\r\nLatest Kemal and latest crystal from master branch\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/437","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/437/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/437/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/437/events","html_url":"https://github.com/kemalcr/kemal/issues/437","id":300744945,"node_id":"MDU6SXNzdWUzMDA3NDQ5NDU=","number":437,"title":"Kemal site configuration","user":{"login":"lebogan","id":1024382,"node_id":"MDQ6VXNlcjEwMjQzODI=","avatar_url":"https://avatars3.githubusercontent.com/u/1024382?v=4","gravatar_id":"","url":"https://api.github.com/users/lebogan","html_url":"https://github.com/lebogan","followers_url":"https://api.github.com/users/lebogan/followers","following_url":"https://api.github.com/users/lebogan/following{/other_user}","gists_url":"https://api.github.com/users/lebogan/gists{/gist_id}","starred_url":"https://api.github.com/users/lebogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lebogan/subscriptions","organizations_url":"https://api.github.com/users/lebogan/orgs","repos_url":"https://api.github.com/users/lebogan/repos","events_url":"https://api.github.com/users/lebogan/events{/privacy}","received_events_url":"https://api.github.com/users/lebogan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-02-27T18:35:55Z","updated_at":"2018-03-25T19:12:44Z","closed_at":"2018-03-25T19:12:44Z","author_association":"NONE","body":"While I realize that Kemal is nowhere as opinionated as Rails or even Amber, as a newbie, I would like to have some kind of guideline on site directory structure. Like, are all files placed in src? Where do public files like css and js go? Should I put my views in src?\r\n\r\nI finally managed to get a simple site up and running, and I like the Sinatra-like simplicity; however, even Sinatra has some suggested directory structure. \r\n\r\nIs this practical? Can I help with this? I would love to see Kemal really take off like or better than Sinatra.\r\n\r\nThank you for this incredible framework!\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/436","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/436/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/436/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/436/events","html_url":"https://github.com/kemalcr/kemal/issues/436","id":298360847,"node_id":"MDU6SXNzdWUyOTgzNjA4NDc=","number":436,"title":"Index out of bounds with missing param","user":{"login":"jwoertink","id":2391,"node_id":"MDQ6VXNlcjIzOTE=","avatar_url":"https://avatars1.githubusercontent.com/u/2391?v=4","gravatar_id":"","url":"https://api.github.com/users/jwoertink","html_url":"https://github.com/jwoertink","followers_url":"https://api.github.com/users/jwoertink/followers","following_url":"https://api.github.com/users/jwoertink/following{/other_user}","gists_url":"https://api.github.com/users/jwoertink/gists{/gist_id}","starred_url":"https://api.github.com/users/jwoertink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jwoertink/subscriptions","organizations_url":"https://api.github.com/users/jwoertink/orgs","repos_url":"https://api.github.com/users/jwoertink/repos","events_url":"https://api.github.com/users/jwoertink/events{/privacy}","received_events_url":"https://api.github.com/users/jwoertink/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-02-19T18:00:18Z","updated_at":"2018-03-04T20:40:24Z","closed_at":"2018-03-04T20:40:24Z","author_association":"CONTRIBUTOR","body":"### Description\r\n\r\nIf you try to use a param key that doesn't exist, it looks like [this line](https://github.com/kemalcr/kemal/blob/master/src/kemal/exception_handler.cr#L15) is actually swallowing the real error. Instead of `KeyError:Missing hash key` you get `Index out of bounds`. \r\n\r\n### Steps to Reproduce\r\nIf you check out this example, you'll see I'm using `url[\"od\"]` instead of `url[\"id\"]`. \r\n\r\n```crystal\r\nrequire \"spec\"\r\nrequire \"kemal\"\r\nrequire \"spec-kemal\"\r\n\r\nENV[\"KEMAL_ENV\"] = \"test\"\r\n\r\nget \"/users/:id\" do |env|\r\n  \"This is users #{env.params.url[\"od\"]}\"\r\nend\r\n\r\nKemal.run\r\nat_exit { Kemal.stop }\r\n\r\ndescribe \"Test\" do\r\n  it \"does something weird\" do\r\n    get \"/users/1\"\r\n    response.status_code.should eq 200\r\n    response.body.should eq \"This is users 1\" \r\n  end\r\nend\r\n```\r\n**Expected behavior:**\r\nSee the error message\r\n`#<KeyError:Missing hash key: \"od\">` \r\n\r\n**Actual behavior:**\r\nSee the error message\r\n`Index out of bounds`\r\n\r\n**Reproduces how often:**\r\n100%\r\n\r\n### Versions\r\n\r\n```\r\nCrystal 0.24.1 (2018-01-27)\r\nLLVM: 5.0.1\r\nDefault target: x86_64-apple-macosx (10.13.3)\r\nKemal: 0.22.0\r\nspec-kemal: 0.4.0\r\n```\r\n\r\n### Additional Info\r\nCommenting out that `log` line then leads to [this line](https://github.com/kemalcr/kemal/blob/master/src/kemal/exception_handler.cr#L18). It seems that it's specifically `ex.inspect_with_backtrace` that is printing out this error. If I take out all calls to that, then I see the error message I would expect. A KeyError is a lot easier to solve than Index out of bounds.\r\n\r\n\r\n**EDIT**\r\nHere's the error I get when I run the spec:\r\n\r\n```\r\n[13:59PM] tester$ crystal spec/test_spec.cr \r\nE\r\n\r\nFailures:\r\n\r\n  1) Test does something weird\r\n\r\n       Index out of bounds\r\nError running at_exit handler: Index out of bounds\r\n```\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/434","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/434/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/434/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/434/events","html_url":"https://github.com/kemalcr/kemal/issues/434","id":295358102,"node_id":"MDU6SXNzdWUyOTUzNTgxMDI=","number":434,"title":"Weird routing issue","user":{"login":"jwoertink","id":2391,"node_id":"MDQ6VXNlcjIzOTE=","avatar_url":"https://avatars1.githubusercontent.com/u/2391?v=4","gravatar_id":"","url":"https://api.github.com/users/jwoertink","html_url":"https://github.com/jwoertink","followers_url":"https://api.github.com/users/jwoertink/followers","following_url":"https://api.github.com/users/jwoertink/following{/other_user}","gists_url":"https://api.github.com/users/jwoertink/gists{/gist_id}","starred_url":"https://api.github.com/users/jwoertink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jwoertink/subscriptions","organizations_url":"https://api.github.com/users/jwoertink/orgs","repos_url":"https://api.github.com/users/jwoertink/repos","events_url":"https://api.github.com/users/jwoertink/events{/privacy}","received_events_url":"https://api.github.com/users/jwoertink/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-02-08T01:53:46Z","updated_at":"2018-02-08T04:45:47Z","closed_at":"2018-02-08T04:45:47Z","author_association":"CONTRIBUTOR","body":"### Description\r\n\r\nI found a weird routing issue that I submitted to [Radix](https://github.com/luislavena/radix/issues/24), but I wanted to get your thoughts on this as well since it may affect a lot of kemal apps, or possibly change how routing is done.\r\n\r\n### Steps to Reproduce\r\nUsing this example\r\n```crystal\r\nrequire \"kemal\"\r\n\r\nget \"/test\" do |env|\r\n  puts \"test\"\r\nend\r\n\r\nget \"/test/:id\" do |env|\r\n  puts \"test #{env.params.url[\"id\"]}\"\r\nend\r\n\r\nKemal.run\r\n```\r\n\r\n```\r\ncurl localhost:3000/test            # 200\r\ncurl localhost:3000/test/1          # 200\r\ncurl localhost:3000/test.json     # 404\r\ncurl localhost:3000/test/1.json    # 200\r\n```\r\n\r\n### Ver
8000
sions\r\n\r\nCrystal 0.24.1\r\nKemal Master branch\r\nMacOS 10.13.3\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/432","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/432/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/432/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/432/events","html_url":"https://github.com/kemalcr/kemal/issues/432","id":290614083,"node_id":"MDU6SXNzdWUyOTA2MTQwODM=","number":432,"title":"undefined method 'content_type' for HTTP::Server::Response error","user":{"login":"lebogan","id":1024382,"node_id":"MDQ6VXNlcjEwMjQzODI=","avatar_url":"https://avatars3.githubusercontent.com/u/1024382?v=4","gravatar_id":"","url":"https://api.github.com/users/lebogan","html_url":"https://github.com/lebogan","followers_url":"https://api.github.com/users/lebogan/followers","following_url":"https://api.github.com/users/lebogan/following{/other_user}","gists_url":"https://api.github.com/users/lebogan/gists{/gist_id}","starred_url":"https://api.github.com/users/lebogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lebogan/subscriptions","organizations_url":"https://api.github.com/users/lebogan/orgs","repos_url":"https://api.github.com/users/lebogan/repos","events_url":"https://api.github.com/users/lebogan/events{/privacy}","received_events_url":"https://api.github.com/users/lebogan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-01-22T21:02:52Z","updated_at":"2018-01-26T12:23:59Z","closed_at":"2018-01-26T12:23:59Z","author_association":"NONE","body":"### Description\r\nTrying to build/run the example code in the *Filters* section.\r\n\r\n### Steps to Reproduce\r\nDirect copy/paste from the guide:\r\n```\r\nrequire \"kemal\"\r\n\r\nbefore_get \"/foo\" do |env|\r\n  puts \"Setting response content type\"\r\n  env.response.content_type = \"application/json\"\r\nend\r\n\r\nget \"/foo\" do |env|\r\n  puts env.response.content_type # => \"application/json\"\r\n  {\"name\": \"Kemal\"}.to_json\r\nend\r\n```\r\n**Expected behavior:** compile success\r\n\r\n**Actual behavior:** compile and spec error: undefined method 'content_type' for HTTP::Server::Response error\r\n\r\n**Reproduces how often:** every time I run a build or spec (KEMAL_ENV=test crystal spec --verbose)\r\n\r\n### Versions\r\nCrystal: 0.24.1\r\nKemal: 0.22.0\r\nFedora 26 Workstation \r\n\r\n### Additional Information\r\nThe error refers to HTTP::Server::Response not HTTP::Client::Response. Is this the correct response for the above code?\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/430","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/430/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/430/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/430/events","html_url":"https://github.com/kemalcr/kemal/issues/430","id":289498288,"node_id":"MDU6SXNzdWUyODk0OTgyODg=","number":430,"title":"How to let kemal run on multi cpu core ?","user":{"login":"bigbenz8","id":8120813,"node_id":"MDQ6VXNlcjgxMjA4MTM=","avatar_url":"https://avatars0.githubusercontent.com/u/8120813?v=4","gravatar_id":"","url":"https://api.github.com/users/bigbenz8","html_url":"https://github.com/bigbenz8","followers_url":"https://api.github.com/users/bigbenz8/followers","following_url":"https://api.github.com/users/bigbenz8/following{/other_user}","gists_url":"https://api.github.com/users/bigbenz8/gists{/gist_id}","starred_url":"https://api.github.com/users/bigbenz8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bigbenz8/subscriptions","organizations_url":"https://api.github.com/users/bigbenz8/orgs","repos_url":"https://api.github.com/users/bigbenz8/repos","events_url":"https://api.github.com/users/bigbenz8/events{/privacy}","received_events_url":"https://api.github.com/users/bigbenz8/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-01-18T04:08:40Z","updated_at":"2018-01-20T04:18:10Z","closed_at":"2018-01-19T12:16:44Z","author_association":"NONE","body":"When I run benchmark test, only one cpu core is on load, how should I make it use muti cpu cores ? Is there any plugin or middleWare to do this(something like nodejs-cluster)? ","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/429","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/429/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/429/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/429/events","html_url":"https://github.com/kemalcr/kemal/issues/429","id":287962227,"node_id":"MDU6SXNzdWUyODc5NjIyMjc=","number":429,"title":"Multiple workers","user":{"login":"patleb","id":7095781,"node_id":"MDQ6VXNlcjcwOTU3ODE=","avatar_url":"https://avatars0.githubusercontent.com/u/7095781?v=4","gravatar_id":"","url":"https://api.github.com/users/patleb","html_url":"https://github.com/patleb","followers_url":"https://api.github.com/users/patleb/followers","following_url":"https://api.github.com/users/patleb/following{/other_user}","gists_url":"https://api.github.com/users/patleb/gists{/gist_id}","starred_url":"https://api.github.com/users/patleb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/patleb/subscriptions","organizations_url":"https://api.github.com/users/patleb/orgs","repos_url":"https://api.github.com/users/patleb/repos","events_url":"https://api.github.com/users/patleb/events{/privacy}","received_events_url":"https://api.github.com/users/patleb/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-01-11T23:39:22Z","updated_at":"2018-01-12T11:30:55Z","closed_at":"2018-01-12T11:30:55Z","author_association":"NONE","body":"`reuse_port` option of `HTTP::Server#listen` is not available within `Kemal.run`. It would be useful to have it configurable through `Kemal.config.reuse_port` which would be used here:\r\n\r\n```ruby\r\n# kemal.cr --> line 69\r\n    config.server.not_nil!.listen(config.reuse_port) if config.env != \"test\" && config.server\r\n```\r\n\r\nThe main use case is to have several workers each running a Kemal server instance listening to the same port.","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/428","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/428/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/428/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/428/events","html_url":"https://github.com/kemalcr/kemal/issues/428","id":285236095,"node_id":"MDU6SXNzdWUyODUyMzYwOTU=","number":428,"title":"Accessing data in context storage safely","user":{"login":"HiImJulien","id":20932956,"node_id":"MDQ6VXNlcjIwOTMyOTU2","avatar_url":"https://avatars1.githubusercontent.com/u/20932956?v=4","gravatar_id":"","url":"https://api.github.com/users/HiImJulien","html_url":"https://github.com/HiImJulien","followers_url":"https://api.github.com/users/HiImJulien/followers","following_url":"https://api.github.com/users/HiImJulien/following{/other_user}","gists_url":"https://api.github.com/users/HiImJulien/gists{/gist_id}","starred_url":"https://api.github.com/users/HiImJulien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HiImJulien/subscriptions","organizations_url":"https://api.github.com/users/HiImJulien/orgs","repos_url":"https://api.github.com/users/HiImJulien/repos","events_url":"https://api.github.com/users/HiImJulien/events{/privacy}","received_events_url":"https://api.github.com/users/HiImJulien/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-12-31T02:38:41Z","updated_at":"2018-01-26T15:31:34Z","closed_at":"2018-01-26T15:30:17Z","author_association":"NONE","body":"### Description\r\n\r\nFor my first web application I thought of creating a simple blog engine, which uses JWT as authorization. Therefore I created a filter, which checks whether a token is present and is decodable.\r\n\r\nThe data of the given token is then stored in the context storage, in order to pass to the actual route handler.\r\n\r\nThe route then tries to access the token and handles differently depending on wether it is present or not. However, apparently, there's no way to check for a key's existence in context storage but using \r\nexception handlers?\r\n\r\n### Steps to Reproduce\r\n```crystal\r\nput \"/api/author\" do\r\n    author_id = env.get \"author_id\" # Raises an exception, when key is not present\r\nend\r\n\r\n```\r\n\r\n**Actual behavior:** [What actually happens]\r\nNot able to check for keys existence.\r\n\r\n**Reproduces how often:** [What percentage of the time does it reproduce?]\r\nEverytime.\r\n\r\n### Versions\r\n\r\n> Crystal 0.24.1 (2017-12-26)\r\n> \r\n> LLVM: 5.0.1\r\n> Default target: x86_64-apple-macosx\r\n> \r\n> macOS 10.13.2 High Sierra\r\n> MacBook (Retina, 12-inch, Early 2016)\r\n> \r\n\r\n### Additional information\r\nI am pretty new to Crystal (and Ruby); I just have little experience tinkering with Sinatra.\r\nP.S.: I love your work! Well done!","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/425","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/425/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/425/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/425/events","html_url":"https://github.com/kemalcr/kemal/issues/425","id":277514839,"node_id":"MDU6SXNzdWUyNzc1MTQ4Mzk=","number":425,"title":"Cannot run example code","user":{"login":"RubenBrocke","id":9658578,"node_id":"MDQ6VXNlcjk2NTg1Nzg=","avatar_url":"https://avatars1.githubusercontent.com/u/9658578?v=4","gravatar_id":"","url":"https://api.github.com/users/RubenBrocke","html_url":"https://github.com/RubenBrocke","followers_url":"https://api.github.com/users/RubenBrocke/followers","following_url":"https://api.github.com/users/RubenBrocke/following{/other_user}","gists_url":"https://api.github.com/users/RubenBrocke/gists{/gist_id}","starred_url":"https://api.github.com/users/RubenBrocke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RubenBrocke/subscriptions","organizations_url":"https://api.github.com/users/RubenBrocke/orgs","repos_url":"https://api.github.com/users/RubenBrocke/repos","events_url":"https://api.github.com/users/RubenBrocke/events{/privacy}","received_events_url":"https://api.github.com/users/RubenBrocke/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-28T19:46:58Z","updated_at":"2017-11-30T16:28:33Z","closed_at":"2017-11-30T16:28:33Z","author_association":"NONE","body":"### Description\r\n\r\nI am unable to reproduce the example on your website due to an error\r\n\r\n### Steps to Reproduce\r\n\r\n1. Copy the example\r\n2. Run the code using crystal run server.cr\r\n\r\n**Expected behavior:** \r\nGetting this message:\r\n[development] Kemal is ready to lead at http://0.0.0.0:3000\r\n2015-12-01 13:47:48 +0200 | 200 | GET / - (666µs)\r\n\r\n**Actual behavior:** [What actually happens]\r\nGetting this message:\r\n```\r\nKemal.run\r\n      ^~~\r\n\r\nin lib/kemal/src/kemal.cr:11: instantiating 'run(Nil)'\r\n\r\n  def self.run(port = nil)\r\n  ^\r\n\r\nin lib/kemal/src/kemal.cr:12: instantiating 'Kemal:Module#run(Nil)'\r\n\r\n    self.run port do\r\n         ^~~\r\n\r\nin lib/kemal/src/kemal.cr:55: instantiating 'send_file(HTTP::Server::Context, String)'\r\n\r\n          send_file env, file_path\r\n          ^~~~~~~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:100: instantiating 'File:Class#open(String)'\r\n\r\n  File.open(file_path) do |file|\r\n       ^~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:100: instantiating 'File:Class#open(String)'\r\n\r\n  File.open(file_path) do |file|\r\n       ^~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:111: 'Flate::Writer.new' is not expected to be invoked with a block, but a block was given\r\n\r\n      Flate::Writer.new(env.response) do |deflate|\r\n                    ^~~\r\n\r\n```\r\n\r\n\r\n### Versions\r\n\r\nHappens on version 0.21.0 of kemal\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/424","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/424/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/424/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/424/events","html_url":"https://github.com/kemalcr/kemal/issues/424","id":277215228,"node_id":"MDU6SXNzdWUyNzcyMTUyMjg=","number":424,"title":"How can I do wss instead of ws with kemal for websockets?","user":{"login":"codingphasedotcom","id":26421899,"node_id":"MDQ6VXNlcjI2NDIxODk5","avatar_url":"https://avatars0.githubusercontent.com/u/26421899?v=4","gravatar_id":"","url":"https://api.github.com/users/codingphasedotcom","html_url":"https://github.com/codingphasedotcom","followers_url":"https://api.github.com/users/codingphasedotcom/followers","following_url":"https://api.github.com/users/codingphasedotcom/following{/other_user}","gists_url":"https://api.github.com/users/codingphasedotcom/gists{/gist_id}","starred_url":"https://api.github.com/users/codingphasedotcom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codingphasedotcom/subscriptions","organizations_url":"https://api.github.com/users/codingphasedotcom/orgs","repos_url":"https://api.github.com/users/codingphasedotcom/repos","events_url":"https://api.github.com/users/codingphasedotcom/events{/privacy}","received_events_url":"https://api.github.com/users/codingphasedotcom/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-11-28T00:18:20Z","updated_at":"2017-11-30T16:28:48Z","closed_at":"2017-11-30T16:28:48Z","author_association":"NONE","body":"I'm getting some errors on heroku while using web sockets of kemal.\r\nhere the error i'm seeing \r\n\r\nMixed Content: The page at 'https://codingphasecrystal.herokuapp.com/' was loaded over HTTPS, but attempted to connect to the insecure WebSocket endpoint 'ws://codingphasecrystal.herokuapp.com/chat'. This request has been blocked; this endpoint must be available over WSS.\r\n\r\n(index):24 Uncaught DOMException: Failed to construct 'WebSocket': An insecure WebSocket connection may not be initiated from a page loaded over HTTPS.","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/423","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/423/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/423/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/423/events","html_url":"https://github.com/kemalcr/kemal/issues/423","id":276782164,"node_id":"MDU6SXNzdWUyNzY3ODIxNjQ=","number":423,"title":"Request environment in websocket route","user":{"login":"Superman132","id":25612884,"node_id":"MDQ6VXNlcjI1NjEyODg0","avatar_url":"https://avatars2.githubusercontent.com/u/25612884?v=4","gravatar_id":"","url":"https://api.github.com/users/Superman132","html_url":"https://github.com/Superman132","followers_url":"https://api.github.com/users/Superman132/followers","following_url":"https://api.github.com/users/Superman132/following{/other_user}","gists_url":"https://api.github.com/users/Superman132/gists{/gist_id}","starred_url":"https://api.github.com/users/Superman132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superman132/subscriptions","organizations_url":"https://api.github.com/users/Superman132/orgs","repos_url":"https://api.github.com/users/Superman132/repos","events_url":"https://api.github.com/users/Superman132/events{/privacy}","received_events_url":"https://api.github.com/users/Superman132/received_events","type":"User","site_admin":false},"labels":[{"id":277058249,"node_id":"MDU6TGFiZWwyNzcwNTgyNDk=","url":"https://api.github.com/repos/kemalcr/kemal/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-25T22:21:36Z","updated_at":"2017-11-26T17:35:35Z","closed_at":"2017-11-26T17:35:30Z","author_association":"NONE","body":"Can you access the request environment in a websocket route. I need to access the cookies of the request.\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/422","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/422/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/422/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/422/events","html_url":"https://github.com/kemalcr/kemal/issues/422","id":275833258,"node_id":"MDU6SXNzdWUyNzU4MzMyNTg=","number":422,"title":"can't compile fresh example app with kemal. ","user":{"login":"salzig","id":99911,"node_id":"MDQ6VXNlcjk5OTEx","avatar_url":"https://avatars0.githubusercontent.com/u/99911?v=4","gravatar_id":"","url":"https://api.github.com/users/salzig","html_url":"https://github.com/salzig","followers_url":"https://api.github.com/users/salzig/followers","following_url":"https://api.github.com/users/salzig/following{/other_user}","gists_url":"https://api.github.com/users/salzig/gists{/gist_id}","starred_url":"https://api.github.com/users/salzig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salzig/subscriptions","organizations_url":"https://api.github.com/users/salzig/orgs","repos_url":"https://api.github.com/users/salzig/repos","events_url":"https://api.github.com/users/salzig/events{/privacy}","received_events_url":"https://api.github.com/users/salzig/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-11-21T19:32:16Z","updated_at":"2017-11-21T19:40:53Z","closed_at":"2017-11-21T19:40:53Z","author_association":"NONE","body":"### Description\r\n\r\nCan't build example app \r\n\r\n### Steps to Reproduce\r\n\r\n```\r\ncrystal init app kemal_example\r\ncd kemal_example\r\n# change src/kemal_example.cr\r\n# change shard.yml\r\nshards install\r\ncrystal run src/kemal_example.cr\r\n```\r\n\r\n`shard.yml`\r\n```\r\nname: kemal_example\r\nversion: 0.1.0\r\n\r\nauthors:\r\n  - Ben Rexin <some@example.org>\r\n\r\ntargets:\r\n  kemal_example:\r\n    main: src/kemal_example.cr\r\n\r\ndependencies:\r\n  kemal:\r\n    github: kemalcr/kemal\r\n    branch: master\r\n\r\ncrystal: 0.23.1\r\n\r\nlicense: MIT\r\n```\r\n\r\n`src/kemal_example.cr`\r\n```\r\nrequire \"kemal\"\r\n\r\nget \"/\" do\r\n  \"Hello World!\"\r\nend\r\n\r\nKemal.run\r\n\r\n```\r\n\r\n**Expected behavior:** \r\n\r\nI expected it to compile\r\n\r\n**Actual behavior:** \r\n\r\n```\r\nError in src/kemal_example.cr:7: instantiating 'Kemal:Module#run()'\r\n\r\nKemal.run\r\n      ^~~\r\n\r\nin lib/kemal/src/kemal.cr:19: instantiating 'Kemal:Module#run(Nil)'\r\n\r\n    self.run(nil)\r\n         ^~~\r\n\r\nin lib/kemal/src/kemal.cr:12: instantiating 'Kemal:Module#run(Nil)'\r\n\r\n    self.run port do\r\n         ^~~\r\n\r\nin lib/kemal/src/kemal.cr:55: instantiating 'send_file(HTTP::Server::Context, String)'\r\n\r\n          send_file env, file_path\r\n          ^~~~~~~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:126: instantiating 'File:Class#open(String)'\r\n\r\n  File.open(file_path) do |file|\r\n       ^~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:126: instantiating 'File:Class#open(String)'\r\n\r\n  File.open(file_path) do |file|\r\n       ^~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:137: undefined method 'open' for Flate::Writer:Class\r\n\r\n      Flate::Writer.open(env.response) do |deflate|\r\n```\r\n\r\n**Reproduces how often:** \r\n\r\nso far 100%\r\n\r\n### Versions\r\n\r\n- Crystal 0.23.1 (2017-10-12) LLVM 4.0.1","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/421","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/421/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/421/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/421/events","html_url":"https://github.com/kemalcr/kemal/issues/421","id":275161618,"node_id":"MDU6SXNzdWUyNzUxNjE2MTg=","number":421,"title":"select[multiple] doesnt work with multipart/form-data","user":{"login":"codenoid","id":14269809,"node_id":"MDQ6VXNlcjE0MjY5ODA5","avatar_url":"https://avatars3.githubusercontent.com/u/14269809?v=4","gravatar_id":"","url":"https://api.github.com/users/codenoid","html_url":"https://github.com/codenoid","followers_url":"https://api.github.com/users/codenoid/followers","following_url":"https://api.github.com/users/codenoid/following{/other_user}","gists_url":"https://api.github.com/users/codenoid/gists{/gist_id}","starred_url":"https://api.github.com/users/codenoid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codenoid/subscriptions","organizations_url":"https://api.github.com/users/codenoid/orgs","repos_url":"https://api.github.com/users/codenoid/repos","events_url":"https://api.github.com/users/codenoid/events{/privacy}","received_events_url":"https://api.github.com/users/codenoid/received_events","type":"User","site_admin":false},"labels":[{"id":277058244,"node_id":"MDU6TGFiZWwyNzcwNTgyNDQ=","url":"https://api.github.com/repos/kemalcr/kemal/labels/bug","name":"bug","color":"fc2929","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-11-19T14:07:00Z","updated_at":"2017-11-20T14:48:57Z","closed_at":"2017-11-20T14:47:17Z","author_association":"NONE","body":"### Description\r\n\r\nI created a form, with input [type = \"file\"] and select [multiple] in it, but when receiving value from select [multiple], I only get 1 value (when I choose more than 1 in the browser)\r\n\r\n### Steps to Reproduce\r\nHTML :\r\n\r\n```\r\n<form method=\"post\" action=\"\"  enctype=\"multipart/form-data\">\r\n<input name=\"hubla\" type=\"file\">\r\n<select multiple class=\"form-control for_person\" name=\"person[]\">\r\n     <option value=\"val1\" selected>val1</option>\r\n     <option value=\"val2\" selected>val2</option>\r\n     <option value=\"val3\">val3</option>\r\n</select> \r\n<input type=\"submit\" value=\"Reproduce This Bug !\">\r\n</form>\r\n```\r\n\r\nKemal: (server side)\r\n```\r\npost \"/\" do |env|\r\n   puts env.params.body\r\n   puts env.params.body[\"person[]\"]\r\n   puts \"---\"\r\n   puts env.params.body.fetch_all(\"person[]\")\r\nend\r\n```\r\nresult : \r\n```\r\nperson%5B%5D=val1\r\nval1\r\n---\r\n[\"val1\"]\r\n```\r\n\r\nExpected result : \r\n\r\n```\r\nperson%5B%5D=val1&person%5B%5D=val2\r\nval1\r\n---\r\n[\"val1\", \"val2\"]\r\n```\r\n\r\n### Versions\r\n\r\n1. Crystal 0.23.1\r\n2. Kemal 0.21.0\r\n3. Firefox Quantum 57.0 (Chrome too, and \"other\" browser, imho)","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/420","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/420/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/420/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/420/events","html_url":"https://github.com/kemalcr/kemal/issues/420","id":272374462,"node_id":"MDU6SXNzdWUyNzIzNzQ0NjI=","number":420,"title":"before_all(CORS setup) is not applied to OPTIONS request ?","user":{"login":"joaumg","id":7634886,"node_id":"MDQ6VXNlcjc2MzQ4ODY=","avatar_url":"https://avatars2.githubusercontent.com/u/7634886?v=4","gravatar_id":"","url":"https://api.github.com/users/joaumg","html_url":"https://github.com/joaumg","followers_url":"https://api.github.com/users/joaumg/followers","following_url":"https://api.github.com/users/joaumg/following{/other_user}","gists_url":"https://api.github.com/users/joaumg/gists{/gist_id}","starred_url":"https://api.github.com/users/joaumg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joaumg/subscriptions","organizations_url":"https://api.github.com/users/joaumg/orgs","repos_url":"https://api.github.com/users/joaumg/repos","events_url":"https://api.github.com/users/joaumg/events{/privacy}","received_events_url":"https://api.github.com/users/joaumg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-11-08T22:34:00Z","updated_at":"2017-11-10T17:47:03Z","closed_at":"2017-11-09T20:30:40Z","author_association":"NONE","body":"### Description\r\n\r\nDoing a CORS request from foo.com to bar.com in a POST endpoint fails, even with the following code:\r\n\r\n```\r\nbefore_all do |env|\r\n  env.response.headers[\"Access-Control-Allow-Origin\"] = \"*\"\r\nend\r\n\r\npost \"/x\" do |env|\r\n  # some code\r\nend\r\n```\r\n\r\nGET requests do work as intended.\r\n\r\nWhat is odd, is that the OPTIONS request returns a 404... in fact doing a curl request returns the same\r\n\r\n    Request URL: http://.../x\r\n    Request Method: OPTIONS\r\n    Status Code: 404 Not Found\r\n\r\n**Expected behavior:** The endpoint should be resolved.\r\n\r\n**Actual behavior:** OPTIONS get's a 404, POST isn't done.\r\n\r\n**Reproduces how often:** 100%\r\n\r\n### Versions\r\n\r\nCrystal 0.23.1 [e2a1389] (2017-07-13) LLVM 3.8.1\r\nKemal 0.21.0\r\nDebian 9 (stretch)\r\n\r\n### Edit\r\n\r\nDoing a curl request:\r\n\r\n    curl -X POST http://.../x works, so the problem is really the OPTIONS verb.\r\n\r\nLooking at Kemal's source code, there is indeed a OPTIONS method:\r\n\r\nhttps://github.com/kemalcr/kemal/blob/210e2c0801294e1d013d4120e3b71292e39d4f72/src/kemal/dsl.cr#L9\r\n\r\nShould this be auto-created for every POST request ?\r\nOr is up to the dev to do it for each POST method he creates ? If so what should be \"sent back?\" besides the CORS headers?","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/419","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/419/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/419/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/419/events","html_url":"https://github.com/kemalcr/kemal/issues/419","id":272349489,"node_id":"MDU6SXNzdWUyNzIzNDk0ODk=","number":419,"title":"Failing to install Kemal","user":{"login":"StormFire-Technologies","id":32417338,"node_id":"MDQ6VXNlcjMyNDE3MzM4","avatar_url":"https://avatars3.githubusercontent.com/u/32417338?v=4","gravatar_id":"","url":"https://api.github.com/users/StormFire-Technologies","html_url":"https://github.com/StormFire-Technologies","followers_url":"https://api.github.com/users/StormFire-Technologies/followers","following_url":"https://api.github.com/users/StormFire-Technologies/following{/other_user}","gists_url":"https://api.github.com/users/StormFire-Technologies/gists{/gist_id}","starred_url":"https://api.github.com/users/StormFire-Technologies/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StormFire-Technologies/subscriptions","organizations_url":"https://api.github.com/users/StormFire-Technologies/orgs","repos_url":"https://api.github.com/users/StormFire-Technologies/repos","events_url":"https://api.github.com/users/StormFire-Technologies/events{/privacy}","received_events_url":"https://api.github.com/users/StormFire-Technologies/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":23,"created_at":"2017-11-08T21:06:39Z","updated_at":"2017-11-11T21:05:49Z","closed_at":"2017-11-11T21:05:49Z","author_association":"NONE","body":"I am running crystal version 0.23.1 and trying to install the latest version of Kemal but when I add kemal to my dependencies and then run Shards Install it gives me the error `Failed to clone https://github.com/kemalcr/kemal.git`\r\n","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/418","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/418/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/418/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/418/events","html_url":"https://github.com/kemalcr/kemal/issues/418","id":271966067,"node_id":"MDU6SXNzdWUyNzE5NjYwNjc=","number":418,"title":"Kemal fails to run","user":{"login":"AleffSouza","id":11286702,"node_id":"MDQ6VXNlcjExMjg2NzAy","avatar_url":"https://avatars3.githubusercontent.com/u/11286702?v=4","gravatar_id":"","url":"https://api.github.com/users/AleffSouza","html_url":"https://github.com/AleffSouza","followers_url":"https://api.github.com/users/AleffSouza/followers","following_url":"https://api.github.com/users/AleffSouza/following{/other_user}","gists_url":"https://api.github.com/users/AleffSouza/gists{/gist_id}","starred_url":"https://api.github.com/users/AleffSouza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AleffSouza/subscriptions","organizations_url":"https://api.github.com/users/AleffSouza/orgs","repos_url":"https://api.github.com/users/AleffSouza/repos","events_url":"https://api.github.com/users/AleffSouza/events{/privacy}","received_events_url":"https://api.github.com/users/AleffSouza/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-11-07T20:07:42Z","updated_at":"2017-11-13T14:16:23Z","closed_at":"2017-11-13T14:16:23Z","author_association":"NONE","body":"I have started to explore kemal and when I run the most basic example I got a compiler error.\n\nI think the last commit has broken the building cause It's failing exactly what the commit 902d87c proposes to change. \n\n```\nlib/kemal/src/helpers/helpers.cr:137 undefined method open for Flate::Writer::Class\n```","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/417","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/417/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/417/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/417/events","html_url":"https://github.com/kemalcr/kemal/issues/417","id":271728587,"node_id":"MDU6SXNzdWUyNzE3Mjg1ODc=","number":417,"title":"Error compile example Cemal?","user":{"login":"nesteg","id":33444930,"node_id":"MDQ6VXNlcjMzNDQ0OTMw","avatar_url":"https://avatars0.githubusercontent.com/u/33444930?v=4","gravatar_id":"","url":"https://api.github.com/users/nesteg","html_url":"https://github.com/nesteg","followers_url":"https://api.github.com/users/nesteg/followers","following_url":"https://api.github.com/users/nesteg/following{/other_user}","gists_url":"https://api.github.com/users/nesteg/gists{/gist_id}","starred_url":"https://api.github.com/users/nesteg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nesteg/subscriptions","organizations_url":"https://api.github.com/users/nesteg/orgs","repos_url":"https://api.github.com/users/nesteg/repos","events_url":"https://api.github.com/users/nesteg/events{/privacy}","received_events_url":"https://api.github.com/users/nesteg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locke
4539
d":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2017-11-07T06:59:24Z","updated_at":"2017-11-07T15:49:33Z","closed_at":"2017-11-07T08:23:47Z","author_association":"NONE","body":"I'm Write web-cemal.cr >>\r\n\"require \"kemal\"\r\n\r\nget \"/\" do\r\n  \"Hello World!\"\r\nend\r\n\r\nKemal.run\"\r\n\r\nthen command \"crystal run src/web-kemal.cr\"\r\n and get error:undefined method 'open' for Flate::Writer:Class\r\n???((:\r\nLinux U-buntu on Windows 10\r\n\r\nCrystal 0.23.1 [e2a1389] (2017-07-13) LLVM 3.8.1","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/416","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/416/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/416/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/416/events","html_url":"https://github.com/kemalcr/kemal/issues/416","id":271429259,"node_id":"MDU6SXNzdWUyNzE0MjkyNTk=","number":416,"title":"building with crystal 0.24","user":{"login":"kostya","id":95060,"node_id":"MDQ6VXNlcjk1MDYw","avatar_url":"https://avatars0.githubusercontent.com/u/95060?v=4","gravatar_id":"","url":"https://api.github.com/users/kostya","html_url":"https://github.com/kostya","followers_url":"https://api.github.com/users/kostya/followers","following_url":"https://api.github.com/users/kostya/following{/other_user}","gists_url":"https://api.github.com/users/kostya/gists{/gist_id}","starred_url":"https://api.github.com/users/kostya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kostya/subscriptions","organizations_url":"https://api.github.com/users/kostya/orgs","repos_url":"https://api.github.com/users/kostya/repos","events_url":"https://api.github.com/users/kostya/events{/privacy}","received_events_url":"https://api.github.com/users/kostya/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-11-06T10:40:19Z","updated_at":"2017-11-06T17:34:40Z","closed_at":"2017-11-06T17:34:40Z","author_association":"NONE","body":"```\r\nKemal.run\r\n      ^~~\r\n\r\nin lib/kemal/src/kemal.cr:12: instantiating 'Kemal:Module#run(Nil)'\r\n\r\n    self.run port do\r\n         ^~~\r\n\r\nin lib/kemal/src/kemal.cr:55: instantiating 'send_file(HTTP::Server::Context, String)'\r\n\r\n          send_file env, file_path\r\n          ^~~~~~~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:109: instantiating 'File:Class#open(String)'\r\n\r\n  File.open(file_path) do |file|\r\n       ^~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:109: instantiating 'File:Class#open(String)'\r\n\r\n  File.open(file_path) do |file|\r\n       ^~~~\r\n\r\nin lib/kemal/src/kemal/helpers/helpers.cr:120: 'Flate::Writer.new' is not expected to be invoked with a block, but a block was given\r\n\r\n      Flate::Writer.new(env.response) do |deflate|\r\n                    ^~~\r\n```","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/415","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/415/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/415/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/415/events","html_url":"https://github.com/kemalcr/kemal/issues/415","id":268503688,"node_id":"MDU6SXNzdWUyNjg1MDM2ODg=","number":415,"title":"Gracefully close websocket connections on server INT","user":{"login":"danielwestendorf","id":44478,"node_id":"MDQ6VXNlcjQ0NDc4","avatar_url":"https://avatars2.githubusercontent.com/u/44478?v=4","gravatar_id":"","url":"https://api.github.com/users/danielwestendorf","html_url":"https://github.com/danielwestendorf","followers_url":"https://api.github.com/users/danielwestendorf/followers","following_url":"https://api.github.com/users/danielwestendorf/following{/other_user}","gists_url":"https://api.github.com/users/danielwestendorf/gists{/gist_id}","starred_url":"https://api.github.com/users/danielwestendorf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielwestendorf/subscriptions","organizations_url":"https://api.github.com/users/danielwestendorf/orgs","repos_url":"https://api.github.com/users/danielwestendorf/repos","events_url":"https://api.github.com/users/danielwestendorf/events{/privacy}","received_events_url":"https://api.github.com/users/danielwestendorf/received_events","type":"User","site_admin":false},"labels":[{"id":277058249,"node_id":"MDU6TGFiZWwyNzcwNTgyNDk=","url":"https://api.github.com/repos/kemalcr/kemal/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2017-10-25T18:35:55Z","updated_at":"2017-11-02T15:38:08Z","closed_at":"2017-11-02T15:38:08Z","author_association":"NONE","body":"Given the websocket recipe from the cookbook\r\n\r\n```cyrstal-lang\r\nrequire \"kemal\"\r\n\r\nmessages = [] of String\r\nsockets = [] of HTTP::WebSocket\r\n\r\nws \"/\" do |socket|\r\n  sockets.push socket\r\n\r\n  # Handle incoming message and dispatch it to all connected clients\r\n  socket.on_message do |message|\r\n    messages.push message\r\n    sockets.each do |a_socket|\r\n      a_socket.send messages.to_json\r\n    end\r\n  end\r\n\r\n  # Handle disconnection and clean sockets\r\n  socket.on_close do |_|\r\n    sockets.delete(socket)\r\n    puts \"Closing Socket: #{socket}\"\r\n  end\r\nend\r\n\r\nKemal.run\r\n```\r\n\r\nWhen a client disconnects, the `HTTP::Websocket#on_close` block is executed. 👍 \r\n\r\nHowever, when the server receives an `INT` signal, the same code block is not executed. This prevents any cleanup from happening that might be handled in the `#on_close` block.\r\n\r\nI've tried trapping on `INT` with no success:\r\n```crystal-lang\r\nSignal::INT.trap do\r\n  puts \"Shutting down!\"\r\n  sockets.each do |socket|\r\n    socket.close\r\n  end\r\nend\r\n```\r\n\r\nAre there facilities to invoke the websocket's `#on_close` block before shutting down the server completely?","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/414","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/414/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/414/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/414/events","html_url":"https://github.com/kemalcr/kemal/issues/414","id":267304040,"node_id":"MDU6SXNzdWUyNjczMDQwNDA=","number":414,"title":"A problem with OpenSSL","user":{"login":"kendim","id":31260760,"node_id":"MDQ6VXNlcjMxMjYwNzYw","avatar_url":"https://avatars0.githubusercontent.com/u/31260760?v=4","gravatar_id":"","url":"https://api.github.com/users/kendim","html_url":"https://github.com/kendim","followers_url":"https://api.github.com/users/kendim/followers","following_url":"https://api.github.com/users/kendim/following{/other_user}","gists_url":"https://api.github.com/users/kendim/gists{/gist_id}","starred_url":"https://api.github.com/users/kendim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendim/subscriptions","organizations_url":"https://api.github.com/users/kendim/orgs","repos_url":"https://api.github.com/users/kendim/repos","events_url":"https://api.github.com/users/kendim/events{/privacy}","received_events_url":"https://api.github.com/users/kendim/received_events","type":"User","site_admin":false},"labels":[{"id":277058249,"node_id":"MDU6TGFiZWwyNzcwNTgyNDk=","url":"https://api.github.com/repos/kemalcr/kemal/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-20T21:01:25Z","updated_at":"2017-10-23T11:08:18Z","closed_at":"2017-10-23T11:08:18Z","author_association":"NONE","body":"There is a problem with OpenSSL while running Kemal. I did not install OpenSSL, the problem is obviously caused by this. But i want to use LibreSSL. In this case what should it be?\r\n\r\n`O-penS-S-L-5858S-S-L-5858C-ontext5858S-erver.o: In function 'add_options':\r\n/usr/lib64/crystal/openssl/ssl/context.cr:274: undefined reference to 'SSL_CTX_set_options'\r\ncollect2: hata: ld çıkış durumu 1 ile döndü`\r\n`Error: execution of command failed with code: 1: 'cc \"${@}\" -o '/home/kendim/.cache/crystal/crystal-run-art.tmp'  -rdynamic  -lz 'command -v pkg-config > /dev/null && pkg-config --libs libssl || printf %s '-lssl -lcrypto'' 'command -v pkg-config > /dev/null && pkg-config --libs libcrypto || printf %s '-lcrypto'' -lpcre -lm -lgc -lpthread /usr/lib64/crystal/ext/libcrystal.a -levent -lrt -ldl -L/usr/lib -L/usr/local/lib'`\r\nHere is the output.","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/412","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/412/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/412/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/412/events","html_url":"https://github.com/kemalcr/kemal/issues/412","id":263989389,"node_id":"MDU6SXNzdWUyNjM5ODkzODk=","number":412,"title":"Build on crystal-HEAD","user":{"login":"bararchy","id":1631073,"node_id":"MDQ6VXNlcjE2MzEwNzM=","avatar_url":"https://avatars3.githubusercontent.com/u/1631073?v=4","gravatar_id":"","url":"https://api.github.com/users/bararchy","html_url":"https://github.com/bararchy","followers_url":"https://api.github.com/users/bararchy/followers","following_url":"https://api.github.com/users/bararchy/following{/other_user}","gists_url":"https://api.github.com/users/bararchy/gists{/gist_id}","starred_url":"https://api.github.com/users/bararchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bararchy/subscriptions","organizations_url":"https://api.github.com/users/bararchy/orgs","repos_url":"https://api.github.com/users/bararchy/repos","events_url":"https://api.github.com/users/bararchy/events{/privacy}","received_events_url":"https://api.github.com/users/bararchy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-10-09T18:39:35Z","updated_at":"2017-10-09T18:55:41Z","closed_at":"2017-10-09T18:41:08Z","author_association":"NONE","body":"Seems to fail:\r\n\r\n```\r\nin lib/kemal/src/kemal/helpers/helpers.cr:137: 'Flate::Writer.new' is not expected to be invoked with a block, but a block was given\r\n\r\n      Flate::Writer.new(env.response) do |deflate|\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/411","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/411/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/411/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/411/events","html_url":"https://github.com/kemalcr/kemal/issues/411","id":263658341,"node_id":"MDU6SXNzdWUyNjM2NTgzNDE=","number":411,"title":"Route namespace / prefix ?","user":{"login":"blocknotes","id":6893256,"node_id":"MDQ6VXNlcjY4OTMyNTY=","avatar_url":"https://avatars2.githubusercontent.com/u/6893256?v=4","gravatar_id":"","url":"https://api.github.com/users/blocknotes","html_url":"https://github.com/blocknotes","followers_url":"https://api.github.com/users/blocknotes/followers","following_url":"https://api.github.com/users/blocknotes/following{/other_user}","gists_url":"https://api.github.com/users/blocknotes/gists{/gist_id}","starred_url":"https://api.github.com/users/blocknotes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blocknotes/subscriptions","organizations_url":"https://api.github.com/users/blocknotes/orgs","repos_url":"https://api.github.com/users/blocknotes/repos","events_url":"https://api.github.com/users/blocknotes/events{/privacy}","received_events_url":"https://api.github.com/users/blocknotes/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-10-07T17:34:16Z","updated_at":"2017-10-07T17:42:50Z","closed_at":"2017-10-07T17:38:28Z","author_association":"NONE","body":"Is it possible to set a prefix for a group of routes?\r\nSomething like Rails namespacing:\r\n```\r\n  namespace :api do\r\n    namespace :v1 do\r\n      # ...\r\n    end\r\n  end\r\n```\r\nCurrently I'm doing:\r\n```\r\n  PREFIX = \"/api/v1\"\r\n  get \"#{PREFIX}/posts\" do\r\n    # ...\r\n  end\r\n  get \"#{PREFIX}/authors\" do\r\n    # ...\r\n  end\r\n```","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/404","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/404/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/404/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/404/events","html_url":"https://github.com/kemalcr/kemal/issues/404","id":260595003,"node_id":"MDU6SXNzdWUyNjA1OTUwMDM=","number":404,"title":"Can't starting \"hello, world\" app.","user":{"login":"spudro228","id":20732536,"node_id":"MDQ6VXNlcjIwNzMyNTM2","avatar_url":"https://avatars3.githubusercontent.com/u/20732536?v=4","gravatar_id":"","url":"https://api.github.com/users/spudro228","html_url":"https://github.com/spudro228","followers_url":"https://api.github.com/users/spudro228/followers","following_url":"https://api.github.com/users/spudro228/following{/other_user}","gists_url":"https://api.github.com/users/spudro228/gists{/gist_id}","starred_url":"https://api.github.com/users/spudro228/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spudro228/subscriptions","organizations_url":"https://api.github.com/users/spudro228/orgs","repos_url":"https://api.github.com/users/spudro228/repos","events_url":"https://api.github.com/users/spudro228/events{/privacy}","received_events_url":"https://api.github.com/users/spudro228/received_events","type":"User","site_admin":false},"labels":[{"id":277058249,"node_id":"MDU6TGFiZWwyNzcwNTgyNDk=","url":"https://api.github.com/repos/kemalcr/kemal/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-09-26T11:50:26Z","updated_at":"2017-09-26T13:51:45Z","closed_at":"2017-09-26T13:23:13Z","author_association":"NONE","body":"Hi!\r\nRun the command: `crystal build ./src/your_app.cr`\r\nAnd I get an error:\r\n> /usr/bin/ld: cannot find -lz\r\ncollect2: error: ld returned 1 exit status\r\nError: execution of command failed with code: 1: `cc \"${@}\" -o '/home/spudro/cristal/your_app/your_app'  -rdynamic  -lz `command -v p\r\nkg-config > /dev/null && pkg-config --libs libssl || printf %s '-lssl -lcrypto'` `command -v pkg-config > /dev/null && pkg-config --l\r\nibs libcrypto || printf %s '-lcrypto'` -lpcre -lm -lgc -lpthread /opt/crystal/src/ext/libcrystal.a -levent -lrt -ldl -L/usr/lib -L/us\r\nr/local/lib`\r\n\r\n`ldconfig -p | grep libssl` returned\r\n\r\n>  libssl3.so (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libssl3.so\r\n        libssl.so.1.1 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libssl.so.1.1\r\n        libssl.so.1.0.0 (libc6,x86-64) => /lib/x86_64-linux-gnu/libssl.so.1.0.0\r\n        libssl.so (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libssl.so\r\n\r\nOS: Ubuntu 16.04 xenial","score":1.0},{"url":"https://api.github.com/repos/kemalcr/kemal/issues/402","repository_url":"https://api.github.com/repos/kemalcr/kemal","labels_url":"https://api.github.com/repos/kemalcr/kemal/issues/402/labels{/name}","comments_url":"https://api.github.com/repos/kemalcr/kemal/issues/402/comments","events_url":"https://api.github.com/repos/kemalcr/kemal/issues/402/events","html_url":"https://github.com/kemalcr/kemal/issues/402","id":259940050,"node_id":"MDU6SXNzdWUyNTk5NDAwNTA=","number":402,"title":"Class/instance methods as route handlers","user":{"login":"n7olkachev","id":3993345,"node_id":"MDQ6VXNlcjM5OTMzNDU=","avatar_url":"https://avatars3.githubusercontent.com/u/3993345?v=4","gravatar_id":"","url":"https://api.github.com/users/n7olkachev","html_url":"https://github.com/n7olkachev","followers_url":"https://api.github.com/users/n7olkachev/followers","following_url":"https://api.github.com/users/n7olkachev/following{/other_user}","gists_url":"https://api.github.com/users/n7olkachev/gists{/gist_id}","starred_url":"https://api.github.com/users/n7olkachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n7olkachev/subscriptions","organizations_url":"https://api.github.com/users/n7olkachev/orgs","repos_url":"https://api.github.com/users/n7olkachev/repos","events_url":"https://api.github.com/users/n7olkachev/events{/privacy}","received_events_url":"https://api.github.com/users/n7olkachev/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-09-22T21:18:19Z","updated_at":"2017-09-23T16:11:14Z","closed_at":"2017-09-23T16:11:14Z","author_association":"NONE","body":"Example:\r\n```\r\nget \"/\", HomeController, :index\r\n```\r\nI would like to work on PR, if you are interested in it.","score":1.0}]}
0

