HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 14 Nov 2020 21:08:52 GMT
Link: <https://api.github.com/search/issues?q=https%3A%2F%2Fgithub.com%2Fkeystonejs%2Fkeystone+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=https%3A%2F%2Fgithub.com%2Fkeystonejs%2Fkeystone+type%3Aissue+state%3Aclosed&page=26>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
Vary: Accept, Authorization, Cookie, X-GitHub-OTP
Vary: Accept-Encoding, Accept, X-Requested-With
Vary: Accept-Encoding
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D91C:78A3:42B0E40:4CCB972:5FB04764
X-Oauth-Scopes: repo
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 0
X-Ratelimit-Reset: 1605388137
X-Ratelimit-Used: 33
X-Xss-Protection: 1; mode=block

1df20
{"total_count":768,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3994","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3994/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3994/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3994/events","html_url":"https://github.com/keystonejs/keystone/issues/3994","id":725480815,"node_id":"MDU6SXNzdWU3MjU0ODA4MTU=","number":3994,"title":"KnexAdapter: TypeError: Cannot read property 'find' of undefined","user":{"login":"karimkawambwa","id":4308339,"node_id":"MDQ6VXNlcjQzMDgzMzk=","avatar_url":"https://avatars1.githubusercontent.com/u/4308339?v=4","gravatar_id":"","url":"https://api.github.com/users/karimkawambwa","html_url":"https://github.com/karimkawambwa","followers_url":"https://api.github.com/users/karimkawambwa/followers","following_url":"https://api.github.com/users/karimkawambwa/following{/other_user}","gists_url":"https://api.github.com/users/karimkawambwa/gists{/gist_id}","starred_url":"https://api.github.com/users/karimkawambwa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karimkawambwa/subscriptions","organizations_url":"https://api.github.com/users/karimkawambwa/orgs","repos_url":"https://api.github.com/users/karimkawambwa/repos","events_url":"https://api.github.com/users/karimkawambwa/events{/privacy}","received_events_url":"https://api.github.com/users/karimkawambwa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-10-20T11:19:42Z","updated_at":"2020-10-20T15:16:09Z","closed_at":"2020-10-20T15:16:08Z","author_association":"NONE","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nStarting a new project and running `keystone dev` results in the error `Error: Cannot read property 'find' of undefined`. Looks like the passed down `refs` is undefined at times. \r\n\r\nThe changes was here -> https://github.com/keystonejs/keystone/commit/ca28681ca23c74bc57041fa36c20b93a4520e762\r\n\r\n## To Reproduce\r\n\r\nCreate a project using create-keystone-app with the knex adapter.\r\nRun dev mode `keystone dev`\r\n\r\n## Expected behaviour\r\n\r\nThe app to start.\r\n\r\n## System information\r\n\r\nnode 14.14.0\r\n\r\n## Additional context\r\n\r\n```\r\nbackend_1   | \r\nbackend_1   | > research-backend@5.0.3 dev /src\r\nbackend_1   | > keystone dev\r\nbackend_1   | \r\nbackend_1   | - Initialising Keystone CLI\r\nbackend_1   | ℹ Command: keystone dev\r\nbackend_1   | -  \r\nbackend_1   | ✔ Validated project entry file ./index.js\r\nbackend_1   | -  \r\nbackend_1   | ✔ Keystone server listening on port 3000\r\nbackend_1   | ✔ Initialised Keystone instance\r\nbackend_1   | - Connecting to database\r\nbackend_1   | ✖ Connecting to database\r\nbackend_1   | Error: Cannot read property 'find' of undefined\r\nbackend_1   |     at resolveAllKeys (/src/node_modules/@keystonejs/utils/dist/utils.cjs.dev.js:54:19)\r\nbackend_1   |     at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\nbackend_1   |     at async executeDefaultServer (/src/node_modules/@keystonejs/keystone/bin/utils.js:114:3) {\r\nbackend_1   |   errors: {\r\nbackend_1   |     KnexAdapter: TypeError: Cannot read property 'find' of undefined\r\nbackend_1   |         at /src/node_modules/@keystonejs/adapter-knex/lib/adapter-knex.js:276:31\r\nbackend_1   |         at Array.forEach (<anonymous>)\r\nbackend_1   |         at KnexListAdapter._postConnect (/src/node_modules/@keystonejs/adapter-knex/lib/adapter-knex.js:275:24)\r\nbackend_1   |         at /src/node_modules/@keystonejs/adapter-knex/lib/adapter-knex.js:68:19\r\nbackend_1   |         at Array.forEach (<anonymous>)\r\nbackend_1   |         at KnexAdapter.postConnect (/src/node_modules/@keystonejs/adapter-knex/lib/adapter-knex.js:67:38)\r\nbackend_1   |         at KnexAdapter.connect (/src/node_modules/@keystonejs/adapter-knex/node_modules/@keystonejs/keystone/lib/adapters/index.js:29:38)\r\nbackend_1   |         at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\nbackend_1   |         at async Object.pReflect [as default] (/src/node_modules/p-reflect/index.js:5:17)\r\nbackend_1   |         at async Promise.all (index 0)\r\nbackend_1   |         at async resolveAllKeys (/src/node_modules/@keystonejs/utils/dist/utils.cjs.dev.js:46:19)\r\nbackend_1   |         at async executeDefaultServer (/src/node_modules/@keystonejs/keystone/bin/utils.js:114:3)\r\nbackend_1   |   }\r\nbackend_1   | }\r\nbackend_1   | npm ERR! code ELIFECYCLE\r\nbackend_1   | npm ERR! errno 1\r\nbackend_1   | npm ERR! research-backend@5.0.3 dev: `keystone dev`\r\nbackend_1   | npm ERR! Exit status 1\r\nbackend_1   | npm ERR! \r\nbackend_1   | npm ERR! Failed at the research-backend@5.0.3 dev script.\r\nbackend_1   | npm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\nbackend_1   | \r\nbackend_1   | npm ERR! A complete log of this run can be found in:\r\nbackend_1   | npm ERR!     /root/.npm/_logs/2020-10-20T02_09_51_836Z-debug.log\r\n```\r\n\r\nhttps://github.com/keystonejs/keystone/issues/2588\r\nhttps://github.com/keystonejs/keystone/issues/3338","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4006","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4006/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4006/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4006/events","html_url":"https://github.com/keystonejs/keystone/issues/4006","id":726374254,"node_id":"MDU6SXNzdWU3MjYzNzQyNTQ=","number":4006,"title":"Support custom FK field name (id field is hardcoded at the moment)","user":{"login":"pahaz","id":1394025,"node_id":"MDQ6VXNlcjEzOTQwMjU=","avatar_url":"https://avatars2.githubusercontent.com/u/1394025?v=4","gravatar_id":"","url":"https://api.github.com/users/pahaz","html_url":"https://github.com/pahaz","followers_url":"https://api.github.com/users/pahaz/followers","following_url":"https://api.github.com/users/pahaz/following{/other_user}","gists_url":"https://api.github.com/users/pahaz/gists{/gist_id}","starred_url":"https://api.github.com/users/pahaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pahaz/subscriptions","organizations_url":"https://api.github.com/users/pahaz/orgs","repos_url":"https://api.github.com/users/pahaz/repos","events_url":"https://api.github.com/users/pahaz/events{/privacy}","received_events_url":"https://api.github.com/users/pahaz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-10-21T11:02:58Z","updated_at":"2020-10-22T10:26:43Z","closed_at":"2020-10-22T10:26:43Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Here: https://github.com/keystonejs/keystone/blob/master/packages/keystone/lib/ListTypes/list.js#L168-L182\r\nThe ID field name is hardcoded\r\n\r\nI have a legacy project with the existed database structure. I want just to connect the keystone to that database.\r\nThere are some problems:\r\n  - UUID as PK name\r\n  - UUID type as PK type\r\n\r\nIs it better to put this issue into Discussions?","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/4032","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/4032/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/4032/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/4032/events","html_url":"https://github.com/keystonejs/keystone/issues/4032","id":729103345,"node_id":"MDU6SXNzdWU3MjkxMDMzNDU=","number":4032,"title":"Documentation on KeystoneJs on AWS Lambda is misleading","user":{"login":"jacobdoran","id":1532374,"node_id":"MDQ6VXNlcjE1MzIzNzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1532374?v=4","gravatar_id":"","url":"https://api.github.com/users/jacobdoran","html_url":"https://github.com/jacobdoran","followers_url":"https://api.github.com/users/jacobdoran/followers","following_url":"https://api.github.com/users/jacobdoran/following{/other_user}","gists_url":"https://api.github.com/users/jacobdoran/gists{/gist_id}","starred_url":"https://api.github.com/users/jacobdoran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacobdoran/subscriptions","organizations_url":"https://api.github.com/users/jacobdoran/orgs","repos_url":"https://api.github.com/users/jacobdoran/repos","events_url":"https://api.github.com/users/jacobdoran/events{/privacy}","received_events_url":"https://api.github.com/users/jacobdoran/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-10-25T20:12:43Z","updated_at":"2020-11-01T10:15:02Z","closed_at":"2020-11-01T10:15:01Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Love Keystone JS however the documentation mentions \"Custom server as a Lambda\" and gives an example of running a KeystoneJS GraphQL app in a lambda function using \"serverless-http\". However, in practice, this does not work because the packaged size is well over 250mb. I tried using \"serverless-webpack\" to get it down but unfortunately, some of the libraries have eval'd requires and expressions in a require so this didn't work. Maybe with a lot of messing about with webpack config this would be possible to get working but this would seem a rather unstable and unwieldy solution.\r\n\r\nMay I suggest that this Lambda example is removed from the documentation and instead a more accurate statement concerning Lambda support is given? Unless of course, I am missing something and if so feel free to advise me.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3457","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3457/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3457/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3457/events","html_url":"https://github.com/keystonejs/keystone/issues/3457","id":685044889,"node_id":"MDU6SXNzdWU2ODUwNDQ4ODk=","number":3457,"title":"Occasional test failures due to ordering","user":{"login":"timleslie","id":616382,"node_id":"MDQ6VXNlcjYxNjM4Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/616382?v=4","gravatar_id":"","url":"https://api.github.com/users/timleslie","html_url":"https://github.com/timleslie","followers_url":"https://api.github.com/users/timleslie/followers","following_url":"https://api.github.com/users/timleslie/following{/other_user}","gists_url":"https://api.github.com/users/timleslie/gists{/gist_id}","starred_url":"https://api.github.com/users/timleslie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timleslie/subscriptions","organizations_url":"https://api.github.com/users/timleslie/orgs","repos_url":"https://api.github.com/users/timleslie/repos","events_url":"https://api.github.com/users/timleslie/events{/privacy}","received_events_url":"https://api.github.com/users/timleslie/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"Noviny","id":15622106,"node_id":"MDQ6VXNlcjE1NjIyMTA2","avatar_url":"https://avatars1.githubusercontent.com/u/15622106?v=4","gravatar_id":"","url":"https://api.github.com/users/Noviny","html_url":"https://github.com/Noviny","followers_url":"https://api.github.com/users/Noviny/followers","following_url":"https://api.github.com/users/Noviny/following{/other_user}","gists_url":"https://api.github.com/users/Noviny/gists{/gist_id}","starred_url":"https://api.github.com/users/Noviny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Noviny/subscriptions","organizations_url":"https://api.github.com/users/Noviny/orgs","repos_url":"https://api.github.com/users/Noviny/repos","events_url":"https://api.github.com/users/Noviny/events{/privacy}","received_events_url":"https://api.github.com/users/Noviny/received_events","type":"User","site_admin":false},"assignees":[{"login":"Noviny","id":15622106,"node_id":"MDQ6VXNlcjE1NjIyMTA2","avatar_url":"https://avatars1.githubusercontent.com/u/15622106?v=4","gravatar_id":"","url":"https://api.github.com/users/Noviny","html_url":"https://github.com/Noviny","followers_url":"https://api.github.com/users/Noviny/followers","following_url":"https://api.github.com/users/Noviny/following{/other_user}","gists_url":"https://api.github.com/users/Noviny/gists{/gist_id}","starred_url":"https://api.github.com/users/Noviny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Noviny/subscriptions","organizations_url":"https://api.github.com/users/Noviny/orgs","repos_url":"https://api.github.com/users/Noviny/repos","events_url":"https://api.github.com/users/Noviny/events{/privacy}","received_events_url":"https://api.github.com/users/Noviny/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2020-08-24T23:17:34Z","updated_at":"2020-09-11T05:45:39Z","closed_at":"2020-09-11T05:45:39Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This test failed due to getting results back in an arbitrary order.\r\n\r\nhttps://github.com/keystonejs/keystone/pull/3455/checks?check_run_id=1023985264\r\n\r\nWe should fix this test so that it always gets results in a fixed order so that this test passes consistenly.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/1674","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/1674/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/1674/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/1674/events","html_url":"https://github.com/keystonejs/keystone/issues/1674","id":494997695,"node_id":"MDU6SXNzdWU0OTQ5OTc2OTU=","number":1674,"title":"Refactor creation of aux lists in Content blocks","user":{"login":"MadeByMike","id":1320567,"node_id":"MDQ6VXNlcjEzMjA1Njc=","avatar_url":"https://avatars0.githubusercontent.com/u/1320567?v=4","gravatar_id":"","url":"https://api.github.com/users/MadeByMike","html_url":"https://github.com/MadeByMike","followers_url":"https://api.github.com/users/MadeByMike/followers","following_url":"https://api.github.com/users/MadeByMike/following{/other_user}","gists_url":"https://api.github.com/users/MadeByMike/gists{/gist_id}","starred_url":"https://api.github.com/users/MadeByMike/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MadeByMike/subscriptions","organizations_url":"https://api.github.com/users/MadeByMike/orgs","repos_url":"https://api.github.com/users/MadeByMike/repos","events_url":"https://api.github.com/users/MadeByMike/events{/privacy}","received_events_url":"https://api.github.com/users/MadeByMike/received_events","type":"User","site_admin":false},"labels":[{"id":1464543303,"node_id":"MDU6TGFiZWwxNDY0NTQzMzAz","url":"https://api.github.com/repos/keystonejs/keystone/labels/maintenance","name":"maintenance","color":"e99695","default":false,"description":""},{"id":1560955619,"node_id":"MDU6TGFiZWwxNTYwOTU1NjE5","url":"https://api.github.com/repos/keystonejs/keystone/labels/needs-review","name":"needs-review","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-09-18T05:32:12Z","updated_at":"2020-11-11T16:12:14Z","closed_at":"2020-11-11T16:12:14Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Pull request #1673 introduced an access control function repeated in all field implementations with AUX tables see: https://github.com/keystonejs/keystone-5/pull/1673/files#diff-17ecbca59700f2ff86be5edc3ee5f317R60\r\n\r\n```\r\naccess: Object.entries(listConfig.listAccess).reduce(\r\n  (acc, [schemaName, access]) => ({\r\n    ...acc,\r\n    [schemaName]: Object.entries(access).reduce(\r\n      (acc, [op, rule]) => ({ ...acc, [op]: !!rule }), // Reduce the entries to truthy values\r\n      {}\r\n    )\r\n  }),\r\n  {}\r\n);\r\n```\r\n\r\nThis should be added to a utility function or one level higher with the way we create these Aux lists for blocks.\r\n\r\n@timleslie is especially keen to make this improvement.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2133","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2133/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2133/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2133/events","html_url":"https://github.com/keystonejs/keystone/issues/2133","id":540736293,"node_id":"MDU6SXNzdWU1NDA3MzYyOTM=","number":2133,"title":"User not created when setting up Keystone with Postgres","user":{"login":"martinheidegger","id":914122,"node_id":"MDQ6VXNlcjkxNDEyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/914122?v=4","gravatar_id":"","url":"https://api.github.com/users/martinheidegger","html_url":"https://github.com/martinheidegger","followers_url":"https://api.github.com/users/martinheidegger/followers","following_url":"https://api.github.com/users/martinheidegger/following{/other_user}","gists_url":"https://api.github.com/users/martinheidegger/gists{/gist_id}","starred_url":"https://api.github.com/users/martinheidegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martinheidegger/subscriptions","organizations_url":"https://api.github.com/users/martinheidegger/orgs","repos_url":"https://api.github.com/users/martinheidegger/repos","events_url":"https://api.github.com/users/martinheidegger/events{/privacy}","received_events_url":"https://api.github.com/users/martinheidegger/received_events","type":"User","site_admin":false},"labels":[{"id":1560955619,"node_id":"MDU6TGFiZWwxNTYwOTU1NjE5","url":"https://api.github.com/repos/keystonejs/keystone/labels/needs-review","name":"needs-review","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2019-12-20T03:48:07Z","updated_at":"2020-09-17T23:12:03Z","closed_at":"2020-06-01T01:39:28Z","author_association":"NONE","active_lock_reason":null,"body":"# Bug report\r\n\r\nI tried setting up Keybase following the getting started guide but on `npm run dev` it starts keystone but no user is created.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behaviour. Please provide code snippets or a repository:\r\n\r\n1. init Keystone\r\n2. install a Postgres database\r\n3. set the user confirguration for the postgres db\r\n4. start the server and see that no user is created\r\n\r\n## Expected behaviour\r\n\r\nThe user should be created immediately or there should be a screen that shows to create a user when starting the app like #1782.\r\n\r\n## Additional context\r\n\r\nI tried to debug `initial-data.js` and changing following:\r\n\r\nhttps://github.com/keystonejs/keystone/blob/06bff4119a44769b359006e8e6b9e07c32b21a8e/packages/create-keystone-app/example-projects/starter/initial-data.js#L6-L10\r\n\r\nto:\r\n\r\n```javascript\r\n  const res = await keystone.executeQuery(\r\n    `query {\r\n      _allUsersMeta {\r\n        count\r\n      }\r\n    }`\r\n  )\r\n  console.log(res)\r\n  // Count existing users\r\n  const {\r\n    data: {\r\n      _allUsersMeta: { count },\r\n    },\r\n  } = res;\r\n```\r\nI got following error:\r\n\r\n```\r\n{\r\n  errors: [\r\n    error: relation \"public.User\" does not exist\r\n        at Connection.parseE (./keystonejs/my-app/node_modules/pg/lib/connection.js:604:13)\r\n        at Connection.parseMessage (./keystonejs/my-app/node_modules/pg/lib/connection.js:403:19)\r\n        at Socket.<anonymous> (./keystonejs/my-app/node_modules/pg/lib/connection.js:123:22)\r\n        at Socket.emit (events.js:210:5)\r\n        at addChunk (_stream_readable.js:308:12)\r\n        at readableAddChunk (_stream_readable.js:289:11)\r\n        at Socket.Readable.push (_stream_readable.js:223:10)\r\n        at TCP.onStreamRead (internal/stream_base_commons.js:182:23)\r\n    From previous event:\r\n        at Client_PG._query (./keystonejs/my-app/node_modules/knex/lib/dialects/postgres/index.js:236:12)\r\n        at Client_PG.query (./keystonejs/my-app/node_modules/knex/lib/client.js:168:17)\r\n        at Runner.query (./keystonejs/my-app/node_modules/knex/lib/runner.js:133:36)\r\n        at ./keystonejs/my-app/node_modules/knex/lib/runner.js:39:23\r\n        at ./keystonejs/my-app/node_modules/knex/lib/runner.js:253:24\r\n        at processImmediate (internal/timers.js:439:21)\r\n    From previous event:\r\n        at Runner.ensureConnection (./keystonejs/my-app/node_modules/knex/lib/runner.js:251:8)\r\n        at Runner.run (./keystonejs/my-app/node_modules/knex/lib/runner.js:25:12)\r\n        at Builder.Target.then (./keystonejs/my-app/node_modules/knex/lib/interface.js:15:43) {\r\n      message: 'select count(*) from \"public\".\"User\" as \"t0\" where true - relation \"public.User\" does not exist',\r\n      locations: [Array],\r\n      path: [Array]\r\n    }\r\n  ],\r\n  data: [Object: null prototype] {\r\n    _allUsersMeta: [Object: null prototype] { count: null }\r\n  }\r\n}\r\n```\r\nNot sure why.\r\n\r\n# System:\r\n\r\n```\r\n{\r\n  \"name\": \"@keystonejs/example-projects-starter\",\r\n  \"description\": \"An example KeystoneJS project with a User list and Authentication.\",\r\n  \"private\": true,\r\n  \"version\": \"5.0.1\",\r\n  \"author\": \"The KeystoneJS Development Team\",\r\n  \"repository\": \"https://github.com/keystonejs/keystone.git\",\r\n  \"homepage\": \"https://github.com/keystonejs/keystone\",\r\n  \"license\": \"MIT\",\r\n  \"engines\": {\r\n    \"node\": \">=8.4.0\"\r\n  },\r\n  \"scripts\": {\r\n    \"dev\": \"cross-env NODE_ENV=development DISABLE_LOGGING=true keystone dev\",\r\n    \"build\": \"cross-env NODE_ENV=production keystone build\",\r\n    \"start\": \"cross-env NODE_ENV=production keystone start\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@keystonejs/adapter-knex\": \"^6.1.2\",\r\n    \"@keystonejs/app-admin-ui\": \"^5.3.0\",\r\n    \"@keystonejs/app-graphql\": \"^5.0.1\",\r\n    \"@keystonejs/auth-password\": \"^5.0.1\",\r\n    \"@keystonejs/fields\": \"^6.0.0\",\r\n    \"@keystonejs/keystone\": \"^5.3.0\",\r\n    \"cross-env\": \"^5.2.0\"\r\n  }\r\n```\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/vercel/next.js/issues/16079","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/16079/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/16079/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/16079/events","html_url":"https://github.com/vercel/next.js/issues/16079","id":676945477,"node_id":"MDU6SXNzdWU2NzY5NDU0Nzc=","number":16079,"title":"BasePath undefined from server if use next/dist/build","user":{"login":"slider82","id":6839260,"node_id":"MDQ6VXNlcjY4MzkyNjA=","avatar_url":"https://avatars2.githubusercontent.com/u/6839260?v=4","gravatar_id":"","url":"https://api.github.com/users/slider82","html_url":"https://github.com/slider82","followers_url":"https://api.github.com/users/slider82/followers","following_url":"https://api.github.com/users/slider82/following{/other_user}","gists_url":"https://api.github.com/users/slider82/gists{/gist_id}","starred_url":"https://api.github.com/users/slider82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slider82/subscriptions","organizations_url":"https://api.github.com/users/slider82/orgs","repos_url":"https://api.github.com/users/slider82/repos","events_url":"https://api.github.com/users/slider82/events{/privacy}","received_events_url":"https://api.github.com/users/slider82/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-11T14:55:10Z","updated_at":"2020-08-12T07:54:48Z","closed_at":"2020-08-12T07:54:48Z","author_association":"NONE","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nhttps://github.com/keystonejs/keystone/blob/master/packages/app-next/index.js\r\n\r\nIf use **next/dist/build** In this case, basePath will be empty on the server. Since **process.env .__ NEXT_ROUTER_BASEPATH** which is used in the router is not defined, because it is determined during assembly\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/1998","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/1998/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/1998/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/1998/events","html_url":"https://github.com/keystonejs/keystone/issues/1998","id":528215557,"node_id":"MDU6SXNzdWU1MjgyMTU1NTc=","number":1998,"title":"Add option to set logger (pino) options and destination","user":{"login":"LiamAttClarke","id":9361948,"node_id":"MDQ6VXNlcjkzNjE5NDg=","avatar_url":"https://avatars1.githubusercontent.com/u/9361948?v=4","gravatar_id":"","url":"https://api.github.com/users/LiamAttClarke","html_url":"https://github.com/LiamAttClarke","followers_url":"https://api.github.com/users/LiamAttClarke/followers","following_url":"https://api.github.com/users/LiamAttClarke/following{/other_user}","gists_url":"https://api.github.com/users/LiamAttClarke/gists{/gist_id}","starred_url":"https://api.github.com/users/LiamAttClarke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LiamAttClarke/subscriptions","organizations_url":"https://api.github.com/users/LiamAttClarke/orgs","repos_url":"https://api.github.com/users/LiamAttClarke/repos","events_url":"https://api.github.com/users/LiamAttClarke/events{/privacy}","received_events_url":"https://api.github.com/users/LiamAttClarke/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-11-25T16:59:29Z","updated_at":"2020-10-13T13:39:17Z","closed_at":"2019-11-28T21:47:58Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"# Feature request\r\n\r\n## Is your feature request related to a problem? Please describe.\r\n\r\nI would like to output logs to a separate file based on logger name. Currently, there is no way to provide that option.\r\n\r\n## Describe the solution you'd like\r\n\r\nI would like an option on the `Keystone` constructor for modifying logger options passed to `pino` a well as an option to set the `destination` option on the `pino` instance.\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3397","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3397/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3397/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3397/events","html_url":"https://github.com/keystonejs/keystone/issues/3397","id":679580246,"node_id":"MDU6SXNzdWU2Nzk1ODAyNDY=","number":3397,"title":"Since yesterday docker build not working. BaseKeystoneAdapter.postConnect","user":{"login":"HitsiLent","id":3459741,"node_id":"MDQ6VXNlcjM0NTk3NDE=","avatar_url":"https://avatars0.githubusercontent.com/u/3459741?v=4","gravatar_id":"","url":"https://api.github.com/users/HitsiLent","html_url":"https://github.com/HitsiLent","followers_url":"https://api.github.com/users/HitsiLent/followers","following_url":"https://api.github.com/users/HitsiLent/following{/other_user}","gists_url":"https://api.github.com/users/HitsiLent/gists{/gist_id}","starred_url":"https://api.github.com/users/HitsiLent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HitsiLent/subscriptions","organizations_url":"https://api.github.com/users/HitsiLent/orgs","repos_url":"https://api.github.com/users/HitsiLent/repos","events_url":"https://api.github.com/users/HitsiLent/events{/privacy}","received_events_url":"https://api.github.com/users/HitsiLent/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-08-15T14:04:43Z","updated_at":"2020-08-16T23:42:10Z","closed_at":"2020-08-16T23:42:10Z","author_association":"NONE","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nwhen we try to production keystone on docker it pops \r\n\r\n✖ Connecting to database\r\nError: Multiple errors in BaseKeystoneAdapter.postConnect():\r\n    at resolveAllKeys (/home/node/node_modules/@keystonejs/utils/dist/utils.cjs.prod.js:44:95)\r\n    at async executeDefaultServer (/home/node/node_modules/@keystonejs/keystone/bin/utils.js:114:3) {\r\n  errors: {\r\n    MongooseAdapter: Error: Multiple errors in BaseKeystoneAdapter.postConnect():\r\n        at MongooseAdapter.connect (/home/node/node_modules/@keystonejs/keystone/lib/adapters/index.js:34:23)\r\n        at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\n        at async pReflect (/home/node/node_modules/p-reflect/index.js:5:17)\r\n        at async Promise.all (index 0)\r\n        at async resolveAllKeys (/home/node/node_modules/@keystonejs/utils/dist/utils.cjs.prod.js:42:21)\r\n        at async executeDefaultServer (/home/node/node_modules/@keystonejs/keystone/bin/utils.js:114:3) {\r\n      errors: [Array]\r\n    }\r\n  }\r\n}\r\nerror Command failed with exit code 1.\r\n\r\n\r\n## To Reproduce\r\n\r\ndocker build -t  \r\n\r\nDocker build run code below via Dockerfile\r\n\r\n# https://docs.docker.com/samples/library/node/\r\nARG NODE_VERSION=12.10.0\r\n# https://github.com/Yelp/dumb-init/releases\r\nARG DUMB_INIT_VERSION=1.2.2\r\n\r\n# Build container\r\nFROM node:${NODE_VERSION}-alpine AS build\r\nARG DUMB_INIT_VERSION\r\n\r\nWORKDIR /home/node\r\n\r\nRUN apk add --no-cache build-base python2 yarn && \\\r\n    wget -O dumb-init -q https://github.com/Yelp/dumb-init/releases/download/v${DUMB_INIT_VERSION}/dumb-init_${DUMB_INIT_VERSION}_amd64 && \\\r\n    chmod +x dumb-init\r\n\r\nADD . /home/node\r\nENV CI false\r\nENV TZ America/New_York\r\nRUN yarn install && yarn build && yarn cache clean\r\n\r\n# Runtime container\r\nFROM node:${NODE_VERSION}-alpine\r\n\r\nWORKDIR /home/node\r\n\r\nCOPY --from=build /home/node /home/node\r\n\r\nEXPOSE 3000\r\n\r\nCMD [\"./dumb-init\", \"yarn\", \"start\"]\r\n\r\n## Expected behaviour\r\n\r\nDocker image build successful \r\n\r\ndocker run --env-file .env -p 3000:3000  should working \r\nbut got \r\n## Screenshots\r\n![image](https://user-images.githubusercontent.com/3459741/90314008-9c068380-dede-11ea-8003-cc676a6d8f2e.png)\r\n\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## System information\r\n\r\n- OS: [e.g. macOS, Windows]\r\n- Browser (if applies) [e.g. chrome, safari]\r\n\r\n## Additional context\r\npackage.json\r\n{\r\n  \"name\": \"@keystonejs/demo-project-meetup\",\r\n  \"description\": \"An example KeystoneJS project showcasing a Meetup Site.\",\r\n  \"private\": true,\r\n  \"version\": \"5.0.0\",\r\n  \"author\": \"The KeystoneJS Development Team\",\r\n  \"license\": \"MIT\",\r\n  \"engines\": {\r\n    \"node\": \">=8.4.0\"\r\n  },\r\n  \"scripts\": {\r\n    \"dev\": \"cross-env NODE_ENV=development DISABLE_LOGGING=true keystone dev \",\r\n    \"build\": \"cross-env NODE_ENV=production keystone build\",\r\n    \"start\": \"cross-env NODE_ENV=production keystone start\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@apollo/react-hoc\": \"^3.1.3\",\r\n    \"@apollo/react-hooks\": \"^3.1.3\",\r\n    \"@apollo/react-ssr\": \"^3.1.3\",\r\n    \"@babel/plugin-transform-flow-strip-types\": \"^7.10.4\",\r\n    \"@date-io/date-fns\": \"^2.4.0\",\r\n    \"@emotion/core\": \"^10.0.27\",\r\n    \"@keystonejs/adapter-mongoose\": \"^5.2.2\",\r\n    \"@keystonejs/app-admin-ui\": \"^5.9.2\",\r\n    \"@keystonejs/app-graphql\": \"^5.1.3\",\r\n    \"@keystonejs/app-next\": \"^5.1.1\",\r\n    \"@keystonejs/auth-password\": \"^5.1.2\",\r\n    \"@keystonejs/email\": \"^5.1.1\",\r\n    \"@keystonejs/fields\": \"^7.0.1\",\r\n    \"@keystonejs/fields-wysiwyg-tinymce\": \"^5.2.1\",\r\n    \"@keystonejs/file-adapters\": \"^6.0.0\",\r\n    \"@keystonejs/keystone\": \"^6.0.2\",\r\n    \"@keystonejs/session\": \"^5.1.1\",\r\n    \"@material-ui/core\": \"4.9.4\",\r\n    \"@material-ui/icons\": \"^4.9.1\",\r\n    \"@sendgrid/mail\": \"^7.1.1\",\r\n    \"apollo-boost\": \"^0.4.7\",\r\n    \"apollo-client\": \"^2.6.8\",\r\n    \"apollo-fetch\": \"^0.7.0\",\r\n    \"apollo-link\": \"^1.2.13\",\r\n    \"atob\": \"^2.0.3\",\r\n    \"axios\": \"^0.19.2\",\r\n    \"body-parser\": \"^1.18.2\",\r\n    \"btoa\": \"^1.1.2\",\r\n    \"client-oauth2\": \"^4.2.5\",\r\n    \"cookie-parser\": \"^1.4.5\",\r\n    \"cross-env\": \"^7.0.0\",\r\n    \"crypto-js\": \"^4.0.0\",\r\n    \"csrf\": \"^3.0.4\",\r\n    \"date-fns\": \"^1.30.1\",\r\n    \"dotenv\": \"^8.2.0\",\r\n    \"ejs\": \"^2.5.2\",\r\n    \"eslint-plugin-emotion\": \"^10.0.27\",\r\n    \"expect\": \"^1.20.2\",\r\n    \"express\": \"^4.17.1\",\r\n    \"express-basic-auth\": \"^1.2.0\",\r\n    \"express-session\": \"^1.14.2\",\r\n    \"facepaint\": \"^1.2.1\",\r\n    \"fs\": \"0.0.2\",\r\n    \"get-contrast\": \"^2.0.0\",\r\n    \"graphql-tag\": \"^2.10.1\",\r\n    \"https\": \"^1.0.0\",\r\n    \"intuit-oauth\": \"^2.0.2\",\r\n    \"isomorphic-unfetch\": \"^3.0.0\",\r\n    \"jquery\": \"^3.4.1\",\r\n    \"jsforce\": \"^1.9.3\",\r\n    \"jsonwebtoken\": \"^7.1.9\",\r\n    \"lodash\": \"^4.17.15\",\r\n    \"lodash.uniqby\": \"^4.7.0\",\r\n    \"material-table\": \"1.57.2\",\r\n    \"moment\": \"^2.24.0\",\r\n    \"namor\": \"^2.0.2\",\r\n    \"net\": \"^1.0.2\",\r\n    \"next\": \"^9.2.0\",\r\n    \"node-quickbooks\": \"^2.0.33\",\r\n    \"papaparse\": \"^5.2.0\",\r\n    \"path\": \"^0.12.7\",\r\n    \"prop-types\": \"^15.7.2\",\r\n    \"react\": \"^16.13.0\",\r\n    \"react-apollo\": \"2.4.0\",\r\n    \"react-apollo-hooks\": \"^0.4.4\",\r\n    \"react-cookie\": \"^4.0.3\",\r\n    \"react-dom\": \"^16.13.0\",\r\n    \"react-table\": \"^7.0.0-rc.16\",\r\n    \"react-toast-notifications\": \"^2.3.0\",\r\n    \"react-use-form-state\": \"^0.12.0\",\r\n    \"request\": \"^2.78.0\",\r\n    \"rsa-pem-from-mod-exp\": \"^0.8.4\",\r\n    \"tls\": \"^0.0.1\",\r\n    \"twilio\": \"^3.48.1\",\r\n    \"universal-cookie\": \"^4.0.3\",\r\n    \"uuid\": \"^3.3.2\"\r\n  }\r\n}\r\n\r\n\r\nAdd any other context about the problem here.\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/1730","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/1730/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/1730/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/1730/events","html_url":"https://github.com/keystonejs/keystone/issues/1730","id":502250948,"node_id":"MDU6SXNzdWU1MDIyNTA5NDg=","number":1730,"title":"Image Gallery field","user":{"login":"gautamsi","id":5769869,"node_id":"MDQ6VXNlcjU3Njk4Njk=","avatar_url":"https://avatars2.githubusercontent.com/u/5769869?v=4","gravatar_id":"","url":"https://api.github.com/users/gautamsi","html_url":"https://github.com/gautamsi","followers_url":"https://api.github.com/users/gautamsi/followers","following_url":"https://api.github.com/users/gautamsi/following{/other_user}","gists_url":"https://api.github.com/users/gautamsi/gists{/gist_id}","starred_url":"https://api.github.com/users/gautamsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gautamsi/subscriptions","organizations_url":"https://api.github.com/users/gautamsi/orgs","repos_url":"https://api.github.com/users/gautamsi/repos","events_url":"https://api.github.com/users/gautamsi/events{/privacy}","received_events_url":"https://api.github.com/users/gautamsi/received_events","type":"User","site_admin":false},"labels":[{"id":1360714603,"node_id":"MDU6TGFiZWwxMzYwNzE0NjAz","url":"https://api.github.com/repos/keystonejs/keystone/labels/feature%20request","name":"feature request","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2019-10-03T19:23:33Z","updated_at":"2020-10-23T00:03:39Z","closed_at":"2020-06-01T05:13:30Z","author_association":"MEMBER","active_lock_reason":null,"body":"# Feature request\r\nI want to use an Image Gallery field where I can add multiple images to the field (kind of array). \r\n\r\nThis is needed to provide variable number of images in a list item and display them inline as thumbnail and as popup carousel to cycle through images\r\n\r\n## Describe the solution you'd like\r\n\r\n`admin-ui` should display the thumbnails inline and on clicking it open a larger images like carousel (popup in same page). There should be option to select specific image as primary (hero image)\r\n\r\n## Describe alternatives you've considered\r\nConsidered to use Image list with relationship fields, but the display is not optimal for list of images, it is still a drop down with text only items \r\n\r\nThis will be helpful and better approach over creating a relationship field, on another thought, if display of relationship items can be done using thumbnails and carousel view, it may also work.\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3191","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3191/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3191/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3191/events","html_url":"https://github.com/keystonejs/keystone/issues/3191","id":641388861,"node_id":"MDU6SXNzdWU2NDEzODg4NjE=","number":3191,"title":"Documentation for @keystonejs/fields unclear regarding 'isReadOnly'","user":{"login":"ra-external","id":60699805,"node_id":"MDQ6VXNlcjYwNjk5ODA1","avatar_url":"https://avatars0.githubusercontent.com/u/60699805?v=4","gravatar_id":"","url":"https://api.github.com/users/ra-external","html_url":"https://github.com/ra-external","followers_url":"https://api.github.com/users/ra-external/followers","following_url":"https://api.github.com/users/ra-external/following{/other_user}","gists_url":"https://api.github.com/users/ra-external/gists{/gist_id}","starred_url":"https://api.github.com/users/ra-external/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ra-external/subscriptions","organizations_url":"https://api.github.com/users/ra-external/orgs","repos_url":"https://api.github.com/users/ra-external/repos","events_url":"https://api.github.com/users/ra-external/events{/privacy}","received_events_url":"https://api.github.com/users/ra-external/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-06-18T16:52:42Z","updated_at":"2020-08-12T00:15:35Z","closed_at":"2020-08-12T00:15:35Z","author_association":"NONE","active_lock_reason":null,"body":"In the Changelog for v. 12 (https://github.com/keystonejs/keystone/blob/master/packages/fields/CHANGELOG.md#1200) it says\r\n\r\n![image](https://user-images.githubusercontent.com/60699805/85049181-9c132d00-b194-11ea-8577-1d770030f71c.png)\r\n\r\nIt's unclear whether it should be `isReadOnly` or `isDisabled`","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3413","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3413/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3413/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3413/events","html_url":"https://github.com/keystonejs/keystone/issues/3413","id":680709580,"node_id":"MDU6SXNzdWU2ODA3MDk1ODA=","number":3413,"title":"Issues with content field, Add button not displaying, Unable to add Cloudinary or Unsplash blocks","user":{"login":"SeanDoyleGit","id":42298774,"node_id":"MDQ6VXNlcjQyMjk4Nzc0","avatar_url":"https://avatars3.githubusercontent.com/u/42298774?v=4","gravatar_id":"","url":"https://api.github.com/users/SeanDoyleGit","html_url":"https://github.com/SeanDoyleGit","followers_url":"https://api.github.com/users/SeanDoyleGit/followers","following_url":"https://api.github.com/users/SeanDoyleGit/following{/other_user}","gists_url":"https://api.github.com/users/SeanDoyleGit/gists{/gist_id}","starred_url":"https://api.github.com/users/SeanDoyleGit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SeanDoyleGit/subscriptions","organizations_url":"https://api.github.com/users/SeanDoyleGit/orgs","repos_url":"https://api.github.com/users/SeanDoyleGit/repos","events_url":"https://api.github.com/users/SeanDoyleGit/events{/privacy}","received_events_url":"https://api.github.com/users/SeanDoyleGit/received_events","type":"User","site_admin":false},"labels":[{"id":1037339786,"node_id":"MDU6TGFiZWwxMDM3MzM5Nzg2","url":"https://api.github.com/repos/keystonejs/keystone/labels/admin-ui","name":"admin-ui","color":"aadd77","default":false,"description":""},{"id":890973299,"node_id":"MDU6TGFiZWw4OTA5NzMyOTk=","url":"https://api.github.com/repos/keystonejs/keystone/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-18T05:40:02Z","updated_at":"2020-09-30T10:53:44Z","closed_at":"2020-09-30T10:53:44Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## Describe the bug\r\n\r\n### 1. Add button not displaying\r\n#### Current Behaviour\r\nWhen I focus the content field no add button is displayed on the left hand side\r\n<img width=\"1071\" alt=\"Screen Shot 2020-08-18 at 3 04 16 pm\" src=\"https://user-images.githubusercontent.com/42298774/90472588-2ca1c580-e164-11ea-9f95-b4b047514920.png\">\r\n\r\n#### Expected Behaviour\r\nWhen I focus the content field I should be able to see a `+` button that shows several block options when clicked. \r\n<img width=\"1085\" alt=\"Screen Shot 2020-08-18 at 3 01 05 pm\" src=\"https://user-images.githubusercontent.com/42298774/90472391-bbfaa900-e163-11ea-9e77-fbf5df43a40f.png\">\r\n\r\nThis issue can be resolved by changing...\r\nhttps://github.com/keystonejs/keystone/blob/4aad74c531fe7ce0de1c31763e50a47bd06766e9/packages/fields-content/src/views/editor/add-block.js#L37\r\n\r\ntoo...\r\n```\r\nif (!blocks || !Object.keys(blocks).length) return;\r\n```\r\n\r\n### 2. Unable to add a Cloudinary image block to the content field\r\nIf the add button issue is resolved and I try to add a cloudinary image the content field, the field will error\r\n<img width=\"1070\" alt=\"Screen Shot 2020-08-18 at 3 14 05 pm\" src=\"https://user-images.githubusercontent.com/42298774/90473131-82c33880-e165-11ea-9075-dd740564ab00.png\">\r\n\r\nThe following error is thrown in the console.\r\n```\r\nreact-dom.development.js:19731 Uncaught TypeError: create is not a function\r\n    at commitHookEffectListMount (react-dom.development.js:19731)\r\n    at commitLifeCycles (react-dom.development.js:19787)\r\n    at commitLayoutEffects (react-dom.development.js:22803)\r\n    at HTMLUnknownElement.callCallback (react-dom.development.js:188)\r\n    at Object.invokeGuardedCallbackDev (react-dom.development.js:237)\r\n    at invokeGuardedCallback (react-dom.development.js:292)\r\n    at commitRootImpl (react-dom.development.js:22541)\r\n    at unstable_runWithPriority (scheduler.development.js:653)\r\n    at runWithPriority$1 (react-dom.development.js:11039)\r\n    at commitRoot (react-dom.development.js:22381)\r\n```\r\n### 3. Unable to add an Unsplash image block to the content field\r\nWhen I attempt to add an Unsplash image block to the content field, the field fails to search for images from unsplash and throws a graphql error.\r\n<img width=\"1072\" alt=\"Screen Shot 2020-08-18 at 3 20 43 pm\" src=\"https://user-images.githubusercontent.com/42298774/90473509-6e337000-e166-11ea-9aaa-51ae1dd99165.png\">\r\n\r\nThis is the graphql query that is called by the unsplash block:\r\n```\r\nquery searchImages($query: String!, $page: Int, $perPage: Int, $width: String) {\r\n  searchUnsplash(query: $query, perPage: $perPage, page: $page) {\r\n    total\r\n    totalPages\r\n    results {↵\r\n       id↵\r\n       unsplashId↵ \r\n       publicUrl: publicUrlTransformed(transformation: {w: $width})\r\n       width\r\n       height\r\n       alt\r\n       user {\r\n         name\r\n         url         \r\n       }\r\n    }\r\n  }\r\n}\r\n\r\nvariables: {\r\n  page: 1\r\n  perPage: 5\r\n  query: \"hello\"\r\n  width: \"400\"\r\n}\r\n```\r\nThis is the graphql error returned by the query:\r\n```\r\nCannot query field \"searchUnsplash\" on type \"Query\".\r\n```\r\n\r\n## To Reproduce\r\n\r\nThese issue can be reproduced by setting up the content filed in the blog demo-project. \r\nChange the `Post.body` field in the schema too...\r\n```\r\n    body: {\r\n      type: Content,\r\n      blocks: [\r\n        [CloudinaryImage.blocks.image, { adapter: cloudinaryAdapter }],\r\n        [\r\n          Unsplash.blocks.unsplashImage,\r\n          {\r\n            attribution: 'vocal.media',\r\n            accessKey: process.env.UNSPLASH_ACCESS_KEY,\r\n            secretKey: process.env.UNSPLASH_SECRET_KEY,\r\n          },\r\n        ],\r\n        [OEmbed.blocks.oEmbed, { adapter: iframelyAdapter }],\r\n        Content.blocks.blockquote,\r\n        Content.blocks.orderedList,\r\n        Content.blocks.unorderedList,\r\n        Content.blocks.link,\r\n        Content.blocks.heading,\r\n      ],\r\n    },\r\n```\r\nYou need to install the following packages \r\n`@keystonejs/fields-cloudinary-image@1.0.1`\r\n`@keystonejs/fields-oembed@1.0.0`\r\n`@keystonejs/fields-unsplash@1.0.0`\r\n`@keystonejs/fields-content@^8.0.0`\r\n\r\nFinally you need to set up the `CloudinaryAdapter`, `IframelyOEmbedAdapter` with your cloudinary and iframely API keys, as well as pass in your Unsplash API keys to the Unsplash block. \r\n\r\n```\r\nconst cloudinaryAdapter = new CloudinaryAdapter({\r\n  cloudName: CLOUDINARY_CLOUD_NAME,\r\n  apiKey: CLOUDINARY_KEY,\r\n  apiSecret: CLOUDINARY_SECRET,\r\n});\r\n```\r\n\r\n```\r\n  iframelyAdapter = new IframelyOEmbedAdapter({\r\n    apiKey: process.env.IFRAMELY_API_KEY,\r\n  });\r\n```\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/preconstruct/preconstruct/issues/26","repository_url":"https://api.github.com/repos/preconstruct/preconstruct","labels_url":"https://api.github.com/repos/preconstruct/preconstruct/issues/26/labels{/name}","comments_url":"https://api.github.com/repos/preconstruct/preconstruct/issues/26/comments","events_url":"https://api.github.com/repos/preconstruct/preconstruct/issues/26/events","html_url":"https://github.com/preconstruct/preconstruct/issues/26","id":425408937,"node_id":"MDU6SXNzdWU0MjU0MDg5Mzc=","number":26,"title":"Figure out if and how it should be possible to customise dist file names","user":{"login":"mitchellhamilton","id":11481355,"node_id":"MDQ6VXNlcjExNDgxMzU1","avatar_url":"https://avatars1.githubusercontent.com/u/11481355?v=4","gravatar_id":"","url":"https://api.github.com/users/mitchellhamilton","html_url":"https://github.com/mitchellhamilton","followers_url":"https://api.github.com/users/mitchellhamilton/followers","following_url":"https://api.github.com/users/mitchellhamilton/following{/other_user}","gists_url":"https://api.github.com/users/mitchellhamilton/gists{/gist_id}","starred_url":"https://api.github.com/users/mitchellhamilton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitchellhamilton/subscriptions","organizations_url":"https://api.github.com/users/mitchellhamilton/orgs","repos_url":"https://api.github.com/users/mitchellhamilton/repos","events_url":"https://api.github.com/users/mitchellhamilton/events{/privacy}","received_events_url":"https://api.github.com/users/mitchellhamilton/received_events","type":"User","site_admin":false},"labels":[{"id":1290358028,"node_id":"MDU6TGFiZWwxMjkwMzU4MDI4","url":"https://api.github.com/repos/preconstruct/preconstruct/labels/later","name":"later","color":"0c4c8c","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-03-26T13:11:06Z","updated_at":"2020-10-15T12:05:33Z","closed_at":"2020-10-15T12:05:33Z","author_association":"MEMBER","active_lock_reason":null,"body":">> Related: I actually nearly went through renaming the dist file names for the entries in the fields package so they matched the field type and entry names (e.g Text.Cell.esm.js would make more sense than fields.esm.js for the fields/types/Text/views/Cell entry. 🤷‍♂️ maybe we should relax this restriction or something?\r\n>\r\n>I definitely think there needs to be some way to have different filenames, especially between entrypoints in a package. I don't think it should just be letting users customize it directly though since enforcing it enables really awesome things like auto fixing and initializing, I'm not entirely sure what it should look like yet though. Right now, what I'm thinking of is the name that it is currently + path to entrypoint but / replaced with -, so for example for fields/types/Text/views/Cell making it, fields-types-Text-views-Cell.esm.js. The other thing I'm thinking of is letting people specify a name in entrypoints just like you can in packages and using that name for the file name rather than the package's name so the name could be text.cell(lowercase to follow npm package naming requirements to make things consistent with when you have a single entrypoint which is the root of the package and so the name comes from the package's name) and a filename would be text.cell.esm.js\r\n\r\nfrom https://github.com/keystonejs/keystone-5/pull/929#issuecomment-476618763","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2898","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2898/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2898/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2898/events","html_url":"https://github.com/keystonejs/keystone/issues/2898","id":612488995,"node_id":"MDU6SXNzdWU2MTI0ODg5OTU=","number":2898,"title":"Launching Next.js with Styled Components throws React Hooks error","user":{"login":"nigelwtf","id":4311224,"node_id":"MDQ6VXNlcjQzMTEyMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/4311224?v=4","gravatar_id":"","url":"https://api.github.com/users/nigelwtf","html_url":"https://github.com/nigelwtf","followers_url":"https://api.github.com/users/nigelwtf/followers","following_url":"https://api.github.com/users/nigelwtf/following{/other_user}","gists_url":"https://api.github.com/users/nigelwtf/gists{/gist_id}","starred_url":"https://api.github.com/users/nigelwtf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nigelwtf/subscriptions","organizations_url":"https://api.github.com/users/nigelwtf/orgs","repos_url":"https://api.github.com/users/nigelwtf/repos","events_url":"https://api.github.com/users/nigelwtf/events{/privacy}","received_events_url":"https://api.github.com/users/nigelwtf/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-05-05T10:13:12Z","updated_at":"2020-09-25T20:21:13Z","closed_at":"2020-06-16T21:38:11Z","author_association":"NONE","active_lock_reason":null,"body":"# Bug report\r\n## Describe the bug\r\nWhen using Next.js and Styled Components and launching Next.js from Keystone, an erroris printed to the stdout:\r\n```\r\nError: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\r\n1. You might have mismatching versions of React and the renderer (such as React DOM)\r\n2. You might be breaking the Rules of Hooks\r\n3. You might have more than one copy of React in the same app\r\n```\r\n\r\nI've isolated this specifically to launching Next.js from Keystone's `dev` command, as navigating to the Next.js directory and launching from there doesn't produce an error.\r\n\r\nI further tracked the cause of the error to being the 3rd point in the error message: \"You might have more than one copy of React in the same app\". Following the stack trace, I've found Next.js is using Keystone's version of React.\r\n\r\nThis is the good news - moving React and ReactDOM to Next's `peerDependencies` in `package.json` resolves the issue. This is probably a documentation change IF the maintainers deem this necessary to document in the first place (it's a pretty niche use case). If that is the case, I'd be happy to raise a pull request (with some guidance).\r\n\r\n## To Reproduce\r\n1. Install Next.js in a subdirectory\r\n2. Install and configure `@keystonejs/app-next`\r\n3. Install and configure Styled Components following this example [https://github.com/zeit/next.js/tree/canary/examples/with-styled-components](https://github.com/zeit/next.js/tree/canary/examples/with-styled-components) (Note, most of the implementation is in `pages/_document.js` and `pages/_app.js`.\r\n4. Run `yarn dev`\r\n5. Observe the error in the stdout or visit the app in a browser\r\n\r\n## Expected behaviour\r\nKeystone should successfully boot a Next.js app with Styled Components without producing errors.\r\n\r\n## System information\r\n\r\n- OS: macOS\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3118","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3118/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3118/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3118/events","html_url":"https://github.com/keystonejs/keystone/issues/3118","id":631387137,"node_id":"MDU6SXNzdWU2MzEzODcxMzc=","number":3118,"title":"Last major Admin UI update broke create relationship flow","user":{"login":"zamkevich","id":13717428,"node_id":"MDQ6VXNlcjEzNzE3NDI4","avatar_url":"https://avatars0.githubusercontent.com/u/13717428?v=4","gravatar_id":"","url":"https://api.github.com/users/zamkevich","html_url":"https://github.com/zamkevich","followers_url":"https://api.github.com/users/zamkevich/followers","following_url":"https://api.github.com/users/zamkevich/following{/other_user}","gists_url":"https://api.github.com/users/zamkevich/gists{/gist_id}","starred_url":"https://api.github.com/users/zamkevich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zamkevich/subscriptions","organizations_url":"https://api.github.com/users/zamkevich/orgs","repos_url":"https://api.github.com/users/zamkevich/repos","events_url":"https://api.github.com/users/zamkevich/events{/privacy}","received_events_url":"https://api.github.com/users/zamkevich/received_events","type":"User","site_admin":false},"labels":[{"id":1606736327,"node_id":"MDU6TGFiZWwxNjA2NzM2MzI3","url":"https://api.github.com/repos/keystonejs/keystone/labels/Priority:%201","name":"Priority: 1","color":"0052cc","default":false,"description":""},{"id":1594380455,"node_id":"MDU6TGFiZWwxNTk0MzgwNDU1","url":"https://api.github.com/repos/keystonejs/keystone/labels/verified","name":"verified","color":"8de881","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MadeByMike","id":1320567,"node_id":"MDQ6VXNlcjEzMjA1Njc=","avatar_url":"https://avatars0.githubusercontent.com/u/1320567?v=4","gravatar_id":"","url":"https://api.github.com/users/MadeByMike","html_url":"https://github.com/MadeByMike","followers_url":"https://api.github.com/users/MadeByMike/followers","following_url":"https://api.github.com/users/MadeByMike/following{/other_user}","gists_url":"https://api.github.com/users/MadeByMike/gists{/gist_id}","starred_url":"https://api.github.com/users/MadeByMike/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MadeByMike/subscriptions","organizations_url":"https://api.github.com/users/MadeByMike/orgs","repos_url":"https://api.github.com/users/MadeByMike/repos","events_url":"https://api.github.com/users/MadeByMike/events{/privacy}","received_events_url":"https://api.github.com/users/MadeByMike/received_events","type":"User","site_admin":false},"assignees":[{"login":"MadeByMike","id":1320567,"node_id":"MDQ6VXNlcjEzMjA1Njc=","avatar_url":"https://avatars0.githubusercontent.com/u/1320567?v=4","gravatar_id":"","url":"https://api.github.com/users/MadeByMike","html_url":"https://github.com/MadeByMike","followers_url":"https://api.github.com/users/MadeByMike/followers","following_url":"https://api.github.com/users/MadeByMike/following{/other_user}","gists_url":"https://api.github.com/users/MadeByMike/gists{/gist_id}","starred_url":"https://api.github.com/users/MadeByMike/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MadeByMike/subscriptions","organizations_url":"https://api.github.com/users/MadeByMike/orgs","repos_url":"https://api.github.com/users/MadeByMike/repos","events_url":"https://api.github.com/users/MadeByMike/events{/privacy}","received_events_url":"https://api.github.com/users/MadeByMike/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-06-05T07:47:40Z","updated_at":"2020-06-06T04:05:25Z","closed_at":"2020-06-06T04:05:25Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## how it works now\r\n![screencast 2020-06-05 17-06-40](https://user-images.githubusercontent.com/13717428/83847635-eeddf500-a74f-11ea-9d70-f823315f1252.gif)\r\n\r\n### dependencies\r\n```\r\n\"@keystonejs/adapter-mongoose\": \"^8.1.0\",\r\n\"@keystonejs/app-admin-ui\": \"^7.0.1\",\r\n\"@keystonejs/app-graphql\": \"^5.1.7\",\r\n\"@keystonejs/fields\": \"^12.0.1\",\r\n\"@keystonejs/keystone\": \"^10.1.0\"\r\n```\r\n### full project \r\nhttps://github.com/zamkevich/keystone-tests/tree/relationship-flow-bug\r\n\r\n\r\n## How did it work\r\n![screencast 2020-06-05 17-15-14](https://user-images.githubusercontent.com/13717428/83847945-762b6880-a750-11ea-854f-934b2eda841d.gif)\r\n\r\n### dependencies\r\n```\r\n\"@keystonejs/adapter-mongoose\": \"^8.1.0\",\r\n\"@keystonejs/app-admin-ui\": \"^6.0.0\",\r\n\"@keystonejs/app-graphql\": \"^5.1.7\",\r\n\"@keystonejs/fields\": \"^10.0.0\",\r\n\"@keystonejs/keystone\": \"^9.0.0\",\r\n```\r\n\r\n### full project \r\nhttps://github.com/zamkevich/keystone-tests/tree/relationship-flow-work\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs-contrib/keystonejs-contrib/issues/5","repository_url":"https://api.github.com/repos/keystonejs-contrib/keystonejs-contrib","labels_url":"https://api.github.com/repos/keystonejs-contrib/keystonejs-contrib/issues/5/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs-contrib/keystonejs-contrib/issues/5/comments","events_url":"https://api.github.com/repos/keystonejs-contrib/keystonejs-contrib/issues/5/events","html_url":"https://github.com/keystonejs-contrib/keystonejs-contrib/issues/5","id":625062856,"node_id":"MDU6SXNzdWU2MjUwNjI4NTY=","number":5,"title":"blog-view example doesn't work","user":{"login":"blsnttt","id":7887228,"node_id":"MDQ6VXNlcjc4ODcyMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/7887228?v=4","gravatar_id":"","url":"https://api.github.com/users/blsnttt","html_url":"https://github.com/blsnttt","followers_url":"https://api.github.com/users/blsnttt/followers","following_url":"https://api.github.com/users/blsnttt/following{/other_user}","gists_url":"https://api.github.com/users/blsnttt/gists{/gist_id}","starred_url":"https://api.github.com/users/blsnttt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blsnttt/subscriptions","organizations_url":"https://api.github.com/users/blsnttt/orgs","repos_url":"https://api.github.com/users/blsnttt/repos","events_url":"https://api.github.com/users/blsnttt/events{/privacy}","received_events_url":"https://api.github.com/users/blsnttt/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-05-26T17:41:26Z","updated_at":"2020-07-08T11:24:22Z","closed_at":"2020-07-08T11:24:22Z","author_association":"NONE","active_lock_reason":null,"body":"Hey! I was working on a project based on the blog-view example. While trying to a test heroku deploy, I saw the remote build failed, while the local build completed just fine.\r\n\r\nI've then tried deleting the local yarn.lock and modules folder and reinstalling everything again, and the build does in fact fail. I'm guessing something changed in the required dependencies?\r\n\r\nIf I try and place the old yarn.lock and modules folder back again, the app builds just fine again. Also trying a fresh copy of the blog-view example throws the same error, so some package update must be causing this. I've attached  below the error being thrown by the console\r\n\r\n```\r\nTypeError: keystone.getResolvers is not a function\r\n    at createApolloServer (C:\\%projectfolder%\\node_modules\\@keystonejs\\app-graphql\\lib\\apolloServer.js:148:25)\r\n    at GraphQLApp.prepareMiddleware (C:\\%projectfolder%\\node_modules\\@keystonejs\\app-graphql\\index.js:23:20)\r\n    at C:\\%projectfolder%\\node_modules\\@keystonejs\\keystone\\lib\\Keystone\\index.js:752:17\r\n    at Array.map (<anonymous>)\r\n    at Keystone.prepare (C:\\%projectfolder%\\node_modules\\@keystonejs\\keystone\\lib\\Keystone\\index.js:751:12)\r\n    at executeDefaultServer (C:\\%projectfolder%\\node_modules\\@keystonejs\\keystone\\bin\\utils.js:112:42)\r\nerror Command failed with exit code 1.\r\n```","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3111","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3111/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3111/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3111/events","html_url":"https://github.com/keystonejs/keystone/issues/3111","id":630703348,"node_id":"MDU6SXNzdWU2MzA3MDMzNDg=","number":3111,"title":"createReadStream not working in File type","user":{"login":"andyfcx","id":11717383,"node_id":"MDQ6VXNlcjExNzE3Mzgz","avatar_url":"https://avatars0.githubusercontent.com/u/11717383?v=4","gravatar_id":"","url":"https://api.github.com/users/andyfcx","html_url":"https://github.com/andyfcx","followers_url":"https://api.github.com/users/andyfcx/followers","following_url":"https://api.github.com/users/andyfcx/following{/other_user}","gists_url":"https://api.github.com/users/andyfcx/gists{/gist_id}","starred_url":"https://api.github.com/users/andyfcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyfcx/subscriptions","organizations_url":"https://api.github.com/users/andyfcx/orgs","repos_url":"https://api.github.com/users/andyfcx/repos","events_url":"https://api.github.com/users/andyfcx/events{/privacy}","received_events_url":"https://api.github.com/users/andyfcx/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-06-04T10:28:29Z","updated_at":"2020-08-12T00:13:09Z","closed_at":"2020-08-12T00:13:09Z","author_association":"NONE","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n`createReadStream()` in @keystonejs/fields/dist/fields.cjs.js  line 672\r\nCannot read the file properly, and caused \r\n`[Error: ENOENT: no such file or directory, stat 'THAT_IMAGE']`\r\nAnd the `path` on the error shown does not look right (e.g., the absolute path)\r\n\r\nPerhaps this is not a real bug, or I just missed up something. \r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behaviour. Please provide code snippets or a repository:\r\nI am using a customized adapter to Google Cloud Storage\r\n```\r\nconst {Storage} = require('@google-cloud/storage');\r\nconst Path = require('path')\r\nconst gcskeyfile = './configs/gcskeyfile.json';\r\n\r\nmodule.exports.GCSAdapter = class {\r\n    constructor(gcsDir, gcskeyfilePath=gcskeyfile){\r\n        console.log(gcskeyfile)\r\n\r\n        process.env.GOOGLE_APPLICATION_CREDENTIALS = gcskeyfilePath\r\n        this.storage = new Storage()\r\n        this.bucket = this.storage.bucket('somebucket')\r\n        this.gcsDir = gcsDir\r\n    }\r\n\r\n    getFilename({ id, originalFilename }) {\r\n        return `${id}-${originalFilename}`;\r\n      }\r\n    \r\n    // https://googleapis.dev/nodejs/storage/latest/Bucket.html#upload\r\n    async save({stream, filename, id, mimetype, encoding}) {\r\n        return new Promise((resolve, reject) => {\r\n            console.log(\"Got :\",filename)\r\n            const baseName = Path.basename(filename)\r\n\r\n            try {\r\n                const fulfilled = this.bucket.upload(filename, this.getOptions(baseName), (err, file) => {\r\n                    if (err) {console.log(err)};\r\n                console.log(file)})\r\n            }\r\n            catch (err) {console.log(err)}\r\n        })\r\n    }\r\n\r\n    getOptions(filename) {\r\n        let destination = `${this.gcsDir}${filename}`;\r\n        // console.log(destination)\r\n        let options = {\r\n            gzip: true,\r\n            destination: destination,\r\n            metadata: {\r\n                cacheControl: 'public, max-age=31536000',\r\n            },\r\n        };\r\n\r\n        return options\r\n    }\r\n```\r\n\r\n1. Go to the right column and add an image\r\n2. Click on [Create]\r\n3. Scroll down to the console\r\n4. See error\r\n\r\n## Expected behaviour\r\nFile should be uploaded successfully\r\n\r\n## Screenshots\r\n\r\n![image](https://user-images.githubusercontent.com/11717383/83744389-a1e61a00-a68e-11ea-9319-a806f946ee86.png)\r\n![image](https://user-images.githubusercontent.com/11717383/83744425-b0cccc80-a68e-11ea-8ce5-e8d9450c1c43.png)\r\n\r\n## System information\r\n- OS: macOS Mojave 10.14.6\r\n- Browser Chrome 80.0.3987.163\r\n- Node.js 10.16.3\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3004","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3004/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3004/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3004/events","html_url":"https://github.com/keystonejs/keystone/issues/3004","id":621932711,"node_id":"MDU6SXNzdWU2MjE5MzI3MTE=","number":3004,"title":"Fields with Underscores Cause Runtime Error when Using Postgres/Knex","user":{"login":"hew","id":3103241,"node_id":"MDQ6VXNlcjMxMDMyNDE=","avatar_url":"https://avatars0.githubusercontent.com/u/3103241?v=4","gravatar_id":"","url":"https://api.github.com/users/hew","html_url":"https://github.com/hew","followers_url":"https://api.github.com/users/hew/followers","following_url":"https://api.github.com/users/hew/following{/other_user}","gists_url":"https://api.github.com/users/hew/gists{/gist_id}","starred_url":"https://api.github.com/users/hew/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hew/subscriptions","organizations_url":"https://api.github.com/users/hew/orgs","repos_url":"https://api.github.com/users/hew/repos","events_url":"https://api.github.com/users/hew/events{/privacy}","received_events_url":"https://api.github.com/users/hew/received_events","type":"User","site_admin":false},"labels":[{"id":1363804218,"node_id":"MDU6TGFiZWwxMzYzODA0MjE4","url":"https://api.github.com/repos/keystonejs/keystone/labels/good%20first%20issue","name":"good first issue","color":"42e58e","default":true,"description":""},{"id":1230853436,"node_id":"MDU6TGFiZWwxMjMwODUzNDM2","url":"https://api.github.com/repos/keystonejs/keystone/labels/knex","name":"knex","color":"6ffcc3","default":false,"description":"The knex adapter"},{"id":1594380455,"node_id":"MDU6TGFiZWwxNTk0MzgwNDU1","url":"https://api.github.com/repos/keystonejs/keystone/labels/verified","name":"verified","color":"8de881","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2020-05-20T17:04:55Z","updated_at":"2020-07-07T04:58:21Z","closed_at":"2020-07-07T04:58:20Z","author_association":"NONE","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nIf you create a List with a field that has an underscore using Postgres/Knex, Keystone errors out. \r\n\r\n## To Reproduce\r\n\r\n1. Start a new keystone project\r\n2. Choose postgres/Knex\r\n3. Create a list with a field that has an underscore (ie: `user_id`)\r\n4. Try to view that list\r\n\r\n```\r\n \"@keystonejs/adapter-knex\": \"^10.0.0\",\r\n \"@keystonejs/app-admin-ui\": \"^6.0.0\",\r\n```\r\n\r\n## Expected behaviour\r\n\r\nKeystone should not crash when viewing a list that has an underscore.\r\n\r\n## Screenshots\r\n\r\nIf applicable, add screenshots to help explain your problem.\r\n![image](https://user-images.githubusercontent.com/3103241/82475068-c6cc7180-9a80-11ea-9bf6-e9316559dc20.png)\r\n\r\n\r\n## System information\r\n\r\n- OS: macOS\r\n- All browsers\r\n\r\n## Additional context\r\n\r\nFields with underscores seem to be missing at the graphQL filtering level.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2834","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2834/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2834/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2834/events","html_url":"https://github.com/keystonejs/keystone/issues/2834","id":607031689,"node_id":"MDU6SXNzdWU2MDcwMzE2ODk=","number":2834,"title":"Bad v5 link on v4 docs site","user":{"login":"Vultraz","id":3558659,"node_id":"MDQ6VXNlcjM1NTg2NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/3558659?v=4","gravatar_id":"","url":"https://api.github.com/users/Vultraz","html_url":"https://github.com/Vultraz","followers_url":"https://api.github.com/users/Vultraz/followers","following_url":"https://api.github.com/users/Vultraz/following{/other_user}","gists_url":"https://api.github.com/users/Vultraz/gists{/gist_id}","starred_url":"https://api.github.com/users/Vultraz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vultraz/subscriptions","organizations_url":"https://api.github.com/users/Vultraz/orgs","repos_url":"https://api.github.com/users/Vultraz/repos","events_url":"https://api.github.com/users/Vultraz/events{/privacy}","received_events_url":"https://api.github.com/users/Vultraz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-26T14:55:24Z","updated_at":"2020-06-01T12:34:40Z","closed_at":"2020-06-01T12:34:40Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The banner on the v4 docs site links to `https://v4.keystonejs.com/https://keystonejs.com/`. Looks like maybe https://github.com/keystonejs/keystone-classic/commit/e9954ef1c91e73332aaa156049ac8c64ec3173c8 wasn't applied to the live site? 🤔 ","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2658","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2658/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2658/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2658/events","html_url":"https://github.com/keystonejs/keystone/issues/2658","id":594310298,"node_id":"MDU6SXNzdWU1OTQzMTAyOTg=","number":2658,"title":"Admin UI: Support passport auth","user":{"login":"zenflow","id":3198597,"node_id":"MDQ6VXNlcjMxOTg1OTc=","avatar_url":"https://avatars1.githubusercontent.com/u/3198597?v=4","gravatar_id":"","url":"https://api.github.com/users/zenflow","html_url":"https://github.com/zenflow","followers_url":"https://api.github.com/users/zenflow/followers","following_url":"https://api.github.com/users/zenflow/following{/other_user}","gists_url":"https://api.github.com/users/zenflow/gists{/gist_id}","starred_url":"https://api.github.com/users/zenflow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zenflow/subscriptions","organizations_url":"https://api.github.com/users/zenflow/orgs","repos_url":"https://api.github.com/users/zenflow/repos","events_url":"https://api.github.com/users/zenflow/events{/privacy}","received_events_url":"https://api.github.com/users/zenflow/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-05T07:36:25Z","updated_at":"2020-06-03T01:36:20Z","closed_at":"2020-06-03T01:36:19Z","author_association":"NONE","active_lock_reason":null,"body":"# Feature request\r\n\r\n## Description\r\n\r\nCurrently only password auth is supported in the Admin UI:\r\n\r\n> [...] only password auth is currently supported in the admin UI\r\n@molomby https://github.com/keystonejs/keystone/issues/2581#issuecomment-607566838\r\n\r\nIt would be great to be able to also use **passport** auth with the Admin UI.\r\n\r\nHere is some discussion of this issue in a *related* issue: https://github.com/keystonejs/keystone/issues/2581#issuecomment-607040710\r\n\r\n## Proposed solution\r\n\r\nSee #2657 , specifically these commits https://github.com/keystonejs/keystone/pull/2657/files/a30f2547b21335f48dc564ee4a75914dc80c84e6..f06410ac7c533a14158b03aeacc98ff6daa7bfed","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2761","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2761/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2761/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2761/events","html_url":"https://github.com/keystonejs/keystone/issues/2761","id":601416799,"node_id":"MDU6SXNzdWU2MDE0MTY3OTk=","number":2761,"title":"Blog demo project doesn't work","user":{"login":"pahaz","id":1394025,"node_id":"MDQ6VXNlcjEzOTQwMjU=","avatar_url":"https://avatars2.githubusercontent.com/u/1394025?v=4","gravatar_id":"","url":"https://api.github.com/users/pahaz","html_url":"https://github.com/pahaz","followers_url":"https://api.github.com/users/pahaz/followers","following_url":"https://api.github.com/users/pahaz/following{/other_user}","gists_url":"https://api.github.com/users/pahaz/gists{/gist_id}","starred_url":"https://api.github.com/users/pahaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pahaz/subscriptions","organizations_url":"https://api.github.com/users/pahaz/orgs","repos_url":"https://api.github.com/users/pahaz/repos","events_url":"https://api.github.com/users/pahaz/events{/privacy}","received_events_url":"https://api.github.com/users/pahaz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-16T20:08:06Z","updated_at":"2020-06-03T03:27:09Z","closed_at":"2020-06-03T03:27:08Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nIf you try to follow a README: https://github.com/keystonejs/keystone/tree/master/demo-projects/blog\r\nYou'll get an error.\r\n\r\n```\r\ngit clone https://github.com/keystonejs/keystone\r\ncd keystone/demo-projects/todo\r\nrm -rf node_modules\r\ngit pull\r\nyarn\r\nyarn dev\r\n```\r\n\r\n## Screenshots\r\n\r\n![image](https://user-images.githubusercontent.com/1394025/79501485-c894b680-8036-11ea-9548-eae5e641943f.png)\r\n\r\n```\r\n$ cross-env NODE_ENV=development DISABLE_LOGGING=true keystone dev\r\ninternal/modules/cjs/loader.js:327\r\n      throw err;\r\n      ^\r\n\r\nError: Cannot find module '/Users/pahaz/Code/node-docker-compose-dev/keystone/node_modules/@keystonejs/utils/dist/utils.cjs.js'. Please verify that the package.json has a valid \"main\" entry\r\n    at tryPackage (internal/modules/cjs/loader.js:319:19)\r\n    at Function.Module._findPath (internal/modules/cjs/loader.js:703:18)\r\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:967:27)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:862:27)\r\n    at Module.require (internal/modules/cjs/loader.js:1042:19)\r\n    at require (internal/modules/cjs/helpers.js:77:18)\r\n    at Object.<anonymous> (/Users/pahaz/Code/node-docker-compose-dev/keystone/packages/keystone/bin/commands/create-tables.js:5:26)\r\n    at Module._compile (internal/modules/cjs/loader.js:1156:30)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1176:10)\r\n    at Module.load (internal/modules/cjs/loader.js:1000:32) {\r\n  code: 'MODULE_NOT_FOUND',\r\n  path: '/Users/pahaz/Code/node-docker-compose-dev/keystone/node_modules/@keystonejs/utils/package.json',\r\n  requestPath: '@keystonejs/utils'\r\n}\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2769","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2769/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2769/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2769/events","html_url":"https://github.com/keystonejs/keystone/issues/2769","id":601867650,"node_id":"MDU6SXNzdWU2MDE4Njc2NTA=","number":2769,"title":"Keystone don't shows Sign In problem in production environment (Sign In works only for https)","user":{"login":"pahaz","id":1394025,"node_id":"MDQ6VXNlcjEzOTQwMjU=","avatar_url":"https://avatars2.githubusercontent.com/u/1394025?v=4","gravatar_id":"","url":"https://api.github.com/users/pahaz","html_url":"https://github.com/pahaz","followers_url":"https://api.github.com/users/pahaz/followers","following_url":"https://api.github.com/users/pahaz/following{/other_user}","gists_url":"https://api.github.com/users/pahaz/gists{/gist_id}","starred_url":"https://api.github.com/users/pahaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pahaz/subscriptions","organizations_url":"https://api.github.com/users/pahaz/orgs","repos_url":"https://api.github.com/users/pahaz/repos","events_url":"https://api.github.com/users/pahaz/events{/privacy}","received_events_url":"https://api.github.com/users/pahaz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-04-17T10:22:28Z","updated_at":"2020-06-03T04:07:16Z","closed_at":"2020-06-03T03:33:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nIf I use `yarn dev`:\r\n![image](https://user-images.githubusercontent.com/1394025/79558983-aee28600-80ad-11ea-901f-2bb5b7d71481.png)\r\n\r\nThen I use `yarn build && yarn start` with the same credentials:\r\n![image](https://user-images.githubusercontent.com/1394025/79558363-b0f81500-80ac-11ea-85eb-0c3b627063ad.png)\r\n\r\n## To Reproduce\r\n\r\nYou can reproduce it with demo projects https://github.com/keystonejs/keystone/issues/2761 or with `yarn create keystone-app my-app`.\r\n\r\n## System information\r\n\r\n- OS: macOS\r\n- Browser: chrome\r\n\r\n## Additional context\r\n\r\nIs the `keystonejs` ready for production? Do you have any production project based on the Keystonejs?","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3239","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3239/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3239/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3239/events","html_url":"https://github.com/keystonejs/keystone/issues/3239","id":652630438,"node_id":"MDU6SXNzdWU2NTI2MzA0Mzg=","number":3239,"title":"Incorrect exitistingItem value passed to hooks in updateManyMutation","user":{"login":"gautamsi","id":5769869,"node_id":"MDQ6VXNlcjU3Njk4Njk=","avatar_url":"https://avatars2.githubusercontent.com/u/5769869?v=4","gravatar_id":"","url":"https://api.github.com/users/gautamsi","html_url":"https://github.com/gautamsi","followers_url":"https://api.github.com/users/gautamsi/followers","following_url":"https://api.github.com/users/gautamsi/following{/other_user}","gists_url":"https://api.github.com/users/gautamsi/gists{/gist_id}","starred_url":"https://api.github.com/users/gautamsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gautamsi/subscriptions","organizations_url":"https://api.github.com/users/gautamsi/orgs","repos_url":"https://api.github.com/users/gautamsi/repos","events_url":"https://api.github.com/users/gautamsi/events{/privacy}","received_events_url":"https://api.github.com/users/gautamsi/received_events","type":"User","site_admin":false},"labels":[{"id":1606736327,"node_id":"MDU6TGFiZWwxNjA2NzM2MzI3","url":"https://api.github.com/repos/keystonejs/keystone/labels/Priority:%201","name":"Priority: 1","color":"0052cc","default":false,"description":""},{"id":890973299,"node_id":"MDU6TGFiZWw4OTA5NzMyOTk=","url":"https://api.github.com/repos/keystonejs/keystone/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1241823290,"node_id":"MDU6TGFiZWwxMjQxODIzMjkw","url":"https://api.github.com/repos/keystonejs/keystone/labels/core","name":"core","color":"b5701c","default":false,"description":""},{"id":1373654815,"node_id":"MDU6TGFiZWwxMzczNjU0ODE1","url":"https://api.github.com/repos/keystonejs/keystone/labels/hooks","name":"hooks","color":"cea3e2","default":false,"description":""},{"id":1594380455,"node_id":"MDU6TGFiZWwxNTk0MzgwNDU1","url":"https://api.github.com/repos/keystonejs/keystone/labels/verified","name":"verified","color":"8de881","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-07-07T20:46:40Z","updated_at":"2020-07-08T05:14:02Z","closed_at":"2020-07-08T05:14:02Z","author_association":"MEMBER","active_lock_reason":null,"body":"# Bug report\r\nSeems like the updateManyMutation which takes the input in the form of `[{id, data}, {id, data}]` randomizes the sequence of update item with corresponding item id, I got a very upset customer where the prices were mixing up and some actual sold items caused loss :( (I know there is no warranty, just expressing my frustration)\r\n\r\n## Describe the bug\r\n\r\nWhen I try to update multiple records with `updateManyMutation`, It is not providing `existingItem` corresponding to item trying to update. You do not face any issue when there are no hooks or the hooks do not update `resolveData`, but when you change any field in `resolveInput` or compare the value for `updatedItem.id` and `existingItem.id` in `afterChange` hook, you will see difference data.\r\n\r\n## To Reproduce\r\n\r\nclone blog demo\r\n\r\n1. Add additional field to list, say \"postId\" in Post list.\r\n2. add `resolveInput` hook to copy value of `id` field to `postId` field\r\n3. add `afterChange` hook and log value of `existingItem.id` and ``updatedItem.id`\r\n4. have at least 4-5 Posts\r\n5. try to update multiple Post (min 3) and set field like `status` to something else currently set ( you can use \"Update\" button on items selection or use GraphQL method for `UpdateManyPosts` mutation)\r\n6. notice the difference in `id` of the post and id value in `postId` field\r\n7. also notice the console log in `afterChange` hook\r\n\r\ntry to update few time if it does not happen at once or select 6-7 posts in update.\r\n\r\nupdate: see diff, what I had to do to repro https://github.com/keystonejs/keystone/compare/master...gautamsi:error-in-many-mutation?expand=1\r\n\r\n## Expected behaviour\r\n\r\nThere should not be any issues like that, you must always have `existingItem.id === updatedItem.id`\r\n\r\n## Screenshots\r\n\r\nN/A\r\n\r\n## System information\r\n\r\n- OS: Windows/Mac\r\n- Browser (if applies) [e.g. chrome, safari]\r\n\r\n## Additional context\r\n\r\nI traced this issue to following few lines\r\n\r\nwhere call to `zipObj` util function is unreliable \r\nhttps://github.com/keystonejs/keystone/blob/5ad84ccd8d008188e293629e90a4d7e7fde55333/packages/keystone/lib/ListTypes/list.js#L837\r\n\r\nI will also create a PR\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3208","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3208/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3208/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3208/events","html_url":"https://github.com/keystonejs/keystone/issues/3208","id":646992213,"node_id":"MDU6SXNzdWU2NDY5OTIyMTM=","number":3208,"title":"Deleting value in Location field leads to 'Unable to render view'","user":{"login":"petrkrizek","id":37615991,"node_id":"MDQ6VXNlcjM3NjE1OTkx","avatar_url":"https://avatars0.githubusercontent.com/u/37615991?v=4","gravatar_id":"","url":"https://api.github.com/users/petrkrizek","html_url":"https://github.com/petrkrizek","followers_url":"https://api.github.com/users/petrkrizek/followers","following_url":"https://api.github.com/users/petrkrizek/following{/other_user}","gists_url":"https://api.github.com/users/petrkrizek/gists{/gist_id}","starred_url":"https://api.github.com/users/petrkrizek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petrkrizek/subscriptions","organizations_url":"https://api.github.com/users/petrkrizek/orgs","repos_url":"https://api.github.com/users/petrkrizek/repos","events_url":"https://api.github.com/users/petrkrizek/events{/privacy}","received_events_url":"https://api.github.com/users/petrkrizek/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-06-28T19:42:48Z","updated_at":"2020-07-09T11:18:29Z","closed_at":"2020-07-09T11:18:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nSee the title.\r\nError in console: \r\nUncaught TypeError: Cannot destructure property 'googlePlaceID' of 'value' as it is null.\r\n\r\n## To Reproduce\r\n\r\n1. Create a Location field\r\n2. Select some address\r\n3. Delete address\r\n4. Unable to render view\r\n\r\n## Expected behaviour\r\nTo see map again\r\n\r\n## The problem\r\nIn the file 'packages/fields/src/types/Location/views/Field.js' on line 11 there is destructuring of 'value' that is null. Assigning default value does not help, since null is not undefined.\r\n[https://github.com/keystonejs/keystone/blob/master/packages/fields/src/types/Location/views/Field.js#L11](https://github.com/keystonejs/keystone/blob/master/packages/fields/src/types/Location/views/Field.js#L11)\r\n\r\n## The fix\r\nMove the destructuring out from fn argument and add empty object 'fallback' like this:\r\n\r\n`const {\r\n    googlePlaceID,\r\n    formattedAddress,\r\n    lat,\r\n    lng\r\n  } = (value || {})`\r\n\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2398","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2398/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2398/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2398/events","html_url":"https://github.com/keystonejs/keystone/issues/2398","id":567439369,"node_id":"MDU6SXNzdWU1Njc0MzkzNjk=","number":2398,"title":"How do the custom Admin pages work in the demo-projects/blog example?","user":{"login":"ra-external","id":60699805,"node_id":"MDQ6VXNlcjYwNjk5ODA1","avatar_url":"https://avatars0.githubusercontent.com/u/60699805?v=4","gravatar_id":"","url":"https://api.github.com/users/ra-external","html_url":"https://github.com/ra-external","followers_url":"https://api.github.com/users/ra-external/followers","following_url":"https://api.github.com/users/ra-external/following{/other_user}","gists_url":"https://api.github.com/users/ra-external/gists{/gist_id}","starred_url":"https://api.github.com/users/ra-external/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ra-external/subscriptions","organizations_url":"https://api.github.com/users/ra-external/orgs","repos_url":"https://api.github.com/users/ra-external/repos","events_url":"https://api.github.com/users/ra-external/events{/privacy}","received_events_url":"https://api.github.com/users/ra-external/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-02-19T09:42:45Z","updated_at":"2020-06-10T08:21:52Z","closed_at":"2020-06-05T22:58:16Z","author_association":"NONE","active_lock_reason":null,"body":"This is not an issue per se, but we are looking to use Keystone in a large project but we would want to be able to customise the Admin panel.  I've been reviewing https://github.com/keystonejs/keystone/pull/1019/files as well as looking at https://github.com/keystonejs/keystone/tree/master/demo-projects/blog and although it looks good, I don't understand the logic behind it, that is, what we would need to implement to make it work. \r\n\r\nIs it the case that when you use the Keystone NextJS app (which is good for us), if you add a folder `/admin/pages` the Keystone app will look there and use those custom admin pages instead of the regular ones?  What are the possibilities and constraints in this setup?  I'm assuming we have full access to the rest of the app, the controllers, the DB from these pages as well....\r\n\r\nI also noticed that @JedWatson notes in https://github.com/keystonejs/keystone/pull/1019 that \r\n\r\n> Note this lacks SSR support, and I didn't put as much effort into the examples, but it's otherwise (I think) identical in functionality.\r\n\r\nDoes it lack SSR support just for the admin part, or does adding custom admin pages somehow affect SSR support in the rest of the app? (SSR is the reason we're using next)\r\n\r\nThanks for any info.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/motdotla/dotenv/issues/470","repository_url":"https://api.github.com/repos/motdotla/dotenv","labels_url":"https://api.github.com/repos/motdotla/dotenv/issues/470/labels{/name}","comments_url":"https://api.github.com/repos/motdotla/dotenv/issues/470/comments","events_url":"https://api.github.com/repos/motdotla/dotenv/issues/470/events","html_url":"https://github.com/motdotla/dotenv/issues/470","id":617529079,"node_id":"MDU6SXNzdWU2MTc1MjkwNzk=","number":470,"title":"Env variables seem to be cached","user":{"login":"ra-external","id":60699805,"node_id":"MDQ6VXNlcjYwNjk5ODA1","avatar_url":"https://avatars0.githubusercontent.com/u/60699805?v=4","gravatar_id":"","url":"https://api.github.com/users/ra-external","html_url":"https://github.com/ra-external","followers_url":"https://api.github.com/users/ra-external/followers","following_url":"https://api.github.com/users/ra-external/following{/other_user}","gists_url":"https://api.github.com/users/ra-external/gists{/gist_id}","starred_url":"https://api.github.com/users/ra-external/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ra-external/subscriptions","organizations_url":"https://api.github.com/users/ra-external/orgs","repos_url":"https://api.github.com/users/ra-external/repos","events_url":"https://api.github.com/users/ra-external/events{/privacy}","received_events_url":"https://api.github.com/users/ra-external/received_events","type":"User","site_admin":false},"labels":[{"id":46581076,"node_id":"MDU6TGFiZWw0NjU4MTA3Ng==","url":"https://api.github.com/repos/motdotla/dotenv/labels/question","name":"question","color":"cc317c","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-05-13T15:07:43Z","updated_at":"2020-05-21T16:10:33Z","closed_at":"2020-05-21T16:10:33Z","author_association":"NONE","active_lock_reason":null,"body":"I am working on a KeystoneJS project, currently running in development mode on NodeJS 12.14.0.  About a week or ten days ago I noticed that even though I changed some environment variables in `.env` the changes were *not* reflected at run-time.  I've had to actually introduce new variables for the changes to take effect.  \r\n\r\nI've done searches (using WebStorm and VSC) in my code for the old information, but it only appears in my debug logs.  That is to say, if the old value of my env var `ANIMAL` was 'rooster' and I've changed it to 'lizard', 'rooster' does not appear anywhere in my code.  And yet `ANIMAL` keeps having the value `rooster` at runtime.  So that I have to introduce a *new* variable, `NEW_ANIMAL=lizard` to make any changes work.  \r\n\r\nThis does not happen with all env variables -- for instance, I just added a new one, `TEST=1`, ran the app, stopped, changed it to `TEST=2`, and the change worked fine.  I do not see a pattern in what variables are affected.\r\n\r\nI'm launching the project through Keystone's launch script, and I'm using TypeScript.  My launch script is \r\n\r\n`    \"dev\": \"tsc && cross-env NODE_ENV=development DISABLE_LOGGING=true  keystone --entry=tsout/index.js dev --port=4545\"`\r\n\r\n`dotenv`is being loaded at the top of the entry point to the project, `/index.ts`,\r\n\r\n    require('dotenv').config();\r\n\r\n which is run each time the project is restarted (for the record, I'm using Babel to be able to use `import` instead of `require` throughout the project, but I can't imagine that matters).  \r\n\r\nI just spent half an hour with another dev here going over this and neither of us could figure it out (actually we were trying to track down a weird bug and it turned out it was because even though the `.env` variable had been changed, the app was still reading the old value).  \r\n\r\nIf anyone has ever encountered anything like this before -- or has any clues on how to figure it out -- I'd be very grateful.\r\n\r\nI include my `package.json` below.  I'm running MacOS 10.14.x and NodeJS 12.14.0, for what it's worth.\r\n```\r\n\r\n    {\r\n      \"name\": \"@keystonejs/example-projects-blank\",\r\n      \"description\": \"A blank KeystoneJS starter project.\",\r\n      \"private\": true,\r\n      \"version\": \"5.0.0\",\r\n      \"author\": \"The KeystoneJS Development Team\",\r\n      \"repository\": \"https://github.com/keystonejs/keystone.git\",\r\n      \"homepage\": \"https://github.com/keystonejs/keystone\",\r\n      \"license\": \"MIT\",\r\n      \"engines\": {\r\n        \"node\": \">=10.0.0\"\r\n      },\r\n      \"scripts\": {\r\n        \"dev\": \"tsc && cross-env NODE_ENV=development DISABLE_LOGGING=true  keystone --entry=tsout/index.js dev --port=4545\",\r\n        \"build\": \"cross-env NODE_ENV=production keystone build\",\r\n        \"start\": \"cross-env NODE_ENV=production keystone start\",\r\n        \"keystone\": \"keystone upgrade-relationships --index=tsout/index.js\"\r\n      },\r\n      \"dependencies\": {\r\n        \"@apollo/react-hooks\": \"^3.1.5\",\r\n        \"@arch-ui/fields\": \"^3.0.1\",\r\n        \"@arch-ui/layout\": \"^0.2.13\",\r\n        \"@arch-ui/typography\": \"^0.0.17\",\r\n        \"@emotion/core\": \"^10.0.28\",\r\n        \"@emotion/styled\": \"^10.0.27\",\r\n        \"@keystonejs/adapter-mongoose\": \"^8.1.0\",\r\n        \"@keystonejs/app-admin-ui\": \"^6.0.0\",\r\n        \"@keystonejs/app-graphql\": \"^5.1.7\",\r\n        \"@keystonejs/app-next\": \"^5.1.2\",\r\n        \"@keystonejs/app-static\": \"^5.1.2\",\r\n        \"@keystonejs/auth-password\": \"^5.1.7\",\r\n        \"@keystonejs/field-content\": \"^6.0.0\",\r\n        \"@keystonejs/fields\": \"^10.0.0\",\r\n        \"@keystonejs/fields-markdown\": \"^5.1.10\",\r\n        \"@keystonejs/fields-wysiwyg-tinymce\": \"^5.2.7\",\r\n        \"@keystonejs/file-adapters\": \"^6.0.2\",\r\n        \"@keystonejs/keystone\": \"^9.0.0\",\r\n        \"@keystonejs/list-plugins\": \"^5.1.4\",\r\n        \"@keystonejs/oembed-adapters\": \"^5.1.4\",\r\n        \"@tinymce/tinymce-react\": \"^3.6.0\",\r\n        \"@zeit/next-sass\": \"^1.0.1\",\r\n        \"apollo-boost\": \"^0.4.8\",\r\n        \"apollo-cache-inmemory\": \"^1.6.6\",\r\n        \"apollo-client\": \"^2.6.9\",\r\n        \"apollo-fetch\": \"^0.7.0\",\r\n        \"apollo-link-http\": \"^1.5.17\",\r\n        \"apollo-upload-client\": \"^13.0.0\",\r\n        \"app-root-path\": \"^3.0.0\",\r\n        \"axios\": \"^0.19.2\",\r\n        \"connect-mongo\": \"^3.2.0\",\r\n        \"cron\": \"^1.8.2\",\r\n        \"cross-env\": \"^7.0.0\",\r\n        \"date-fns\": \"^1.30.1\",\r\n        \"disqus-react\": \"^1.0.7\",\r\n        \"dotenv\": \"^8.2.0\",\r\n        \"express\": \"^4.17.1\",\r\n        \"express-fileupload\": \"^1.1.6\",\r\n        \"express-session\": \"^1.17.1\",\r\n        \"graphql\": \"^14.6.0\",\r\n        \"graphql-tag\": \"^2.10.3\",\r\n        \"isomorphic-unfetch\": \"^3.0.0\",\r\n        \"jsonwebtoken\": \"^8.5.1\",\r\n        \"lodash\": \"^4.17.15\",\r\n        \"loglevel\": \"^1.6.7\",\r\n        \"moment\": \"^2.24.0\",\r\n        \"multer\": \"^1.4.2\",\r\n        \"next\": \"^9.3.6\",\r\n        \"next-with-apollo\": \"^5.0.1\",\r\n        \"node-cron\": \"^2.0.3\",\r\n        \"node-fetch\": \"^2.6.0\",\r\n        \"node-sass\": \"^4.14.1\",\r\n        \"normalize-scss\": \"^7.0.1\",\r\n        \"ramda\": \"^0.27.0\",\r\n        \"react\": \"^16.13.1\",\r\n        \"react-apollo\": \"^3.1.5\",\r\n        \"react-dom\": \"^16.13.1\",\r\n        \"reading-time\": \"^1.2.0\",\r\n        \"require-directory\": \"^2.1.1\",\r\n        \"sanitize-html\": \"^1.23.0\",\r\n        \"string-strip-html\": \"^4.4.3\",\r\n        \"ts-node\": \"^8.10.1\",\r\n        \"typescript\": \"^3.8.3\",\r\n        \"uuid\": \"^7.0.2\",\r\n        \"validator\": \"^13.0.0\",\r\n        \"winston\": \"^3.2.1\"\r\n      },\r\n      \"devDependencies\": {\r\n        \"@babel/plugin-proposal-optional-chaining\": \"^7.9.0\",\r\n        \"@types/express-fileupload\": \"^1.1.3\",\r\n        \"@types/node\": \"^13.13.5\",\r\n        \"@types/react\": \"^16.9.35\",\r\n        \"@types/winston\": \"^2.4.4\",\r\n        \"babel-cli\": \"^6.26.0\",\r\n        \"babel-preset-env\": \"^1.7.0\",\r\n        \"cz-conventional-changelog\": \"3.2.0\",\r\n        \"eslint-plugin-react-hooks\": \"^4.0.0\",\r\n        \"pino\": \"^6.2.1\",\r\n        \"pino-pretty\": \"^4.0.0\"\r\n      },\r\n      \"config\": {\r\n        \"commitizen\": {\r\n          \"path\": \"./node_modules/cz-conventional-changelog\"\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n```","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/3119","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/3119/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/3119/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/3119/events","html_url":"https://github.com/keystonejs/keystone/issues/3119","id":631540705,"node_id":"MDU6SXNzdWU2MzE1NDA3MDU=","number":3119,"title":"Keystone Postgres data corruption","user":{"login":"pahaz","id":1394025,"node_id":"MDQ6VXNlcjEzOTQwMjU=","avatar_url":"https://avatars2.githubusercontent.com/u/1394025?v=4","gravatar_id":"","url":"https://api.github.com/users/pahaz","html_url":"https://github.com/pahaz","followers_url":"https://api.github.com/users/pahaz/followers","following_url":"https://api.github.com/users/pahaz/following{/other_user}","gists_url":"https://api.github.com/users/pahaz/gists{/gist_id}","starred_url":"https://api.github.com/users/pahaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pahaz/subscriptions","organizations_url":"https://api.github.com/users/pahaz/orgs","repos_url":"https://api.github.com/users/pahaz/repos","events_url":"https://api.github.com/users/pahaz/events{/privacy}","received_events_url":"https://api.github.com/users/pahaz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-06-05T12:05:58Z","updated_at":"2020-06-05T15:33:28Z","closed_at":"2020-06-05T15:16:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"# Bug report\r\n\r\nI have lists like so:\r\n```\r\n...\r\nkeystone.createList('Organization', {\r\n    fields: {\r\n        name: {\r\n            factory: () => faker.company.companyName(),\r\n            type: Text,\r\n        },\r\n        userLinks: {\r\n            type: Relationship, ref: 'OrganizationToUserLink.organization', many: true,\r\n        },\r\n    },\r\n    plugins: [byTracking(), atTracking()],\r\n})\r\n\r\nkeystone.createList('OrganizationToUserLink', {\r\n    fields: {\r\n        organization: {\r\n            type: Relationship,\r\n            ref: 'Organization.userLinks',\r\n            isRequired: true,\r\n            knexOptions: { isNotNullable: true },\r\n        },\r\n        user: {\r\n            type: Relationship,\r\n            ref: 'User',\r\n            isRequired: true,\r\n            knexOptions: { isNotNullable: true },\r\n        },\r\n    },\r\n    plugins: [byTracking(), atTracking()],\r\n})\r\n```\r\n\r\nAnd CI TEST which does something like:\r\n```\r\nconst DELETE_ORGANIZATION_TO_USER_LINK_MUTATION = gql`\r\n    mutation delObj($id: ID!) {\r\n        deleteOrganizationToUserLink(id: $id) { id }\r\n    }\r\n`\r\n...\r\nconst link3Id = 54\r\nconst client = await makeLoggedInClient(...)\r\nconst { data, errors } = await client.mutate(DELETE_ORGANIZATION_TO_USER_LINK_MUTATION, { id: link3Id })\r\n```\r\n\r\nWhen I run this code with a `DEBUG=knex:query,knex:tx` env I can see these queries:\r\n```\r\n...\r\n  knex:query update \"public\".\"OrganizationToUserLink\" set \"organization\" = ? where \"organization\" = ? undefined +18ms\r\n  knex:query update \"public\".\"OrganizationToUserLink\" set \"user\" = ? where \"user\" = ? undefined +1ms\r\n  knex:query update \"public\".\"OrganizationToUserLink\" set \"updatedBy\" = ? where \"updatedBy\" = ? undefined +0ms\r\n  knex:query update \"public\".\"OrganizationToUserLink\" set \"createdBy\" = ? where \"createdBy\" = ? undefined +0ms\r\n  knex:query delete from \"public\".\"OrganizationToUserLink\" where \"id\" = ? undefined +32ms\r\n...\r\n```\r\n\r\nThis queries is triggered by the [code](https://github.com/keystonejs/keystone/blob/fd68524135025e4d800b4a98932916736dd50e9d/packages/adapter-knex/lib/adapter-knex.js#L509-L516): \r\n![image](https://user-images.githubusercontent.com/1394025/83872208-f5b63900-a74a-11ea-8124-012508feadee.png)\r\n\r\nIt looks strange, why do I need to update something before deleting it.\r\n\r\nThen, I raned the code in debug mode. On a screenshot below, I'm trying to delete `OrganizationToUserLink.id == 54` . But, as you can see, it's also trying to set null user column where `OrganizationToUserLink.user.id == 54` :astonished:\r\n\r\n![image](https://user-images.githubusercontent.com/1394025/83872392-53e31c00-a74b-11ea-8e6c-40cde64e841c.png)\r\n\r\n![image](https://user-images.githubusercontent.com/1394025/83872434-69f0dc80-a74b-11ea-9492-dc3ba316f3b4.png)\r\n\r\nThe Keystone tries to update the value of neighboring records for all primary keys that refer to other tables. Probably there is missing a test, this code should only update the table references itself.\r\n\r\n# additional #\r\n\r\nI have a CI test here: https://github.com/8iq/nodejs-hackathon-boilerplate-starter-kit/runs/740039167\r\nThere is a reason why my tests fail on Postgres and work well on Mongo. \r\nBecause there is a different way to generate object ID. \r\nOn the Postgres, the mutation also updates other table rows and corrupt the table data.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2867","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2867/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2867/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2867/events","html_url":"https://github.com/keystonejs/keystone/issues/2867","id":610409363,"node_id":"MDU6SXNzdWU2MTA0MDkzNjM=","number":2867,"title":"Webpack can't resolve imported css files in custom pages.","user":{"login":"LiamAttClarke","id":9361948,"node_id":"MDQ6VXNlcjkzNjE5NDg=","avatar_url":"https://avatars1.githubusercontent.com/u/9361948?v=4","gravatar_id":"","url":"https://api.github.com/users/LiamAttClarke","html_url":"https://github.com/LiamAttClarke","followers_url":"https://api.github.com/users/LiamAttClarke/followers","following_url":"https://api.github.com/users/LiamAttClarke/following{/other_user}","gists_url":"https://api.github.com/users/LiamAttClarke/gists{/gist_id}","starred_url":"https://api.github.com/users/LiamAttClarke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LiamAttClarke/subscriptions","organizations_url":"https://api.github.com/users/LiamAttClarke/orgs","repos_url":"https://api.github.com/users/LiamAttClarke/repos","events_url":"https://api.github.com/users/LiamAttClarke/events{/privacy}","received_events_url":"https://api.github.com/users/LiamAttClarke/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-30T21:48:41Z","updated_at":"2020-06-02T00:41:38Z","closed_at":"2020-06-02T00:41:38Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nImporting a css file in a custom page no longer works with the latest release (`@keystonejs/app-admin-ui v5.12.0`).\r\n\r\n## To Reproduce\r\n\r\n1. Create a [custom page](https://www.keystonejs.com/keystonejs/app-admin-ui/#pages).\r\n2. Import a local css file.\r\nExample:\r\n```jsx\r\nimport './CustomPage.css';\r\n\r\nexport default () => <div className=\"some-class\"></div>;\r\n```\r\n3. Start Keystone and open in the browser.\r\n\r\n## Expected behaviour\r\n\r\nThe css file should be resolved by Webpack as it did in previous versions of `app-admin-ui`.\r\n\r\n## Screenshots\r\n\r\n![Annotation 2020-04-30 172950](https://user-images.githubusercontent.com/9361948/80762282-37c7db80-8b0a-11ea-9fd6-40522de696a0.jpg)\r\n\r\n## System information\r\n\r\n- OS: Windows\r\n\r\n## Additional context\r\n\r\n@Nikodermus Suggested this might be caused by his recent change (https://github.com/keystonejs/keystone/pull/2860). Perhaps this implicitly excludes local css file resolution?\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/2959","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/2959/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/2959/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/2959/events","html_url":"https://github.com/keystonejs/keystone/issues/2959","id":617567711,"node_id":"MDU6SXNzdWU2MTc1Njc3MTE=","number":2959,"title":"Env variables appear to be being cached","user":{"login":"ra-external","id":60699805,"node_id":"MDQ6VXNlcjYwNjk5ODA1","avatar_url":"https://avatars0.githubusercontent.com/u/60699805?v=4","gravatar_id":"","url":"https://api.github.com/users/ra-external","html_url":"https://github.com/ra-external","followers_url":"https://api.github.com/users/ra-external/followers","following_url":"https://api.github.com/users/ra-external/following{/other_user}","gists_url":"https://api.github.com/users/ra-external/gists{/gist_id}","starred_url":"https://api.github.com/users/ra-external/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ra-external/subscriptions","organizations_url":"https://api.github.com/users/ra-external/orgs","repos_url":"https://api.github.com/users/ra-external/repos","events_url":"https://api.github.com/users/ra-external/events{/privacy}","received_events_url":"https://api.github.com/users/ra-external/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-05-13T15:59:06Z","updated_at":"2020-06-03T07:22:33Z","closed_at":"2020-06-03T07:22:33Z","author_association":"NONE","active_lock_reason":null,"body":"I've posted this both in Stack Overflow as well as in the 'issues' of 'dotenv' and have not yet solved it.  I don't know that this is a KeystoneJS issue, but it's the last place I know to look.  In short: could KeystoneJS be caching my env variables somewhere?\r\n\r\nI am working on a KeystoneJS project, currently running in development mode on NodeJS 12.14.0.  About a week or ten days ago I noticed that even though I changed some environment variables in `.env` the changes were *not* reflected at run-time.  I've had to actually introduce new variables for the changes to take effect.  \r\n\r\nI've done searches (using WebStorm and VSC) in my code for the old information, but it only appears in my debug logs.  That is to say, if the old value of my env var `ANIMAL` was 'rooster' and I've changed it to 'lizard', 'rooster' does not appear anywhere in my code.  And yet `ANIMAL` keeps having the value `rooster` at runtime.  So that I have to introduce a *new* variable, `NEW_ANIMAL=lizard` to make any changes work.  \r\n\r\nThis does not happen with all env variables -- for instance, I just added a new one, `TEST=1`, ran the app, stopped, changed it to `TEST=2`, and the change worked fine.  I do not see a pattern in what variables are affected.\r\n\r\nI'm launching the project through Keystone's launch script, and I'm using TypeScript.  My launch script is \r\n\r\n`    \"dev\": \"tsc && cross-env NODE_ENV=development DISABLE_LOGGING=true  keystone --entry=tsout/index.js dev --port=4545\"`\r\n\r\n`dotenv`is being loaded at the top of the entry point to the project, `/index.ts`,\r\n\r\n    require('dotenv').config();\r\n\r\n which is run each time the project is restarted (for the record, I'm using Babel to be able to use `import` instead of `require` throughout the project, but I can't imagine that matters).  \r\n\r\nI just spent half an hour with another dev here going over this and neither of us could figure it out (actually we were trying to track down a weird bug and it turned out it was because even though the `.env` variable had been changed, the app was still reading the old value).  \r\n\r\nIf anyone has ever encountered anything like this before -- or has any clues on how to figure it out -- I'd be very grateful.\r\n\r\nI include my `package.json` below.  I'm running MacOS 10.14.x and NodeJS 12.14.0, for what it's worth.\r\n```\r\n\r\n    {\r\n      \"name\": \"@keystonejs/example-projects-blank\",\r\n      \"description\": \"A blank KeystoneJS starter project.\",\r\n      \"private\": true,\r\n      \"version\": \"5.0.0\",\r\n      \"author\": \"The KeystoneJS Development Team\",\r\n      \"repository\": \"https://github.com/keystonejs/keystone.git\",\r\n      \"homepage\": \"https://github.com/keystonejs/keystone\",\r\n      \"license\": \"MIT\",\r\n      \"engines\": {\r\n        \"node\": \">=10.0.0\"\r\n      },\r\n      \"scripts\": {\r\n        \"dev\": \"tsc && cross-env NODE_ENV=development DISABLE_LOGGING=true  keystone --entry=tsout/index.js dev --port=4545\",\r\n        \"build\": \"cross-env NODE_ENV=production keystone build\",\r\n        \"start\": \"cross-env NODE_ENV=production keystone start\",\r\n        \"keystone\": \"keystone upgrade-relationships --index=tsout/index.js\"\r\n      },\r\n      \"dependencies\": {\r\n        \"@apollo/react-hooks\": \"^3.1.5\",\r\n        \"@arch-ui/fields\": \"^3.0.1\",\r\n        \"@arch-ui/layout\": \"^0.2.13\",\r\n        \"@arch-ui/typography\": \"^0.0.17\",\r\n        \"@emotion/core\": \"^10.0.28\",\r\n        \"@emotion/styled\": \"^10.0.27\",\r\n        \"@keystonejs/adapter-mongoose\": \"^8.1.0\",\r\n        \"@keystonejs/app-admin-ui\": \"^6.0.0\",\r\n        \"@keystonejs/app-graphql\": \"^5.1.7\",\r\n        \"@keystonejs/app-next\": \"^5.1.2\",\r\n        \"@keystonejs/app-static\": \"^5.1.2\",\r\n        \"@keystonejs/auth-password\": \"^5.1.7\",\r\n        \"@keystonejs/field-content\": \"^6.0.0\",\r\n        \"@keystonejs/fields\": \"^10.0.0\",\r\n        \"@keystonejs/fields-markdown\": \"^5.1.10\",\r\n        \"@keystonejs/fields-wysiwyg-tinymce\": \"^5.2.7\",\r\n        \"@keystonejs/file-adapters\": \"^6.0.2\",\r\n        \"@keystonejs/keystone\": \"^9.0.0\",\r\n        \"@keystonejs/list-plugins\": \"^5.1.4\",\r\n        \"@keystonejs/oembed-adapters\": \"^5.1.4\",\r\n        \"@tinymce/tinymce-react\": \"^3.6.0\",\r\n        \"@zeit/next-sass\": \"^1.0.1\",\r\n        \"apollo-boost\": \"^0.4.8\",\r\n        \"apollo-cache-inmemory\": \"^1.6.6\",\r\n        \"apollo-client\": \"^2.6.9\",\r\n        \"apollo-fetch\": \"^0.7.0\",\r\n        \"apollo-link-http\": \"^1.5.17\",\r\n        \"apollo-upload-client\": \"^13.0.0\",\r\n        \"app-root-path\": \"^3.0.0\",\r\n        \"axios\": \"^0.19.2\",\r\n        \"connect-mongo\": \"^3.2.0\",\r\n        \"cron\": \"^1.8.2\",\r\n        \"cross-env\": \"^7.0.0\",\r\n        \"date-fns\": \"^1.30.1\",\r\n        \"disqus-react\": \"^1.0.7\",\r\n        \"dotenv\": \"^8.2.0\",\r\n        \"express\": \"^4.17.1\",\r\n        \"express-fileupload\": \"^1.1.6\",\r\n        \"express-session\": \"^1.17.1\",\r\n        \"graphql\": \"^14.6.0\",\r\n        \"graphql-tag\": \"^2.10.3\",\r\n        \"isomorphic-unfetch\": \"^3.0.0\",\r\n        \"jsonwebtoken\": \"^8.5.1\",\r\n        \"lodash\": \"^4.17.15\",\r\n        \"loglevel\": \"^1.6.7\",\r\n        \"moment\": \"^2.24.0\",\r\n        \"multer\": \"^1.4.2\",\r\n        \"next\": \"^9.3.6\",\r\n        \"next-with-apollo\": \"^5.0.1\",\r\n        \"node-cron\": \"^2.0.3\",\r\n        \"node-fetch\": \"^2.6.0\",\r\n        \"node-sass\": \"^4.14.1\",\r\n        \"normalize-scss\": \"^7.0.1\",\r\n        \"ramda\": \"^0.27.0\",\r\n        \"react\": \"^16.13.1\",\r\n        \"react-apollo\": \"^3.1.5\",\r\n        \"react-dom\": \"^16.13.1\",\r\n        \"reading-time\": \"^1.2.0\",\r\n        \"require-directory\": \"^2.1.1\",\r\n        \"sanitize-html\": \"^1.23.0\",\r\n        \"string-strip-html\": \"^4.4.3\",\r\n        \"ts-node\": \"^8.10.1\",\r\n        \"typescript\": \"^3.8.3\",\r\n        \"uuid\": \"^7.0.2\",\r\n        \"validator\": \"^13.0.0\",\r\n        \"winston\": \"^3.2.1\"\r\n      },\r\n      \"devDependencies\": {\r\n        \"@babel/plugin-proposal-optional-chaining\": \"^7.9.0\",\r\n        \"@types/express-fileupload\": \"^1.1.3\",\r\n        \"@types/node\": \"^13.13.5\",\r\n        \"@types/react\": \"^16.9.35\",\r\n        \"@types/winston\": \"^2.4.4\",\r\n        \"babel-cli\": \"^6.26.0\",\r\n        \"babel-preset-env\": \"^1.7.0\",\r\n        \"cz-conventional-changelog\": \"3.2.0\",\r\n        \"eslint-plugin-react-hooks\": \"^4.0.0\",\r\n        \"pino\": \"^6.2.1\",\r\n        \"pino-pretty\": \"^4.0.0\"\r\n      },\r\n      \"config\": {\r\n        \"commitizen\": {\r\n          \"path\": \"./node_modules/cz-conventional-changelog\"\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n```","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/keystonejs/keystone/issues/191","repository_url":"https://api.github.com/repos/keystonejs/keystone","labels_url":"https://api.github.com/repos/keystonejs/keystone/issues/191/labels{/name}","comments_url":"https://api.github.com/repos/keystonejs/keystone/issues/191/comments","events_url":"https://api.github.com/repos/keystonejs/keystone/issues/191/events","html_url":"https://github.com/keystonejs/keystone/issues/191","id":347651358,"node_id":"MDU6SXNzdWUzNDc2NTEzNTg=","number":191,"title":"Add generic <FieldMessage> to AdminUI - useful for Access Control messages, etc","user":{"login":"jesstelford","id":612020,"node_id":"MDQ6VXNlcjYxMjAyMA==","avatar_url":"https://avatars1.githubusercontent.com/u/612020?v=4","gravatar_id":"","url":"https://api.github.com/users/jesstelford","html_url":"https://github.com/jesstelford","followers_url":"https://api.github.com/users/jesstelford/followers","following_url":"https://api.github.com/users/jesstelford/following{/other_user}","gists_url":"https://api.github.com/users/jesstelford/gists{/gist_id}","starred_url":"https://api.github.com/users/jesstelford/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jesstelford/subscriptions","organizations_url":"https://api.github.com/users/jesstelford/orgs","repos_url":"https://api.github.com/users/jesstelford/repos","events_url":"https://api.github.com/users/jesstelford/events{/privacy}","received_events_url":"https://api.github.com/users/jesstelford/received_events","type":"User","site_admin":false},"labels":[{"id":1606747991,"node_id":"MDU6TGFiZWwxNjA2NzQ3OTkx","url":"https://api.github.com/repos/keystonejs/keystone/labels/Estimate:%20small","name":"Estimate: small","color":"e99695","default":false,"description":""},{"id":1606736327,"node_id":"MDU6TGFiZWwxNjA2NzM2MzI3","url":"https://api.github.com/repos/keystonejs/keystone/labels/Priority:%201","name":"Priority: 1","color":"0052cc","default":false,"description":""},{"id":1264885332,"node_id":"MDU6TGFiZWwxMjY0ODg1MzMy","url":"https://api.github.com/repos/keystonejs/keystone/labels/access-control","name":"access-control","color":"b75819","default":false,"description":""},{"id":1037339786,"node_id":"MDU6TGFiZWwxMDM3MzM5Nzg2","url":"https://api.github.com/repos/keystonejs/keystone/labels/admin-ui","name":"admin-ui","color":"aadd77","default":false,"description":""},{"id":1558225490,"node_id":"MDU6TGFiZWwxNTU4MjI1NDkw","url":"https://api.github.com/repos/keystonejs/keystone/labels/error%20message","name":"error message","color":"fcbdf1","default":false,"description":""},{"id":1560955619,"node_id":"MDU6TGFiZWwxNTYwOTU1NjE5","url":"https://api.github.com/repos/keystonejs/keystone/labels/needs-review","name":"needs-review","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-08-04T22:02:53Z","updated_at":"2020-06-01T01:24:35Z","closed_at":"2020-06-01T01:24:35Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"See: https://github.com/keystonejs/keystone-5/pull/167#pullrequestreview-143206620","performed_via_github_app":null,"score":1.0}]}
0

