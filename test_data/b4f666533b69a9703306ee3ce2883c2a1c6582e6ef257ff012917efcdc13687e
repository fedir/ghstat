HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 14 Apr 2018 20:22:47 GMT
Link: <https://api.github.com/search/issues?q=repo%3Asnapframework%2Fsnap-core+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Asnapframework%2Fsnap-core+type%3Aissue+state%3Aclosed&page=6>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D1F0:148A:14FD884:2FD61D8:5AD26316
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 5
X-Ratelimit-Reset: 1523737400
X-Runtime-Rack: 0.361193
X-Xss-Protection: 1; mode=block

8000
{"total_count":177,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/snapframework/snap-core/issues/275","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/275/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/275/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/275/events","html_url":"https://github.com/snapframework/snap-core/issues/275","id":285772606,"number":275,"title":"a problem with serveDirectory and serveDirectoryWith","user":{"login":"gspia","id":3320792,"avatar_url":"https://avatars1.githubusercontent.com/u/3320792?v=4","gravatar_id":"","url":"https://api.github.com/users/gspia","html_url":"https://github.com/gspia","followers_url":"https://api.github.com/users/gspia/followers","following_url":"https://api.github.com/users/gspia/following{/other_user}","gists_url":"https://api.github.com/users/gspia/gists{/gist_id}","starred_url":"https://api.github.com/users/gspia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gspia/subscriptions","organizations_url":"https://api.github.com/users/gspia/orgs","repos_url":"https://api.github.com/users/gspia/repos","events_url":"https://api.github.com/users/gspia/events{/privacy}","received_events_url":"https://api.github.com/users/gspia/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-01-03T18:38:08Z","updated_at":"2018-01-03T19:56:32Z","closed_at":"2018-01-03T19:56:32Z","author_association":"NONE","body":"Here are the files, where only the \"files3\" respond correctly and show the contents of the static-directory. Other ones are similar and probably they should work, too. Anyhow, they give \"No handler accepted \"/files2/\" and similarly for the others. \"hmm\"-handler works.\r\n\r\nThe Main.hs is quite short and the other ones help to repeat this on nixos. I used 17.09 stable and did try with 'cabal configure && cabal build' and with 'cabal new-build', which in turn, gets 1.3.0.3 but it didn't solve this.\r\n\r\nMain.hs\r\n--\r\n```\r\n{-# LANGUAGE OverloadedStrings, ScopedTypeVariables #-}\r\nmodule Main where\r\nimport           Snap.Core               (Snap)\r\nimport qualified Snap.Core               as Snap\r\nimport qualified Snap.Http.Server        as Snap\r\nimport qualified Snap.Util.FileServe     as Snap\r\napp :: Snap ()\r\napp = Snap.route\r\n    [ (\"hmm\", hmmHandler)\r\n    , (\"/files3\", Snap.serveDirectoryWith Snap.fancyDirectoryConfig \"static\")\r\n    , (\"/files2\", Snap.serveDirectoryWith Snap.defaultDirectoryConfig \"static\")\r\n    , (\"/files1\", Snap.serveDirectoryWith Snap.simpleDirectoryConfig \"static\")\r\n    , (\"/files0\", Snap.serveDirectory \"static\")\r\n    ]\r\n-- works\r\nhmmHandler :: Snap ()\r\nhmmHandler = Snap.writeBS \"hello hmmHandler\"\r\nmain :: IO ()\r\nmain = Snap.quickHttpServe app\r\n```\r\nsnapFS.cabal\r\n--\r\n```\r\nname:                snapFS\r\nversion:             0.1.0.0\r\nbuild-type:          Simple\r\ncabal-version:       >=1.24\r\n\r\nexecutable snapFS\r\n  hs-source-dirs:      src\r\n  main-is:             Main.hs\r\n  default-language:    Haskell2010\r\n  Other-modules:\r\n  build-depends:\r\n    base             >= 4        && < 5,\r\n    -- bytestring       >= 0.10     && < 0.11,\r\n    snap-core        == 1.0.3.1,\r\n    snap-server      == 1.0.3.1\r\n    -- snap-core        >= 1.0.3.1    && < 1.1,\r\n    -- snap-server      >= 1.0.3.1    && < 1.1\r\n  ghc-options:         -Wall -threaded -rtsopts \"-with-rtsopts=-N\"\r\n```\r\n\r\ndefault.nix\r\n--\r\n```\r\n{} :\r\nlet\r\n  nixpkgs = import <nixpkgs> { }; \r\n  pkgs  = nixpkgs.pkgs;\r\n  hpkgs = nixpkgs.pkgs.haskellPackages;\r\n\r\n  adjust = drv : {\r\n    executableSystemDepends = [\r\n      hpkgs.ghcid\r\n      hpkgs.cabal-install\r\n    ];\r\n    buildDepends = [\r\n      hpkgs.hlint\r\n    ];\r\n  };\r\n\r\n  code-base = hpkgs.callPackage  ./snapFS.nix { };\r\n  /* code-base = hpkgs.callCabal2nix \"snapFS\" ./. { }; */\r\n  code = pkgs.haskell.lib.overrideCabal code-base adjust;\r\nin \r\n  code \r\n```\r\n\r\nshell.nix\r\n--\r\n```\r\n{ nixpkgs ? import <nixpkgs> {} } : \r\nlet\r\n  inherit (nixpkgs) pkgs;\r\n  drv = import ./. { };\r\nin\r\nif pkgs.lib.inNixShell then drv.env else drv\r\n\r\n```\r\n\r\nsnapFS.nix\r\n--\r\n```\r\n{ mkDerivation, base, snap-core_1_0_3_1, snap-server_1_0_3_1, stdenv }:\r\nmkDerivation {\r\n  pname = \"snapFS\";\r\n  version = \"0.1.0.0\";\r\n  src = ./.;\r\n  isLibrary = false;\r\n  isExecutable = true;\r\n  executableHaskellDepends = [ base snap-core_1_0_3_1 snap-server_1_0_3_1 ];\r\n  license = stdenv.lib.licenses.bsd3;\r\n}\r\n\r\n```\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/274","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/274/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/274/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/274/events","html_url":"https://github.com/snapframework/snap-core/issues/274","id":258335607,"number":274,"title":"SNAP has problems serving large files (jpegs)","user":{"login":"ChasTheSpaz","id":16024666,"avatar_url":"https://avatars3.githubusercontent.com/u/16024666?v=4","gravatar_id":"","url":"https://api.github.com/users/ChasTheSpaz","html_url":"https://github.com/ChasTheSpaz","followers_url":"https://api.github.com/users/ChasTheSpaz/followers","following_url":"https://api.github.com/users/ChasTheSpaz/following{/other_user}","gists_url":"https://api.github.com/users/ChasTheSpaz/gists{/gist_id}","starred_url":"https://api.github.com/users/ChasTheSpaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChasTheSpaz/subscriptions","organizations_url":"https://api.github.com/users/ChasTheSpaz/orgs","repos_url":"https://api.github.com/users/ChasTheSpaz/repos","events_url":"https://api.github.com/users/ChasTheSpaz/events{/privacy}","received_events_url":"https://api.github.com/users/ChasTheSpaz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-09-17T21:20:46Z","updated_at":"2017-09-22T05:30:51Z","closed_at":"2017-09-22T05:30:51Z","author_association":"NONE","body":"I am developing an image system in Haskell, using the Threepenny webserver. Testing of the prototype system showed problems presenting large jpeg images, from incomplete loading to totally invalidated loading. I consulted with Heinrich Apfelmus about this and he said that SNAP is part of his code that serves the file. I used a small test program directly in SNAP and can consistently produce errors on large jpeg files.\r\n\r\n<pre>\r\nmodule Main where\r\n\r\nimport Snap.Core           (Snap, route)\r\nimport Snap.Http.Server    (quickHttpServe)\r\nimport Snap.Util.FileServe\r\nimport Data.ByteString.Char8\r\n\r\nsite :: Snap ()\r\nsite = route\r\n  [ (pack \"/files\",   serveDirectory                            \"static\")\r\n  , (pack \"/simple\",  serveDirectoryWith simpleDirectoryConfig  \"static\")\r\n  , (pack \"/default\", serveDirectoryWith defaultDirectoryConfig \"static\")\r\n  , (pack \"/fancy\",   serveDirectoryWith fancyDirectoryConfig   \"static\")\r\n  , (pack \"/hy\",      serveFile                                 \"static/hy.jpg\")\r\n  , (pack \"/ostriches\", serveFile                               \"static/ostriches.jpg\")\r\n  , (pack \"/sunflower\", serveFile                               \"static/sunflower150x113.png\")\r\n  , (pack \"/hesperid\",  serveFile                               \"static/hesperid.jpeg\")\r\n  , (pack \"/E\",         serveFile                               \"static/E.png\")\r\n  , (pack \"/3-14\",      serveFile                               \"static/3-14.jpg\")\r\n  , (pack \"/3-20\",      serveFile                               \"static/3-20.jpg\")\r\n  , (pack \"/53\",        serveFile                               \"static/53.jpeg\")\r\n  ]\r\n \r\nmain :: IO ()\r\nmain = quickHttpServe site\r\n</pre>\r\n\r\nNone of the files listed can be attached for reasons known only to github.\r\nComments: file hy.jpg is 13mb, ostriches.jpg in 7.7 mb, hesperid.jpeg is 820 kb, the remaining are\r\nmuch smaller files that served up OK.\r\n\r\nThis issue is also <https://github.com/snapframework/snap/issues/194> slightly modified text.\r\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/270","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/270/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/270/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/270/events","html_url":"https://github.com/snapframework/snap-core/issues/270","id":218761421,"number":270,"title":"Add graceful shutdown on SIGTERM","user":{"login":"mbucc","id":85849,"avatar_url":"https://avatars2.githubusercontent.com/u/85849?v=4","gravatar_id":"","url":"https://api.github.com/users/mbucc","html_url":"https://github.com/mbucc","followers_url":"https://api.github.com/users/mbucc/followers","following_url":"https://api.github.com/users/mbucc/following{/other_user}","gists_url":"https://api.github.com/users/mbucc/gists{/gist_id}","starred_url":"https://api.github.com/users/mbucc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbucc/subscriptions","organizations_url":"https://api.github.com/users/mbucc/orgs","repos_url":"https://api.github.com/users/mbucc/repos","events_url":"https://api.github.com/users/mbucc/events{/privacy}","received_events_url":"https://api.github.com/users/mbucc/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-04-02T12:27:53Z","updated_at":"2017-10-09T21:20:27Z","closed_at":"2017-10-09T21:20:27Z","author_association":"NONE","body":"Don't shutdown server until existing client connections are closed.  Add a config flag, off by default.\r\n\r\nWriting a signal handler is simple enough, but how do you count the number of open client connections?","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/266","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/266/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/266/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/266/events","html_url":"https://github.com/snapframework/snap-core/issues/266","id":196496498,"number":266,"title":"More precise routing","user":{"login":"snap9","id":9166683,"avatar_url":"https://avatars2.githubusercontent.com/u/9166683?v=4","gravatar_id":"","url":"https://api.github.com/users/snap9","html_url":"https://github.com/snap9","followers_url":"https://api.github.com/users/snap9/followers","following_url":"https://api.github.com/users/snap9/following{/other_user}","gists_url":"https://api.github.com/users/snap9/gists{/gist_id}","starred_url":"https://api.github.com/users/snap9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snap9/subscriptions","organizations_url":"https://api.github.com/users/snap9/orgs","repos_url":"https://api.github.com/users/snap9/repos","events_url":"https://api.github.com/users/snap9/events{/privacy}","received_events_url":"https://api.github.com/users/snap9/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-12-19T19:11:48Z","updated_at":"2017-01-10T19:56:29Z","closed_at":"2017-01-10T19:56:29Z","author_association":"NONE","body":"I'm noticing that a route like \"/:foo/:bar/:baz\" matches \"/2016/12/01\" (which is fine), but it also matches \"/2016/12/01/asdf\". Why? This is unexpected. How do I remedy this?\r\n\r\nAlso, is there a way to do more precise routing patterns with regular expressions?","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/264","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/264/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/264/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/264/events","html_url":"https://github.com/snapframework/snap-core/issues/264","id":183864514,"number":264,"title":"Websocket closes prematurely in 1.0 but is okay in 0.9.2","user":{"login":"henrylaxen","id":66570,"avatar_url":"https://avatars0.githubusercontent.com/u/66570?v=4","gravatar_id":"","url":"https://api.github.com/users/henrylaxen","html_url":"https://github.com/henrylaxen","followers_url":"https://api.github.com/users/henrylaxen/followers","following_url":"https://api.github.com/users/henrylaxen/following{/other_user}","gists_url":"https://api.github.com/users/henrylaxen/gists{/gist_id}","starred_url":"https://api.github.com/users/henrylaxen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henrylaxen/subscriptions","organizations_url":"https://api.github.com/users/henrylaxen/orgs","repos_url":"https://api.github.com/users/henrylaxen/repos","events_url":"https://api.github.com/users/henrylaxen/events{/privacy}","received_events_url":"https://api.github.com/users/henrylaxen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2016-10-19T04:43:11Z","updated_at":"2016-11-07T10:59:25Z","closed_at":"2016-11-06T18:57:33Z","author_association":"CONTRIBUTOR","body":"Dear Snappers,\n\nI have been trying to get to the bottom of this for three or four days\nnow, and so far no joy.  I am not sure if the problem is with snap or\nwebsockets-snap, but I can make it happen consistently.  I have\ncreated two stack repositories to demonstrate the issue.  In the\nwsText-6.22 repo, I'm using stack lts-6.22. See the cabal file for the\nspecific snap and websocket versions.  Everything works fine.  The\nMain.hs program just waits forever for the client.js javascript\nprogram to send it a message after the websocket connection is\nestablished and a couple of messages are sent back and forth.  However\nwhen I run the exact same code  with the lts-7.4 stack, the\nconnection is closed after about 20 seconds.  Things I have tried\ninclude calling the snap function extendTimout before the\nrunWebSocketsSnap call, putting the forever $ do\nsend/receive loop in a separate forkIO function, adding a threadDelay\nbetween the WS.receive and WS.send, but nothing seems to make any\ndifference.  To see the problem, build the two repos using stack, and\nrun:\n\nstack exec wsTest\n\nthen in your browser navigate to localhost:8000 and open your\njavascript console.\n\nThis is a real show stopper for me for upgrading to Snap 1.0 and\nfriends.  If there is anything I can do to help you guys track this\ndown, please let me know.\nBest wishes,\nHenry Laxen\n\n[snapWebsocketProblem.zip](https://github.com/snapframework/snap-core/files/537956/snapWebsocketProblem.zip)\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/261","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/261/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/261/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/261/events","html_url":"https://github.com/snapframework/snap-core/issues/261","id":170595952,"number":261,"title":"Failed test suite on Stackage build server","user":{"login":"snoyberg","id":49415,"avatar_url":"https://avatars3.githubusercontent.com/u/49415?v=4","gravatar_id":"","url":"https://api.github.com/users/snoyberg","html_url":"https://github.com/snoyberg","followers_url":"https://api.github.com/users/snoyberg/followers","following_url":"https://api.github.com/users/snoyberg/following{/other_user}","gists_url":"https://api.github.com/users/snoyberg/gists{/gist_id}","starred_url":"https://api.github.com/users/snoyberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snoyberg/subscriptions","organizations_url":"https://api.github.com/users/snoyberg/orgs","repos_url":"https://api.github.com/users/snoyberg/repos","events_url":"https://api.github.com/users/snoyberg/events{/privacy}","received_events_url":"https://api.github.com/users/snoyberg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-08-11T08:40:47Z","updated_at":"2016-08-17T13:56:07Z","closed_at":"2016-08-17T13:56:07Z","author_association":"NONE","body":"Unfortunately I don't have more information than this:\n\n```\nSnap.Util.FileServe.Tests:\n  fileServe/foo.bin: [OK]\n  fileServe/foo.txt: [OK]\n  fileServe/foo.html: [OK]\n  fileServe/foo.bin.bin.bin: [OK]\n  fileServe/directory-passes: [OK]\n  fileServe/404s: [OK]\n  fileServe/Single: [OK]\n  fileServe/cfgA: [OK]\n  fileServe/cfgB: [OK]\n  fileServe/cfgC: [OK]\n  fileServe/cfgD: [OK]\n  fileServe/cfgFancy: [Failed]\n```\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/260","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/260/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/260/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/260/events","html_url":"https://github.com/snapframework/snap-core/issues/260","id":165682159,"number":260,"title":"SameSite cookies support","user":{"login":"Pitometsu","id":2434691,"avatar_url":"https://avatars1.githubusercontent.com/u/2434691?v=4","gravatar_id":"","url":"https://api.github.com/users/Pitometsu","html_url":"https://github.com/Pitometsu","followers_url":"https://api.github.com/users/Pitometsu/followers","following_url":"https://api.github.com/users/Pitometsu/following{/other_user}","gists_url":"https://api.github.com/users/Pitometsu/gists{/gist_id}","starred_url":"https://api.github.com/users/Pitometsu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pitometsu/subscriptions","organizations_url":"https://api.github.com/users/Pitometsu/orgs","repos_url":"https://api.github.com/users/Pitometsu/repos","events_url":"https://api.github.com/users/Pitometsu/events{/privacy}","received_events_url":"https://api.github.com/users/Pitometsu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-07-14T23:36:36Z","updated_at":"2016-07-19T17:53:02Z","closed_at":"2016-07-19T17:53:02Z","author_association":"NONE","body":"Any reasons why [SameSite cookies](https://en.wikipedia.org/wiki/HTTP_cookie#SameSite_cookie) native support was not added?\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/259","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/259/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/259/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/259/events","html_url":"https://github.com/snapframework/snap-core/issues/259","id":164712613,"number":259,"title":"Please release a new version of snap-core to Hackage which builds properly","user":{"login":"tebello-thejane","id":7853189,"avatar_url":"https://avatars0.githubusercontent.com/u/7853189?v=4","gravatar_id":"","url":"https://api.github.com/users/tebello-thejane","html_url":"https://github.com/tebello-thejane","followers_url":"https://api.github.com/users/tebello-thejane/followers","following_url":"https://api.github.com/users/tebello-thejane/following{/other_user}","gists_url":"https://api.github.com/users/tebello-thejane/gists{/gist_id}","starred_url":"https://api.github.com/users/tebello-thejane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tebello-thejane/subscriptions","organizations_url":"https://api.github.com/users/tebello-thejane/orgs","repos_url":"https://api.github.com/users/tebello-thejane/repos","events_url":"https://api.github.com/users/tebello-thejane/events{/privacy}","received_events_url":"https://api.github.com/users/tebello-thejane/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-07-10T12:06:20Z","updated_at":"2016-08-08T06:09:00Z","closed_at":"2016-08-08T04:26:46Z","author_association":"NONE","body":"My eyes might be deceiving me, but it would appear that the version of `snap-core` on Hackage has a dependency on `MonadCatchIO-transformers` -- a deprecated library which hasn't been updated in a bit -- and this therefore causes `snap-core` on Hackage to fail to build with GHC8.\n\nThe version on Hackage is 11 months old. Can we please release a new version which works on GHC8, since these issues have already been fixed on the Git repo?\n\nIn particular, `snap-sever` fails to build in GHC8 from Hackage, which causes the important `ekg` package to fail -- which is a terrible situation indeed.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/258","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/258/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/258/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/258/events","html_url":"https://github.com/snapframework/snap-core/issues/258","id":160829953,"number":258,"title":"snap failed to install on haskell platform 8.0.1","user":{"login":"KeesBleijenberg","id":11313453,"avatar_url":"https://avatars0.githubusercontent.com/u/11313453?v=4","gravatar_id":"","url":"https://api.github.com/users/KeesBleijenberg","html_url":"https://github.com/KeesBleijenberg","followers_url":"https://api.github.com/users/KeesBleijenberg/followers","following_url":"https://api.github.com/users/KeesBleijenberg/following{/other_user}","gists_url":"https://api.github.com/users/KeesBleijenberg/gists{/gist_id}","starred_url":"https://api.github.com/users/KeesBleijenberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KeesBleijenberg/subscriptions","organizations_url":"https://api.github.com/users/KeesBleijenberg/orgs","repos_url":"https://api.github.com/users/KeesBleijenberg/repos","events_url":"https://api.github.com/users/KeesBleijenberg/events{/privacy}","received_events_url":"https://api.github.com/users/KeesBleijenberg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-06-17T07:42:13Z","updated_at":"2016-08-08T04:27:23Z","closed_at":"2016-08-08T04:27:23Z","author_association":"NONE","body":"I removed everything from GHC from my windows 7 64 bits machine and installed the haskell platform 8.0.1. Then i did cabal -v install snap and I get:\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\lib\\extralibs\\bin\\alex.exe\" \"--version\"\n\"C:\\Users\\kees\\AppData\\Roaming\\cabal\\bin\\cpphs.exe\" \"--version\"\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\mingw\\bin\\gcc.exe\" \"-dumpversion\"\nlooking for tool haddock near compiler in D:\\Program Files\\Haskell\nPlatform\\8.0.1\\bin\nfound haddock in D:\\Program Files\\Haskell Platform\\8.0.1\\bin\\haddock.exe\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\bin\\haddock.exe\" \"--version\"\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\lib\\extralibs\\bin\\happy.exe\" \"--version\"\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\bin\\hpc.exe\" \"version\"\nlooking for tool hsc2hs near compiler in D:\\Program Files\\Haskell\nPlatform\\8.0.1\\bin\nfound hsc2hs in D:\\Program Files\\Haskell Platform\\8.0.1\\bin\\hsc2hs.exe\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\bin\\hsc2hs.exe\" \"--version\"\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\lib\\extralibs\\bin\\HsColour.exe\" \"-version\"\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\bin\\ghc.exe\" \"-c\" \"D:\\Temp\\4118467.c\" \"-o\" \"D:\\Temp\\633426500.o\"\n\"D:\\Program Files\\Haskell Platform\\8.0.1\\mingw\\bin\\ld.exe\" \"-x\" \"-r\" \"D:\\Temp\\633426500.o\" \"-o\" \"D:\\Temp\\1916915724.o\"\n\"D:\\gtk2\\bin\\pkg-config.exe\" \"--version\"\nReading available packages...\n\"D:\\gtk2\\bin\\pkg-config.exe\" \"--list-all\"\n\"D:\\gtk2\\bin\\pkg-config.exe\" \"--modversion\" \"libpng14\" \"cairo-win32\" \"cairo\" \"fontconfig\" \"gail\" \"gtk+-win32-2.0\" \"cairo-pdf\" \"pangowin32\" \"gio-2.0\" \"freetype2\" \"cairo-gobject\" \"cairo-ps\" \"gdk-win32-2.0\" \"libpng\" \"gobject-2.0\" \"pixman-1\" \"pangocairo\" \"cairo-win32-font\" \"cairo-svg\" \"cairo-fc\" \"cairo-png\" \"glib-2.0\" \"gmodule-2.0\" \"pango\" \"gthread-2.0\" \"gio-windows-2.0\" \"gdk-2.0\" \"gtk+-2.0\" \"cairo-ft\" \"atk\" \"gdk-pixbuf-2.0\" \"gmodule-no-export-2.0\" \"pangoft2\"\nChoosing modular solver.\nResolving dependencies...\ncabal: Could not resolve dependencies:\ntrying: snap-0.14.0.7 (user goal)\ntrying: base-4.9.0.0/installed-4.9... (dependency of snap-0.14.0.7)\nnext goal: template-haskell (dependency of snap-0.14.0.7)\nrejecting: template-haskell-2.11.0.0/installed-2.1...,\ntemplate-haskell-2.11.0.0 (conflict: snap => template-haskell>=2.2 && <2.11)\nrejecting: template-haskell-2.10.0.0 (conflict:\nbase==4.9.0.0/installed-4.9..., template-haskell => base==4.8._)\nrejecting: template-haskell-2.9.0.0 (conflict: base==4.9.0.0/installed-4.9...,\ntemplate-haskell => base==4.7._)\nrejecting: template-haskell-2.8.0.0 (conflict: base==4.9.0.0/installed-4.9...,\ntemplate-haskell => base==4.6._)\nrejecting: template-haskell-2.7.0.0 (conflict: base==4.9.0.0/installed-4.9...,\ntemplate-haskell => base==4.5._)\nrejecting: template-haskell-2.6.0.0 (conflict: base==4.9.0.0/installed-4.9...,\ntemplate-haskell => base==4.4._)\nrejecting: template-haskell-2.5.0.0 (conflict: base==4.9.0.0/installed-4.9...,\ntemplate-haskell => base==4.3._)\nrejecting: template-haskell-2.4.0.1 (conflict: base==4.9.0.0/installed-4.9...,\ntemplate-haskell => base==4.2.*)\nrejecting: template-haskell-2.4.0.0 (conflict: base==4.9.0.0/installed-4.9...,\ntemplate-haskell => base>=3 && <4.3)\nrejecting: template-haskell-2.3.0.1, template-haskell-2.3.0.0,\ntemplate-haskell-2.2.0.0 (conflict: base==4.9.0.0/installed-4.9...,\ntemplate-haskell => base<4.3)\nDependency tree exhaustively searched.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/256","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/256/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/256/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/256/events","html_url":"https://github.com/snapframework/snap-core/issues/256","id":157113079,"number":256,"title":"Dependency on MonadCatchIO-transformers needs to change to execptions?","user":{"login":"afcowie","id":1088511,"avatar_url":"https://avatars0.githubusercontent.com/u/1088511?v=4","gravatar_id":"","url":"https://api.github.com/users/afcowie","html_url":"https://github.com/afcowie","followers_url":"https://api.github.com/users/afcowie/followers","following_url":"https://api.github.com/users/afcowie/following{/other_user}","gists_url":"https://api.github.com/users/afcowie/gists{/gist_id}","starred_url":"https://api.github.com/users/afcowie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afcowie/subscriptions","organizations_url":"https://api.github.com/users/afcowie/orgs","repos_url":"https://api.github.com/users/afcowie/repos","events_url":"https://api.github.com/users/afcowie/events{/privacy}","received_events_url":"https://api.github.com/users/afcowie/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2016-05-27T01:38:53Z","updated_at":"2016-08-08T04:27:44Z","closed_at":"2016-08-08T04:27:44Z","author_association":"CONTRIBUTOR","body":"**http-streams** is [blocked](https://github.com/afcowie/http-streams/issues/96) porting to GHC 8 presently because **MonadCatchIO-transformers** is not in stackage nightly because its marked unmaintained. We need it for our test suite which uses Snap and a `catch` from there since MonadSnap depends on MonadCatchIO as a superclass. Apparently that's deprecated in favour of **exceptions**, wherein there is a MonadCatch with a `catch`.\n\nDon't know if anyone has started trying to get Snap on board with the GHC 8 effort, but is this something we can change in the 0.9 series?\n\nAfC\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/253","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/253/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/253/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/253/events","html_url":"https://github.com/snapframework/snap-core/issues/253","id":150103078,"number":253,"title":"buildRequest doesn't work well with \"Host\" header","user":{"login":"qrilka","id":70110,"avatar_url":"https://avatars2.githubusercontent.com/u/70110?v=4","gravatar_id":"","url":"https://api.github.com/users/qrilka","html_url":"https://github.com/qrilka","followers_url":"https://api.github.com/users/qrilka/followers","following_url":"https://api.github.com/users/qrilka/following{/other_user}","gists_url":"https://api.github.com/users/qrilka/gists{/gist_id}","starred_url":"https://api.github.com/users/qrilka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qrilka/subscriptions","organizations_url":"https://api.github.com/users/qrilka/orgs","repos_url":"https://api.github.com/users/qrilka/repos","events_url":"https://api.github.com/users/qrilka/events{/privacy}","received_events_url":"https://api.github.com/users/qrilka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-04-21T15:09:49Z","updated_at":"2016-04-25T07:41:54Z","closed_at":"2016-04-25T07:41:54Z","author_association":"CONTRIBUTOR","body":"Is it expected that setting `Host` header in `RequestBuilder` gives not quite usual result?\nI mean -\n\n```\nλ>  buildRequest $ get \"/foo/bar\" M.empty >> setHeader \"Host\" \"some.host.ie\"\nGET /foo/bar HTTP/1.1\nhost: localhost\n\nsn=\"localhost\" c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a\n```\n\nI didn't find any other way to set `rqHostName` in `RequestBuilder` - do I miss something maybe?\nOr should I create PR fixing `fixupHost` from https://github.com/snapframework/snap-core/blob/master/src/Snap/Internal/Test/RequestBuilder.hs#L187 ?\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/252","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/252/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/252/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/252/events","html_url":"https://github.com/snapframework/snap-core/issues/252","id":143729325,"number":252,"title":"no output with test -p 8080 quick start tutorial ","user":{"login":"ghost","id":10137,"avatar_url":"https://avata
8000
rs3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-03-26T16:48:09Z","updated_at":"2016-03-26T19:32:43Z","closed_at":"2016-03-26T19:32:43Z","author_association":"NONE","body":"Hello, \n\nIm doing the quick start so I did \n- mkdir test \n- cd test \n- snap init barebones \n- cabal  install\n- test -p 8080 \n\nI expected to see output and can see my new site.\nBut I see the prompt agan and when I goto http://localhost:8080 I see no output. \n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/251","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/251/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/251/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/251/events","html_url":"https://github.com/snapframework/snap-core/issues/251","id":135221508,"number":251,"title":"Broken URL","user":{"login":"chrissound","id":1499652,"avatar_url":"https://avatars0.githubusercontent.com/u/1499652?v=4","gravatar_id":"","url":"https://api.github.com/users/chrissound","html_url":"https://github.com/chrissound","followers_url":"https://api.github.com/users/chrissound/followers","following_url":"https://api.github.com/users/chrissound/following{/other_user}","gists_url":"https://api.github.com/users/chrissound/gists{/gist_id}","starred_url":"https://api.github.com/users/chrissound/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrissound/subscriptions","organizations_url":"https://api.github.com/users/chrissound/orgs","repos_url":"https://api.github.com/users/chrissound/repos","events_url":"https://api.github.com/users/chrissound/events{/privacy}","received_events_url":"https://api.github.com/users/chrissound/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-02-21T15:57:49Z","updated_at":"2016-02-22T00:54:24Z","closed_at":"2016-02-22T00:54:24Z","author_association":"NONE","body":"http://snapframework.com/snaplets\nThe link for \"snaplet-file-dialog\" appears to be broken: http://patch-tag.com/r/mf/snaplet-file-dialog/\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/250","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/250/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/250/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/250/events","html_url":"https://github.com/snapframework/snap-core/issues/250","id":133448065,"number":250,"title":"Export compressibleMimeTypes from Snap.Util.Gzip","user":{"login":"cimmanon","id":2333706,"avatar_url":"https://avatars1.githubusercontent.com/u/2333706?v=4","gravatar_id":"","url":"https://api.github.com/users/cimmanon","html_url":"https://github.com/cimmanon","followers_url":"https://api.github.com/users/cimmanon/followers","following_url":"https://api.github.com/users/cimmanon/following{/other_user}","gists_url":"https://api.github.com/users/cimmanon/gists{/gist_id}","starred_url":"https://api.github.com/users/cimmanon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cimmanon/subscriptions","organizations_url":"https://api.github.com/users/cimmanon/orgs","repos_url":"https://api.github.com/users/cimmanon/repos","events_url":"https://api.github.com/users/cimmanon/events{/privacy}","received_events_url":"https://api.github.com/users/cimmanon/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-02-13T16:53:12Z","updated_at":"2017-09-22T05:29:50Z","closed_at":"2017-09-22T05:29:50Z","author_association":"NONE","body":"I would like to add SVGs and ICOs to the list of file types compressed with gzip, but there doesn't appear to be a convenient way to do this.  It looks like I should be able to do this by using `withCompression'` and passing in a Set of mime types, but compressibleMimeTypes is not exposed by the module so I end up having to repeat information that already exists.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/247","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/247/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/247/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/247/events","html_url":"https://github.com/snapframework/snap-core/issues/247","id":115831772,"number":247,"title":"304 response body not empty","user":{"login":"jonpetterbergman","id":7996835,"avatar_url":"https://avatars3.githubusercontent.com/u/7996835?v=4","gravatar_id":"","url":"https://api.github.com/users/jonpetterbergman","html_url":"https://github.com/jonpetterbergman","followers_url":"https://api.github.com/users/jonpetterbergman/followers","following_url":"https://api.github.com/users/jonpetterbergman/following{/other_user}","gists_url":"https://api.github.com/users/jonpetterbergman/gists{/gist_id}","starred_url":"https://api.github.com/users/jonpetterbergman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonpetterbergman/subscriptions","organizations_url":"https://api.github.com/users/jonpetterbergman/orgs","repos_url":"https://api.github.com/users/jonpetterbergman/repos","events_url":"https://api.github.com/users/jonpetterbergman/events{/privacy}","received_events_url":"https://api.github.com/users/jonpetterbergman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-11-09T08:43:42Z","updated_at":"2015-11-12T06:48:12Z","closed_at":"2015-11-12T06:48:12Z","author_association":"NONE","body":"The 304 response body contains a single '0', it should be empty.\n\nThis confuses proxy servers like apache, at least when configured as reverse proxy. Some requests take a very long time as if apache is waiting for something.\n\nThe problem is further aggrevated when adding another proxy to the situation, my application was completely unuseable over mobile networks.\n\nSimple way to reproduce:\n\n```\nmodule ProxyErr where\n\nimport Snap.Http.Server(quickHttpServe)\nimport Snap.Util.FileServe(serveDirectory)\n\nproxyErr :: IO ()\nproxyErr = quickHttpServe $ serveDirectory \"files\"\n```\n\nand put a file like \"foo.txt\" in the \"files\" directory.\n\nThen run curl with \"--raw\"(otherwise you wont see the '0') in a way that will make it a conditional GET:\n\n```\ncurl -v \"http://<IP>:8000/foo.txt\" --header \"If-Modified-Since: <SUITABLE DATE>\" --raw\n```\n\nReproduced with snap-core 0.9.8.0 and snap-server 0.9.5.1, ghc 7.10.2\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/246","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/246/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/246/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/246/events","html_url":"https://github.com/snapframework/snap-core/issues/246","id":113687044,"number":246,"title":"Can't serve file/pathnames including Japanese characters","user":{"login":"kaervin","id":9991984,"avatar_url":"https://avatars3.githubusercontent.com/u/9991984?v=4","gravatar_id":"","url":"https://api.github.com/users/kaervin","html_url":"https://github.com/kaervin","followers_url":"https://api.github.com/users/kaervin/followers","following_url":"https://api.github.com/users/kaervin/following{/other_user}","gists_url":"https://api.github.com/users/kaervin/gists{/gist_id}","starred_url":"https://api.github.com/users/kaervin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaervin/subscriptions","organizations_url":"https://api.github.com/users/kaervin/orgs","repos_url":"https://api.github.com/users/kaervin/repos","events_url":"https://api.github.com/users/kaervin/events{/privacy}","received_events_url":"https://api.github.com/users/kaervin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-10-27T20:55:39Z","updated_at":"2015-10-29T17:52:09Z","closed_at":"2015-10-29T17:52:09Z","author_association":"NONE","body":"I am trying to serve some files via \"serveDirectoryWith fancyDirectoryConfig\",\nusing httpServe and the default config.\nOutputting the Locale with getLocale shows me \"en_US\".\nRequesting some files with non-Standard filenames, such as\n\"1. 赤いコート.mp3\", returns with \n\"No handler accepted \"/static/files/1.%20%E8%B5%A4%E3%81%84%E3%82%B3%E3%83%BC%E3%83%88.mp3\"\"\nThe file shows up with it's normal filename in the directory listing created with the fancyDirectoryConfig.\nI am running this under Linux, the files come originally from a Windows install though (if this matters).\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/245","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/245/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/245/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/245/events","html_url":"https://github.com/snapframework/snap-core/issues/245","id":110333191,"number":245,"title":"URI path segments being decoded like query string elements","user":{"login":"tsloughter","id":36227,"avatar_url":"https://avatars2.githubusercontent.com/u/36227?v=4","gravatar_id":"","url":"https://api.github.com/users/tsloughter","html_url":"https://github.com/tsloughter","followers_url":"https://api.github.com/users/tsloughter/followers","following_url":"https://api.github.com/users/tsloughter/following{/other_user}","gists_url":"https://api.github.com/users/tsloughter/gists{/gist_id}","starred_url":"https://api.github.com/users/tsloughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsloughter/subscriptions","organizations_url":"https://api.github.com/users/tsloughter/orgs","repos_url":"https://api.github.com/users/tsloughter/repos","events_url":"https://api.github.com/users/tsloughter/events{/privacy}","received_events_url":"https://api.github.com/users/tsloughter/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-10-07T22:44:02Z","updated_at":"2016-11-06T19:40:38Z","closed_at":"2016-11-06T19:40:38Z","author_association":"NONE","body":"For a route `\"/posts/:category\"` the result of `getParam \"category\"` from a request with the path `/posts/c++` is `c` instead of `c++`. \n\nSince `+` is a legal character in a uri path segment it shouldn't replace them with spaces like it would in a query string.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/242","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/242/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/242/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/242/events","html_url":"https://github.com/snapframework/snap-core/issues/242","id":99276624,"number":242,"title":"More content-length problems with 304 Not Modified response","user":{"login":"henrylaxen","id":66570,"avatar_url":"https://avatars0.githubusercontent.com/u/66570?v=4","gravatar_id":"","url":"https://api.github.com/users/henrylaxen","html_url":"https://github.com/henrylaxen","followers_url":"https://api.github.com/users/henrylaxen/followers","following_url":"https://api.github.com/users/henrylaxen/following{/other_user}","gists_url":"https://api.github.com/users/henrylaxen/gists{/gist_id}","starred_url":"https://api.github.com/users/henrylaxen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henrylaxen/subscriptions","organizations_url":"https://api.github.com/users/henrylaxen/orgs","repos_url":"https://api.github.com/users/henrylaxen/repos","events_url":"https://api.github.com/users/henrylaxen/events{/privacy}","received_events_url":"https://api.github.com/users/henrylaxen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-08-05T19:12:01Z","updated_at":"2015-08-20T13:51:00Z","closed_at":"2015-08-20T04:25:57Z","author_association":"CONTRIBUTOR","body":"``` haskell\n{-\nDear Snappers,\n\nLooking through the issue tracker for \"304\" or \"content-length\" I can\nsee that there have been ongoing problems.  Well, sorry about that,\nbut I am about to add to them.  Here is my experience: When I send\nback a \"304 Not Modified\" response, Google chrome is happy and does\nnot touch the page being displayed.  Firefox, however, is not so\ngracious.  It displays a blank page.  I believe this is because\nsnap-core returns a \"Content-Length: 0\" header along with the 304\nresponse.  At least that is what Google tells me.  The little program\nbelow demonstrates this.  You should be able to just run this file\nthrough ghc and see what I mean.  In case you are wondering, I am\nusing the latest (as of Aug 5th, 2015) versions of everything.\n\n\nghc-pkg list | grep snap\n    digestive-functors-snap-0.6.1.3\n    snap-0.14.0.6\n    snap-core-0.9.7.2\n    snap-loader-static-0.9.0.2\n    snap-server-0.9.5.1\n    websockets-snap-0.9.2.0\n\nI hope this is helpful.\n\n-}\n\n\n\n{-# LANGUAGE OverloadedStrings #-}\nmodule Main where\n\nimport           Control.Applicative\nimport           Control.Monad.IO.Class          ( MonadIO(liftIO) )\nimport           Snap\nimport           System.IO\n\nmain :: IO ()\nmain = quickHttpServe $\n  path \"304\" handle304\n  <|>\n  path \"index\"  (writeText \"index\\n\")\n  <|>\n  path \"favicon.ico\"  (writeText \"\")\n\nhandle304 :: Snap a\nhandle304 = do\n  let\n    myResponse = setResponseStatus 304 \"Not Modified\" emptyResponse\n    removedContentLength = deleteHeader \"Content-Length\" myResponse\n  liftIO $ System.IO.hPutStr stderr (show removedContentLength)\n  -- finishWith myResponse         -- has Content-Length: 0\n  finishWith removedContentLength  -- has Content-Length: 0\n\n\n{-\n\n/home/henry/haskell> wget -S -q http://localhost:8000/index -O -\n  HTTP/1.1 200 OK\n  Server: Snap/0.9.5.1\n  Date: Wed, 05 Aug 2015 18:56:24 GMT\n  Transfer-Encoding: chunked\nindex\n------------------------------------------------------------------------\n/home/henry/haskell> wget -S -q http://localhost:8000/304 -O -  \n  HTTP/1.1 304 Not Modified\n  Content-Length: 0\n  Server: Snap/0.9.5.1\n  Date: Wed, 05 Aug 2015 18:56:27 GMT\n------------------------------------------------------------------------\n\n-}\n```\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/240","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/240/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/240/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/240/events","html_url":"https://github.com/snapframework/snap-core/issues/240","id":94142645,"number":240,"title":"Allow readable-0.3.1","user":{"login":"DanBurton","id":713692,"avatar_url":"https://avatars0.githubusercontent.com/u/713692?v=4","gravatar_id":"","url":"https://api.github.com/users/DanBurton","html_url":"https://github.com/DanBurton","followers_url":"https://api.github.com/users/DanBurton/followers","following_url":"https://api.github.com/users/DanBurton/following{/other_user}","gists_url":"https://api.github.com/users/DanBurton/gists{/gist_id}","starred_url":"https://api.github.com/users/DanBurton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanBurton/subscriptions","organizations_url":"https://api.github.com/users/DanBurton/orgs","repos_url":"https://api.github.com/users/DanBurton/repos","events_url":"https://api.github.com/users/DanBurton/events{/privacy}","received_events_url":"https://api.github.com/users/DanBurton/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-07-09T20:14:12Z","updated_at":"2015-07-09T20:16:27Z","closed_at":"2015-07-09T20:16:27Z","author_association":"NONE","body":"@mightybyte any thoughts on loosening the version bounds on `readable` to allow `>= 0.3.1`?\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/239","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/239/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/239/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/239/events","html_url":"https://github.com/snapframework/snap-core/issues/239","id":91396259,"number":239,"title":"Snap-loader on stackage","user":{"login":"rjayatilleka","id":5570434,"avatar_url":"https://avatars1.githubusercontent.com/u/5570434?v=4","gravatar_id":"","url":"https://api.github.com/users/rjayatilleka","html_url":"https://github.com/rjayatilleka","followers_url":"https://api.github.com/users/rjayatilleka/followers","following_url":"https://api.github.com/users/rjayatilleka/following{/other_user}","gists_url":"https://api.github.com/users/rjayatilleka/gists{/gist_id}","starred_url":"https://api.github.com/users/rjayatilleka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjayatilleka/subscriptions","organizations_url":"https://api.github.com/users/rjayatilleka/orgs","repos_url":"https://api.github.com/users/rjayatilleka/repos","events_url":"https://api.github.com/users/rjayatilleka/events{/privacy}","received_events_url":"https://api.github.com/users/rjayatilleka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2015-06-27T01:10:20Z","updated_at":"2015-06-30T16:10:08Z","closed_at":"2015-06-30T16:09:34Z","author_association":"NONE","body":"Hey I'm just opening an issue here since this is the primary issue tracker listed on your website. I opened a couple issues on the [snap-loader-static](https://github.com/snapframework/snap-loader-static/issues/8) and [snap-loader-dynamic](https://github.com/snapframework/snap-loader-dynamic/issues/12) repos. Can we get them added to stackage? I can't build them with stack right now without adding the dependencies manually. Or is there a reason they're not on stack?\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/236","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/236/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/236/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/236/events","html_url":"https://github.com/snapframework/snap-core/issues/236","id":86253391,"number":236,"title":"Debug Error on 7.10.1 builds","user":{"login":"dmjio","id":875324,"avatar_url":"https://avatars0.githubusercontent.com/u/875324?v=4","gravatar_id":"","url":"https://api.github.com/users/dmjio","html_url":"https://github.com/dmjio","followers_url":"https://api.github.com/users/dmjio/followers","following_url":"https://api.github.com/users/dmjio/following{/other_user}","gists_url":"https://api.github.com/users/dmjio/gists{/gist_id}","starred_url":"https://api.github.com/users/dmjio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmjio/subscriptions","organizations_url":"https://api.github.com/users/dmjio/orgs","repos_url":"https://api.github.com/users/dmjio/repos","events_url":"https://api.github.com/users/dmjio/events{/privacy}","received_events_url":"https://api.github.com/users/dmjio/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-06-08T16:52:14Z","updated_at":"2015-06-08T18:49:49Z","closed_at":"2015-06-08T18:49:49Z","author_association":"CONTRIBUTOR","body":"``` haskell\nsrc/Snap/Internal/Debug.hs:111:5:\n    Non type-variable argument\n      in the constraint: Data.String.IsString [a]\n    (Use FlexibleContexts to permit this)\n    When checking that ‘chop’ has the inferred type\n      chop :: forall a t.\n              (Eq a, Data.String.IsString [a], Text.Printf.PrintfType t,\n               Text.Printf.IsChar a) =>\n              [a] -> t\n    In an equation for ‘debugOn’:\n        debugOn s\n          = liftIO\n            $ withMVar _debugMVar\n              $ \\ _\n                  -> do { tid <- myThreadId;\n                          .... }\n          where\n              chop x = let ... in printf \"%8s\" y\n              s' t = \"[\" ++ chop (show t) ++ \"] \" ++ s\n```\n\nThis can be fixed with FlexibleContexts, I'm going to make a pull and reference it here.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/235","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/235/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/235/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/235/events","html_url":"https://github.com/snapframework/snap-core/issues/235","id":84484357,"number":235,"title":"Snap.Util.Upload part processors should fold","user":{"login":"sopvop","id":274341,"avatar_url":"https://avatars2.githubusercontent.com/u/274341?v=4","gravatar_id":"","url":"https://api.github.com/users/sopvop","html_url":"https://github.com/sopvop","followers_url":"https://api.github.com/users/sopvop/followers","following_url":"https://api.github.com/users/sopvop/following{/other_user}","gists_url":"https://api.github.com/users/sopvop/gists{/gist_id}","starred_url":"https://api.github.com/users/sopvop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sopvop/subscriptions","organizations_url":"https://api.github.com/users/sopvop/orgs","repos_url":"https://api.github.com/users/sopvop/repos","events_url":"https://api.github.com/users/sopvop/events{/privacy}","received_events_url":"https://api.github.com/users/sopvop/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2015-06-03T10:32:07Z","updated_at":"2017-09-22T05:33:11Z","closed_at":"2017-09-22T05:33:11Z","author_association":"CONTRIBUTOR","body":"## Problems\n\nCurrently it exports 2 functions for users, a higher level `handleFileUploads` and a bit lower level `handleMultipart`\n\n``` .haskell\nhandleFileUploads ::\n       (MonadSnap m) =>\n       FilePath                       -- ^ temporary directory\n    -> UploadPolicy                   -- ^ general upload policy\n    -> (PartInfo -> PartUploadPolicy) -- ^ per-part upload policy\n    -> (PartInfo -> Either PolicyViolationException FilePath -> IO a)\n                                      -- ^ user handler (see function\n                                      -- description)\n    -> m [a]\n\ntype PartProcessor a = PartInfo -> InputStream ByteString -> IO a\n\nhandleMultipart ::\n       (MonadSnap m) =>\n       UploadPolicy        -- ^ global upload policy\n    -> PartProcessor a     -- ^ part processor\n    -> m [a]\n```\n\nOne of the problems is that if you need any state carried between processing parts, you have to use `IORef`. In my opinion that is not very haskelly.\n\nhandleFileUploads has another problem: there is no way to limit number of uploaded files. You can bail out with exception from user handler, but only after downloading extra file (and reading `IORef`).\n\nCurrent implementation does protect you from inode dos attack by cleaning up temp file after each user handler is run, which is a good thing.\n\nAnother problem is that limits on number of _captured_ form inputs are applied after reading the body, though maybe I'm missing some laziness [there](https://github.com/snapframework/snap-core/blob/f1b24eb292477e06d65120f2141c6b29341ceddb/src/Snap/Internal/Util/FileUploads.hs#L237). \n\n``` .haskell\nhandleMultipart = do\n    ...\n    captures <- runRequestBody (proc bumpTimeout boundary partHandler)\n    procCaptures captures id\n```\n\nWhich somewhat limits the effectiveness of protection from form inputs flood. \n\nThere is no limit on whole request size, only limits on speed and parts size.\n\nLast two problems can be fixed without changing signatures.\n## Proposal\n\nSo my proposal is to change the types to:\n\n``` .haskell\ntype PartProcessor s = PartInfo -> InputStream ByteString -> s > IO s\n\nhandleMultipart ::\n       (MonadSnap m) =>\n       UploadPolicy        -- ^ global upload policy\n    -> PartProcessor s     -- ^ part processor\n    -> s -- ^ state seed\n    -> m s\n```\n\nWhich makes PartProcessor something like  `StateT s IO ()`, and so you can carry state when processing parts. This will also help with implementing better limits on form params capture, number of files and sizes.\n\nAlternatively we can make PartProcessor an `m` monad, like\n\n``` .haskell\ntype PartProcessor m a = PartInfo -> InputStream ByteString ->  m a\n\nhandleMultipart ::\n       (MonadSnap m) =>\n       UploadPolicy        -- ^ global upload policy\n    -> PartProcessor m a     -- ^ part processor\n    -> m [a]\n```\n\nAnd `monad-control` allows such implementation to be well behaved even if `m` monad is short-circuiting like `Snap` is. That would somewhat complicate implementation though. Also if say `Snap` monad does `pass`, there is no much you can do after, because of partially read body (This is actually a bigger problem of snap mixing routing and handling in same type). That would also make it a bit harder to reason about code.\n\n`handleFileUploads` signature would be changed accordingly.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/232","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/232/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/232/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/232/events","html_url":"https://github.com/snapframework/snap-core/issues/232","id":74798047,"number":232,"title":"Failed to install network-2.6.1.0","user":{"login":"forest-tong","id":6332211,"avatar_url":"https://avatars3.githubusercontent.com/u/6332211?v=4","gravatar_id":"","url":"https://api.github.com/users/forest-tong","html_url":"https://github.com/forest-tong","followers_url":"https://api.github.com/users/forest-tong/followers","following_url":"https://api.github.com/users/forest-tong/following{/other_user}","gists_url":"https://api.github.com/users/forest-tong/gists{/gist_id}","starred_url":"https://api.github.com/users/forest-tong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forest-tong/subscriptions","organizations_url":"https://api.github.com/users/forest-tong/orgs","repos_url":"https://api.github.com/users/forest-tong/repos","events_url":"https://api.github.com/users/forest-tong/events{/privacy}","received_events_url":"https://api.github.com/users/forest-tong/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2015-05-10T01:07:39Z","updated_at":"2016-11-06T18:42:59Z","closed_at":"2016-11-06T18:42:59Z","author_association":"NONE","body":"When I run \"cabal install snap --force-reinstalls\" I get this error message:\n\n```\nnetwork-2.6.1.0 failed during the configure step. The exception was:\nExitFailure 1\n```\n\nand running \"cabal install network-2.6.1.0\" additionally yields\n\n```\nLinking /var/folders/gy/d0r64v5j5wx6vvmwmdzn_d7h0000gn/T/network-2.6.1.0-6969/network-2.6.1.0/dist/setup/setup ...\nConfiguring network-2.6.1.0...\nsetup: sh: inappropriate type\n```\n\nAny thoughts how to fix this?\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/230","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/230/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/230/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/230/events","html_url":"https://github.com/snapframework/snap-core/issues/230","id":66630956,"number":230,"title":"Please add support for lens 4.9","user":{"login":"peti","id":28323,"avatar_url":"https://avatars3.githubusercontent.com/u/28323?v=4","gravatar_id":"","url":"https://api.github.com/users/peti","html_url":"https://github.com/peti","followers_url":"https://api.github.com/users/peti/followers","following_url":"https://api.github.com/users/peti/following{/other_user}","gists_url":"https://api.github.com/users/peti/gists{/gist_id}","starred_url":"https://api.github.com/users/peti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peti/subscriptions","organizations_url":"https://api.github.com/users/peti/orgs","repos_url":"https://api.github.com/users/peti/repos","events_url":"https://api.github.com/users/peti/events{/privacy}","received_events_url":"https://api.github.com/users/peti/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-04-06T15:30:24Z","updated_at":"2015-04-06T16:24:45Z","closed_at":"2015-04-06T16:24:45Z","author_association":"NONE","body":"http://packdeps.haskellers.com/feed?needle=exact%3Asnap\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/228","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/228/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/228/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/228/events","html_url":"https://github.com/snapframework/snap-core/issues/228","id":64743358,"number":228,"title":"Ambiguous occurrence `defaultTimeLocale'","user":{"login":"rkn","id":2656965,"avatar_url":"https://avatars3.githubusercontent.com/u/2656965?v=4","gravatar_id":"","url":"https://api.github.com/users/rkn","html_url":"https://github.com/rkn","followers_url":"https://api.github.com/users/rkn/followers","following_url":"https://api.github.com/users/rkn/following{/other_user}","gists_url":"https://api.github.com/users/rkn/gists{/gist_id}","starred_url":"http
3fce
s://api.github.com/users/rkn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkn/subscriptions","organizations_url":"https://api.github.com/users/rkn/orgs","repos_url":"https://api.github.com/users/rkn/repos","events_url":"https://api.github.com/users/rkn/events{/privacy}","received_events_url":"https://api.github.com/users/rkn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2015-03-27T11:32:46Z","updated_at":"2016-11-06T19:25:59Z","closed_at":"2016-11-06T19:25:59Z","author_association":"CONTRIBUTOR","body":"``` shell\nsrc\\Snap\\Internal\\Http\\Types.hs:734:21:\n    Ambiguous occurrence `defaultTimeLocale'\n    It could refer to either `Data.Time.Format.defaultTimeLocale',\n                             imported from `Data.Time.Format' at src\\Snap\\Internal\\Http\\Types.hs:43:1-33\n                             (and originally defined in `time-1.5.0.1:Data.Time.Format.Locale')\n                          or `System.Locale.defaultTimeLocale',\n                             imported from `System.Locale' at src\\Snap\\Internal\\Http\\Types.hs:46:33-49\ncabal: Error: some packages failed to install:\nhakyll-4.6.7.1 depends on snap-core-0.9.6.4 which failed to install.\n```\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/227","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/227/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/227/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/227/events","html_url":"https://github.com/snapframework/snap-core/issues/227","id":63552814,"number":227,"title":"blaze-builder 0.4 support","user":{"login":"snoyberg","id":49415,"avatar_url":"https://avatars3.githubusercontent.com/u/49415?v=4","gravatar_id":"","url":"https://api.github.com/users/snoyberg","html_url":"https://github.com/snoyberg","followers_url":"https://api.github.com/users/snoyberg/followers","following_url":"https://api.github.com/users/snoyberg/following{/other_user}","gists_url":"https://api.github.com/users/snoyberg/gists{/gist_id}","starred_url":"https://api.github.com/users/snoyberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snoyberg/subscriptions","organizations_url":"https://api.github.com/users/snoyberg/orgs","repos_url":"https://api.github.com/users/snoyberg/repos","events_url":"https://api.github.com/users/snoyberg/events{/privacy}","received_events_url":"https://api.github.com/users/snoyberg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":23,"created_at":"2015-03-22T16:56:04Z","updated_at":"2015-04-01T18:07:53Z","closed_at":"2015-04-01T17:54:18Z","author_association":"NONE","body":"Original issue: https://github.com/fpco/stackage/issues/442\n\nAre there any plans to release a new version of snap-core and snap-server with blaze-builder 0.4 support? All other packages with a restrictive upper bound look like they will soon be addressed, which would mean snap is the only package holding things back.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/224","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/224/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/224/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/224/events","html_url":"https://github.com/snapframework/snap-core/issues/224","id":57719730,"number":224,"title":"io-streams rewrite will break digestive-functors","user":{"login":"ChristopherBiscardi","id":551247,"avatar_url":"https://avatars1.githubusercontent.com/u/551247?v=4","gravatar_id":"","url":"https://api.github.com/users/ChristopherBiscardi","html_url":"https://github.com/ChristopherBiscardi","followers_url":"https://api.github.com/users/ChristopherBiscardi/followers","following_url":"https://api.github.com/users/ChristopherBiscardi/following{/other_user}","gists_url":"https://api.github.com/users/ChristopherBiscardi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChristopherBiscardi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChristopherBiscardi/subscriptions","organizations_url":"https://api.github.com/users/ChristopherBiscardi/orgs","repos_url":"https://api.github.com/users/ChristopherBiscardi/repos","events_url":"https://api.github.com/users/ChristopherBiscardi/events{/privacy}","received_events_url":"https://api.github.com/users/ChristopherBiscardi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-02-15T06:21:54Z","updated_at":"2015-02-15T15:21:35Z","closed_at":"2015-02-15T15:21:35Z","author_association":"MEMBER","body":"[This change](https://github.com/snapframework/snap-core/commit/c2a69ecdc43547ad84ecc93bee9ea67175138f0e?diff=split#diff-3a1a57f5ee74e1ff11b47928fb5154f5R156) (when using snap core master branch) is currently breaking [these lines](https://github.com/jaspervdj/digestive-functors/blob/master/digestive-functors-snap/src/Text/Digestive/Snap.hs#L66-L67) in digestive-functors-snap.\n\nThese are the errors:\n\n```\nsrc/Text/Digestive/Snap.hs:67:9:\n    Couldn't match type ‘[(Text, FilePath)]’ with ‘IO (Text, FilePath)’\n    Expected type: (Either Snap.PolicyViolationException FilePath\n                    -> [Maybe (Text, FilePath)])\n                   -> Either Snap.PolicyViolationException FilePath\n                   -> IO (Text, FilePath)\n      Actual type: (Either Snap.PolicyViolationException FilePath\n                    -> [Maybe (Text, FilePath)])\n                   -> Either Snap.PolicyViolationException FilePath\n                   -> [(Text, FilePath)]\n    In the first argument of ‘(.)’, namely ‘fmap catMaybes’\n    In the second argument of ‘($)’, namely\n      ‘fmap catMaybes . mapM (storeFile tmpDir)’\n\nsrc/Text/Digestive/Snap.hs:67:26:\n    Couldn't match type ‘[(Snap.PartInfo, Either t0 FilePath)]’\n                  with ‘Snap.PartInfo’\n    Expected type: Snap.PartInfo\n                   -> Either Snap.PolicyViolationException FilePath\n                   -> [Maybe (Text, FilePath)]\n      Actual type: [(Snap.PartInfo, Either t0 FilePath)]\n                   -> Either Snap.PolicyViolationException FilePath\n                   -> [Maybe (Text, FilePath)]\n    In the second argument of ‘(.)’, namely ‘mapM (storeFile tmpDir)’\n    In the second argument of ‘($)’, namely\n      ‘fmap catMaybes . mapM (storeFile tmpDir)’\n```\n\nThe signature [on Hackage](https://hackage.haskell.org/package/snap-core-0.9.6.4/docs/src/Snap-Util-FileUploads.html#handleFileUploads) is\n\n``` haskell\nhandleFileUploads ::\n       (MonadSnap m) =>\n       FilePath\n    -> UploadPolicy\n    -> (PartInfo -> PartUploadPolicy)\n    -> ([(PartInfo, Either PolicyViolationException FilePath)] -> m a)\n    -> m a\n```\n\nand [on Master](https://github.com/snapframework/snap-core/blob/master/src/Snap/Internal/Util/FileUploads.hs#L127-L135) is\n\n``` haskell\nhandleFileUploads ::\n       (MonadSnap m) =>\n       FilePath\n    -> UploadPolicy\n    -> (PartInfo -> PartUploadPolicy)\n    -> (PartInfo -> Either PolicyViolationException FilePath -> IO a)\n    -> m [a]\n```\n\nI have a [patch](https://github.com/ChristopherBiscardi/digestive-functors/commit/3d8836c8144a5f5dec4fac24cf5efcaf9dd47157#diff-d01c88fd44d5133d2779bd9451b559e1R66) on `digestive-functors` which compiles but should we consider this a Snap issue?\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/221","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/221/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/221/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/221/events","html_url":"https://github.com/snapframework/snap-core/issues/221","id":52737003,"number":221,"title":"Compilation error on \"cabal install -fdevelopment\"","user":{"login":"snap9","id":9166683,"avatar_url":"https://avatars2.githubusercontent.com/u/9166683?v=4","gravatar_id":"","url":"https://api.github.com/users/snap9","html_url":"https://github.com/snap9","followers_url":"https://api.github.com/users/snap9/followers","following_url":"https://api.github.com/users/snap9/following{/other_user}","gists_url":"https://api.github.com/users/snap9/gists{/gist_id}","starred_url":"https://api.github.com/users/snap9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snap9/subscriptions","organizations_url":"https://api.github.com/users/snap9/orgs","repos_url":"https://api.github.com/users/snap9/repos","events_url":"https://api.github.com/users/snap9/events{/privacy}","received_events_url":"https://api.github.com/users/snap9/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-12-23T12:31:53Z","updated_at":"2014-12-26T20:49:02Z","closed_at":"2014-12-26T20:49:02Z","author_association":"NONE","body":"After \"snap init\", I cannot do \"cabal install -fdevelopment\". (I'm using -fdevelopment to \"activate dynamic recompilation in your project\", as shown in http://snapframework.com/docs/quickstart) I get this error:\n\n```\nResolving dependencies...\ncabal: Could not resolve dependencies:\ntrying: MonadCatchIO-transformers-0.3.1.2/installed-928... (user goal)\ntrying: boom-0.1 (user goal)\ntrying: snap-loader-dynamic-0.10.0.2 (dependency of boom-0.1:+development)\ntrying: hint-0.4.2.1 (dependency of snap-loader-dynamic-0.10.0.2)\nnext goal: ghc (dependency of hint-0.4.2.1)\nrejecting: ghc-7.8.3/installed-005... (conflict: MonadCatchIO-transformers =>\ntransformers==0.4.2.0/installed-42d..., ghc =>\ntransformers==0.3.0.0/installed-16a...)\nBackjump limit reached (change with --max-backjumps).\n\nNote: when using a sandbox, all packages are required to have consistent\ndependencies. Try reinstalling/unregistering the offending packages or\nrecreating the sandbox.\n```\n\nWhy does this happen and how can I solve this?\n\nThese are the exact steps I took on my OS X 10.10.1:\n- Completely uninstalled the existing Haskell from my system using \"sudo uninstall-hs thru 7.8.3 --remove\" so I can start from scratch.\n- Just in case, I made sure all of these were completely deleted: /Library/Haskell, /Library/Frameworks/GHC.framework (already removed by uninstall-hs), ~/.cabal, and ~/.ghc\n- Reinstalled the latest Haskell platform from http://www.haskell.org/platform/mac.html -- Haskell Platform 2014.2.0.0 for Mac OS X, 64bit\n- Made sure this line is in my ~/.profile: PATH=$HOME/Library/Haskell/bin:$PATH (and by using \"echo $PATH\" I can see that it has been applied).\n- Ran \"cabal update\". This ran without issues.\n- Ran these commands:\n\ncd ~/Desktop\nmkdir boom\ncd boom\ncabal sandbox init\ncabal install -j --force-reinstalls snap\n.cabal-sandbox/bin/snap init\n\nNote: In the \"cabal install\" line, -j just speeds up the install by using multiple cores to compile. --force-reinstalls works around a \"broken\" error with one (and only one) package: `regex-compat-0.95.1` Since I'm in a sandbox this should not be an issue.\n- Finally, I ran this command:\n\ncabal install -fdevelopment\n\nThis produced the above error.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/220","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/220/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/220/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/220/events","html_url":"https://github.com/snapframework/snap-core/issues/220","id":52580503,"number":220,"title":"serveDirectory fails to serve files whose name contains non-ascii characters","user":{"login":"krsch","id":1208686,"avatar_url":"https://avatars0.githubusercontent.com/u/1208686?v=4","gravatar_id":"","url":"https://api.github.com/users/krsch","html_url":"https://github.com/krsch","followers_url":"https://api.github.com/users/krsch/followers","following_url":"https://api.github.com/users/krsch/following{/other_user}","gists_url":"https://api.github.com/users/krsch/gists{/gist_id}","starred_url":"https://api.github.com/users/krsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krsch/subscriptions","organizations_url":"https://api.github.com/users/krsch/orgs","repos_url":"https://api.github.com/users/krsch/repos","events_url":"https://api.github.com/users/krsch/events{/privacy}","received_events_url":"https://api.github.com/users/krsch/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2014-12-20T23:51:00Z","updated_at":"2014-12-24T01:13:54Z","closed_at":"2014-12-24T01:13:29Z","author_association":"NONE","body":"The minimal example is this:\n1. `echo test > /tmp/Umläut.txt`\n2. `ghc -e 'Snap.Http.Server.quickHttpServe $ Snap.Util.FileServe.serveDirectory \"/tmp\"'`\n3. `curl 'http://localhost:8000/Umläut.txt'` fails with error\n    `No handler accepted \"/Umläut.txt\"`\n4. `curl 'file:///tmp/Umläut.txt'` prints `test` as expected\n5. `curl 'http://localhost:8000/Uml%C3%A4ut.txt'` fails with `No handler accepted \"/Uml%C3%A4ut.txt\"`\n6. `curl 'file:///tmp/Uml%C3%A4ut.txt'` prints `test` as expected\n\nThe expected result: steps 3 and 4 should produce the same result. The same is expected from steps 5 and 6.\n","score":1.0},{"url":"https://api.github.com/repos/snapframework/snap-core/issues/216","repository_url":"https://api.github.com/repos/snapframework/snap-core","labels_url":"https://api.github.com/repos/snapframework/snap-core/issues/216/labels{/name}","comments_url":"https://api.github.com/repos/snapframework/snap-core/issues/216/comments","events_url":"https://api.github.com/repos/snapframework/snap-core/issues/216/events","html_url":"https://github.com/snapframework/snap-core/issues/216","id":46968275,"number":216,"title":"Better documentation for \"/\" route when index.tpl file is present.","user":{"login":"robertmassaioli","id":149178,"avatar_url":"https://avatars3.githubusercontent.com/u/149178?v=4","gravatar_id":"","url":"https://api.github.com/users/robertmassaioli","html_url":"https://github.com/robertmassaioli","followers_url":"https://api.github.com/users/robertmassaioli/followers","following_url":"https://api.github.com/users/robertmassaioli/following{/other_user}","gists_url":"https://api.github.com/users/robertmassaioli/gists{/gist_id}","starred_url":"https://api.github.com/users/robertmassaioli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertmassaioli/subscriptions","organizations_url":"https://api.github.com/users/robertmassaioli/orgs","repos_url":"https://api.github.com/users/robertmassaioli/repos","events_url":"https://api.github.com/users/robertmassaioli/events{/privacy}","received_events_url":"https://api.github.com/users/robertmassaioli/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2014-10-27T22:32:17Z","updated_at":"2014-10-28T04:47:50Z","closed_at":"2014-10-27T23:06:08Z","author_association":"NONE","body":"I had the following issue recently: http://stackoverflow.com/questions/26597971/snap-framework-root-route-not-being-handed/26597972#26597972\n\nAnd I could not find that feature documented in the getting started guide or in the tutorials. Maybe it should be documented better?\n","score":1.0}]}
0

