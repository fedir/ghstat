HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Tue, 03 Jul 2018 02:33:24 GMT
Link: <https://api.github.com/search/issues?q=repo%3Aantirez%2Fredis+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=repo%3Aantirez%2Fredis+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: C1A0:77E7:1BAAFB2:41DFCE3:5B3AE073
X-Oauth-Scopes: 
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 25
X-Ratelimit-Reset: 1530585262
X-Runtime-Rack: 0.394306
X-Xss-Protection: 1; mode=block

8000
{"total_count":1938,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/antirez/redis/issues/5089","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5089/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5089/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5089/events","html_url":"https://github.com/antirez/redis/issues/5089","id":337460657,"node_id":"MDU6SXNzdWUzMzc0NjA2NTc=","number":5089,"title":"XRANGE <stream name> - + takes several minutes to return  when having a large amount of keys under a stream","user":{"login":"madarariel","id":38295985,"node_id":"MDQ6VXNlcjM4Mjk1OTg1","avatar_url":"https://avatars1.githubusercontent.com/u/38295985?v=4","gravatar_id":"","url":"https://api.github.com/users/madarariel","html_url":"https://github.com/madarariel","followers_url":"https://api.github.com/users/madarariel/followers","following_url":"https://api.github.com/users/madarariel/following{/other_user}","gists_url":"https://api.github.com/users/madarariel/gists{/gist_id}","starred_url":"https://api.github.com/users/madarariel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madarariel/subscriptions","organizations_url":"https://api.github.com/users/madarariel/orgs","repos_url":"https://api.github.com/users/madarariel/repos","events_url":"https://api.github.com/users/madarariel/events{/privacy}","received_events_url":"https://api.github.com/users/madarariel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-07-02T10:28:44Z","updated_at":"2018-07-02T15:50:37Z","closed_at":"2018-07-02T11:11:55Z","author_association":"NONE","body":"Redis Version: 5.0-rc3\r\n\r\nSteps:\r\n1. Create a stream\r\n2. Add to that stream a large number of keys\r\nIn my case 60785425 keys.\r\n3. Run '`XRANGE mystream1 - +`'\r\nThe command will return after several minutes.\r\n\r\nTo get the number of keys under the stream:\r\n```\r\n127.0.0.1:6379> XLEN mystream1\r\n(integer) 60785425\r\n```\r\n\r\nTo add a large number of keys under the stream:\r\n`redis-benchmark -l  -p 6379 XADD mystream1 \\* name Sara surname OConnor`\r\n\r\nWith 23 million keys under the stream it took 3 minutes to return.\r\n","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5078","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5078/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5078/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5078/events","html_url":"https://github.com/antirez/redis/issues/5078","id":336679267,"node_id":"MDU6SXNzdWUzMzY2NzkyNjc=","number":5078,"title":"build failed:  Hint: It's a good idea to run 'make test' ;)","user":{"login":"murphygithub","id":35248460,"node_id":"MDQ6VXNlcjM1MjQ4NDYw","avatar_url":"https://avatars0.githubusercontent.com/u/35248460?v=4","gravatar_id":"","url":"https://api.github.com/users/murphygithub","html_url":"https://github.com/murphygithub","followers_url":"https://api.github.com/users/murphygithub/followers","following_url":"https://api.github.com/users/murphygithub/following{/other_user}","gists_url":"https://api.github.com/users/murphygithub/gists{/gist_id}","starred_url":"https://api.github.com/users/murphygithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/murphygithub/subscriptions","organizations_url":"https://api.github.com/users/murphygithub/orgs","repos_url":"https://api.github.com/users/murphygithub/repos","events_url":"https://api.github.com/users/murphygithub/events{/privacy}","received_events_url":"https://api.github.com/users/murphygithub/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-06-28T15:50:01Z","updated_at":"2018-06-28T18:28:28Z","closed_at":"2018-06-28T18:28:28Z","author_association":"NONE","body":"was download 4.0 and run make, while it alway prompt\r\nHint: It's a good idea to run 'make test' ;)\r\n\r\neven after I run 'make test'","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5058","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5058/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5058/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5058/events","html_url":"https://github.com/antirez/redis/issues/5058","id":335131227,"node_id":"MDU6SXNzdWUzMzUxMzEyMjc=","number":5058,"title":"Usability","user":{"login":"brandonros","id":8949910,"node_id":"MDQ6VXNlcjg5NDk5MTA=","avatar_url":"https://avatars1.githubusercontent.com/u/8949910?v=4","gravatar_id":"","url":"https://api.github.com/users/brandonros","html_url":"https://github.com/brandonros","followers_url":"https://api.github.com/users/brandonros/followers","following_url":"https://api.github.com/users/brandonros/following{/other_user}","gists_url":"https://api.github.com/users/brandonros/gists{/gist_id}","starred_url":"https://api.github.com/users/brandonros/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brandonros/subscriptions","organizations_url":"https://api.github.com/users/brandonros/orgs","repos_url":"https://api.github.com/users/brandonros/repos","events_url":"https://api.github.com/users/brandonros/events{/privacy}","received_events_url":"https://api.github.com/users/brandonros/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-23T21:07:35Z","updated_at":"2018-06-23T21:52:37Z","closed_at":"2018-06-23T21:51:22Z","author_association":"NONE","body":"1. Lists have RPOPLPUSH. Why don't hashes have something like \"atomically move from one hash to another\"? Why don't sorted lists have an RPOPLPUSH equivalent? Why don't sets have an RPOPLUSH equivalent?\r\n\r\n2. Why can't you get the length of a list?","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5046","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5046/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5046/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5046/events","html_url":"https://github.com/antirez/redis/issues/5046","id":334315372,"node_id":"MDU6SXNzdWUzMzQzMTUzNzI=","number":5046,"title":"several code may cause coredump","user":{"login":"ZSmartDog","id":5662375,"node_id":"MDQ6VXNlcjU2NjIzNzU=","avatar_url":"https://avatars0.githubusercontent.com/u/5662375?v=4","gravatar_id":"","url":"https://api.github.com/users/ZSmartDog","html_url":"https://github.com/ZSmartDog","followers_url":"https://api.github.com/users/ZSmartDog/followers","following_url":"https://api.github.com/users/ZSmartDog/following{/other_user}","gists_url":"https://api.github.com/users/ZSmartDog/gists{/gist_id}","starred_url":"https://api.github.com/users/ZSmartDog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZSmartDog/subscriptions","organizations_url":"https://api.github.com/users/ZSmartDog/orgs","repos_url":"https://api.github.com/users/ZSmartDog/repos","events_url":"https://api.github.com/users/ZSmartDog/events{/privacy}","received_events_url":"https://api.github.com/users/ZSmartDog/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-06-21T02:31:40Z","updated_at":"2018-06-21T03:40:32Z","closed_at":"2018-06-21T03:40:32Z","author_association":"NONE","body":"I reviewed sdsMakeRoomFor which may return NULL, and I found several lines which do not check sdsMakeRoomFor's return value.\r\n\r\n\r\n1. hllSparseSet - Reference to sdsMakeRoomFor in hyperloglog.c at line 665\r\n2. processMultibulkBuffer - Reference to sdsMakeRoomFor in networking.c at line 1267\r\n3. readQueryFromClient - Reference to sdsMakeRoomFor in networking.c  at line 1400\r\n7. sdscatfmt - Reference to sdsMakeRoomFor in sds.c  at line 606\r\n8. sdsTest - Reference to sdsMakeRoomFor in sds.c  at line 1255\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5034","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5034/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5034/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5034/events","html_url":"https://github.com/antirez/redis/issues/5034","id":333357839,"node_id":"MDU6SXNzdWUzMzMzNTc4Mzk=","number":5034,"title":"feature request: comment support for redis-cli","user":{"login":"jvanasco","id":204779,"node_id":"MDQ6VXNlcjIwNDc3OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/204779?v=4","gravatar_id":"","url":"https://api.github.com/users/jvanasco","html_url":"https://github.com/jvanasco","followers_url":"https://api.github.com/users/jvanasco/followers","following_url":"https://api.github.com/users/jvanasco/following{/other_user}","gists_url":"https://api.github.com/users/jvanasco/gists{/gist_id}","starred_url":"https://api.github.com/users/jvanasco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvanasco/subscriptions","organizations_url":"https://api.github.com/users/jvanasco/orgs","repos_url":"https://api.github.com/users/jvanasco/repos","events_url":"https://api.github.com/users/jvanasco/events{/privacy}","received_events_url":"https://api.github.com/users/jvanasco/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-06-18T17:05:02Z","updated_at":"2018-06-22T14:44:19Z","closed_at":"2018-06-19T00:56:42Z","author_association":"NONE","body":"perhaps this exists already, but I've tried all the standard comment symbols and searched the docs/issues extensively\r\n\r\n`redis-cli` doesn't seem to support (i.e. ignore) the concept of lines that are comments\r\n\r\nfor example, I have a handful of tests that require pre-populating the redis server. this is handled though txt files that are fed into `redis-cli`.  i'd love to be able to have comments in them.  What i mean is using inline docs/comments, similar to the following\r\n\r\n    -- this test uses database 8\r\n    select 8\r\n\r\n    // prep the \"a2b|{uid}\" datastore\r\n    eval \"for i=1,10000 do\\n redis.call('hset', 'a2b|' .. i, 70, 1)\\n end\\nreturn 1\" 0\r\n\r\n    # prep the \"b2a|{cid}\" datastore\r\n    eval \"for i=1,1000 do\\n redis.call('hset', 'b2a|' .. i, 70, 1)\\n end\\nreturn 1\" 0\r\n\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5028","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5028/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5028/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5028/events","html_url":"https://github.com/antirez/redis/issues/5028","id":333109263,"node_id":"MDU6SXNzdWUzMzMxMDkyNjM=","number":5028,"title":"redis-server crash in raxRecursiveFree when running in cluster mode","user":{"login":"michael-grunder","id":468149,"node_id":"MDQ6VXNlcjQ2ODE0OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/468149?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-grunder","html_url":"https://github.com/michael-grunder","followers_url":"https://api.github.com/users/michael-grunder/followers","following_url":"https://api.github.com/users/michael-grunder/following{/other_user}","gists_url":"https://api.github.com/users/michael-grunder/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-grunder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-grunder/subscriptions","organizations_url":"https://api.github.com/users/michael-grunder/orgs","repos_url":"https://api.github.com/users/michael-grunder/repos","events_url":"https://api.github.com/users/michael-grunder/events{/privacy}","received_events_url":"https://api.github.com/users/michael-grunder/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-06-18T01:18:09Z","updated_at":"2018-06-18T14:02:26Z","closed_at":"2018-06-18T14:02:26Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\nI encountered a crash in redis-server when implementing unit tests for phpredis stream methods.  The crash _only_ seems to happen when running in cluster mode as I can't cause it in standalone mode.\r\n\r\nHere is the [Crash report](https://gist.github.com/michael-grunder/9d594eb1c2fad8566525cb9e7a50112c)\r\n\r\nI was able to replicate this on Ubuntu 18.04 and OSX High Sierra.  I'm not sure if it is helpful but under OSX it only appears to happen when built with MALLOC=jemalloc.\r\n\r\nI can replicate the problem on both machines by doing the following:\r\n\r\n1. Start up a cluster with redis-trib.rb\r\n2. cat [file_to_cause_crash.cmds](https://gist.github.com/michael-grunder/4716cb8b198940ac87a0a017f594ee8d)|redis-cli -p 7000\r\n\r\nJust change the port above to whichever cluster server will serve the key `{s}` which is in the file of commands:\r\n\r\nThe process looks like this:\r\n```bash\r\n➜  tests git:(streams) ✗ cat /tmp/19.cmds|redis-cli -p 7000\r\n1529284365615-0\r\nOK\r\nOK\r\n(integer) 0\r\n1529284365616-0\r\nOK\r\nOK\r\n1529284365616-0\r\n1) 1) \"{s}-1\"\r\n   2) 1) 1) 1529284365616-0\r\n         2) 1) \"field\"\r\n            2) \"value:0\"\r\n2) 1) \"{s}-2\"\r\n   2) 1) 1) 1529284365615-0\r\n         2) 1) \"field\"\r\n            2) \"value:2\"\r\n(integer) 1\r\n1529284365617-0\r\nOK\r\nOK\r\n(integer) 1\r\n1529284365617-0\r\nOK\r\nOK\r\n1) 1) \"{s}-1\"\r\n   2) 1) 1) 1529284365617-0\r\n         2) 1) \"field\"\r\n            2) \"value:0\"\r\n2) 1) \"{s}-2\"\r\n   2) 1) 1) 1529284365617-0\r\n         2) 1) \"field\"\r\n            2) \"value:0\"\r\nCould not connect to Redis at 127.0.0.1:7000: Connection refused\r\n```\r\n\r\nI hope this is easy to find, and let me know if you need any more information!  \r\n\r\nEdit:  Looks like it's crashing in [rax.c:1130](https://github.com/antirez/redis/blob/unstable/src/rax.c#L1130) because `n` is NULL.\r\n\r\n```bash\r\n(gdb) bt\r\n#0  raxRecursiveFree (rax=rax@entry=0x7f2873028d08, n=0x0,\r\n    free_callback=free_callback@entry=0x5649f46f7360 <streamFreeConsumer>) at rax.c:1130\r\n```\r\n\r\nCheers!\r\nMike\r\n","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5025","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5025/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5025/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5025/events","html_url":"https://github.com/antirez/redis/issues/5025","id":332423673,"node_id":"MDU6SXNzdWUzMzI0MjM2NzM=","number":5025,"title":"config_set_numerical_field() integer overflow","user":{"login":"shenlongxing","id":12439375,"node_id":"MDQ6VXNlcjEyNDM5Mzc1","avatar_url":"https://avatars3.githubusercontent.com/u/12439375?v=4","gravatar_id":"","url":"https://api.github.com/users/shenlongxing","html_url":"https://github.com/shenlongxing","followers_url":"https://api.github.com/users/shenlongxing/followers","following_url":"https://api.github.com/users/shenlongxing/following{/other_user}","gists_url":"https://api.github.com/users/shenlongxing/gists{/gist_id}","starred_url":"https://api.github.com/users/shenlongxing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenlongxing/subscriptions","organizations_url":"https://api.github.com/users/shenlongxing/orgs","repos_url":"https://api.github.com/users/shenlongxing/repos","events_url":"https://api.github.com/users/shenlongxing/events{/privacy}","received_events_url":"https://api.github.com/users/shenlongxing/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-14T14:18:25Z","updated_at":"2018-06-20T03:36:48Z","closed_at":"2018-06-20T03:36:48Z","author_association":"CONTRIBUTOR","body":"The min/max value of config_set_numerical_field() should be consistent with the type definition. A lot of them will probably overflow.\r\n```\r\n127.0.0.1:6379> config get tcp-keepalive\r\n1) \"tcp-keepalive\"\r\n2) \"300\"\r\n127.0.0.1:6379> \r\n127.0.0.1:6379> config set tcp-keepalive 4294967295\r\nOK\r\n127.0.0.1:6379> config get tcp-keepalive\r\n1) \"tcp-keepalive\"\r\n2) \"-1\"\r\n127.0.0.1:6379> config get maxmemory-samples\r\n1) \"maxmemory-samples\"\r\n2) \"5\"\r\n127.0.0.1:6379> config set maxmemory-samples 4294967295\r\nOK\r\n127.0.0.1:6379> config get maxmemory-samples\r\n1) \"maxmemory-samples\"\r\n2) \"-1\"\r\n127.0.0.1:6379>\r\n```","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5022","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5022/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5022/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5022/events","html_url":"https://github.com/antirez/redis/issues/5022","id":332204928,"node_id":"MDU6SXNzdWUzMzIyMDQ5Mjg=","number":5022,"title":"Redis 5.0 RC2 fails to build on MacOS","user":{"login":"magmasystems","id":4121205,"node_id":"MDQ6VXNlcjQxMjEyMDU=","avatar_url":"https://avatars2.githubusercontent.com/u/4121205?v=4","gravatar_id":"","url":"https://api.github.com/users/magmasystems","html_url":"https://github.com/magmasystems","followers_url":"https://api.github.com/users/magmasystems/followers","following_url":"https://api.github.com/users/magmasystems/following{/other_user}","gists_url":"https://api.github.com/users/magmasystems/gists{/gist_id}","starred_url":"https://api.github.com/users/magmasystems/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magmasystems/subscriptions","organizations_url":"https://api.github.com/users/magmasystems/orgs","repos_url":"https://api.github.com/users/magmasystems/repos","events_url":"https://api.github.com/users/magmasystems/events{/privacy}","received_events_url":"https://api.github.com/users/magmasystems/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-06-13T23:53:47Z","updated_at":"2018-06-14T12:03:58Z","closed_at":"2018-06-14T12:03:58Z","author_association":"NONE","body":"RC1 of Redis 5 built fine, and I was able to use it to test the new stream feature. Just downloaded RC2 and tried to 'make'. This is the error that I received:   \r\n\r\n\r\n CC t_stream.o\r\nt_stream.c:909:23: warning: implicit declaration of function 'raxTryInsert' is invalid in C99 [-Wimplicit-function-declaration]\r\n            retval += raxTryInsert(group->pel,buf,sizeof(buf),nack,NULL);\r\n                      ^\r\n1 warning generated.\r\n    CC listpack.o\r\n    LINK redis-server\r\nUndefined symbols for architecture x86_64:\r\n  \"_raxTryInsert\", referenced from:\r\n      _streamReplyWithRange in t_stream.o\r\nld: symbol(s) not found for architecture x86_64\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\nmake[1]: *** [redis-server] Error 1\r\nmake: *** [all] Error 2\r\n\r\n\r\nMy system is MacOs High Sierra, version 10.13.3","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5017","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5017/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5017/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5017/events","html_url":"https://github.com/antirez/redis/issues/5017","id":331941990,"node_id":"MDU6SXNzdWUzMzE5NDE5OTA=","number":5017,"title":"Redis Lua scripting: multiple security issues","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars0.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2018-06-13T10:50:36Z","updated_at":"2018-06-14T22:33:43Z","closed_at":"2018-06-13T10:50:45Z","author_association":"OWNER","body":"The Apple Security Team, together with Alibaba and myself, identified several security issues in the Lua script engine. The full report is here:\r\n\r\nhttp://antirez.com/news/119\r\n\r\nFixed releases are already available for Redis 3.2, 4.0 and 5.0.","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5015","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5015/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5015/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5015/events","html_url":"https://github.com/antirez/redis/issues/5015","id":331791797,"node_id":"MDU6SXNzdWUzMzE3OTE3OTc=","number":5015,"title":"Infinite loop in randomkey command on a replica with a database consisting solely of logically expired items","user":{"login":"kevinmcgehee","id":7883533,"node_id":"MDQ6VXNlcjc4ODM1MzM=","avatar_url":"https://avatars2.githubusercontent.com/u/7883533?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmcgehee","html_url":"https://github.com/kevinmcgehee","followers_url":"https://api.github.com/users/kevinmcgehee/followers","following_url":"https://api.github.com/users/kevinmcgehee/following{/other_user}","gists_url":"https://api.github.com/users/kevinmcgehee/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmcgehee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmcgehee/subscriptions","organizations_url":"https://api.github.com/users/kevinmcgehee/orgs","repos_url":"https://api.github.com/users/kevinmcgehee/repos","events_url":"https://api.github.com/users/kevinmcgehee/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmcgehee/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-06-12T23:43:39Z","updated_at":"2018-06-14T18:32:04Z","closed_at":"2018-06-14T18:32:04Z","author_association":"NONE","body":"dbRandomKey() in db.c will not terminate when executed on a replica against a database where all items are logically expired. The function will only return under two conditions: there exist no keys in the dictionary, or a valid non-expired key is found. Given that replicas do not physically expire items and instead just skip returning them, an infinite loop occurs.\r\n\r\nReproduction steps:\r\n\r\n```\r\n$ redis-server --port 6379\r\n$ redis-server --port 6380 --slaveof localhost 6379\r\n$ redis-cli -p 6379\r\n> set foo bar ex 10\r\n$ kill -STOP <pid of first redis server>\r\n$ redis-cli -p 6380\r\n> get foo\r\n\"bar\"\r\n> get foo\r\n(nil)\r\n> randomkey\r\n```\r\n\r\nAn infinite loop occurs on the follower, and even when the master is started again, the replica won't break out of the loop to consume the deletion.\r\n\r\nOn a related node, EXISTS returns true for logically expired keys on a replica, which is inconsistent with the rest of the read commands.\r\n\r\nBoth of these issues appear to be present in the latest unstable branch.","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5006","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5006/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5006/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5006/events","html_url":"https://github.com/antirez/redis/issues/5006","id":331300996,"node_id":"MDU6SXNzdWUzMzEzMDA5OTY=","number":5006,"title":"xrevrange returning empty list","user":{"login":"jrmhaig","id":4415912,"node_id":"MDQ6VXNlcjQ0MTU5MTI=","avatar_url":"https://avatars2.githubusercontent.com/u/4415912?v=4","gravatar_id":"","url":"https://api.github.com/users/jrmhaig","html_url":"https://github.com/jrmhaig","followers_url":"https://api.github.com/users/jrmhaig/followers","following_url":"https://api.github.com/users/jrmhaig/following{/other_user}","gists_url":"https://api.github.com/users/jrmhaig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrmhaig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrmhaig/subscriptions","organizations_url":"https://api.github.com/users/jrmhaig/orgs","repos_url":"https://api.github.com/users/jrmhaig/repos","events_url":"https://api.github.com/users/jrmhaig/events{/privacy}","received_events_url":"https://api.github.com/users/jrmhaig/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-06-11T18:32:29Z","updated_at":"2018-06-13T12:41:35Z","closed_at":"2018-06-12T11:13:55Z","author_association":"NONE","body":"If I understand the introduction to streams at https://redis.io/topics/streams-intro correctly, `xrevrange` should return the same as `xrange` but in reverse order. I am finding that unless I get the full range then `xrevrange` returns an empty list. For example:\r\n\r\n```\r\n127.0.0.1:6379> xadd teststream 1234567891230 key1 value1\r\n1234567891230-0\r\n127.0.0.1:6379> xadd teststream 1234567891240 key2 value2\r\n1234567891240-0\r\n127.0.0.1:6379> xadd teststream 1234567891250 key3 value3\r\n1234567891250-0\r\n127.0.0.1:6379> xrevrange teststream + -\r\n1) 1) 1234567891250-0\r\n   2) 1) \"key3\"\r\n      2) \"value3\"\r\n2) 1) 1234567891240-0\r\n   2) 1) \"key2\"\r\n      2) \"value2\"\r\n3) 1) 1234567891230-0\r\n   2) 1) \"key1\"\r\n      2) \"value1\"\r\n127.0.0.1:6379> xrange teststream - 1234567891245\r\n1) 1) 1234567891230-0\r\n   2) 1) \"key1\"\r\n      2) \"value1\"\r\n2) 1) 1234567891240-0\r\n   2) 1) \"key2\"\r\n      2) \"value2\"\r\n127.0.0.1:6379> xrevrange teststream 1234567891245 -\r\n(empty list or set)\r\n```\r\nAm I missing something here?\r\n\r\nI am using Redis 4.9.101.","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5005","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5005/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5005/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5005/events","html_url":"https://github.com/antirez/redis/issues/5005","id":331235845,"node_id":"MDU6SXNzdWUzMzEyMzU4NDU=","number":5005,"title":"[Redis-5.0-rc1] unstable branch typo mistake","user":{"login":"leonchen83","id":5235764,"node_id":"MDQ6VXNlcjUyMzU3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/5235764?v=4","gravatar_id":"","url":"https://api.github.com/users/leonchen83","html_url":"https://github.com/leonchen83","followers_url":"https://api.github.com/users/leonchen83/followers","following_url":"https://api.github.com/users/leonchen83/following{/other_user}","gists_url":"https://api.github.com/users/leonchen83/gists{/gist_id}","starred_url":"https://api.github.com/users/leonchen83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leonchen83/subscriptions","organizations_url":"https://api.github.com/users/leonchen83/orgs","repos_url":"https://api.github.com/users/leonchen83/repos","events_url":"https://api.github.com/users/leonchen83/events{/privacy}","received_events_url":"https://api.github.com/users/leonchen83/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-06-11T15:22:07Z","updated_at":"2018-06-12T11:42:21Z","closed_at":"2018-06-12T07:28:09Z","author_association":"CONTRIBUTOR","body":"unstable branch line 1617\r\n```\r\n} else if (!strcasecmp(opt,\"DESTROY\") && c->argc == 4) {\r\n```\r\n\r\nshould this code be the following?\r\n```\r\n} else if (!strcasecmp(opt,\"DELGROUP\") && c->argc == 4) {\r\n```","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/5004","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/5004/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/5004/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/5004/events","html_url":"https://github.com/antirez/redis/issues/5004","id":330998828,"node_id":"MDU6SXNzdWUzMzA5OTg4Mjg=","number":5004,"title":"Default implementation of je_get_defrag_hint() missing in jemalloc.c in 5.0 and unstable branch ","user":{"login":"mnottheone","id":9416932,"node_id":"MDQ6VXNlcjk0MTY5MzI=","avatar_url":"https://avatars1.githubusercontent.com/u/9416932?v=4","gravatar_id":"","url":"https://api.github.com/users/mnottheone","html_url":"https://github.com/mnottheone","followers_url":"https://api.github.com/users/mnottheone/followers","following_url":"https://api.github.com/users/mnottheone/following{/other_user}","gists_url":"https://api.github.com/users/mnottheone/gists{/gist_id}","starred_url":"https://api.github.com/users/mnottheone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mnottheone/subscriptions","organizations_url":"https://api.github.com/users/mnottheone/orgs","repos_url":"https://api.github.com/users/mnottheone/repos","events_url":"https://api.github.com/users/mnottheone/events{/privacy}","received_events_url":"https://api.github.com/users/mnottheone/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-06-10T20:12:58Z","updated_at":"2018-06-28T10:36:45Z","closed_at":"2018-06-28T10:36:19Z","author_association":"NONE","body":"I can see je_get_defrag_hint() is implemented in [4.0](https://github.com/antirez/redis/blob/4.0/deps/jemalloc/src/jemalloc.c#L2601)\r\n\r\nBut after future commits or [jemalloc version upgrade](https://github.com/antirez/redis/commit/08e1c8e820031751bd58736cc334dda1bc55cb5c#diff-7532698046b670e7c232175ed176adffL2601) it's missing in [5.0](https://github.com/antirez/redis/blob/5.0/deps/jemalloc/src/jemalloc.c) also in current [unstable branch](https://github.com/antirez/redis/blob/unstable/deps/jemalloc/src/jemalloc.c)\r\n\r\n\r\nCorrect me, if I am missing something or it has been renamed or something. Because in [defrag.c ](https://github.com/antirez/redis/blob/unstable/src/defrag.c#L46) it is still used and without its definition one should not be able to build it.\r\n\r\nI will be happy to create pull request if needed. :) ","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4996","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4996/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4996/comments","events_url":"https://api.github.com/repos/antirez
8000
/redis/issues/4996/events","html_url":"https://github.com/antirez/redis/issues/4996","id":330340197,"node_id":"MDU6SXNzdWUzMzAzNDAxOTc=","number":4996,"title":"A typo in redis.conf which causes startup errror.","user":{"login":"shenlongxing","id":12439375,"node_id":"MDQ6VXNlcjEyNDM5Mzc1","avatar_url":"https://avatars3.githubusercontent.com/u/12439375?v=4","gravatar_id":"","url":"https://api.github.com/users/shenlongxing","html_url":"https://github.com/shenlongxing","followers_url":"https://api.github.com/users/shenlongxing/followers","following_url":"https://api.github.com/users/shenlongxing/following{/other_user}","gists_url":"https://api.github.com/users/shenlongxing/gists{/gist_id}","starred_url":"https://api.github.com/users/shenlongxing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenlongxing/subscriptions","organizations_url":"https://api.github.com/users/shenlongxing/orgs","repos_url":"https://api.github.com/users/shenlongxing/repos","events_url":"https://api.github.com/users/shenlongxing/events{/privacy}","received_events_url":"https://api.github.com/users/shenlongxing/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-07T16:07:42Z","updated_at":"2018-06-12T01:01:02Z","closed_at":"2018-06-12T01:01:02Z","author_association":"CONTRIBUTOR","body":"I try to startup the latest unstable redis server, got this error message.\r\n```\r\n$./redis-server ../redis.conf \r\n\r\n*** FATAL CONFIG FILE ERROR ***\r\nReading the configuration file, at line 1118\r\n>>> 'stream-node-max-entires 100'\r\nBad directive or wrong number of arguments\r\n```\r\n\r\nIt is a typo: stream-node-max-entires -> stream-node-max-entries","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4989","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4989/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4989/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4989/events","html_url":"https://github.com/antirez/redis/issues/4989","id":329782889,"node_id":"MDU6SXNzdWUzMjk3ODI4ODk=","number":4989,"title":"redis5.0 stream xdel bug ?","user":{"login":"rfyiamcool","id":3785409,"node_id":"MDQ6VXNlcjM3ODU0MDk=","avatar_url":"https://avatars1.githubusercontent.com/u/3785409?v=4","gravatar_id":"","url":"https://api.github.com/users/rfyiamcool","html_url":"https://github.com/rfyiamcool","followers_url":"https://api.github.com/users/rfyiamcool/followers","following_url":"https://api.github.com/users/rfyiamcool/following{/other_user}","gists_url":"https://api.github.com/users/rfyiamcool/gists{/gist_id}","starred_url":"https://api.github.com/users/rfyiamcool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rfyiamcool/subscriptions","organizations_url":"https://api.github.com/users/rfyiamcool/orgs","repos_url":"https://api.github.com/users/rfyiamcool/repos","events_url":"https://api.github.com/users/rfyiamcool/events{/privacy}","received_events_url":"https://api.github.com/users/rfyiamcool/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-06T09:13:34Z","updated_at":"2018-06-06T09:42:30Z","closed_at":"2018-06-06T09:42:30Z","author_association":"NONE","body":"### redis version\r\n\r\n```\r\ncd /root/redis-5.0-rc1; ./src/redis-server  -v\r\nRedis server v=4.9.101 sha=00000000:0 malloc=jemalloc-5.1.0 bits=64 build=7d0ca33feac5ed02\r\n```\r\n\r\n### process\r\n\r\n```\r\n127.0.0.1:6379>\r\n127.0.0.1:6379> xadd stm * url xiaorui.cc typo 1\r\n1528276145604-0\r\n127.0.0.1:6379> xadd stm * url xiaorui.cc typo 2\r\n1528276146591-0\r\n127.0.0.1:6379> xadd stm * url xiaorui.cc typo 3\r\n1528276147369-0\r\n127.0.0.1:6379> xadd stm * url xiaorui.cc typo 4\r\n1528276148054-0\r\n127.0.0.1:6379> xadd stm * url xiaorui.cc typo 5\r\n1528276148849-0\r\n127.0.0.1:6379> xgroup create stm cg1 0-0\r\nOK\r\n127.0.0.1:6379> xrange stm - +\r\n1) 1) 1528276145604-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"1\"\r\n2) 1) 1528276146591-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"2\"\r\n3) 1) 1528276147369-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"3\"\r\n4) 1) 1528276148054-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"4\"\r\n5) 1) 1528276148849-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"5\"\r\n127.0.0.1:6379>\r\n127.0.0.1:6379> xdel stm 1528276145604-0\r\n(integer) 1\r\n\r\n# why\r\n127.0.0.1:6379> xlen stm\r\n(integer) 5\r\n\r\n# why return 5 ?  O(∩_∩)O~\r\n\r\n127.0.0.1:6379> xrange stm - +\r\n1) 1) 1528276146591-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"2\"\r\n2) 1) 1528276147369-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"3\"\r\n3) 1) 1528276148054-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"4\"\r\n4) 1) 1528276148849-0\r\n   2) 1) \"url\"\r\n      2) \"xiaorui.cc\"\r\n      3) \"typo\"\r\n      4) \"5\"\r\n127.0.0.1:6379>\r\n```\r\n\r\nIn redis-cli,  i run `xrange stm -  +` return count 5 items, the result is OK.  \r\n\r\n*But,  `XLEN mystream` return 5 ?  I thank  the result is  4, because xdel a msg_id already*\r\n\r\n*I don't understand `xlen mystream`  value .*\r\n\r\n\r\n(～ o ～)~zZ\r\n\r\n#### Enjoy it, thank You.","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4988","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4988/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4988/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4988/events","html_url":"https://github.com/antirez/redis/issues/4988","id":329774246,"node_id":"MDU6SXNzdWUzMjk3NzQyNDY=","number":4988,"title":"can we use Redis cluster and twemproxy at the same time for better performance and connection pooling ? or just Redis cluster is enough  ?","user":{"login":"AksHuge","id":37899829,"node_id":"MDQ6VXNlcjM3ODk5ODI5","avatar_url":"https://avatars2.githubusercontent.com/u/37899829?v=4","gravatar_id":"","url":"https://api.github.com/users/AksHuge","html_url":"https://github.com/AksHuge","followers_url":"https://api.github.com/users/AksHuge/followers","following_url":"https://api.github.com/users/AksHuge/following{/other_user}","gists_url":"https://api.github.com/users/AksHuge/gists{/gist_id}","starred_url":"https://api.github.com/users/AksHuge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AksHuge/subscriptions","organizations_url":"https://api.github.com/users/AksHuge/orgs","repos_url":"https://api.github.com/users/AksHuge/repos","events_url":"https://api.github.com/users/AksHuge/events{/privacy}","received_events_url":"https://api.github.com/users/AksHuge/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-06T08:53:17Z","updated_at":"2018-06-06T11:03:54Z","closed_at":"2018-06-06T11:03:54Z","author_association":"NONE","body":"","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4987","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4987/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4987/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4987/events","html_url":"https://github.com/antirez/redis/issues/4987","id":329657362,"node_id":"MDU6SXNzdWUzMjk2NTczNjI=","number":4987,"title":"Question about redis-check-aof --fix","user":{"login":"NolanChan","id":1487616,"node_id":"MDQ6VXNlcjE0ODc2MTY=","avatar_url":"https://avatars3.githubusercontent.com/u/1487616?v=4","gravatar_id":"","url":"https://api.github.com/users/NolanChan","html_url":"https://github.com/NolanChan","followers_url":"https://api.github.com/users/NolanChan/followers","following_url":"https://api.github.com/users/NolanChan/following{/other_user}","gists_url":"https://api.github.com/users/NolanChan/gists{/gist_id}","starred_url":"https://api.github.com/users/NolanChan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NolanChan/subscriptions","organizations_url":"https://api.github.com/users/NolanChan/orgs","repos_url":"https://api.github.com/users/NolanChan/repos","events_url":"https://api.github.com/users/NolanChan/events{/privacy}","received_events_url":"https://api.github.com/users/NolanChan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-06-05T23:15:50Z","updated_at":"2018-06-06T05:35:40Z","closed_at":"2018-06-06T05:35:40Z","author_association":"NONE","body":"Hi, I was writing a bash script to automatically fix the `appendonly.aof` file on redis startup. Is there a way I can pass in another command to `redis-check-aof --fix <file>` such that it automatically fixes the file if corrupted, and does not prompt the user with a question on whether or not to fix?\r\n\r\nThanks!","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4986","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4986/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4986/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4986/events","html_url":"https://github.com/antirez/redis/issues/4986","id":329279189,"node_id":"MDU6SXNzdWUzMjkyNzkxODk=","number":4986,"title":"write() error log mistake","user":{"login":"shenlongxing","id":12439375,"node_id":"MDQ6VXNlcjEyNDM5Mzc1","avatar_url":"https://avatars3.githubusercontent.com/u/12439375?v=4","gravatar_id":"","url":"https://api.github.com/users/shenlongxing","html_url":"https://github.com/shenlongxing","followers_url":"https://api.github.com/users/shenlongxing/followers","following_url":"https://api.github.com/users/shenlongxing/following{/other_user}","gists_url":"https://api.github.com/users/shenlongxing/gists{/gist_id}","starred_url":"https://api.github.com/users/shenlongxing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenlongxing/subscriptions","organizations_url":"https://api.github.com/users/shenlongxing/orgs","repos_url":"https://api.github.com/users/shenlongxing/repos","events_url":"https://api.github.com/users/shenlongxing/events{/privacy}","received_events_url":"https://api.github.com/users/shenlongxing/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-05T02:24:10Z","updated_at":"2018-06-06T11:06:59Z","closed_at":"2018-06-06T11:06:59Z","author_association":"CONTRIBUTOR","body":"1. I startup a redis server, then send a \"slaveof\" command to turn it to a slave.  The rdb file size is about 1GB, while the dir disk space is not big enough(281M).\r\n\r\n$ redis\r\n127.0.0.1:6379> config get dir\r\n1) \"dir\"\r\n2) \"/home/shenlx/data\"\r\n\r\n[shenlx@snrsdevapp13 src]$ df -hl\r\nFilesystem            Size  Used Avail Use% Mounted on\r\n...\r\ntmpfs                  16G   16K   16G   1% /dev/shm\r\n/dev/vda1             194M  100M   84M  55% /boot\r\n**/dev/mapper/systemvg-homelv           2.0G  1.6G  281M  86% /home**\r\n...\r\n\r\n2.   So, slave writes to temp file failed. The error is as follows:\r\n\r\n10964:S 05 Jun 09:41:55.087 * MASTER <-> SLAVE sync: receiving 413389026 bytes from master\r\n10964:S 05 Jun 09:41:59.129 # Write error or short write writing to the DB dump file needed for MASTER <-> SLAVE synchronization: **Resource temporarily unavailable**\r\n10964:S 05 Jun 09:41:59.988 * Connecting to MASTER 10.245.71.252:6379\r\n10964:S 05 Jun 09:41:59.988 * MASTER <-> SLAVE sync started\r\n10964:S 05 Jun 09:41:59.991 * Non blocking connect for SYNC fired the event.\r\n10964:S 05 Jun 09:41:59.994 * Master replied to PING, replication can continue...\r\n10964:S 05 Jun 09:42:00.000 * (Non critical) Master does not understand REPLCONF capa: -ERR Unrecognized REPLCONF option: capa\r\n10964:S 05 Jun 09:42:00.000 * Partial resynchronization not possible (no cached master)\r\n10964:S 05 Jun 09:42:00.003 * Full resync from master: 511d485419f66d97b9bfc302626fe94fabd2f10c:6550301656\r\n10964:S 05 Jun 09:42:09.106 * MASTER <-> SLAVE sync: receiving 413389026 bytes from master\r\n10964:S 05 Jun 09:42:53.762 # Write error or short write writing to the DB dump file needed for MASTER <-> SLAVE synchronization: **No space left on device**\r\n10964:S 05 Jun 09:42:54.150 * Connecting to MASTER 10.245.71.252:6379\r\n10964:S 05 Jun 09:42:54.150 * MASTER <-> SLAVE sync started\r\n10964:S 05 Jun 09:42:54.153 * Non blocking connect for SYNC fired the event.\r\n10964:S 05 Jun 09:42:54.156 * Master replied to PING, replication can continue...\r\n10964:S 05 Jun 09:42:54.162 * (Non critical) Master does not understand REPLCONF capa: -ERR Unrecognized REPLCONF option: capa\r\n10964:S 05 Jun 09:42:54.162 * Partial resynchronization not possible (no cached master)\r\n10964:S 05 Jun 09:42:54.165 * Full resync from master: 511d485419f66d97b9bfc302626fe94fabd2f10c:6550324985\r\n10964:S 05 Jun 09:43:03.468 * MASTER <-> SLAVE sync: receiving 413389026 bytes from master\r\n10964:S 05 Jun 09:43:29.543 # Write error or short write writing to the DB dump file needed for MASTER <-> SLAVE synchronization: **Resource temporarily unavailable**\r\n\r\n3. The error logs are confusing and incorrect. The root cause is as follows：\r\n```\r\nreplication.c\r\n1209     if (write(server.repl_transfer_fd,buf,nread) != nread) {                                                                                        \r\n1210         serverLog(LL_WARNING,\"Write error or short write writing to the DB dump file needed for MASTER <-> SLAVE synchronization: %s\", strerror(errno));\r\n```\r\nAccording to man 2 write\r\n```\r\nRETURN VALUE\r\n       On  success, the number of bytes written is returned (zero indicates nothing was written).  On error, -1 is returned, and errno is set appropriately.\r\n```\r\nWhen executing write(), only if -1 is returned, the errno will be set appropriately. Otherwise the errno is used incorrectly.  So we need to check return value first. If it is equal to -1, strerror is fine.","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4982","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4982/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4982/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4982/events","html_url":"https://github.com/antirez/redis/issues/4982","id":328923905,"node_id":"MDU6SXNzdWUzMjg5MjM5MDU=","number":4982,"title":"5.0 don't support multi consumer get msg ?","user":{"login":"rfyiamcool","id":3785409,"node_id":"MDQ6VXNlcjM3ODU0MDk=","avatar_url":"https://avatars1.githubusercontent.com/u/3785409?v=4","gravatar_id":"","url":"https://api.github.com/users/rfyiamcool","html_url":"https://github.com/rfyiamcool","followers_url":"https://api.github.com/users/rfyiamcool/followers","following_url":"https://api.github.com/users/rfyiamcool/following{/other_user}","gists_url":"https://api.github.com/users/rfyiamcool/gists{/gist_id}","starred_url":"https://api.github.com/users/rfyiamcool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rfyiamcool/subscriptions","organizations_url":"https://api.github.com/users/rfyiamcool/orgs","repos_url":"https://api.github.com/users/rfyiamcool/repos","events_url":"https://api.github.com/users/rfyiamcool/events{/privacy}","received_events_url":"https://api.github.com/users/rfyiamcool/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-06-04T06:29:10Z","updated_at":"2018-06-04T06:48:53Z","closed_at":"2018-06-04T06:48:53Z","author_association":"NONE","body":"consumer c2 can't get msg from streams stm, redis5.0 return \"empty listor set\" .  i don't understand  the reason .  why can consumer c1 get ?\r\n\r\nenjoy it, thank you.\r\n\r\n```\r\n127.0.0.1:6379> xreadgroup GROUP cg1 c2 count 1 streams stm 0-0\r\n1) 1) \"stm\"\r\n   2) (empty list or set)\r\n\r\n127.0.0.1:6379> xreadgroup GROUP cg1 c1 count 1 streams stm 0-0\r\n1) 1) \"stm\"\r\n   2) 1) 1) 1528091338797-0\r\n         2) 1) \"url\"\r\n            2) \"xiaorui.cc\"\r\n            3) \"typo\"\r\n            4) \"3\"\r\n\r\n127.0.0.1:6379> xreadgroup GROUP cg1 c2 count 1 streams stm >\r\n1) 1) \"stm\"\r\n   2) 1) 1) 1528091339952-0\r\n         2) 1) \"url\"\r\n            2) \"xiaorui.cc\"\r\n            3) \"typo\"\r\n            4) \"4\"\r\n\r\n```","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4978","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4978/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4978/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4978/events","html_url":"https://github.com/antirez/redis/issues/4978","id":328792424,"node_id":"MDU6SXNzdWUzMjg3OTI0MjQ=","number":4978,"title":"[Redis5.0-RC1]crash report","user":{"login":"leonchen83","id":5235764,"node_id":"MDQ6VXNlcjUyMzU3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/5235764?v=4","gravatar_id":"","url":"https://api.github.com/users/leonchen83","html_url":"https://github.com/leonchen83","followers_url":"https://api.github.com/users/leonchen83/followers","following_url":"https://api.github.com/users/leonchen83/following{/other_user}","gists_url":"https://api.github.com/users/leonchen83/gists{/gist_id}","starred_url":"https://api.github.com/users/leonchen83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leonchen83/subscriptions","organizations_url":"https://api.github.com/users/leonchen83/orgs","repos_url":"https://api.github.com/users/leonchen83/repos","events_url":"https://api.github.com/users/leonchen83/events{/privacy}","received_events_url":"https://api.github.com/users/leonchen83/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-06-03T02:09:59Z","updated_at":"2018-06-11T14:56:09Z","closed_at":"2018-06-11T14:56:09Z","author_association":"CONTRIBUTOR","body":"```\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n858:M 03 Jun 10:03:31.524 # Redis 999.999.999 crashed by signal: 11\r\n858:M 03 Jun 10:03:31.524 # Crashed running the instruction at: 0x7faaeaa42d74\r\n858:M 03 Jun 10:03:31.525 # Accessing address: (nil)\r\n858:M 03 Jun 10:03:31.525 # Failed assertion: <no assertion failed> (<no file>:0)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n./src/redis-server 0.0.0.0:6379(stringObjectLen+0x4)[0x7faaeaa42d74]\r\n\r\nBacktrace:\r\n./src/redis-server 0.0.0.0:6379(logStackTrace+0x5a)[0x7faaeaa73a8a]\r\n./src/redis-server 0.0.0.0:6379(sigsegvHandler+0xb1)[0x7faaeaa74241]\r\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x12890)[0x7faae9e42890]\r\n./src/redis-server 0.0.0.0:6379(stringObjectLen+0x4)[0x7faaeaa42d74]\r\n./src/redis-server 0.0.0.0:6379(replicationFeedSlaves+0x21c)[0x7faaeaa48e1c]\r\n./src/redis-server 0.0.0.0:6379(streamPropagateXCLAIM+0x132)[0x7faaeaaab142]\r\n./src/redis-server 0.0.0.0:6379(streamReplyWithRange+0x2ff)[0x7faaeaaabc4f]\r\n./src/redis-server 0.0.0.0:6379(handleClientsBlockedOnKeys+0x572)[0x7faaeaa94cf2]\r\n./src/redis-server 0.0.0.0:6379(processCommand+0x454)[0x7faaeaa30524]\r\n./src/redis-server 0.0.0.0:6379(processInputBuffer+0x115)[0x7faaeaa403d5]\r\n./src/redis-server 0.0.0.0:6379(aeProcessEvents+0x150)[0x7faaeaa299c0]\r\n./src/redis-server 0.0.0.0:6379(aeMain+0x2b)[0x7faaeaa29dab]\r\n./src/redis-server 0.0.0.0:6379(main+0x4ec)[0x7faaeaa2697c]\r\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0x7faae9a51b97]\r\n./src/redis-server 0.0.0.0:6379(_start+0x2a)[0x7faaeaa26baa]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:999.999.999\r\nredis_git_sha1:86de089a\r\nredis_git_dirty:0\r\nredis_build_id:810630adeda6dac\r\nredis_mode:standalone\r\nos:Linux 4.4.0-17134-Microsoft x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:7.3.0\r\nprocess_id:858\r\nrun_id:27b3170eaa69c73a969d739e15b62979f649a8d4\r\ntcp_port:6379\r\nuptime_in_seconds:72067\r\nuptime_in_days:0\r\nhz:10\r\nlru_clock:1264755\r\nexecutable:/home/leon/redis/./src/redis-server\r\nconfig_file:/home/leon/redis/./redis.conf\r\n\r\n# Clients\r\nconnected_clients:2\r\nclient_longest_output_list:2\r\nclient_biggest_input_buf:113\r\nblocked_clients:0\r\n\r\n# Memory\r\nused_memory:1993136\r\nused_memory_human:1.90M\r\nused_memory_rss:3076096\r\nused_memory_rss_human:2.93M\r\nused_memory_peak:2023857\r\nused_memory_peak_human:1.93M\r\nused_memory_peak_perc:98.48%\r\nused_memory_overhead:1988525\r\nused_memory_startup:856060\r\nused_memory_dataset:4611\r\nused_memory_dataset_perc:0.41%\r\nallocator_allocated:1991200\r\nallocator_active:3038208\r\nallocator_resident:3038208\r\ntotal_system_memory:12797194240\r\ntotal_system_memory_human:11.92G\r\nused_memory_lua:37888\r\nused_memory_lua_human:37.00K\r\nmaxmemory:0\r\nmaxmemory_human:0B\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.53\r\nallocator_frag_bytes:1047008\r\nallocator_rss_ratio:1.00\r\nallocator_rss_bytes:0\r\nrss_overhead_ratio:1.01\r\nrss_overhead_bytes:37888\r\nmem_fragmentation_ratio:1.54\r\nmem_fragmentation_bytes:1084896\r\nmem_allocator:libc\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\n\r\n# Persistence\r\nloading:0\r\nrdb_changes_since_last_save:4\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1527991270\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:0\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:0\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:8\r\ntotal_commands_processed:4178\r\ninstantaneous_ops_per_sec:1\r\ntotal_net_input_bytes:155471\r\ntotal_net_output_bytes:33130\r\ninstantaneous_input_kbps:0.04\r\ninstantaneous_output_kbps:0.01\r\nrejected_connections:0\r\nsync_full:5\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nevicted_keys:0\r\nkeyspace_hits:20\r\nkeyspace_misses:0\r\npubsub_channels:0\r\npubsub_patterns:0\r\nlatest_fork_usec:7482\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:1\r\nslave0:ip=127.0.0.1,port=51375,state=online,offset=6676,lag=0\r\nmaster_replid:8c27fa5a9e07db7023a8ee43744878c0c3fd8148\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:7951\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:4248\r\nrepl_backlog_histlen:3704\r\n\r\n# CPU\r\nused_cpu_sys:1.38\r\nused_cpu_user:0.22\r\nused_cpu_sys_children:0.25\r\nused_cpu_user_children:0.00\r\n\r\n# Commandstats\r\ncmdstat_xreadgroup:calls=11,usec=75,usec_per_call=6.82\r\ncmdstat_psync:calls=5,usec=95230,usec_per_call=19046.00\r\ncmdstat_xpending:calls=2,usec=21,usec_per_call=10.50\r\ncmdstat_xlen:calls=2,usec=9,usec_per_call=4.50\r\ncmdstat_xadd:calls=8,usec=1620,usec_per_call=202.50\r\ncmdstat_xinfo:calls=1,usec=19,usec_per_call=19.00\r\ncmdstat_xdel:calls=1,usec=11,usec_per_call=11.00\r\ncmdstat_del:calls=2,usec=370,usec_per_call=185.00\r\ncmdstat_zpopmax:calls=4,usec=91,usec_per_call=22.75\r\ncmdstat_command:calls=2,usec=720,usec_per_call=360.00\r\ncmdstat_xrange:calls=1,usec=1226,usec_per_call=1226.00\r\ncmdstat_bzpopmax:calls=2,usec=54,usec_per_call=27.00\r\ncmdstat_zpopmin:calls=8,usec=172,usec_per_call=21.50\r\ncmdstat_bzpopmin:calls=2,usec=44,usec_per_call=22.00\r\ncmdstat_xgroup:calls=6,usec=62,usec_per_call=10.33\r\ncmdstat_replconf:calls=4097,usec=17194,usec_per_call=4.20\r\ncmdstat_dbsize:calls=1,usec=6,usec_per_call=6.00\r\ncmdstat_ping:calls=5,usec=10,usec_per_call=2.00\r\ncmdstat_zadd:calls=15,usec=756,usec_per_call=50.40\r\ncmdstat_xread:calls=3,usec=51,usec_per_call=17.00\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=3,expires=0,avg_ttl=0\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=5 addr=127.0.0.1:56486 fd=7 name= age=71201 idle=9 flags=u db=0 sub=0 psub=0 multi=-1 qbuf=113 qbuf-free=0 obl=22 oll=2 omem=124 events=r cmd=xreadgroup\r\nid=9 addr=127.0.0.1:51375 fd=8 name= age=1695 idle=0 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=90 oll=0 omem=0 events=r cmd=replconf\r\nid=10 addr=127.0.0.1:51440 fd=9 name= age=913 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=18 oll=0 omem=0 events=r cmd=xadd\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=10 addr=127.0.0.1:51440 fd=9 name= age=913 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=18 oll=0 omem=0 events=r cmd=xadd\r\nargv[0]: 'xadd'\r\nargv[1]: 'codehole'\r\nargv[2]: '1527991411518-0'\r\nargv[3]: 'name'\r\nargv[4]: 'lanying'\r\nargv[5]: 'age'\r\nargv[6]: '61'\r\n858:M 03 Jun 10:03:31.624 # key 'codehole' found in DB containing the following object:\r\n858:M 03 Jun 10:03:31.625 # Object type: 6\r\n858:M 03 Jun 10:03:31.625 # Object encoding: 10\r\n858:M 03 Jun 10:03:31.625 # Object refcount: 1\r\n\r\n------ REGISTERS ------\r\n858:M 03 Jun 10:03:31.627 #\r\nRAX:0000000000100000 RBX:00007ffff9d7a6b0\r\nRCX:0000000000001098 RDX:0000000000000e78\r\nRDI:0000000000000000 RSI:0000000000000a0d\r\nRBP:000000000000000c RSP:00007ffff9d7a670\r\nR8 :00007ffff9d7a6e1 R9 :0000000000000000\r\nR10:0000000000000001 R11:0000000000000000\r\nR12:00007ffff9d7a740 R13:00007ffff9d7a6e0\r\nR14:00007ffff3045b98 R15:00007ffff9d7a758\r\nRIP:00007faaeaa42d74 EFL:0000000000010202\r\nCSGSFS:00000053002b0033\r\n858:M 03 Jun 10:03:31.632 # (00007ffff9d7a67f) -> 00007faaeaa37123\r\n858:M 03 Jun 10:03:31.633 # (00007ffff9d7a67e) -> 0000000a0a0d3824\r\n858:M 03 Jun 10:03:31.633 # (00007ffff9d7a67d) -> 00007ffff30cd068\r\n858:M 03 Jun 10:03:31.633 # (00007ffff9d7a67c) -> 00007faaeaadff57\r\n858:M 03 Jun 10:03:31.634 # (00007ffff9d7a67b) -> 00007faaeaadff58\r\n858:M 03 Jun 10:03:31.634 # (00007ffff9d7a67a) -> cccccccccccccccd\r\n858:M 03 Jun 10:03:31.635 # (00007ffff9d7a679) -> 00007faae9ac72ed\r\n858:M 03 Jun 10:03:31.635 # (00007ffff9d7a678) -> 00007ffff9d7a860\r\n858:M 03 Jun 10:03:31.635 # (00007ffff9d7a677) -> 00007ffff9d7a748\r\n858:M 03 Jun 10:03:31.636 # (00007ffff9d7a676) -> 0000000b00000000\r\n858:M 03 Jun 10:03:31.636 # (00007ffff9d7a675) -> 00007ffff9d7a6e1\r\n858:M 03 Jun 10:03:31.636 # (00007ffff9d7a674) -> 00007ffff9d7a7a0\r\n858:M 03 Jun 10:03:31.637 # (00007ffff9d7a673) -> 00007fff00000001\r\n858:M 03 Jun 10:03:31.637 # (00007ffff9d7a672) -> 0000000000000003\r\n858:M 03 Jun 10:03:31.637 # (00007ffff9d7a671) -> 00007faaeaa48e1c\r\n858:M 03 Jun 10:03:31.638 # (00007ffff9d7a670) -> 00007ffff9d7a740\r\n\r\n------ FAST MEMORY TEST ------\r\n858:M 03 Jun 10:03:31.639 # Bio thread for job type #0 terminated\r\n858:M 03 Jun 10:03:31.639 # Bio thread for job type #1 terminated\r\n858:M 03 Jun 10:03:31.642 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 7faae8087000 (4096 bytes)\r\n*** Preparing to test memory region 7faae8091000 (8388608 bytes)\r\n*** Preparing to test memory region 7faae88a1000 (8388608 bytes)\r\n*** Preparing to test memory region 7faae90b1000 (8388608 bytes)\r\n*** Preparing to test memory region 7faae9e1b000 (8192 bytes)\r\n*** Preparing to test memory region 7faae9e1d000 (16384 bytes)\r\n*** Preparing to test memory region 7faaea04a000 (4096 bytes)\r\n*** Preparing to test memory region 7faaea04b000 (16384 bytes)\r\n*** Preparing to test memory region 7faaea253000 (4096 bytes)\r\n*** Preparing to test memory region 7faaea5fd000 (4096 bytes)\r\n*** Preparing to test memory region 7faaea828000 (4096 bytes)\r\n*** Preparing to test memory region 7faaea829000 (4096 bytes)\r\n*** Preparing to test memory region 7faaea870000 (335872 bytes)\r\n*** Preparing to test memory region 7faaea8d0000 (8192 bytes)\r\n*** Preparing to test memory region 7faaead15000 (20480 bytes)\r\n*** Preparing to test memory region 7faaead1a000 (94208 bytes)\r\n*** Preparing to test memory region 7ffff3012000 (1994752 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n------ DUMPING CODE AROUND EIP ------\r\nSymbol: stringObjectLen (base: 0x7faaeaa42d70)\r\nModule: ./src/redis-server 0.0.0.0:6379 (base 0x7faaeaa00000)\r\n$ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\n$ objdump --adjust-vma=0x7faaeaa42d70 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\n------\r\n858:M 03 Jun 10:03:31.750 # dump of function (hexdump of 132 bytes):\r\n4883ec080fb607a80f0f858a000000a870488b7f0875290fb647ff89c283e20780fa040f8798000000488d0d886809000fb6d2486314914801caffe20f1f4000e83be3ffff89c04883c408c30f1f40008b47f74883c408c30f1f840000000000488b47ef4883c408c30f1f8000000000c0e8034883c4080fb6c0c30f1f4400000fb647fd\r\nFunction at 0x7faaeaa410f0 is sdigits10\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n\r\n       Please report the crash by opening an issue on github:\r\n\r\n           http://github.com/antirez/redis/issues\r\n\r\n  Suspect RAM error? Use redis-server --test-memory to verify it.\r\n\r\nSegmentation fault (core dumped)\r\n```\r\n\r\nenv : windows 10 pro with subsystem ubuntu 18.04LTS\r\nuname -a : `Linux DESKTOP-RSTF5V3 4.4.0-17134-Microsoft #48-Microsoft Fri Apr 27 18:06:00 PST 2018 x86_64 x86_64 x86_64 GNU/Linux`\r\ncpu : \r\n```\r\nprocessor       : 0\r\nvendor_id       : GenuineIntel\r\ncpu family      : 6\r\nmodel           : 60\r\nmodel name      : Intel(R) Core(TM) i5-4210M CPU @ 2.60GHz\r\nstepping        : 3\r\nmicrocode       : 0xffffffff\r\ncpu MHz         : 2601.000\r\ncache size      : 256 KB\r\nphysical id     : 0\r\nsiblings        : 4\r\ncore id         : 0\r\ncpu cores       : 2\r\napicid          : 0\r\ninitial apicid  : 0\r\nfpu             : yes\r\nfpu_exception   : yes\r\ncpuid level     : 6\r\nwp              : yes\r\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 fma cx16 xtpr pdcm pcid sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes xsave osxsave avx f16c rdrand\r\nbogomips        : 5202.00\r\nclflush size    : 64\r\ncache_alignment : 64\r\naddress sizes   : 36 bits physical, 48 bits virtual\r\npower management:\r\n\r\nprocessor       : 1\r\nvendor_id       : GenuineIntel\r\ncpu family      : 6\r\nmodel           : 60\r\nmodel name      : Intel(R) Core(TM) i5-4210M CPU @ 2.60GHz\r\nstepping        : 3\r\nmicrocode       : 0xffffffff\r\ncpu MHz         : 2601.000\r\ncache size      : 256 KB\r\nphysical id     : 0\r\nsiblings        : 4\r\ncore id         : 0\r\ncpu cores       : 2\r\napicid          : 0\r\ninitial apicid  : 0\r\nfpu             : yes\r\nfpu_exception   : yes\r\ncpuid level     : 6\r\nwp              : yes\r\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 fma cx16 xtpr pdcm pcid sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes xsave osxsave avx f16c rdrand\r\nbogomips        : 5202.00\r\nclflush size    : 64\r\ncache_alignment : 64\r\naddress sizes   : 36 bits physical, 48 bits virtual\r\npower management:\r\n\r\nprocessor       : 2\r\nvendor_id       : GenuineIntel\r
8000
\ncpu family      : 6\r\nmodel           : 60\r\nmodel name      : Intel(R) Core(TM) i5-4210M CPU @ 2.60GHz\r\nstepping        : 3\r\nmicrocode       : 0xffffffff\r\ncpu MHz         : 2601.000\r\ncache size      : 256 KB\r\nphysical id     : 0\r\nsiblings        : 4\r\ncore id         : 1\r\ncpu cores       : 2\r\napicid          : 0\r\ninitial apicid  : 0\r\nfpu             : yes\r\nfpu_exception   : yes\r\ncpuid level     : 6\r\nwp              : yes\r\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 fma cx16 xtpr pdcm pcid sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes xsave osxsave avx f16c rdrand\r\nbogomips        : 5202.00\r\nclflush size    : 64\r\ncache_alignment : 64\r\naddress sizes   : 36 bits physical, 48 bits virtual\r\npower management:\r\n\r\nprocessor       : 3\r\nvendor_id       : GenuineIntel\r\ncpu family      : 6\r\nmodel           : 60\r\nmodel name      : Intel(R) Core(TM) i5-4210M CPU @ 2.60GHz\r\nstepping        : 3\r\nmicrocode       : 0xffffffff\r\ncpu MHz         : 2601.000\r\ncache size      : 256 KB\r\nphysical id     : 0\r\nsiblings        : 4\r\ncore id         : 1\r\ncpu cores       : 2\r\napicid          : 0\r\ninitial apicid  : 0\r\nfpu             : yes\r\nfpu_exception   : yes\r\ncpuid level     : 6\r\nwp              : yes\r\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 fma cx16 xtpr pdcm pcid sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes xsave osxsave avx f16c rdrand\r\nbogomips        : 5202.00\r\nclflush size    : 64\r\ncache_alignment : 64\r\naddress sizes   : 36 bits physical, 48 bits virtual\r\npower management:\r\n```\r\n\r\n","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4972","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4972/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4972/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4972/events","html_url":"https://github.com/antirez/redis/issues/4972","id":328448812,"node_id":"MDU6SXNzdWUzMjg0NDg4MTI=","number":4972,"title":"Why did not use zslFreeNode for zsl->header in t_zset.c line 109 ?","user":{"login":"HazelFZ","id":6063001,"node_id":"MDQ6VXNlcjYwNjMwMDE=","avatar_url":"https://avatars1.githubusercontent.com/u/6063001?v=4","gravatar_id":"","url":"https://api.github.com/users/HazelFZ","html_url":"https://github.com/HazelFZ","followers_url":"https://api.github.com/users/HazelFZ/followers","following_url":"https://api.github.com/users/HazelFZ/following{/other_user}","gists_url":"https://api.github.com/users/HazelFZ/gists{/gist_id}","starred_url":"https://api.github.com/users/HazelFZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HazelFZ/subscriptions","organizations_url":"https://api.github.com/users/HazelFZ/orgs","repos_url":"https://api.github.com/users/HazelFZ/repos","events_url":"https://api.github.com/users/HazelFZ/events{/privacy}","received_events_url":"https://api.github.com/users/HazelFZ/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-06-01T09:36:24Z","updated_at":"2018-06-02T03:45:46Z","closed_at":"2018-06-02T03:45:46Z","author_association":"NONE","body":"The type of zsl->header is zskiplistNode. So ,I think to free it should like others use zslFreeNode other than only zfree.\r\n\r\nThe code is in t_zset.c line 106.\r\n\r\n/* Free a whole skiplist. */\r\nvoid zslFree(zskiplist *zsl) {\r\n    zskiplistNode *node = zsl->header->level[0].forward, *next;\r\n\r\n    zfree(zsl->header);\r\n    while(node) {\r\n        next = node->level[0].forward;\r\n        zslFreeNode(node);\r\n        node = next;\r\n    }\r\n    zfree(zsl);\r\n}","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4959","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4959/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4959/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4959/events","html_url":"https://github.com/antirez/redis/issues/4959","id":327219038,"node_id":"MDU6SXNzdWUzMjcyMTkwMzg=","number":4959,"title":"Script command propagates when server.dirty changes","user":{"login":"trevor211","id":5462911,"node_id":"MDQ6VXNlcjU0NjI5MTE=","avatar_url":"https://avatars2.githubusercontent.com/u/5462911?v=4","gravatar_id":"","url":"https://api.github.com/users/trevor211","html_url":"https://github.com/trevor211","followers_url":"https://api.github.com/users/trevor211/followers","following_url":"https://api.github.com/users/trevor211/following{/other_user}","gists_url":"https://api.github.com/users/trevor211/gists{/gist_id}","starred_url":"https://api.github.com/users/trevor211/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevor211/subscriptions","organizations_url":"https://api.github.com/users/trevor211/orgs","repos_url":"https://api.github.com/users/trevor211/repos","events_url":"https://api.github.com/users/trevor211/events{/privacy}","received_events_url":"https://api.github.com/users/trevor211/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-29T08:32:04Z","updated_at":"2018-05-29T10:05:41Z","closed_at":"2018-05-29T10:05:41Z","author_association":"CONTRIBUTOR","body":"Hi, @antirez , \r\nIf there is a command in lua script that causes server.dirty increase, total lua script will be propagated to AOF( If appendonly is yes), backlog and slaves. What if there is only 1 command in the script causes server.dirty increase, while plenty of other commands are just query commands, say GET command. It is a waste of disk and network if users do it this way. Any ideas to make it better ?","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4952","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4952/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4952/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4952/events","html_url":"https://github.com/antirez/redis/issues/4952","id":326720142,"node_id":"MDU6SXNzdWUzMjY3MjAxNDI=","number":4952,"title":"Data loss in AOF","user":{"login":"halaei","id":7089140,"node_id":"MDQ6VXNlcjcwODkxNDA=","avatar_url":"https://avatars1.githubusercontent.com/u/7089140?v=4","gravatar_id":"","url":"https://api.github.com/users/halaei","html_url":"https://github.com/halaei","followers_url":"https://api.github.com/users/halaei/followers","following_url":"https://api.github.com/users/halaei/following{/other_user}","gists_url":"https://api.github.com/users/halaei/gists{/gist_id}","starred_url":"https://api.github.com/users/halaei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halaei/subscriptions","organizations_url":"https://api.github.com/users/halaei/orgs","repos_url":"https://api.github.com/users/halaei/repos","events_url":"https://api.github.com/users/halaei/events{/privacy}","received_events_url":"https://api.github.com/users/halaei/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-26T08:09:21Z","updated_at":"2018-05-26T09:37:54Z","closed_at":"2018-05-26T09:37:54Z","author_association":"NONE","body":"I have 8 redis servers version 4.0.9 installed on a computer. Each has a the default config except the followings:\r\n- save \"\"\r\n- appendonly yes\r\n- appendfsync everysec\r\n- loadmodule custom_module\r\n\r\ncustom_module adds a couple of commands but does not introduce any new data structure. From redis point of view, all the keys store string values. custom_module generates the strings with append and truncate operations. I had the following stats before I realized there is an issue somewhere:\r\n```\r\n\"redis_0 (dbsize): 9218255 memory: 4.01G\"\r\n\"redis_1 (dbsize): 9218393 memory: 4.00G\"\r\n\"redis_2 (dbsize): 9218271 memory: 4.00G\"\r\n\"redis_3 (dbsize): 9218347 memory: 3.99G\"\r\n\"redis_4 (dbsize): 9218356 memory: 4.02G\"\r\n\"redis_5 (dbsize): 9218489 memory: 4.03G\"\r\n\"redis_6 (dbsize): 9218461 memory: 4.01G\"\r\n\"redis_7 (dbsize): 9218539 memory: 4.05G\"\r\n```\r\nHowever, I realized the size of aof files do not match. To make sure there is a bug somewhere, I reboot the system and find some of the keys are lost. I guess the strings are recovered partially as well. \r\n```\r\n\"redis_0 (dbsize): 8784741 memory: 1.44G\"\r\n\"redis_1 (dbsize): 8780667 memory: 1.43G\"\r\n\"redis_2 (dbsize): 8797884 memory: 1.44G\"\r\n\"redis_3 (dbsize): 8786695 memory: 1.43G\"\r\n\"redis_4 (dbsize): 8780880 memory: 1.44G\"\r\n\"redis_5 (dbsize): 8791012 memory: 1.44G\"\r\n\"redis_6 (dbsize): 8782175 memory: 1.44G\"\r\n\"redis_7 (dbsize): 8789821 memory: 1.44G\"\r\n```\r\nI am not sure, but I may invoked bgrewriteaof command on all the instances 2 days before reboot.\r\n\r\nHere are some logs that might be relevant:\r\n```\r\n1568:M 24 May 11:32:33.005 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then rebo...\r\n1568:M 24 May 11:32:33.005 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command ...\r\n...\r\n1568:M 24 May 11:46:59.750 * Background append only file rewriting started by pid 3889\r\n1568:M 24 May 11:46:59.775 * AOF rewrite child asks to stop sending diffs.\r\n3889:C 24 May 11:46:59.775 * Parent agreed to stop sending diffs. Finalizing AOF...\r\n3889:C 24 May 11:46:59.775 * Concatenating 0.00 MB of AOF diff received from parent.\r\n3889:C 24 May 11:46:59.775 * SYNC append only file rewrite performed\r\n3889:C 24 May 11:46:59.777 * AOF rewrite: 4 MB of memory used by copy-on-write\r\n1568:M 24 May 11:46:59.851 * Background AOF rewrite terminated with success\r\n1568:M 24 May 11:46:59.851 * Residual parent diff successfully flushed to the rewritten AOF (0.00 MB)\r\n1568:M 24 May 11:46:59.851 * Background AOF rewrite finished successfully\r\n1568:M 24 May 12:07:27.314 * Starting automatic rewriting of AOF on 6716497600% growth\r\n1568:M 24 May 12:07:27.342 * Background append only file rewriting started by pid 4288\r\n1568:M 24 May 12:07:51.487 * AOF rewrite child asks to stop sending diffs.\r\n4288:C 24 May 12:07:51.487 * Parent agreed to stop sending diffs. Finalizing AOF...\r\n4288:C 24 May 12:07:51.487 * Concatenating 2.03 MB of AOF diff received from parent.\r\n4288:C 24 May 12:07:51.496 * SYNC append only file rewrite performed\r\n4288:C 24 May 12:07:51.508 * AOF rewrite: 911 MB of memory used by copy-on-write\r\n1568:M 24 May 12:07:51.622 * Background AOF rewrite terminated with success\r\n1568:M 24 May 12:07:51.622 * Residual parent diff successfully flushed to the rewritten AOF (0.00 MB)\r\n1568:M 24 May 12:07:51.622 * Background AOF rewrite finished successfully\r\n```\r\n","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4951","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4951/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4951/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4951/events","html_url":"https://github.com/antirez/redis/issues/4951","id":326702438,"node_id":"MDU6SXNzdWUzMjY3MDI0Mzg=","number":4951,"title":"Branch unstable: make test failed","user":{"login":"trevor211","id":5462911,"node_id":"MDQ6VXNlcjU0NjI5MTE=","avatar_url":"https://avatars2.githubusercontent.com/u/5462911?v=4","gravatar_id":"","url":"https://api.github.com/users/trevor211","html_url":"https://github.com/trevor211","followers_url":"https://api.github.com/users/trevor211/followers","following_url":"https://api.github.com/users/trevor211/following{/other_user}","gists_url":"https://api.github.com/users/trevor211/gists{/gist_id}","starred_url":"https://api.github.com/users/trevor211/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevor211/subscriptions","organizations_url":"https://api.github.com/users/trevor211/orgs","repos_url":"https://api.github.com/users/trevor211/repos","events_url":"https://api.github.com/users/trevor211/events{/privacy}","received_events_url":"https://api.github.com/users/trevor211/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-26T02:19:35Z","updated_at":"2018-05-26T12:59:03Z","closed_at":"2018-05-26T12:59:03Z","author_association":"CONTRIBUTOR","body":"Hi, @antirez \r\nWhen I run make test after pull then latest commit, it failed.\r\n\r\nHEAD: f8fd6639e79f9fbd13b87a101135d4f141bfde68\r\n\r\n```\r\n# Memory\r\nused_memory:104857488\r\nused_memory_human:100.00M\r\nused_memory_rss:130965504\r\nused_memory_rss_human:124.90M\r\nused_memory_peak:160162000\r\nused_memory_peak_human:152.74M\r\nused_memory_peak_perc:65.47%\r\nused_memory_overhead:25168566\r\nused_memory_startup:509680\r\nused_memory_dataset:79688922\r\nused_memory_dataset_perc:76.37%\r\nallocator_allocated:105025208\r\nallocator_active:106274816\r\nallocator_resident:125050880\r\ntotal_system_memory:1040736256\r\ntotal_system_memory_human:992.52M\r\nused_memory_lua:37888\r\nused_memory_lua_human:37.00K\r\nmaxmemory:104857600\r\nmaxmemory_human:100.00M\r\nmaxmemory_policy:allkeys-lru\r\nallocator_frag_ratio:1.01\r\nallocator_frag_bytes:1249608\r\nallocator_rss_ratio:1.18\r\nallocator_rss_bytes:18776064\r\nrss_overhead_ratio:1.05\r\nrss_overhead_bytes:5914624\r\nmem_fragmentation_ratio:1.25\r\nmem_fragmentation_bytes:26108088\r\nmem_allocator:jemalloc-4.0.3\r\nactive_defrag_running:33\r\nlazyfree_pending_objects:0\r\n\r\n___ Begin jemalloc statistics ___\r\nVersion: 4.0.3-0-ge9192eacf8935e29fc62fddc2701f7942b1cc02c\r\nAssertions disabled\r\nRun-time option settings:\r\n  opt.abort: false\r\n  opt.lg_chunk: 21\r\n  opt.dss: \"secondary\"\r\n  opt.narenas: 8\r\n  opt.lg_dirty_mult: 3 (arenas.lg_dirty_mult: 3)\r\n  opt.stats_print: false\r\n  opt.junk: \"false\"\r\n  opt.quarantine: 0\r\n  opt.redzone: false\r\n  opt.zero: false\r\n  opt.tcache: true\r\n  opt.lg_tcache_max: 15\r\nCPUs: 2\r\nArenas: 8\r\nPointer size: 8\r\nQuantum size: 8\r\nPage size: 4096\r\nMin active:dirty page ratio per arena: 8:1\r\nMaximum thread-cached size class: 32768\r\nChunk size: 2097152 (2^21)\r\nAllocated: 105029304, active: 106278912, metadata: 5619968, resident: 125046784, mapped: 184549376\r\nCurrent active ceiling: 106954752\r\n\r\narenas[0]:\r\nassigned threads: 1\r\ndss allocation precedence: secondary\r\nmin active:dirty page ratio: 8:1\r\ndirty pages: 25947:3238 active:dirty, 1934 sweeps, 2446 madvises, 14129 purged\r\n                            allocated      nmalloc      ndalloc    nrequests\r\nsmall:                       96214712      3966607      2332603      7859365\r\nlarge:                         425984          111          102          111\r\nhuge:                         8388608            1            0            1\r\ntotal:                      105029304      3966719      2332705      7859477\r\nactive:                     106278912\r\nmapped:                     182452224\r\nmetadata: mapped: 4419584, allocated: 115776\r\nbins:           size ind    allocated      nmalloc      ndalloc    nrequests      curregs      curruns regs pgs  util       nfills     nflushes      newruns       reruns\r\n                   8   0         2192          321           47          437          274            1  512   1 0.535            9            9            1            0\r\n                  16   1     13144368      1954671      1133148      3340099       821523         3210  256   1 0.999        16392         7375         5510         4100\r\n                  24   2      9749880      1001208       594963      1001285       406245          805  512   3 0.985         8128         3824         1369         1027\r\n                  32   3          576          115           97      2255438           18            1  128   1 0.140            4            7            1            0\r\n                  40   4          360          109          100           24            9            1  512   5 0.017            3            7            1            0\r\n                  48   5         2784          162          104           58           58            1  256   3 0.226            3            4            1            0\r\n                  56   6          952          108           91       253072           17            1  512   7 0.033            4            7            1            0\r\n                  64   7          256           65           61            7            4            1   64   1 0.062            1            3            1            0\r\n                  80   8          480          100           94            7            6            1  256   5 0.023            1            4            1            0\r\n                  96   9         9312          200          103           99           97            1  128   3 0.757            3            4            2            0\r\n                 112  10            0          100          100            2            0            0  256   7 1                1            4            1            0\r\n                 128  11          128           32           31            4            1            1   32   1 0.031            1            3            1            0\r\n                 160  12     56611840       957051       603227       956902       353824         2805  128   5 0.985         7017         3829         5470         2740\r\n                 192  13          768           68           64            1            4            1   64   3 0.062            2            4            2            0\r\n                 224  14            0          100          100            1            0            0  128   7 1                1            4            1            0\r\n                 256  15            0           16           16            4            0            0   16   1 1                1            3            1            0\r\n                 320  16     16603520        51936           50        51887        51886          811   64   5 0.999          922            4          811            0\r\n                 384  17          384           32           31            1            1            1   32   3 0.031            1            3            1            0\r\n                 448  18            0           64           64            1            0            0   64   7 1                1            4            1            0\r\n                 512  19          512           10            9            4            1            1    8   1 0.125            1            2            2            0\r\n                 640  20            0           32           32            1            0            0   32   5 1                1            3            1            0\r\n                     ---\r\n                 896  22         8064            9            0            9            9            1   32   7 0.281            0            0            1            0\r\n                1024  23         3072           10            7            4            3            1    4   1 0.750            1            2            3            0\r\n                1280  24         2560           18           16            1            2            1   16   5 0.125            2            3            2            0\r\n                1536  25         7680           19           14            4            5            1    8   3 0.625            4            4            3            0\r\n                1792  26         3584           18           16            1            2            1   16   7 0.125            2            3            2            0\r\n                2048  27         8192           12            8            2            4            2    2   1 1                2            2            6            0\r\n                     ---\r\n                3584  30         7168           12           10            1            2            1    8   7 0.250            2            2            3            0\r\n                     ---\r\n                5120  32        46080            9            0            9            9            3    4   5 0.750            0            0            3            0\r\n                     ---\r\nlarge:          size ind    allocated      nmalloc      ndalloc    nrequests      curruns\r\n               16384  39            0            1            1            1            0\r\n               20480  40        61440            3            0            3            3\r\n                     ---\r\n               28672  42        28672            1            0            1            1\r\n               32768  43        32768            1            0            1            1\r\n               40960  44        81920          103          101          103            2\r\n                     ---\r\n               57344  46        57344            1            0            1            1\r\n                     ---\r\n              163840  52       163840            1            0            1            1\r\n                     ---\r\nhuge:           size ind    allocated      nmalloc      ndalloc    nrequests   curhchunks\r\n                     ---\r\n             8388608  75      8388608            1            0            1            1\r\n                     ---\r\n--- End jemalloc statistics ---\r\n\r\n[err]: Active defrag in tests/unit/memefficiency.tcl\r\ndefrag didn't stop.\r\n```","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4947","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4947/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4947/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4947/events","html_url":"https://github.com/antirez/redis/issues/4947","id":326544998,"node_id":"MDU6SXNzdWUzMjY1NDQ5OTg=","number":4947,"title":"Need to merge latest hiredis version to deps/hiredis","user":{"login":"charsyam","id":439301,"node_id":"MDQ6VXNlcjQzOTMwMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/439301?v=4","gravatar_id":"","url":"https://api.github.com/users/charsyam","html_url":"https://github.com/charsyam","followers_url":"https://api.github.com/users/charsyam/followers","following_url":"https://api.github.com/users/charsyam/following{/other_user}","gists_url":"https://api.github.com/users/charsyam/gists{/gist_id}","starred_url":"https://api.github.com/users/charsyam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/charsyam/subscriptions","organizations_url":"https://api.github.com/users/charsyam/orgs","repos_url":"https://api.github.com/users/charsyam/repos","events_url":"https://api.github.com/users/charsyam/events{/privacy}","received_events_url":"https://api.github.com/users/charsyam/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-25T14:24:10Z","updated_at":"2018-05-25T14:34:15Z","closed_at":"2018-05-25T14:34:15Z","author_association":"CONTRIBUTOR","body":"@antirez deps/hiredis doesn't compile in freebsd \r\n\r\nplease see https://github.com/redis/hiredis/pull/525\r\n\r\nit is merged into hiredis\r\n\r\nbut that version hiredis doesn't merge into redis please merge it Thanks.\r\n\r\nor backporting https://github.com/redis/hiredis/pull/525 is ok.\r\n\r\nit makes to compile success in freebsd","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4940","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4940/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4940/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4940/events","html_url":"https://github.com/antirez/redis/issues/4940","id":326019115,"node_id":"MDU6SXNzdWUzMjYwMTkxMTU=","number":4940,"title":"What is the default location for Redis AOF file for Ubuntu?","user":{"login":"Fl4m3Ph03n1x","id":2980392,"node_id":"MDQ6VXNlcjI5ODAzOTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2980392?v=4","gravatar_id":"","url":"https://api.github.com/users/Fl4m3Ph03n1x","html_url":"https://github.com/Fl4m3Ph03n1x","followers_url":"https://api.github.com/users/Fl4m3Ph03n1x/followers","following_url":"https://api.github.com/users/Fl4m3Ph03n1x/following{/other_user}","gists_url":"https://api.github.com/users/Fl4m3Ph03n1x/gists{/gist_id}","starred_url":"https://api.github.com/users/Fl4m3Ph03n1x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fl4m3Ph03n1x/subscriptions","organizations_url":"https://api.github.com/users/Fl4m3Ph03n1x/orgs","repos_url":"https://api.github.com/users/Fl4m3Ph03n1x/repos","events_url":"https://api.github.com/users/Fl4m3Ph03n1x/events{/privacy}","received_events_url":"https://api.github.com/users/Fl4m3Ph03n1x/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-24T08:38:44Z","updated_at":"2018-05-24T13:36:21Z","closed_at":"2018-05-24T13:36:20Z","author_association":"NONE","body":"Background\r\n-----\r\n\r\nYesterday our machine crashed unexpectedly and our AOF file for Redis got corrupted. \r\n\r\nUpon trying to start the service with `sudo systemctl start redis-server` we are greeted with the following logs:\r\n\r\n>  Bad file format reading the append only file: make a backup of your\r\n> AOF file, then use ./redis-check-aof --fix <filename>\r\n\r\nResearch\r\n----\r\n\r\nAparently this looks like a simple error to fix, just execute `./redis-check-aof --fix <filename>`.\r\n\r\nExcept I don't have the smallest idea of where that file is.\r\n\r\nI have searched the Github discussions for this issue, but unfortunately none provides me with the location for the file:\r\n\r\n - https://github.com/antirez/redis/issues/4931 \r\n\r\nThe persistence documentation also doesn't make a mention of the location for this file:\r\n\r\n - https://redis.io/topics/persistence\r\n\r\nSpecs\r\n----\r\nThese are the specs of the system where I am running Redis:\r\n\r\n    No LSB modules are available.\r\n    Distributor ID: Ubuntu\r\n    Description:    Ubuntu 16.04.3 LTS\r\n    Release:        16.04\r\n    Codename:       xenial\r\n\r\n\r\nQuestion\r\n----\r\n\r\nWhere is located this file?","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4938","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4938/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4938/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4938/events","html_url":"https://github.com/antirez/redis/issues/4938","id":325967366,"node_id":"MDU6SXNzdWUzMjU5NjczNjY=","number":4938,"title":"SET documentation incorrect?","user":{"login":"herzrasen","id":20834977,"node_id":"MDQ6VXNlcjIwODM0OTc3","avatar_url":"https://avatars3.githubusercontent.com/u/20834977?v=4","gravatar_id":"","url":"https://api.github.com/users/herzrasen","html_url":"https://github.com/herzrasen","followers_url":"https://api.github.com/users/herzrasen/followers","following_url":"https://api.github.com/users/herzrasen/following{/other_user}","gists_url":"https://api.github.com/users/herzrasen/gists{/gist_id}","starred_url":"https://api.github.com/users/herzrasen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/herzrasen/subscriptions","organizations_url":"https://api.github.com/users/herzrasen/orgs","repos_url":"https://api.github.com/users/herzrasen/repos","events_url":"https://api.github.com/users/herzrasen/events{/privacy}","received_events_url":"https://api.github.com/users/herzrasen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-24T05:17:15Z","updated_at":"2018-05-27T22:53:38Z","closed_at":"2018-05-27T22:53:38Z","author_association":"NONE","body":"Hi,\r\n\r\nthe Set command documentation says:  `SET key value [EX seconds] [PX milliseconds] [NX|XX]`. [https://redis.io/commands/set](https://redis.io/commands/set)\r\nAccording to this I should be able to execute `SET foo bar ex 1 px 200` (which could be used to model an expiration time of 1 sec and 200 ms). Obviously this isn't possible, which is fine because I can use a PX of 1200 to model this use case. \r\n\r\nHowever: Shouldn't the documentation say `SET key value [EX seconds | PX milliseconds] [NX|XX]`?","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4930","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4930/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4930/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4930/events","html_url":"https://github.com/antirez/redis/issues/4930","id":324553799,"node_id":"MDU6SXNzdWUzMjQ1NTM3OTk=","number":4930,"title":"help please - redis_client::get takes more than a second to reply ","user":{"login":"mia-at-speechmorphing","id":17604334,"node_id":"MDQ6VXNlcjE3NjA0MzM0","avatar_url":"https://avatars2.githubusercontent.com/u/17604334?v=4","gravatar_id":"","url":"https://api.github.com/users/mia-at-speechmorphing","html_url":"https://github.com/mia-at-speechmorphing","followers_url":"https://api.github.com/users/mia-at-speechmorphing/followers","following_url":"https://api.github.com/users/mia-at-speechmorphing/following{/other_user}","gists_url":"https://api.github.com/users/mia-at-speechmorphing/gists{/gist_id}","starred_url":"https://api.github.com/users/mia-at-speechmorphing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mia-at-speechmorphing/subscriptions","organizations_url":"https://api.github.com/users/mia-at-speechmorphing/orgs","repos_url":"https://api.github.com/users/mia-at-speechmorphing/repos","events_url":"https://api.github.com/users/mia-at-speechmorphing/events{/privacy}","received_events_url":"https://api.github.com/users/mia-at-speechmorphing/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-18T21:12:54Z","updated_at":"2018-05-23T15:25:49Z","closed_at":"2018-05-23T15:25:48Z","author_association":"NONE","body":"last downloaded Redis code on August 2017 and adjusted it to be built for VisualStudio 2015 , x64\r\nso I may be asking about a bug that was fixed, although I did not see any mention of it.\r\nalso I am a very straight-forward user of Redis, so please bear with me.\r\n\r\nI noticed that calling \"get\" takes almost 2 seconds to return a value.\r\nmy key is \"Control:107:1\"; I am running a Redis server on my local machine; it has about 200 keys,\r\n\r\nI even deconstructed the command : redis_client->get(key).get() so I can measure timing - here is my code:\r\n\r\n<...snip...>\r\ncpp_redis::future_client* redis_client = new cpp_redis::future_client();\r\nredis_client::connect(host, port, nullptr);\r\n<...snip...>\r\n\r\n\tstring r;\r\n\r\n\tauto startTime = std::chrono::steady_clock::now();\r\n\r\n\tauto get = redis_client->get(key); \r\n\r\n\tauto endTime = std::chrono::steady_clock::now();\r\n\t__int
1882
64 iDiff2 = (std::chrono::duration_cast<std::chrono::microseconds>(endTime - startTime).count()) / 1000;\r\n\tstd::cout << \"redis_client->get(\" << key << \") \" << iDiff2 << std::endl;  \r\n\r\n\tauto val = get.get();\r\n\r\n\tauto endTime2 = std::chrono::steady_clock::now();\r\n\t__int64 iDiff3 = (std::chrono::duration_cast<std::chrono::microseconds>(endTime2 - endTime).count()) / 1000;\r\n\tstd::cout << \"get.get() \" << iDiff3 << std::endl;\r\n\r\n\tif (!val.is_null() && val.is_string())\r\n\t{\r\n\t\tauto startTime = std::chrono::steady_clock::now();\r\n\r\n\t\tr = val.as_string();\r\n\r\n\t\tauto endTime = std::chrono::steady_clock::now();\r\n\t\t__int64 iDiff2 = (std::chrono::duration_cast<std::chrono::microseconds>(endTime - startTime).count()) / 1000;\r\n\t\tstd::cout << \"val.as_string() \" << iDiff2 << std::endl;\r\n\t}\r\n\r\n\treturn r;\r\n\r\n----------------------\r\n\r\nmy result prints are:\r\n\r\nredis_client->get(Control:107:1) 0\r\n**get.get() 1939**\r\nval.as_string() 0\r\n\r\nplease help me understand....\r\nthank you\r\nMia","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4928","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4928/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4928/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4928/events","html_url":"https://github.com/antirez/redis/issues/4928","id":324400423,"node_id":"MDU6SXNzdWUzMjQ0MDA0MjM=","number":4928,"title":"What is the root file","user":{"login":"xuhuigithub","id":27714293,"node_id":"MDQ6VXNlcjI3NzE0Mjkz","avatar_url":"https://avatars1.githubusercontent.com/u/27714293?v=4","gravatar_id":"","url":"https://api.github.com/users/xuhuigithub","html_url":"https://github.com/xuhuigithub","followers_url":"https://api.github.com/users/xuhuigithub/followers","following_url":"https://api.github.com/users/xuhuigithub/following{/other_user}","gists_url":"https://api.github.com/users/xuhuigithub/gists{/gist_id}","starred_url":"https://api.github.com/users/xuhuigithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuhuigithub/subscriptions","organizations_url":"https://api.github.com/users/xuhuigithub/orgs","repos_url":"https://api.github.com/users/xuhuigithub/repos","events_url":"https://api.github.com/users/xuhuigithub/events{/privacy}","received_events_url":"https://api.github.com/users/xuhuigithub/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-05-18T12:57:23Z","updated_at":"2018-05-20T19:56:25Z","closed_at":"2018-05-20T11:37:03Z","author_association":"NONE","body":"\r\n## Environment info：\r\n- Centos 7\r\n- Redis server v=3.2.3 sha=00000000:0 malloc=jemalloc-3.6.0 bits=64 build=672aed6eb816ad6c（yum install）\r\n\r\n## Redis config file\r\n```\r\nbind 192.168.206.80 127.0.0.1\r\nport 6379\r\ntcp-backlog 1024\r\ntimeout 0\r\ntcp-keepalive 300\r\ndaemonize no\r\nsupervised no\r\nloglevel notice\r\nlogfile \"/var/log/redis/redis.log\"\r\ndatabases 16\r\n\r\ndir \"/es/redis\"\r\nstop-writes-on-bgsave-error yes\r\nrdbcompression yes\r\nrdbchecksum yes\r\ndbfilename \"redis.rdb\"\r\nslave-serve-stale-data yes\r\nslave-read-only yes\r\nslave-priority 100\r\nrepl-diskless-sync no\r\nrepl-backlog-size 5mb\r\nrepl-timeout 6000\r\nrepl-disable-tcp-nodelay no\r\nappendonly yes\r\nappendfsync everysec\r\nappendfilename \"redis.aof\"\r\nno-appendfsync-on-rewrite no\r\nauto-aof-rewrite-percentage 100\r\nauto-aof-rewrite-min-size 64mb\r\naof-load-truncated yes\r\nlua-time-limit 5000\r\nslowlog-log-slower-than 10000\r\nslowlog-max-len 128\r\nlatency-monitor-threshold 0\r\nnotify-keyspace-events \"\"\r\nhash-max-ziplist-entries 512\r\nhash-max-ziplist-value 64\r\nlist-max-ziplist-size -2\r\nlist-compress-depth 0\r\nset-max-intset-entries 512\r\nzset-max-ziplist-entries 128\r\nzset-max-ziplist-value 64\r\nhll-sparse-max-bytes 3000\r\nactiverehashing yes\r\nclient-output-buffer-limit normal 0 0 0\r\nclient-output-buffer-limit slave 256mb 64mb 60\r\nclient-output-buffer-limit pubsub 32mb 8mb 60\r\nhz 10\r\naof-rewrite-incremental-fsync yes\r\n# Generated by CONFIG REWRITE\r\n```\r\n\r\nWhen I checked the storage path(/es/redis), I found a file which name is root.\r\n\r\nWhat's that?\r\n\r\nWhy is he going to be here?","score":1.0},{"url":"https://api.github.com/repos/antirez/redis/issues/4925","repository_url":"https://api.github.com/repos/antirez/redis","labels_url":"https://api.github.com/repos/antirez/redis/issues/4925/labels{/name}","comments_url":"https://api.github.com/repos/antirez/redis/issues/4925/comments","events_url":"https://api.github.com/repos/antirez/redis/issues/4925/events","html_url":"https://github.com/antirez/redis/issues/4925","id":323883671,"node_id":"MDU6SXNzdWUzMjM4ODM2NzE=","number":4925,"title":"Ambiguity in geohashEncode function","user":{"login":"zhuojian","id":13113969,"node_id":"MDQ6VXNlcjEzMTEzOTY5","avatar_url":"https://avatars3.githubusercontent.com/u/13113969?v=4","gravatar_id":"","url":"https://api.github.com/users/zhuojian","html_url":"https://github.com/zhuojian","followers_url":"https://api.github.com/users/zhuojian/followers","following_url":"https://api.github.com/users/zhuojian/following{/other_user}","gists_url":"https://api.github.com/users/zhuojian/gists{/gist_id}","starred_url":"https://api.github.com/users/zhuojian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhuojian/subscriptions","organizations_url":"https://api.github.com/users/zhuojian/orgs","repos_url":"https://api.github.com/users/zhuojian/repos","events_url":"https://api.github.com/users/zhuojian/events{/privacy}","received_events_url":"https://api.github.com/users/zhuojian/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-17T06:06:50Z","updated_at":"2018-05-22T08:00:08Z","closed_at":"2018-05-22T08:00:08Z","author_association":"NONE","body":"geohash.c 147 line\r\n\r\nwhen step equal 32, the result always equal 0","score":1.0}]}
0

