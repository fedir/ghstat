HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 14 Nov 2020 18:06:09 GMT
Link: <https://api.github.com/search/issues?q=https%3A%2F%2Fgithub.com%2Frack-app%2Frack-app+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=https%3A%2F%2Fgithub.com%2Frack-app%2Frack-app+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
Vary: Accept, Authorization, Cookie, X-GitHub-OTP
Vary: Accept-Encoding, Accept, X-Requested-With
Vary: Accept-Encoding
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: CFAC:41F4:3D91CF0:46F5644:5FB01C90
X-Oauth-Scopes: repo
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 0
X-Ratelimit-Reset: 1605377196
X-Ratelimit-Used: 30
X-Xss-Protection: 1; mode=block

2d47b
{"total_count":5967,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/newrelic/newrelic-ruby-agent/issues/486","repository_url":"https://api.github.com/repos/newrelic/newrelic-ruby-agent","labels_url":"https://api.github.com/repos/newrelic/newrelic-ruby-agent/issues/486/labels{/name}","comments_url":"https://api.github.com/repos/newrelic/newrelic-ruby-agent/issues/486/comments","events_url":"https://api.github.com/repos/newrelic/newrelic-ruby-agent/issues/486/events","html_url":"https://github.com/newrelic/newrelic-ruby-agent/issues/486","id":731517237,"node_id":"MDU6SXNzdWU3MzE1MTcyMzc=","number":486,"title":"Agent does not work with RackApp on Ruby 2.7","user":{"login":"mitnal","id":48080,"node_id":"MDQ6VXNlcjQ4MDgw","avatar_url":"https://avatars2.githubusercontent.com/u/48080?v=4","gravatar_id":"","url":"https://api.github.com/users/mitnal","html_url":"https://github.com/mitnal","followers_url":"https://api.github.com/users/mitnal/followers","following_url":"https://api.github.com/users/mitnal/following{/other_user}","gists_url":"https://api.github.com/users/mitnal/gists{/gist_id}","starred_url":"https://api.github.com/users/mitnal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitnal/subscriptions","organizations_url":"https://api.github.com/users/mitnal/orgs","repos_url":"https://api.github.com/users/mitnal/repos","events_url":"https://api.github.com/users/mitnal/events{/privacy}","received_events_url":"https://api.github.com/users/mitnal/received_events","type":"User","site_admin":false},"labels":[{"id":2272185251,"node_id":"MDU6TGFiZWwyMjcyMTg1MjUx","url":"https://api.github.com/repos/newrelic/newrelic-ruby-agent/labels/bug","name":"bug","color":"b60205","default":true,"description":""}],"state":"closed","locked":false,"assignee":{"login":"mwlang","id":18387,"node_id":"MDQ6VXNlcjE4Mzg3","avatar_url":"https://avatars0.githubusercontent.com/u/18387?v=4","gravatar_id":"","url":"https://api.github.com/users/mwlang","html_url":"https://github.com/mwlang","followers_url":"https://api.github.com/users/mwlang/followers","following_url":"https://api.github.com/users/mwlang/following{/other_user}","gists_url":"https://api.github.com/users/mwlang/gists{/gist_id}","starred_url":"https://api.github.com/users/mwlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mwlang/subscriptions","organizations_url":"https://api.github.com/users/mwlang/orgs","repos_url":"https://api.github.com/users/mwlang/repos","events_url":"https://api.github.com/users/mwlang/events{/privacy}","received_events_url":"https://api.github.com/users/mwlang/received_events","type":"User","site_admin":false},"assignees":[{"login":"mwlang","id":18387,"node_id":"MDQ6VXNlcjE4Mzg3","avatar_url":"https://avatars0.githubusercontent.com/u/18387?v=4","gravatar_id":"","url":"https://api.github.com/users/mwlang","html_url":"https://github.com/mwlang","followers_url":"https://api.github.com/users/mwlang/followers","following_url":"https://api.github.com/users/mwlang/following{/other_user}","gists_url":"https://api.github.com/users/mwlang/gists{/gist_id}","starred_url":"https://api.github.com/users/mwlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mwlang/subscriptions","organizations_url":"https://api.github.com/users/mwlang/orgs","repos_url":"https://api.github.com/users/mwlang/repos","events_url":"https://api.github.com/users/mwlang/events{/privacy}","received_events_url":"https://api.github.com/users/mwlang/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/newrelic/newrelic-ruby-agent/milestones/2","html_url":"https://github.com/newrelic/newrelic-ruby-agent/milestone/2","labels_url":"https://api.github.com/repos/newrelic/newrelic-ruby-agent/milestones/2/labels","id":5895205,"node_id":"MDk6TWlsZXN0b25lNTg5NTIwNQ==","number":2,"title":"Q3 Ruby Bug Smash","description":"Time Box 1 week - Bug Smash!!!!","creator":{"login":"angelatan2","id":69914680,"node_id":"MDQ6VXNlcjY5OTE0Njgw","avatar_url":"https://avatars1.githubusercontent.com/u/69914680?v=4","gravatar_id":"","url":"https://api.github.com/users/angelatan2","html_url":"https://github.com/angelatan2","followers_url":"https://api.github.com/users/angelatan2/followers","following_url":"https://api.github.com/users/angelatan2/following{/other_user}","gists_url":"https://api.github.com/users/angelatan2/gists{/gist_id}","starred_url":"https://api.github.com/users/angelatan2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/angelatan2/subscriptions","organizations_url":"https://api.github.com/users/angelatan2/orgs","repos_url":"https://api.github.com/users/angelatan2/repos","events_url":"https://api.github.com/users/angelatan2/events{/privacy}","received_events_url":"https://api.github.com/users/angelatan2/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":17,"state":"open","created_at":"2020-09-18T23:40:56Z","updated_at":"2020-11-13T21:47:27Z","due_on":"2020-11-06T08:00:00Z","closed_at":null},"comments":5,"created_at":"2020-10-28T14:53:12Z","updated_at":"2020-11-07T00:26:02Z","closed_at":"2020-11-07T00:26:02Z","author_association":"NONE","active_lock_reason":null,"body":"The new relic agent does not work together with [RackApp](http://www.rack-app.com) on ruby 2.7.\r\n\r\n\r\n## Description\r\n\r\nAfter upgrading to Ruby 2.7 our App did not start anymore in production env. After digging around it seems that one of the ruby 2.7 fixes splats an argument and the RackApp argument is 'converted' to a hash. RackApp then calls `serialize` on the argument expecting it would be a custom RackApp class, but instead it is a hash. This results in `undefined method 'serializer' for #<Hash:0x00007fa43fb8c758> (NoMethodError)` and the app does not start.\r\n\r\nBecause we have no problems running this combination in Ruby 2.6 I think the problem is the splat here int the Ruby 2.7 path:\r\nhttps://github.com/newrelic/newrelic-ruby-agent/blob/dev/lib/new_relic/agent/instrumentation/middleware_proxy.rb#L30-L40\r\n\r\n## Expected Behavior\r\n\r\nNo `NoMethodError` when using the ruby agent and Rack App in the same app. The agent should not change arguments to rack apps (in this case it should not convert it to a hash).\r\n\r\n## [Troubleshooting](https://discuss.newrelic.com/t/troubleshooting-frameworks/108787) or [NR Diag]\r\n\r\nTraceback from test app.\r\n```\r\nrails s\r\n=> Booting Puma\r\n=> Rails 6.0.3.4 application starting in production\r\n=> Run `rails server --help` for more startup options\r\nExiting\r\nTraceback (most recent call last):\r\n\t96: from bin/rails:9:in `<main>'\r\n\t95: from [...]/.rvm/gems/ruby-2.7.2/gems/activesupport-6.0.3.4/lib/active_support/dependencies.rb:324:in `require'\r\n\t94: from [...]/.rvm/gems/ruby-2.7.2/gems/activesupport-6.0.3.4/lib/active_support/dependencies.rb:291:in `load_dependency'\r\n\t93: from [...]/.rvm/gems/ruby-2.7.2/gems/activesupport-6.0.3.4/lib/active_support/dependencies.rb:324:in `block in require'\r\n\t92: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:31:in `require'\r\n\t91: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require_with_bootsnap_lfi'\r\n\t90: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\r\n\t89: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `block in require_with_bootsnap_lfi'\r\n\t88: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `require'\r\n\t87: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/commands.rb:18:in `<main>'\r\n\t86: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/command.rb:46:in `invoke'\r\n\t85: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/command/base.rb:69:in `perform'\r\n\t84: from [...]/.rvm/gems/ruby-2.7.2/gems/thor-1.0.1/lib/thor.rb:392:in `dispatch'\r\n\t83: from [...]/.rvm/gems/ruby-2.7.2/gems/thor-1.0.1/lib/thor/invocation.rb:127:in `invoke_command'\r\n\t82: from [...]/.rvm/gems/ruby-2.7.2/gems/thor-1.0.1/lib/thor/command.rb:27:in `run'\r\n\t81: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/commands/server/server_command.rb:138:in `perform'\r\n\t80: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/commands/server/server_command.rb:138:in `tap'\r\n\t79: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/commands/server/server_command.rb:147:in `block in perform'\r\n\t78: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/commands/server/server_command.rb:39:in `start'\r\n\t77: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/server.rb:311:in `start'\r\n\t76: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/server.rb:379:in `handle_profiling'\r\n\t75: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/server.rb:312:in `block in start'\r\n\t74: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/server.rb:422:in `wrapped_app'\r\n\t73: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/server.rb:249:in `app'\r\n\t72: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/server.rb:349:in `build_app_and_options_from_config'\r\n\t71: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:66:in `parse_file'\r\n\t70: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:105:in `load_file'\r\n\t69: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:116:in `new_from_string'\r\n\t68: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:116:in `eval'\r\n\t67: from config.ru:3:in `block in <main>'\r\n\t66: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:53:in `require_relative'\r\n\t65: from [...]/.rvm/gems/ruby-2.7.2/gems/activesupport-6.0.3.4/lib/active_support/dependencies.rb:324:in `require'\r\n\t64: from [...]/.rvm/gems/ruby-2.7.2/gems/activesupport-6.0.3.4/lib/active_support/dependencies.rb:291:in `load_dependency'\r\n\t63: from [...]/.rvm/gems/ruby-2.7.2/gems/activesupport-6.0.3.4/lib/active_support/dependencies.rb:324:in `block in require'\r\n\t62: from [...]/.rvm/gems/ruby-2.7.2/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:34:in `require'\r\n\t61: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:31:in `require'\r\n\t60: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require_with_bootsnap_lfi'\r\n\t59: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\r\n\t58: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `block in require_with_bootsnap_lfi'\r\n\t57: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `require'\r\n\t56: from [...]/workspace/nr-rackapp-test/config/environment.rb:5:in `<main>'\r\n\t55: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/application.rb:363:in `initialize!'\r\n\t54: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/initializable.rb:60:in `run_initializers'\r\n\t53: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:205:in `tsort_each'\r\n\t52: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:226:in `tsort_each'\r\n\t51: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:347:in `each_strongly_connected_component'\r\n\t50: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:347:in `call'\r\n\t49: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:347:in `each'\r\n\t48: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:349:in `block in each_strongly_connected_component'\r\n\t47: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:431:in `each_strongly_connected_component_from'\r\n\t46: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\r\n\t45: from [...]/.rvm/rubies/ruby-2.7.2/lib/ruby/2.7.0/tsort.rb:228:in `block in tsort_each'\r\n\t44: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/initializable.rb:61:in `block in run_initializers'\r\n\t43: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/initializable.rb:32:in `run'\r\n\t42: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/initializable.rb:32:in `instance_exec'\r\n\t41: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/application/finisher.rb:184:in `block in <module:Finisher>'\r\n\t40: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/application/routes_reloader.rb:10:in `execute'\r\n\t39: from [...]/.rvm/gems/ruby-2.7.2/gems/activesupport-6.0.3.4/lib/active_support/file_update_checker.rb:83:in `execute'\r\n\t38: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/application/routes_reloader.rb:29:in `block in updater'\r\n\t37: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/application/routes_reloader.rb:20:in `reload!'\r\n\t36: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/application/routes_reloader.rb:40:in `load_paths'\r\n\t35: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/application/routes_reloader.rb:40:in `each'\r\n\t34: from [...]/.rvm/gems/ruby-2.7.2/gems/railties-6.0.3.4/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'\r\n\t33: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:59:in `load'\r\n\t32: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:59:in `load'\r\n\t31: from [...]/workspace/nr-rackapp-test/config/routes.rb:3:in `<main>'\r\n\t30: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:53:in `require_relative'\r\n\t29: from [...]/.rvm/gems/ruby-2.7.2/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:34:in `require'\r\n\t28: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:31:in `require'\r\n\t27: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require_with_bootsnap_lfi'\r\n\t26: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\r\n\t25: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `block in require_with_bootsnap_lfi'\r\n\t24: from [...]/.rvm/gems/ruby-2.7.2/gems/bootsnap-1.4.9/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `require'\r\n\t23: from [...]/workspace/nr-rackapp-test/lib/hello_world.rb:5:in `<main>'\r\n\t22: from [...]/workspace/nr-rackapp-test/lib/hello_world.rb:7:in `<class:HelloWorld>'\r\n\t21: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/singleton_methods/http_methods.rb:6:in `get'\r\n\t20: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/singleton_methods/route_handling.rb:23:in `add_route'\r\n\t19: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router.rb:25:in `register_endpoint!'\r\n\t18: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router.rb:83:in `compile_endpoint!'\r\n\t17: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router/tree.rb:17:in `add'\r\n\t16: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router/tree/branch.rb:8:in `set'\r\n\t15: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router/tree/leaf.rb:15:in `set'\r\n\t14: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router/tree/leaf.rb:35:in `save_endpoint'\r\n\t13: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router/tree/leaf.rb:44:in `split_save_to_extnames'\r\n\t12: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router/tree/vein.rb:5:in `set'\r\n\t11: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/router/tree/vein.rb:23:in `create_app'\r\n\t10: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/endpoint.rb:34:in `to_app'\r\n\t 9: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/endpoint/builder.rb:10:in `to_app'\r\n\t 8: from [...]/.rvm/gems/ruby-2.7.2/gems/newrelic_rpm-6.13.1/lib/new_relic/agent/instrumentation/rack.rb:138:in `to_app_with_newrelic_deferred_dependency_detection'\r\n\t 7: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:235:in `to_app'\r\n\t 6: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:235:in `inject'\r\n\t 5: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:235:in `each'\r\n\t 4: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:235:in `block in to_app'\r\n\t 3: from [...]/.rvm/gems/ruby-2.7.2/gems/rack-2.2.3/lib/rack/builder.rb:158:in `block in use'\r\n\t 2: from [...]/.rvm/gems/ruby-2.7.2/gems/newrelic_rpm-6.13.1/lib/new_relic/agent/instrumentation/middleware_proxy.rb:37:in `new'\r\n\t 1: from [...]/.rvm/gems/ruby-2.7.2/gems/newrelic_rpm-6.13.1/lib/new_relic/agent/instrumentation/middleware_proxy.rb:37:in `new'\r\n[...]/.rvm/gems/ruby-2.7.2/gems/rack-app-7.6.4/lib/rack/app/middlewares/configuration.rb:8:in `initialize': undefined method `serializer' for #<Hash:0x00007fa43fb8c758> (NoMethodError)\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\nSimple Rails Test App.\r\nNew Rails App, just added RackApp with a dummy endpoint (hello_world.rb) and then added the agent. Without agent the app works, with agent the app crashes. \r\n\r\nhttps://github.com/mitnal/nr-rackapp-test\r\n\r\nClone test rails app, bundle, and just run `rails s`.\r\n\r\nIn our real app the problem only occurred in production env (I think because of the agent configuration) but the test app also crashes in development. If not try: `RAILS_ENV=production rails s`.\r\n\r\n## Your Environment\r\n\r\nruby 2.7.2p137\r\nrails (6.0.3.4)\r\nnewrelic_rpm (6.13.1)\r\nrack-app (7.6.4)\r\nrack (2.2.3)\r\n\r\nI can reproduce this problem locally on my Mac and also on Heroku so it should be OS independent.\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/huginn/huginn/issues/2878","repository_url":"https://api.github.com/repos/huginn/huginn","labels_url":"https://api.github.com/repos/huginn/huginn/issues/2878/labels{/name}","comments_url":"https://api.github.com/repos/huginn/huginn/issues/2878/comments","events_url":"https://api.github.com/repos/huginn/huginn/issues/2878/events","html_url":"https://github.com/huginn/huginn/issues/2878","id":713512367,"node_id":"MDU6SXNzdWU3MTM1MTIzNjc=","number":2878,"title":"Question: how to format a list? ","user":{"login":"zblesk","id":4245227,"node_id":"MDQ6VXNlcjQyNDUyMjc=","avatar_url":"https://avatars2.githubusercontent.com/u/4245227?v=4","gravatar_id":"","url":"https://api.github.com/users/zblesk","html_url":"https://github.com/zblesk","followers_url":"https://api.github.com/users/zblesk/followers","following_url":"https://api.github.com/users/zblesk/following{/other_user}","gists_url":"https://api.github.com/users/zblesk/gists{/gist_id}","starred_url":"https://api.github.com/users/zblesk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zblesk/subscriptions","organizations_url":"https://api.github.com/users/zblesk/orgs","repos_url":"https://api.github.com/users/zblesk/repos","events_url":"https://api.github.com/users/zblesk/events{/privacy}","received_events_url":"https://api.github.com/users/zblesk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-10-02T10:18:59Z","updated_at":"2020-11-09T22:50:26Z","closed_at":"2020-10-28T15:18:54Z","author_association":"NONE","active_lock_reason":null,"body":"I use a lot of RSS feed sources. For now it's starting to look like #2099, but I don't want to get that far, partly because of the way the diagram is laid out. \r\n\r\nThe docs for the RSS source say: \r\n\r\n> url - The URL of the RSS feed (an array of URLs can also be used; items with identical guids across feeds will be considered duplicates). \r\n\r\nSo maybe that could help. But I can't seem to figure out how to _format_ that list of URLs. I tried various permutations (with or without brackets, quotes, as a liquid expression) but nothing worked. I assume I'm missing something obvious. Any help appreciated! ","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/learn-co-curriculum/rails-static-request-readme/issues/22","repository_url":"https://api.github.com/repos/learn-co-curriculum/rails-static-request-readme","labels_url":"https://api.github.com/repos/learn-co-curriculum/rails-static-request-readme/issues/22/labels{/name}","comments_url":"https://api.github.com/repos/learn-co-curriculum/rails-static-request-readme/issues/22/comments","events_url":"https://api.github.com/repos/learn-co-curriculum/rails-static-request-readme/issues/22/events","html_url":"https://github.com/learn-co-curriculum/rails-static-request-readme/issues/22","id":733277645,"node_id":"MDU6SXNzdWU3MzMyNzc2NDU=","number":22,"title":"Rails Server Bug","user":{"login":"doosemavis","id":70960898,"node_id":"MDQ6VXNlcjcwOTYwODk4","avatar_url":"https://avatars1.githubusercontent.com/u/70960898?v=4","gravatar_id":"","url":"https://api.github.com/users/doosemavis","html_url":"https://github.com/doosemavis","followers_url":"https://api.github.com/users/doosemavis/followers","following_url":"https://api.github.com/users/doosemavis/following{/other_user}","gists_url":"https://api.github.com/users/doosemavis/gists{/gist_id}","starred_url":"https://api.github.com/users/doosemavis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doosemavis/subscriptions","organizations_url":"https://api.github.com/users/doosemavis/orgs","repos_url":"https://api.github.com/users/doosemavis/repos","events_url":"https://api.github.com/users/doosemavis/events{/privacy}","received_events_url":"https://api.github.com/users/doosemavis/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-30T15:28:01Z","updated_at":"2020-11-02T16:03:36Z","closed_at":"2020-11-02T14:40:30Z","author_association":"NONE","active_lock_reason":null,"body":"Hi there, I had to add the following items to my VSCode from the `rails-static-request-readme` lab for the server to boot up properly in this lab.  Wanted to let you all know about it! \r\n\r\n\r\n**Inside:**  `app/assets`\r\n\r\n**Added this folder:** `config`\r\n\r\n**In config folder, added this file:** `manifest.js` \r\n\r\n**In manifest.js, added this code:** \r\n\r\n`//= link_tree ../images`\r\n`//= link_directory ../javascripts .js`\r\n`//= link_directory ../stylesheets .css`\r\n\r\n\r\n**I was receiving this error before I added that code:** \r\n\r\n=> Booting Puma\r\n=> Rails 5.0.7.1 application starting in development on http://localhost:3000\r\n=> Run `rails server -h` for more startup options\r\nExiting\r\nTraceback (most recent call last):\r\n\t34: from bin/rails:4:in `<main>'\r\n\t33: from bin/rails:4:in `require'\r\n\t32: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/commands.rb:18:in `<top (required)>'\r\n\t31: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\r\n\t30: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/commands/commands_tasks.rb:85:in `server'\r\n\t29: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/commands/commands_tasks.rb:85:in `tap'\r\n\t28: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/commands/commands_tasks.rb:90:in `block in server'\r\n\t27: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/commands/server.rb:102:in `start'\r\n\t26: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/commands/server.rb:148:in `log_to_stdout'\r\n\t25: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/rack-2.2.3/lib/rack/server.rb:422:in `wrapped_app'\r\n\t24: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/commands/server.rb:84:in `app'\r\n\t23: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/rack-2.2.3/lib/rack/server.rb:249:in `app'\r\n\t22: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/rack-2.2.3/lib/rack/server.rb:349:in `build_app_and_options_from_config'\r\n\t21: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/rack-2.2.3/lib/rack/builder.rb:66:in `parse_file'\r\n\t20: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/rack-2.2.3/lib/rack/builder.rb:105:in `load_file'\r\n\t19: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/rack-2.2.3/lib/rack/builder.rb:116:in `new_from_string'\r\n\t18: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/rack-2.2.3/lib/rack/builder.rb:116:in `eval'\r\n\t17: from /Users/Moose/Development/Flatiron/labs/rails-static-request-readme-onl01-seng-ft-090820/config.ru:3:in `block in <main>'\r\n\t16: from /Users/Moose/Development/Flatiron/labs/rails-static-request-readme-onl01-seng-ft-090820/config.ru:3:in `require'\r\n\t15: from /Users/Moose/Development/Flatiron/labs/rails-static-request-readme-onl01-seng-ft-090820/config/environment.rb:5:in `<top (required)>'\r\n\t14: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/application.rb:352:in `initialize!'\r\n\t13: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/initializable.rb:54:in `run_initializers'\r\n\t12: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'\r\n\t11: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'\r\n\t10: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'\r\n\t 9: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:347:in `call'\r\n\t 8: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:347:in `each'\r\n\t 7: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'\r\n\t 6: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'\r\n\t 5: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\r\n\t 4: from /Users/Moose/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'\r\n\t 3: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/initializable.rb:55:in `block in run_initializers'\r\n\t 2: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/initializable.rb:30:in `run'\r\n\t 1: from /Users/Moose/.rvm/gems/ruby-2.6.1/gems/railties-5.0.7.1/lib/rails/initializable.rb:30:in `instance_exec'\r\n/Users/Moose/.rvm/gems/ruby-2.6.1/gems/sprockets-rails-3.2.2/lib/sprockets/railtie.rb:106:in `block in <class:Railtie>': Expected to find a manifest file in `app/assets/config/manifest.js` (Sprockets::Railtie::ManifestNeededError)\r\nBut did not, please create this file and use it to link any assets that need\r\nto be rendered by your app:\r\n\r\nExample:\r\n  //= link_tree ../images\r\n  //= link_directory ../javascripts .js\r\n  //= link_directory ../stylesheets .css\r\nand restart your server\r\n\r\nFor more information see: https://github.com/rails/sprockets/blob/070fc01947c111d35bb4c836e9bb71962a8e0595/UPGRADING.md#manifestjs","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/airbrake/airbrake/issues/1132","repository_url":"https://api.github.com/repos/airbrake/airbrake","labels_url":"https://api.github.com/repos/airbrake/airbrake/issues/1132/labels{/name}","comments_url":"https://api.github.com/repos/airbrake/airbrake/issues/1132/comments","events_url":"https://api.github.com/repos/airbrake/airbrake/issues/1132/events","html_url":"https://github.com/airbrake/airbrake/issues/1132","id":715955866,"node_id":"MDU6SXNzdWU3MTU5NTU4NjY=","number":1132,"title":"when warden is present then try_current_user not work","user":{"login":"skojin","id":8044,"node_id":"MDQ6VXNlcjgwNDQ=","avatar_url":"https://avatars2.githubusercontent.com/u/8044?v=4","gravatar_id":"","url":"https://api.github.com/users/skojin","html_url":"https://github.com/skojin","followers_url":"https://api.github.com/users/skojin/followers","following_url":"https://api.github.com/users/skojin/following{/other_user}","gists_url":"https://api.github.com/users/skojin/gists{/gist_id}","starred_url":"https://api.github.com/users/skojin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skojin/subscriptions","organizations_url":"https://api.github.com/users/skojin/orgs","repos_url":"https://api.github.com/users/skojin/repos","events_url":"https://api.github.com/users/skojin/events{/privacy}","received_events_url":"https://api.github.com/users/skojin/received_events","type":"User","site_admin":false},"labels":[{"id":302310593,"node_id":"MDU6TGFiZWwzMDIzMTA1OTM=","url":"https://api.github.com/repos/airbrake/airbrake/labels/Question","name":"Question","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-10-06T19:15:41Z","updated_at":"2020-10-12T05:17:24Z","closed_at":"2020-10-12T05:17:24Z","author_association":"NONE","active_lock_reason":null,"body":"I have app with web login via devise and API with base controller from class ActionController::API, and own authorization via header\r\n\r\nSo Airbrake::Rack::User.extract https://github.com/airbrake/airbrake/blob/master/lib/airbrake/rack/user.rb#L14 exit before try_current_user, and errors in API don't have user info","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/puma/puma/issues/2404","repository_url":"https://api.github.com/repos/puma/puma","labels_url":"https://api.github.com/repos/puma/puma/issues/2404/labels{/name}","comments_url":"https://api.github.com/repos/puma/puma/issues/2404/comments","events_url":"https://api.github.com/repos/puma/puma/issues/2404/events","html_url":"https://github.com/puma/puma/issues/2404","id":713673783,"node_id":"MDU6SXNzdWU3MTM2NzM3ODM=","number":2404,"title":"Serve different apps on HTTP and HTTPS","user":{"login":"ekohl","id":155810,"node_id":"MDQ6VXNlcjE1NTgxMA==","avatar_url":"https://avatars0.githubusercontent.com/u/155810?v=4","gravatar_id":"","url":"https://api.github.com/users/ekohl","html_url":"https://github.com/ekohl","followers_url":"https://api.github.com/users/ekohl/followers","following_url":"https://api.github.com/users/ekohl/following{/other_user}","gists_url":"https://api.github.com/users/ekohl/gists{/gist_id}","starred_url":"https://api.github.com/users/ekohl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekohl/subscriptions","organizations_url":"https://api.github.com/users/ekohl/orgs","repos_url":"https://api.github.com/users/ekohl/repos","events_url":"https://api.github.com/users/ekohl/events{/privacy}","received_events_url":"https://api.github.com/users/ekohl/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-10-02T14:40:33Z","updated_at":"2020-10-02T18:26:41Z","closed_at":"2020-10-02T15:13:08Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nPerhaps this is already possible, but I couldn't find out. It would be useful if it was easy to behave different on HTTP than on HTTPS. Effectively two Rack applications served on different virtual hosts.\r\n\r\n**Describe the solution you'd like**\r\n\r\nInstructions on how to achieve a HTTP and HTTPS virtual host.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nPerhaps this can also be achieved via middleware, but I feel like I have insufficient knowledge to judge that.\r\n\r\n**Additional context**\r\n\r\nWe have a project (https://github.com/theforeman/smart-proxy) that's currently using Webrick. It can bind on both HTTP and HTTPS (also HTTP-only and HTTPS-only). Then each module can be configured to be disabled, HTTP, HTTPS or both. Effectively that means that there are 2 rack applications and 2 webrick instances: one for HTTP and one HTTPS.\r\n\r\nNow we are looking at Puma. Our main project https://github.com/theforeman/foreman, a RoR app) is being switched from Passenger to Puma and standardizing on a single application service can provide benefits.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/instructure/canvas-lms/issues/1721","repository_url":"https://api.github.com/repos/instructure/canvas-lms","labels_url":"https://api.github.com/repos/instructure/canvas-lms/issues/1721/labels{/name}","comments_url":"https://api.github.com/repos/instructure/canvas-lms/issues/1721/comments","events_url":"https://api.github.com/repos/instructure/canvas-lms/issues/1721/events","html_url":"https://github.com/instructure/canvas-lms/issues/1721","id":719865768,"node_id":"MDU6SXNzdWU3MTk4NjU3Njg=","number":1721,"title":"MakeRoleRootAccountIdNotNull Fails on 2020-10-10 release","user":{"login":"grahamb","id":146111,"node_id":"MDQ6VXNlcjE0NjExMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/146111?v=4","gravatar_id":"","url":"https://api.github.com/users/grahamb","html_url":"https://github.com/grahamb","followers_url":"https://api.github.com/users/grahamb/followers","following_url":"https://api.github.com/users/grahamb/following{/other_user}","gists_url":"https://api.github.com/users/grahamb/gists{/gist_id}","starred_url":"https://api.github.com/users/grahamb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grahamb/subscriptions","organizations_url":"https://api.github.com/users/grahamb/orgs","repos_url":"https://api.github.com/users/grahamb/repos","events_url":"https://api.github.com/users/grahamb/events{/privacy}","received_events_url":"https://api.github.com/users/grahamb/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-10-13T05:03:36Z","updated_at":"2020-11-13T20:01:09Z","closed_at":"2020-11-11T01:55:45Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Summary:\r\n\r\n(Follow-up from discussion with @ccutrer in IRC)\r\n\r\nPre-deploy migrations fail on the 2020-10-10 release in the `MakeRoleRootAccountIdNotNull` migration with a `PG::ForeignKeyViolation` error.\r\n\r\n```\r\nPG::ForeignKeyViolation: ERROR:  update or delete on table \"roles\" violates foreign key constraint \"role_overrides_role_id_fk\" on table \"role_overrides\"\r\nDETAIL:  Key (id)=(19) is still referenced from table \"role_overrides\".`\r\n```\r\n\r\n### Steps to reproduce:\r\n\r\n 1. Clone and build the 2020-10-10 release (e.g. current `instructure/stable` branch\r\n 2. Build as normal\r\n 3. run `RAILS_ENV=production bundle exec rake db:migrate:predeploy`\r\n\r\n### Expected behavior:\r\n\r\nMigrations should succeed\r\n\r\n### Actual behavior:\r\n\r\nMigration fails with error. Full stack trace: https://gist.github.com/grahamb/0bd17ded3212382bbbf2984d8e8c8eb8\r\n\r\n### Additional notes:\r\n\r\nIn our database, the role with ID 19 is `NoPermissions`. It has a `workflow_state` of `built_in`. The `role_overrides` with `role_id` 19 has a `null` `context_id`.\r\n\r\n![Screen Shot 2020-10-08 at 21 05 06](https://user-images.githubusercontent.com/146111/95817600-b25e6f00-0cd6-11eb-9e53-c45e21b1f3ab.png)\r\n![Screen Shot 2020-10-09 at 09 54 04](https://user-images.githubusercontent.com/146111/95817606-b5595f80-0cd6-11eb-8cea-691a6db13049.png)\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/EnUfor/rack-code/issues/6","repository_url":"https://api.github.com/repos/EnUfor/rack-code","labels_url":"https://api.github.com/repos/EnUfor/rack-code/issues/6/labels{/name}","comments_url":"https://api.github.com/repos/EnUfor/rack-code/issues/6/comments","events_url":"https://api.github.com/repos/EnUfor/rack-code/issues/6/events","html_url":"https://github.com/EnUfor/rack-code/issues/6","id":718754510,"node_id":"MDU6SXNzdWU3MTg3NTQ1MTA=","number":6,"title":"Rewrite while loop to have alternate exit for Wi-Fi Connection","user":{"login":"EnUfor","id":50682605,"node_id":"MDQ6VXNlcjUwNjgyNjA1","avatar_url":"https://avatars0.githubusercontent.com/u/50682605?v=4","gravatar_id":"","url":"https://api.github.com/users/EnUfor","html_url":"https://github.com/EnUfor","followers_url":"https://api.github.com/users/EnUfor/followers","following_url":"https://api.github.com/users/EnUfor/following{/other_user}","gists_url":"https://api.github.com/users/EnUfor/gists{/gist_id}","starred_url":"https://api.github.com/users/EnUfor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EnUfor/subscriptions","organizations_url":"https://api.github.com/users/EnUfor/orgs","repos_url":"https://api.github.com/users/EnUfor/repos","events_url":"https://api.github.com/users/EnUfor/events{/privacy}","received_events_url":"https://api.github.com/users/EnUfor/received_events","type":"User","site_admin":false},"labels":[{"id":2395487852,"node_id":"MDU6TGFiZWwyMzk1NDg3ODUy","url":"https://api.github.com/repos/EnUfor/rack-code/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"EnUfor","id":50682605,"node_id":"MDQ6VXNlcjUwNjgyNjA1","avatar_url":"https://avatars0.githubusercontent.com/u/50682605?v=4","gravatar_id":"","url":"https://api.github.com/users/EnUfor","html_url":"https://github.com/EnUfor","followers_url":"https://api.github.com/users/EnUfor/followers","following_url":"https://api.github.com/users/EnUfor/following{/other_user}","gists_url":"https://api.github.com/users/EnUfor/gists{/gist_id}","starred_url":"https://api.github.com/users/EnUfor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EnUfor/subscriptions","organizations_url":"https://api.github.com/users/EnUfor/orgs","repos_url":"https://api.github.com/users/EnUfor/repos","events_url":"https://api.github.com/users/EnUfor/events{/privacy}","received_events_url":"https://api.github.com/users/EnUfor/received_events","type":"User","site_admin":false},"assignees":[{"login":"EnUfor","id":50682605,"node_id":"MDQ6VXNlcjUwNjgyNjA1","avatar_url":"https://avatars0.githubusercontent.com/u/50682605?v=4","gravatar_id":"","url":"https://api.github.com/users/EnUfor","html_url":"https://github.com/EnUfor","followers_url":"https://api.github.com/users/EnUfor/followers","following_url":"https://api.github.com/users/EnUfor/following{/other_user}","gists_url":"https://api.github.com/users/EnUfor/gists{/gist_id}","starred_url":"https://api.github.com/users/EnUfor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EnUfor/subscriptions","organizations_url":"https://api.github.com/users/EnUfor/orgs","repos_url":"https://api.github.com/users/EnUfor/repos","events_url":"https://api.github.com/users/EnUfor/events{/privacy}","received_events_url":"https://api.github.com/users/EnUfor/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/EnUfor/rack-code/milestones/1","html_url":"https://github.com/EnUfor/rack-code/milestone/1","labels_url":"https://api.github.com/repos/EnUfor/rack-code/milestones/1/labels","id":5964178,"node_id":"MDk6TWlsZXN0b25lNTk2NDE3OA==","number":1,"title":"Initial fault tolerance","description":"Prevent things from breaking. Have checks and exception handling for all major bugs.","creator":{"login":"EnUfor","id":50682605,"node_id":"MDQ6VXNlcjUwNjgyNjA1","avatar_url":"https://avatars0.githubusercontent.com/u/50682605?v=4","gravatar_id":"","url":"https://api.github.com/users/EnUfor","html_url":"https://github.com/EnUfor","followers_url":"https://api.github.com/users/EnUfor/followers","following_url":"https://api.github.com/users/EnUfor/following{/other_user}","gists_url":"https://api.github.com/users/EnUfor/gists{/gist_id}","starred_url":"https://api.github.com/users/EnUfor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EnUfor/subscriptions","organizations_url":"https://api.github.com/users/EnUfor/orgs","repos_url":"https://api.github.com/users/EnUfor/repos","events_url":"https://api.github.com/users/EnUfor/events{/privacy}","received_events_url":"https://api.github.com/users/EnUfor/received_events","type":"User","site_admin":false},"open_issues":1,"closed_issues":3,"state":"open","created_at":"2020-10-08T02:41:08Z","updated_at":"2020-10-15T05:08:17Z","due_on":"2020-10-31T07:00:00Z","closed_at":null},"comments":1,"created_at":"2020-10-11T04:18:14Z","updated_at":"2020-10-15T05:04:27Z","closed_at":"2020-10-15T05:04:27Z","author_association":"OWNER","active_lock_reason":null,"body":"https://github.com/EnUfor/rack-code/blob/e9ab86fcf0d014230cc20dbaad70573b742bc45e/app.ino#L181\r\n\r\nWhile loop does not time-out if not successful in connecting. Instead, implement a timeout. Maybe:\r\n`while (timeDiff < 8000 &&  wiFi.status() != WL_CONNECTED)`\r\n\r\nIf either the timeout is greater than 8000 or Wi-Fi connects, the loop should exit.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/sinatra/sinatra/issues/1641","repository_url":"https://api.github.com/repos/sinatra/sinatra","labels_url":"https://api.github.com/repos/sinatra/sinatra/issues/1641/labels{/name}","comments_url":"https://api.github.com/repos/sinatra/sinatra/issues/1641/comments","events_url":"https://api.github.com/repos/sinatra/sinatra/issues/1641/events","html_url":"https://github.com/sinatra/sinatra/issues/1641","id":703373256,"node_id":"MDU6SXNzdWU3MDMzNzMyNTY=","number":1641,"title":"[rack-protection] origin_whitelist results in ArgumentError for rack-protection 2.1.0","user":{"login":"takeshi-yashiro","id":22676527,"node_id":"MDQ6VXNlcjIyNjc2NTI3","avatar_url":"https://avatars3.githubusercontent.com/u/22676527?v=4","gravatar_id":"","url":"https://api.github.com/users/takeshi-yashiro","html_url":"https://github.com/takeshi-yashiro","followers_url":"https://api.github.com/users/takeshi-yashiro/followers","following_url":"https://api.github.com/users/takeshi-yashiro/following{/other_user}","gists_url":"https://api.github.com/users/takeshi-yashiro/gists{/gist_id}","starred_url":"https://api.github.com/users/takeshi-yashiro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/takeshi-yashiro/subscriptions","organizations_url":"https://api.github.com/users/takeshi-yashiro/orgs","repos_url":"https://api.github.com/users/takeshi-yashiro/repos","events_url":"https://api.github.com/users/takeshi-yashiro/events{/privacy}","received_events_url":"https://api.github.com/users/takeshi-yashiro/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-09-17T08:18:30Z","updated_at":"2020-10-01T18:06:06Z","closed_at":"2020-10-01T18:06:06Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"After upgrading rack-protection from 2.0.8 to 2.1.0, the following error is caused:\r\n```\r\nERROR -- : app error: wrong number of arguments (given 1, expected 2) (ArgumentError) \r\nERROR -- : /usr/local/bundle/gems/rack-protection-2.1.0/lib/rack/protection/base.rb:58:in `warn' \r\nERROR -- : /usr/local/bundle/gems/rack-protection-2.1.0/lib/rack/protection/http_origin.rb:37:in `accepts?'\r\n...\r\n```\r\nwhen origin_whitelist option is specified.\r\n\r\nIt seems that this problem is caused by the lack of `env` parameter passed to `warn` method at https://github.com/sinatra/sinatra/blob/master/rack-protection/lib/rack/protection/http_origin.rb#L37 , as `warn` method requires two arguments:  https://github.com/sinatra/sinatra/blob/master/rack-protection/lib/rack/protection/base.rb#L58","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/sumanth-nb/depenency-checker/issues/42","repository_url":"https://api.github.com/repos/sumanth-nb/depenency-checker","labels_url":"https://api.github.com/repos/sumanth-nb/depenency-checker/issues/42/labels{/name}","comments_url":"https://api.github.com/repos/sumanth-nb/depenency-checker/issues/42/comments","events_url":"https://api.github.com/repos/sumanth-nb/depenency-checker/issues/42/events","html_url":"https://github.com/sumanth-nb/depenency-checker/issues/42","id":713026414,"node_id":"MDU6SXNzdWU3MTMwMjY0MTQ=","number":42,"title":"CVE-2020-8161 (High) detected in rack-1.6.4.gem - autoclosed","user":{"login":"whitesource-bolt-for-github[bot]","id":42819689,"node_id":"MDM6Qm90NDI4MTk2ODk=","avatar_url":"https://avatars2.githubusercontent.com/in/16809?v=4","gravatar_id":"","url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D","html_url":"https://github.com/apps/whitesource-bolt-for-github","followers_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/followers","following_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/repos","events_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/whitesource-bolt-for-github%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[{"id":2371094311,"node_id":"MDU6TGFiZWwyMzcxMDk0MzEx","url":"https://api.github.com/repos/sumanth-nb/depenency-checker/labels/security%20vulnerability","name":"security vulnerability","color":"d1260f","default":false,"description":"Security vulnerability detected by WhiteSource"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-10-01T17:09:22Z","updated_at":"2020-10-01T17:25:39Z","closed_at":"2020-10-01T17:25:38Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## CVE-2020-8161 - High Severity Vulnerability\n<details><summary><img src='https://whitesource-resources.whitesourcesoftware.com/vulnerability_details.png' width=19 height=20> Vulnerable Library - <b>rack-1.6.4.gem</b></p></summary>\n\n<p>Rack provides a minimal, modular and adaptable interface for developing\nweb applications in Ruby.  By wrapping HTTP requests and responses in\nthe simplest way possible, it unifies and distills the API for web\nservers, web frameworks, and software in between (the so-called\nmiddleware) into a single method call.\n\nAlso see http://rack.github.io/.\n</p>\n<p>Library home page: <a href=\"https://rubygems.org/gems/rack-1.6.4.gem\">https://rubygems.org/gems/rack-1.6.4.gem</a></p>\n<p>\n\nDependency Hierarchy:\n  - capybara-2.4.4.gem (Root Library)\n    - rack-test-0.6.3.gem\n      - :x: **rack-1.6.4.gem** (Vulnerable Library)\n<p>Found in HEAD commit: <a href=\"https://github.com/sumanth-nb/depenency-checker/commit/f6c165a3fedb461ca76dc005c4003fb15b6f34da\">f6c165a3fedb461ca76dc005c4003fb15b6f34da</a></p>\n<p>Found in base branch: <b>master</b></p>\n</p>\n</details>\n<p></p>\n<details><summary><img src='https://whitesource-resources.whitesourcesoftware.com/high_vul.png' width=19 height=20> Vulnerability Details</summary>\n<p>  \n  \nA directory traversal vulnerability exists in rack < 2.2.0 that allows an attacker perform directory traversal vulnerability in the Rack::Directory app that is bundled with Rack which could result in information disclosure.\n\n<p>Publish Date: 2020-07-02\n<p>URL: <a href=https://vuln.whitesourcesoftware.com/vulnerability/CVE-2020-8161>CVE-2020-8161</a></p>\n</p>\n</details>\n<p></p>\n<details><summary><img src='https://whitesource-resources.whitesourcesoftware.com/cvss3.png' width=19 height=20> CVSS 3 Score Details (<b>8.6</b>)</summary>\n<p>\n\nBase Score Metrics:\n- Exploitability Metrics:\n  - Attack Vector: Network\n  - Attack Complexity: Low\n  - Privileges Required: None\n  - User Interaction: None\n  - Scope: Changed\n- Impact Metrics:\n  - Confidentiality Impact: High\n  - Integrity Impact: None\n  - Availability Impact: None\n</p>\nFor more information on CVSS3 Scores, click <a href=\"https://www.first.org/cvss/calculator/3.0\">here</a>.\n</p>\n</details>\n<p></p>\n<details><summary><img src='https://whitesource-resources.whitesourcesoftware.com/suggested_fix.png' width=19 height=20> Suggested Fix</summary>\n<p>\n\n<p>Type: Upgrade version</p>\n<p>Origin: <a href=\"https://github.com/rack/rack/tree/2.2.0\">https://github.com/rack/rack/tree/2.2.0</a></p>\n<p>Release Date: 2020-06-01</p>\n<p>Fix Resolution: 2.2.0,2.1.3</p>\n\n</p>\n</details>\n<p></p>\n\n***\nStep up your Open Source Security Game with WhiteSource [here](https://www.whitesourcesoftware.com/full_solution_bolt_github)","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/mperham/sidekiq/issues/4728","repository_url":"https://api.github.com/repos/mperham/sidekiq","labels_url":"https://api.github.com/repos/mperham/sidekiq/issues/4728/labels{/name}","comments_url":"https://api.github.com/repos/mperham/sidekiq/issues/4728/comments","events_url":"https://api.github.com/repos/mperham/sidekiq/issues/4728/events","html_url":"https://github.com/mperham/sidekiq/issues/4728","id":733554506,"node_id":"MDU6SXNzdWU3MzM1NTQ1MDY=","number":4728,"title":"Sidekiq Web Interface Issue with ActiveRecordStore","user":{"login":"wimpog","id":347341,"node_id":"MDQ6VXNlcjM0NzM0MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/347341?v=4","gravatar_id":"","url":"https://api.github.com/users/wimpog","html_url":"https://github.com/wimpog","followers_url":"https://api.github.com/users/wimpog/followers","following_url":"https://api.github.com/users/wimpog/following{/other_user}","gists_url":"https://api.github.com/users/wimpog/gists{/gist_id}","starred_url":"https://api.github.com/users/wimpog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wimpog/subscriptions","organizations_url":"https://api.github.com/users/wimpog/orgs","repos_url":"https://api.github.com/users/wimpog/repos","events_url":"https://api.github.com/users/wimpog/events{/privacy}","received_events_url":"https://api.github.com/users/wimpog/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2020-10-30T22:33:46Z","updated_at":"2020-11-02T19:51:01Z","closed_at":"2020-11-02T18:34:50Z","author_association":"NONE","active_lock_reason":null,"body":"Ruby version: 2.6\r\nRails version: 6.0.2.2\r\nSidekiq / Pro / Enterprise version(s): 6.1.2 / 5.2.0 / 2.1.2 (or 6.0.7 / 5.0.1 / 2.0.1)\r\nOS: MacOS X 10.14.6, Amazon Linux\r\nBrowsers: All\r\n\r\n----\r\n\r\n### ERROR when accessing the Sidekiq web interface (/sidekiq)\r\n`TypeError can't quote Rack::Session::SessionId`\r\n----\r\n\r\n----\r\n\r\n### Full Trace\r\n**activerecord (6.0.2.2) lib/active_record/connection_adapters/abstract/quoting.rb:231:in `_quote'\r\nactiverecord (6.0.2.2) lib/active_record/connection_adapters/abstract/quoting.rb:18:in `quote'\r\nactiverecord (6.0.2.2) lib/arel/collectors/substitute_binds.rb:17:in `add_bind'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:703:in `visit_Arel_Nodes_BindParam'\r\nactiverecord (6.0.2.2) lib/arel/visitors/visitor.rb:31:in `visit'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:611:in `visit_Arel_Nodes_Equality'\r\nactiverecord (6.0.2.2) lib/arel/visitors/visitor.rb:31:in `visit'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:790:in `block in inject_join'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:788:in `each'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:788:in `each_with_index'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:788:in `inject_join'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:578:in `visit_Arel_Nodes_And'\r\nactiverecord (6.0.2.2) lib/arel/visitors/visitor.rb:31:in `visit'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:790:in `block in inject_join'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:788:in `each'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:788:in `each_with_index'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:788:in `inject_join'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:181:in `collect_nodes_for'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:161:in `visit_Arel_Nodes_SelectCore'\r\nactiverecord (6.0.2.2) lib/arel/visitors/mysql.rb:28:in `visit_Arel_Nodes_SelectCore'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:128:in `block in visit_Arel_Nodes_SelectStatement'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:127:in `each'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:127:in `inject'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:127:in `visit_Arel_Nodes_SelectStatement'\r\nactiverecord (6.0.2.2) lib/arel/visitors/mysql.rb:23:in `visit_Arel_Nodes_SelectStatement'\r\nactiverecord (6.0.2.2) lib/arel/visitors/visitor.rb:31:in `visit'\r\nactiverecord (6.0.2.2) lib/arel/visitors/visitor.rb:11:in `accept'\r\nactiverecord (6.0.2.2) lib/arel/visitors/to_sql.rb:18:in `compile'\r\nactiverecord (6.0.2.2) lib/active_record/connection_adapters/abstract/database_statements.rb:34:in `to_sql_and_binds'\r\nactiverecord (6.0.2.2) lib/active_record/connection_adapters/abstract/query_cache.rb:99:in `select_all'\r\nactiverecord (6.0.2.2) lib/active_record/connection_adapters/mysql/database_statements.rb:12:in `select_all'\r\nactiverecord (6.0.2.2) lib/active_record/querying.rb:46:in `find_by_sql'\r\nactiverecord (6.0.2.2) lib/active_record/relation.rb:810:in `block in exec_queries'\r\nactiverecord (6.0.2.2) lib/active_record/relation.rb:828:in `skip_query_cache_if_necessary'\r\nactiverecord (6.0.2.2) lib/active_record/relation.rb:797:in `exec_queries'\r\nactiverecord (6.0.2.2) lib/active_record/relation.rb:615:in `load'\r\nactiverecord (6.0.2.2) lib/active_record/relation.rb:250:in `records'\r\nactiverecord (6.0.2.2) lib/active_record/relation.rb:245:in `to_ary'\r\nactiverecord (6.0.2.2) lib/active_record/relation/finder_methods.rb:528:in `find_nth_with_limit'\r\nactiverecord (6.0.2.2) lib/active_record/relation/finder_methods.rb:513:in `find_nth'\r\nactiverecord (6.0.2.2) lib/active_record/relation/finder_methods.rb:120:in `first'\r\nactiverecord-session_store (1.1.3) lib/active_record/session_store/session.rb:58:in `find_by_session_id'\r\nactiverecord-session_store (1.1.3) lib/active_record/session_store/session.rb:35:in `find_by_session_id'\r\nactiverecord-session_store (1.1.3) lib/action_dispatch/session/active_record_store.rb:124:in `block in get_session_model'\r\nactiverecord-session_store (1.1.3) lib/active_record/session_store/extension/logger_silencer.rb:47:in `silence_logger'\r\nstackify-api-ruby (1.2.9) lib/stackify/logger_proxy.rb:28:in `method_missing'\r\nactiverecord-session_store (1.1.3) lib/action_dispatch/session/active_record_store.rb:123:in `get_session_model'\r\nactiverecord-session_store (1.1.3) lib/action_dispatch/session/active_record_store.rb:140:in `find_session'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:314:in `load_session'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/session/abstract_store.rb:46:in `block in load_session'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/session/abstract_store.rb:54:in `stale_session_check!'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/session/abstract_store.rb:46:in `load_session'\r\nactionpack (6.0.2.2) lib/action_dispatch/request/session.rb:235:in `load!'\r\nactionpack (6.0.2.2) lib/action_dispatch/request/session.rb:227:in `load_for_read!'\r\nactionpack (6.0.2.2) lib/action_dispatch/request/session.rb:144:in `to_hash'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:197:in `stringify_keys'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:131:in `update'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:306:in `prepare_session'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:265:in `context'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'\r\nrack (2.2.3) lib/rack/content_length.rb:17:in `call'\r\nrack (2.2.3) lib/rack/urlmap.rb:74:in `block in call'\r\nrack (2.2.3) lib/rack/urlmap.rb:58:in `each'\r\nrack (2.2.3) lib/rack/urlmap.rb:58:in `call'\r\nrack (2.2.3) lib/rack/builder.rb:244:in `call'\r\nsidekiq (6.1.2) lib/sidekiq/web.rb:105:in `call'\r\nsidekiq (6.1.2) lib/sidekiq/web.rb:110:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/routing/mapper.rb:19:in `block in <class:Constraints>'\r\nactionpack (6.0.2.2) lib/action_dispatch/routing/mapper.rb:48:in `serve'\r\nactionpack (6.0.2.2) lib/action_dispatch/journey/router.rb:49:in `block in serve'\r\nactionpack (6.0.2.2) lib/action_dispatch/journey/router.rb:32:in `each'\r\nactionpack (6.0.2.2) lib/action_dispatch/journey/router.rb:32:in `serve'\r\nactionpack (6.0.2.2) lib/action_dispatch/routing/route_set.rb:837:in `call'\r\nomniauth (1.9.1) lib/omniauth/strategy.rb:192:in `call!'\r\nomniauth (1.9.1) lib/omniauth/strategy.rb:169:in `call'\r\nrack (2.2.3) lib/rack/deflater.rb:44:in `call'\r\nstackify-api-ruby (1.2.9) lib/stackify/rack/errors_catcher.rb:10:in `call'\r\nwarden (1.2.8) lib/warden/manager.rb:36:in `block in call'\r\nwarden (1.2.8) lib/warden/manager.rb:34:in `catch'\r\nwarden (1.2.8) lib/warden/manager.rb:34:in `call'\r\nrack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'\r\nrack (2.2.3) lib/rack/etag.rb:27:in `call'\r\nrack (2.2.3) lib/rack/conditional_get.rb:27:in `call'\r\nrack (2.2.3) lib/rack/head.rb:12:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/http/content_security_policy.rb:18:in `call'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/cookies.rb:648:in `call'\r\nactiverecord (6.0.2.2) lib/active_record/migration.rb:567:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'\r\nactivesupport (6.0.2.2) lib/active_support/callbacks.rb:101:in `run_callbacks'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/callbacks.rb:26:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/executor.rb:14:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'\r\nweb-console (4.0.2) lib/web_console/middleware.rb:132:in `call_app'\r\nweb-console (4.0.2) lib/web_console/middleware.rb:28:in `block in call'\r\nweb-console (4.0.2) lib/web_console/middleware.rb:17:in `catch'\r\nweb-console (4.0.2) lib/web_console/middleware.rb:17:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'\r\nrailties (6.0.2.2) lib/rails/rack/logger.rb:38:in `call_app'\r\nrailties (6.0.2.2) lib/rails/rack/logger.rb:28:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/request_id.rb:27:in `call'\r\nrack (2.2.3) lib/rack/method_override.rb:24:in `call'\r\nrack (2.2.3) lib/rack/runtime.rb:22:in `call'\r\nactivesupport (6.0.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/executor.rb:14:in `call'\r\nrack (2.2.3) lib/rack/sendfile.rb:110:in `call'\r\nactionpack (6.0.2.2) lib/action_dispatch/middleware/host_authorization.rb:77:in `call'\r\nrack-cors (1.1.1) lib/rack/cors.rb:100:in `call'\r\nlib/health_check.rb:10:in `call'\r\nrailties (6.0.2.2) lib/rails/engine.rb:526:in `call'\r\npuma (4.3.3) lib/puma/configuration.rb:228:in `call'\r\npuma (4.3.3) lib/puma/server.rb:682:in `handle_request'\r\npuma (4.3.3) lib/puma/server.rb:472:in `process_client'\r\npuma (4.3.3) lib/puma/server.rb:328:in `block in run'\r\npuma (4.3.3) lib/puma/thread_pool.rb:134:in `block in spawn_thread'**\r\n\r\n----\r\n\r\n### Installed Gems\r\n**-bash-3.2$ bundle install\r\nUsing rake 13.0.1\r\nUsing concurrent-ruby 1.1.7\r\nUsing i18n 1.8.2\r\nUsing minitest 5.14.0\r\nUsing thread_safe 0.3.6\r\nUsing tzinfo 1.2.7\r\nUsing zeitwerk 2.3.0\r\nUsing activesupport 6.0.2.2\r\nUsing builder 3.2.4\r\nUsing erubi 1.9.0\r\nUsing mini_portile2 2.4.0\r\nUsing nokogiri 1.10.9\r\nUsing rails-dom-testing 2.0.3\r\nUsing crass 1.0.6\r\nUsing loofah 2.5.0\r\nUsing rails-html-sanitizer 1.3.0\r\nUsing actionview 6.0.2.2\r\nUsing rack 2.2.3\r\nUsing rack-test 1.1.0\r\nUsing actionpack 6.0.2.2\r\nUsing nio4r 2.5.2\r\nUsing websocket-extensions 0.1.4\r\nUsing websocket-driver 0.7.1\r\nUsing actioncable 6.0.2.2\r\nUsing globalid 0.4.2\r\nUsing activejob 6.0.2.2\r\nUsing activemodel 6.0.2.2\r\nUsing activerecord 6.0.2.2\r\nUsing mimemagic 0.3.5\r\nUsing marcel 0.3.3\r\nUsing activestorage 6.0.2.2\r\nUsing mini_mime 1.0.2\r\nUsing mail 2.7.1\r\nUsing actionmailbox 6.0.2.2\r\nUsing actionmailer 6.0.2.2\r\nUsing actiontext 6.0.2.2\r\nUsing multi_json 1.14.1\r\nUsing method_source 1.0.0\r\nUsing thor 0.20.3\r\nUsing railties 6.0.2.2\r\nUsing activerecord-session_store 1.1.3\r\nUsing algorithms 0.6.1\r\nUsing audited 4.9.0\r\nUsing roxml 4.0.0\r\nUsing authorizenet 2.0.0\r\nUsing aws-eventstream 1.1.0\r\nUsing aws-partitions 1.311.0\r\nUsing aws-sigv4 1.1.3\r\nUsing jmespath 1.4.0\r\nUsing aws-sdk-core 3.95.0\r\nUsing aws-sdk-accessanalyzer 1.6.0\r\nUsing aws-sdk-acm 1.30.0\r\nUsing aws-sdk-acmpca 1.23.0\r\nUsing aws-sdk-alexaforbusiness 1.35.0\r\nUsing aws-sdk-amplify 1.16.0\r\nUsing aws-sdk-apigateway 1.40.0\r\nUsing aws-sdk-apigatewaymanagementapi 1.13.0\r\nUsing aws-sdk-apigatewayv2 1.20.0\r\nUsing aws-sdk-appconfig 1.5.0\r\nUsing aws-sdk-applicationautoscaling 1.38.0\r\nUsing aws-sdk-applicationdiscoveryservice 1.26.0\r\nUsing aws-sdk-applicationinsights 1.9.0\r\nUsing aws-sdk-appmesh 1.22.0\r\nUsing aws-sdk-appstream 1.40.0\r\nUsing aws-sdk-appsync 1.25.0\r\nUsing aws-sdk-athena 1.25.0\r\nUsing aws-sdk-augmentedairuntime 1.4.0\r\nUsing aws-sdk-autoscaling 1.35.0\r\nUsing aws-sdk-autoscalingplans 1.22.0\r\nUsing aws-sdk-backup 1.13.0\r\nUsing aws-sdk-batch 1.30.0\r\nUsing aws-sdk-budgets 1.29.0\r\nUsing aws-sdk-chime 1.24.0\r\nUsing aws-sdk-cloud9 1.22.0\r\nUsing aws-sdk-clouddirectory 1.23.0\r\nUsing aws-sdk-cloudformation 1.34.0\r\nUsing aws-sdk-cloudfront 1.27.0\r\nUsing aws-sdk-cloudhsm 1.21.0\r\nUsing aws-sdk-cloudhsmv2 1.22.0\r\nUsing aws-sdk-cloudsearch 1.19.0\r\nUsing aws-sdk-cloudsearchdomain 1.17.0\r\nUsing aws-sdk-cloudtrail 1.22.0\r\nUsing aws-sdk-cloudwatch 1.37.0\r\nUsing aws-sdk-cloudwatchevents 1.28.0\r\nUsing aws-sdk-cloudwatchlogs 1.30.0\r\nUsing aws-sdk-codebuild 1.50.0\r\nUsing aws-sdk-codecommit 1.32.0\r\nUsing aws-sdk-codedeploy 1.29.0\r\nUsing aws-sdk-codeguruprofiler 1.4.0\r\nUsing aws-sdk-codegurureviewer 1.4.0\r\nUsing aws-sdk-codepipeline 1.30.0\r\nUsing aws-sdk-codestar 1.20.0\r\nUsing aws-sdk-codestarconnections 1.3.0\r\nUsing aws-sdk-codestarnotifications 1.2.0\r\nUsing aws-sdk-cognitoidentity 1.21.0\r\nUsing aws-sdk-cognitoidentityprovider 1.35.0\r\nUsing aws-sdk-cognitosync 1.18.0\r\nUsing aws-sdk-comprehend 1.31.0\r\nUsing aws-sdk-comprehendmedical 1.16.0\r\nUsing aws-sdk-computeoptimizer 1.2.0\r\nUsing aws-sdk-configservice 1.44.0\r\nUsing aws-sdk-connect 1.24.0\r\nUsing aws-sdk-connectparticipant 1.2.0\r\nUsing aws-sdk-costandusagereportservice 1.20.0\r\nUsing aws-sdk-costexplorer 1.41.0\r\nUsing aws-sdk-databasemigrationservice 1.33.0\r\nUsing aws-sdk-dataexchange 1.3.0\r\nUsing aws-sdk-datapipeline 1.18.0\r\nUsing aws-sdk-datasync 1.19.0\r\nUsing aws-sdk-dax 1.21.0\r\nUsing aws-sdk-detective 1.5.0\r\nUsing aws-sdk-devicefarm 1.32.0\r\nUsing aws-sdk-directconnect 1.28.0\r\nUsing aws-sdk-directoryservice 1.27.0\r\nUsing aws-sdk-dlm 1.27.0\r\nUsing aws-sdk-docdb 1.16.0\r\nUsing aws-sdk-dynamodb 1.46.0\r\nUsing aws-sdk-dynamodbstreams 1.18.0\r\nUsing aws-sdk-ebs 1.3.0\r\nUsing aws-sdk-ec2 1.157.0\r\nUsing aws-sdk-ec2instanceconnect 1.5.0\r\nUsing aws-sdk-ecr 1.28.0\r\nUsing aws-sdk-ecs 1.61.0\r\nUsing aws-sdk-efs 1.28.0\r\nUsing aws-sdk-eks 1.36.0\r\nUsing aws-sdk-elasticache 1.32.0\r\nUsing aws-sdk-elasticbeanstalk 1.29.0\r\nUsing aws-sdk-elasticinference 1.4.0\r\nUsing aws-sdk-elasticloadbalancing 1.21.0\r\nUsing aws-sdk-elasticloadbalancingv2 1.42.0\r\nUsing aws-sdk-elasticsearchservice 1.34.0\r\nUsing aws-sdk-elastictranscoder 1.20.0\r\nUsing aws-sdk-emr 1.27.0\r\nUsing aws-sdk-eventbridge 1.6.0\r\nUsing aws-sdk-firehose 1.27.0\r\nUsing aws-sdk-fms 1.25.0\r\nUsing aws-sdk-forecastqueryservice 1.4.0\r\nUsing aws-sdk-forecastservice 1.4.0\r\nUsing aws-sdk-frauddetector 1.3.0\r\nUsing aws-sdk-fsx 1.18.0\r\nUsing aws-sdk-gamelift 1.30.0\r\nUsing aws-sdk-glacier 1.28.0\r\nUsing aws-sdk-globalaccelerator 1.17.0\r\nUsing aws-sdk-glue 1.54.0\r\nUsing aws-sdk-greengrass 1.30.0\r\nUsing aws-sdk-groundstation 1.7.0\r\nUsing aws-sdk-guardduty 1.30.0\r\nUsing aws-sdk-health 1.23.0\r\nUsing aws-sdk-iam 1.37.0\r\nUsing aws-sdk-imagebuilder 1.5.0\r\nUsing aws-sigv2 1.0.1\r\nUsing aws-sdk-importexport 1.18.0\r\nUsing aws-sdk-inspector 1.25.0\r\nUsing aws-sdk-iot 1.49.0\r\nUsing aws-sdk-iot1clickdevicesservice 1.20.0\r\nUsing aws-sdk-iot1clickprojects 1.20.0\r\nUsing aws-sdk-iotanalytics 1.28.0\r\nUsing aws-sdk-iotdataplane 1.18.0\r\nUsing aws-sdk-iotevents 1.14.0\r\nUsing aws-sdk-ioteventsdata 1.7.0\r\nUsing aws-sdk-iotjobsdataplane 1.19.0\r\nUsing aws-sdk-iotsecuretunneling 1.2.0\r\nUsing aws-sdk-iotsitewise 1.1.0\r\nUsing aws-sdk-iotthingsgraph 1.6.0\r\nUsing aws-sdk-kafka 1.20.0\r\nUsing aws-sdk-kendra 1.4.0\r\nUsing aws-sdk-kinesis 1.22.0\r\nUsing aws-sdk-kinesisanalytics 1.23.0\r\nUsing aws-sdk-kinesisanalyticsv2 1.15.0\r\nUsing aws-sdk-kinesisvideo 1.24.0\r\nUsing aws-sdk-kinesisvideoarchivedmedia 1.23.0\r\nUsing aws-sdk-kinesisvideomedia 1.20.0\r\nUsing aws-sdk-kinesisvideosignalingchannels 1.2.0\r\nUsing aws-sdk-kms 1.31.0\r\nUsing aws-sdk-lakeformation 1.3.0\r\nUsing aws-sdk-lambda 1.41.0\r\nUsing aws-sdk-lambdapreview 1.18.0\r\nUsing aws-sdk-lex 1.25.0\r\nUsing aws-sdk-lexmodelbuildingservice 1.29.0\r\nUsing aws-sdk-licensemanager 1.13.0\r\nUsing aws-sdk-lightsail 1.30.0\r\nUsing aws-sdk-machinelearning 1.19.0\r\nUsing aws-sdk-macie 1.18.0\r\nUsing aws-sdk-managedblockchain 1.10.0\r\nUsing aws-sdk-marketplacecatalog 1.2.0\r\nUsing aws-sdk-marketplacecommerceanalytics 1.22.0\r\nUsing aws-sdk-marketplaceentitlementservice 1.18.0\r\nUsing aws-sdk-marketplacemetering 1.23.0\r\nUsing aws-sdk-mediaconnect 1.21.0\r\nUsing aws-sdk-mediaconvert 1.48.0\r\nUsing aws-sdk-medialive 1.44.0\r\nUsing aws-sdk-mediapackage 1.27.0\r\nUsing aws-sdk-mediapackagevod 1.12.0\r\nUsing aws-sdk-mediastore 1.24.0\r\nUsing aws-sdk-mediastoredata 1.21.0\r\nUsing aws-sdk-mediatailor 1.26.0\r\nUsing aws-sdk-migrationhub 1.23.0\r\nUsing aws-sdk-migrationhubconfig 1.3.0\r\nUsing aws-sdk-mobile 1.18.0\r\nUsing aws-sdk-mq 1.26.0\r\nUsing aws-sdk-mturk 1.21.0\r\nUsing aws-sdk-neptune 1.23.0\r\nUsing aws-sdk-networkmanager 1.2.0\r\nUsing aws-sdk-opsworks 1.23.0\r\nUsing aws-sdk-opsworkscm 1.33.0\r\nUsing aws-sdk-organizations 1.40.0\r\nUsing aws-sdk-outposts 1.4.0\r\nUsing aws-sdk-personalize 1.11.0\r\nUsing aws-sdk-personalizeevents 1.6.0\r\nUsing aws-sdk-personalizeruntime 1.9.0\r\nUsing aws-sdk-pi 1.18.0\r\nUsing aws-sdk-pinpoint 1.39.0\r\nUsing aws-sdk-pinpointemail 1.18.0\r\nUsing aws-sdk-pinpointsmsvoice 1.15.0\r\nUsing aws-sdk-polly 1.29.0\r\nUsing aws-sdk-pricing 1.18.0\r\nUsing aws-sdk-qldb 1.3.0\r\nUsing aws-sdk-qldbsession 1.3.0\r\nUsing aws-sdk-quicksight 1.19.0\r\nUsing aws-sdk-ram 1.16.0\r\nUsing aws-sdk-rds 1.84.0\r\nUsing aws-sdk-rdsdataservice 1.17.0\r\nUsing aws-sdk-redshift 1.42.0\r\nUsing aws-sdk-rekognition 1.37.0\r\nUsing aws-sdk-resourcegroups 1.23.0\r\nUsing aws-sdk-resourcegroupstaggingapi 1.24.0\r\nUsing aws-sdk-robomaker 1.23.0\r\nUsing aws-sdk-route53 1.34.0\r\nUsing aws-sdk-route53domains 1.21.0\r\nUsing aws-sdk-route53resolver 1.13.0\r\nUsing aws-sdk-s3 1.64.0\r\nUsing aws-sdk-s3control 1.18.0\r\nUsing aws-sdk-sagemaker 1.56.0\r\nUsing aws-sdk-sagemakerruntime 1.20.0\r\nUsing aws-sdk-savingsplans 1.4.0\r\nUsing aws-sdk-schemas 1.3.0\r\nUsing aws-sdk-secretsmanager 1.35.0\r\nUsing aws-sdk-securityhub 1.24.0\r\nUsing aws-sdk-serverlessapplicationrepository 1.26.0\r\nUsing aws-sdk-servicecatalog 1.38.0\r\nUsing aws-sdk-servicediscovery 1.22.0\r\nUsing aws-sdk-servicequotas 1.5.0\r\nUsing aws-sdk-ses 1.29.0\r\nUsing aws-sdk-sesv2 1.4.0\r\nUsing aws-sdk-shield 1.24.0\r\nUsing aws-sdk-signer 1.20.0\r\nUsing aws-sdk-simpledb 1.18.0\r\nUsing aws-sdk-sms 1.19.0\r\nUsing aws-sdk-snowball 1.26.0\r\nUsing aws-sdk-sns 1.23.0\r\nUsing aws-sdk-sqs 1.25.0\r\nUsing aws-sdk-ssm 1.77.0\r\nUsing aws-sdk-sso 1.3.0\r\nUsing aws-sdk-ssooidc 1.2.0\r\nUsing aws-sdk-states 1.27.0\r\nUsing aws-sdk-storagegateway 1.40.0\r\nUsing aws-sdk-support 1.20.0\r\nUsing aws-sdk-swf 1.19.0\r\nUsing aws-sdk-synthetics 1.1.0\r\nUsing aws-sdk-textract 1.14.0\r\nUsing aws-sdk-transcribeservice 1.41.0\r\nUsing aws-sdk-transcribestreamingservice 1.13.0\r\nUsing aws-sdk-transfer 1.19.0\r\nUsing aws-sdk-translate 1.21.0\r\nUsing aws-sdk-waf 1.29.0\r\nUsing aws-sdk-wafregional 1.30.0\r\nUsing aws-sdk-wafv2 1.4.0\r\nUsing aws-sdk-workdocs 1.22.0\r\nUsing aws-sdk-worklink 1.14.0\r\nUsing aws-sdk-workmail 1.23.0\r\nUsing aws-sdk-workmailmessageflow 1.3.0\r\nUsing aws-sdk-workspaces 1.36.0\r\nUsing aws-sdk-xray 1.25.0\r\nUsing aws-sdk-resources 3.72.0\r\nUsing aws-sdk 3.0.1\r\nUsing babel-source 5.8.35\r\nUsing execjs 2.7.0\r\nUsing babel-transpiler 0.7.0\r\nUsing bcrypt 3.1.13\r\nUsing bindex 0.8.1\r\nUsing bundler 2.1.4\r\nUsing byebug 11.1.3\r\nUsing cancancan 3.1.0\r\nUsing climate_control 0.2.0\r\nUsing terrapin 0.6.0\r\nUsing cocaine 0.6.0\r\nUsing orm_adapter 0.5.0\r\nUsing ckeditor 4.2.4\r\nUsing coffee-script-source 1.12.2\r\nUsing coffee-script 2.4.1\r\nUsing coffee-rails 5.0.0\r\nUsing composite_primary_keys 12.0.1\r\nUsing connection_pool 2.2.3\r\nUsing sync 0.5.0\r\nUsing tins 1.24.1\r\nUsing file-tail 1.2.0\r\nUsing sexp_processor 4.14.1\r\nUsing ruby_parser 3.14.2\r\nUsing ruby2ruby 2.4.4\r\nUsing sourcify 0.5.0\r\nUsing proc_extensions 0.2\r\nUsing delegate_matcher 0.4.3\r\nUsing responders 3.0.0\r\nUsing warden 1.2.8\r\nUsing devise 4.7.1\r\nUsing diff-lcs 1.3\r\nUsing unf_ext 0.0.7.7\r\nUsing unf 0.1.4\r\nUsing domain_name 0.5.20190701\r\nUsing einhorn 0.8.2\r\nUsing et-orbi 1.2.4\r\nUsing factory_bot 5.2.0\r\nUsing factory_bot_rails 5.2.0\r\nUsing faker 2.11.0\r\nUsing multipart-post 2.1.1\r\nUsing faraday 0.17.3\r\nUsing ffi 1.12.2\r\nUsing figaro 1.1.1\r\nUsing raabro 1.1.6\r\nUsing fugit 1.3.5\r\nUsing google-protobuf 3.11.4 (universal-darwin)\r\nUsing has_secure_token 1.0.0\r\nUsing hashie 4.1.0\r\nUsing http-accept 1.7.0\r\nUsing http-cookie 1.0.3\r\nUsing jbuilder 2.10.0\r\nUsing jquery-rails 4.3.5\r\nUsing jwt 2.2.1\r\nUsing kaminari-core 1.2.0\r\nUsing kaminari-actionview 1.2.0\r\nUsing kaminari-activerecord 1.2.0\r\nUsing kaminari 1.2.0\r\nUsing le 2.7.6\r\nUsing ledermann-rails-settings 2.5.0\r\nUsing liquid 4.0.3\r\nUsing mime-types-data 3.2020.0425\r\nUsing mime-types 3.3.1\r\nUsing money 6.13.7\r\nUsing monetize 1.9.4\r\nUsing money-rails 1.13.3\r\nUsing multi_xml 0.6.0\r\nUsing ruby2_keywords 0.0.2\r\nUsing mustermann 1.1.1\r\nUsing mysql2 0.5.3\r\nUsing net_http_unix 0.2.2\r\nUsing netrc 0.11.0\r\nUsing oauth2 1.4.4\r\nUsing omniauth 1.9.1\r\nUsing omniauth-oauth2 1.6.0\r\nUsing puma 4.3.3\r\nUsing pundit 2.1.0\r\nUsing rack-cors 1.1.1\r\nUsing rack-host-redirect 1.3.0\r\nUsing rack-protection 2.0.8.1\r\nUsing sprockets 3.7.2\r\nUsing sprockets-rails 3.2.1\r\nUsing rails 6.0.2.2\r\nUsing rails-observers 0.1.5\r\nUsing rdoc 6.2.1\r\nUsing tilt 2.0.10\r\nUsing react-rails 2.6.1\r\nUsing redis 4.2.2\r\nUsing rest-client 2.1.0\r\nUsing rolify 5.2.0\r\nUsing rspec-support 3.9.3\r\nUsing rspec-core 3.9.2\r\nUsing rspec-expectations 3.9.2\r\nUsing rspec-mocks 3.9.1\r\nUsing rspec-rails 4.0.0\r\nUsing rufus-scheduler 3.6.0\r\nUsing sassc 2.3.0\r\nUsing sassc-rails 2.1.2\r\nUsing sass-rails 6.0.0\r\nUsing sdoc 1.1.0\r\nUsing sidekiq 6.1.2\r\nUsing sidekiq-pro 5.2.0\r\nUsing sidekiq-ent 2.1.2\r\nUsing simple_form 5.0.2\r\nUsing sinatra 2.0.8.1\r\nUsing spring 2.1.0\r\nUsing stackify-api-ruby 1.2.9\r\nUsing stackify-ruby-apm 1.10.0\r\nUsing uglifier 4.2.0\r\nUsing web-console 4.0.2\r\nUsing wicked_pdf 2.0.2\r\nUsing wkhtmltopdf-binary 0.12.5.4\r\nBundle complete! 60 Gemfile dependencies, 386 gems now installed.\r\nUse `bundle info [gemname]` to see where a bundled gem is installed.**\r\n\r\n----\r\n\r\n### Content of /config/initializers/session_store.rb\r\n`Rails.application.config.session_store :active_record_store, :key => '_my_session'`\r\n\r\nif `active_record_store` is changed to `cookie_store`, the issue goes away.\r\n\r\nSame issue is described here: https://github.com/rails/activerecord-session_store/issues/152\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/cloudfoundry/cloud_controller_ng/issues/1919","repository_url":"https://api.github.com/repos/cloudfoundry/cloud_controller_ng","labels_url":"https://api.github.com/repos/cloudfoundry/cloud_controller_ng/issues/1919/labels{/name}","comments_url":"https://api.github.com/repos/cloudfoundry/cloud_controller_ng/issues/1919/comments","events_url":"https://api.github.com/repos/cloudfoundry/cloud_controller_ng/issues/1919/events","html_url":"https://github.com/cloudfoundry/cloud_controller_ng/issues/1919","id":726582844,"node_id":"MDU6SXNzdWU3MjY1ODI4NDQ=","number":1919,"title":"Asynchronously created instances become stuck in \"create in progress\" when creation is cancelled but broker does not support cancelling","user":{"login":"ionphractal","id":16098792,"node_id":"MDQ6VXNlcjE2MDk4Nzky","avatar_url":"https://avatars0.githubusercontent.com/u/16098792?v=4","gravatar_id":"","url":"https://api.github.com/users/ionphractal","html_url":"https://github.com/ionphractal","followers_url":"https://api.github.com/users/ionphractal/followers","following_url":"https://api.github.com/users/ionphractal/following{/other_user}","gists_url":"https://api.github.com/users/ionphractal/gists{/gist_id}","starred_url":"https://api.github.com/users/ionphractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ionphractal/subscriptions","organizations_url":"https://api.github.com/users/ionphractal/orgs","repos_url":"https://api.github.com/users/ionphractal/repos","events_url":"https://api.github.com/users/ionphractal/events{/privacy}","received_events_url":"https://api.github.com/users/ionphractal/received_events","type":"User","site_admin":false},"labels":[{"id":371017948,"node_id":"MDU6TGFiZWwzNzEwMTc5NDg=","url":"https://api.github.com/repos/cloudfoundry/cloud_controller_ng/labels/accepted","name":"accepted","color":"75B000","default":false,"description":null},{"id":996428759,"node_id":"MDU6TGFiZWw5OTY0Mjg3NTk=","url":"https://api.github.com/repos/cloudfoundry/cloud_controller_ng/labels/sapi","name":"sapi","color":"84c43a","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-21T15:09:00Z","updated_at":"2020-10-28T17:53:26Z","closed_at":"2020-10-22T16:13:48Z","author_association":"NONE","active_lock_reason":null,"body":"## Issue\r\n\r\nWhen using an asynchronous service broker which does not support cancellation of operations, a service instance becomes stuck in \"create in progress\" when the service instance is deleted before the creation succeeded.\r\n\r\n## Context\r\nAt some point CC started to support the cancellation of create operations: https://github.com/cloudfoundry/cloud_controller_ng/commit/ff4ee3dbc85a755e762fc8d5ec03f0caef1c64ca\r\n\r\nThe openservicebroker specification states that the broker can return `422 Unprocessable Entity` \"if the Service Instance is being processed by some other operation and therefore cannot be deleted at this time\". (https://github.com/openservicebrokerapi/servicebroker/blob/master/spec.md#deprovisioning)\r\n\r\nThere may be some service brokers that can handle cancellation of creation but this cannot be ensured. So the Cloud Controller should handle these situations by disallowing the deprovisioning and allowing the provisioning to finish.\r\n\r\n## Steps to Reproduce\r\n\r\nRequirements:\r\n* have a cf-deployment at hand\r\n* have a broker that provisions asynchronously (and takes a while to provision)\r\n\r\nSteps:\r\n1. create a service instance asynchronously\r\n`cf create-service async-service plan test`\r\n2. delete the service while in \"create in progress\"\r\n`cf delete-service test`\r\n\r\n\r\n## Expected result\r\n\r\nThe delete command should fail and the service should become \"create succeeded\" at some point.\r\n\r\n## Current result\r\n\r\nThe CC returns `Server error, status code: 409, error code: 60016, message: An operation for service instance test is in progress.` and it logs a CF-AsyncServiceInstanceOperationInProgress backtrace in the log (see below).\r\n\r\nHowever, the service instance is stuck in \"create in progress\" forever because the broker_provided_operation column is emptied.\r\n\r\n```\r\n{\r\n  \"description\": \"An operation for service instance test is in progress.\",\r\n  \"error_code\": \"CF-AsyncServiceInstanceOperationInProgress\",\r\n  \"code\": 60016,\r\n  \"test_mode_info\": {\r\n    \"description\": \"An operation for service instance test is in progress.\",\r\n    \"error_code\": \"CF-AsyncServiceInstanceOperationInProgress\",\r\n    \"backtrace\": [\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/lib/services/service_brokers/v2/client.rb:248:in `rescue in deprovision'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/lib/services/service_brokers/v2/client.rb:223:in `deprovision'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/app/actions/services/service_instance_delete.rb:85:in `delete_one'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/app/actions/services/service_instance_delete.rb:19:in `block in delete'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/dataset/actions.rb:150:in `block in each'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:614:in `block (2 levels) in fetch_rows'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:800:in `yield_hash_rows'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:614:in `block in fetch_rows'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:146:in `execute'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:500:in `_execute'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:318:in `block (2 levels) in execute'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:522:in `check_database_errors'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:318:in `block in execute'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/connection_pool/threaded.rb:92:in `hold'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/database/connecting.rb:270:in `synchronize'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:318:in `execute'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/dataset/actions.rb:1089:in `execute'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/adapters/postgres.rb:614:in `fetch_rows'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sequel-5.35.0/lib/sequel/dataset/actions.rb:150:in `each'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/app/actions/services/service_instance_delete.rb:14:in `each_with_object'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/app/actions/services/service_instance_delete.rb:14:in `delete'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/app/jobs/delete_action_job.rb:21:in `perform'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/app/controllers/services/lifecycle/service_instance_deprovisioner.rb:19:in `deprovision_service_instance'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/app/controllers/services/service_instances_controller.rb:187:in `delete'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/app/controllers/base/base_controller.rb:84:in `dispatch'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/lib/cloud_controller/rest_controller/routes.rb:16:in `block in define_route'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1635:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1635:in `block in compile!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-2.2.3/lib/rack/urlmap.rb:74:in `block in call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-2.2.3/lib/rack/urlmap.rb:58:in `each'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-2.2.3/lib/rack/urlmap.rb:58:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/middleware/request_logs.rb:38:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/middleware/security_context_setter.rb:19:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/middleware/vcap_request_id.rb:15:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/middleware/cors.rb:49:in `call_app'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/middleware/cors.rb:14:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/cloud_controller_ng/middleware/request_metrics.rb:12:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/rack-2.2.3/lib/rack/builder.rb:244:in `call'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/thin-1.7.2/lib/thin/connection.rb:86:in `block in pre_process'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/thin-1.7.2/lib/thin/connection.rb:84:in `catch'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/thin-1.7.2/lib/thin/connection.rb:84:in `pre_process'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/thin-1.7.2/lib/thin/connection.rb:50:in `block in process'\",\r\n      \"/var/vcap/data/packages/cloud_controller_ng/7b4ebd12b4e9dabe36d9147a0492fa6fa6729ae1/gem_home/ruby/2.5.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:1067:in `block in spawn_threadpool'\"\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nI've tried to delete the instance at the broker directly while being created and it returns 422 as expected.\r\n\r\n## Possible Fix\r\n\r\nFrom the CC code it looks like the this line https://github.com/cloudfoundry/cloud_controller_ng/blob/569b0ba2035819668528613494eb470cef4aec1f/app/actions/services/service_instance_delete.rb#L86 calls the broker and throws an exception due to the 422 returned\r\nhttps://github.com/cloudfoundry/cloud_controller_ng/blob/569b0ba2035819668528613494eb470cef4aec1f/lib/services/service_brokers/v2/client.rb#L248\r\n\r\nSo after that there seems nothing to delete the operations.\r\n\r\nI suspect the DeleterLock https://github.com/cloudfoundry/cloud_controller_ng/blob/569b0ba2035819668528613494eb470cef4aec1f/app/actions/services/service_instance_delete.rb#L81-L82\r\n\r\nto just save a new empty operations record in the table because it destroys it first\r\nhttps://github.com/cloudfoundry/cloud_controller_ng/blob/569b0ba2035819668528613494eb470cef4aec1f/app/actions/services/locks/deleter_lock.rb#L15-L22\r\n\r\nhttps://github.com/cloudfoundry/cloud_controller_ng/blob/569b0ba2035819668528613494eb470cef4aec1f/app/models/services/managed_service_instance.rb#L148-L153\r\n\r\nBut I don't have enough insight in the internals to propose anything here.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/AlchemyCMS/alchemy-devise/issues/110","repository_url":"https://api.github.com/repos/AlchemyCMS/alchemy-devise","labels_url":"https://api.github.com/repos/AlchemyCMS/alchemy-devise/issues/110/labels{/name}","comments_url":"https://api.github.com/repos/AlchemyCMS/alchemy-devise/issues/110/comments","events_url":"https://api.github.com/repos/AlchemyCMS/alchemy-devise/issues/110/events","html_url":"https://github.com/AlchemyCMS/alchemy-devise/issues/110","id":722807088,"node_id":"MDU6SXNzdWU3MjI4MDcwODg=","number":110,"title":"ssl_required? error in admin/login path","user":{"login":"samgooi4189","id":1508176,"node_id":"MDQ6VXNlcjE1MDgxNzY=","avatar_url":"https://avatars2.githubusercontent.com/u/1508176?v=4","gravatar_id":"","url":"https://api.github.com/users/samgooi4189","html_url":"https://github.com/samgooi4189","followers_url":"https://api.github.com/users/samgooi4189/followers","following_url":"https://api.github.com/users/samgooi4189/following{/other_user}","gists_url":"https://api.github.com/users/samgooi4189/gists{/gist_id}","starred_url":"https://api.github.com/users/samgooi4189/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samgooi4189/subscriptions","organizations_url":"https://api.github.com/users/samgooi4189/orgs","repos_url":"https://api.github.com/users/samgooi4189/repos","events_url":"https://api.github.com/users/samgooi4189/events{/privacy}","received_events_url":"https://api.github.com/users/samgooi4189/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2020-10-16T02:15:22Z","updated_at":"2020-10-16T08:33:14Z","closed_at":"2020-10-16T08:07:30Z","author_association":"NONE","active_lock_reason":null,"body":"I'm afraid the bug still exists. I have installed Alchemy exactly as instructed and received **undefined method 'ssl_required'** at http://localhost:3000. Then I created a user at http://localhost:3000/admin/signup and everything worked until I logged out. After that I received the following error messages.\r\nhttp://localhost:3000: **Alchemy::Page not found \"/\"**\r\nhttp://localhost:3000/admin/login: **undefined method `ssl_required?**\r\n\r\n_Originally posted by @AnniMel in https://github.com/AlchemyCMS/alchemy-devise/issue_comments/679072637_","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/danmayer/coverband/issues/407","repository_url":"https://api.github.com/repos/danmayer/coverband","labels_url":"https://api.github.com/repos/danmayer/coverband/issues/407/labels{/name}","comments_url":"https://api.github.com/repos/danmayer/coverband/issues/407/comments","events_url":"https://api.github.com/repos/danmayer/coverband/issues/407/events","html_url":"https://github.com/danmayer/coverband/issues/407","id":716925122,"node_id":"MDU6SXNzdWU3MTY5MjUxMjI=","number":407,"title":"undefined method `get_header' for Rack::Request","user":{"login":"kadru","id":17147064,"node_id":"MDQ6VXNlcjE3MTQ3MDY0","avatar_url":"https://avatars2.githubusercontent.com/u/17147064?v=4","gravatar_id":"","url":"https://api.github.com/users/kadru","html_url":"https://github.com/kadru","followers_url":"https://api.github.com/users/kadru/followers","following_url":"https://api.github.com/users/kadru/following{/other_user}","gists_url":"https://api.github.com/users/kadru/gists{/gist_id}","starred_url":"https://api.github.com/users/kadru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kadru/subscriptions","organizations_url":"https://api.github.com/users/kadru/orgs","repos_url":"https://api.github.com/users/kadru/repos","events_url":"https://api.github.com/users/kadru/events{/privacy}","received_events_url":"https://api.github.com/users/kadru/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-10-07T23:57:36Z","updated_at":"2020-10-09T03:42:15Z","closed_at":"2020-10-09T03:42:15Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI get that `undefined method 'get_header' for #<Rack::Request:0x000055d27ca26940>` when I set `ENV[\"COVERBAND_PASSWORD\"]` and mount the application on my `routes.rb`\r\n\r\nI'm using  coverband 5.0.2, rails 4.2.11 and rack 1.6.13. I suppose the method `get_header` was added on rack 2.0, but I'm unable to update rack on my app at the moment.\r\n \r\nI report the issue because could help other people who stump with this.\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/mperham/sidekiq/issues/4711","repository_url":"https://api.github.com/repos/mperham/sidekiq","labels_url":"https://api.github.com/repos/mperham/sidekiq/issues/4711/labels{/name}","comments_url":"https://api.github.com/repos/mperham/sidekiq/issues/4711/comments","events_url":"https://api.github.com/repos/mperham/sidekiq/issues/4711/events","html_url":"https://github.com/mperham/sidekiq/issues/4711","id":715131826,"node_id":"MDU6SXNzdWU3MTUxMzE4MjY=","number":4711,"title":"NameError: uninitialized constant Sidekiq::Rack","user":{"login":"kjakub","id":660833,"node_id":"MDQ6VXNlcjY2MDgzMw==","avatar_url":"https://avatars3.githubusercontent.com/u/660833?v=4","gravatar_id":"","url":"https://api.github.com/users/kjakub","html_url":"https://github.com/kjakub","followers_url":"https://api.github.com/users/kjakub/followers","following_url":"https://api.github.com/users/kjakub/following{/other_user}","gists_url":"https://api.github.com/users/kjakub/gists{/gist_id}","starred_url":"https://api.github.com/users/kjakub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kjakub/subscriptions","organizations_url":"https://api.github.com/users/kjakub/orgs","repos_url":"https://api.github.com/users/kjakub/repos","events_url":"https://api.github.com/users/kjakub/events{/privacy}","received_events_url":"https://api.github.com/users/kjakub/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-05T20:15:48Z","updated_at":"2020-10-05T20:25:21Z","closed_at":"2020-10-05T20:25:21Z","author_association":"NONE","active_lock_reason":null,"body":"Ruby version: 2.6.0\r\nRails version: 6.0.3.3\r\nSidekiq / Pro / Enterprise version(s): 6.1.1 / 5.2.0 / 2.1.2\r\n\r\nPlease include your initializer, sidekiq.yml, and any error message with the full backtrace.\r\n\r\n````\r\nNameError: uninitialized constant Sidekiq::Rack\r\n  config.ru:6:in `block in <main>'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `eval'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `new_from_string'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/rack-2.2.3/lib/rack/builder.rb:105:in `load_file'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/rack-2.2.3/lib/rack/builder.rb:66:in `parse_file'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/puma-5.0.0/lib/puma/configuration.rb:330:in `load_rackup'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/puma-5.0.0/lib/puma/configuration.rb:256:in `app'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/puma-5.0.0/lib/puma/runner.rb:131:in `load_and_bind'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/puma-5.0.0/lib/puma/cluster.rb:499:in `run'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/puma-5.0.0/lib/puma/launcher.rb:171:in `run'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/puma-5.0.0/lib/puma/cli.rb:80:in `run'\r\n  /home/deploy/bundle/ruby/2.6.0/gems/puma-5.0.0/bin/puma:10:in `<top (required)>'\r\n  /home/deploy/bundle/ruby/2.6.0/bin/puma:23:in `load'\r\n  /home/deploy/bundle/ruby/2.6.0/bin/puma:23:in `<top (required)>'\r\n````\r\n````\r\nrequire 'exception_notification/rails'\r\nrequire 'exception_notification/sidekiq'\r\nrequire 'periodic_jobs'\r\n\r\n# WARNING: Apparently according to Best Practices we shouldn't be rescuing failures in jobs\r\n# https://github.com/mperham/sidekiq/wiki/Error-Handling#best-practices\r\n# and instead allowing the sidekiq error rescue mechanisms handle it\r\nSidekiq.configure_server do |config|\r\n  config.redis = { url: \"redis://localhost:6380/1\" }\r\n\r\n  config.error_handlers << proc do |exception, ctx_hash|\r\n    ExceptionNotifier.notify_exception(exception, data: { message: ctx_hash })\r\n  end\r\n\r\n  config.periodic(&PERIODIC_JOBS)\r\nend\r\n\r\nSidekiq.configure_client do |config|\r\n  config.redis = { url: \"redis://localhost:6380/1\" }\r\nend\r\n\r\nrequire 'sidekiq/middleware/i18n'\r\n````\r\n````\r\ndevelopment:\r\n  :concurrency: 3\r\n  :max_retries: 3\r\ntest:\r\n  :concurrency: 3\r\n  :max_retries: 3\r\nproduction:\r\n  :concurrency: 10\r\n  :max_retries: 3\r\nstaging:\r\n  :concurrency: 10\r\n  :max_retries: 3\r\ndemo:\r\n  :concurrency: 10\r\n  :max_retries: 3\r\n:queues:\r\n  - [\"critical\", 100]\r\n  - [\"high_priority\", 10]\r\n  - [\"mailers\", 4]\r\n  - [\"default\", 2]\r\n  - [\"low_priority\", 1]\r\n  - [\"cache\", 1]\r\n````\r\n\r\nIf you are using an old version, have you checked the changelogs to see if your issue has been fixed in a later version?\r\n\r\nhttps://github.com/mperham/sidekiq/blob/master/Changes.md\r\nhttps://github.com/mperham/sidekiq/blob/master/Pro-Changes.md\r\nhttps://github.com/mperham/sidekiq/blob/master/Ent-Changes.md\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/rails/rails/issues/40532","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/40532/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/40532/comments","events_url":"https://api.github.com/repos/rails/rails/issues/40532/events","html_url":"https://github.com/rails/rails/issues/40532","id":735697886,"node_id":"MDU6SXNzdWU3MzU2OTc4ODY=","number":40532,"title":"Web Console is broken in 6.1 RC1","user":{"login":"gobijan","id":49339,"node_id":"MDQ6VXNlcjQ5MzM5","avatar_url":"https://avatars3.githubusercontent.com/u/49339?v=4","gravatar_id":"","url":"https://api.github.com/users/gobijan","html_url":"https://github.com/gobijan","followers_url":"https://api.github.com/users/gobijan/followers","following_url":"https://api.github.com/users/gobijan/following{/other_user}","gists_url":"https://api.github.com/users/gobijan/gists{/gist_id}","starred_url":"https://api.github.com/users/gobijan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gobijan/subscriptions","organizations_url":"https://api.github.com/users/gobijan/orgs","repos_url":"https://api.github.com/users/gobijan/repos","events_url":"https://api.github.com/users/gobijan/events{/privacy}","received_events_url":"https://api.github.com/users/gobijan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-11-03T23:17:18Z","updated_at":"2020-11-05T15:25:52Z","closed_at":"2020-11-05T15:25:52Z","author_association":"NONE","active_lock_reason":null,"body":"### Steps to reproduce\r\nGenerate a new project and call `console` in a view or a controller.\r\n\r\n### Expected behavior\r\nWeb Console should come up.\r\n\r\n### Actual behavior\r\nException is thrown: `ArgumentError: wrong number of arguments (given 2, expected 3)`\r\n\r\n```\r\nArgumentError: wrong number of arguments (given 2, expected 3)\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/actionview-6.1.0.rc1/lib/action_view/base.rb:230:in `initialize'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/web-console-4.0.4/lib/web_console/template.rb:20:in `new'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/web-console-4.0.4/lib/web_console/template.rb:20:in `render'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/web-console-4.0.4/lib/web_console/middleware.rb:35:in `block in call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/web-console-4.0.4/lib/web_console/middleware.rb:17:in `catch'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/web-console-4.0.4/lib/web_console/middleware.rb:17:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/actionpack-6.1.0.rc1/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/railties-6.1.0.rc1/lib/rails/rack/logger.rb:37:in `call_app'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/railties-6.1.0.rc1/lib/rails/rack/logger.rb:26:in `block in call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/activesupport-6.1.0.rc1/lib/active_support/tagged_logging.rb:99:in `block in tagged'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/activesupport-6.1.0.rc1/lib/active_support/tagged_logging.rb:37:in `tagged'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/activesupport-6.1.0.rc1/lib/active_support/tagged_logging.rb:99:in `tagged'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/railties-6.1.0.rc1/lib/rails/rack/logger.rb:26:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/sprockets-rails-3.2.2/lib/sprockets/rails/quiet_assets.rb:13:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/actionpack-6.1.0.rc1/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/actionpack-6.1.0.rc1/lib/action_dispatch/middleware/request_id.rb:26:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/method_override.rb:24:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/runtime.rb:22:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/activesupport-6.1.0.rc1/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/actionpack-6.1.0.rc1/lib/action_dispatch/middleware/executor.rb:14:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/actionpack-6.1.0.rc1/lib/action_dispatch/middleware/static.rb:24:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/sendfile.rb:110:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/actionpack-6.1.0.rc1/lib/action_dispatch/middleware/host_authorization.rb:98:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/rack-mini-profiler-2.2.0/lib/mini_profiler/profiler.rb:368:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/webpacker-5.2.1/lib/webpacker/dev_server_proxy.rb:25:in `perform_request'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/rack-proxy-0.6.5/lib/rack/proxy.rb:57:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/railties-6.1.0.rc1/lib/rails/engine.rb:535:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/puma-5.0.4/lib/puma/configuration.rb:239:in `call'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/puma-5.0.4/lib/puma/request.rb:76:in `block in handle_request'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/puma-5.0.4/lib/puma/thread_pool.rb:337:in `with_force_shutdown'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/puma-5.0.4/lib/puma/request.rb:75:in `handle_request'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/puma-5.0.4/lib/puma/server.rb:430:in `process_client'\r\n        from /Users/bijan/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/puma-5.0.4/lib/puma/thread_pool.rb:145:in `block in spawn_thread'\r\n```\r\n\r\n### System configuration\r\n**Rails version**: 6.1 RC1\r\n\r\n**Ruby version**: 2.7.2\r\n\r\nThere is also an issue open in the web-console repo but I'm not sure wether it should be tracked here or there:\r\nhttps://github.com/rails/web-console/issues/303\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/thoughtbot/clearance/issues/913","repository_url":"https://api.github.com/repos/thoughtbot/clearance","labels_url":"https://api.github.com/repos/thoughtbot/clearance/issues/913/labels{/name}","comments_url":"https://api.github.com/repos/thoughtbot/clearance/issues/913/comments","events_url":"https://api.github.com/repos/thoughtbot/clearance/issues/913/events","html_url":"https://github.com/thoughtbot/clearance/issues/913","id":700779149,"node_id":"MDU6SXNzdWU3MDA3NzkxNDk=","number":913,"title":"Testing with nested parameters appears to be broken in v2.3.0","user":{"login":"dwightwatson","id":1100408,"node_id":"MDQ6VXNlcjExMDA0MDg=","avatar_url":"https://avatars3.githubusercontent.com/u/1100408?v=4","gravatar_id":"","url":"https://api.github.com/users/dwightwatson","html_url":"https://github.com/dwightwatson","followers_url":"https://api.github.com/users/dwightwatson/followers","following_url":"https://api.github.com/users/dwightwatson/following{/other_user}","gists_url":"https://api.github.com/users/dwightwatson/gists{/gist_id}","starred_url":"https://api.github.com/users/dwightwatson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dwightwatson/subscriptions","organizations_url":"https://api.github.com/users/dwightwatson/orgs","repos_url":"https://api.github.com/users/dwightwatson/repos","events_url":"https://api.github.com/users/dwightwatson/events{/privacy}","received_events_url":"https://api.github.com/users/dwightwatson/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-09-14T05:42:26Z","updated_at":"2020-10-09T00:25:28Z","closed_at":"2020-10-09T00:25:28Z","author_association":"NONE","active_lock_reason":null,"body":"I've discovered a regression in our app after upgrading Clearance from v2.2.1 to v2.3.0.\r\n\r\nI believe this was introduced in #897 which re-builds the query after removing `as`.\r\n\r\nDoing some looking around, it appears there is some wonky handling of nested attributes with Rack:\r\n* https://github.com/rails/rails/issues/23997\r\n* https://github.com/rack/rack/issues/951\r\n\r\nI'm using RSpec and notice that the format of my nested attributes change (and break) one they're in the controller.\r\n\r\n```rb\r\nattributes = {agreement: {agrement_splits_attributes: [{id: 1, amount: 100}, {id: 2, amount: 200}]}}\r\npatch tenancy_agreement_split_path tenancy, params: {agreement: attributes}\r\n```\r\n\r\nWhen inspecting the parameters inside the controller action, that first amount is split into it's own hash.\r\n\r\n```\r\n\"agreement_splits_attributes\"=>[{\"id\"=>\"1\"}, {\"id\"=>\"2\", \"amount\"=>\"200\"}, {\"amount\"=>\"100\"}]\r\n```\r\n\r\nRolling back to v2.2.1 resolves this instantly. ","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/bigbluebutton/greenlight/issues/2071","repository_url":"https://api.github.com/repos/bigbluebutton/greenlight","labels_url":"https://api.github.com/repos/bigbluebutton/greenlight/issues/2071/labels{/name}","comments_url":"https://api.github.com/repos/bigbluebutton/greenlight/issues/2071/comments","events_url":"https://api.github.com/repos/bigbluebutton/greenlight/issues/2071/events","html_url":"https://github.com/bigbluebutton/greenlight/issues/2071","id":693053899,"node_id":"MDU6SXNzdWU2OTMwNTM4OTk=","number":2071,"title":"[Docker] [First-Install] Error during failsafe response: Couldn't find Room","user":{"login":"h8h","id":953856,"node_id":"MDQ6VXNlcjk1Mzg1Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/953856?v=4","gravatar_id":"","url":"https://api.github.com/users/h8h","html_url":"https://github.com/h8h","followers_url":"https://api.github.com/users/h8h/followers","following_url":"https://api.github.com/users/h8h/following{/other_user}","gists_url":"https://api.github.com/users/h8h/gists{/gist_id}","starred_url":"https://api.github.com/users/h8h/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/h8h/subscriptions","organizations_url":"https://api.github.com/users/h8h/orgs","repos_url":"https://api.github.com/users/h8h/repos","events_url":"https://api.github.com/users/h8h/events{/privacy}","received_events_url":"https://api.github.com/users/h8h/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-09-04T11:09:56Z","updated_at":"2020-10-24T20:44:21Z","closed_at":"2020-09-14T18:18:26Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nFireing up docker-compose for the first time fresh database and so on I run into a problem on the first login attempt (https://domain.tld/b/), getting a `500 Internal Server Error` and in the logs I get: \r\n\r\n`Error during failsafe response: Couldn't find Room with [WHERE \"rooms\".\"deleted\" = $1 AND \"rooms\".\"uid\" = $2]`.\r\n\r\nLooking in the table \"rooms\" there are no entries. Is this normal for a fresh installation? If I try to run `docker exec .... bundle exec rake room:four` there is no output and still no entries in the table.\r\n\r\n![image001](https://user-images.githubusercontent.com/953856/92232845-85d15f00-eeaf-11ea-892e-b644425748af.png)\r\n\r\nThe corresponding docker-compose file:\r\n![image002](https://user-images.githubusercontent.com/953856/92232849-8833b900-eeaf-11ea-888b-a3ddb978ce25.png)\r\n\r\nSorry for the pictures but powershell.exe mess up with the output. B.t.w. I only use powershell for ssh access. Docker is running on a linux host (ubuntu 18.04)\r\n\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/VCVRack/Rack/issues/1623","repository_url":"https://api.github.com/repos/VCVRack/Rack","labels_url":"https://api.github.com/repos/VCVRack/Rack/issues/1623/labels{/name}","comments_url":"https://api.github.com/repos/VCVRack/Rack/issues/1623/comments","events_url":"https://api.github.com/repos/VCVRack/Rack/issues/1623/events","html_url":"https://github.com/VCVRack/Rack/issues/1623","id":519435306,"node_id":"MDU6SXNzdWU1MTk0MzUzMDY=","number":1623,"title":" Error on launch “Rack’s resource directory “n_…/res” does not exist” on Mac","user":{"login":"bitfetcher","id":35716098,"node_id":"MDQ6VXNlcjM1NzE2MDk4","avatar_url":"https://avatars2.githubusercontent.com/u/35716098?v=4","gravatar_id":"","url":"https://api.github.com/users/bitfetcher","html_url":"https://github.com/bitfetcher","followers_url":"https://api.github.com/users/bitfetcher/followers","following_url":"https://api.github.com/users/bitfetcher/following{/other_user}","gists_url":"https://api.github.com/users/bitfetcher/gists{/gist_id}","starred_url":"https://api.github.com/users/bitfetcher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bitfetcher/subscriptions","organizations_url":"https://api.github.com/users/bitfetcher/orgs","repos_url":"https://api.github.com/users/bitfetcher/repos","events_url":"https://api.github.com/users/bitfetcher/events{/privacy}","received_events_url":"https://api.github.com/users/bitfetcher/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":23,"created_at":"2019-11-07T18:24:20Z","updated_at":"2020-11-14T12:24:56Z","closed_at":"2020-07-30T18:53:55Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nSearch existing issues before posting a new one to avoid duplicates.\r\nTo file a bug report, fill out the form below.\r\nUse a descriptive title that best explains the bug in one sentence.\r\nAttach screenshots if the bug is visual.\r\nIf Rack crashed, attach/upload (don't copy/paste) your `<Rack user folder>/log.txt` file.\r\nSurround terminal output with three tildes\r\n```\r\nlike this.\r\n```\r\n-->\r\n\r\n### Details\r\n\r\nOperating system: OS X 10.14.6 (Mojave)\r\nRack version: v1.1.6\r\nHardware relevant to your issue (e.g. graphic card model, audio/MIDI device):\r\nMacBook Pro (15 inch, 2019)\r\n### Summary\r\n\r\nDownloaded version1.1.6  for OS X, and launched. This alert window appears:\r\n\r\n![Screen Shot 2019-11-07 at 12 14 08 PM](https://user-images.githubusercontent.com/35716098/68415927-0ec91e00-0159-11ea-8ddc-37bdbf5fd724.png)\r\n\r\nNo rack window is created. Subsequent launches do not produce the alert, but still do not create a rack window.\r\n\r\n[EDIT] Here is the content of log.txt after running 1.1.6.\r\n\r\n```\r\n[0.001 info src/main.cpp:119] VCV Rack v1.1.6\r\n[0.001 info src/main.cpp:120] Darwin 18.7.0 Darwin Kernel Version 18.7.0: Tue Aug 20 16:57:14 PDT 2019; root:xnu-4903.271.2~2/RELEASE_X86_64 x86_64\r\n[0.001 info src/main.cpp:126] Args: /Applications/Rack-1.1.6.app/Contents/MacOS/Rack -psn_0_6501939\r\n[0.001 info src/main.cpp:129] System directory: n_0_5801352\r\n[0.001 info src/main.cpp:130] User directory: /Users/<me>/Documents/Rack\r\n[0.001 info src/main.cpp:132] Bundle path:\r\n[0.001 info src/settings.cpp:206] Loading settings /Users/<me>/Documents/Rack/settings-v1.json\r\nVersion 1.1.5 continues to work just fine.\r\n\r\n```\r\n\r\nThe (apparently random) \"System directory\" name matches the missing \"/res\" folder parent.\r\n\r\n\r\n### Steps to reproduce\r\n\r\nI deleted and DL'ed again, with identical results.\r\n\r\n<!--\r\nIf developers cannot reproduce the bug, it cannot be fixed.\r\n-->\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/ManageIQ/manageiq-ui-classic/issues/7329","repository_url":"https://api.github.com/repos/ManageIQ/manageiq-ui-classic","labels_url":"https://api.github.com/repos/ManageIQ/manageiq-ui-classic/issues/7329/labels{/name}","comments_url":"https://api.github.com/repos/ManageIQ/manageiq-ui-classic/issues/7329/comments","events_url":"https://api.github.com/repos/ManageIQ/manageiq-ui-classic/issues/7329/events","html_url":"https://github.com/ManageIQ/manageiq-ui-classic/issues/7329","id":705621595,"node_id":"MDU6SXNzdWU3MDU2MjE1OTU=","number":7329,"title":"CF_Trying_To_Login_Showing_Proxy_Error Message","user":{"login":"Franklin-lab","id":68325936,"node_id":"MDQ6VXNlcjY4MzI1OTM2","avatar_url":"https://avatars1.githubusercontent.com/u/68325936?v=4","gravatar_id":"","url":"https://api.github.com/users/Franklin-lab","html_url":"https://github.com/Franklin-lab","followers_url":"https://api.github.com/users/Franklin-lab/followers","following_url":"https://api.github.com/users/Franklin-lab/following{/other_user}","gists_url":"https://api.github.com/users/Franklin-lab/gists{/gist_id}","starred_url":"https://api.github.com/users/Franklin-lab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Franklin-lab/subscriptions","organizations_url":"https://api.github.com/users/Franklin-lab/orgs","repos_url":"https://api.github.com/users/Franklin-lab/repos","events_url":"https://api.github.com/users/Franklin-lab/events{/privacy}","received_events_url":"https://api.github.com/users/Franklin-lab/received_events","type":"User","site_admin":false},"labels":[{"id":505074429,"node_id":"MDU6TGFiZWw1MDUwNzQ0Mjk=","url":"https://api.github.com/repos/ManageIQ/manageiq-ui-classic/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jrafanie","id":19339,"node_id":"MDQ6VXNlcjE5MzM5","avatar_url":"https://avatars0.githubusercontent.com/u/19339?v=4","gravatar_id":"","url":"https://api.github.com/users/jrafanie","html_url":"https://github.com/jrafanie","followers_url":"https://api.github.com/users/jrafanie/followers","following_url":"https://api.github.com/users/jrafanie/following{/other_user}","gists_url":"https://api.github.com/users/jrafanie/gists{/gist_id}","starred_url":"https://api.github.com/users/jrafanie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrafanie/subscriptions","organizations_url":"https://api.github.com/users/jrafanie/orgs","repos_url":"https://api.github.com/users/jrafanie/repos","events_url":"https://api.github.com/users/jrafanie/events{/privacy}","received_events_url":"https://api.github.com/users/jrafanie/received_events","type":"User","site_admin":false},"assignees":[{"login":"jrafanie","id":19339,"node_id":"MDQ6VXNlcjE5MzM5","avatar_url":"https://avatars0.githubusercontent.com/u/19339?v=4","gravatar_id":"","url":"https://api.github.com/users/jrafanie","html_url":"https://github.com/jrafanie","followers_url":"https://api.github.com/users/jrafanie/followers","following_url":"https://api.github.com/users/jrafanie/following{/other_user}","gists_url":"https://api.github.com/users/jrafanie/gists{/gist_id}","starred_url":"https://api.github.com/users/jrafanie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrafanie/subscriptions","organizations_url":"https://api.github.com/users/jrafanie/orgs","repos_url":"https://api.github.com/users/jrafanie/repos","events_url":"https://api.github.com/users/jrafanie/events{/privacy}","received_events_url":"https://api.github.com/users/jrafanie/received_events","type":"User","site_admin":false}],"milestone":null,"comments":19,"created_at":"2020-09-21T13:55:28Z","updated_at":"2020-11-13T20:04:44Z","closed_at":"2020-11-13T20:04:43Z","author_association":"NONE","active_lock_reason":null,"body":"**Environment Version:** 5.11.5.2.20200422181830_c7107ec\r\n**Description**: Past couple of days observed that proxy error message whenever trying to login from UI. I have manually restart the appliance and start the EVM service then it is started working. I have attached production logs.\r\n\r\n\r\n![CF_Login_Page_Proxy_Error_](https://user-images.githubusercontent.com/68325936/93775546-2a89c580-fc40-11ea-86c1-16f7ee43abcb.PNG)\r\n[production.log-20200921.gz](https://github.com/ManageIQ/manageiq-ui-classic/files/5255761/production.log-20200921.gz)\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/rails/web-console/issues/303","repository_url":"https://api.github.com/repos/rails/web-console","labels_url":"https://api.github.com/repos/rails/web-console/issues/303/labels{/name}","comments_url":"https://api.github.com/repos/rails/web-console/issues/303/comments","events_url":"https://api.github.com/repos/rails/web-console/issues/303/events","html_url":"https://github.com/rails/web-console/issues/303","id":735583721,"node_id":"MDU6SXNzdWU3MzU1ODM3MjE=","number":303,"title":"Breaking with Rails 6.1.rc1.","user":{"login":"stephannv","id":3025661,"node_id":"MDQ6VXNlcjMwMjU2NjE=","avatar_url":"https://avatars3.githubusercontent.com/u/3025661?v=4","gravatar_id":"","url":"https://api.github.com/users/stephannv","html_url":"https://github.com/stephannv","followers_url":"https://api.github.com/users/stephannv/followers","following_url":"https://api.github.com/users/stephannv/following{/other_user}","gists_url":"https://api.github.com/users/stephannv/gists{/gist_id}","starred_url":"https://api.github.com/users/stephannv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephannv/subscriptions","organizations_url":"https://api.github.com/users/stephannv/orgs","repos_url":"https://api.github.com/users/stephannv/repos","events_url":"https://api.github.com/users/stephannv/events{/privacy}","received_events_url":"https://api.github.com/users/stephannv/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-11-03T19:34:17Z","updated_at":"2020-11-04T15:05:01Z","closed_at":"2020-11-04T15:05:01Z","author_association":"NONE","active_lock_reason":null,"body":"Can be this change breaking web-console with rails 6.1-rc1?\r\nWeb-console:\r\nhttps://github.com/rails/web-console/commit/434149617f0c2f66cda7a55206788e2713b48566#diff-7bc80c4bc731f19ccaee77fb14214df9ea0932eb1e7528085a9d517815901eceL20-R20\r\n\r\nRails 6.1 rc1:\r\nhttps://github.com/rails/rails/commit/cd0c99c991ecbdb60b87cf648a6fddb0a50a13ad#diff-2c5bc6d4049baee92f8bb3b4cfd67b744ca0309ffbfdf6910bee8d0024ec4dffL230-R230\r\n\r\n```\r\nActionController::RoutingError (No route matches [GET] \"/pt/teste\"):\r\n\r\nArgumentError: wrong number of arguments (given 2, expected 3)\r\n\tfrom /Users/stephann/.rvm/gems/ruby-2.7.1@test-webtest/gems/actionview-6.1.0.rc1/lib/action_view/base.rb:230:in `initialize'\r\n\tfrom /Users/stephann/.rvm/gems/ruby-2.7.1@test-webtest/gems/web-console-4.0.3/lib/web_console/template.rb:20:in `new'\r\n\tfrom /Users/stephann/.rvm/gems/ruby-2.7.1@test-webtest/gems/web-console-4.0.3/lib/web_console/template.rb:20:in `render'\r\n\tfrom /Users/stephann/.rvm/gems/ruby-2.7.1@test-webtest/gems/web-console-4.0.3/lib/web_console/middleware.rb:35:in `block in call'\r\n\tfrom /Users/stephann/.rvm/gems/ruby-2.7.1@test-webtest/gems/web-console-4.0.3/lib/web_console/middleware.rb:17:in `catch'\r\n\tfrom /Users/stephann/.rvm/gems/ruby-2.7.1@test-webtest/gems/web-console-4.0.3/lib/web_console/middleware.rb:17:in `call'\r\n\tfrom /Users/stephann/.rvm/gems/ruby-2.7.1@test-webtest/gems/actionpack-6.1.0.rc1/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'\r\n\tfrom /Users/stephann/.rvm/gems/ruby-2.7.1@test-webtest/gems/railties-6.1.0.rc1/lib/rails/rack/logger.rb:37:in `call_app'\r\n```\r\nSteps to reproduce:\r\nRaise some error on server like an not found page, or internal server error.\r\n\r\nThis is a new rails 6.1.rc1 project with this problem: https://github.com/stephannv/test-rails6-1-rc1-webconsole","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/mperham/sidekiq/issues/4440","repository_url":"https://api.github.com/repos/mperham/sidekiq","labels_url":"https://api.github.com/repos/mperham/sidekiq/issues/4440/labels{/name}","comments_url":"https://api.github.com/repos/mperham/sidekiq/issues/4440/comments","events_url":"https://api.github.com/repos/mperham/sidekiq/issues/4440/events","html_url":"https://github.com/mperham/sidekiq/issues/4440","id":557036506,"node_id":"MDU6SXNzdWU1NTcwMzY1MDY=","number":4440,"title":"Truncated response body using Sidekiq dashboard w/New Relic","user":{"login":"pelargir","id":3756,"node_id":"MDQ6VXNlcjM3NTY=","avatar_url":"https://avatars3.githubusercontent.com/u/3756?v=4","gravatar_id":"","url":"https://api.github.com/users/pelargir","html_url":"https://github.com/pelargir","followers_url":"https://api.github.com/users/pelargir/followers","following_url":"https://api.github.com/users/pelargir/following{/other_user}","gists_url":"https://api.github.com/users/pelargir/gists{/gist_id}","starred_url":"https://api.github.com/users/pelargir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pelargir/subscriptions","organizations_url":"https://api.github.com/users/pelargir/orgs","repos_url":"https://api.github.com/users/pelargir/repos","events_url":"https://api.github.com/users/pelargir/events{/privacy}","received_events_url":"https://api.github.com/users/pelargir/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":21,"created_at":"2020-01-29T18:23:42Z","updated_at":"2020-10-23T19:06:49Z","closed_at":"2020-01-30T16:53:11Z","author_association":"NONE","active_lock_reason":null,"body":"Ruby version: 2.6.5p114\r\nSidekiq / Pro / Enterprise version(s): 6.0.4\r\n\r\nWe're using newrelic_rpm 6.8.0.360 to add JavaScript instrumentation to our Rails 5.2.4.1 app. After upgrading to Rack 2.1.2 the dashboard went blank. Viewing the page source, the HTML stops in the middle of the New Relic JS code near the top of the page (see screenshot).\r\n\r\nApparently, Rack::Response no longer overwrites the Content-Length header, which means an incorrectly configured Content-Length header is now exposed. See https://github.com/rack/rack/issues/1520#issuecomment-579838704\r\n\r\nIs it possible Sidekiq is setting Content-Length prior to New Relic adding its instrumentation, resulting in an incomplete page load since the New Relic code takes up the entire Content-Length before the remaining body can be sent?\r\n\r\nAs soon as I remove New Relic from our app the dashboard starts working again.\r\n\r\n![view-source_https___www_candlescience_com_admin_sidekiq](https://user-images.githubusercontent.com/3756/73385068-772c2500-429a-11ea-8406-8bfa85596b5e.png)","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/janko/sequel-activerecord_connection/issues/9","repository_url":"https://api.github.com/repos/janko/sequel-activerecord_connection","labels_url":"https://api.github.com/repos/janko/sequel-activerecord_connection/issues/9/labels{/name}","comments_url":"https://api.github.com/repos/janko/sequel-activerecord_connection/issues/9/comments","events_url":"https://api.github.com/repos/janko/sequel-activerecord_connection/issues/9/events","html_url":"https://github.com/janko/sequel-activerecord_connection/issues/9","id":708635368,"node_id":"MDU6SXNzdWU3MDg2MzUzNjg=","number":9,"title":"Hang caused by infinite loop in `transaction_finished?`","user":{"login":"bjeanes","id":2560,"node_id":"MDQ6VXNlcjI1NjA=","avatar_url":"https://avatars2.githubusercontent.com/u/2560?v=4","gravatar_id":"","url":"https://api.github.com/users/bjeanes","html_url":"https://github.com/bjeanes","followers_url":"https://api.github.com/users/bjeanes/followers","following_url":"https://api.github.com/users/bjeanes/following{/other_user}","gists_url":"https://api.github.com/users/bjeanes/gists{/gist_id}","starred_url":"https://api.github.com/users/bjeanes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bjeanes/subscriptions","organizations_url":"https://api.github.com/users/bjeanes/orgs","repos_url":"https://api.github.com/users/bjeanes/repos","events_url":"https://api.github.com/users/bjeanes/events{/privacy}","received_events_url":"https://api.github.com/users/bjeanes/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-09-25T04:41:17Z","updated_at":"2020-10-08T05:52:23Z","closed_at":"2020-09-28T02:06:06Z","author_association":"NONE","active_lock_reason":null,"body":"I have been debugging this for a few hours now and I really have not been able to nail it down to a minimal reproducible example. Hopefully I can provide enough information that we can resolve it together.\r\n\r\nIn a Rails application in which I am presently integrating Rodauth using your `rodauth-rails` gem I am experiencing what I initially thought was a DB transaction deadlock when running (Capybara) integration tests on the Rodauth paths.\r\n\r\nSpecifically, this is happening when a savepoint transaction is being committed (or possibly rolled back).\r\n\r\nAfter much painful debugging (where some `binding.pry` calls are simply not being picked up, so I'm having to navigate step-wise with byebug to the critical section each time :sob:), I have determined the critical issue to be https://github.com/janko/sequel-activerecord_connection/blob/0dc74427548e48eb0574b28ebefd65578b490f57/lib/sequel/extensions/activerecord_connection.rb#L67-L70\r\n\r\nI am seeing that `_trans` rebuilds the data-structure on each invocation. Based on the comments in this code, I am assuming this is trying to adjust for open AR transactions. Perhaps I am experiencing a situation where there are a different number of open transactions than expected.\r\n\r\nIn any case, here is some `pry` session showing the loop (slightly modified to not hang infinitely) which demonstrates the issue:\r\n\r\n``` irb\r\n[54] pry(#<Sequel::Postgres::Database>)> activerecord_connection.transaction_open?\r\n=> true\r\n[55] pry(#<Sequel::Postgres::Database>)> activerecord_connection.open_transactions\r\n=> 2\r\n[56] pry(#<Sequel::Postgres::Database>)> _trans(conn)[:savepoints]\r\n=> [{:activerecord=>true}, {:auto_savepoint=>nil}]\r\n[57] pry(#<Sequel::Postgres::Database>)> 100.times { _trans(conn)[:savepoints].shift if _trans(conn)[:savepoints].first[:activerecord] }\r\n=> 100\r\n[58] pry(#<Sequel::Postgres::Database>)> _trans(conn)[:savepoints]\r\n=> [{:activerecord=>true}, {:auto_savepoint=>nil}]\r\n```\r\n\r\nAs you can see, there are 2 open transactions and this causes the savepoint list to be re-built with two items, one of which is owned by activerecord.\r\n\r\nHere is the `backtrace` at this point:\r\n\r\n```\r\n--> #0  Sequel::ActiveRecordConnection._trans(conn#PG::Connection) at /bundle/gems/sequel-activerecord_connection-0.3.0/lib/sequel/extensions/activerecord_connection.rb:49\r\n    #1  Sequel::ActiveRecordConnection.transaction_finished?(conn#PG::Connection) at /bundle/gems/sequel-activerecord_connection-0.3.0/lib/sequel/extensions/activerecord_connection.rb:68\r\n    #2  Sequel::Database.remove_transaction(conn#PG::Connection, committed#TrueClass) at /bundle/gems/sequel-5.36.0/lib/sequel/database/transactions.rb:449\r\n    #3  Sequel::Database._transaction(conn#PG::Connection, opts#Hash) at /bundle/gems/sequel-5.36.0/lib/sequel/database/transactions.rb:282\r\n    #4  block in Sequel::Database.block in transaction(opts#Hash, &block#Proc) at /bundle/gems/sequel-5.36.0/lib/sequel/database/transactions.rb:233\r\n    #5  block in Sequel::ActiveRecordConnection.block in synchronize(*args) at /bundle/gems/sequel-activerecord_connection-0.3.0/lib/sequel/extensions/activerecord_connection.rb:35\r\n    #6  MonitorMixin.mon_synchronize at /usr/local/lib/ruby/2.6.0/monitor.rb:230\r\n    #7  Sequel::ActiveRecordConnection.synchronize(*args) at /bundle/gems/sequel-activerecord_connection-0.3.0/lib/sequel/extensions/activerecord_connection.rb:34\r\n    #8  Sequel::Database.transaction(opts#Hash, &block#Proc) at /bundle/gems/sequel-5.36.0/lib/sequel/database/transactions.rb:195\r\n    #9  Sequel::ActiveRecordConnection::Postgres.transaction(options#Hash) at /bundle/gems/sequel-activerecord_connection-0.3.0/lib/sequel/extensions/activerecord_connection/postgres.rb:25\r\n    #10 Rodauth::Base.transaction(opts#Hash, &block#Proc) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/base.rb:497\r\n    #11 Rodauth::Base.raises_uniqueness_violation?(&block#Proc) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/base.rb:679\r\n    #12 Rodauth::ActiveSessions.add_active_session at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/active_sessions.rb:62\r\n    #13 Rodauth::ActiveSessions.update_session at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/active_sessions.rb:100\r\n    #14 Rodauth::Base.login_session(auth_type#String) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/base.rb:414\r\n    #15 block in Rodauth::Login.block in login(auth_type#String) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/login.rb:79\r\n    #16 block in Sequel::Database.block in transaction(opts#Hash, &block#Proc) at /bundle/gems/sequel-5.36.0/lib/sequel/database/transactions.rb:229\r\n    #17 block in Sequel::ActiveRecordConnection.block in synchronize(*args) at /bundle/gems/sequel-activerecord_connection-0.3.0/lib/sequel/extensions/activerecord_connection.rb:35\r\n    #18 MonitorMixin.mon_synchronize at /usr/local/lib/ruby/2.6.0/monitor.rb:230\r\n    #19 Sequel::ActiveRecordConnection.synchronize(*args) at /bundle/gems/sequel-activerecord_connection-0.3.0/lib/sequel/extensions/activerecord_connection.rb:34\r\n    #20 Sequel::Database.transaction(opts#Hash, &block#Proc) at /bundle/gems/sequel-5.36.0/lib/sequel/database/transactions.rb:195\r\n    #21 Sequel::ActiveRecordConnection::Postgres.transaction(options#Hash) at /bundle/gems/sequel-activerecord_connection-0.3.0/lib/sequel/extensions/activerecord_connection/postgres.rb:25\r\n    #22 Rodauth::Base.transaction(opts#Hash, &block#Proc) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/base.rb:497\r\n    #23 Rodauth::Login.login(auth_type#String) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/login.rb:77\r\n    #24 block (4 levels) in Rodauth::Login.block (4 levels) in <module:Rodauth>(r##<Class:0x000055c181407318>) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/login.rb:65\r\n    ͱ-- #25 Kernel.catch(*args) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/base.rb:527\r\n    #26 Rodauth::Base.catch_error(&block#Proc) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/base.rb:527\r\n    #27 block (3 levels) in Rodauth::Login.block (3 levels) in <module:Rodauth>(r##<Class:0x000055c181407318>) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/login.rb:38\r\n    #28 Roda::RodaPlugins::Base::RequestMethods.always at /bundle/gems/roda-3.13.0/lib/roda.rb:789\r\n    #29 Roda::RodaPlugins::Base::RequestMethods._verb(args#Array, &block#Proc) at /bundle/gems/roda-3.13.0/lib/roda.rb:780\r\n    #30 Roda::RodaPlugins::Base::RequestMethods.post(*args#Array, &block#Proc) at /bundle/gems/roda-3.13.0/lib/roda.rb:554\r\n    #31 block (2 levels) in Rodauth::Login.block (2 levels) in <module:Rodauth>(r##<Class:0x000055c181407318>) at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/login.rb:34\r\n    #32 block (2 levels) in Rodauth::Login.block (2 levels) in route at /bundle/gems/rodauth-2.4.0/lib/rodauth.rb:124\r\n    #33 Roda::RodaPlugins::Base::RequestMethods.if_match(args#Array) at /bundle/gems/roda-3.13.0/lib/roda.rb:854\r\n    #34 Roda::RodaPlugins::Base::RequestMethods.is(*args#Array, &block#Proc) at /bundle/gems/roda-3.13.0/lib/roda.rb:478\r\n    #35 block in Rodauth::Login.block in route at /bundle/gems/rodauth-2.4.0/lib/rodauth.rb:121\r\n    #36 Rodauth::Base.route! at /bundle/gems/rodauth-2.4.0/lib/rodauth/features/base.rb:152\r\n    #37 Rodauth::RequestMethods.rodauth(name#Symbol) at /bundle/gems/rodauth-2.4.0/lib/rodauth.rb:349\r\n    #38 block in block in <class:RodauthConfig> at /app/app/core/authentication/rodauth_config.rb:427\r\n    ͱ-- #39 BasicObject.instance_exec(*args) at /bundle/gems/roda-3.13.0/lib/roda/plugins/middleware.rb:135\r\n    #40 block in Roda::RodaPlugins::Middleware::ClassMethods.block in route(*args#Array, &block#Proc) at /bundle/gems/roda-3.13.0/lib/roda/plugins/middleware.rb:135\r\n    ͱ-- #41 BasicObject.instance_exec(*args) at /bundle/gems/roda-3.13.0/lib/roda/plugins/_before_hook.rb:43\r\n    #42 block in Roda::RodaPlugins::BeforeHook::ClassMethods.block in rack_app_route_block(block#Proc) at /bundle/gems/roda-3.13.0/lib/roda/plugins/_before_hook.rb:43\r\n    ͱ-- #43 BasicObject.instance_exec(*args) at /bundle/gems/roda-3.13.0/lib/roda.rb:282\r\n    #44 block in Roda::RodaPlugins::Base::InstanceMethods.block in call(&block#Proc) at /bundle/gems/roda-3.13.0/lib/roda.rb:282\r\n    ͱ-- #45 Kernel.catch(*args) at /bundle/gems/roda-3.13.0/lib/roda.rb:280\r\n    #46 Roda::RodaPlugins::Base::InstanceMethods.call(&block#Proc) at /bundle/gems/roda-3.13.0/lib/roda.rb:280\r\n    #47 Roda::RodaPlugins::AfterHook::InstanceMethods.call at /bundle/gems/roda-3.13.0/lib/roda/plugins/_after_hook.rb:26\r\n    #48 block in Roda::RodaPlugins::Base::ClassMethods.block in build_rack_app at /bundle/gems/roda-3.13.0/lib/roda.rb:243\r\n    #49 Roda::RodaPlugins::Base::ClassMethods.call(env#Hash) at /bundle/gems/roda-3.13.0/lib/roda.rb:137\r\n    #50 block in Roda::RodaPlugins::Middleware::Forwarder.block in call(env#Hash) at /bundle/gems/roda-3.13.0/lib/roda/plugins/middleware.rb:105\r\n    ͱ-- #51 Kernel.catch(*args) at /bundle/gems/roda-3.13.0/lib/roda/plugins/middleware.rb:103\r\n    #52 Roda::RodaPlugins::Middleware::Forwarder.call(env#Hash) at /bundle/gems/roda-3.13.0/lib/roda/plugins/middleware.rb:103\r\n    #53 block in Rodauth::Rails::Middleware.block in call(env#Hash) at /bundle/gems/rodauth-rails-0.3.0/lib/rodauth/rails/middleware.rb:16\r\n    ͱ-- #54 Kernel.catch(*args) at /bundle/gems/rodauth-rails-0.3.0/lib/rodauth/rails/middleware.rb:15\r\n    #55 Rodauth::Rails::Middleware.call(env#Hash) at /bundle/gems/rodauth-rails-0.3.0/lib/rodauth/rails/middleware.rb:15\r\n    #56 Rack::Static.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/static.rb:161\r\n    #57 Remotipart::Middleware.call(env#Hash) at /bundle/gems/remotipart-1.4.4/lib/remotipart/middleware.rb:32\r\n    #58 Rack::TempfileReaper.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/tempfile_reaper.rb:15\r\n    #59 Rack::ETag.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/etag.rb:27\r\n    #60 Rack::ConditionalGet.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/conditional_get.rb:40\r\n    #61 Rack::Head.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/head.rb:12\r\n    #62 ActionDispatch::ContentSecurityPolicy::Middleware.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/http/content_security_policy.rb:18\r\n    #63 Rack::Session::Abstract::Persisted.context(env#Hash, app#ActionDispatch::ContentSecurityPolicy::Middleware) at /bundle/gems/rack-2.2.3/lib/rack/session/abstract/id.rb:266\r\n    #64 Rack::Session::Abstract::Persisted.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/session/abstract/id.rb:260\r\n    #65 ActionDispatch::Cookies.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/cookies.rb:670\r\n    #66 block in ActionDispatch::Callbacks.block in call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/callbacks.rb:28\r\n    #67 ActiveSupport::Callbacks.run_callbacks(kind#Symbol) at /bundle/gems/activesupport-5.2.4.4/lib/active_support/callbacks.rb:98\r\n    #68 ActionDispatch::Callbacks.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/callbacks.rb:26\r\n    #69 BetterErrors::Middleware.call(env#Hash) at /bundle/gems/better_errors-2.5.0/lib/better_errors/middleware.rb:59\r\n    #70 ActionDispatch::DebugExceptions.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/debug_exceptions.rb:61\r\n    #71 ActionDispatch::ShowExceptions.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/show_exceptions.rb:33\r\n    #72 Rails::Rack::Logger.call_app(request#ActionDispatch::Request, env#Hash) at /bundle/gems/railties-5.2.4.4/lib/rails/rack/logger.rb:38\r\n    #73 block in Rails::Rack::Logger.block in call(env#Hash) at /bundle/gems/railties-5.2.4.4/lib/rails/rack/logger.rb:26\r\n    #74 block in ActiveSupport::TaggedLogging.block in tagged(*tags#Array) at /bundle/gems/activesupport-5.2.4.4/lib/active_support/tagged_logging.rb:71\r\n    #75 ActiveSupport::TaggedLogging::Formatter.tagged(*tags#Array) at /bundle/gems/activesupport-5.2.4.4/lib/active_support/tagged_logging.rb:28\r\n    #76 ActiveSupport::TaggedLogging.tagged(*tags#Array) at /bundle/gems/activesupport-5.2.4.4/lib/active_support/tagged_logging.rb:71\r\n    #77 Rails::Rack::Logger.call(env#Hash) at /bundle/gems/railties-5.2.4.4/lib/rails/rack/logger.rb:26\r\n    #78 Rails::Rack::Logger.call_with_quiet_ahoy(env#Hash) at /bundle/bundler/gems/ahoy-9bea8cbeaf96/lib/ahoy/engine.rb:22\r\n    #79 ActionDispatch::RemoteIp.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/remote_ip.rb:81\r\n    #80 RequestStore::Middleware.call(env#Hash) at /bundle/gems/request_store-1.4.1/lib/request_store/middleware.rb:19\r\n    #81 ActionDispatch::RequestId.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/request_id.rb:27\r\n    #82 Rack::MethodOverride.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/method_override.rb:24\r\n    #83 Rack::Runtime.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/runtime.rb:22\r\n    #84 ActiveSupport::Cache::Strategy::LocalCache::Middleware.call(env#Hash) at /bundle/gems/activesupport-5.2.4.4/lib/active_support/cache/strategy/local_cache_middleware.rb:29\r\n    #85 ActionDispatch::Executor.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/executor.rb:14\r\n    #86 ActionDispatch::Static.call(env#Hash) at /bundle/gems/actionpack-5.2.4.4/lib/action_dispatch/middleware/static.rb:127\r\n    #87 Rack::Sendfile.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/sendfile.rb:110\r\n    #88 Rack::Cors.call(env#Hash) at /bundle/gems/rack-cors-1.0.5/lib/rack/cors.rb:98\r\n    #89 Raven::Rack.call(env#Hash) at /bundle/gems/sentry-raven-2.13.0/lib/raven/integrations/rack.rb:51\r\n    #90 Rails::Engine.call(env#Hash) at /bundle/gems/railties-5.2.4.4/lib/rails/engine.rb:524\r\n    #91 block in Rack::URLMap.block in call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/urlmap.rb:74\r\n    ͱ-- #92 Array.each at /bundle/gems/rack-2.2.3/lib/rack/urlmap.rb:58\r\n    #93 Rack::URLMap.call(env#Hash) at /bundle/gems/rack-2.2.3/lib/rack/urlmap.rb:58\r\n    #94 Capybara::Server::Middleware.call(env#Hash) at /bundle/gems/capybara-2.15.1/lib/capybara/server.rb:44\r\n    #95 Puma::Configuration::ConfigMiddleware.call(env#Hash) at /bundle/gems/puma-4.3.5/lib/puma/configuration.rb:228\r\n    #96 Puma::Server.handle_request(req#Puma::Client, lines#Puma::IOBuffer) at /bundle/gems/puma-4.3.5/lib/puma/server.rb:713\r\n    #97 Puma::Server.process_client(client#Puma::Client, buffer#Puma::IOBuffer) at /bundle/gems/puma-4.3.5/lib/puma/server.rb:472\r\n    #98 block in Puma::Server.block in run(background#TrueClass) at /bundle/gems/puma-4.3.5/lib/puma/server.rb:328\r\n    #99 block in Puma::ThreadPool.block in spawn_thread at /bundle/gems/puma-4.3.5/lib/puma/thread_pool.rb:134\r\n```\r\n\r\nAt one point in my debugging session, I did see `activerecord_connection.open_transactions` return `3` and `_trans(conn)[:savepoints]` return\r\n\r\n```\r\n[{:activerecord=>true}, {:activerecord=>true}, {:auto_savepoint=>nil}]\r\n```\r\n\r\nI am not sure where in my debugging session this was the case but as I have been debugging with the same spec each time, it indicates that perhaps one transaction is committing but there is one more than expected, or something?\r\n\r\nTo be honest, I am at the end of my rope here and really confused about how to approach this. Any help would be greatly appreciated.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/flyerhzm/bullet/issues/488","repository_url":"https://api.github.com/repos/flyerhzm/bullet","labels_url":"https://api.github.com/repos/flyerhzm/bullet/issues/488/labels{/name}","comments_url":"https://api.github.com/repos/flyerhzm/bullet/issues/488/comments","events_url":"https://api.github.com/repos/flyerhzm/bullet/issues/488/events","html_url":"https://github.com/flyerhzm/bullet/issues/488","id":554493250,"node_id":"MDU6SXNzdWU1NTQ0OTMyNTA=","number":488,"title":"append_to_html_body content getting escaped","user":{"login":"joshuacronemeyer","id":31906,"node_id":"MDQ6VXNlcjMxOTA2","avatar_url":"https://avatars2.githubusercontent.com/u/31906?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuacronemeyer","html_url":"https://github.com/joshuacronemeyer","followers_url":"https://api.github.com/users/joshuacronemeyer/followers","following_url":"https://api.github.com/users/joshuacronemeyer/following{/other_user}","gists_url":"https://api.github.com/users/joshuacronemeyer/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuacronemeyer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuacronemeyer/subscriptions","organizations_url":"https://api.github.com/users/joshuacronemeyer/orgs","repos_url":"https://api.github.com/users/joshuacronemeyer/repos","events_url":"https://api.github.com/users/joshuacronemeyer/events{/privacy}","received_events_url":"https://api.github.com/users/joshuacronemeyer/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-01-24T01:02:44Z","updated_at":"2020-11-09T02:10:18Z","closed_at":"2020-11-09T02:10:18Z","author_association":"NONE","active_lock_reason":null,"body":"Hi there,\r\n\r\nThanks for this gem! I recently upgraded my rails application from rails5 to rails 6. After the upgrade the bullet HTML footer was being escaped so that the footer contents get printed out by the browser as a string of HTML text. \r\n\r\nI poked around and the following change solved it for me https://github.com/joshuacronemeyer/bullet/commit/ec4c4dc12af342da855359b9236fe97ddde8b319\r\n\r\nI created the example rails app like you show in the readme and I cannot reproduce this issue with a simple rails app. I'm scratching my head on what might be different with my production app that would cause this. Maybe an interaction with other rack middleware? I thought I'd create this issue to see if you had any thoughts or insights.\r\n\r\nThanks Again,\r\nJosh","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/aws/aws-sessionstore-dynamodb-ruby/issues/24","repository_url":"https://api.github.com/repos/aws/aws-sessionstore-dynamodb-ruby","labels_url":"https://api.github.com/repos/aws/aws-sessionstore-dynamodb-ruby/issues/24/labels{/name}","comments_url":"https://api.github.com/repos/aws/aws-sessionstore-dynamodb-ruby/issues/24/comments","events_url":"https://api.github.com/repos/aws/aws-sessionstore-dynamodb-ruby/issues/24/events","html_url":"https://github.com/aws/aws-sessionstore-dynamodb-ruby/issues/24","id":732676581,"node_id":"MDU6SXNzdWU3MzI2NzY1ODE=","number":24,"title":"Make a new release please","user":{"login":"seven1m","id":669,"node_id":"MDQ6VXNlcjY2OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/669?v=4","gravatar_id":"","url":"https://api.github.com/users/seven1m","html_url":"https://github.com/seven1m","followers_url":"https://api.github.com/users/seven1m/followers","following_url":"https://api.github.com/users/seven1m/following{/other_user}","gists_url":"https://api.github.com/users/seven1m/gists{/gist_id}","starred_url":"https://api.github.com/users/seven1m/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seven1m/subscriptions","organizations_url":"https://api.github.com/users/seven1m/orgs","repos_url":"https://api.github.com/users/seven1m/repos","events_url":"https://api.github.com/users/seven1m/events{/privacy}","received_events_url":"https://api.github.com/users/seven1m/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2020-10-29T21:29:09Z","updated_at":"2020-11-12T00:26:54Z","closed_at":"2020-11-11T20:23:20Z","author_association":"NONE","active_lock_reason":null,"body":"The `master` branch is way ahead of the latest '1.0.0' release and it would be nice to install this from Rubygems.org rather than directly from GitHub. Thanks!","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/anycable/anycable-rails/issues/139","repository_url":"https://api.github.com/repos/anycable/anycable-rails","labels_url":"https://api.github.com/repos/anycable/anycable-rails/issues/139/labels{/name}","comments_url":"https://api.github.com/repos/anycable/anycable-rails/issues/139/comments","events_url":"https://api.github.com/repos/anycable/anycable-rails/issues/139/events","html_url":"https://github.com/anycable/anycable-rails/issues/139","id":696789920,"node_id":"MDU6SXNzdWU2OTY3ODk5MjA=","number":139,"title":"Undefined method `merge_into` after upgrading to 1.0.2","user":{"login":"pokonski","id":135402,"node_id":"MDQ6VXNlcjEzNTQwMg==","avatar_url":"https://avatars3.githubusercontent.com/u/135402?v=4","gravatar_id":"","url":"https://api.github.com/users/pokonski","html_url":"https://github.com/pokonski","followers_url":"https://api.github.com/users/pokonski/followers","following_url":"https://api.github.com/users/pokonski/following{/other_user}","gists_url":"https://api.github.com/users/pokonski/gists{/gist_id}","starred_url":"https://api.github.com/users/pokonski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pokonski/subscriptions","organizations_url":"https://api.github.com/users/pokonski/orgs","repos_url":"https://api.github.com/users/pokonski/repos","events_url":"https://api.github.com/users/pokonski/events{/privacy}","received_events_url":"https://api.github.com/users/pokonski/received_events","type":"User","site_admin":false},"labels":[{"id":523676729,"node_id":"MDU6TGFiZWw1MjM2NzY3Mjk=","url":"https://api.github.com/repos/anycable/anycable-rails/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2020-09-09T12:54:46Z","updated_at":"2020-09-16T10:13:17Z","closed_at":"2020-09-16T10:13:17Z","author_association":"NONE","active_lock_reason":null,"body":"### Tell us about your environment\r\n\r\n**Ruby version: 2.6.5**\r\n**`anycable` gem version: 1.0.1**\r\n**`rails` gem version: 5.2.4.2**\r\n**`grpc` gem version:  grpc-1.31.1-x86_64-linux**\r\n\r\n### What did you do?\r\n\r\nUpgraded anycable-rails from 0.6.5 to 1.0.2 and anycable from 0.6.5 to 1.0.1\r\n\r\n### What did you expect to happen?\r\n\r\nFor everything to keep working.\r\n\r\n### What actually happened?\r\n\r\nAttempts to connect from AnyCable-Go server to the gRPC server result in the following error:\r\n\r\n```\r\nRPC Connect: <AnyCable::ConnectionRequest: env: <AnyCable::Env: url: \"http://localhost:3334/cable?access_token=snip\", headers: {\"REMOTE_ADDR\"=>\"127.0.0.1\"}, cstate: {}, istate: {}>>\r\nundefined method `merge_into' for #<ActionDispatch::MiddlewareStack:0x000055e67c594d00>:\r\n/home/piotrek/.gem/gems/anycable-rails-1.0.2/lib/anycable/rails/rack.rb:49:in `block in app'\r\n/home/piotrek/.gem/gems/anycable-rails-1.0.2/lib/anycable/rails/rack.rb:46:in `synchronize'\r\n/home/piotrek/.gem/gems/anycable-rails-1.0.2/lib/anycable/rails/rack.rb:46:in `app'\r\n/home/piotrek/.gem/gems/anycable-rails-1.0.2/lib/anycable/rails/actioncable/connection.rb:196:in `build_rack_request'\r\n/home/piotrek/.gem/gems/anycable-rails-1.0.2/lib/anycable/rails/actioncable/connection.rb:138:in `request'\r\n/home/piotrek/my_app/app/channels/application_cable/connection.rb:5:in `connect'\r\n/home/piotrek/.gem/gems/anycable-rails-1.0.2/lib/anycable/rails/actioncable/connection.rb:82:in `handle_open'\r\n/home/piotrek/.gem/gems/anycable-1.0.1/lib/anycable/rpc_handler.rb:20:in `connect'\r\n/home/piotrek/.gem/gems/grpc-1.31.1-x86_64-linux/src/ruby/lib/grpc/generic/rpc_desc.rb:60:in `call'\r\n/home/piotrek/.gem/gems/grpc-1.31.1-x86_64-linux/src/ruby/lib/grpc/generic/rpc_desc.rb:60:in `block in handle_request_response'\r\n/home/piotrek/.gem/gems/grpc-1.31.1-x86_64-linux/src/ruby/lib/grpc/generic/interceptors.rb:178:in `block (2 levels) in intercept!'\r\n/home/piotrek/.gem/gems/grpc-1.31.1-x86_64-linux/src/ruby/lib/grpc/generic/interceptors.rb:181:in `block in intercept!'\r\n/home/piotrek/.gem/gems/anycable-1.0.1/lib/anycable/middleware.rb:14:in `block in request_response'\r\n/home/piotrek/.gem/gems/anycable-rails-1.0.2/lib/anycable/rails/middlewares/executor.rb:16:in `block in call'\r\n/home/piotrek/.gem/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'\r\n/home/piotrek/.gem/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'\r\n/home/piotrek/.gem/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'\r\n/home/piotrek/.gem/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'\r\n/home/piotrek/.gem/gems/anycable-rails-1.0.2/lib/anycable/rails/middlewares/executor.rb:16:in `call'\r\n/home/piotrek/.gem/gems/anycable-1.0.1/lib/anycable/middleware.rb:13:in `request_response'\r\n```\r\n\r\nThe relevant code for my Connection class, minimized to leave just the failing part:\r\n\r\n```ruby\r\nmodule ApplicationCable\r\n  class Connection < ActionCable::Connection::Base\r\n\r\n    def connect\r\n      request # This is where the failure occurs\r\n    end\r\n  end\r\nend\r\n```","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/puma/puma/issues/2471","repository_url":"https://api.github.com/repos/puma/puma","labels_url":"https://api.github.com/repos/puma/puma/issues/2471/labels{/name}","comments_url":"https://api.github.com/repos/puma/puma/issues/2471/comments","events_url":"https://api.github.com/repos/puma/puma/issues/2471/events","html_url":"https://github.com/puma/puma/issues/2471","id":732288558,"node_id":"MDU6SXNzdWU3MzIyODg1NTg=","number":2471,"title":"phased-restart errors after upgrading from Puma 3.12.6 to 5.0.4","user":{"login":"gingerlime","id":524274,"node_id":"MDQ6VXNlcjUyNDI3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/524274?v=4","gravatar_id":"","url":"https://api.github.com/users/gingerlime","html_url":"https://github.com/gingerlime","followers_url":"https://api.github.com/users/gingerlime/followers","following_url":"https://api.github.com/users/gingerlime/following{/other_user}","gists_url":"https://api.github.com/users/gingerlime/gists{/gist_id}","starred_url":"https://api.github.com/users/gingerlime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gingerlime/subscriptions","organizations_url":"https://api.github.com/users/gingerlime/orgs","repos_url":"https://api.github.com/users/gingerlime/repos","events_url":"https://api.github.com/users/gingerlime/events{/privacy}","received_events_url":"https://api.github.com/users/gingerlime/received_events","type":"User","site_admin":false},"labels":[{"id":485418725,"node_id":"MDU6TGFiZWw0ODU0MTg3MjU=","url":"https://api.github.com/repos/puma/puma/labels/bug","name":"bug","color":"d93f0b","default":true,"description":null},{"id":619007631,"node_id":"MDU6TGFiZWw2MTkwMDc2MzE=","url":"https://api.github.com/repos/puma/puma/labels/restart","name":"restart","color":"1d76db","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"cjlarose","id":954763,"node_id":"MDQ6VXNlcjk1NDc2Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/954763?v=4","gravatar_id":"","url":"https://api.github.com/users/cjlarose","html_url":"https://github.com/cjlarose","followers_url":"https://api.github.com/users/cjlarose/followers","following_url":"https://api.github.com/users/cjlarose/following{/other_user}","gists_url":"https://api.github.com/users/cjlarose/gists{/gist_id}","starred_url":"https://api.github.com/users/cjlarose/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjlarose/subscriptions","organizations_url":"https://api.github.com/users/cjlarose/orgs","repos_url":"https://api.github.com/users/cjlarose/repos","events_url":"https://api.github.com/users/cjlarose/events{/privacy}","received_events_url":"https://api.github.com/users/cjlarose/received_events","type":"User","site_admin":false},"assignees":[{"login":"cjlarose","id":954763,"node_id":"MDQ6VXNlcjk1NDc2Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/954763?v=4","gravatar_id":"","url":"https://api.github.com/users/cjlarose","html_url":"https://github.com/cjlarose","followers_url":"https://api.github.com/users/cjlarose/followers","following_url":"https://api.github.com/users/cjlarose/following{/other_user}","gists_url":"https://api.github.com/users/cjlarose/gists{/gist_id}","starred_url":"https://api.github.com/users/cjlarose/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjlarose/subscriptions","organizations_url":"https://api.github.com/users/cjlarose/orgs","repos_url":"https://api.github.com/users/cjlarose/repos","events_url":"https://api.github.com/users/cjlarose/events{/privacy}","received_events_url":"https://api.github.com/users/cjlarose/received_events","type":"User","site_admin":false}],"milestone":null,"comments":27,"created_at":"2020-10-29T12:53:42Z","updated_at":"2020-11-11T15:35:24Z","closed_at":"2020-11-10T17:16:43Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nThis seems to happen when doing phased-restarts using versioned deploy folders with symlinks.\r\n\r\nWe use a folder structure similar to this:\r\n\r\n```\r\n/app/app.d/{version (int)}\r\n/app/app -> /app/app.d/{version} # symlink\r\n/app/prev -> /app/app.d/{version-1} # symlink\r\n```\r\n\r\nWhen we deploy, we increment the version, run bundle etc, then switch the symlink and do a phased-restart of puma.\r\n\r\nAll seems to work fine, but after a few deploys, we also start pruning older versions, and then we see this error in the puma.log\r\n\r\n```\r\n/usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/spec_set.rb:86:in `block in materialize': Could not find json-2.3.1 in any of the sources (Bundler::GemNotFound)\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/spec_set.rb:80:in `map!'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/spec_set.rb:80:in `materialize'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/definition.rb:170:in `specs'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/definition.rb:237:in `specs_for'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/definition.rb:226:in `requested_specs'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/runtime.rb:101:in `block in definition_method'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/runtime.rb:20:in `setup'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler.rb:149:in `setup'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/setup.rb:20:in `block in <top (required)>'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/ui/shell.rb:136:in `with_level'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/ui/shell.rb:88:in `silence'\r\n        from /usr/lib/ruby/gems/2.6.0/gems/bundler-2.1.4/lib/bundler/setup.rb:20:in `<top (required)>'\r\n        from /usr/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:92:in `require'\r\n        from /usr/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:92:in `require'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/configuration.rb:312:in `rack_builder'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/configuration.rb:331:in `load_rackup'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/configuration.rb:257:in `app'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/runner.rb:142:in `app'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/runner.rb:146:in `start_server'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster/worker.rb:57:in `run'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:195:in `worker'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:96:in `block in spawn_worker'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:96:in `fork'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:96:in `spawn_worker'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:78:in `block in spawn_workers'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:71:in `times'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:71:in `spawn_workers'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:142:in `check_workers'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cluster.rb:410:in `run'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/launcher.rb:171:in `run'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/lib/puma/cli.rb:80:in `run'\r\n        from /var/local/app/app.d/1386/vendor/bundle/ruby/2.6.0/gems/puma-5.0.4/bin/puma-wild:25:in `<main>'\r\n[12769] + Gemfile in context: /var/local/app/app.d/1391/Gemfile\r\n[12769] Early termination of worker\r\n```\r\n\r\n❗️ Note that the app now lives in `/app/app.d/1390` but the errors are pointing to puma in `/app/app.d/1386` ❗️ \r\n\r\n**Puma config:**\r\n\r\n```\r\n#!/usr/bin/env puma\r\n\r\n# The directory to operate out of.\r\n#\r\n# The default is the current directory.\r\n#\r\ndirectory \"/var/local/app/app\"\r\n\r\n# Set the environment in which the rack's app will run. The value must be a string.\r\n#\r\n# The default is \"development\".\r\n#\r\nenvironment ENV[\"RAILS_ENV\"] || \"development\"\r\n\r\n# Store the pid of the server in the file at \"path\".\r\n#\r\npidfile \"/var/run/puma/puma.pid\"\r\n\r\n# Use \"path\" as the file to store the server info state. This is\r\n# used by \"pumactl\" to query and control the server.\r\n#\r\nstate_path \"/var/run/puma/puma.state\"\r\n\r\n# Redirect STDOUT and STDERR to files specified. The 3rd parameter\r\n# (\"append\") specifies whether the output is appended, the default is\r\n# \"false\".\r\n#\r\nstdout_redirect \"/var/log/puma.log\", \"/var/log/puma.log\", true\r\n\r\n# Configure \"min\" to be the minimum number of threads to use to answer\r\n# requests and \"max\" the maximum.\r\n#\r\n# The default is \"0, 16\".\r\n#\r\n# threads 0, 16\r\nthreads 8, 8\r\n\r\n\r\n# Bind the server to \"url\". \"tcp://\", \"unix://\" and \"ssl://\" are the only\r\n# accepted protocols.\r\n#\r\n# The default is \"tcp://0.0.0.0:9292\".\r\n#\r\nbind 'unix:///var/run/puma/puma.sock'\r\n\r\n\r\n# === Cluster mode ===\r\n\r\n# How many worker processes to run.  Typically this is set to\r\n# to the number of available cores.\r\n#\r\n# The default is \"0\".\r\n#\r\nworkers ENV[\"PUMA_WORKERS\"] || 16\r\n\r\n# Allow workers to reload bundler context when master process is issued\r\n# a USR1 signal. This allows proper reloading of gems while the master\r\n# is preserved across a phased-restart. (incompatible with preload_app)\r\n# (off by default)\r\n\r\n# see https://github.com/puma/puma/blob/master/docs/deployment.md#restarting\r\nprune_bundler\r\n```\r\n\r\nIf I do a full restart, then things are back to normal, until it happens again (we keep 3 deploys back, so after 4 deploys...)\r\n\r\n**To Reproduce**\r\n\r\nI was only able to reproduce this on our staging environment so far\r\n\r\n**Expected behavior**\r\nphased-restart should reload everything from the new folder... It does seem to point to the right folder, but there's some mysterious left-overs pointing to something old somewhere??\r\n\r\n**Server:**\r\n - OS: Ubuntu 18.04 with systemd\r\n - Puma Version 5.0.4 (it doesn't happen with 3.12)","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/rack/rack-attack/issues/103","repository_url":"https://api.github.com/repos/rack/rack-attack","labels_url":"https://api.github.com/repos/rack/rack-attack/issues/103/labels{/name}","comments_url":"https://api.github.com/repos/rack/rack-attack/issues/103/comments","events_url":"https://api.github.com/repos/rack/rack-attack/issues/103/events","html_url":"https://github.com/rack/rack-attack/issues/103","id":48429838,"node_id":"MDU6SXNzdWU0ODQyOTgzOA==","number":103,"title":"Not sure why I'm throttled?","user":{"login":"MarkMurphy","id":873474,"node_id":"MDQ6VXNlcjg3MzQ3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/873474?v=4","gravatar_id":"","url":"https://api.github.com/users/MarkMurphy","html_url":"https://github.com/MarkMurphy","followers_url":"https://api.github.com/users/MarkMurphy/followers","following_url":"https://api.github.com/users/MarkMurphy/following{/other_user}","gists_url":"https://api.github.com/users/MarkMurphy/gists{/gist_id}","starred_url":"https://api.github.com/users/MarkMurphy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarkMurphy/subscriptions","organizations_url":"https://api.github.com/users/MarkMurphy/orgs","repos_url":"https://api.github.com/users/MarkMurphy/repos","events_url":"https://api.github.com/users/MarkMurphy/events{/privacy}","received_events_url":"https://api.github.com/users/MarkMurphy/received_events","type":"User","site_admin":false},"labels":[{"id":872626140,"node_id":"MDU6TGFiZWw4NzI2MjYxNDA=","url":"https://api.github.com/repos/rack/rack-attack/labels/area:%20throttle","name":"area: throttle","color":"bfd4f2","default":false,"description":""},{"id":10404863,"node_id":"MDU6TGFiZWwxMDQwNDg2Mw==","url":"https://api.github.com/repos/rack/rack-attack/labels/type:%20question","name":"type: question","color":"c2e0c6","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2014-11-11T20:18:34Z","updated_at":"2020-11-03T05:14:16Z","closed_at":"2014-11-21T02:25:48Z","author_association":"NONE","active_lock_reason":null,"body":"I'm using the configuration found here: https://github.com/kickstarter/rack-attack/wiki/Example-Configuration\n\nI'm beging throttled after clicking around a few links in my app. Doesn't seem right. Any ideas?\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/paketo-buildpacks/nodejs/issues/233","repository_url":"https://api.github.com/repos/paketo-buildpacks/nodejs","labels_url":"https://api.github.com/repos/paketo-buildpacks/nodejs/issues/233/labels{/name}","comments_url":"https://api.github.com/repos/paketo-buildpacks/nodejs/issues/233/comments","events_url":"https://api.github.com/repos/paketo-buildpacks/nodejs/issues/233/events","html_url":"https://github.com/paketo-buildpacks/nodejs/issues/233","id":688294762,"node_id":"MDU6SXNzdWU2ODgyOTQ3NjI=","number":233,"title":"v0.0.6 manifest.json had unexpected number of entries: 2","user":{"login":"fg-j","id":21328286,"node_id":"MDQ6VXNlcjIxMzI4Mjg2","avatar_url":"https://avatars3.githubusercontent.com/u/21328286?v=4","gravatar_id":"","url":"https://api.github.com/users/fg-j","html_url":"https://github.com/fg-j","followers_url":"https://api.github.com/users/fg-j/followers","following_url":"https://api.github.com/users/fg-j/following{/other_user}","gists_url":"https://api.github.com/users/fg-j/gists{/gist_id}","starred_url":"https://api.github.com/users/fg-j/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fg-j/subscriptions","organizations_url":"https://api.github.com/users/fg-j/orgs","repos_url":"https://api.github.com/users/fg-j/repos","events_url":"https://api.github.com/users/fg-j/events{/privacy}","received_events_url":"https://api.github.com/users/fg-j/received_events","type":"User","site_admin":false},"labels":[{"id":2012005859,"node_id":"MDU6TGFiZWwyMDEyMDA1ODU5","url":"https://api.github.com/repos/paketo-buildpacks/nodejs/labels/needs%20triage","name":"needs triage","color":"45cc9a","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-08-28T18:59:36Z","updated_at":"2020-10-28T22:53:29Z","closed_at":"2020-10-28T22:53:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Attempted to build this [Paketo sample rack app](https://github.com/kvedurmu/paketo-samples/tree/master/ruby/rack/hello_rails) with the command:\r\n\r\n```\r\npack build rails-rack-app --buildpack gcr.io/paketo-buildpacks/nodejs --buildpack gcr.io/paketo-community/ruby\r\n```\r\n\r\nAnd got the output:\r\n```\r\nERROR: failed to build: opening buildpack blob: extracting buildpack paketo-buildpacks/nodejs@0.0.6 layer (diffID sha256:0c670b1d33c9f41a33ce38fabc8cd69def4379a04c64a09b12b31b0736f263c4): manifest.json had unexpected number of entries: 2\r\n```\r\n\r\nThis seems related to [this Ruby issue](https://github.com/paketo-community/ruby/issues/79).","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/covid-be-app/cwa-app-android/issues/81","repository_url":"https://api.github.com/repos/covid-be-app/cwa-app-android","labels_url":"https://api.github.com/repos/covid-be-app/cwa-app-android/issues/81/labels{/name}","comments_url":"https://api.github.com/repos/covid-be-app/cwa-app-android/issues/81/comments","events_url":"https://api.github.com/repos/covid-be-app/cwa-app-android/issues/81/events","html_url":"https://github.com/covid-be-app/cwa-app-android/issues/81","id":709997395,"node_id":"MDU6SXNzdWU3MDk5OTczOTU=","number":81,"title":"Possibility to see the number of \"negative contacts\" and total number of users?","user":{"login":"niconoe","id":386387,"node_id":"MDQ6VXNlcjM4NjM4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/386387?v=4","gravatar_id":"","url":"https://api.github.com/users/niconoe","html_url":"https://github.com/niconoe","followers_url":"https://api.github.com/users/niconoe/followers","following_url":"https://api.github.com/users/niconoe/following{/other_user}","gists_url":"https://api.github.com/users/niconoe/gists{/gist_id}","starred_url":"https://api.github.com/users/niconoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niconoe/subscriptions","organizations_url":"https://api.github.com/users/niconoe/orgs","repos_url":"https://api.github.com/users/niconoe/repos","events_url":"https://api.github.com/users/niconoe/events{/privacy}","received_events_url":"https://api.github.com/users/niconoe/received_events","type":"User","site_admin":false},"labels":[{"id":2222539417,"node_id":"MDU6TGFiZWwyMjIyNTM5NDE3","url":"https://api.github.com/repos/covid-be-app/cwa-app-android/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":2222539422,"node_id":"MDU6TGFiZWwyMjIyNTM5NDIy","url":"https://api.github.com/repos/covid-be-app/cwa-app-android/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-09-28T06:56:28Z","updated_at":"2020-10-26T18:47:14Z","closed_at":"2020-10-02T12:22:32Z","author_association":"NONE","active_lock_reason":null,"body":"Hey,\r\n\r\nI'm using the app since a week now, and thankfully I always get the \"limited risk - no exposure yet\" green message. \r\n\r\nHowever, I have no idea if this of how many people are using the app in Belgium for the moment, nor of how many users I've crossed/exchanged keys with. I think it would give some context: it's quite different to have a limited exposure because I've had contact with many \"negative\" people, than to have this green light because few people are using the app yet, and so maybe I've had contacts with all of them.\r\n\r\nI think displaying those two metrics (total/daily number of app users + number of \"negative contacts\") somewhere in the app would be great, is that feasible?\r\n\r\nAnyway, thanks for the good work!","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/sendgrid/sendgrid-ruby/issues/441","repository_url":"https://api.github.com/repos/sendgrid/sendgrid-ruby","labels_url":"https://api.github.com/repos/sendgrid/sendgrid-ruby/issues/441/labels{/name}","comments_url":"https://api.github.com/repos/sendgrid/sendgrid-ruby/issues/441/comments","events_url":"https://api.github.com/repos/sendgrid/sendgrid-ruby/issues/441/events","html_url":"https://github.com/sendgrid/sendgrid-ruby/issues/441","id":709550942,"node_id":"MDU6SXNzdWU3MDk1NTA5NDI=","number":441,"title":"SendGridWebhookVerification middleware unexpectedly changes request body's reading position","user":{"login":"snaka","id":19329,"node_id":"MDQ6VXNlcjE5MzI5","avatar_url":"https://avatars1.githubusercontent.com/u/19329?v=4","gravatar_id":"","url":"https://api.github.com/users/snaka","html_url":"https://github.com/snaka","followers_url":"https://api.github.com/users/snaka/followers","following_url":"https://api.github.com/users/snaka/following{/other_user}","gists_url":"https://api.github.com/users/snaka/gists{/gist_id}","starred_url":"https://api.github.com/users/snaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snaka/subscriptions","organizations_url":"https://api.github.com/users/snaka/orgs","repos_url":"https://api.github.com/users/snaka/repos","events_url":"https://api.github.com/users/snaka/events{/privacy}","received_events_url":"https://api.github.com/users/snaka/received_events","type":"User","site_admin":false},"labels":[{"id":105894943,"node_id":"MDU6TGFiZWwxMDU4OTQ5NDM=","url":"https://api.github.com/repos/sendgrid/sendgrid-ruby/labels/type:%20bug","name":"type: bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-09-26T14:49:56Z","updated_at":"2020-09-29T14:43:13Z","closed_at":"2020-09-29T00:35:11Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!--\r\nIf this is a feature request, make sure you search Issues for an existing request before creating a new one!\r\n\r\nPlease utilize the template below to help us resolve your issue.\r\n\r\nNote that many issues can be resolved by updating to the latest version.\r\n-->\r\n\r\n### Issue Summary\r\n\r\nSendGridWebhookVerification middleware unexpectedly changes request body's reading position.\r\nSo, rails application raises following exception.\r\n\r\n```\r\nActionDispatch::Http::Parameters::ParseError (no implicit conversion of nil into String):\r\n```\r\n\r\n\r\n### Steps to Reproduce\r\n\r\n1. Run sample rails application and follow README \r\n* https://github.com/snaka/sendgrid-webhook-rails-example\r\n\r\n### Code Snippet\r\n\r\n(none)\r\n\r\n### Exception/Log\r\n```\r\nStarted POST \"/sendgrid/signed/webhook\" for 54.70.106.128 at 2020-09-26 19:42:07 +0900\r\nCannot render console from 54.70.106.128! Allowed networks: 127.0.0.0/127.255.255.255, ::1\r\nError occurred while parsing request parameters.\r\nContents:\r\n\r\n\r\n\r\nActionDispatch::Http::Parameters::ParseError (no implicit conversion of nil into String):\r\n\r\nactionpack (6.0.3.3) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'\r\nactionpack (6.0.3.3) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'\r\nactionpack (6.0.3.3) lib/action_dispatch/http/request.rb:389:in `block in POST'\r\nrack (2.2.3) lib/rack/request.rb:69:in `fetch'\r\nrack (2.2.3) lib/rack/request.rb:69:in `fetch_header'\r\nactionpack (6.0.3.3) lib/action_dispatch/http/request.rb:388:in `POST'\r\nactionpack (6.0.3.3) lib/action_dispatch/http/parameters.rb:55:in `parameters'\r\nactionpack (6.0.3.3) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'\r\nactionpack (6.0.3.3) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'\r\nactionpack (6.0.3.3) lib/abstract_controller/base.rb:136:in `process'\r\nactionview (6.0.3.3) lib/action_view/rendering.rb:39:in `process'\r\nactionpack (6.0.3.3) lib/action_controller/metal.rb:190:in `dispatch'\r\nactionpack (6.0.3.3) lib/action_controller/metal.rb:254:in `dispatch'\r\nactionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'\r\nactionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:33:in `serve'\r\nactionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:49:in `block in serve'\r\nactionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:32:in `each'\r\nactionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:32:in `serve'\r\nactionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:834:in `call'\r\nsendgrid-ruby (6.3.4) lib/rack/sendgrid_webhook_verification.rb:42:in `call'\r\nrack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'\r\nrack (2.2.3) lib/rack/etag.rb:27:in `call'\r\nrack (2.2.3) lib/rack/conditional_get.rb:40:in `call'\r\nrack (2.2.3) lib/rack/head.rb:12:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/http/content_security_policy.rb:18:in `call'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'\r\nrack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/cookies.rb:648:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'\r\nactivesupport (6.0.3.3) lib/active_support/callbacks.rb:101:in `run_callbacks'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'\r\nweb-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'\r\nweb-console (4.0.4) lib/web_console/middleware.rb:19:in `block in call'\r\nweb-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'\r\nweb-console (4.0.4) lib/web_console/middleware.rb:17:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'\r\nrailties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'\r\nrailties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'\r\nactivesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'\r\nactivesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'\r\nactivesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'\r\nrailties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'\r\nsprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'\r\nrack (2.2.3) lib/rack/method_override.rb:24:in `call'\r\nrack (2.2.3) lib/rack/runtime.rb:22:in `call'\r\nactivesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'\r\nrack (2.2.3) lib/rack/sendfile.rb:110:in `call'\r\nactionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:76:in `call'\r\nwebpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'\r\nrack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'\r\nrailties (6.0.3.3) lib/rails/engine.rb:527:in `call'\r\npuma (4.3.6) lib/puma/configuration.rb:228:in `call'\r\npuma (4.3.6) lib/puma/server.rb:713:in `handle_request'\r\npuma (4.3.6) lib/puma/server.rb:472:in `process_client'\r\npuma (4.3.6) lib/puma/server.rb:328:in `block in run'\r\npuma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'\r\nError occurred while parsing request parameters.\r\nContents:\r\n```\r\n\r\n### Technical details:\r\n* sendgrid-ruby version:  6.3.4\r\n* ruby version: 2.6.5\r\n* rails: 6.0.3.3\r\n* rack: 2.2.3","performed_via_github_app":null,"score":1.0}]}
0

