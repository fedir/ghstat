HTTP/1.1 200 OK
Transfer-Encoding: chunked
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
Cache-Control: no-cache
Content-Security-Policy: default-src 'none'
Content-Type: application/json; charset=utf-8
Date: Sat, 14 Nov 2020 21:08:27 GMT
Link: <https://api.github.com/search/issues?q=https%3A%2F%2Fgithub.com%2Fapache%2Fcouchdb+type%3Aissue+state%3Aclosed&page=2>; rel="next", <https://api.github.com/search/issues?q=https%3A%2F%2Fgithub.com%2Fapache%2Fcouchdb+type%3Aissue+state%3Aclosed&page=34>; rel="last"
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Server: GitHub.com
Status: 200 OK
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
Vary: Accept, Authorization, Cookie, X-GitHub-OTP
Vary: Accept-Encoding, Accept, X-Requested-With
Vary: Accept-Encoding
X-Accepted-Oauth-Scopes: 
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Github-Media-Type: github.v3; format=json
X-Github-Request-Id: D8E1:B560:4091A37:4A7945F:5FB0474A
X-Oauth-Scopes: repo
X-Ratelimit-Limit: 30
X-Ratelimit-Remaining: 19
X-Ratelimit-Reset: 1605388137
X-Ratelimit-Used: 11
X-Xss-Protection: 1; mode=block

1d8f3
{"total_count":1478,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/open-telemetry/opentelemetry-java/issues/1841","repository_url":"https://api.github.com/repos/open-telemetry/opentelemetry-java","labels_url":"https://api.github.com/repos/open-telemetry/opentelemetry-java/issues/1841/labels{/name}","comments_url":"https://api.github.com/repos/open-telemetry/opentelemetry-java/issues/1841/comments","events_url":"https://api.github.com/repos/open-telemetry/opentelemetry-java/issues/1841/events","html_url":"https://github.com/open-telemetry/opentelemetry-java/issues/1841","id":726075329,"node_id":"MDU6SXNzdWU3MjYwNzUzMjk=","number":1841,"title":"Semantic constants for db.system","user":{"login":"trask","id":218610,"node_id":"MDQ6VXNlcjIxODYxMA==","avatar_url":"https://avatars3.githubusercontent.com/u/218610?v=4","gravatar_id":"","url":"https://api.github.com/users/trask","html_url":"https://github.com/trask","followers_url":"https://api.github.com/users/trask/followers","following_url":"https://api.github.com/users/trask/following{/other_user}","gists_url":"https://api.github.com/users/trask/gists{/gist_id}","starred_url":"https://api.github.com/users/trask/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trask/subscriptions","organizations_url":"https://api.github.com/users/trask/orgs","repos_url":"https://api.github.com/users/trask/repos","events_url":"https://api.github.com/users/trask/events{/privacy}","received_events_url":"https://api.github.com/users/trask/received_events","type":"User","site_admin":false},"labels":[{"id":1361279795,"node_id":"MDU6TGFiZWwxMzYxMjc5Nzk1","url":"https://api.github.com/repos/open-telemetry/opentelemetry-java/labels/API","name":"API","color":"c5def5","default":false,"description":"API related issues"},{"id":2036141620,"node_id":"MDU6TGFiZWwyMDM2MTQxNjIw","url":"https://api.github.com/repos/open-telemetry/opentelemetry-java/labels/Feature%20Request","name":"Feature Request","color":"f9d0c4","default":false,"description":"Suggest an idea for this project"}],"state":"closed","locked":false,"assignee":{"login":"thisthat","id":992621,"node_id":"MDQ6VXNlcjk5MjYyMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/992621?v=4","gravatar_id":"","url":"https://api.github.com/users/thisthat","html_url":"https://github.com/thisthat","followers_url":"https://api.github.com/users/thisthat/followers","following_url":"https://api.github.com/users/thisthat/following{/other_user}","gists_url":"https://api.github.com/users/thisthat/gists{/gist_id}","starred_url":"https://api.github.com/users/thisthat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thisthat/subscriptions","organizations_url":"https://api.github.com/users/thisthat/orgs","repos_url":"https://api.github.com/users/thisthat/repos","events_url":"https://api.github.com/users/thisthat/events{/privacy}","received_events_url":"https://api.github.com/users/thisthat/received_events","type":"User","site_admin":false},"assignees":[{"login":"thisthat","id":992621,"node_id":"MDQ6VXNlcjk5MjYyMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/992621?v=4","gravatar_id":"","url":"https://api.github.com/users/thisthat","html_url":"https://github.com/thisthat","followers_url":"https://api.github.com/users/thisthat/followers","following_url":"https://api.github.com/users/thisthat/following{/other_user}","gists_url":"https://api.github.com/users/thisthat/gists{/gist_id}","starred_url":"https://api.github.com/users/thisthat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thisthat/subscriptions","organizations_url":"https://api.github.com/users/thisthat/orgs","repos_url":"https://api.github.com/users/thisthat/repos","events_url":"https://api.github.com/users/thisthat/events{/privacy}","received_events_url":"https://api.github.com/users/thisthat/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-10-21T02:22:16Z","updated_at":"2020-10-23T16:00:43Z","closed_at":"2020-10-23T16:00:43Z","author_association":"MEMBER","active_lock_reason":null,"body":"Does it make sense have semantic constants somewhere for `db.system`? based on the spec table https://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/trace/semantic_conventions/database.md\r\n\r\n| Value  | Description |\r\n|---|---|\r\n| `other_sql` | Some other SQL database. Fallback only. See notes. |\r\n| `mssql` | Microsoft SQL Server |\r\n| `mysql` | MySQL |\r\n| `oracle` | Oracle Database |\r\n| `db2` | IBM Db2 |\r\n| `postgresql` | PostgreSQL |\r\n| `redshift` | Amazon Redshift |\r\n| `hive` | Apache Hive |\r\n| `cloudscape` | Cloudscape |\r\n| `hsqlsb` | HyperSQL DataBase |\r\n| `progress` | Progress Database |\r\n| `maxdb` | SAP MaxDB |\r\n| `hanadb` | SAP HANA |\r\n| `ingres` | Ingres |\r\n| `firstsql` | FirstSQL |\r\n| `edb` | EnterpriseDB |\r\n| `cache` | InterSystems Cach√© |\r\n| `adabas` | Adabas (Adaptable Database System) |\r\n| `firebird` | Firebird |\r\n| `derby` | Apache Derby |\r\n| `filemaker` | FileMaker |\r\n| `informix` | Informix |\r\n| `instantdb` | InstantDB |\r\n| `interbase` | InterBase |\r\n| `mariadb` | MariaDB |\r\n| `netezza` | Netezza |\r\n| `pervasive` | Pervasive PSQL |\r\n| `pointbase` | PointBase |\r\n| `sqlite` | SQLite |\r\n| `sybase` | Sybase |\r\n| `teradata` | Teradata |\r\n| `vertica` | Vertica |\r\n| `h2` | H2 |\r\n| `coldfusion` | ColdFusion IMQ |\r\n| `cassandra` | Apache Cassandra |\r\n| `hbase` | Apache HBase |\r\n| `mongodb` | MongoDB |\r\n| `redis` | Redis |\r\n| `couchbase` | Couchbase |\r\n| `couchdb` | CouchDB |\r\n| `cosmosdb` | Microsoft Azure Cosmos DB |\r\n| `dynamodb` | Amazon DynamoDB |\r\n| `neo4j` | Neo4j |\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/3235","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/3235/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/3235/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/3235/events","html_url":"https://github.com/apache/couchdb/issues/3235","id":733829963,"node_id":"MDU6SXNzdWU3MzM4Mjk5NjM=","number":3235,"title":"Deprecating Javascript Update functions ","user":{"login":"cefn","id":159819,"node_id":"MDQ6VXNlcjE1OTgxOQ==","avatar_url":"https://avatars2.githubusercontent.com/u/159819?v=4","gravatar_id":"","url":"https://api.github.com/users/cefn","html_url":"https://github.com/cefn","followers_url":"https://api.github.com/users/cefn/followers","following_url":"https://api.github.com/users/cefn/following{/other_user}","gists_url":"https://api.github.com/users/cefn/gists{/gist_id}","starred_url":"https://api.github.com/users/cefn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cefn/subscriptions","organizations_url":"https://api.github.com/users/cefn/orgs","repos_url":"https://api.github.com/users/cefn/repos","events_url":"https://api.github.com/users/cefn/events{/privacy}","received_events_url":"https://api.github.com/users/cefn/received_events","type":"User","site_admin":false},"labels":[{"id":594291183,"node_id":"MDU6TGFiZWw1OTQyOTExODM=","url":"https://api.github.com/repos/apache/couchdb/labels/enhancement","name":"enhancement","color":"5EBEFF","default":true,"description":null},{"id":1205319335,"node_id":"MDU6TGFiZWwxMjA1MzE5MzM1","url":"https://api.github.com/repos/apache/couchdb/labels/needs-triage","name":"needs-triage","color":"ffff33","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-31T23:53:10Z","updated_at":"2020-11-01T01:08:09Z","closed_at":"2020-11-01T00:58:33Z","author_association":"NONE","active_lock_reason":null,"body":"The 3.0 documentation [doesn't warn of javascript update functions being removed](https://docs.couchdb.org/en/latest/ddocs/ddocs.html?highlight=update%20handler#update-functions) in 4.0 (unlike many other document design functions which have the warning ).\r\n\r\nNevertheless, I'm picking up on project work which suggests javascript update functions [will be removed](https://github.com/apache/couchdb/issues/1554).\r\n\r\nI was hoping to rely on update functions in pouchdb (through plugin), couchdb and cloudant. Having them removed from the parent project means would not have the flexibility to move between DB providers without rearchitecting when they are eventually removed from maintained couchdb and cloudant versions. The couchdb and cloudant projects are where I'd be wanting to run to for hosting my data if pouchdb isn't stable or maintained.\r\n\r\nThis issue records my requirement for update functions to inform debate if it's not already settled. I don't think I'd be able to express these in the proposed mango forms I've seen discussed.\r\n\r\n## Summary\r\n\r\nI have found that the ability to transform field values into other fields on insert is fairly fundamental to my app and works around the limited expressivity of Mango and potential efficiency concerns within map/reduce. There are other places the transformation could be done, but none which is as elegant and well-managed as it is within a designdoc-managed update function. I would rather not rely on the client to maintain this consistent field-duplication and mapping before insert as it's an indexing issue.\r\n\r\n## Desired Behaviour\r\n\r\nI would like the future Query server implementation and API to retain the ability to intercept document insertion and run arbitrary javascript to transform it, as per existing support in 3.0.\r\n\r\n## Additional context\r\n\r\nIn a design I'm working on, I have been depending on the ability to run updates on incoming data in order to derive fields from source field values provided. \r\n\r\nIn this way the fields `priority` and `actionable` can be assigned and used for simple filtering and ordering later. Both fields are a mapping of existing fields, although the mapping is complex. \r\n\r\nBoth fields are intended to assist with the ordering of task data items. Priority is an integer . Actionable is a Unix epoch time in milliseconds.\r\n\r\nFrom these priority and actionable fields, several indexes can be composed via map/reduce without recalculating these values from the source fields.\r\n\r\nAs an aside, consumers will need id (for the client-side data model) and _id (for couchdb) to align, and this can be enforced here too.\r\n\r\nThis gives you a flavour...\r\n\r\n```js\r\nfunction save(storedDoc, req){\r\n  if (!req.body) {\r\n    return [null, \"No document\"]\r\n  }\r\n\r\n  var sentDoc = JSON.parse(req.body)\r\n  \r\n  //align '_id' field with 'id'\r\n  sentDoc._id = sentDoc.id\r\n\r\n  //project priority field\r\n  sentDoc[\"*priority\"] = getPriorityOrder(sentDoc)\r\n\r\n  //project actionable field\r\n  sentDoc[\"*actionable\"] = whenTaskActionable(sentDoc)\r\n\r\n  return [sentDoc, \"ok\"]\r\n}\r\n```\r\n\r\nYou can see the full implementation at https://gist.github.com/cefn/749e28f88dd5c7511dc2dd935d0381ef","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/3200","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/3200/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/3200/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/3200/events","html_url":"https://github.com/apache/couchdb/issues/3200","id":716363854,"node_id":"MDU6SXNzdWU3MTYzNjM4NTQ=","number":3200,"title":"boolean parameters incorrectly handled when POSTed to view-like requests","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars0.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","site_admin":false},"labels":[{"id":594290317,"node_id":"MDU6TGFiZWw1OTQyOTAzMTc=","url":"https://api.github.com/repos/apache/couchdb/labels/bug","name":"bug","color":"FF9F96","default":true,"description":""},{"id":1205319335,"node_id":"MDU6TGFiZWwxMjA1MzE5MzM1","url":"https://api.github.com/repos/apache/couchdb/labels/needs-triage","name":"needs-triage","color":"ffff33","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-10-07T09:33:18Z","updated_at":"2020-10-09T19:56:40Z","closed_at":"2020-10-09T19:56:40Z","author_association":"NONE","active_lock_reason":null,"body":"[NOTE]: # ( ^^ Provide a general summary of the issue in the title above. ^^ )\r\n\r\n## Description\r\n\r\nWhen using a `POST` with request body to pass parameters to a view-like request the boolean parameters are accepting only JSON strings, but not booleans. For example the `stable` parameter works with `\"true\"` and `\"false\"` but not `true` and `false`.\r\n\r\n[NOTE]: # ( Describe the problem you're encountering. )\r\n[TIP]:  # ( Do NOT give us access or passwords to your actual CouchDB! )\r\n\r\n## Steps to Reproduce\r\n\r\n`POST` to a view:\r\n\r\n`curl -H 'Content-Type: application/json' -d '{\"stable\": true}' 'https://examples.cloudant.com/animaldb/_design/views101/_view/latin_name'`\r\n```{\"error\":\"query_parse_error\",\"reason\":\"Invalid value for `stable`.\"}```\r\n\r\n`curl -H 'Content-Type: application/json' -d '{\"stable\": \"true\"}' 'https://examples.cloudant.com/animaldb/_design/views101/_view/latin_name'`\r\n`{\"total_rows\":5,\"offset\":0,\"rows\":[...`\r\n\r\nEquivalent `GET` behaviour:\r\n`curl 'https://examples.cloudant.com/animaldb/_design/views101/_view/latin_name?stable=true'`\r\n`{\"total_rows\":5,\"offset\":0,\"rows\":[...`\r\n\r\n`curl 'https://examples.cloudant.com/animaldb/_design/views101/_view/latin_name?stable=\"true\"'`\r\n```{\"error\":\"query_parse_error\",\"reason\":\"Invalid value for `stable`.\"}```\r\n\r\n[NOTE]: # ( Include commands to reproduce, if possible. curl is preferred. )\r\n\r\n## Expected Behaviour\r\n\r\n[NOTE]: # ( Tell us what you expected to happen. )\r\n\r\nExpected a `boolean` to be accepted.\r\n\r\n## Your Environment\r\n\r\n[TIP]:  # ( Include as many relevant details about your environment as possible. )\r\n[TIP]:  # ( You can paste the output of curl http://YOUR-COUCHDB:5984/ here. )\r\n\r\n* CouchDB version used:\r\n3.1.0\r\n* Browser name and version:\r\nN/A\r\n* Operating system and version:\r\nN/A\r\n\r\n## Additional Context\r\n\r\n[TIP]:  # ( Add any other context about the problem here. )\r\n\r\nI think it would be beneficial to _both_ accept the `boolean` type _and_ continue to accept strings for two reasons:\r\n1. to avoid breaking anyone who is using the already released string form\r\n1. `update` has to accept a string for `\"lazy\"` in a JSON body - so it would be useful to accept `\"true\"` and `\"false\"` there as well to avoid interaction problems with strongly typed langauges where this property would need to be a string and not a boolean (to be able to support `lazy`).\r\n\r\nThanks to @rnewson for pointing out to me that they are being treated as strings because the support for post is currently converting the query params directly and suggesting:\r\n>normally you have to write a separate function with clauses for all the params\r\n\r\nand for proposing a test addition:\r\n```erlang\r\nbody: %{\r\n        :keys => [\"_design/foo\", \"_design/foo2\"],\r\n        :update => false\r\n      }\r\n```","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb-docker/issues/191","repository_url":"https://api.github.com/repos/apache/couchdb-docker","labels_url":"https://api.github.com/repos/apache/couchdb-docker/issues/191/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb-docker/issues/191/comments","events_url":"https://api.github.com/repos/apache/couchdb-docker/issues/191/events","html_url":"https://github.com/apache/couchdb-docker/issues/191","id":703944305,"node_id":"MDU6SXNzdWU3MDM5NDQzMDU=","number":191,"title":"master -> main commit for Paul ","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars3.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","site_admin":false},"assignees":[{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars3.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-09-17T22:14:20Z","updated_at":"2020-09-18T13:35:13Z","closed_at":"2020-09-18T13:35:13Z","author_association":"MEMBER","active_lock_reason":null,"body":"47d2a972604e1d33969a244e46b68f45c0382390 is going to be tracked downstream by Docker so don't lose it. It only hit master in the last PR, not main.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/415","repository_url":"https://api.github.com/repos/cloudant/nodejs-cloudant","labels_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/415/labels{/name}","comments_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/415/comments","events_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/415/events","html_url":"https://github.com/cloudant/nodejs-cloudant/issues/415","id":570557064,"node_id":"MDU6SXNzdWU1NzA1NTcwNjQ=","number":415,"title":"deprecated dependent request lib","user":{"login":"profhun","id":6312594,"node_id":"MDQ6VXNlcjYzMTI1OTQ=","avatar_url":"https://avatars2.githubusercontent.com/u/6312594?v=4","gravatar_id":"","url":"https://api.github.com/users/profhun","html_url":"https://github.com/profhun","followers_url":"https://api.github.com/users/profhun/followers","following_url":"https://api.github.com/users/profhun/following{/other_user}","gists_url":"https://api.github.com/users/profhun/gists{/gist_id}","starred_url":"https://api.github.com/users/profhun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/profhun/subscriptions","organizations_url":"https://api.github.com/users/profhun/orgs","repos_url":"https://api.github.com/users/profhun/repos","events_url":"https://api.github.com/users/profhun/events{/privacy}","received_events_url":"https://api.github.com/users/profhun/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-02-25T13:07:32Z","updated_at":"2020-11-10T17:02:21Z","closed_at":"2020-11-10T17:02:21Z","author_association":"NONE","active_lock_reason":null,"body":"Hi Team!\r\n\r\nPlease update the request package, because my yarn write this for me when i install:\r\n```\r\n[Balazs@localhost]$ yarn add @cloudant/cloudant\r\nyarn add v1.22.0\r\n[1/4] Resolving packages...\r\nwarning @cloudant/cloudant > request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\r\n```","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/bitnami/bitnami-docker-couchdb/issues/3","repository_url":"https://api.github.com/repos/bitnami/bitnami-docker-couchdb","labels_url":"https://api.github.com/repos/bitnami/bitnami-docker-couchdb/issues/3/labels{/name}","comments_url":"https://api.github.com/repos/bitnami/bitnami-docker-couchdb/issues/3/comments","events_url":"https://api.github.com/repos/bitnami/bitnami-docker-couchdb/issues/3/events","html_url":"https://github.com/bitnami/bitnami-docker-couchdb/issues/3","id":698930047,"node_id":"MDU6SXNzdWU2OTg5MzAwNDc=","number":3,"title":"Error on document replication","user":{"login":"simone-marcon","id":70333582,"node_id":"MDQ6VXNlcjcwMzMzNTgy","avatar_url":"https://avatars0.githubusercontent.com/u/70333582?v=4","gravatar_id":"","url":"https://api.github.com/users/simone-marcon","html_url":"https://github.com/simone-marcon","followers_url":"https://api.github.com/users/simone-marcon/followers","following_url":"https://api.github.com/users/simone-marcon/following{/other_user}","gists_url":"https://api.github.com/users/simone-marcon/gists{/gist_id}","starred_url":"https://api.github.com/users/simone-marcon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simone-marcon/subscriptions","organizations_url":"https://api.github.com/users/simone-marcon/orgs","repos_url":"https://api.github.com/users/simone-marcon/repos","events_url":"https://api.github.com/users/simone-marcon/events{/privacy}","received_events_url":"https://api.github.com/users/simone-marcon/received_events","type":"User","site_admin":false},"labels":[{"id":2393665495,"node_id":"MDU6TGFiZWwyMzkzNjY1NDk1","url":"https://api.github.com/repos/bitnami/bitnami-docker-couchdb/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2020-09-11T07:02:24Z","updated_at":"2020-10-15T04:16:55Z","closed_at":"2020-10-15T04:16:55Z","author_association":"NONE","active_lock_reason":null,"body":"I have 3 CouchDb node in Azure, each one in a container instance (Linux machine).\r\nWhen creating a replication doc, it crashes after a few minute reporting info changes_reader_died.\r\n\r\nThe replication is created via curl command:\r\n\r\n```bash\r\ncurl -X POST https://my-couchdb-address/_replicator -H 'Content-Type: application/json' -d '{\r\n\"_id\": \"my-id\",\r\n\"source\": \"https://my-couchdb-address/database-name\",\r\n\"target\": \"https://my-couchdb-address/database-name\",\r\n\"create_target\": false,\r\n\"continuous\": true\r\n}'\r\n```\r\n\r\nCouchDb installed version is 2.3.1\r\n\r\nLog extract of the error reported:\r\n\r\n[couch_error.log](https://github.com/bitnami/bitnami-docker-couchdb/files/5207219/couch_error.log)\r\n[couch_debug.log](https://github.com/bitnami/bitnami-docker-couchdb/files/5207220/couch_debug.log)\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/3160","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/3160/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/3160/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/3160/events","html_url":"https://github.com/apache/couchdb/issues/3160","id":703965257,"node_id":"MDU6SXNzdWU3MDM5NjUyNTc=","number":3160,"title":"Work around statistics(run_queue) returning incorrect data","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars3.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","site_admin":false},"labels":[{"id":594290317,"node_id":"MDU6TGFiZWw1OTQyOTAzMTc=","url":"https://api.github.com/repos/apache/couchdb/labels/bug","name":"bug","color":"FF9F96","default":true,"description":""},{"id":1205319335,"node_id":"MDU6TGFiZWwxMjA1MzE5MzM1","url":"https://api.github.com/repos/apache/couchdb/labels/needs-triage","name":"needs-triage","color":"ffff33","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-09-17T23:08:10Z","updated_at":"2020-09-23T21:07:39Z","closed_at":"2020-09-23T21:07:38Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"[NOTE]: # ( ^^ Provide a general summary of the issue in the title above. ^^ )\r\n\r\n## Description\r\n\r\nIn the `/_system` endpoint, particularly in the `chttpd_node:get_stats/0` function, one of the data points returned is an integer reflecting the total sum of the length of all run queues [1]. With the introduction of dirty schedulers in Erlang, the `statistics(run_queue)` statistic now includes information about the depth of the dirty CPU and IO queues, however, the documentation indicates it should not be including those values. At least that's how it appears to me, I've filed a bug on the matter [2] and I'll keep an eye on that.\r\n\r\nIn the meantime, we can isolate the scheduler run queues from the dirty scheduler run queues, and report those values separately which will ensure we have an accurate value for `run_queue` and also allow us to introduce a new value for the dirty CPU queue.\r\n\r\nFor more context, CouchDB uses several NIFs, but none of them are dirty NIFs. However, OTP's `rsa_generate_key` function _is_ a dirty NIF [3], and will flow through the dirty NIF CPU queue. If you're using something like HAProxy for SSL termination, you won't normally encounter this, however, we can still end up making dirty NIF calls for a push replication to a remote instance over https. The end result is that the `run_queue` statistic in the `/_system` endpoint will reflect the amount of crypto work going through the dirty cpu queue and will give false positives on run_queue overload, as elevated run_queues are usually indicative of the Erlang VM having more work to handle that resources available.\r\n\r\n[NOTE]: # ( Describe the problem you're encountering. )\r\n[TIP]:  # ( Do NOT give us access or passwords to your actual CouchDB! )\r\n\r\n## Steps to Reproduce\r\n\r\n[NOTE]: # ( Include commands to reproduce, if possible. curl is preferred. )\r\n\r\nSee the bug report in [2] for more details.\r\n\r\n## Expected Behaviour\r\n\r\n[NOTE]: # ( Tell us what you expected to happen. )\r\n\r\n## Your Environment\r\n\r\n[TIP]:  # ( Include as many relevant details about your environment as possible. )\r\n[TIP]:  # ( You can paste the output of curl http://YOUR-COUCHDB:5984/ here. )\r\n\r\n* CouchDB version used:\r\n* Browser name and version:\r\n* Operating system and version:\r\n\r\n## Additional Context\r\n\r\n[TIP]:  # ( Add any other context about the problem here. )\r\n\r\n[1] https://github.com/apache/couchdb/blob/master/src/chttpd/src/chttpd_node.erl#L216\r\n[2] https://bugs.erlang.org/browse/ERL-1355\r\n[3] https://github.com/erlang/otp/blob/db6059a9217767a6e42e93cec05089c0ec977d20/lib/crypto/c_src/crypto.c#L3016-L3018\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/knative/docs/issues/2949","repository_url":"https://api.github.com/repos/knative/docs","labels_url":"https://api.github.com/repos/knative/docs/issues/2949/labels{/name}","comments_url":"https://api.github.com/repos/knative/docs/issues/2949/comments","events_url":"https://api.github.com/repos/knative/docs/issues/2949/events","html_url":"https://github.com/knative/docs/issues/2949","id":725890207,"node_id":"MDU6SXNzdWU3MjU4OTAyMDc=","number":2949,"title":"Dead links in v0.18 docs","user":{"login":"dprotaso","id":18562,"node_id":"MDQ6VXNlcjE4NTYy","avatar_url":"https://avatars2.githubusercontent.com/u/18562?v=4","gravatar_id":"","url":"https://api.github.com/users/dprotaso","html_url":"https://github.com/dprotaso","followers_url":"https://api.github.com/users/dprotaso/followers","following_url":"https://api.github.com/users/dprotaso/following{/other_user}","gists_url":"https://api.github.com/users/dprotaso/gists{/gist_id}","starred_url":"https://api.github.com/users/dprotaso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dprotaso/subscriptions","organizations_url":"https://api.github.com/users/dprotaso/orgs","repos_url":"https://api.github.com/users/dprotaso/repos","events_url":"https://api.github.com/users/dprotaso/events{/privacy}","received_events_url":"https://api.github.com/users/dprotaso/received_events","type":"User","site_admin":false},"labels":[{"id":971591923,"node_id":"MDU6TGFiZWw5NzE1OTE5MjM=","url":"https://api.github.com/repos/knative/docs/labels/kind/bug","name":"kind/bug","color":"ff0000","default":false,"description":""},{"id":1024540148,"node_id":"MDU6TGFiZWwxMDI0NTQwMTQ4","url":"https://api.github.com/repos/knative/docs/labels/priority/0","name":"priority/0","color":"c4dafc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"abrennan89","id":40172997,"node_id":"MDQ6VXNlcjQwMTcyOTk3","avatar_url":"https://avatars2.githubusercontent.com/u/40172997?v=4","gravatar_id":"","url":"https://api.github.com/users/abrennan89","html_url":"https://github.com/abrennan89","followers_url":"https://api.github.com/users/abrennan89/followers","following_url":"https://api.github.com/users/abrennan89/following{/other_user}","gists_url":"https://api.github.com/users/abrennan89/gists{/gist_id}","starred_url":"https://api.github.com/users/abrennan89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abrennan89/subscriptions","organizations_url":"https://api.github.com/users/abrennan89/orgs","repos_url":"https://api.github.com/users/abrennan89/repos","events_url":"https://api.github.com/users/abrennan89/events{/privacy}","received_events_url":"https://api.github.com/users/abrennan89/received_events","type":"User","site_admin":false},"assignees":[{"login":"abrennan89","id":40172997,"node_id":"MDQ6VXNlcjQwMTcyOTk3","avatar_url":"https://avatars2.githubusercontent.com/u/40172997?v=4","gravatar_id":"","url":"https://api.github.com/users/abrennan89","html_url":"https://github.com/abrennan89","followers_url":"https://api.github.com/users/abrennan89/followers","following_url":"https://api.github.com/users/abrennan89/following{/other_user}","gists_url":"https://api.github.com/users/abrennan89/gists{/gist_id}","starred_url":"https://api.github.com/users/abrennan89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abrennan89/subscriptions","organizations_url":"https://api.github.com/users/abrennan89/orgs","repos_url":"https://api.github.com/users/abrennan89/repos","events_url":"https://api.github.com/users/abrennan89/events{/privacy}","received_events_url":"https://api.github.com/users/abrennan89/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/knative/docs/milestones/14","html_url":"https://github.com/knative/docs/milestone/14","labels_url":"https://api.github.com/repos/knative/docs/milestones/14/labels","id":5939833,"node_id":"MDk6TWlsZXN0b25lNTkzOTgzMw==","number":14,"title":" v0.19.0","description":"Documentation targeted issues and feature requests for Knative v0.19.0.\r\n","creator":{"login":"abrennan89","id":40172997,"node_id":"MDQ6VXNlcjQwMTcyOTk3","avatar_url":"https://avatars2.githubusercontent.com/u/40172997?v=4","gravatar_id":"","url":"https://api.github.com/users/abrennan89","html_url":"https://github.com/abrennan89","followers_url":"https://api.github.com/users/abrennan89/followers","following_url":"https://api.github.com/users/abrennan89/following{/other_user}","gists_url":"https://api.github.com/users/abrennan89/gists{/gist_id}","starred_url":"https://api.github.com/users/abrennan89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abrennan89/subscriptions","organizations_url":"https://api.github.com/users/abrennan89/orgs","repos_url":"https://api.github.com/users/abrennan89/repos","events_url":"https://api.github.com/users/abrennan89/events{/privacy}","received_events_url":"https://api.github.com/users/abrennan89/received_events","type":"User","site_admin":false},"open_issues":5,"closed_issues":34,"state":"open","created_at":"2020-10-01T18:20:18Z","updated_at":"2020-11-07T02:52:08Z","due_on":"2020-11-10T08:00:00Z","closed_at":null},"comments":4,"created_at":"2020-10-20T19:42:13Z","updated_at":"2020-11-04T16:29:05Z","closed_at":"2020-11-04T16:29:05Z","author_association":"MEMBER","active_lock_reason":null,"body":"From: https://knative.slack.com/archives/C93E33SN8/p1603222516244600\r\n\r\n> I'm trying to upgrade my cluster to 0.18.0 and it looks like the help page points to a couple of bad URLs:\r\nSource page:\r\nhttps://knative.dev/docs/install/any-kubernetes-cluster/\r\nDead Links:\r\nhttps://github.com/knative/eventing-contrib/blob/v0.18.0/natss/config/broker/README.md\r\nkubectl apply --filename https://github.com/knative/eventing-contrib/releases/download/v0.18.0/natss-channel.yaml (edited) ","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/1626","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/1626/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/1626/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/1626/events","html_url":"https://github.com/apache/couchdb/issues/1626","id":364026641,"node_id":"MDU6SXNzdWUzNjQwMjY2NDE=","number":1626,"title":"Couchdb build issue with SLES 15","user":{"login":"srajmane","id":31947381,"node_id":"MDQ6VXNlcjMxOTQ3Mzgx","avatar_url":"https://avatars3.githubusercontent.com/u/31947381?v=4","gravatar_id":"","url":"https://api.github.com/users/srajmane","html_url":"https://github.com/srajmane","followers_url":"https://api.github.com/users/srajmane/followers","following_url":"https://api.github.com/users/srajmane/following{/other_user}","gists_url":"https://api.github.com/users/srajmane/gists{/gist_id}","starred_url":"https://api.github.com/users/srajmane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srajmane/subscriptions","organizations_url":"https://api.github.com/users/srajmane/orgs","repos_url":"https://api.github.com/users/srajmane/repos","events_url":"https://api.github.com/users/srajmane/events{/privacy}","received_events_url":"https://api.github.com/users/srajmane/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-09-26T13:20:41Z","updated_at":"2020-10-24T07:24:59Z","closed_at":"2018-09-26T15:49:52Z","author_association":"NONE","active_lock_reason":null,"body":"\r\n## Context\r\nTrying to build Couchdb v2.2.0 from source on SLES 15.\r\nOne of the dependency to build couchdb is libmozjs185 which is not found on SLES 15. So tried to build it from source using steps with **GCC version 7.3.1** : \r\n\r\n> wget http://ftp.mozilla.org/pub/mozilla.org/js/js185-1.0.0.tar.gz\r\n> tar zxf js185-1.0.0.tar.gz \r\n> cd js-1.8.5/js/src\r\n> autoconf2.13\r\n> mkdir -p build_OPT.OBJ\r\n> cd build_OPT.OBJ\r\n> ../configure --prefix=/usr\r\n>  make\r\n\r\nHowever, make is failing with\r\n\r\n> ../jsapi.cpp: In function 'JSIdArray* JS_Enumerate(JSContext*, JSObject*)':\r\n> ../jsapi.cpp:3988:16: error: cannot convert 'bool' to 'JSIdArray*' in return\r\n>          return false;\r\n>                 ^~~~~\r\n> ../config/rules.mk:1475: recipe for target 'jsapi.o' failed\r\n\r\nAny suggestions on how to resolve the failure? \r\n## Your Environment\r\n\r\n* Version used: 2.2.0\r\n* Operating System and version (desktop or mobile): SLES 15\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/3074","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/3074/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/3074/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/3074/events","html_url":"https://github.com/apache/couchdb/issues/3074","id":677978851,"node_id":"MDU6SXNzdWU2Nzc5Nzg4NTE=","number":3074,"title":"require_valid_user blocks OPTIONS request against _session","user":{"login":"AyanamiSan","id":6035017,"node_id":"MDQ6VXNlcjYwMzUwMTc=","avatar_url":"https://avatars0.githubusercontent.com/u/6035017?v=4","gravatar_id":"","url":"https://api.github.com/users/AyanamiSan","html_url":"https://github.com/AyanamiSan","followers_url":"https://api.github.com/users/AyanamiSan/followers","following_url":"https://api.github.com/users/AyanamiSan/following{/other_user}","gists_url":"https://api.github.com/users/AyanamiSan/gists{/gist_id}","starred_url":"https://api.github.com/users/AyanamiSan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AyanamiSan/subscriptions","organizations_url":"https://api.github.com/users/AyanamiSan/orgs","repos_url":"https://api.github.com/users/AyanamiSan/repos","events_url":"https://api.github.com/users/AyanamiSan/events{/privacy}","received_events_url":"https://api.github.com/users/AyanamiSan/received_events","type":"User","site_admin":false},"labels":[{"id":594290317,"node_id":"MDU6TGFiZWw1OTQyOTAzMTc=","url":"https://api.github.com/repos/apache/couchdb/labels/bug","name":"bug","color":"FF9F96","default":true,"description":""},{"id":1100157517,"node_id":"MDU6TGFiZWwxMTAwMTU3NTE3","url":"https://api.github.com/repos/apache/couchdb/labels/patches-welcome","name":"patches-welcome","color":"04e0bf","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-08-12T21:06:32Z","updated_at":"2020-08-15T19:40:58Z","closed_at":"2020-08-15T19:40:58Z","author_association":"NONE","active_lock_reason":null,"body":"[NOTE]: # ( ^^ Provide a general summary of the issue in the title above. ^^ )\r\n\r\n## Description\r\nCouchDB set up with cookie auth and require_valid_user blocks login attempts from the browser in a cross-domain setting, due to OPTIONS request to _session being blocked.\r\n\r\n## Steps to Reproduce\r\n\r\nenable require_valid_user and cookie authentication\r\n```\r\n$ curl -i -XOPTIONS -H'Content-Type: application/json' -d'{\"name\":\"a\",\"password\":\"a\"}' 10.7.7.31:5984/_session\r\nHTTP/1.1 401 Unauthorized\r\nCache-Control: must-revalidate\r\nConnection: close\r\nContent-Length: 61\r\nContent-Type: application/json\r\nDate: Wed, 12 Aug 2020 20:24:09 GMT\r\nServer: CouchDB/3.1.0 (Erlang OTP/22)\r\nX-Couch-Request-ID: 0354a136fc\r\nX-CouchDB-Body-Time: 0\r\nX-Frame-Options: DENY\r\n```\r\n\r\n## Expected Behaviour\r\n\r\nOPTIONS header returns status 200 with correct CORS headers as set in the configuration.\r\n\r\n## Your Environment\r\n\r\nEntire dev setup is inside VPN, CouchDB runs in FreeBSD jail and is accessed from the javascript web app (PouchDB-based) running from another jail. Also, direct access to the _utils.\r\n\r\nNOTE: I have www authentication enabled, but without WWW-Authenticate, since I don't want the popup to show up - basic auth is used only for curl requests and for access from the backend server running on another node. This should be unrelated, and the database behaves correctly when accessing _session endpoint with CORS disabled in the browser.\r\n\r\nCORS settings from local.ini:\r\n```\r\n[cors]\r\norigins = http://10.0.1.1,http://10.0.1.1:8080\r\ncredentials = true\r\nheaders = accept, authorization, content-type, origin, referer\r\nmethods = GET, PUT, POST, HEAD, OPTIONS, DELETE\r\nmax_age = 3600\r\n```\r\n\r\n```\r\n$ curl admin:<password>@10.0.1.2:5984/\r\n{\"couchdb\":\"Welcome\",\"version\":\"3.1.0\",\"git_sha\":\"ff0feea20\",\"uuid\":\"...\",\"features\":[\"access-ready\",\"partitioned\",\"pluggable-storage-engines\",\"reshard\",\"scheduler\"],\"vendor\":{\"name\":\"FreeBSD\"}}\r\n```\r\n\r\n* CouchDB version used: couchdb3-3.1.0_1 (built from FreeBSD ports)\r\n* Browser name and version: all modern browsers\r\n* Operating system and version: any (client), FreeBSD 11.3 (server)\r\n\r\n## Additional Context\r\nRelated to:\r\nhttps://github.com/apache/couchdb/issues/1947 \r\nhttps://github.com/apache/couchdb/pull/2321\r\n\r\nPS. If you don't have time to fix the issue I can try to fix this myself and create a pull request, but I only know the very basics of erlang.\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/3063","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/3063/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/3063/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/3063/events","html_url":"https://github.com/apache/couchdb/issues/3063","id":674295862,"node_id":"MDU6SXNzdWU2NzQyOTU4NjI=","number":3063,"title":"_bulk_get with latest=true option is slow","user":{"login":"craftzdog","id":1332805,"node_id":"MDQ6VXNlcjEzMzI4MDU=","avatar_url":"https://avatars3.githubusercontent.com/u/1332805?v=4","gravatar_id":"","url":"https://api.github.com/users/craftzdog","html_url":"https://github.com/craftzdog","followers_url":"https://api.github.com/users/craftzdog/followers","following_url":"https://api.github.com/users/craftzdog/following{/other_user}","gists_url":"https://api.github.com/users/craftzdog/gists{/gist_id}","starred_url":"https://api.github.com/users/craftzdog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/craftzdog/subscriptions","organizations_url":"https://api.github.com/users/craftzdog/orgs","repos_url":"https://api.github.com/users/craftzdog/repos","events_url":"https://api.github.com/users/craftzdog/events{/privacy}","received_events_url":"https://api.github.com/users/craftzdog/received_events","type":"User","site_admin":false},"labels":[{"id":594291183,"node_id":"MDU6TGFiZWw1OTQyOTExODM=","url":"https://api.github.com/repos/apache/couchdb/labels/enhancement","name":"enhancement","color":"5EBEFF","default":true,"description":null},{"id":1205319335,"node_id":"MDU6TGFiZWwxMjA1MzE5MzM1","url":"https://api.github.com/repos/apache/couchdb/labels/needs-triage","name":"needs-triage","color":"ffff33","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-06T13:01:36Z","updated_at":"2020-08-07T07:58:16Z","closed_at":"2020-08-07T07:58:16Z","author_association":"NONE","active_lock_reason":null,"body":"Hello.\r\nI'm using CouchDB 3.1.0 on Ubuntu and building an app that replicates user data using PouchDB.\r\nThe replication protocol uses [_bulk_get API with `latest=true`](https://github.com/pouchdb/pouchdb/issues/5857).\r\nI found that this API responds 3x slower than without that option specified when I call it with 100 doc IDs on my server.\r\nI understand PouchDB needs this option to replicate data in order to make sure that docs are always latest.\r\nIf I dropped this option, PouchDB seems to randomly crash because it gets an error response from CouchDB when the doc or its revision is not found.\r\nWould it be possible to improve the `latest` behavior?\r\n\r\n## Summary\r\n\r\nImprove `latest` option performance\r\n\r\n## Possible Solution\r\n\r\nI found that it checks revision tree when `latest` is specified here: https://github.com/apache/couchdb/blob/3fc054d86f0844bdf851e402b05df5db08b1c230/src/fabric/src/fabric_doc_open_revs.erl#L94\r\nBut I don't know if there is room to improve it.\r\n\r\nThanks in advance!","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/3084","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/3084/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/3084/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/3084/events","html_url":"https://github.com/apache/couchdb/issues/3084","id":681095523,"node_id":"MDU6SXNzdWU2ODEwOTU1MjM=","number":3084,"title":"Non-Admin users are unable to read their own user doc in 3.1.0","user":{"login":"m90","id":1662740,"node_id":"MDQ6VXNlcjE2NjI3NDA=","avatar_url":"https://avatars3.githubusercontent.com/u/1662740?v=4","gravatar_id":"","url":"https://api.github.com/users/m90","html_url":"https://github.com/m90","followers_url":"https://api.github.com/users/m90/followers","following_url":"https://api.github.com/users/m90/following{/other_user}","gists_url":"https://api.github.com/users/m90/gists{/gist_id}","starred_url":"https://api.github.com/users/m90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m90/subscriptions","organizations_url":"https://api.github.com/users/m90/orgs","repos_url":"https://api.github.com/users/m90/repos","events_url":"https://api.github.com/users/m90/events{/privacy}","received_events_url":"https://api.github.com/users/m90/received_events","type":"User","site_admin":false},"labels":[{"id":594290317,"node_id":"MDU6TGFiZWw1OTQyOTAzMTc=","url":"https://api.github.com/repos/apache/couchdb/labels/bug","name":"bug","color":"FF9F96","default":true,"description":""},{"id":1205319335,"node_id":"MDU6TGFiZWwxMjA1MzE5MzM1","url":"https://api.github.com/repos/apache/couchdb/labels/needs-triage","name":"needs-triage","color":"ffff33","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-08-18T14:37:53Z","updated_at":"2020-08-18T15:24:59Z","closed_at":"2020-08-18T15:24:58Z","author_association":"NONE","active_lock_reason":null,"body":"[NOTE]: # ( ^^ Provide a general summary of the issue in the title above. ^^ )\r\n\r\n## Description\r\n\r\nAs per https://docs.couchdb.org/en/stable/intro/security.html#users-documents and https://github.com/apache/couchdb/issues/1556#issuecomment-412817741 I would expect a non-admin user to be able to GET their own user doc. However, when I try to do this on a one-off CouchDB 3.1.0 it does not work that way unless I modify the `_security` doc of the `_users` db to be empty (which is probably not what I want to do).\r\n\r\nMore specifically, this behavior currently prevents us from upgrading a set of tests that worked in 2.3.1, but are now breaking in 3.1.0.\r\n\r\n[NOTE]: # ( Describe the problem you're encountering. )\r\n[TIP]:  # ( Do NOT give us access or passwords to your actual CouchDB! )\r\n\r\n## Steps to Reproduce\r\n\r\n[NOTE]: # ( Include commands to reproduce, if possible. curl is preferred. )\r\n\r\nThis can be reproduced by creating a new user doc, a session for that user and then trying to read the user doc on a one-off 3.1.0 Docker container:\r\n\r\n```\r\n‚ûú  ~ docker run -p 5984:5984 -e COUCHDB_USER=admin -e COUCHDB_PASSWORD=admin -d couchdb:3.1.0\r\na51152ea5dfbb5d8f96a72bbdbc0e9d9f95d6d5ba0ba3fe8c0f6f6486875bbc0\r\n‚ûú  ~ curl -X PUT http://admin:admin@localhost:5984/_users\r\n{\"ok\":true}\r\n‚ûú  ~ curl -X PUT http://admin:admin@localhost:5984/_replicator\r\n{\"ok\":true}\r\n‚ûú  ~ curl -X POST -H 'Content-Type: application/json' -d '{\"name\":\"test\",\"password\":\"test\",\"type\":\"user\",\"roles\":[\"test\"],\"_id\":\"org.couchdb.user:test\"}' http://admin:admin@localhost:5984/_users\r\n{\"ok\":true,\"id\":\"org.couchdb.user:test\",\"rev\":\"1-e5d96edaaa2e4ba876a0bdf60444f603\"}\r\n‚ûú  ~ curl -i -X POST -H 'Content-Type: application/json' -d '{\"name\":\"test\",\"password\":\"test\"}' http://localhost:5984/_session                                                                    \r\nHTTP/1.1 200 OK\r\nCache-Control: must-revalidate\r\nContent-Length: 43\r\nContent-Type: application/json\r\nDate: Tue, 18 Aug 2020 14:30:54 GMT\r\nServer: CouchDB/3.1.0 (Erlang OTP/20)\r\nSet-Cookie: AuthSession=dGVzdDo1RjNCRTYxRTr0TOgq9qRqg5NQDqH_sby0efn3Rw; Version=1; Expires=Tue, 18-Aug-2020 14:40:54 GMT; Max-Age=600; Path=/; HttpOnly\r\n\r\n{\"ok\":true,\"name\":\"test\",\"roles\":[\"test\"]}\r\n‚ûú  ~ curl -H 'Cookie: AuthSession=dGVzdDo1RjNCRTYxRTr0TOgq9qRqg5NQDqH_sby0efn3Rw' http://localhost:5984/_users/org.couchdb.user:test\r\n{\"error\":\"forbidden\",\"reason\":\"You are not allowed to access this db.\"}\r\n```\r\n## Expected Behaviour\r\n\r\n[NOTE]: # ( Tell us what you expected to happen. )\r\n\r\nI would expect this work just like when I use admin credentials:\r\n\r\n```\r\n‚ûú  ~ curl -i -X POST -H 'Content-Type: application/json' -d '{\"name\":\"admin\",\"password\":\"admin\"}' http://localhost:5984/_session\r\nHTTP/1.1 200 OK\r\nCache-Control: must-revalidate\r\nContent-Length: 46\r\nContent-Type: application/json\r\nDate: Tue, 18 Aug 2020 14:31:29 GMT\r\nServer: CouchDB/3.1.0 (Erlang OTP/20)\r\nSet-Cookie: AuthSession=YWRtaW46NUYzQkU2NDI6FskvoWjZP6jrAyxVn80GzaK7RdY; Version=1; Expires=Tue, 18-Aug-2020 14:41:30 GMT; Max-Age=600; Path=/; HttpOnly\r\n\r\n{\"ok\":true,\"name\":\"admin\",\"roles\":[\"_admin\"]}\r\n‚ûú  ~ curl -H 'Cookie: AuthSession=YWRtaW46NUYzQkU2NDI6FskvoWjZP6jrAyxVn80GzaK7RdY' http://localhost:5984/_users/org.couchdb.user:test\r\n{\"_id\":\"org.couchdb.user:test\",\"_rev\":\"1-e5d96edaaa2e4ba876a0bdf60444f603\",\"name\":\"test\",\"type\":\"user\",\"roles\":[\"test\"],\"password_scheme\":\"pbkdf2\",\"iterations\":10,\"derived_key\":\"7457722cc6e0715012e97ec0aae7d8b91698ce7f\",\"salt\":\"547a57d1693cfd6a84703ddfcf10a31c\"}\r\n```\r\n\r\n## Your Environment\r\n\r\n[TIP]:  # ( Include as many relevant details about your environment as possible. )\r\n[TIP]:  # ( You can paste the output of curl http://YOUR-COUCHDB:5984/ here. )\r\n\r\n* CouchDB version used: 3.1.0\r\n* Browser name and version: n/a\r\n* Operating system and version: Ubuntu 18 / Docker 19.03.12","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/108","repository_url":"https://api.github.com/repos/cloudant/nodejs-cloudant","labels_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/108/labels{/name}","comments_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/108/comments","events_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/108/events","html_url":"https://github.com/cloudant/nodejs-cloudant/issues/108","id":114331821,"node_id":"MDU6SXNzdWUxMTQzMzE4MjE=","number":108,"title":"View search with a long query string fails","user":{"login":"jlpadilla","id":4671325,"node_id":"MDQ6VXNlcjQ2NzEzMjU=","avatar_url":"https://avatars3.githubusercontent.com/u/4671325?v=4","gravatar_id":"","url":"https://api.github.com/users/jlpadilla","html_url":"https://github.com/jlpadilla","followers_url":"https://api.github.com/users/jlpadilla/followers","following_url":"https://api.github.com/users/jlpadilla/following{/other_user}","gists_url":"https://api.github.com/users/jlpadilla/gists{/gist_id}","starred_url":"https://api.github.com/users/jlpadilla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlpadilla/subscriptions","organizations_url":"https://api.github.com/users/jlpadilla/orgs","repos_url":"https://api.github.com/users/jlpadilla/repos","events_url":"https://api.github.com/users/jlpadilla/events{/privacy}","received_events_url":"https://api.github.com/users/jlpadilla/received_events","type":"User","site_admin":false},"labels":[{"id":222218439,"node_id":"MDU6TGFiZWwyMjIyMTg0Mzk=","url":"https://api.github.com/repos/cloudant/nodejs-cloudant/labels/Agenda","name":"Agenda","color":"5319e7","default":false,"description":null},{"id":697971589,"node_id":"MDU6TGFiZWw2OTc5NzE1ODk=","url":"https://api.github.com/repos/cloudant/nodejs-cloudant/labels/nano","name":"nano","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2015-10-30T18:49:45Z","updated_at":"2020-11-10T11:45:42Z","closed_at":"2020-11-10T10:35:32Z","author_association":"NONE","active_lock_reason":null,"body":"We are seeing a problem when we do a view search with a query parameter that is too long (about 3.5K chars).  I debugged the problem and I found that nano.js is issuing a GET request, which can be problematic with long queries.  To avoid this problem, the Cloudant documentation recommends using a POST request with the query parameters in the body.  Now, the problem is that I can't find any way to do this view search via a POST using cloudant.js (or nano.js).  I found that nano.js uses a POST when filtering by keys, but it still passes the query in the url instead of the body, so that can't be used to work around the problem.  The other alternative I found was to use nano's generic view() function, but this API isn't exposed.  I got it to work with a few hacks in nano.js, but can't find any possible way without modifying the libraries.\n\nI feel this is a bug, unless I'm missing any other way to force the view search to use a POST with the query string in the body.\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb-nano/issues/228","repository_url":"https://api.github.com/repos/apache/couchdb-nano","labels_url":"https://api.github.com/repos/apache/couchdb-nano/issues/228/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb-nano/issues/228/comments","events_url":"https://api.github.com/repos/apache/couchdb-nano/issues/228/events","html_url":"https://github.com/apache/couchdb-nano/issues/228","id":665707456,"node_id":"MDU6SXNzdWU2NjU3MDc0NTY=","number":228,"title":"Can I create a couchdb database with shard param?","user":{"login":"hamedminaee","id":52859974,"node_id":"MDQ6VXNlcjUyODU5OTc0","avatar_url":"https://avatars2.githubusercontent.com/u/52859974?v=4","gravatar_id":"","url":"https://api.github.com/users/hamedminaee","html_url":"https://github.com/hamedminaee","followers_url":"https://api.github.com/users/hamedminaee/followers","following_url":"https://api.github.com/users/hamedminaee/following{/other_user}","gists_url":"https://api.github.com/users/hamedminaee/gists{/gist_id}","starred_url":"https://api.github.com/users/hamedminaee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hamedminaee/subscriptions","organizations_url":"https://api.github.com/users/hamedminaee/orgs","repos_url":"https://api.github.com/users/hamedminaee/repos","events_url":"https://api.github.com/users/hamedminaee/events{/privacy}","received_events_url":"https://api.github.com/users/hamedminaee/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-07-26T04:39:32Z","updated_at":"2020-09-15T16:27:22Z","closed_at":"2020-09-15T16:27:22Z","author_association":"NONE","active_lock_reason":null,"body":"If I want to create a couch db with curl setting a shard number I need I do it this way:\r\n\r\ncurl -X PUT http://test:test@127.0.0.1:5984/test-1?q=20\r\n\r\n\r\nHowever when I create a db using nano I do not know how to pass q=20. Is it possible to do so in Nano?","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb-documentation/issues/579","repository_url":"https://api.github.com/repos/apache/couchdb-documentation","labels_url":"https://api.github.com/repos/apache/couchdb-documentation/issues/579/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb-documentation/issues/579/comments","events_url":"https://api.github.com/repos/apache/couchdb-documentation/issues/579/events","html_url":"https://github.com/apache/couchdb-documentation/issues/579","id":668442835,"node_id":"MDU6SXNzdWU2Njg0NDI4MzU=","number":579,"title":"error in string sorting","user":{"login":"hereisok","id":16496811,"node_id":"MDQ6VXNlcjE2NDk2ODEx","avatar_url":"https://avatars0.githubusercontent.com/u/16496811?v=4","gravatar_id":"","url":"https://api.github.com/users/hereisok","html_url":"https://github.com/hereisok","followers_url":"https://api.github.com/users/hereisok/followers","following_url":"https://api.github.com/users/hereisok/following{/other_user}","gists_url":"https://api.github.com/users/hereisok/gists{/gist_id}","starred_url":"https://api.github.com/users/hereisok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hereisok/subscriptions","organizations_url":"https://api.github.com/users/hereisok/orgs","repos_url":"https://api.github.com/users/hereisok/repos","events_url":"https://api.github.com/users/hereisok/events{/privacy}","received_events_url":"https://api.github.com/users/hereisok/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-07-30T07:24:40Z","updated_at":"2020-07-30T07:31:42Z","closed_at":"2020-07-30T07:31:20Z","author_association":"NONE","active_lock_reason":null,"body":"hi, The couchdb version I use is 3.1.0.\r\n\r\nBelow is my document in the database,\r\n\r\n|_id|group_id|msg_id|\r\n | -- | -- | --\r\nH-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | H | ¬†\r\n| h-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | h | ¬†\r\n| b-lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | b | ¬†\r\n| A-lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | A | ¬†\r\n | a-lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | a | ¬†\r\n | 7ewRhpLu5-567jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | 7ewRhpLu5 | ¬†\r\n| 7ewRHPJZN-567jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | lEJXOvV-jqPgaMjkaqpmZsyX97_uMOtD3rsYPcABjz8= | 7ewRHPJZN\r\n\r\nI created an index: \r\n```json\r\n{\r\n        \"index\": {\r\n            \"fields\": [\"group_id\", \"msg_id\"]\r\n        },\r\n        \"name\": \"msg-id-index\",\r\n        \"type\": \"json\",\r\n        \"ddoc\": \"_design/index_msg-id-index\"\r\n}\r\n```\r\nThen sort query based on msg_id. Below is the result of my query.\r\n\r\n![image](https://user-images.githubusercontent.com/16496811/88892672-c1a55300-d277-11ea-8def-d79cb0bf5cb9.png)\r\n\r\n\r\nAccording to couchdb's [documentation,](https://docs.couchdb.org/en/stable/ddocs/views/collation.html#collation-specification) I know that the order of \"H\" is higher than \"h\", but why is the order of \"7ewRhpLu5\" higher than \"7ewRHPJZN\"?\r\n\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/3067","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/3067/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/3067/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/3067/events","html_url":"https://github.com/apache/couchdb/issues/3067","id":675469575,"node_id":"MDU6SXNzdWU2NzU0Njk1NzU=","number":3067,"title":"I have used Edge browser now to download the file again, still no luck!","user":{"login":"samahudin","id":49563144,"node_id":"MDQ6VXNlcjQ5NTYzMTQ0","avatar_url":"https://avatars1.githubusercontent.com/u/49563144?v=4","gravatar_id":"","url":"https://api.github.com/users/samahudin","html_url":"https://github.com/samahudin","followers_url":"https://api.github.com/users/samahudin/followers","following_url":"https://api.github.com/users/samahudin/following{/other_user}","gists_url":"https://api.github.com/users/samahudin/gists{/gist_id}","starred_url":"https://api.github.com/users/samahudin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samahudin/subscriptions","organizations_url":"https://api.github.com/users/samahudin/orgs","repos_url":"https://api.github.com/users/samahudin/repos","events_url":"https://api.github.com/users/samahudin/events{/privacy}","received_events_url":"https://api.github.com/users/samahudin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-08T07:02:25Z","updated_at":"2020-08-08T07:26:35Z","closed_at":"2020-08-08T07:23:22Z","author_association":"NONE","active_lock_reason":"spam","body":"I have used Edge browser now to download the file again, still no luck! \r\nAlso tried to get it by installing wget, but it is complaining \"Unable to establish SSL connection\".\r\n\r\nBelow are my observations, if anything leads to a conclusion : \r\n*I have tried with packages downloaded using chrome, FF, edge without success (6 times, I think).\r\n*Chrome and Edge showed a safety warning on the file.\r\n*Checksum of all these files are different than that you provided.\r\n*I have successfully installed v.2.3.1 without any glitch, so I cannot suspect browsers.\r\n\r\nThanks @wohali for you time on this!\r\n\r\n_Originally posted by @samahudin in https://github.com/apache/couchdb/issues/3066#issuecomment-670832929_","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/428","repository_url":"https://api.github.com/repos/cloudant/nodejs-cloudant","labels_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/428/labels{/name}","comments_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/428/comments","events_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/issues/428/events","html_url":"https://github.com/cloudant/nodejs-cloudant/issues/428","id":673725708,"node_id":"MDU6SXNzdWU2NzM3MjU3MDg=","number":428,"title":"Bad types for MangoSelector interface","user":{"login":"Heydan83","id":37992698,"node_id":"MDQ6VXNlcjM3OTkyNjk4","avatar_url":"https://avatars0.githubusercontent.com/u/37992698?v=4","gravatar_id":"","url":"https://api.github.com/users/Heydan83","html_url":"https://github.com/Heydan83","followers_url":"https://api.github.com/users/Heydan83/followers","following_url":"https://api.github.com/users/Heydan83/following{/other_user}","gists_url":"https://api.github.com/users/Heydan83/gists{/gist_id}","starred_url":"https://api.github.com/users/Heydan83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Heydan83/subscriptions","organizations_url":"https://api.github.com/users/Heydan83/orgs","repos_url":"https://api.github.com/users/Heydan83/repos","events_url":"https://api.github.com/users/Heydan83/events{/privacy}","received_events_url":"https://api.github.com/users/Heydan83/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/cloudant/nodejs-cloudant/milestones/31","html_url":"https://github.com/cloudant/nodejs-cloudant/milestone/31","labels_url":"https://api.github.com/repos/cloudant/nodejs-cloudant/milestones/31/labels","id":5157617,"node_id":"MDk6TWlsZXN0b25lNTE1NzYxNw==","number":31,"title":"4.3.0","description":"","creator":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars0.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":8,"state":"closed","created_at":"2020-03-02T12:01:08Z","updated_at":"2020-08-17T15:29:13Z","due_on":null,"closed_at":"2020-08-17T15:29:13Z"},"comments":7,"created_at":"2020-08-05T17:38:41Z","updated_at":"2020-08-14T14:07:56Z","closed_at":"2020-08-14T14:07:56Z","author_association":"NONE","active_lock_reason":null,"body":"Please [read these guidelines](http://ibm.biz/cdt-issue-guide) before opening an issue.\r\n\r\n<!-- Issues will be CLOSED IMMEDIATELY if the following template is not completed. -->\r\n\r\n## Bug Description\r\nBad types for MangoSelector interface. Unable to write proper interface which is allowed by CouchDB and MongoDb references.\r\nhttp://docs.couchdb.org/en/latest/api/database/find.html#selector-syntax\r\nhttps://docs.mongodb.com/manual/reference/operator/query/\r\n\r\n### 1. Steps to reproduce and the simplest code sample possible to demonstrate the issue\r\nOnce you have your instance for cloudant and then point to the database, in this example we are using a database called 'reservations', when we use the method 'find' it receives and object and one of those properties is selector, which receives the mangoquery to execute, there is where we cannot use reserved words from mango like $and, $eq, $lte, it throws an error when specifying them:\r\n![image](https://user-images.githubusercontent.com/37992698/89443429-e1c09080-d715-11ea-8208-88f47f7dee6c.png) \r\n\r\n### 2. What you expected to happen\r\nUser should be able to use those operators without receiving an error message from them. I found that this is issue was reported and corrected directly on the Nano library, this is the reported issue: \r\nhttps://github.com/apache/couchdb-nano/issues/202\r\nSo if Im not wrong it would be just a matter of updating the Nano dependency on the Cloudant project in order to resolved it, right now Im applying the changes described on that issue manually in order to let me run the queries and it works.\r\nOn the nano.d.ts file we need to change the declaration of the MangoSelector interface for this:\r\n\r\nOld code:\r\n  interface MangoSelector {\r\n    [key: string]: MangoSelector | MangoValue | MangoValue[];\r\n  }\r\n\r\nNew code:\r\n  type MangoOperator = '$regex' | '$eq' | '$gt' | '$gte' | '$lt' | '$lte' | '$ne' | '$and' | '$or' | '$not' | '$nor' | '$all' | '$elemMatch' | '$allMatch' | '$in'\r\n\r\n  interface MangoSelector {\r\n    [K in MangoOperator | string]: MangoSelector | MangoValue | MangoValue[];\r\n  }\r\n\r\n### 3. What actually happened\r\nUser receives the next error message when using the operators:\r\n![image](https://user-images.githubusercontent.com/37992698/89443593-1b919700-d716-11ea-966f-e5780f40ef52.png)\r\n\r\n## Environment details\r\n- Node.js version\r\n    > 12.18.2\r\n- @cloudant/cloudant version\r\n    > 4.2.4\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/donnemartin/system-design-primer/issues/397","repository_url":"https://api.github.com/repos/donnemartin/system-design-primer","labels_url":"https://api.github.com/repos/donnemartin/system-design-primer/issues/397/labels{/name}","comments_url":"https://api.github.com/repos/donnemartin/system-design-primer/issues/397/comments","events_url":"https://api.github.com/repos/donnemartin/system-design-primer/issues/397/events","html_url":"https://github.com/donnemartin/system-design-primer/issues/397","id":596387508,"node_id":"MDU6SXNzdWU1OTYzODc1MDg=","number":397,"title":"Replace \"master\" and \"slave\" terms","user":{"login":"ianbrayoni","id":22889335,"node_id":"MDQ6VXNlcjIyODg5MzM1","avatar_url":"https://avatars2.githubusercontent.com/u/22889335?v=4","gravatar_id":"","url":"https://api.github.com/users/ianbrayoni","html_url":"https://github.com/ianbrayoni","followers_url":"https://api.github.com/users/ianbrayoni/followers","following_url":"https://api.github.com/users/ianbrayoni/following{/other_user}","gists_url":"https://api.github.com/users/ianbrayoni/gists{/gist_id}","starred_url":"https://api.github.com/users/ianbrayoni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ianbrayoni/subscriptions","organizations_url":"https://api.github.com/users/ianbrayoni/orgs","repos_url":"https://api.github.com/users/ianbrayoni/repos","events_url":"https://api.github.com/users/ianbrayoni/events{/privacy}","received_events_url":"https://api.github.com/users/ianbrayoni/received_events","type":"User","site_admin":false},"labels":[{"id":548307063,"node_id":"MDU6TGFiZWw1NDgzMDcwNjM=","url":"https://api.github.com/repos/donnemartin/system-design-primer/labels/enhancement","name":"enhancement","color":"bfe5bf","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-04-08T08:04:05Z","updated_at":"2020-08-03T08:57:13Z","closed_at":"2020-08-03T08:57:13Z","author_association":"NONE","active_lock_reason":null,"body":"Inspired by this [change request](https://bugs.python.org/issue34605)\r\n\r\n`master` and `slave` are a reminder of a painful world history, that is, they are racially charged terms.\r\n\r\nI move that we purge these terms in favour of:\r\n\r\n- `primary`, `replica`\r\n- `primary`, `secondary`\r\n\r\nPopular open-source communities have adopted newer references:\r\nhttps://github.com/django/django/pull/2692\r\nhttps://github.com/antirez/redis/issues/3185\r\nhttps://issues.apache.org/jira/browse/COUCHDB-2248\r\n\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/cloudant/python-cloudant/issues/363","repository_url":"https://api.github.com/repos/cloudant/python-cloudant","labels_url":"https://api.github.com/repos/cloudant/python-cloudant/issues/363/labels{/name}","comments_url":"https://api.github.com/repos/cloudant/python-cloudant/issues/363/comments","events_url":"https://api.github.com/repos/cloudant/python-cloudant/issues/363/events","html_url":"https://github.com/cloudant/python-cloudant/issues/363","id":298342803,"node_id":"MDU6SXNzdWUyOTgzNDI4MDM=","number":363,"title":"encoding with 'idna' codec failed (UnicodeError: label empty or too long)","user":{"login":"Rahulvks","id":14966169,"node_id":"MDQ6VXNlcjE0OTY2MTY5","avatar_url":"https://avatars2.githubusercontent.com/u/14966169?v=4","gravatar_id":"","url":"https://api.github.com/users/Rahulvks","html_url":"https://github.com/Rahulvks","followers_url":"https://api.github.com/users/Rahulvks/followers","following_url":"https://api.github.com/users/Rahulvks/following{/other_user}","gists_url":"https://api.github.com/users/Rahulvks/gists{/gist_id}","starred_url":"https://api.github.com/users/Rahulvks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rahulvks/subscriptions","organizations_url":"https://api.github.com/users/Rahulvks/orgs","repos_url":"https://api.github.com/users/Rahulvks/repos","events_url":"https://api.github.com/users/Rahulvks/events{/privacy}","received_events_url":"https://api.github.com/users/Rahulvks/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"smithsz","id":5632401,"node_id":"MDQ6VXNlcjU2MzI0MDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5632401?v=4","gravatar_id":"","url":"https://api.github.com/users/smithsz","html_url":"https://github.com/smithsz","followers_url":"https://api.github.com/users/smithsz/followers","following_url":"https://api.github.com/users/smithsz/following{/other_user}","gists_url":"https://api.github.com/users/smithsz/gists{/gist_id}","starred_url":"https://api.github.com/users/smithsz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smithsz/subscriptions","organizations_url":"https://api.github.com/users/smithsz/orgs","repos_url":"https://api.github.com/users/smithsz/repos","events_url":"https://api.github.com/users/smithsz/events{/privacy}","received_events_url":"https://api.github.com/users/smithsz/received_events","type":"User","site_admin":false},"assignees":[{"login":"smithsz","id":5632401,"node_id":"MDQ6VXNlcjU2MzI0MDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5632401?v=4","gravatar_id":"","url":"https://api.github.com/users/smithsz","html_url":"https://github.com/smithsz","followers_url":"https://api.github.com/users/smithsz/followers","following_url":"https://api.github.com/users/smithsz/following{/other_user}","gists_url":"https://api.github.com/users/smithsz/gists{/gist_id}","starred_url":"https://api.github.com/users/smithsz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smithsz/subscriptions","organizations_url":"https://api.github.com/users/smithsz/orgs","repos_url":"https://api.github.com/users/smithsz/repos","events_url":"https://api.github.com/users/smithsz/events{/privacy}","received_events_url":"https://api.github.com/users/smithsz/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/cloudant/python-cloudant/milestones/16","html_url":"https://github.com/cloudant/python-cloudant/milestone/16","labels_url":"https://api.github.com/repos/cloudant/python-cloudant/milestones/16/labels","id":3121915,"node_id":"MDk6TWlsZXN0b25lMzEyMTkxNQ==","number":16,"title":"2.9.0","description":"","creator":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars0.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":18,"state":"closed","created_at":"2018-02-16T12:35:09Z","updated_at":"2018-06-13T17:43:25Z","due_on":null,"closed_at":"2018-06-13T17:43:25Z"},"comments":23,"created_at":"2018-02-19T16:52:51Z","updated_at":"2020-11-02T09:14:53Z","closed_at":"2018-06-13T17:40:57Z","author_association":"NONE","active_lock_reason":null,"body":"`client = Cloudant(serviceUsername, servicePassword, url=serviceURL)\r\nclient.connect() `\r\n\r\n- Python 3 \r\n`---------------------------------------------------------------------------\r\nUnicodeError                              Traceback (most recent call last)\r\n/Users/dsg281/anaconda/lib/python3.6/encodings/idna.py in encode(self, input, errors)\r\n    164                 if not (0 < len(label) < 64):\r\n--> 165                     raise UnicodeError(\"label empty or too long\")\r\n    166             if len(labels[-1]) >= 64:\r\n\r\nUnicodeError: label empty or too long\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nUnicodeError                              Traceback (most recent call last)\r\n<ipython-input-7-484db1d2cd45> in <module>()\r\n      1 # Use the Cloudant library to create a Cloudant client.\r\n      2 client = Cloudant(serviceUsername, servicePassword, url=serviceURL)\r\n----> 3 client.connect()\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/cloudant/client.py in connect(self)\r\n    140             self.r_session.headers.update(self._client_user_header)\r\n    141 \r\n--> 142         self.session_login()\r\n    143 \r\n    144         # Utilize an event hook to append to the response message\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/cloudant/client.py in session_login(self, user, passwd)\r\n    181         :param str auth_token: Authentication token used to connect to server.\r\n    182         \"\"\"\r\n--> 183         self.change_credentials(user=user, auth_token=passwd)\r\n    184 \r\n    185     def change_credentials(self, user=None, auth_token=None):\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/cloudant/client.py in change_credentials(self, user, auth_token)\r\n    191         \"\"\"\r\n    192         self.r_session.set_credentials(user, auth_token)\r\n--> 193         self.r_session.login()\r\n    194 \r\n    195     def session_logout(self):\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/cloudant/_client_session.py in login(self)\r\n    148             'POST',\r\n    149             self._session_url,\r\n--> 150             data={'name': self._username, 'password': self._password},\r\n    151         )\r\n    152         resp.raise_for_status()\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/cloudant/_client_session.py in request(self, method, url, **kwargs)\r\n     63         \"\"\"\r\n     64         resp = super(ClientSession, self).request(\r\n---> 65             method, url, timeout=self._timeout, **kwargs)\r\n     66 \r\n     67         return resp\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/requests/sessions.py in request(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, stream, verify, cert, json)\r\n    497 \r\n    498         settings = self.merge_environment_settings(\r\n--> 499             prep.url, proxies, stream, verify, cert\r\n    500         )\r\n    501 \r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/requests/sessions.py in merge_environment_settings(self, url, proxies, stream, verify, cert)\r\n    670             # Set environment's proxies.\r\n    671             no_proxy = proxies.get('no_proxy') if proxies is not None else None\r\n--> 672             env_proxies = get_environ_proxies(url, no_proxy=no_proxy)\r\n    673             for (k, v) in env_proxies.items():\r\n    674                 proxies.setdefault(k, v)\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/requests/utils.py in get_environ_proxies(url, no_proxy)\r\n    690     :rtype: dict\r\n    691     \"\"\"\r\n--> 692     if should_bypass_proxies(url, no_proxy=no_proxy):\r\n    693         return {}\r\n    694     else:\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/site-packages/requests/utils.py in should_bypass_proxies(url, no_proxy)\r\n    674     with set_environ('no_proxy', no_proxy_arg):\r\n    675         try:\r\n--> 676             bypass = proxy_bypass(netloc)\r\n    677         except (TypeError, socket.gaierror):\r\n    678             bypass = False\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/urllib/request.py in proxy_bypass(host)\r\n   2610             return proxy_bypass_environment(host, proxies)\r\n   2611         else:\r\n-> 2612             return proxy_bypass_macosx_sysconf(host)\r\n   2613 \r\n   2614     def getproxies():\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/urllib/request.py in proxy_bypass_macosx_sysconf(host)\r\n   2587     def proxy_bypass_macosx_sysconf(host):\r\n   2588         proxy_settings = _get_proxy_settings()\r\n-> 2589         return _proxy_bypass_macosx_sysconf(host, proxy_settings)\r\n   2590 \r\n   2591     def getproxies_macosx_sysconf():\r\n\r\n/Users/dsg281/anaconda/lib/python3.6/urllib/request.py in _proxy_bypass_macosx_sysconf(host, proxy_settings)\r\n   2560             if hostIP is None:\r\n   2561                 try:\r\n-> 2562                     hostIP = socket.gethostbyname(hostonly)\r\n   2563                     hostIP = ip2num(hostIP)\r\n   2564                 except OSError:\r\n\r\nUnicodeError: encoding with 'idna' codec failed (UnicodeError: label empty or too long)`\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/3061","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/3061/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/3061/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/3061/events","html_url":"https://github.com/apache/couchdb/issues/3061","id":674240010,"node_id":"MDU6SXNzdWU2NzQyNDAwMTA=","number":3061,"title":"couch_index_server crashes too easily","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars1.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","site_admin":false},"labels":[{"id":594290317,"node_id":"MDU6TGFiZWw1OTQyOTAzMTc=","url":"https://api.github.com/repos/apache/couchdb/labels/bug","name":"bug","color":"FF9F96","default":true,"description":""},{"id":1205319335,"node_id":"MDU6TGFiZWwxMjA1MzE5MzM1","url":"https://api.github.com/repos/apache/couchdb/labels/needs-triage","name":"needs-triage","color":"ffff33","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2020-08-06T11:26:18Z","updated_at":"2020-08-12T11:04:39Z","closed_at":"2020-08-12T11:04:39Z","author_association":"MEMBER","active_lock_reason":null,"body":"We have a problem with couch_index_server.\r\n\r\nhandle_info({'EXIT', Pid, Reason}, Server) ->\r\n    case ets:lookup(?BY_PID, Pid) of\r\n        [{Pid, {DbName, Sig}}] ->\r\n            DDocIds = [DDocId || {_, {DDocId, _}}\r\n                <- ets:match_object(?BY_DB, {DbName, {'$1', Sig}})],\r\n            rem_from_ets(DbName, Sig, DDocIds, Pid);\r\n        [] when Reason /= normal ->\r\n            exit(Reason); <--\r\n\r\nwhenever an index process crashes abnormally couch_index_server also terminates, taking all other index processes with it.\r\n\r\nThe cause of the couch_index crash I saw this with was from couch_mrview_index;\r\n\r\nclose(State) ->\r\n    erlang:demonitor(State#mrst.fd_monitor, [flush]),\r\n    couch_file:close(State#mrst.fd).\r\n\r\nwhere the \"fd\" was not a live process.\r\n\r\ncouch_index_server should _not_ terminate if there is an abnormal exit by a single index.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb-docker/issues/73","repository_url":"https://api.github.com/repos/apache/couchdb-docker","labels_url":"https://api.github.com/repos/apache/couchdb-docker/issues/73/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb-docker/issues/73/comments","events_url":"https://api.github.com/repos/apache/couchdb-docker/issues/73/events","html_url":"https://github.com/apache/couchdb-docker/issues/73","id":312282594,"node_id":"MDU6SXNzdWUzMTIyODI1OTQ=","number":73,"title":"Configuration from docker config or secret?","user":{"login":"endyjasmi","id":1048745,"node_id":"MDQ6VXNlcjEwNDg3NDU=","avatar_url":"https://avatars2.githubusercontent.com/u/1048745?v=4","gravatar_id":"","url":"https://api.github.com/users/endyjasmi","html_url":"https://github.com/endyjasmi","followers_url":"https://api.github.com/users/endyjasmi/followers","following_url":"https://api.github.com/users/endyjasmi/following{/other_user}","gists_url":"https://api.github.com/users/endyjasmi/gists{/gist_id}","starred_url":"https://api.github.com/users/endyjasmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/endyjasmi/subscriptions","organizations_url":"https://api.github.com/users/endyjasmi/orgs","repos_url":"https://api.github.com/users/endyjasmi/repos","events_url":"https://api.github.com/users/endyjasmi/events{/privacy}","received_events_url":"https://api.github.com/users/endyjasmi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2018-04-08T07:53:44Z","updated_at":"2020-08-25T08:47:08Z","closed_at":"2018-04-11T18:01:40Z","author_association":"NONE","active_lock_reason":null,"body":"I am trying to run CouchDB cluster with this image in production and everything works fine. My question is, is there anyway for us to mount config file from docker swarm config or secret. Currently doing so will cause the image to complain about chmod againts read only file system.\r\n\r\n## Expected Behavior\r\nCouchDB should be able to read the docker swarm secret mounted at `/opt/couchdb/etc/local.d/config.ini`.\r\n\r\n## Current Behavior\r\nComplain about changing permission for read only file system on boot.\r\n\r\n## Possible Solution\r\nMaybe remove the chmod command at `docker-entrypoint.sh`?\r\n\r\n## Steps to Reproduce (for bugs)\r\n1. Prepare a sample `config.ini`\r\n2. Create a `docker-compose.yml` file with the following content;\r\n```yml\r\nversion: \"3.5\"\r\n\r\nnetworks:\r\n  network:\r\n    driver: overlay\r\n\r\nsecrets:\r\n  config:\r\n    file: ./config.ini\r\n\r\nservices:\r\n  server-0:\r\n    environment:\r\n      COUCHDB_PASSWORD: -pbkdf2-847043acc65626c8eb98da6d78682fbc493a1787,f7b1a3e4b624f4f0bbfe87e96841eda0,10 // <- password\r\n      COUCHDB_SECRET: 0123456789abcdef0123456789abcdef\r\n      COUCHDB_USER: couchdb\r\n      NODENAME: couchdb-0.docker.com\r\n    image: couchdb:2.1.1\r\n    networks:\r\n      network:\r\n        aliases:\r\n          - couchdb-0.docker.com\r\n    ports:\r\n      - \"5984:5984\"\r\n      - \"5986:5986\"\r\n    secrets:\r\n      - source: config\r\n        target: /opt/couchdb/etc/local.d/config.ini\r\n        uid: \"5984\"\r\n        gid: \"5984\"\r\n        mode: 0444\r\n    volumes:\r\n      - \"volume-0:/opt/couchdb/data\"\r\n  server-1:\r\n    environment:\r\n      COUCHDB_PASSWORD: -pbkdf2-847043acc65626c8eb98da6d78682fbc493a1787,f7b1a3e4b624f4f0bbfe87e96841eda0,10\r\n      COUCHDB_SECRET: 0123456789abcdef0123456789abcdef\r\n      COUCHDB_USER: couchdb\r\n      NODENAME: couchdb-1.docker.com\r\n    image: couchdb:2.1.1\r\n    networks:\r\n      network:\r\n        aliases:\r\n          - couchdb-1.docker.com\r\n    ports:\r\n      - \"15984:5984\"\r\n      - \"15986:5986\"\r\n    secrets:\r\n      - source: config\r\n        target: /opt/couchdb/etc/local.d/config.ini\r\n        uid: \"5984\"\r\n        gid: \"5984\"\r\n        mode: 0444\r\n    volumes:\r\n      - \"volume-1:/opt/couchdb/data\"\r\n  server-2:\r\n    environment:\r\n      COUCHDB_PASSWORD: -pbkdf2-847043acc65626c8eb98da6d78682fbc493a1787,f7b1a3e4b624f4f0bbfe87e96841eda0,10\r\n      COUCHDB_SECRET: 0123456789abcdef0123456789abcdef\r\n      COUCHDB_USER: couchdb\r\n      NODENAME: couchdb-2.docker.com\r\n    image: couchdb:2.1.1\r\n    networks:\r\n      network:\r\n        aliases:\r\n          - couchdb-2.docker.com\r\n    ports:\r\n      - \"25984:5984\"\r\n      - \"25986:5986\"\r\n    secrets:\r\n      - source: config\r\n        target: /opt/couchdb/etc/local.d/config.ini\r\n        uid: \"5984\"\r\n        gid: \"5984\"\r\n        mode: 0444\r\n    volumes:\r\n      - \"volume-2:/opt/couchdb/data\"\r\n\r\nvolumes:\r\n  volume-0:\r\n  volume-1:\r\n  volume-2:\r\n```\r\n3. Run `docker stack deploy --compose-file docker-compose.yml couchdb` againts a docker swarm.\r\n4. You can view the log at `docker service logs -f couchdb_server-0`\r\n\r\n## Context\r\nBasically I am trying to deploy CouchDB cluster to the production using docker swarm.\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/Aam-Digital/ndb-core/issues/267","repository_url":"https://api.github.com/repos/Aam-Digital/ndb-core","labels_url":"https://api.github.com/repos/Aam-Digital/ndb-core/issues/267/labels{/name}","comments_url":"https://api.github.com/repos/Aam-Digital/ndb-core/issues/267/comments","events_url":"https://api.github.com/repos/Aam-Digital/ndb-core/issues/267/events","html_url":"https://github.com/Aam-Digital/ndb-core/issues/267","id":445809491,"node_id":"MDU6SXNzdWU0NDU4MDk0OTE=","number":267,"title":"CouchDB Fauxton doesn't work correctly","user":{"login":"sleidig","id":1682541,"node_id":"MDQ6VXNlcjE2ODI1NDE=","avatar_url":"https://avatars0.githubusercontent.com/u/1682541?v=4","gravatar_id":"","url":"https://api.github.com/users/sleidig","html_url":"https://github.com/sleidig","followers_url":"https://api.github.com/users/sleidig/followers","following_url":"https://api.github.com/users/sleidig/following{/other_user}","gists_url":"https://api.github.com/users/sleidig/gists{/gist_id}","starred_url":"https://api.github.com/users/sleidig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sleidig/subscriptions","organizations_url":"https://api.github.com/users/sleidig/orgs","repos_url":"https://api.github.com/users/sleidig/repos","events_url":"https://api.github.com/users/sleidig/events{/privacy}","received_events_url":"https://api.github.com/users/sleidig/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-05-19T11:35:46Z","updated_at":"2020-09-08T20:14:01Z","closed_at":"2020-05-12T17:46:44Z","author_association":"MEMBER","active_lock_reason":null,"body":"[Fauxton](http://couchdb.apache.org/fauxton-visual-guide/), the GUI database browser of CouchDB, accessible at https://demo.aam-digital.com/db/_utils/  doesn't work correctly in our setup and throws errors.\r\n\r\nThis may be due to the fact that CouchDB is reverse-proxied to a \"subfolder\" URL, see https://issues.apache.org/jira/browse/COUCHDB-3155","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/swarmpit/swarmpit/issues/424","repository_url":"https://api.github.com/repos/swarmpit/swarmpit","labels_url":"https://api.github.com/repos/swarmpit/swarmpit/issues/424/labels{/name}","comments_url":"https://api.github.com/repos/swarmpit/swarmpit/issues/424/comments","events_url":"https://api.github.com/repos/swarmpit/swarmpit/issues/424/events","html_url":"https://github.com/swarmpit/swarmpit/issues/424","id":533991400,"node_id":"MDU6SXNzdWU1MzM5OTE0MDA=","number":424,"title":"Swarmpit doesn't start if there are other nodes in the swarm cluster","user":{"login":"adamkdean","id":1639527,"node_id":"MDQ6VXNlcjE2Mzk1Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/1639527?v=4","gravatar_id":"","url":"https://api.github.com/users/adamkdean","html_url":"https://github.com/adamkdean","followers_url":"https://api.github.com/users/adamkdean/followers","following_url":"https://api.github.com/users/adamkdean/following{/other_user}","gists_url":"https://api.github.com/users/adamkdean/gists{/gist_id}","starred_url":"https://api.github.com/users/adamkdean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamkdean/subscriptions","organizations_url":"https://api.github.com/users/adamkdean/orgs","repos_url":"https://api.github.com/users/adamkdean/repos","events_url":"https://api.github.com/users/adamkdean/events{/privacy}","received_events_url":"https://api.github.com/users/adamkdean/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"nohaapav","id":4179104,"node_id":"MDQ6VXNlcjQxNzkxMDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/4179104?v=4","gravatar_id":"","url":"https://api.github.com/users/nohaapav","html_url":"https://github.com/nohaapav","followers_url":"https://api.github.com/users/nohaapav/followers","following_url":"https://api.github.com/users/nohaapav/following{/other_user}","gists_url":"https://api.github.com/users/nohaapav/gists{/gist_id}","starred_url":"https://api.github.com/users/nohaapav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nohaapav/subscriptions","organizations_url":"https://api.github.com/users/nohaapav/orgs","repos_url":"https://api.github.com/users/nohaapav/repos","events_url":"https://api.github.com/users/nohaapav/events{/privacy}","received_events_url":"https://api.github.com/users/nohaapav/received_events","type":"User","site_admin":false},"assignees":[{"login":"nohaapav","id":4179104,"node_id":"MDQ6VXNlcjQxNzkxMDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/4179104?v=4","gravatar_id":"","url":"https://api.github.com/users/nohaapav","html_url":"https://github.com/nohaapav","followers_url":"https://api.github.com/users/nohaapav/followers","following_url":"https://api.github.com/users/nohaapav/following{/other_user}","gists_url":"https://api.github.com/users/nohaapav/gists{/gist_id}","starred_url":"https://api.github.com/users/nohaapav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nohaapav/subscriptions","organizations_url":"https://api.github.com/users/nohaapav/orgs","repos_url":"https://api.github.com/users/nohaapav/repos","events_url":"https://api.github.com/users/nohaapav/events{/privacy}","received_events_url":"https://api.github.com/users/nohaapav/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/swarmpit/swarmpit/milestones/2","html_url":"https://github.com/swarmpit/swarmpit/milestone/2","labels_url":"https://api.github.com/repos/swarmpit/swarmpit/milestones/2/labels","id":2680953,"node_id":"MDk6TWlsZXN0b25lMjY4MDk1Mw==","number":2,"title":"1.10","description":"","creator":{"login":"nohaapav","id":4179104,"node_id":"MDQ6VXNlcjQxNzkxMDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/4179104?v=4","gravatar_id":"","url":"https://api.github.com/users/nohaapav","html_url":"https://github.com/nohaapav","followers_url":"https://api.github.com/users/nohaapav/followers","following_url":"https://api.github.com/users/nohaapav/following{/other_user}","gists_url":"https://api.github.com/users/nohaapav/gists{/gist_id}","starred_url":"https://api.github.com/users/nohaapav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nohaapav/subscriptions","organizations_url":"https://api.github.com/users/nohaapav/orgs","repos_url":"https://api.github.com/users/nohaapav/repos","events_url":"https://api.github.com/users/nohaapav/events{/privacy}","received_events_url":"https://api.github.com/users/nohaapav/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":18,"state":"open","created_at":"2017-08-04T13:04:48Z","updated_at":"2020-09-30T12:45:15Z","due_on":null,"closed_at":null},"comments":31,"created_at":"2019-12-06T13:40:43Z","updated_at":"2020-09-30T07:34:06Z","closed_at":"2020-09-29T14:13:51Z","author_association":"NONE","active_lock_reason":null,"body":"Really simple to recreate this. Initialise swarm and add two more nodes, and then run the install container. It spins up the required containers but spreads them out, and then the periodic curl check goes on forever before giving you the failure message.\r\n\r\n```\r\nStarting swarmpit.......................FAILED!\r\nSwarmpit is not responding for a long time. Aborting installation...:(\r\nPlease check logs and cluster status for details.\r\n```\r\n\r\nI tried this a few times before wondering if it is meant to be setup on the manager alone, and when I tried that, it worked:\r\n\r\n```\r\nStarting swarmpit.............DONE.\r\nInitializing swarmpit...DONE.\r\n\r\nSummary\r\nUsername: admin\r\nPassword: <snip>\r\nSwarmpit is running on port :888\r\n\r\nEnjoy :)\r\n```\r\n\r\nSo I think either the docs need updating to explain that there should only be one node in the cluster at the point of install, or there should be a way that it only deploys to the current node.","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/netdata/netdata/issues/5690","repository_url":"https://api.github.com/repos/netdata/netdata","labels_url":"https://api.github.com/repos/netdata/netdata/issues/5690/labels{/name}","comments_url":"https://api.github.com/repos/netdata/netdata/issues/5690/comments","events_url":"https://api.github.com/repos/netdata/netdata/issues/5690/events","html_url":"https://github.com/netdata/netdata/issues/5690","id":424510308,"node_id":"MDU6SXNzdWU0MjQ1MTAzMDg=","number":5690,"title":"How to install openvpn plugin","user":{"login":"PrzemekSkw","id":25219988,"node_id":"MDQ6VXNlcjI1MjE5OTg4","avatar_url":"https://avatars3.githubusercontent.com/u/25219988?v=4","gravatar_id":"","url":"https://api.github.com/users/PrzemekSkw","html_url":"https://github.com/PrzemekSkw","followers_url":"https://api.github.com/users/PrzemekSkw/followers","following_url":"https://api.github.com/users/PrzemekSkw/following{/other_user}","gists_url":"https://api.github.com/users/PrzemekSkw/gists{/gist_id}","starred_url":"https://api.github.com/users/PrzemekSkw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrzemekSkw/subscriptions","organizations_url":"https://api.github.com/users/PrzemekSkw/orgs","repos_url":"https://api.github.com/users/PrzemekSkw/repos","events_url":"https://api.github.com/users/PrzemekSkw/events{/privacy}","received_events_url":"https://api.github.com/users/PrzemekSkw/received_events","type":"User","site_admin":false},"labels":[{"id":1065921486,"node_id":"MDU6TGFiZWwxMDY1OTIxNDg2","url":"https://api.github.com/repos/netdata/netdata/labels/area/external/python","name":"area/external/python","color":"0f34c6","default":false,"description":"Python plugin related issues"},{"id":43793264,"node_id":"MDU6TGFiZWw0Mzc5MzI2NA==","url":"https://api.github.com/repos/netdata/netdata/labels/question","name":"question","color":"cc317c","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":80,"created_at":"2019-03-23T15:10:16Z","updated_at":"2020-11-09T03:03:02Z","closed_at":"2019-03-25T11:46:09Z","author_association":"NONE","active_lock_reason":null,"body":"\r\n##### Question summary \r\nHi, I'm new in servers and first time install debian 9 server on VPS. Then install openvpn with openvpn-install script. I try to install few montitoring tools for my server but always fault. Now I found netdata and it works like a charm. Install script is wanderfull ;) To monitor my openvpn server I have to do something with those files: python.d.plugin, ovpn_status_log.chart.py, python.d/ovpn_status_log.conf? I don't see any tutorial so can anyone guide me what to do?\r\n\r\n##### OS / Environment\r\nDebian 9 64bit\r\n##### Component Name\r\nopenvpn\r\n##### Expected results\r\nsee openvpn traffic\r\n\r\nRegards,\r\nPrzemek","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb/issues/2441","repository_url":"https://api.github.com/repos/apache/couchdb","labels_url":"https://api.github.com/repos/apache/couchdb/issues/2441/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb/issues/2441/comments","events_url":"https://api.github.com/repos/apache/couchdb/issues/2441/events","html_url":"https://github.com/apache/couchdb/issues/2441","id":548207707,"node_id":"MDU6SXNzdWU1NDgyMDc3MDc=","number":2441,"title":"Memory Usage Keeps Increasing Gradually","user":{"login":"arifcse019","id":10591704,"node_id":"MDQ6VXNlcjEwNTkxNzA0","avatar_url":"https://avatars0.githubusercontent.com/u/10591704?v=4","gravatar_id":"","url":"https://api.github.com/users/arifcse019","html_url":"https://github.com/arifcse019","followers_url":"https://api.github.com/users/arifcse019/followers","following_url":"https://api.github.com/users/arifcse019/following{/other_user}","gists_url":"https://api.github.com/users/arifcse019/gists{/gist_id}","starred_url":"https://api.github.com/users/arifcse019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arifcse019/subscriptions","organizations_url":"https://api.github.com/users/arifcse019/orgs","repos_url":"https://api.github.com/users/arifcse019/repos","events_url":"https://api.github.com/users/arifcse019/events{/privacy}","received_events_url":"https://api.github.com/users/arifcse019/received_events","type":"User","site_admin":false},"labels":[{"id":594290317,"node_id":"MDU6TGFiZWw1OTQyOTAzMTc=","url":"https://api.github.com/repos/apache/couchdb/labels/bug","name":"bug","color":"FF9F96","default":true,"description":""},{"id":1205319335,"node_id":"MDU6TGFiZWwxMjA1MzE5MzM1","url":"https://api.github.com/repos/apache/couchdb/labels/needs-triage","name":"needs-triage","color":"ffff33","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2020-01-10T17:42:00Z","updated_at":"2020-08-18T13:40:52Z","closed_at":"2020-04-27T18:14:05Z","author_association":"NONE","active_lock_reason":null,"body":"[NOTE]: # ( ^^ Provide a general summary of the issue in the title above. ^^ )\r\n\r\n## Description\r\n\r\n[NOTE]: # ( Describe the problem you're encountering. )\r\n[TIP]:  # ( Do NOT give us access or passwords to your actual CouchDB! )\r\n\r\nMemory usage of our CouchDB Cluster keeps increasing week by week until we have to restart it to release the memory. There is no attachment or conflict (verified programmatically using views)  or big document (our biggest document size is ~27 KB)\r\n\r\n## Steps to Reproduce\r\n\r\n- Running the cluster for a few weeks, you would see the memory usage increasing week by week.\r\n\r\n## Expected Behaviour\r\n\r\nMemory usage remains relatively stable/flat\r\n\r\n## Your Environment\r\n\r\n[TIP]:  # ( Include as many relevant details about your environment as possible. )\r\n[TIP]:  # ( You can paste the output of curl http://YOUR-COUCHDB:5984/ here. )\r\n\r\n{\"couchdb\":\"Welcome\",\"version\":\"2.3.1\",\"git_sha\":\"c298091a4\",\"uuid\":\"4ebb08d132299ae512bd001e673fc7fa\",\"features\":[\"pluggable-storage-engines\",\"scheduler\"],\"vendor\":{\"name\":\"The Apache Software Foundation\"}}\r\n\r\n* CouchDB version used: 2.3.1\r\n* 3 Nodes Cluster, n=3, q=9\r\n* ~15 thousand databases, total data size in the disk is ~11G in each of the three nodes.\r\n* Browser name and version: Not Applicable\r\n* Operating system and version: Ubuntu 14.04\r\n\r\n## Additional Context\r\n\r\n- Among the CouchDB memory components, it is the \"processes\" which is gradually increasing as can be seen in the diagram below (the dip is when we restarted it last time): \r\n![primary_node_memory](https://user-images.githubusercontent.com/10591704/72171019-3e7de780-338f-11ea-93bf-b978caa8bcfd.png)\r\n\r\n- I tried to find individual processes' memory usage, but the total Heap+Stack from `i().` =~ 40MB does not match up with the processes component of `erlang:memory().` =~ 2.7GB  \r\n\r\nFollowing are the commands I tried\r\n\r\n`root@ip-10-0-3-10:~# erl -name test -remsh couchdb@first.couchcluster.internal  -setcookie redacted`\r\n\r\n> Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:2:2] [async-threads:10] [kernel-poll:false]\r\n\r\n> Eshell V8.3.5  (abort with ^G)\r\n`(couchdb@first.couchcluster.internal)1> erlang:memory().`\r\n\r\n> [{total,2834080280},\r\n>  {processes,2709523496},\r\n>  {processes_used,2709484152},\r\n>  {system,124556784},\r\n>  {atom,512625},\r\n>  {atom_used,505104},\r\n>  {binary,1510536},\r\n>  {code,11770466},\r\n>  {ets,103666808}]\r\n\r\n`(couchdb@first.couchcluster.internal)2> i().`\r\n\r\n> Pid         Initial Call           Heap     Reds Msgs Registered     Current Function    Stack              \r\n> <0.0.0>     otp_ring0:start/2      1598     4032    0 init           init:loop/1         2\r\n> \r\n> .\r\n> .\r\n> .\r\n> \r\n> Total                             40590405 31290642  0                                   10320\r\n\r\n- We upgraded the cluster in-place from 2.1.2 to 2.3.1 a few months ago. We did not have this memory usage issue/trend on 2.1.2. Not sure if it is related or not since we upgraded, we are seeing this error regularly: https://github.com/apache/couchdb/issues/1600#issuecomment-523982028\r\n\r\n- Not sure about its relevance, but the following are two design documents we have and use in all of our 15 thousand databases:\r\n\r\n`{\"_id\":\"_design/permissions\",\"_rev\":\"3-e99851a9513d6e9c973a598d69523645\",\"filters\":{\"user_documents_to_account\":\"function(doc, req) {\\n                                  if (doc._id.indexOf('_') === 0) return false;\\n                                  if (!req.query.account_id || !doc.accountId) return false;\\n                                  if (req.query.account_id != doc.accountId) return false;\\n                                  if (req.query.roles.indexOf('account_writer') !== -1) return true;\\n                                  if (doc._id.indexOf('account' === 0) && req.query.roles.indexOf('account_info_writer') !== -1) return true;\\n                                  return false;\\n                                }\"}}`\r\n\r\n`{\"_id\":\"_design/logDocs\",\"_rev\":\"1-e64774d95fb1fc9e9c20842eb38edffd\",\"validate_doc_update\":\"function (newDoc, oldDoc, userCtx){\\n          var logData = JSON.stringify({newDoc: newDoc, oldDoc: oldDoc, userCtx: userCtx})\\n          log('[ATVENU] ' + logData);\\n      }\"}`","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/ermouth/couch-photon/issues/26","repository_url":"https://api.github.com/repos/ermouth/couch-photon","labels_url":"https://api.github.com/repos/ermouth/couch-photon/issues/26/labels{/name}","comments_url":"https://api.github.com/repos/ermouth/couch-photon/issues/26/comments","events_url":"https://api.github.com/repos/ermouth/couch-photon/issues/26/events","html_url":"https://github.com/ermouth/couch-photon/issues/26","id":640146678,"node_id":"MDU6SXNzdWU2NDAxNDY2Nzg=","number":26,"title":"Photon doesn‚Äôt always block CouchDB bug #1472","user":{"login":"ermouth","id":1540047,"node_id":"MDQ6VXNlcjE1NDAwNDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1540047?v=4","gravatar_id":"","url":"https://api.github.com/users/ermouth","html_url":"https://github.com/ermouth","followers_url":"https://api.github.com/users/ermouth/followers","following_url":"https://api.github.com/users/ermouth/following{/other_user}","gists_url":"https://api.github.com/users/ermouth/gists{/gist_id}","starred_url":"https://api.github.com/users/ermouth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ermouth/subscriptions","organizations_url":"https://api.github.com/users/ermouth/orgs","repos_url":"https://api.github.com/users/ermouth/repos","events_url":"https://api.github.com/users/ermouth/events{/privacy}","received_events_url":"https://api.github.com/users/ermouth/received_events","type":"User","site_admin":false},"labels":[{"id":684678739,"node_id":"MDU6TGFiZWw2ODQ2Nzg3Mzk=","url":"https://api.github.com/repos/ermouth/couch-photon/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-06-17T05:13:02Z","updated_at":"2020-06-17T05:31:41Z","closed_at":"2020-06-17T05:31:41Z","author_association":"OWNER","active_lock_reason":null,"body":"In certain circumstances Photon seems allowing saving Mango index with empty `ddoc` field, which leads to https://github.com/apache/couchdb/issues/1472.\r\n\r\nReported at https://tinyurl.com/y8s257qk","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb-docker/issues/184","repository_url":"https://api.github.com/repos/apache/couchdb-docker","labels_url":"https://api.github.com/repos/apache/couchdb-docker/issues/184/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb-docker/issues/184/comments","events_url":"https://api.github.com/repos/apache/couchdb-docker/issues/184/events","html_url":"https://github.com/apache/couchdb-docker/issues/184","id":650449718,"node_id":"MDU6SXNzdWU2NTA0NDk3MTg=","number":184,"title":"Set single_node using an environment variable?","user":{"login":"coreyfarrell","id":903597,"node_id":"MDQ6VXNlcjkwMzU5Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/903597?v=4","gravatar_id":"","url":"https://api.github.com/users/coreyfarrell","html_url":"https://github.com/coreyfarrell","followers_url":"https://api.github.com/users/coreyfarrell/followers","following_url":"https://api.github.com/users/coreyfarrell/following{/other_user}","gists_url":"https://api.github.com/users/coreyfarrell/gists{/gist_id}","starred_url":"https://api.github.com/users/coreyfarrell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coreyfarrell/subscriptions","organizations_url":"https://api.github.com/users/coreyfarrell/orgs","repos_url":"https://api.github.com/users/coreyfarrell/repos","events_url":"https://api.github.com/users/coreyfarrell/events{/privacy}","received_events_url":"https://api.github.com/users/coreyfarrell/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-07-03T08:53:20Z","updated_at":"2020-07-06T08:30:27Z","closed_at":"2020-07-03T09:03:03Z","author_association":"NONE","active_lock_reason":null,"body":"## Expected Behavior\r\nI'm looking for a way to run a temporary couchdb container with `single_node=true` set.\r\n\r\n## Current Behavior\r\n`single_mode=false` is the default, this causes system databases to not be created and spams the log with failed access.  The default be changed without mounting a volume or creating an inherited container image.\r\n\r\n## Possible Solution\r\nEnable support for `-e COUCHDB_SINGLE_NODE=true` from the initialization script.\r\n\r\n## Context\r\nI'm trying to use this container as part of an automated test suite for a daemon that will use couchdb for storage.  The hope is to use the following command to start a docker container:\r\n```sh\r\npodman run \\\r\n  --rm \\\r\n  -e COUCHDB_USER=admin \\\r\n  -e COUCHDB_PASSWORD=admin \\\r\n  -e COUCHDB_SINGLE_NODE=true \\\r\n  -p 127.0.0.1:5984:5984 \\\r\n  docker.io/library/couchdb:3\r\n```\r\n\r\nI attempted to mount ./fixtures/couchdb to /opt/couchdb/etc/local.d with a local.ini in that folder.  I received SELinux errors first then adding the `:Z` option to the folder mount gave an error `relabeling content in /usr is not allowed` (my code is under `/usr/src`).  I then tried using `mktemp -d` and copying my local.ini to that temp directory.  This allowed couchdb-docker to start and recognize `single_node=true` but unfortunately resulted in the temporary directory ownership being taken over (so removing it after the container runs would require sudo).\r\n\r\n## Your Environment\r\n* Version used: 3.1.0\r\n* Browser Name and version: None\r\n* Operating System and version (desktop or mobile): Fedora 32, using podman 2.0.1.\r\n* Link to your project: N/A\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/openwhisk-devtools/issues/322","repository_url":"https://api.github.com/repos/apache/openwhisk-devtools","labels_url":"https://api.github.com/repos/apache/openwhisk-devtools/issues/322/labels{/name}","comments_url":"https://api.github.com/repos/apache/openwhisk-devtools/issues/322/comments","events_url":"https://api.github.com/repos/apache/openwhisk-devtools/issues/322/events","html_url":"https://github.com/apache/openwhisk-devtools/issues/322","id":667583360,"node_id":"MDU6SXNzdWU2Njc1ODMzNjA=","number":322,"title":"Makefile quick-start error ","user":{"login":"marquies","id":376818,"node_id":"MDQ6VXNlcjM3NjgxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/376818?v=4","gravatar_id":"","url":"https://api.github.com/users/marquies","html_url":"https://github.com/marquies","followers_url":"https://api.github.com/users/marquies/followers","following_url":"https://api.github.com/users/marquies/following{/other_user}","gists_url":"https://api.github.com/users/marquies/gists{/gist_id}","starred_url":"https://api.github.com/users/marquies/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marquies/subscriptions","organizations_url":"https://api.github.com/users/marquies/orgs","repos_url":"https://api.github.com/users/marquies/repos","events_url":"https://api.github.com/users/marquies/events{/privacy}","received_events_url":"https://api.github.com/users/marquies/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2020-07-29T06:21:15Z","updated_at":"2020-08-11T06:40:49Z","closed_at":"2020-08-11T06:40:49Z","author_association":"NONE","active_lock_reason":null,"body":"Hey, thanks for your awesome work. \r\nI want to use the quick-start on an Amazon Linux EC2 instance.\r\n\r\nI get the same error like the travis-ci:\r\n\r\n```\r\npinging minio...\r\n ... OK\r\nopenwhisk_minio_1 is up-to-date\r\n[dumb-init] rclone: No such file or directory\r\nmake: *** [setup] Fehler 2\r\n```\r\n\r\nLooks like the following command causes the error\r\n\r\n```\r\ndocker-compose --project-name openwhisk run --rm --no-deps apigateway rclone mkdir minio:api-gateway\r\nWARNING: The DOCKER_COMPOSE_HOST variable is not set. Defaulting to a blank string.\r\n[dumb-init] rclone: No such file or directory\r\n```\r\n","performed_via_github_app":null,"score":1.0},{"url":"https://api.github.com/repos/apache/couchdb-helm/issues/32","repository_url":"https://api.github.com/repos/apache/couchdb-helm","labels_url":"https://api.github.com/repos/apache/couchdb-helm/issues/32/labels{/name}","comments_url":"https://api.github.com/repos/apache/couchdb-helm/issues/32/comments","events_url":"https://api.github.com/repos/apache/couchdb-helm/issues/32/events","html_url":"https://github.com/apache/couchdb-helm/issues/32","id":641635939,"node_id":"MDU6SXNzdWU2NDE2MzU5Mzk=","number":32,"title":"Warning during install: Skipped value for affinity: Not a table","user":{"login":"borigas","id":2268265,"node_id":"MDQ6VXNlcjIyNjgyNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/2268265?v=4","gravatar_id":"","url":"https://api.github.com/users/borigas","html_url":"https://github.com/borigas","followers_url":"https://api.github.com/users/borigas/followers","following_url":"https://api.github.com/users/borigas/following{/other_user}","gists_url":"https://api.github.com/users/borigas/gists{/gist_id}","starred_url":"https://api.github.com/users/borigas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/borigas/subscriptions","organizations_url":"https://api.github.com/users/borigas/orgs","repos_url":"https://api.github.com/users/borigas/repos","events_url":"https://api.github.com/users/borigas/events{/privacy}","received_events_url":"https://api.github.com/users/borigas/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-06-19T01:09:04Z","updated_at":"2020-06-27T08:59:27Z","closed_at":"2020-06-27T08:59:27Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!-- Thanks for filing an issue! Before hitting the button, please answer these questions. It's helpful to search the existing GitHub issues first. It's likely that another user has already reported the issue you're facing, or it's a known issue that we're already aware of\r\n\r\nFill in as much of the template below as you can.  If you leave out information, we can't help you as well.\r\n\r\nBe ready for followup questions, and please respond in a timely manner. If we can't reproduce a bug or think a feature already exists, we might close your issue.  If we're wrong, PLEASE feel free to reopen it and explain why.\r\n-->\r\n\r\n**Describe the bug**\r\nI get a warning `coalesce.go:160: warning: skipped value for affinity: Not a table.` when trying to install with affinity set in my values file\r\n\r\n**Version of Helm and Kubernetes**:\r\nHelm: 3.2.1\r\nKubernetes: 1.17.5\r\n\r\n**What happened**:\r\nWhen installing, I get a warning: `coalesce.go:160: warning: skipped value for affinity: Not a table.` Warnings cause my deployment pipeline to abort, so I need to get this fixed\r\n\r\n**What you expected to happen**:\r\nThe helm install should succeed without warnings\r\n\r\n**How to reproduce it** (as minimally and precisely as possible):\r\n\r\nCreate repro.yaml:\r\n```yaml\r\ncouchdbConfig:\r\n  couchdb:\r\n    uuid: 123\r\n\r\naffinity:\r\n  podAntiAffinity:\r\n    requiredDuringSchedulingIgnoredDuringExecution:\r\n      - labelSelector:\r\n          matchExpressions:\r\n            - key: \"app\"\r\n              operator: In\r\n              values:\r\n              - couchdb\r\n        topologyKey: \"kubernetes.io/hostname\"\r\n```\r\nThen run `helm install my-name couchdb/couchdb -f repro.yaml`\r\n\r\n**Anything else we need to know**:\r\nIt seems to be tied to having `affinity:` defined in values.yaml without any children. If I comment out this line, the release succeeds without errors and creates the affinity\r\nhttps://github.com/apache/couchdb-helm/blob/deb055f1c11696fb847e177c14176c1f217890cd/couchdb/values.yaml#L87\r\n\r\nI know this isn't the only place that a key is defined without children though, so I'm trying to figure out if there's a better way.","performed_via_github_app":null,"score":1.0}]}
0

